var requirejs, require, define;
!function (e) {
    function t(e, t) {
        return y.call(e, t)
    }
    function n(e, t) {
        var n, r, i, o, s, a, c, l, u, d, p = t && t.split("/"), h = m.map, f = h && h["*"] || {};
        if (e && "." === e.charAt(0))
            if (t) {
                for (p = p.slice(0, p.length - 1),
                    e = p.concat(e.split("/")),
                    l = 0; l < e.length; l += 1)
                    if (d = e[l],
                        "." === d)
                        e.splice(l, 1),
                            l -= 1;
                    else if (".." === d) {
                        if (1 === l && (".." === e[2] || ".." === e[0]))
                            break;
                        l > 0 && (e.splice(l - 1, 2),
                            l -= 2)
                    }
                e = e.join("/")
            } else
                0 === e.indexOf("./") && (e = e.substring(2));
        if ((p || f) && h) {
            for (n = e.split("/"),
                l = n.length; l > 0; l -= 1) {
                if (r = n.slice(0, l).join("/"),
                    p)
                    for (u = p.length; u > 0; u -= 1)
                        if (i = h[p.slice(0, u).join("/")],
                            i && (i = i[r])) {
                            o = i,
                                s = l;
                            break
                        }
                if (o)
                    break;
                !a && f && f[r] && (a = f[r],
                    c = l)
            }
            !o && a && (o = a,
                s = c),
                o && (n.splice(0, s, o),
                    e = n.join("/"))
        }
        return e
    }
    function r(t, n) {
        return function () {
            return u.apply(e, v.call(arguments, 0).concat([t, n]))
        }
    }
    function i(e) {
        return function (t) {
            return n(t, e)
        }
    }
    function o(e) {
        return function (t) {
            h[e] = t
        }
    }
    function s(n) {
        if (t(f, n)) {
            var r = f[n];
            delete f[n],
                g[n] = !0,
                l.apply(e, r)
        }
        if (!t(h, n) && !t(g, n))
            throw new Error("No " + n);
        return h[n]
    }
    function a(e) {
        var t, n = e ? e.indexOf("!") : -1;
        return n > -1 && (t = e.substring(0, n),
            e = e.substring(n + 1, e.length)),
            [t, e]
    }
    function c(e) {
        return function () {
            return m && m.config && m.config[e] || {}
        }
    }
    var l, u, d, p, h = {}, f = {}, m = {}, g = {}, y = Object.prototype.hasOwnProperty, v = [].slice;
    d = function (e, t) {
        var r, o = a(e), c = o[0];
        return e = o[1],
            c && (c = n(c, t),
                r = s(c)),
            c ? e = r && r.normalize ? r.normalize(e, i(t)) : n(e, t) : (e = n(e, t),
                o = a(e),
                c = o[0],
                e = o[1],
                c && (r = s(c))),
            {
                f: c ? c + "!" + e : e,
                n: e,
                pr: c,
                p: r
            }
    }
        ,
        p = {
            require: function (e) {
                return r(e)
            },
            exports: function (e) {
                var t = h[e];
                return "undefined" != typeof t ? t : h[e] = {}
            },
            module: function (e) {
                return {
                    id: e,
                    uri: "",
                    exports: h[e],
                    config: c(e)
                }
            }
        },
        l = function (n, i, a, c) {
            var l, u, m, y, v, b, x = [];
            if (c = c || n,
                "function" == typeof a) {
                for (i = !i.length && a.length ? ["require", "exports", "module"] : i,
                    v = 0; v < i.length; v += 1)
                    if (y = d(i[v], c),
                        u = y.f,
                        "require" === u)
                        x[v] = p.require(n);
                    else if ("exports" === u)
                        x[v] = p.exports(n),
                            b = !0;
                    else if ("module" === u)
                        l = x[v] = p.module(n);
                    else if (t(h, u) || t(f, u) || t(g, u))
                        x[v] = s(u);
                    else {
                        if (!y.p)
                            throw new Error(n + " missing " + u);
                        y.p.load(y.n, r(c, !0), o(u), {}),
                            x[v] = h[u]
                    }
                m = a.apply(h[n], x),
                    n && (l && l.exports !== e && l.exports !== h[n] ? h[n] = l.exports : m === e && b || (h[n] = m))
            } else
                n && (h[n] = a)
        }
        ,
        requirejs = require = u = function (t, n, r, i, o) {
            return "string" == typeof t ? p[t] ? p[t](n) : s(d(t, n).f) : (t.splice || (m = t,
                n.splice ? (t = n,
                    n = r,
                    r = null) : t = e),
                n = n || function () { }
                ,
                "function" == typeof r && (r = i,
                    i = o),
                i ? l(e, t, n, r) : setTimeout(function () {
                    l(e, t, n, r)
                }, 4),
                u)
        }
        ,
        u.config = function (e) {
            return m = e,
                m.deps && u(m.deps, m.callback),
                u
        }
        ,
        define = function (e, n, r) {
            n.splice || (r = n,
                n = []),
                t(h, e) || t(f, e) || (f[e] = [e, n, r])
        }
        ,
        define.amd = {
            jQuery: !0
        }
}(),
    "undefined" != typeof ALMOND_OVERRIDES && ALMOND_OVERRIDES && (define = ALMOND_OVERRIDES.define || define,
        require = ALMOND_OVERRIDES.require || require,
        requirejs = ALMOND_OVERRIDES.requirejs || requirejs),
    define("vendor/almond", function () { }),
    define("testbridge", ["require"], function (e) {
        function t() {
            window.consoleOverride = !0;
            var e = window.console.log;
            window.console.log = function () {
                for (var t = [], n = 0; n < arguments.length; n++)
                    t.push(arguments[n]);
                e.apply(window.console, [].concat([t.join(" ")], t))
            }
        }
        var n = {
            ready: function () {
                try {
                    window.TestBridge = n,
                        parent.USING_SELENIUM && t()
                } catch (e) { }
            }
        };
        return n
    }),
    define("ipad.ghostevents", ["require"], function (e) {
        function t(e) {
            r && o.evtInScope(e) && (e.stopPropagation(),
                e.stopImmediatePropagation())
        }
        function n(e) {
            r && o.evtInScope(e) && (e.preventDefault(),
                e.stopPropagation(),
                e.stopImmediatePropagation())
        }
        var r = !1
            , i = null
            , o = {
                isGhostEvent: function (e) {
                    return !1
                },
                evtInScope: function (e) {
                    return !1
                }
            };
        return document.addEventListener("mousedown", function (e) {
            o.evtInScope(e) && (i = document.activeElement,
                r = o.isGhostEvent(e),
                t(e))
        }, !0),
            document.addEventListener("mouseup", t, !0),
            document.addEventListener("click", function (e) {
                n(e),
                    r && document.activeElement !== i && (document.activeElement && document.activeElement.blur(),
                        i && i.focus()),
                    r = !1
            }, !0),
            document.addEventListener("focus", n, !0),
            document.addEventListener("blur", n, !0),
            o
    }),
    function (e, t) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
            if (!e.document)
                throw new Error("jQuery requires a window with a document");
            return t(e)
        }
            : t(e)
    }("undefined" != typeof window ? window : this, function (e, t) {
        function n(e) {
            var t = !!e && "length" in e && e.length
                , n = oe.type(e);
            return "function" !== n && !oe.isWindow(e) && ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }
        function r(e, t, n) {
            if (oe.isFunction(t))
                return oe.grep(e, function (e, r) {
                    return !!t.call(e, r, e) !== n
                });
            if (t.nodeType)
                return oe.grep(e, function (e) {
                    return e === t !== n
                });
            if ("string" == typeof t) {
                if (me.test(t))
                    return oe.filter(t, e, n);
                t = oe.filter(t, e)
            }
            return oe.grep(e, function (e) {
                return J.call(t, e) > -1 !== n
            })
        }
        function i(e, t) {
            for (; (e = e[t]) && 1 !== e.nodeType;)
                ;
            return e
        }
        function o(e) {
            var t = {};
            return oe.each(e.match(we) || [], function (e, n) {
                t[n] = !0
            }),
                t
        }
        function s() {
            K.removeEventListener("DOMContentLoaded", s),
                e.removeEventListener("load", s),
                oe.ready()
        }
        function a() {
            this.expando = oe.expando + a.uid++
        }
        function c(e, t, n) {
            var r;
            if (void 0 === n && 1 === e.nodeType)
                if (r = "data-" + t.replace(Ie, "-$&").toLowerCase(),
                    n = e.getAttribute(r),
                    "string" == typeof n) {
                    try {
                        n = "true" === n || "false" !== n && ("null" === n ? null : +n + "" === n ? +n : Ce.test(n) ? oe.parseJSON(n) : n)
                    } catch (e) { }
                    Me.set(e, t, n)
                } else
                    n = void 0;
            return n
        }
        function l(e, t, n, r) {
            var i, o = 1, s = 20, a = r ? function () {
                return r.cur()
            }
                : function () {
                    return oe.css(e, t, "")
                }
                , c = a(), l = n && n[3] || (oe.cssNumber[t] ? "" : "px"), u = (oe.cssNumber[t] || "px" !== l && +c) && Pe.exec(oe.css(e, t));
            if (u && u[3] !== l) {
                l = l || u[3],
                    n = n || [],
                    u = +c || 1;
                do
                    o = o || ".5",
                        u /= o,
                        oe.style(e, t, u + l);
                while (o !== (o = a() / c) && 1 !== o && --s)
            }
            return n && (u = +u || +c || 0,
                i = n[1] ? u + (n[1] + 1) * n[2] : +n[2],
                r && (r.unit = l,
                    r.start = u,
                    r.end = i)),
                i
        }
        function u(e, t) {
            var n = "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t || "*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return void 0 === t || t && oe.nodeName(e, t) ? oe.merge([e], n) : n
        }
        function d(e, t) {
            for (var n = 0, r = e.length; n < r; n++)
                ke.set(e[n], "globalEval", !t || ke.get(t[n], "globalEval"))
        }
        function p(e, t, n, r, i) {
            for (var o, s, a, c, l, p, h = t.createDocumentFragment(), f = [], m = 0, g = e.length; m < g; m++)
                if (o = e[m],
                    o || 0 === o)
                    if ("object" === oe.type(o))
                        oe.merge(f, o.nodeType ? [o] : o);
                    else if (Fe.test(o)) {
                        for (s = s || h.appendChild(t.createElement("div")),
                            a = (De.exec(o) || ["", ""])[1].toLowerCase(),
                            c = Ne[a] || Ne._default,
                            s.innerHTML = c[1] + oe.htmlPrefilter(o) + c[2],
                            p = c[0]; p--;)
                            s = s.lastChild;
                        oe.merge(f, s.childNodes),
                            s = h.firstChild,
                            s.textContent = ""
                    } else
                        f.push(t.createTextNode(o));
            for (h.textContent = "",
                m = 0; o = f[m++];)
                if (r && oe.inArray(o, r) > -1)
                    i && i.push(o);
                else if (l = oe.contains(o.ownerDocument, o),
                    s = u(h.appendChild(o), "script"),
                    l && d(s),
                    n)
                    for (p = 0; o = s[p++];)
                        qe.test(o.type || "") && n.push(o);
            return h
        }
        function h() {
            return !0
        }
        function f() {
            return !1
        }
        function m() {
            try {
                return K.activeElement
            } catch (e) { }
        }
        function g(e, t, n, r, i, o) {
            var s, a;
            if ("object" == typeof t) {
                "string" != typeof n && (r = r || n,
                    n = void 0);
                for (a in t)
                    g(e, a, n, r, t[a], o);
                return e
            }
            if (null == r && null == i ? (i = n,
                r = n = void 0) : null == i && ("string" == typeof n ? (i = r,
                    r = void 0) : (i = r,
                        r = n,
                        n = void 0)),
                i === !1)
                i = f;
            else if (!i)
                return e;
            return 1 === o && (s = i,
                i = function (e) {
                    return oe().off(e),
                        s.apply(this, arguments)
                }
                ,
                i.guid = s.guid || (s.guid = oe.guid++)),
                e.each(function () {
                    oe.event.add(this, t, i, r, n)
                })
        }
        function y(e, t) {
            return oe.nodeName(e, "table") && oe.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }
        function v(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type,
                e
        }
        function b(e) {
            var t = ze.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"),
                e
        }
        function x(e, t) {
            var n, r, i, o, s, a, c, l;
            if (1 === t.nodeType) {
                if (ke.hasData(e) && (o = ke.access(e),
                    s = ke.set(t, o),
                    l = o.events)) {
                    delete s.handle,
                        s.events = {};
                    for (i in l)
                        for (n = 0,
                            r = l[i].length; n < r; n++)
                            oe.event.add(t, i, l[i][n])
                }
                Me.hasData(e) && (a = Me.access(e),
                    c = oe.extend({}, a),
                    Me.set(t, c))
            }
        }
        function w(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && Oe.test(e.type) ? t.checked = e.checked : "input" !== n && "textarea" !== n || (t.defaultValue = e.defaultValue)
        }
        function E(e, t, n, r) {
            t = Q.apply([], t);
            var i, o, s, a, c, l, d = 0, h = e.length, f = h - 1, m = t[0], g = oe.isFunction(m);
            if (g || h > 1 && "string" == typeof m && !re.checkClone && Ge.test(m))
                return e.each(function (i) {
                    var o = e.eq(i);
                    g && (t[0] = m.call(this, i, o.html())),
                        E(o, t, n, r)
                });
            if (h && (i = p(t, e[0].ownerDocument, !1, e, r),
                o = i.firstChild,
                1 === i.childNodes.length && (i = o),
                o || r)) {
                for (s = oe.map(u(i, "script"), v),
                    a = s.length; d < h; d++)
                    c = i,
                        d !== f && (c = oe.clone(c, !0, !0),
                            a && oe.merge(s, u(c, "script"))),
                        n.call(e[d], c, d);
                if (a)
                    for (l = s[s.length - 1].ownerDocument,
                        oe.map(s, b),
                        d = 0; d < a; d++)
                        c = s[d],
                            qe.test(c.type || "") && !ke.access(c, "globalEval") && oe.contains(l, c) && (c.src ? oe._evalUrl && oe._evalUrl(c.src) : oe.globalEval(c.textContent.replace(He, "")))
            }
            return e
        }
        function _(e, t, n) {
            for (var r, i = t ? oe.filter(t, e) : e, o = 0; null != (r = i[o]); o++)
                n || 1 !== r.nodeType || oe.cleanData(u(r)),
                    r.parentNode && (n && oe.contains(r.ownerDocument, r) && d(u(r, "script")),
                        r.parentNode.removeChild(r));
            return e
        }
        function S(e, t) {
            var n = oe(t.createElement(e)).appendTo(t.body)
                , r = oe.css(n[0], "display");
            return n.detach(),
                r
        }
        function k(e) {
            var t = K
                , n = Ye[e];
            return n || (n = S(e, t),
                "none" !== n && n || (We = (We || oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),
                    t = We[0].contentDocument,
                    t.write(),
                    t.close(),
                    n = S(e, t),
                    We.detach()),
                Ye[e] = n),
                n
        }
        function M(e, t, n) {
            var r, i, o, s, a = e.style;
            return n = n || Xe(e),
                s = n ? n.getPropertyValue(t) || n[t] : void 0,
                "" !== s && void 0 !== s || oe.contains(e.ownerDocument, e) || (s = oe.style(e, t)),
                n && !re.pixelMarginRight() && Ke.test(s) && $e.test(t) && (r = a.width,
                    i = a.minWidth,
                    o = a.maxWidth,
                    a.minWidth = a.maxWidth = a.width = s,
                    s = n.width,
                    a.width = r,
                    a.minWidth = i,
                    a.maxWidth = o),
                void 0 !== s ? s + "" : s
        }
        function C(e, t) {
            return {
                get: function () {
                    return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }
        function I(e) {
            if (e in rt)
                return e;
            for (var t = e[0].toUpperCase() + e.slice(1), n = nt.length; n--;)
                if (e = nt[n] + t,
                    e in rt)
                    return e
        }
        function T(e, t, n) {
            var r = Pe.exec(t);
            return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t
        }
        function P(e, t, n, r, i) {
            for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, s = 0; o < 4; o += 2)
                "margin" === n && (s += oe.css(e, n + Ae[o], !0, i)),
                    r ? ("content" === n && (s -= oe.css(e, "padding" + Ae[o], !0, i)),
                        "margin" !== n && (s -= oe.css(e, "border" + Ae[o] + "Width", !0, i))) : (s += oe.css(e, "padding" + Ae[o], !0, i),
                            "padding" !== n && (s += oe.css(e, "border" + Ae[o] + "Width", !0, i)));
            return s
        }
        function A(e, t, n) {
            var r = !0
                , i = "width" === t ? e.offsetWidth : e.offsetHeight
                , o = Xe(e)
                , s = "border-box" === oe.css(e, "boxSizing", !1, o);
            if (i <= 0 || null == i) {
                if (i = M(e, t, o),
                    (i < 0 || null == i) && (i = e.style[t]),
                    Ke.test(i))
                    return i;
                r = s && (re.boxSizingReliable() || i === e.style[t]),
                    i = parseFloat(i) || 0
            }
            return i + P(e, t, n || (s ? "border" : "content"), r, o) + "px"
        }
        function L(e, t) {
            for (var n, r, i, o = [], s = 0, a = e.length; s < a; s++)
                r = e[s],
                    r.style && (o[s] = ke.get(r, "olddisplay"),
                        n = r.style.display,
                        t ? (o[s] || "none" !== n || (r.style.display = ""),
                            "" === r.style.display && Le(r) && (o[s] = ke.access(r, "olddisplay", k(r.nodeName)))) : (i = Le(r),
                                "none" === n && i || ke.set(r, "olddisplay", i ? n : oe.css(r, "display"))));
            for (s = 0; s < a; s++)
                r = e[s],
                    r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[s] || "" : "none"));
            return e
        }
        function O(e, t, n, r, i) {
            return new O.prototype.init(e, t, n, r, i)
        }
        function D() {
            return e.setTimeout(function () {
                it = void 0
            }),
                it = oe.now()
        }
        function q(e, t) {
            var n, r = 0, i = {
                height: e
            };
            for (t = t ? 1 : 0; r < 4; r += 2 - t)
                n = Ae[r],
                    i["margin" + n] = i["padding" + n] = e;
            return t && (i.opacity = i.width = e),
                i
        }
        function N(e, t, n) {
            for (var r, i = (j.tweeners[t] || []).concat(j.tweeners["*"]), o = 0, s = i.length; o < s; o++)
                if (r = i[o].call(n, t, e))
                    return r
        }
        function F(e, t, n) {
            var r, i, o, s, a, c, l, u, d = this, p = {}, h = e.style, f = e.nodeType && Le(e), m = ke.get(e, "fxshow");
            n.queue || (a = oe._queueHooks(e, "fx"),
                null == a.unqueued && (a.unqueued = 0,
                    c = a.empty.fire,
                    a.empty.fire = function () {
                        a.unqueued || c()
                    }
                ),
                a.unqueued++ ,
                d.always(function () {
                    d.always(function () {
                        a.unqueued-- ,
                            oe.queue(e, "fx").length || a.empty.fire()
                    })
                })),
                1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [h.overflow, h.overflowX, h.overflowY],
                    l = oe.css(e, "display"),
                    u = "none" === l ? ke.get(e, "olddisplay") || k(e.nodeName) : l,
                    "inline" === u && "none" === oe.css(e, "float") && (h.display = "inline-block")),
                n.overflow && (h.overflow = "hidden",
                    d.always(function () {
                        h.overflow = n.overflow[0],
                            h.overflowX = n.overflow[1],
                            h.overflowY = n.overflow[2]
                    }));
            for (r in t)
                if (i = t[r],
                    st.exec(i)) {
                    if (delete t[r],
                        o = o || "toggle" === i,
                        i === (f ? "hide" : "show")) {
                        if ("show" !== i || !m || void 0 === m[r])
                            continue;
                        f = !0
                    }
                    p[r] = m && m[r] || oe.style(e, r)
                } else
                    l = void 0;
            if (oe.isEmptyObject(p))
                "inline" === ("none" === l ? k(e.nodeName) : l) && (h.display = l);
            else {
                m ? "hidden" in m && (f = m.hidden) : m = ke.access(e, "fxshow", {}),
                    o && (m.hidden = !f),
                    f ? oe(e).show() : d.done(function () {
                        oe(e).hide()
                    }),
                    d.done(function () {
                        var t;
                        ke.remove(e, "fxshow");
                        for (t in p)
                            oe.style(e, t, p[t])
                    });
                for (r in p)
                    s = N(f ? m[r] : 0, r, d),
                        r in m || (m[r] = s.start,
                            f && (s.end = s.start,
                                s.start = "width" === r || "height" === r ? 1 : 0))
            }
        }
        function R(e, t) {
            var n, r, i, o, s;
            for (n in e)
                if (r = oe.camelCase(n),
                    i = t[r],
                    o = e[n],
                    oe.isArray(o) && (i = o[1],
                        o = e[n] = o[0]),
                    n !== r && (e[r] = o,
                        delete e[n]),
                    s = oe.cssHooks[r],
                    s && "expand" in s) {
                    o = s.expand(o),
                        delete e[r];
                    for (n in o)
                        n in e || (e[n] = o[n],
                            t[n] = i)
                } else
                    t[r] = i
        }
        function j(e, t, n) {
            var r, i, o = 0, s = j.prefilters.length, a = oe.Deferred().always(function () {
                delete c.elem
            }), c = function () {
                if (i)
                    return !1;
                for (var t = it || D(), n = Math.max(0, l.startTime + l.duration - t), r = n / l.duration || 0, o = 1 - r, s = 0, c = l.tweens.length; s < c; s++)
                    l.tweens[s].run(o);
                return a.notifyWith(e, [l, o, n]),
                    o < 1 && c ? n : (a.resolveWith(e, [l]),
                        !1)
            }, l = a.promise({
                elem: e,
                props: oe.extend({}, t),
                opts: oe.extend(!0, {
                    specialEasing: {},
                    easing: oe.easing._default
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: it || D(),
                duration: n.duration,
                tweens: [],
                createTween: function (t, n) {
                    var r = oe.Tween(e, l.opts, t, n, l.opts.specialEasing[t] || l.opts.easing);
                    return l.tweens.push(r),
                        r
                },
                stop: function (t) {
                    var n = 0
                        , r = t ? l.tweens.length : 0;
                    if (i)
                        return this;
                    for (i = !0; n < r; n++)
                        l.tweens[n].run(1);
                    return t ? (a.notifyWith(e, [l, 1, 0]),
                        a.resolveWith(e, [l, t])) : a.rejectWith(e, [l, t]),
                        this
                }
            }), u = l.props;
            for (R(u, l.opts.specialEasing); o < s; o++)
                if (r = j.prefilters[o].call(l, e, u, l.opts))
                    return oe.isFunction(r.stop) && (oe._queueHooks(l.elem, l.opts.queue).stop = oe.proxy(r.stop, r)),
                        r;
            return oe.map(u, N, l),
                oe.isFunction(l.opts.start) && l.opts.start.call(e, l),
                oe.fx.timer(oe.extend(c, {
                    elem: e,
                    anim: l,
                    queue: l.opts.queue
                })),
                l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
        }
        function B(e) {
            return e.getAttribute && e.getAttribute("class") || ""
        }
        function V(e) {
            return function (t, n) {
                "string" != typeof t && (n = t,
                    t = "*");
                var r, i = 0, o = t.toLowerCase().match(we) || [];
                if (oe.isFunction(n))
                    for (; r = o[i++];)
                        "+" === r[0] ? (r = r.slice(1) || "*",
                            (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
            }
        }
        function U(e, t, n, r) {
            function i(a) {
                var c;
                return o[a] = !0,
                    oe.each(e[a] || [], function (e, a) {
                        var l = a(t, n, r);
                        return "string" != typeof l || s || o[l] ? s ? !(c = l) : void 0 : (t.dataTypes.unshift(l),
                            i(l),
                            !1)
                    }),
                    c
            }
            var o = {}
                , s = e === Mt;
            return i(t.dataTypes[0]) || !o["*"] && i("*")
        }
        function G(e, t) {
            var n, r, i = oe.ajaxSettings.flatOptions || {};
            for (n in t)
                void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]);
            return r && oe.extend(!0, e, r),
                e
        }
        function z(e, t, n) {
            for (var r, i, o, s, a = e.contents, c = e.dataTypes; "*" === c[0];)
                c.shift(),
                    void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
            if (r)
                for (i in a)
                    if (a[i] && a[i].test(r)) {
                        c.unshift(i);
                        break
                    }
            if (c[0] in n)
                o = c[0];
            else {
                for (i in n) {
                    if (!c[0] || e.converters[i + " " + c[0]]) {
                        o = i;
                        break
                    }
                    s || (s = i)
                }
                o = o || s
            }
            if (o)
                return o !== c[0] && c.unshift(o),
                    n[o]
        }
        function H(e, t, n, r) {
            var i, o, s, a, c, l = {}, u = e.dataTypes.slice();
            if (u[1])
                for (s in e.converters)
                    l[s.toLowerCase()] = e.converters[s];
            for (o = u.shift(); o;)
                if (e.responseFields[o] && (n[e.responseFields[o]] = t),
                    !c && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
                    c = o,
                    o = u.shift())
                    if ("*" === o)
                        o = c;
                    else if ("*" !== c && c !== o) {
                        if (s = l[c + " " + o] || l["* " + o],
                            !s)
                            for (i in l)
                                if (a = i.split(" "),
                                    a[1] === o && (s = l[c + " " + a[0]] || l["* " + a[0]])) {
                                    s === !0 ? s = l[i] : l[i] !== !0 && (o = a[0],
                                        u.unshift(a[1]));
                                    break
                                }
                        if (s !== !0)
                            if (s && e.throws)
                                t = s(t);
                            else
                                try {
                                    t = s(t)
                                } catch (e) {
                                    return {
                                        state: "parsererror",
                                        error: s ? e : "No conversion from " + c + " to " + o
                                    }
                                }
                    }
            return {
                state: "success",
                data: t
            }
        }
        function W(e, t, n, r) {
            var i;
            if (oe.isArray(t))
                oe.each(t, function (t, i) {
                    n || Pt.test(e) ? r(e, i) : W(e + "[" + ("object" == typeof i && null != i ? t : "") + "]", i, n, r)
                });
            else if (n || "object" !== oe.type(t))
                r(e, t);
            else
                for (i in t)
                    W(e + "[" + i + "]", t[i], n, r)
        }
        function Y(e) {
            return oe.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
        }
        var $ = []
            , K = e.document
            , X = $.slice
            , Q = $.concat
            , Z = $.push
            , J = $.indexOf
            , ee = {}
            , te = ee.toString
            , ne = ee.hasOwnProperty
            , re = {}
            , ie = "2.2.4"
            , oe = function (e, t) {
                return new oe.fn.init(e, t)
            }
            , se = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
            , ae = /^-ms-/
            , ce = /-([\da-z])/gi
            , le = function (e, t) {
                return t.toUpperCase()
            };
        oe.fn = oe.prototype = {
            jquery: ie,
            constructor: oe,
            selector: "",
            length: 0,
            toArray: function () {
                return X.call(this)
            },
            get: function (e) {
                return null != e ? e < 0 ? this[e + this.length] : this[e] : X.call(this)
            },
            pushStack: function (e) {
                var t = oe.merge(this.constructor(), e);
                return t.prevObject = this,
                    t.context = this.context,
                    t
            },
            each: function (e) {
                return oe.each(this, e)
            },
            map: function (e) {
                return this.pushStack(oe.map(this, function (t, n) {
                    return e.call(t, n, t)
                }))
            },
            slice: function () {
                return this.pushStack(X.apply(this, arguments))
            },
            first: function () {
                return this.eq(0)
            },
            last: function () {
                return this.eq(-1)
            },
            eq: function (e) {
                var t = this.length
                    , n = +e + (e < 0 ? t : 0);
                return this.pushStack(n >= 0 && n < t ? [this[n]] : [])
            },
            end: function () {
                return this.prevObject || this.constructor()
            },
            push: Z,
            sort: $.sort,
            splice: $.splice
        },
            oe.extend = oe.fn.extend = function () {
                var e, t, n, r, i, o, s = arguments[0] || {}, a = 1, c = arguments.length, l = !1;
                for ("boolean" == typeof s && (l = s,
                    s = arguments[a] || {},
                    a++),
                    "object" == typeof s || oe.isFunction(s) || (s = {}),
                    a === c && (s = this,
                        a--); a < c; a++)
                    if (null != (e = arguments[a]))
                        for (t in e)
                            n = s[t],
                                r = e[t],
                                s !== r && (l && r && (oe.isPlainObject(r) || (i = oe.isArray(r))) ? (i ? (i = !1,
                                    o = n && oe.isArray(n) ? n : []) : o = n && oe.isPlainObject(n) ? n : {},
                                    s[t] = oe.extend(l, o, r)) : void 0 !== r && (s[t] = r));
                return s
            }
            ,
            oe.extend({
                expando: "jQuery" + (ie + Math.random()).replace(/\D/g, ""),
                isReady: !0,
                error: function (e) {
                    throw new Error(e)
                },
                noop: function () { },
                isFunction: function (e) {
                    return "function" === oe.type(e)
                },
                isArray: Array.isArray,
                isWindow: function (e) {
                    return null != e && e === e.window
                },
                isNumeric: function (e) {
                    var t = e && e.toString();
                    return !oe.isArray(e) && t - parseFloat(t) + 1 >= 0
                },
                isPlainObject: function (e) {
                    var t;
                    if ("object" !== oe.type(e) || e.nodeType || oe.isWindow(e))
                        return !1;
                    if (e.constructor && !ne.call(e, "constructor") && !ne.call(e.constructor.prototype || {}, "isPrototypeOf"))
                        return !1;
                    for (t in e)
                        ;
                    return void 0 === t || ne.call(e, t)
                },
                isEmptyObject: function (e) {
                    var t;
                    for (t in e)
                        return !1;
                    return !0
                },
                type: function (e) {
                    return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? ee[te.call(e)] || "object" : typeof e
                },
                globalEval: function (e) {
                    var t, n = eval;
                    e = oe.trim(e),
                        e && (1 === e.indexOf("use strict") ? (t = K.createElement("script"),
                            t.text = e,
                            K.head.appendChild(t).parentNode.removeChild(t)) : n(e))
                },
                camelCase: function (e) {
                    return e.replace(ae, "ms-").replace(ce, le)
                },
                nodeName: function (e, t) {
                    return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
                },
                each: function (e, t) {
                    var r, i = 0;
                    if (n(e))
                        for (r = e.length; i < r && t.call(e[i], i, e[i]) !== !1; i++)
                            ;
                    else
                        for (i in e)
                            if (t.call(e[i], i, e[i]) === !1)
                                break;
                    return e
                },
                trim: function (e) {
                    return null == e ? "" : (e + "").replace(se, "")
                },
                makeArray: function (e, t) {
                    var r = t || [];
                    return null != e && (n(Object(e)) ? oe.merge(r, "string" == typeof e ? [e] : e) : Z.call(r, e)),
                        r
                },
                inArray: function (e, t, n) {
                    return null == t ? -1 : J.call(t, e, n)
                },
                merge: function (e, t) {
                    for (var n = +t.length, r = 0, i = e.length; r < n; r++)
                        e[i++] = t[r];
                    return e.length = i,
                        e
                },
                grep: function (e, t, n) {
                    for (var r, i = [], o = 0, s = e.length, a = !n; o < s; o++)
                        r = !t(e[o], o),
                            r !== a && i.push(e[o]);
                    return i
                },
                map: function (e, t, r) {
                    var i, o, s = 0, a = [];
                    if (n(e))
                        for (i = e.length; s < i; s++)
                            o = t(e[s], s, r),
                                null != o && a.push(o);
                    else
                        for (s in e)
                            o = t(e[s], s, r),
                                null != o && a.push(o);
                    return Q.apply([], a)
                },
                guid: 1,
                proxy: function (e, t) {
                    var n, r, i;
                    if ("string" == typeof t && (n = e[t],
                        t = e,
                        e = n),
                        oe.isFunction(e))
                        return r = X.call(arguments, 2),
                            i = function () {
                                return e.apply(t || this, r.concat(X.call(arguments)))
                            }
                            ,
                            i.guid = e.guid = e.guid || oe.guid++ ,
                            i
                },
                now: Date.now,
                support: re
            }),
            "function" == typeof Symbol && (oe.fn[Symbol.iterator] = $[Symbol.iterator]),
            oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) {
                ee["[object " + t + "]"] = t.toLowerCase()
            });
        var ue = function (e) {
            function t(e, t, n, r) {
                var i, o, s, a, c, l, d, h, f = t && t.ownerDocument, m = t ? t.nodeType : 9;
                if (n = n || [],
                    "string" != typeof e || !e || 1 !== m && 9 !== m && 11 !== m)
                    return n;
                if (!r && ((t ? t.ownerDocument || t : B) !== L && A(t),
                    t = t || L,
                    D)) {
                    if (11 !== m && (l = ye.exec(e)))
                        if (i = l[1]) {
                            if (9 === m) {
                                if (!(s = t.getElementById(i)))
                                    return n;
                                if (s.id === i)
                                    return n.push(s),
                                        n
                            } else if (f && (s = f.getElementById(i)) && R(t, s) && s.id === i)
                                return n.push(s),
                                    n
                        } else {
                            if (l[2])
                                return Z.apply(n, t.getElementsByTagName(e)),
                                    n;
                            if ((i = l[3]) && w.getElementsByClassName && t.getElementsByClassName)
                                return Z.apply(n, t.getElementsByClassName(i)),
                                    n
                        }
                    if (w.qsa && !H[e + " "] && (!q || !q.test(e))) {
                        if (1 !== m)
                            f = t,
                                h = e;
                        else if ("object" !== t.nodeName.toLowerCase()) {
                            for ((a = t.getAttribute("id")) ? a = a.replace(be, "\\$&") : t.setAttribute("id", a = j),
                                d = k(e),
                                o = d.length,
                                c = pe.test(a) ? "#" + a : "[id='" + a + "']"; o--;)
                                d[o] = c + " " + p(d[o]);
                            h = d.join(","),
                                f = ve.test(e) && u(t.parentNode) || t
                        }
                        if (h)
                            try {
                                return Z.apply(n, f.querySelectorAll(h)),
                                    n
                            } catch (e) { } finally {
                                a === j && t.removeAttribute("id")
                            }
                    }
                }
                return C(e.replace(ae, "$1"), t, n, r)
            }
            function n() {
                function e(n, r) {
                    return t.push(n + " ") > E.cacheLength && delete e[t.shift()],
                        e[n + " "] = r
                }
                var t = [];
                return e
            }
            function r(e) {
                return e[j] = !0,
                    e
            }
            function i(e) {
                var t = L.createElement("div");
                try {
                    return !!e(t)
                } catch (e) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t),
                        t = null
                }
            }
            function o(e, t) {
                for (var n = e.split("|"), r = n.length; r--;)
                    E.attrHandle[n[r]] = t
            }
            function s(e, t) {
                var n = t && e
                    , r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || Y) - (~e.sourceIndex || Y);
                if (r)
                    return r;
                if (n)
                    for (; n = n.nextSibling;)
                        if (n === t)
                            return -1;
                return e ? 1 : -1
            }
            function a(e) {
                return function (t) {
                    var n = t.nodeName.toLowerCase();
                    return "input" === n && t.type === e
                }
            }
            function c(e) {
                return function (t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }
            function l(e) {
                return r(function (t) {
                    return t = +t,
                        r(function (n, r) {
                            for (var i, o = e([], n.length, t), s = o.length; s--;)
                                n[i = o[s]] && (n[i] = !(r[i] = n[i]))
                        })
                })
            }
            function u(e) {
                return e && "undefined" != typeof e.getElementsByTagName && e
            }
            function d() { }
            function p(e) {
                for (var t = 0, n = e.length, r = ""; t < n; t++)
                    r += e[t].value;
                return r
            }
            function h(e, t, n) {
                var r = t.dir
                    , i = n && "parentNode" === r
                    , o = U++;
                return t.first ? function (t, n, o) {
                    for (; t = t[r];)
                        if (1 === t.nodeType || i)
                            return e(t, n, o)
                }
                    : function (t, n, s) {
                        var a, c, l, u = [V, o];
                        if (s) {
                            for (; t = t[r];)
                                if ((1 === t.nodeType || i) && e(t, n, s))
                                    return !0
                        } else
                            for (; t = t[r];)
                                if (1 === t.nodeType || i) {
                                    if (l = t[j] || (t[j] = {}),
                                        c = l[t.uniqueID] || (l[t.uniqueID] = {}),
                                        (a = c[r]) && a[0] === V && a[1] === o)
                                        return u[2] = a[2];
                                    if (c[r] = u,
                                        u[2] = e(t, n, s))
                                        return !0
                                }
                    }
            }
            function f(e) {
                return e.length > 1 ? function (t, n, r) {
                    for (var i = e.length; i--;)
                        if (!e[i](t, n, r))
                            return !1;
                    return !0
                }
                    : e[0]
            }
            function m(e, n, r) {
                for (var i = 0, o = n.length; i < o; i++)
                    t(e, n[i], r);
                return r
            }
            function g(e, t, n, r, i) {
                for (var o, s = [], a = 0, c = e.length, l = null != t; a < c; a++)
                    (o = e[a]) && (n && !n(o, r, i) || (s.push(o),
                        l && t.push(a)));
                return s
            }
            function y(e, t, n, i, o, s) {
                return i && !i[j] && (i = y(i)),
                    o && !o[j] && (o = y(o, s)),
                    r(function (r, s, a, c) {
                        var l, u, d, p = [], h = [], f = s.length, y = r || m(t || "*", a.nodeType ? [a] : a, []), v = !e || !r && t ? y : g(y, p, e, a, c), b = n ? o || (r ? e : f || i) ? [] : s : v;
                        if (n && n(v, b, a, c),
                            i)
                            for (l = g(b, h),
                                i(l, [], a, c),
                                u = l.length; u--;)
                                (d = l[u]) && (b[h[u]] = !(v[h[u]] = d));
                        if (r) {
                            if (o || e) {
                                if (o) {
                                    for (l = [],
                                        u = b.length; u--;)
                                        (d = b[u]) && l.push(v[u] = d);
                                    o(null, b = [], l, c)
                                }
                                for (u = b.length; u--;)
                                    (d = b[u]) && (l = o ? ee(r, d) : p[u]) > -1 && (r[l] = !(s[l] = d))
                            }
                        } else
                            b = g(b === s ? b.splice(f, b.length) : b),
                                o ? o(null, s, b, c) : Z.apply(s, b)
                    })
            }
            function v(e) {
                for (var t, n, r, i = e.length, o = E.relative[e[0].type], s = o || E.relative[" "], a = o ? 1 : 0, c = h(function (e) {
                    return e === t
                }, s, !0), l = h(function (e) {
                    return ee(t, e) > -1
                }, s, !0), u = [function (e, n, r) {
                    var i = !o && (r || n !== I) || ((t = n).nodeType ? c(e, n, r) : l(e, n, r));
                    return t = null,
                        i
                }
                ]; a < i; a++)
                    if (n = E.relative[e[a].type])
                        u = [h(f(u), n)];
                    else {
                        if (n = E.filter[e[a].type].apply(null, e[a].matches),
                            n[j]) {
                            for (r = ++a; r < i && !E.relative[e[r].type]; r++)
                                ;
                            return y(a > 1 && f(u), a > 1 && p(e.slice(0, a - 1).concat({
                                value: " " === e[a - 2].type ? "*" : ""
                            })).replace(ae, "$1"), n, a < r && v(e.slice(a, r)), r < i && v(e = e.slice(r)), r < i && p(e))
                        }
                        u.push(n)
                    }
                return f(u)
            }
            function b(e, n) {
                var i = n.length > 0
                    , o = e.length > 0
                    , s = function (r, s, a, c, l) {
                        var u, d, p, h = 0, f = "0", m = r && [], y = [], v = I, b = r || o && E.find.TAG("*", l), x = V += null == v ? 1 : Math.random() || .1, w = b.length;
                        for (l && (I = s === L || s || l); f !== w && null != (u = b[f]); f++) {
                            if (o && u) {
                                for (d = 0,
                                    s || u.ownerDocument === L || (A(u),
                                        a = !D); p = e[d++];)
                                    if (p(u, s || L, a)) {
                                        c.push(u);
                                        break
                                    }
                                l && (V = x)
                            }
                            i && ((u = !p && u) && h-- ,
                                r && m.push(u))
                        }
                        if (h += f,
                            i && f !== h) {
                            for (d = 0; p = n[d++];)
                                p(m, y, s, a);
                            if (r) {
                                if (h > 0)
                                    for (; f--;)
                                        m[f] || y[f] || (y[f] = X.call(c));
                                y = g(y)
                            }
                            Z.apply(c, y),
                                l && !r && y.length > 0 && h + n.length > 1 && t.uniqueSort(c)
                        }
                        return l && (V = x,
                            I = v),
                            m
                    };
                return i ? r(s) : s
            }
            var x, w, E, _, S, k, M, C, I, T, P, A, L, O, D, q, N, F, R, j = "sizzle" + 1 * new Date, B = e.document, V = 0, U = 0, G = n(), z = n(), H = n(), W = function (e, t) {
                return e === t && (P = !0),
                    0
            }, Y = 1 << 31, $ = {}.hasOwnProperty, K = [], X = K.pop, Q = K.push, Z = K.push, J = K.slice, ee = function (e, t) {
                for (var n = 0, r = e.length; n < r; n++)
                    if (e[n] === t)
                        return n;
                return -1
            }, te = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", ne = "[\\x20\\t\\r\\n\\f]", re = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ie = "\\[" + ne + "*(" + re + ")(?:" + ne + "*([*^$|!~]?=)" + ne + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + re + "))|)" + ne + "*\\]", oe = ":(" + re + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ie + ")*)|.*)\\)|)", se = new RegExp(ne + "+", "g"), ae = new RegExp("^" + ne + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ne + "+$", "g"), ce = new RegExp("^" + ne + "*," + ne + "*"), le = new RegExp("^" + ne + "*([>+~]|" + ne + ")" + ne + "*"), ue = new RegExp("=" + ne + "*([^\\]'\"]*?)" + ne + "*\\]", "g"), de = new RegExp(oe), pe = new RegExp("^" + re + "$"), he = {
                ID: new RegExp("^#(" + re + ")"),
                CLASS: new RegExp("^\\.(" + re + ")"),
                TAG: new RegExp("^(" + re + "|[*])"),
                ATTR: new RegExp("^" + ie),
                PSEUDO: new RegExp("^" + oe),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ne + "*(even|odd|(([+-]|)(\\d*)n|)" + ne + "*(?:([+-]|)" + ne + "*(\\d+)|))" + ne + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + te + ")$", "i"),
                needsContext: new RegExp("^" + ne + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ne + "*((?:-\\d)?\\d*)" + ne + "*\\)|)(?=[^-]|$)", "i")
            }, fe = /^(?:input|select|textarea|button)$/i, me = /^h\d$/i, ge = /^[^{]+\{\s*\[native \w/, ye = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ve = /[+~]/, be = /'|\\/g, xe = new RegExp("\\\\([\\da-f]{1,6}" + ne + "?|(" + ne + ")|.)", "ig"), we = function (e, t, n) {
                var r = "0x" + t - 65536;
                return r !== r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
            }, Ee = function () {
                A()
            };
            try {
                Z.apply(K = J.call(B.childNodes), B.childNodes),
                    K[B.childNodes.length].nodeType
            } catch (e) {
                Z = {
                    apply: K.length ? function (e, t) {
                        Q.apply(e, J.call(t))
                    }
                        : function (e, t) {
                            for (var n = e.length, r = 0; e[n++] = t[r++];)
                                ;
                            e.length = n - 1
                        }
                }
            }
            w = t.support = {},
                S = t.isXML = function (e) {
                    var t = e && (e.ownerDocument || e).documentElement;
                    return !!t && "HTML" !== t.nodeName
                }
                ,
                A = t.setDocument = function (e) {
                    var t, n, r = e ? e.ownerDocument || e : B;
                    return r !== L && 9 === r.nodeType && r.documentElement ? (L = r,
                        O = L.documentElement,
                        D = !S(L),
                        (n = L.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", Ee, !1) : n.attachEvent && n.attachEvent("onunload", Ee)),
                        w.attributes = i(function (e) {
                            return e.className = "i",
                                !e.getAttribute("className")
                        }),
                        w.getElementsByTagName = i(function (e) {
                            return e.appendChild(L.createComment("")),
                                !e.getElementsByTagName("*").length
                        }),
                        w.getElementsByClassName = ge.test(L.getElementsByClassName),
                        w.getById = i(function (e) {
                            return O.appendChild(e).id = j,
                                !L.getElementsByName || !L.getElementsByName(j).length
                        }),
                        w.getById ? (E.find.ID = function (e, t) {
                            if ("undefined" != typeof t.getElementById && D) {
                                var n = t.getElementById(e);
                                return n ? [n] : []
                            }
                        }
                            ,
                            E.filter.ID = function (e) {
                                var t = e.replace(xe, we);
                                return function (e) {
                                    return e.getAttribute("id") === t
                                }
                            }
                        ) : (delete E.find.ID,
                            E.filter.ID = function (e) {
                                var t = e.replace(xe, we);
                                return function (e) {
                                    var n = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                                    return n && n.value === t
                                }
                            }
                            ),
                        E.find.TAG = w.getElementsByTagName ? function (e, t) {
                            return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : w.qsa ? t.querySelectorAll(e) : void 0
                        }
                            : function (e, t) {
                                var n, r = [], i = 0, o = t.getElementsByTagName(e);
                                if ("*" === e) {
                                    for (; n = o[i++];)
                                        1 === n.nodeType && r.push(n);
                                    return r
                                }
                                return o
                            }
                        ,
                        E.find.CLASS = w.getElementsByClassName && function (e, t) {
                            if ("undefined" != typeof t.getElementsByClassName && D)
                                return t.getElementsByClassName(e)
                        }
                        ,
                        N = [],
                        q = [],
                        (w.qsa = ge.test(L.querySelectorAll)) && (i(function (e) {
                            O.appendChild(e).innerHTML = "<a id='" + j + "'></a><select id='" + j + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                                e.querySelectorAll("[msallowcapture^='']").length && q.push("[*^$]=" + ne + "*(?:''|\"\")"),
                                e.querySelectorAll("[selected]").length || q.push("\\[" + ne + "*(?:value|" + te + ")"),
                                e.querySelectorAll("[id~=" + j + "-]").length || q.push("~="),
                                e.querySelectorAll(":checked").length || q.push(":checked"),
                                e.querySelectorAll("a#" + j + "+*").length || q.push(".#.+[+~]")
                        }),
                            i(function (e) {
                                var t = L.createElement("input");
                                t.setAttribute("type", "hidden"),
                                    e.appendChild(t).setAttribute("name", "D"),
                                    e.querySelectorAll("[name=d]").length && q.push("name" + ne + "*[*^$|!~]?="),
                                    e.querySelectorAll(":enabled").length || q.push(":enabled", ":disabled"),
                                    e.querySelectorAll("*,:x"),
                                    q.push(",.*:")
                            })),
                        (w.matchesSelector = ge.test(F = O.matches || O.webkitMatchesSelector || O.mozMatchesSelector || O.oMatchesSelector || O.msMatchesSelector)) && i(function (e) {
                            w.disconnectedMatch = F.call(e, "div"),
                                F.call(e, "[s!='']:x"),
                                N.push("!=", oe)
                        }),
                        q = q.length && new RegExp(q.join("|")),
                        N = N.length && new RegExp(N.join("|")),
                        t = ge.test(O.compareDocumentPosition),
                        R = t || ge.test(O.contains) ? function (e, t) {
                            var n = 9 === e.nodeType ? e.documentElement : e
                                , r = t && t.parentNode;
                            return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                        }
                            : function (e, t) {
                                if (t)
                                    for (; t = t.parentNode;)
                                        if (t === e)
                                            return !0;
                                return !1
                            }
                        ,
                        W = t ? function (e, t) {
                            if (e === t)
                                return P = !0,
                                    0;
                            var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                            return n ? n : (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1,
                                1 & n || !w.sortDetached && t.compareDocumentPosition(e) === n ? e === L || e.ownerDocument === B && R(B, e) ? -1 : t === L || t.ownerDocument === B && R(B, t) ? 1 : T ? ee(T, e) - ee(T, t) : 0 : 4 & n ? -1 : 1)
                        }
                            : function (e, t) {
                                if (e === t)
                                    return P = !0,
                                        0;
                                var n, r = 0, i = e.parentNode, o = t.parentNode, a = [e], c = [t];
                                if (!i || !o)
                                    return e === L ? -1 : t === L ? 1 : i ? -1 : o ? 1 : T ? ee(T, e) - ee(T, t) : 0;
                                if (i === o)
                                    return s(e, t);
                                for (n = e; n = n.parentNode;)
                                    a.unshift(n);
                                for (n = t; n = n.parentNode;)
                                    c.unshift(n);
                                for (; a[r] === c[r];)
                                    r++;
                                return r ? s(a[r], c[r]) : a[r] === B ? -1 : c[r] === B ? 1 : 0
                            }
                        ,
                        L) : L
                }
                ,
                t.matches = function (e, n) {
                    return t(e, null, null, n)
                }
                ,
                t.matchesSelector = function (e, n) {
                    if ((e.ownerDocument || e) !== L && A(e),
                        n = n.replace(ue, "='$1']"),
                        w.matchesSelector && D && !H[n + " "] && (!N || !N.test(n)) && (!q || !q.test(n)))
                        try {
                            var r = F.call(e, n);
                            if (r || w.disconnectedMatch || e.document && 11 !== e.document.nodeType)
                                return r
                        } catch (e) { }
                    return t(n, L, null, [e]).length > 0
                }
                ,
                t.contains = function (e, t) {
                    return (e.ownerDocument || e) !== L && A(e),
                        R(e, t)
                }
                ,
                t.attr = function (e, t) {
                    (e.ownerDocument || e) !== L && A(e);
                    var n = E.attrHandle[t.toLowerCase()]
                        , r = n && $.call(E.attrHandle, t.toLowerCase()) ? n(e, t, !D) : void 0;
                    return void 0 !== r ? r : w.attributes || !D ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
                }
                ,
                t.error = function (e) {
                    throw new Error("Syntax error, unrecognized expression: " + e)
                }
                ,
                t.uniqueSort = function (e) {
                    var t, n = [], r = 0, i = 0;
                    if (P = !w.detectDuplicates,
                        T = !w.sortStable && e.slice(0),
                        e.sort(W),
                        P) {
                        for (; t = e[i++];)
                            t === e[i] && (r = n.push(i));
                        for (; r--;)
                            e.splice(n[r], 1)
                    }
                    return T = null,
                        e
                }
                ,
                _ = t.getText = function (e) {
                    var t, n = "", r = 0, i = e.nodeType;
                    if (i) {
                        if (1 === i || 9 === i || 11 === i) {
                            if ("string" == typeof e.textContent)
                                return e.textContent;
                            for (e = e.firstChild; e; e = e.nextSibling)
                                n += _(e)
                        } else if (3 === i || 4 === i)
                            return e.nodeValue
                    } else
                        for (; t = e[r++];)
                            n += _(t);
                    return n
                }
                ,
                E = t.selectors = {
                    cacheLength: 50,
                    createPseudo: r,
                    match: he,
                    attrHandle: {},
                    find: {},
                    relative: {
                        ">": {
                            dir: "parentNode",
                            first: !0
                        },
                        " ": {
                            dir: "parentNode"
                        },
                        "+": {
                            dir: "previousSibling",
                            first: !0
                        },
                        "~": {
                            dir: "previousSibling"
                        }
                    },
                    preFilter: {
                        ATTR: function (e) {
                            return e[1] = e[1].replace(xe, we),
                                e[3] = (e[3] || e[4] || e[5] || "").replace(xe, we),
                                "~=" === e[2] && (e[3] = " " + e[3] + " "),
                                e.slice(0, 4)
                        },
                        CHILD: function (e) {
                            return e[1] = e[1].toLowerCase(),
                                "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]),
                                    e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])),
                                    e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]),
                                e
                        },
                        PSEUDO: function (e) {
                            var t, n = !e[6] && e[2];
                            return he.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && de.test(n) && (t = k(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t),
                                e[2] = n.slice(0, t)),
                                e.slice(0, 3))
                        }
                    },
                    filter: {
                        TAG: function (e) {
                            var t = e.replace(xe, we).toLowerCase();
                            return "*" === e ? function () {
                                return !0
                            }
                                : function (e) {
                                    return e.nodeName && e.nodeName.toLowerCase() === t
                                }
                        },
                        CLASS: function (e) {
                            var t = G[e + " "];
                            return t || (t = new RegExp("(^|" + ne + ")" + e + "(" + ne + "|$)")) && G(e, function (e) {
                                return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                            })
                        },
                        ATTR: function (e, n, r) {
                            return function (i) {
                                var o = t.attr(i, e);
                                return null == o ? "!=" === n : !n || (o += "",
                                    "=" === n ? o === r : "!=" === n ? o !== r : "^=" === n ? r && 0 === o.indexOf(r) : "*=" === n ? r && o.indexOf(r) > -1 : "$=" === n ? r && o.slice(-r.length) === r : "~=" === n ? (" " + o.replace(se, " ") + " ").indexOf(r) > -1 : "|=" === n && (o === r || o.slice(0, r.length + 1) === r + "-"))
                            }
                        },
                        CHILD: function (e, t, n, r, i) {
                            var o = "nth" !== e.slice(0, 3)
                                , s = "last" !== e.slice(-4)
                                , a = "of-type" === t;
                            return 1 === r && 0 === i ? function (e) {
                                return !!e.parentNode
                            }
                                : function (t, n, c) {
                                    var l, u, d, p, h, f, m = o !== s ? "nextSibling" : "previousSibling", g = t.parentNode, y = a && t.nodeName.toLowerCase(), v = !c && !a, b = !1;
                                    if (g) {
                                        if (o) {
                                            for (; m;) {
                                                for (p = t; p = p[m];)
                                                    if (a ? p.nodeName.toLowerCase() === y : 1 === p.nodeType)
                                                        return !1;
                                                f = m = "only" === e && !f && "nextSibling"
                                            }
                                            return !0
                                        }
                                        if (f = [s ? g.firstChild : g.lastChild],
                                            s && v) {
                                            for (p = g,
                                                d = p[j] || (p[j] = {}),
                                                u = d[p.uniqueID] || (d[p.uniqueID] = {}),
                                                l = u[e] || [],
                                                h = l[0] === V && l[1],
                                                b = h && l[2],
                                                p = h && g.childNodes[h]; p = ++h && p && p[m] || (b = h = 0) || f.pop();)
                                                if (1 === p.nodeType && ++b && p === t) {
                                                    u[e] = [V, h, b];
                                                    break
                                                }
                                        } else if (v && (p = t,
                                            d = p[j] || (p[j] = {}),
                                            u = d[p.uniqueID] || (d[p.uniqueID] = {}),
                                            l = u[e] || [],
                                            h = l[0] === V && l[1],
                                            b = h),
                                            b === !1)
                                            for (; (p = ++h && p && p[m] || (b = h = 0) || f.pop()) && ((a ? p.nodeName.toLowerCase() !== y : 1 !== p.nodeType) || !++b || (v && (d = p[j] || (p[j] = {}),
                                                u = d[p.uniqueID] || (d[p.uniqueID] = {}),
                                                u[e] = [V, b]),
                                                p !== t));)
                                                ;
                                        return b -= i,
                                            b === r || b % r === 0 && b / r >= 0
                                    }
                                }
                        },
                        PSEUDO: function (e, n) {
                            var i, o = E.pseudos[e] || E.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                            return o[j] ? o(n) : o.length > 1 ? (i = [e, e, "", n],
                                E.setFilters.hasOwnProperty(e.toLowerCase()) ? r(function (e, t) {
                                    for (var r, i = o(e, n), s = i.length; s--;)
                                        r = ee(e, i[s]),
                                            e[r] = !(t[r] = i[s])
                                }) : function (e) {
                                    return o(e, 0, i)
                                }
                            ) : o
                        }
                    },
                    pseudos: {
                        not: r(function (e) {
                            var t = []
                                , n = []
                                , i = M(e.replace(ae, "$1"));
                            return i[j] ? r(function (e, t, n, r) {
                                for (var o, s = i(e, null, r, []), a = e.length; a--;)
                                    (o = s[a]) && (e[a] = !(t[a] = o))
                            }) : function (e, r, o) {
                                return t[0] = e,
                                    i(t, null, o, n),
                                    t[0] = null,
                                    !n.pop()
                            }
                        }),
                        has: r(function (e) {
                            return function (n) {
                                return t(e, n).length > 0
                            }
                        }),
                        contains: r(function (e) {
                            return e = e.replace(xe, we),
                                function (t) {
                                    return (t.textContent || t.innerText || _(t)).indexOf(e) > -1
                                }
                        }),
                        lang: r(function (e) {
                            return pe.test(e || "") || t.error("unsupported lang: " + e),
                                e = e.replace(xe, we).toLowerCase(),
                                function (t) {
                                    var n;
                                    do
                                        if (n = D ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang"))
                                            return n = n.toLowerCase(),
                                                n === e || 0 === n.indexOf(e + "-");
                                    while ((t = t.parentNode) && 1 === t.nodeType); return !1
                                }
                        }),
                        target: function (t) {
                            var n = e.location && e.location.hash;
                            return n && n.slice(1) === t.id
                        },
                        root: function (e) {
                            return e === O
                        },
                        focus: function (e) {
                            return e === L.activeElement && (!L.hasFocus || L.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                        },
                        enabled: function (e) {
                            return e.disabled === !1
                        },
                        disabled: function (e) {
                            return e.disabled === !0
                        },
                        checked: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && !!e.checked || "option" === t && !!e.selected
                        },
                        selected: function (e) {
                            return e.parentNode && e.parentNode.selectedIndex,
                                e.selected === !0
                        },
                        empty: function (e) {
                            for (e = e.firstChild; e; e = e.nextSibling)
                                if (e.nodeType < 6)
                                    return !1;
                            return !0
                        },
                        parent: function (e) {
                            return !E.pseudos.empty(e)
                        },
                        header: function (e) {
                            return me.test(e.nodeName)
                        },
                        input: function (e) {
                            return fe.test(e.nodeName)
                        },
                        button: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && "button" === e.type || "button" === t
                        },
                        text: function (e) {
                            var t;
                            return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                        },
                        first: l(function () {
                            return [0]
                        }),
                        last: l(function (e, t) {
                            return [t - 1]
                        }),
                        eq: l(function (e, t, n) {
                            return [n < 0 ? n + t : n]
                        }),
                        even: l(function (e, t) {
                            for (var n = 0; n < t; n += 2)
                                e.push(n);
                            return e
                        }),
                        odd: l(function (e, t) {
                            for (var n = 1; n < t; n += 2)
                                e.push(n);
                            return e
                        }),
                        lt: l(function (e, t, n) {
                            for (var r = n < 0 ? n + t : n; --r >= 0;)
                                e.push(r);
                            return e
                        }),
                        gt: l(function (e, t, n) {
                            for (var r = n < 0 ? n + t : n; ++r < t;)
                                e.push(r);
                            return e
                        })
                    }
                },
                E.pseudos.nth = E.pseudos.eq;
            for (x in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            })
                E.pseudos[x] = a(x);
            for (x in {
                submit: !0,
                reset: !0
            })
                E.pseudos[x] = c(x);
            return d.prototype = E.filters = E.pseudos,
                E.setFilters = new d,
                k = t.tokenize = function (e, n) {
                    var r, i, o, s, a, c, l, u = z[e + " "];
                    if (u)
                        return n ? 0 : u.slice(0);
                    for (a = e,
                        c = [],
                        l = E.preFilter; a;) {
                        r && !(i = ce.exec(a)) || (i && (a = a.slice(i[0].length) || a),
                            c.push(o = [])),
                            r = !1,
                            (i = le.exec(a)) && (r = i.shift(),
                                o.push({
                                    value: r,
                                    type: i[0].replace(ae, " ")
                                }),
                                a = a.slice(r.length));
                        for (s in E.filter)
                            !(i = he[s].exec(a)) || l[s] && !(i = l[s](i)) || (r = i.shift(),
                                o.push({
                                    value: r,
                                    type: s,
                                    matches: i
                                }),
                                a = a.slice(r.length));
                        if (!r)
                            break
                    }
                    return n ? a.length : a ? t.error(e) : z(e, c).slice(0)
                }
                ,
                M = t.compile = function (e, t) {
                    var n, r = [], i = [], o = H[e + " "];
                    if (!o) {
                        for (t || (t = k(e)),
                            n = t.length; n--;)
                            o = v(t[n]),
                                o[j] ? r.push(o) : i.push(o);
                        o = H(e, b(i, r)),
                            o.selector = e
                    }
                    return o
                }
                ,
                C = t.select = function (e, t, n, r) {
                    var i, o, s, a, c, l = "function" == typeof e && e, d = !r && k(e = l.selector || e);
                    if (n = n || [],
                        1 === d.length) {
                        if (o = d[0] = d[0].slice(0),
                            o.length > 2 && "ID" === (s = o[0]).type && w.getById && 9 === t.nodeType && D && E.relative[o[1].type]) {
                            if (t = (E.find.ID(s.matches[0].replace(xe, we), t) || [])[0],
                                !t)
                                return n;
                            l && (t = t.parentNode),
                                e = e.slice(o.shift().value.length)
                        }
                        for (i = he.needsContext.test(e) ? 0 : o.length; i-- && (s = o[i],
                            !E.relative[a = s.type]);)
                            if ((c = E.find[a]) && (r = c(s.matches[0].replace(xe, we), ve.test(o[0].type) && u(t.parentNode) || t))) {
                                if (o.splice(i, 1),
                                    e = r.length && p(o),
                                    !e)
                                    return Z.apply(n, r),
                                        n;
                                break
                            }
                    }
                    return (l || M(e, d))(r, t, !D, n, !t || ve.test(e) && u(t.parentNode) || t),
                        n
                }
                ,
                w.sortStable = j.split("").sort(W).join("") === j,
                w.detectDuplicates = !!P,
                A(),
                w.sortDetached = i(function (e) {
                    return 1 & e.compareDocumentPosition(L.createElement("div"))
                }),
                i(function (e) {
                    return e.innerHTML = "<a href='#'></a>",
                        "#" === e.firstChild.getAttribute("href")
                }) || o("type|href|height|width", function (e, t, n) {
                    if (!n)
                        return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
                }),
                w.attributes && i(function (e) {
                    return e.innerHTML = "<input/>",
                        e.firstChild.setAttribute("value", ""),
                        "" === e.firstChild.getAttribute("value")
                }) || o("value", function (e, t, n) {
                    if (!n && "input" === e.nodeName.toLowerCase())
                        return e.defaultValue
                }),
                i(function (e) {
                    return null == e.getAttribute("disabled")
                }) || o(te, function (e, t, n) {
                    var r;
                    if (!n)
                        return e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
                }),
                t
        }(e);
        oe.find = ue,
            oe.expr = ue.selectors,
            oe.expr[":"] = oe.expr.pseudos,
            oe.uniqueSort = oe.unique = ue.uniqueSort,
            oe.text = ue.getText,
            oe.isXMLDoc = ue.isXML,
            oe.contains = ue.contains;
        var de = function (e, t, n) {
            for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;)
                if (1 === e.nodeType) {
                    if (i && oe(e).is(n))
                        break;
                    r.push(e)
                }
            return r
        }
            , pe = function (e, t) {
                for (var n = []; e; e = e.nextSibling)
                    1 === e.nodeType && e !== t && n.push(e);
                return n
            }
            , he = oe.expr.match.needsContext
            , fe = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/
            , me = /^.[^:#\[\.,]*$/;
        oe.filter = function (e, t, n) {
            var r = t[0];
            return n && (e = ":not(" + e + ")"),
                1 === t.length && 1 === r.nodeType ? oe.find.matchesSelector(r, e) ? [r] : [] : oe.find.matches(e, oe.grep(t, function (e) {
                    return 1 === e.nodeType
                }))
        }
            ,
            oe.fn.extend({
                find: function (e) {
                    var t, n = this.length, r = [], i = this;
                    if ("string" != typeof e)
                        return this.pushStack(oe(e).filter(function () {
                            for (t = 0; t < n; t++)
                                if (oe.contains(i[t], this))
                                    return !0
                        }));
                    for (t = 0; t < n; t++)
                        oe.find(e, i[t], r);
                    return r = this.pushStack(n > 1 ? oe.unique(r) : r),
                        r.selector = this.selector ? this.selector + " " + e : e,
                        r
                },
                filter: function (e) {
                    return this.pushStack(r(this, e || [], !1))
                },
                not: function (e) {
                    return this.pushStack(r(this, e || [], !0))
                },
                is: function (e) {
                    return !!r(this, "string" == typeof e && he.test(e) ? oe(e) : e || [], !1).length
                }
            });
        var ge, ye = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, ve = oe.fn.init = function (e, t, n) {
            var r, i;
            if (!e)
                return this;
            if (n = n || ge,
                "string" == typeof e) {
                if (r = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : ye.exec(e),
                    !r || !r[1] && t)
                    return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (r[1]) {
                    if (t = t instanceof oe ? t[0] : t,
                        oe.merge(this, oe.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : K, !0)),
                        fe.test(r[1]) && oe.isPlainObject(t))
                        for (r in t)
                            oe.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                    return this
                }
                return i = K.getElementById(r[2]),
                    i && i.parentNode && (this.length = 1,
                        this[0] = i),
                    this.context = K,
                    this.selector = e,
                    this
            }
            return e.nodeType ? (this.context = this[0] = e,
                this.length = 1,
                this) : oe.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(oe) : (void 0 !== e.selector && (this.selector = e.selector,
                    this.context = e.context),
                    oe.makeArray(e, this))
        }
            ;
        ve.prototype = oe.fn,
            ge = oe(K);
        var be = /^(?:parents|prev(?:Until|All))/
            , xe = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        oe.fn.extend({
            has: function (e) {
                var t = oe(e, this)
                    , n = t.length;
                return this.filter(function () {
                    for (var e = 0; e < n; e++)
                        if (oe.contains(this, t[e]))
                            return !0
                })
            },
            closest: function (e, t) {
                for (var n, r = 0, i = this.length, o = [], s = he.test(e) || "string" != typeof e ? oe(e, t || this.context) : 0; r < i; r++)
                    for (n = this[r]; n && n !== t; n = n.parentNode)
                        if (n.nodeType < 11 && (s ? s.index(n) > -1 : 1 === n.nodeType && oe.find.matchesSelector(n, e))) {
                            o.push(n);
                            break
                        }
                return this.pushStack(o.length > 1 ? oe.uniqueSort(o) : o)
            },
            index: function (e) {
                return e ? "string" == typeof e ? J.call(oe(e), this[0]) : J.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function (e, t) {
                return this.pushStack(oe.uniqueSort(oe.merge(this.get(), oe(e, t))))
            },
            addBack: function (e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }),
            oe.each({
                parent: function (e) {
                    var t = e.parentNode;
                    return t && 11 !== t.nodeType ? t : null
                },
                parents: function (e) {
                    return de(e, "parentNode")
                },
                parentsUntil: function (e, t, n) {
                    return de(e, "parentNode", n)
                },
                next: function (e) {
                    return i(e, "nextSibling")
                },
                prev: function (e) {
                    return i(e, "previousSibling")
                },
                nextAll: function (e) {
                    return de(e, "nextSibling")
                },
                prevAll: function (e) {
                    return de(e, "previousSibling")
                },
                nextUntil: function (e, t, n) {
                    return de(e, "nextSibling", n)
                },
                prevUntil: function (e, t, n) {
                    return de(e, "previousSibling", n)
                },
                siblings: function (e) {
                    return pe((e.parentNode || {}).firstChild, e)
                },
                children: function (e) {
                    return pe(e.firstChild)
                },
                contents: function (e) {
                    return e.contentDocument || oe.merge([], e.childNodes)
                }
            }, function (e, t) {
                oe.fn[e] = function (n, r) {
                    var i = oe.map(this, t, n);
                    return "Until" !== e.slice(-5) && (r = n),
                        r && "string" == typeof r && (i = oe.filter(r, i)),
                        this.length > 1 && (xe[e] || oe.uniqueSort(i),
                            be.test(e) && i.reverse()),
                        this.pushStack(i)
                }
            });
        var we = /\S+/g;
        oe.Callbacks = function (e) {
            e = "string" == typeof e ? o(e) : oe.extend({}, e);
            var t, n, r, i, s = [], a = [], c = -1, l = function () {
                for (i = e.once,
                    r = t = !0; a.length; c = -1)
                    for (n = a.shift(); ++c < s.length;)
                        s[c].apply(n[0], n[1]) === !1 && e.stopOnFalse && (c = s.length,
                            n = !1);
                e.memory || (n = !1),
                    t = !1,
                    i && (s = n ? [] : "")
            }, u = {
                add: function () {
                    return s && (n && !t && (c = s.length - 1,
                        a.push(n)),
                        function t(n) {
                            oe.each(n, function (n, r) {
                                oe.isFunction(r) ? e.unique && u.has(r) || s.push(r) : r && r.length && "string" !== oe.type(r) && t(r)
                            })
                        }(arguments),
                        n && !t && l()),
                        this
                },
                remove: function () {
                    return oe.each(arguments, function (e, t) {
                        for (var n; (n = oe.inArray(t, s, n)) > -1;)
                            s.splice(n, 1),
                                n <= c && c--
                    }),
                        this
                },
                has: function (e) {
                    return e ? oe.inArray(e, s) > -1 : s.length > 0
                },
                empty: function () {
                    return s && (s = []),
                        this
                },
                disable: function () {
                    return i = a = [],
                        s = n = "",
                        this
                },
                disabled: function () {
                    return !s
                },
                lock: function () {
                    return i = a = [],
                        n || (s = n = ""),
                        this
                },
                locked: function () {
                    return !!i
                },
                fireWith: function (e, n) {
                    return i || (n = n || [],
                        n = [e, n.slice ? n.slice() : n],
                        a.push(n),
                        t || l()),
                        this
                },
                fire: function () {
                    return u.fireWith(this, arguments),
                        this
                },
                fired: function () {
                    return !!r
                }
            };
            return u
        }
            ,
            oe.extend({
                Deferred: function (e) {
                    var t = [["resolve", "done", oe.Callbacks("once memory"), "resolved"], ["reject", "fail", oe.Callbacks("once memory"), "rejected"], ["notify", "progress", oe.Callbacks("memory")]]
                        , n = "pending"
                        , r = {
                            state: function () {
                                return n
                            },
                            always: function () {
                                return i.done(arguments).fail(arguments),
                                    this
                            },
                            then: function () {
                                var e = arguments;
                                return oe.Deferred(function (n) {
                                    oe.each(t, function (t, o) {
                                        var s = oe.isFunction(e[t]) && e[t];
                                        i[o[1]](function () {
                                            var e = s && s.apply(this, arguments);
                                            e && oe.isFunction(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[o[0] + "With"](this === r ? n.promise() : this, s ? [e] : arguments)
                                        })
                                    }),
                                        e = null
                                }).promise()
                            },
                            promise: function (e) {
                                return null != e ? oe.extend(e, r) : r
                            }
                        }
                        , i = {};
                    return r.pipe = r.then,
                        oe.each(t, function (e, o) {
                            var s = o[2]
                                , a = o[3];
                            r[o[1]] = s.add,
                                a && s.add(function () {
                                    n = a
                                }, t[1 ^ e][2].disable, t[2][2].lock),
                                i[o[0]] = function () {
                                    return i[o[0] + "With"](this === i ? r : this, arguments),
                                        this
                                }
                                ,
                                i[o[0] + "With"] = s.fireWith
                        }),
                        r.promise(i),
                        e && e.call(i, i),
                        i
                },
                when: function (e) {
                    var t, n, r, i = 0, o = X.call(arguments), s = o.length, a = 1 !== s || e && oe.isFunction(e.promise) ? s : 0, c = 1 === a ? e : oe.Deferred(), l = function (e, n, r) {
                        return function (i) {
                            n[e] = this,
                                r[e] = arguments.length > 1 ? X.call(arguments) : i,
                                r === t ? c.notifyWith(n, r) : --a || c.resolveWith(n, r)
                        }
                    };
                    if (s > 1)
                        for (t = new Array(s),
                            n = new Array(s),
                            r = new Array(s); i < s; i++)
                            o[i] && oe.isFunction(o[i].promise) ? o[i].promise().progress(l(i, n, t)).done(l(i, r, o)).fail(c.reject) : --a;
                    return a || c.resolveWith(r, o),
                        c.promise()
                }
            });
        var Ee;
        oe.fn.ready = function (e) {
            return oe.ready.promise().done(e),
                this
        }
            ,
            oe.extend({
                isReady: !1,
                readyWait: 1,
                holdReady: function (e) {
                    e ? oe.readyWait++ : oe.ready(!0)
                },
                ready: function (e) {
                    (e === !0 ? --oe.readyWait : oe.isReady) || (oe.isReady = !0,
                        e !== !0 && --oe.readyWait > 0 || (Ee.resolveWith(K, [oe]),
                            oe.fn.triggerHandler && (oe(K).triggerHandler("ready"),
                                oe(K).off("ready"))))
                }
            }),
            oe.ready.promise = function (t) {
                return Ee || (Ee = oe.Deferred(),
                    "complete" === K.readyState || "loading" !== K.readyState && !K.documentElement.doScroll ? e.setTimeout(oe.ready) : (K.addEventListener("DOMContentLoaded", s),
                        e.addEventListener("load", s))),
                    Ee.promise(t)
            }
            ,
            oe.ready.promise();
        var _e = function (e, t, n, r, i, o, s) {
            var a = 0
                , c = e.length
                , l = null == n;
            if ("object" === oe.type(n)) {
                i = !0;
                for (a in n)
                    _e(e, t, a, n[a], !0, o, s)
            } else if (void 0 !== r && (i = !0,
                oe.isFunction(r) || (s = !0),
                l && (s ? (t.call(e, r),
                    t = null) : (l = t,
                        t = function (e, t, n) {
                            return l.call(oe(e), n)
                        }
                    )),
                t))
                for (; a < c; a++)
                    t(e[a], n, s ? r : r.call(e[a], a, t(e[a], n)));
            return i ? e : l ? t.call(e) : c ? t(e[0], n) : o
        }
            , Se = function (e) {
                return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
            };
        a.uid = 1,
            a.prototype = {
                register: function (e, t) {
                    var n = t || {};
                    return e.nodeType ? e[this.expando] = n : Object.defineProperty(e, this.expando, {
                        value: n,
                        writable: !0,
                        configurable: !0
                    }),
                        e[this.expando]
                },
                cache: function (e) {
                    if (!Se(e))
                        return {};
                    var t = e[this.expando];
                    return t || (t = {},
                        Se(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                            value: t,
                            configurable: !0
                        }))),
                        t
                },
                set: function (e, t, n) {
                    var r, i = this.cache(e);
                    if ("string" == typeof t)
                        i[t] = n;
                    else
                        for (r in t)
                            i[r] = t[r];
                    return i
                },
                get: function (e, t) {
                    return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
                },
                access: function (e, t, n) {
                    var r;
                    return void 0 === t || t && "string" == typeof t && void 0 === n ? (r = this.get(e, t),
                        void 0 !== r ? r : this.get(e, oe.camelCase(t))) : (this.set(e, t, n),
                            void 0 !== n ? n : t)
                },
                remove: function (e, t) {
                    var n, r, i, o = e[this.expando];
                    if (void 0 !== o) {
                        if (void 0 === t)
                            this.register(e);
                        else {
                            oe.isArray(t) ? r = t.concat(t.map(oe.camelCase)) : (i = oe.camelCase(t),
                                t in o ? r = [t, i] : (r = i,
                                    r = r in o ? [r] : r.match(we) || [])),
                                n = r.length;
                            for (; n--;)
                                delete o[r[n]]
                        }
                        (void 0 === t || oe.isEmptyObject(o)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                    }
                },
                hasData: function (e) {
                    var t = e[this.expando];
                    return void 0 !== t && !oe.isEmptyObject(t)
                }
            };
        var ke = new a
            , Me = new a
            , Ce = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
            , Ie = /[A-Z]/g;
        oe.extend({
            hasData: function (e) {
                return Me.hasData(e) || ke.hasData(e)
            },
            data: function (e, t, n) {
                return Me.access(e, t, n)
            },
            removeData: function (e, t) {
                Me.remove(e, t)
            },
            _data: function (e, t, n) {
                return ke.access(e, t, n)
            },
            _removeData: function (e, t) {
                ke.remove(e, t)
            }
        }),
            oe.fn.extend({
                data: function (e, t) {
                    var n, r, i, o = this[0], s = o && o.attributes;
                    if (void 0 === e) {
                        if (this.length && (i = Me.get(o),
                            1 === o.nodeType && !ke.get(o, "hasDataAttrs"))) {
                            for (n = s.length; n--;)
                                s[n] && (r = s[n].name,
                                    0 === r.indexOf("data-") && (r = oe.camelCase(r.slice(5)),
                                        c(o, r, i[r])));
                            ke.set(o, "hasDataAttrs", !0)
                        }
                        return i
                    }
                    return "object" == typeof e ? this.each(function () {
                        Me.set(this, e)
                    }) : _e(this, function (t) {
                        var n, r;
                        if (o && void 0 === t) {
                            if (n = Me.get(o, e) || Me.get(o, e.replace(Ie, "-$&").toLowerCase()),
                                void 0 !== n)
                                return n;
                            if (r = oe.camelCase(e),
                                n = Me.get(o, r),
                                void 0 !== n)
                                return n;
                            if (n = c(o, r, void 0),
                                void 0 !== n)
                                return n
                        } else
                            r = oe.camelCase(e),
                                this.each(function () {
                                    var n = Me.get(this, r);
                                    Me.set(this, r, t),
                                        e.indexOf("-") > -1 && void 0 !== n && Me.set(this, e, t)
                                })
                    }, null, t, arguments.length > 1, null, !0)
                },
                removeData: function (e) {
                    return this.each(function () {
                        Me.remove(this, e)
                    })
                }
            }),
            oe.extend({
                queue: function (e, t, n) {
                    var r;
                    if (e)
                        return t = (t || "fx") + "queue",
                            r = ke.get(e, t),
                            n && (!r || oe.isArray(n) ? r = ke.access(e, t, oe.makeArray(n)) : r.push(n)),
                            r || []
                },
                dequeue: function (e, t) {
                    t = t || "fx";
                    var n = oe.queue(e, t)
                        , r = n.length
                        , i = n.shift()
                        , o = oe._queueHooks(e, t)
                        , s = function () {
                            oe.dequeue(e, t)
                        };
                    "inprogress" === i && (i = n.shift(),
                        r--),
                        i && ("fx" === t && n.unshift("inprogress"),
                            delete o.stop,
                            i.call(e, s, o)),
                        !r && o && o.empty.fire()
                },
                _queueHooks: function (e, t) {
                    var n = t + "queueHooks";
                    return ke.get(e, n) || ke.access(e, n, {
                        empty: oe.Callbacks("once memory").add(function () {
                            ke.remove(e, [t + "queue", n])
                        })
                    })
                }
            }),
            oe.fn.extend({
                queue: function (e, t) {
                    var n = 2;
                    return "string" != typeof e && (t = e,
                        e = "fx",
                        n--),
                        arguments.length < n ? oe.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                            var n = oe.queue(this, e, t);
                            oe._queueHooks(this, e),
                                "fx" === e && "inprogress" !== n[0] && oe.dequeue(this, e)
                        })
                },
                dequeue: function (e) {
                    return this.each(function () {
                        oe.dequeue(this, e)
                    })
                },
                clearQueue: function (e) {
                    return this.queue(e || "fx", [])
                },
                promise: function (e, t) {
                    var n, r = 1, i = oe.Deferred(), o = this, s = this.length, a = function () {
                        --r || i.resolveWith(o, [o])
                    };
                    for ("string" != typeof e && (t = e,
                        e = void 0),
                        e = e || "fx"; s--;)
                        n = ke.get(o[s], e + "queueHooks"),
                            n && n.empty && (r++ ,
                                n.empty.add(a));
                    return a(),
                        i.promise(t)
                }
            });
        var Te = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
            , Pe = new RegExp("^(?:([+-])=|)(" + Te + ")([a-z%]*)$", "i")
            , Ae = ["Top", "Right", "Bottom", "Left"]
            , Le = function (e, t) {
                return e = t || e,
                    "none" === oe.css(e, "display") || !oe.contains(e.ownerDocument, e)
            }
            , Oe = /^(?:checkbox|radio)$/i
            , De = /<([\w:-]+)/
            , qe = /^$|\/(?:java|ecma)script/i
            , Ne = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        Ne.optgroup = Ne.option,
            Ne.tbody = Ne.tfoot = Ne.colgroup = Ne.caption = Ne.thead,
            Ne.th = Ne.td;
        var Fe = /<|&#?\w+;/;
        !function () {
            var e = K.createDocumentFragment()
                , t = e.appendChild(K.createElement("div"))
                , n = K.createElement("input");
            n.setAttribute("type", "radio"),
                n.setAttribute("checked", "checked"),
                n.setAttribute("name", "t"),
                t.appendChild(n),
                re.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked,
                t.innerHTML = "<textarea>x</textarea>",
                re.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
        }();
        var Re = /^key/
            , je = /^(?:mouse|pointer|contextmenu|drag|drop)|click/
            , Be = /^([^.]*)(?:\.(.+)|)/;
        oe.event = {
            global: {},
            add: function (e, t, n, r, i) {
                var o, s, a, c, l, u, d, p, h, f, m, g = ke.get(e);
                if (g)
                    for (n.handler && (o = n,
                        n = o.handler,
                        i = o.selector),
                        n.guid || (n.guid = oe.guid++),
                        (c = g.events) || (c = g.events = {}),
                        (s = g.handle) || (s = g.handle = function (t) {
                            return "undefined" != typeof oe && oe.event.triggered !== t.type ? oe.event.dispatch.apply(e, arguments) : void 0
                        }
                        ),
                        t = (t || "").match(we) || [""],
                        l = t.length; l--;)
                        a = Be.exec(t[l]) || [],
                            h = m = a[1],
                            f = (a[2] || "").split(".").sort(),
                            h && (d = oe.event.special[h] || {},
                                h = (i ? d.delegateType : d.bindType) || h,
                                d = oe.event.special[h] || {},
                                u = oe.extend({
                                    type: h,
                                    origType: m,
                                    data: r,
                                    handler: n,
                                    guid: n.guid,
                                    selector: i,
                                    needsContext: i && oe.expr.match.needsContext.test(i),
                                    namespace: f.join(".")
                                }, o),
                                (p = c[h]) || (p = c[h] = [],
                                    p.delegateCount = 0,
                                    d.setup && d.setup.call(e, r, f, s) !== !1 || e.addEventListener && e.addEventListener(h, s)),
                                d.add && (d.add.call(e, u),
                                    u.handler.guid || (u.handler.guid = n.guid)),
                                i ? p.splice(p.delegateCount++, 0, u) : p.push(u),
                                oe.event.global[h] = !0)
            },
            remove: function (e, t, n, r, i) {
                var o, s, a, c, l, u, d, p, h, f, m, g = ke.hasData(e) && ke.get(e);
                if (g && (c = g.events)) {
                    for (t = (t || "").match(we) || [""],
                        l = t.length; l--;)
                        if (a = Be.exec(t[l]) || [],
                            h = m = a[1],
                            f = (a[2] || "").split(".").sort(),
                            h) {
                            for (d = oe.event.special[h] || {},
                                h = (r ? d.delegateType : d.bindType) || h,
                                p = c[h] || [],
                                a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                                s = o = p.length; o--;)
                                u = p[o],
                                    !i && m !== u.origType || n && n.guid !== u.guid || a && !a.test(u.namespace) || r && r !== u.selector && ("**" !== r || !u.selector) || (p.splice(o, 1),
                                        u.selector && p.delegateCount-- ,
                                        d.remove && d.remove.call(e, u));
                            s && !p.length && (d.teardown && d.teardown.call(e, f, g.handle) !== !1 || oe.removeEvent(e, h, g.handle),
                                delete c[h])
                        } else
                            for (h in c)
                                oe.event.remove(e, h + t[l], n, r, !0);
                    oe.isEmptyObject(c) && ke.remove(e, "handle events")
                }
            },
            dispatch: function (e) {
                e = oe.event.fix(e);
                var t, n, r, i, o, s = [], a = X.call(arguments), c = (ke.get(this, "events") || {})[e.type] || [], l = oe.event.special[e.type] || {};
                if (a[0] = e,
                    e.delegateTarget = this,
                    !l.preDispatch || l.preDispatch.call(this, e) !== !1) {
                    for (s = oe.event.handlers.call(this, e, c),
                        t = 0; (i = s[t++]) && !e.isPropagationStopped();)
                        for (e.currentTarget = i.elem,
                            n = 0; (o = i.handlers[n++]) && !e.isImmediatePropagationStopped();)
                            e.rnamespace && !e.rnamespace.test(o.namespace) || (e.handleObj = o,
                                e.data = o.data,
                                r = ((oe.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, a),
                                void 0 !== r && (e.result = r) === !1 && (e.preventDefault(),
                                    e.stopPropagation()));
                    return l.postDispatch && l.postDispatch.call(this, e),
                        e.result
                }
            },
            handlers: function (e, t) {
                var n, r, i, o, s = [], a = t.delegateCount, c = e.target;
                if (a && c.nodeType && ("click" !== e.type || isNaN(e.button) || e.button < 1))
                    for (; c !== this; c = c.parentNode || this)
                        if (1 === c.nodeType && (c.disabled !== !0 || "click" !== e.type)) {
                            for (r = [],
                                n = 0; n < a; n++)
                                o = t[n],
                                    i = o.selector + " ",
                                    void 0 === r[i] && (r[i] = o.needsContext ? oe(i, this).index(c) > -1 : oe.find(i, this, null, [c]).length),
                                    r[i] && r.push(o);
                            r.length && s.push({
                                elem: c,
                                handlers: r
                            })
                        }
                return a < t.length && s.push({
                    elem: this,
                    handlers: t.slice(a)
                }),
                    s
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function (e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode),
                        e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function (e, t) {
                    var n, r, i, o = t.button;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || K,
                        r = n.documentElement,
                        i = n.body,
                        e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0),
                        e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)),
                        e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0),
                        e
                }
            },
            fix: function (e) {
                if (e[oe.expando])
                    return e;
                var t, n, r, i = e.type, o = e, s = this.fixHooks[i];
                for (s || (this.fixHooks[i] = s = je.test(i) ? this.mouseHooks : Re.test(i) ? this.keyHooks : {}),
                    r = s.props ? this.props.concat(s.props) : this.props,
                    e = new oe.Event(o),
                    t = r.length; t--;)
                    n = r[t],
                        e[n] = o[n];
                return e.target || (e.target = K),
                    3 === e.target.nodeType && (e.target = e.target.parentNode),
                    s.filter ? s.filter(e, o) : e
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function () {
                        if (this !== m() && this.focus)
                            return this.focus(),
                                !1
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function () {
                        if (this === m() && this.blur)
                            return this.blur(),
                                !1
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function () {
                        if ("checkbox" === this.type && this.click && oe.nodeName(this, "input"))
                            return this.click(),
                                !1
                    },
                    _default: function (e) {
                        return oe.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function (e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            }
        },
            oe.removeEvent = function (e, t, n) {
                e.removeEventListener && e.removeEventListener(t, n)
            }
            ,
            oe.Event = function (e, t) {
                return this instanceof oe.Event ? (e && e.type ? (this.originalEvent = e,
                    this.type = e.type,
                    this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? h : f) : this.type = e,
                    t && oe.extend(this, t),
                    this.timeStamp = e && e.timeStamp || oe.now(),
                    void (this[oe.expando] = !0)) : new oe.Event(e, t)
            }
            ,
            oe.Event.prototype = {
                constructor: oe.Event,
                isDefaultPrevented: f,
                isPropagationStopped: f,
                isImmediatePropagationStopped: f,
                isSimulated: !1,
                preventDefault: function () {
                    var e = this.originalEvent;
                    this.isDefaultPrevented = h,
                        e && !this.isSimulated && e.preventDefault()
                },
                stopPropagation: function () {
                    var e = this.originalEvent;
                    this.isPropagationStopped = h,
                        e && !this.isSimulated && e.stopPropagation()
                },
                stopImmediatePropagation: function () {
                    var e = this.originalEvent;
                    this.isImmediatePropagationStopped = h,
                        e && !this.isSimulated && e.stopImmediatePropagation(),
                        this.stopPropagation()
                }
            },
            oe.each({
                mouseenter: "mouseover",
                mouseleave: "mouseout",
                pointerenter: "pointerover",
                pointerleave: "pointerout"
            }, function (e, t) {
                oe.event.special[e] = {
                    delegateType: t,
                    bindType: t,
                    handle: function (e) {
                        var n, r = this, i = e.relatedTarget, o = e.handleObj;
                        return i && (i === r || oe.contains(r, i)) || (e.type = o.origType,
                            n = o.handler.apply(this, arguments),
                            e.type = t),
                            n
                    }
                }
            }),
            oe.fn.extend({
                on: function (e, t, n, r) {
                    return g(this, e, t, n, r)
                },
                one: function (e, t, n, r) {
                    return g(this, e, t, n, r, 1)
                },
                off: function (e, t, n) {
                    var r, i;
                    if (e && e.preventDefault && e.handleObj)
                        return r = e.handleObj,
                            oe(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler),
                            this;
                    if ("object" == typeof e) {
                        for (i in e)
                            this.off(i, t, e[i]);
                        return this
                    }
                    return t !== !1 && "function" != typeof t || (n = t,
                        t = void 0),
                        n === !1 && (n = f),
                        this.each(function () {
                            oe.event.remove(this, e, n, t)
                        })
                }
            });
        var Ve = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi
            , Ue = /<script|<style|<link/i
            , Ge = /checked\s*(?:[^=]|=\s*.checked.)/i
            , ze = /^true\/(.*)/
            , He = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
        oe.extend({
            htmlPrefilter: function (e) {
                return e.replace(Ve, "<$1></$2>")
            },
            clone: function (e, t, n) {
                var r, i, o, s, a = e.cloneNode(!0), c = oe.contains(e.ownerDocument, e);
                if (!(re.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || oe.isXMLDoc(e)))
                    for (s = u(a),
                        o = u(e),
                        r = 0,
                        i = o.length; r < i; r++)
                        w(o[r], s[r]);
                if (t)
                    if (n)
                        for (o = o || u(e),
                            s = s || u(a),
                            r = 0,
                            i = o.length; r < i; r++)
                            x(o[r], s[r]);
                    else
                        x(e, a);
                return s = u(a, "script"),
                    s.length > 0 && d(s, !c && u(e, "script")),
                    a
            },
            cleanData: function (e) {
                for (var t, n, r, i = oe.event.special, o = 0; void 0 !== (n = e[o]); o++)
                    if (Se(n)) {
                        if (t = n[ke.expando]) {
                            if (t.events)
                                for (r in t.events)
                                    i[r] ? oe.event.remove(n, r) : oe.removeEvent(n, r, t.handle);
                            n[ke.expando] = void 0
                        }
                        n[Me.expando] && (n[Me.expando] = void 0)
                    }
            }
        }),
            oe.fn.extend({
                domManip: E,
                detach: function (e) {
                    return _(this, e, !0)
                },
                remove: function (e) {
                    return _(this, e)
                },
                text: function (e) {
                    return _e(this, function (e) {
                        return void 0 === e ? oe.text(this) : this.empty().each(function () {
                            1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                        })
                    }, null, e, arguments.length)
                },
                append: function () {
                    return E(this, arguments, function (e) {
                        if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                            var t = y(this, e);
                            t.appendChild(e)
                        }
                    })
                },
                prepend: function () {
                    return E(this, arguments, function (e) {
                        if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                            var t = y(this, e);
                            t.insertBefore(e, t.firstChild)
                        }
                    })
                },
                before: function () {
                    return E(this, arguments, function (e) {
                        this.parentNode && this.parentNode.insertBefore(e, this)
                    })
                },
                after: function () {
                    return E(this, arguments, function (e) {
                        this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                    })
                },
                empty: function () {
                    for (var e, t = 0; null != (e = this[t]); t++)
                        1 === e.nodeType && (oe.cleanData(u(e, !1)),
                            e.textContent = "");
                    return this
                },
                clone: function (e, t) {
                    return e = null != e && e,
                        t = null == t ? e : t,
                        this.map(function () {
                            return oe.clone(this, e, t)
                        })
                },
                html: function (e) {
                    return _e(this, function (e) {
                        var t = this[0] || {}
                            , n = 0
                            , r = this.length;
                        if (void 0 === e && 1 === t.nodeType)
                            return t.innerHTML;
                        if ("string" == typeof e && !Ue.test(e) && !Ne[(De.exec(e) || ["", ""])[1].toLowerCase()]) {
                            e = oe.htmlPrefilter(e);
                            try {
                                for (; n < r; n++)
                                    t = this[n] || {},
                                        1 === t.nodeType && (oe.cleanData(u(t, !1)),
                                            t.innerHTML = e);
                                t = 0
                            } catch (e) { }
                        }
                        t && this.empty().append(e)
                    }, null, e, arguments.length)
                },
                replaceWith: function () {
                    var e = [];
                    return E(this, arguments, function (t) {
                        var n = this.parentNode;
                        oe.inArray(this, e) < 0 && (oe.cleanData(u(this)),
                            n && n.replaceChild(t, this))
                    }, e)
                }
            }),
            oe.each({
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith"
            }, function (e, t) {
                oe.fn[e] = function (e) {
                    for (var n, r = [], i = oe(e), o = i.length - 1, s = 0; s <= o; s++)
                        n = s === o ? this : this.clone(!0),
                            oe(i[s])[t](n),
                            Z.apply(r, n.get());
                    return this.pushStack(r)
                }
            });
        var We, Ye = {
            HTML: "block",
            BODY: "block"
        }, $e = /^margin/, Ke = new RegExp("^(" + Te + ")(?!px)[a-z%]+$", "i"), Xe = function (t) {
            var n = t.ownerDocument.defaultView;
            return n && n.opener || (n = e),
                n.getComputedStyle(t)
        }, Qe = function (e, t, n, r) {
            var i, o, s = {};
            for (o in t)
                s[o] = e.style[o],
                    e.style[o] = t[o];
            i = n.apply(e, r || []);
            for (o in t)
                e.style[o] = s[o];
            return i
        }, Ze = K.documentElement;
        !function () {
            function t() {
                a.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
                    a.innerHTML = "",
                    Ze.appendChild(s);
                var t = e.getComputedStyle(a);
                n = "1%" !== t.top,
                    o = "2px" === t.marginLeft,
                    r = "4px" === t.width,
                    a.style.marginRight = "50%",
                    i = "4px" === t.marginRight,
                    Ze.removeChild(s)
            }
            var n, r, i, o, s = K.createElement("div"), a = K.createElement("div");
            a.style && (a.style.backgroundClip = "content-box",
                a.cloneNode(!0).style.backgroundClip = "",
                re.clearCloneStyle = "content-box" === a.style.backgroundClip,
                s.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
                s.appendChild(a),
                oe.extend(re, {
                    pixelPosition: function () {
                        return t(),
                            n
                    },
                    boxSizingReliable: function () {
                        return null == r && t(),
                            r
                    },
                    pixelMarginRight: function () {
                        return null == r && t(),
                            i
                    },
                    reliableMarginLeft: function () {
                        return null == r && t(),
                            o
                    },
                    reliableMarginRight: function () {
                        var t, n = a.appendChild(K.createElement("div"));
                        return n.style.cssText = a.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
                            n.style.marginRight = n.style.width = "0",
                            a.style.width = "1px",
                            Ze.appendChild(s),
                            t = !parseFloat(e.getComputedStyle(n).marginRight),
                            Ze.removeChild(s),
                            a.removeChild(n),
                            t
                    }
                }))
        }();
        var Je = /^(none|table(?!-c[ea]).+)/
            , et = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            }
            , tt = {
                letterSpacing: "0",
                fontWeight: "400"
            }
            , nt = ["Webkit", "O", "Moz", "ms"]
            , rt = K.createElement("div").style;
        oe.extend({
            cssHooks: {
                opacity: {
                    get: function (e, t) {
                        if (t) {
                            var n = M(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                float: "cssFloat"
            },
            style: function (e, t, n, r) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var i, o, s, a = oe.camelCase(t), c = e.style;
                    return t = oe.cssProps[a] || (oe.cssProps[a] = I(a) || a),
                        s = oe.cssHooks[t] || oe.cssHooks[a],
                        void 0 === n ? s && "get" in s && void 0 !== (i = s.get(e, !1, r)) ? i : c[t] : (o = typeof n,
                            "string" === o && (i = Pe.exec(n)) && i[1] && (n = l(e, t, i),
                                o = "number"),
                            null != n && n === n && ("number" === o && (n += i && i[3] || (oe.cssNumber[a] ? "" : "px")),
                                re.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (c[t] = "inherit"),
                                s && "set" in s && void 0 === (n = s.set(e, n, r)) || (c[t] = n)),
                            void 0)
                }
            },
            css: function (e, t, n, r) {
                var i, o, s, a = oe.camelCase(t);
                return t = oe.cssProps[a] || (oe.cssProps[a] = I(a) || a),
                    s = oe.cssHooks[t] || oe.cssHooks[a],
                    s && "get" in s && (i = s.get(e, !0, n)),
                    void 0 === i && (i = M(e, t, r)),
                    "normal" === i && t in tt && (i = tt[t]),
                    "" === n || n ? (o = parseFloat(i),
                        n === !0 || isFinite(o) ? o || 0 : i) : i
            }
        }),
            oe.each(["height", "width"], function (e, t) {
                oe.cssHooks[t] = {
                    get: function (e, n, r) {
                        if (n)
                            return Je.test(oe.css(e, "display")) && 0 === e.offsetWidth ? Qe(e, et, function () {
                                return A(e, t, r)
                            }) : A(e, t, r)
                    },
                    set: function (e, n, r) {
                        var i, o = r && Xe(e), s = r && P(e, t, r, "border-box" === oe.css(e, "boxSizing", !1, o), o);
                        return s && (i = Pe.exec(n)) && "px" !== (i[3] || "px") && (e.style[t] = n,
                            n = oe.css(e, t)),
                            T(e, n, s)
                    }
                }
            }),
            oe.cssHooks.marginLeft = C(re.reliableMarginLeft, function (e, t) {
                if (t)
                    return (parseFloat(M(e, "marginLeft")) || e.getBoundingClientRect().left - Qe(e, {
                        marginLeft: 0
                    }, function () {
                        return e.getBoundingClientRect().left
                    })) + "px"
            }),
            oe.cssHooks.marginRight = C(re.reliableMarginRight, function (e, t) {
                if (t)
                    return Qe(e, {
                        display: "inline-block"
                    }, M, [e, "marginRight"])
            }),
            oe.each({
                margin: "",
                padding: "",
                border: "Width"
            }, function (e, t) {
                oe.cssHooks[e + t] = {
                    expand: function (n) {
                        for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; r < 4; r++)
                            i[e + Ae[r] + t] = o[r] || o[r - 2] || o[0];
                        return i
                    }
                },
                    $e.test(e) || (oe.cssHooks[e + t].set = T)
            }),
            oe.fn.extend({
                css: function (e, t) {
                    return _e(this, function (e, t, n) {
                        var r, i, o = {}, s = 0;
                        if (oe.isArray(t)) {
                            for (r = Xe(e),
                                i = t.length; s < i; s++)
                                o[t[s]] = oe.css(e, t[s], !1, r);
                            return o
                        }
                        return void 0 !== n ? oe.style(e, t, n) : oe.css(e, t)
                    }, e, t, arguments.length > 1)
                },
                show: function () {
                    return L(this, !0)
                },
                hide: function () {
                    return L(this)
                },
                toggle: function (e) {
                    return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                        Le(this) ? oe(this).show() : oe(this).hide()
                    })
                }
            }),
            oe.Tween = O,
            O.prototype = {
                constructor: O,
                init: function (e, t, n, r, i, o) {
                    this.elem = e,
                        this.prop = n,
                        this.easing = i || oe.easing._default,
                        this.options = t,
                        this.start = this.now = this.cur(),
                        this.end = r,
                        this.unit = o || (oe.cssNumber[n] ? "" : "px")
                },
                cur: function () {
                    var e = O.propHooks[this.prop];
                    return e && e.get ? e.get(this) : O.propHooks._default.get(this)
                },
                run: function (e) {
                    var t, n = O.propHooks[this.prop];
                    return this.options.duration ? this.pos = t = oe.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e,
                        this.now = (this.end - this.start) * t + this.start,
                        this.options.step && this.options.step.call(this.elem, this.now, this),
                        n && n.set ? n.set(this) : O.propHooks._default.set(this),
                        this
                }
            },
            O.prototype.init.prototype = O.prototype,
            O.propHooks = {
                _default: {
                    get: function (e) {
                        var t;
                        return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = oe.css(e.elem, e.prop, ""),
                            t && "auto" !== t ? t : 0)
                    },
                    set: function (e) {
                        oe.fx.step[e.prop] ? oe.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[oe.cssProps[e.prop]] && !oe.cssHooks[e.prop] ? e.elem[e.prop] = e.now : oe.style(e.elem, e.prop, e.now + e.unit)
                    }
                }
            },
            O.propHooks.scrollTop = O.propHooks.scrollLeft = {
                set: function (e) {
                    e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
                }
            },
            oe.easing = {
                linear: function (e) {
                    return e
                },
                swing: function (e) {
                    return .5 - Math.cos(e * Math.PI) / 2
                },
                _default: "swing"
            },
            oe.fx = O.prototype.init,
            oe.fx.step = {};
        var it, ot, st = /^(?:toggle|show|hide)$/, at = /queueHooks$/;
        oe.Animation = oe.extend(j, {
            tweeners: {
                "*": [function (e, t) {
                    var n = this.createTween(e, t);
                    return l(n.elem, e, Pe.exec(t), n),
                        n
                }
                ]
            },
            tweener: function (e, t) {
                oe.isFunction(e) ? (t = e,
                    e = ["*"]) : e = e.match(we);
                for (var n, r = 0, i = e.length; r < i; r++)
                    n = e[r],
                        j.tweeners[n] = j.tweeners[n] || [],
                        j.tweeners[n].unshift(t)
            },
            prefilters: [F],
            prefilter: function (e, t) {
                t ? j.prefilters.unshift(e) : j.prefilters.push(e)
            }
        }),
            oe.speed = function (e, t, n) {
                var r = e && "object" == typeof e ? oe.extend({}, e) : {
                    complete: n || !n && t || oe.isFunction(e) && e,
                    duration: e,
                    easing: n && t || t && !oe.isFunction(t) && t
                };
                return r.duration = oe.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in oe.fx.speeds ? oe.fx.speeds[r.duration] : oe.fx.speeds._default,
                    null != r.queue && r.queue !== !0 || (r.queue = "fx"),
                    r.old = r.complete,
                    r.complete = function () {
                        oe.isFunction(r.old) && r.old.call(this),
                            r.queue && oe.dequeue(this, r.queue)
                    }
                    ,
                    r
            }
            ,
            oe.fn.extend({
                fadeTo: function (e, t, n, r) {
                    return this.filter(Le).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, r)
                },
                animate: function (e, t, n, r) {
                    var i = oe.isEmptyObject(e)
                        , o = oe.speed(t, n, r)
                        , s = function () {
                            var t = j(this, oe.extend({}, e), o);
                            (i || ke.get(this, "finish")) && t.stop(!0)
                        };
                    return s.finish = s,
                        i || o.queue === !1 ? this.each(s) : this.queue(o.queue, s)
                },
                stop: function (e, t, n) {
                    var r = function (e) {
                        var t = e.stop;
                        delete e.stop,
                            t(n)
                    };
                    return "string" != typeof e && (n = t,
                        t = e,
                        e = void 0),
                        t && e !== !1 && this.queue(e || "fx", []),
                        this.each(function () {
                            var t = !0
                                , i = null != e && e + "queueHooks"
                                , o = oe.timers
                                , s = ke.get(this);
                            if (i)
                                s[i] && s[i].stop && r(s[i]);
                            else
                                for (i in s)
                                    s[i] && s[i].stop && at.test(i) && r(s[i]);
                            for (i = o.length; i--;)
                                o[i].elem !== this || null != e && o[i].queue !== e || (o[i].anim.stop(n),
                                    t = !1,
                                    o.splice(i, 1));
                            !t && n || oe.dequeue(this, e)
                        })
                },
                finish: function (e) {
                    return e !== !1 && (e = e || "fx"),
                        this.each(function () {
                            var t, n = ke.get(this), r = n[e + "queue"], i = n[e + "queueHooks"], o = oe.timers, s = r ? r.length : 0;
                            for (n.finish = !0,
                                oe.queue(this, e, []),
                                i && i.stop && i.stop.call(this, !0),
                                t = o.length; t--;)
                                o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0),
                                    o.splice(t, 1));
                            for (t = 0; t < s; t++)
                                r[t] && r[t].finish && r[t].finish.call(this);
                            delete n.finish
                        })
                }
            }),
            oe.each(["toggle", "show", "hide"], function (e, t) {
                var n = oe.fn[t];
                oe.fn[t] = function (e, r, i) {
                    return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(q(t, !0), e, r, i)
                }
            }),
            oe.each({
                slideDown: q("show"),
                slideUp: q("hide"),
                slideToggle: q("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function (e, t) {
                oe.fn[e] = function (e, n, r) {
                    return this.animate(t, e, n, r)
                }
            }),
            oe.timers = [],
            oe.fx.tick = function () {
                var e, t = 0, n = oe.timers;
                for (it = oe.now(); t < n.length; t++)
                    e = n[t],
                        e() || n[t] !== e || n.splice(t--, 1);
                n.length || oe.fx.stop(),
                    it = void 0
            }
            ,
            oe.fx.timer = function (e) {
                oe.timers.push(e),
                    e() ? oe.fx.start() : oe.timers.pop()
            }
            ,
            oe.fx.interval = 13,
            oe.fx.start = function () {
                ot || (ot = e.setInterval(oe.fx.tick, oe.fx.interval))
            }
            ,
            oe.fx.stop = function () {
                e.clearInterval(ot),
                    ot = null
            }
            ,
            oe.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            },
            oe.fn.delay = function (t, n) {
                return t = oe.fx ? oe.fx.speeds[t] || t : t,
                    n = n || "fx",
                    this.queue(n, function (n, r) {
                        var i = e.setTimeout(n, t);
                        r.stop = function () {
                            e.clearTimeout(i)
                        }
                    })
            }
            ,
            function () {
                var e = K.createElement("input")
                    , t = K.createElement("select")
                    , n = t.appendChild(K.createElement("option"));
                e.type = "checkbox",
                    re.checkOn = "" !== e.value,
                    re.optSelected = n.selected,
                    t.disabled = !0,
                    re.optDisabled = !n.disabled,
                    e = K.createElement("input"),
                    e.value = "t",
                    e.type = "radio",
                    re.radioValue = "t" === e.value
            }();
        var ct, lt = oe.expr.attrHandle;
        oe.fn.extend({
            attr: function (e, t) {
                return _e(this, oe.attr, e, t, arguments.length > 1)
            },
            removeAttr: function (e) {
                return this.each(function () {
                    oe.removeAttr(this, e)
                })
            }
        }),
            oe.extend({
                attr: function (e, t, n) {
                    var r, i, o = e.nodeType;
                    if (3 !== o && 8 !== o && 2 !== o)
                        return "undefined" == typeof e.getAttribute ? oe.prop(e, t, n) : (1 === o && oe.isXMLDoc(e) || (t = t.toLowerCase(),
                            i = oe.attrHooks[t] || (oe.expr.match.bool.test(t) ? ct : void 0)),
                            void 0 !== n ? null === n ? void oe.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""),
                                n) : i && "get" in i && null !== (r = i.get(e, t)) ? r : (r = oe.find.attr(e, t),
                                    null == r ? void 0 : r))
                },
                attrHooks: {
                    type: {
                        set: function (e, t) {
                            if (!re.radioValue && "radio" === t && oe.nodeName(e, "input")) {
                                var n = e.value;
                                return e.setAttribute("type", t),
                                    n && (e.value = n),
                                    t
                            }
                        }
                    }
                },
                removeAttr: function (e, t) {
                    var n, r, i = 0, o = t && t.match(we);
                    if (o && 1 === e.nodeType)
                        for (; n = o[i++];)
                            r = oe.propFix[n] || n,
                                oe.expr.match.bool.test(n) && (e[r] = !1),
                                e.removeAttribute(n)
                }
            }),
            ct = {
                set: function (e, t, n) {
                    return t === !1 ? oe.removeAttr(e, n) : e.setAttribute(n, n),
                        n
                }
            },
            oe.each(oe.expr.match.bool.source.match(/\w+/g), function (e, t) {
                var n = lt[t] || oe.find.attr;
                lt[t] = function (e, t, r) {
                    var i, o;
                    return r || (o = lt[t],
                        lt[t] = i,
                        i = null != n(e, t, r) ? t.toLowerCase() : null,
                        lt[t] = o),
                        i
                }
            });
        var ut = /^(?:input|select|textarea|button)$/i
            , dt = /^(?:a|area)$/i;
        oe.fn.extend({
            prop: function (e, t) {
                return _e(this, oe.prop, e, t, arguments.length > 1)
            },
            removeProp: function (e) {
                return this.each(function () {
                    delete this[oe.propFix[e] || e]
                })
            }
        }),
            oe.extend({
                prop: function (e, t, n) {
                    var r, i, o = e.nodeType;
                    if (3 !== o && 8 !== o && 2 !== o)
                        return 1 === o && oe.isXMLDoc(e) || (t = oe.propFix[t] || t,
                            i = oe.propHooks[t]),
                            void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t]
                },
                propHooks: {
                    tabIndex: {
                        get: function (e) {
                            var t = oe.find.attr(e, "tabindex");
                            return t ? parseInt(t, 10) : ut.test(e.nodeName) || dt.test(e.nodeName) && e.href ? 0 : -1
                        }
                    }
                },
                propFix: {
                    for: "htmlFor",
                    class: "className"
                }
            }),
            re.optSelected || (oe.propHooks.selected = {
                get: function (e) {
                    var t = e.parentNode;
                    return t && t.parentNode && t.parentNode.selectedIndex,
                        null
                },
                set: function (e) {
                    var t = e.parentNode;
                    t && (t.selectedIndex,
                        t.parentNode && t.parentNode.selectedIndex)
                }
            }),
            oe.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
                oe.propFix[this.toLowerCase()] = this
            });
        var pt = /[\t\r\n\f]/g;
        oe.fn.extend({
            addClass: function (e) {
                var t, n, r, i, o, s, a, c = 0;
                if (oe.isFunction(e))
                    return this.each(function (t) {
                        oe(this).addClass(e.call(this, t, B(this)))
                    });
                if ("string" == typeof e && e)
                    for (t = e.match(we) || []; n = this[c++];)
                        if (i = B(n),
                            r = 1 === n.nodeType && (" " + i + " ").replace(pt, " ")) {
                            for (s = 0; o = t[s++];)
                                r.indexOf(" " + o + " ") < 0 && (r += o + " ");
                            a = oe.trim(r),
                                i !== a && n.setAttribute("class", a)
                        }
                return this
            },
            removeClass: function (e) {
                var t, n, r, i, o, s, a, c = 0;
                if (oe.isFunction(e))
                    return this.each(function (t) {
                        oe(this).removeClass(e.call(this, t, B(this)))
                    });
                if (!arguments.length)
                    return this.attr("class", "");
                if ("string" == typeof e && e)
                    for (t = e.match(we) || []; n = this[c++];)
                        if (i = B(n),
                            r = 1 === n.nodeType && (" " + i + " ").replace(pt, " ")) {
                            for (s = 0; o = t[s++];)
                                for (; r.indexOf(" " + o + " ") > -1;)
                                    r = r.replace(" " + o + " ", " ");
                            a = oe.trim(r),
                                i !== a && n.setAttribute("class", a)
                        }
                return this
            },
            toggleClass: function (e, t) {
                var n = typeof e;
                return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : oe.isFunction(e) ? this.each(function (n) {
                    oe(this).toggleClass(e.call(this, n, B(this), t), t)
                }) : this.each(function () {
                    var t, r, i, o;
                    if ("string" === n)
                        for (r = 0,
                            i = oe(this),
                            o = e.match(we) || []; t = o[r++];)
                            i.hasClass(t) ? i.removeClass(t) : i.addClass(t);
                    else
                        void 0 !== e && "boolean" !== n || (t = B(this),
                            t && ke.set(this, "__className__", t),
                            this.setAttribute && this.setAttribute("class", t || e === !1 ? "" : ke.get(this, "__className__") || ""))
                })
            },
            hasClass: function (e) {
                var t, n, r = 0;
                for (t = " " + e + " "; n = this[r++];)
                    if (1 === n.nodeType && (" " + B(n) + " ").replace(pt, " ").indexOf(t) > -1)
                        return !0;
                return !1
            }
        });
        var ht = /\r/g
            , ft = /[\x20\t\r\n\f]+/g;
        oe.fn.extend({
            val: function (e) {
                var t, n, r, i = this[0];
                {
                    if (arguments.length)
                        return r = oe.isFunction(e),
                            this.each(function (n) {
                                var i;
                                1 === this.nodeType && (i = r ? e.call(this, n, oe(this).val()) : e,
                                    null == i ? i = "" : "number" == typeof i ? i += "" : oe.isArray(i) && (i = oe.map(i, function (e) {
                                        return null == e ? "" : e + ""
                                    })),
                                    t = oe.valHooks[this.type] || oe.valHooks[this.nodeName.toLowerCase()],
                                    t && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i))
                            });
                    if (i)
                        return t = oe.valHooks[i.type] || oe.valHooks[i.nodeName.toLowerCase()],
                            t && "get" in t && void 0 !== (n = t.get(i, "value")) ? n : (n = i.value,
                                "string" == typeof n ? n.replace(ht, "") : null == n ? "" : n)
                }
            }
        }),
            oe.extend({
                valHooks: {
                    option: {
                        get: function (e) {
                            var t = oe.find.attr(e, "value");
                            return null != t ? t : oe.trim(oe.text(e)).replace(ft, " ")
                        }
                    },
                    select: {
                        get: function (e) {
                            for (var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || i < 0, s = o ? null : [], a = o ? i + 1 : r.length, c = i < 0 ? a : o ? i : 0; c < a; c++)
                                if (n = r[c],
                                    (n.selected || c === i) && (re.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !oe.nodeName(n.parentNode, "optgroup"))) {
                                    if (t = oe(n).val(),
                                        o)
                                        return t;
                                    s.push(t)
                                }
                            return s
                        },
                        set: function (e, t) {
                            for (var n, r, i = e.options, o = oe.makeArray(t), s = i.length; s--;)
                                r = i[s],
                                    (r.selected = oe.inArray(oe.valHooks.option.get(r), o) > -1) && (n = !0);
                            return n || (e.selectedIndex = -1),
                                o
                        }
                    }
                }
            }),
            oe.each(["radio", "checkbox"], function () {
                oe.valHooks[this] = {
                    set: function (e, t) {
                        if (oe.isArray(t))
                            return e.checked = oe.inArray(oe(e).val(), t) > -1
                    }
                },
                    re.checkOn || (oe.valHooks[this].get = function (e) {
                        return null === e.getAttribute("value") ? "on" : e.value
                    }
                    )
            });
        var mt = /^(?:focusinfocus|focusoutblur)$/;
        oe.extend(oe.event, {
            trigger: function (t, n, r, i) {
                var o, s, a, c, l, u, d, p = [r || K], h = ne.call(t, "type") ? t.type : t, f = ne.call(t, "namespace") ? t.namespace.split(".") : [];
                if (s = a = r = r || K,
                    3 !== r.nodeType && 8 !== r.nodeType && !mt.test(h + oe.event.triggered) && (h.indexOf(".") > -1 && (f = h.split("."),
                        h = f.shift(),
                        f.sort()),
                        l = h.indexOf(":") < 0 && "on" + h,
                        t = t[oe.expando] ? t : new oe.Event(h, "object" == typeof t && t),
                        t.isTrigger = i ? 2 : 3,
                        t.namespace = f.join("."),
                        t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
                        t.result = void 0,
                        t.target || (t.target = r),
                        n = null == n ? [t] : oe.makeArray(n, [t]),
                        d = oe.event.special[h] || {},
                        i || !d.trigger || d.trigger.apply(r, n) !== !1)) {
                    if (!i && !d.noBubble && !oe.isWindow(r)) {
                        for (c = d.delegateType || h,
                            mt.test(c + h) || (s = s.parentNode); s; s = s.parentNode)
                            p.push(s),
                                a = s;
                        a === (r.ownerDocument || K) && p.push(a.defaultView || a.parentWindow || e)
                    }
                    for (o = 0; (s = p[o++]) && !t.isPropagationStopped();)
                        t.type = o > 1 ? c : d.bindType || h,
                            u = (ke.get(s, "events") || {})[t.type] && ke.get(s, "handle"),
                            u && u.apply(s, n),
                            u = l && s[l],
                            u && u.apply && Se(s) && (t.result = u.apply(s, n),
                                t.result === !1 && t.preventDefault());
                    return t.type = h,
                        i || t.isDefaultPrevented() || d._default && d._default.apply(p.pop(), n) !== !1 || !Se(r) || l && oe.isFunction(r[h]) && !oe.isWindow(r) && (a = r[l],
                            a && (r[l] = null),
                            oe.event.triggered = h,
                            r[h](),
                            oe.event.triggered = void 0,
                            a && (r[l] = a)),
                        t.result
                }
            },
            simulate: function (e, t, n) {
                var r = oe.extend(new oe.Event, n, {
                    type: e,
                    isSimulated: !0
                });
                oe.event.trigger(r, null, t)
            }
        }),
            oe.fn.extend({
                trigger: function (e, t) {
                    return this.each(function () {
                        oe.event.trigger(e, t, this)
                    })
                },
                triggerHandler: function (e, t) {
                    var n = this[0];
                    if (n)
                        return oe.event.trigger(e, t, n, !0)
                }
            }),
            oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
                oe.fn[t] = function (e, n) {
                    return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
                }
            }),
            oe.fn.extend({
                hover: function (e, t) {
                    return this.mouseenter(e).mouseleave(t || e)
                }
            }),
            re.focusin = "onfocusin" in e,
            re.focusin || oe.each({
                focus: "focusin",
                blur: "focusout"
            }, function (e, t) {
                var n = function (e) {
                    oe.event.simulate(t, e.target, oe.event.fix(e))
                };
                oe.event.special[t] = {
                    setup: function () {
                        var r = this.ownerDocument || this
                            , i = ke.access(r, t);
                        i || r.addEventListener(e, n, !0),
                            ke.access(r, t, (i || 0) + 1)
                    },
                    teardown: function () {
                        var r = this.ownerDocument || this
                            , i = ke.access(r, t) - 1;
                        i ? ke.access(r, t, i) : (r.removeEventListener(e, n, !0),
                            ke.remove(r, t))
                    }
                }
            });
        var gt = e.location
            , yt = oe.now()
            , vt = /\?/;
        oe.parseJSON = function (e) {
            return JSON.parse(e + "")
        }
            ,
            oe.parseXML = function (t) {
                var n;
                if (!t || "string" != typeof t)
                    return null;
                try {
                    n = (new e.DOMParser).parseFromString(t, "text/xml")
                } catch (e) {
                    n = void 0
                }
                return n && !n.getElementsByTagName("parsererror").length || oe.error("Invalid XML: " + t),
                    n
            }
            ;
        var bt = /#.*$/
            , xt = /([?&])_=[^&]*/
            , wt = /^(.*?):[ \t]*([^\r\n]*)$/gm
            , Et = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/
            , _t = /^(?:GET|HEAD)$/
            , St = /^\/\//
            , kt = {}
            , Mt = {}
            , Ct = "*/".concat("*")
            , It = K.createElement("a");
        It.href = gt.href,
            oe.extend({
                active: 0,
                lastModified: {},
                etag: {},
                ajaxSettings: {
                    url: gt.href,
                    type: "GET",
                    isLocal: Et.test(gt.protocol),
                    global: !0,
                    processData: !0,
                    async: !0,
                    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                    accepts: {
                        "*": Ct,
                        text: "text/plain",
                        html: "text/html",
                        xml: "application/xml, text/xml",
                        json: "application/json, text/javascript"
                    },
                    contents: {
                        xml: /\bxml\b/,
                        html: /\bhtml/,
                        json: /\bjson\b/
                    },
                    responseFields: {
                        xml: "responseXML",
                        text: "responseText",
                        json: "responseJSON"
                    },
                    converters: {
                        "* text": String,
                        "text html": !0,
                        "text json": oe.parseJSON,
                        "text xml": oe.parseXML
                    },
                    flatOptions: {
                        url: !0,
                        context: !0
                    }
                },
                ajaxSetup: function (e, t) {
                    return t ? G(G(e, oe.ajaxSettings), t) : G(oe.ajaxSettings, e)
                },
                ajaxPrefilter: V(kt),
                ajaxTransport: V(Mt),
                ajax: function (t, n) {
                    function r(t, n, r, a) {
                        var l, d, v, b, w, _ = n;
                        2 !== x && (x = 2,
                            c && e.clearTimeout(c),
                            i = void 0,
                            s = a || "",
                            E.readyState = t > 0 ? 4 : 0,
                            l = t >= 200 && t < 300 || 304 === t,
                            r && (b = z(p, E, r)),
                            b = H(p, b, E, l),
                            l ? (p.ifModified && (w = E.getResponseHeader("Last-Modified"),
                                w && (oe.lastModified[o] = w),
                                w = E.getResponseHeader("etag"),
                                w && (oe.etag[o] = w)),
                                204 === t || "HEAD" === p.type ? _ = "nocontent" : 304 === t ? _ = "notmodified" : (_ = b.state,
                                    d = b.data,
                                    v = b.error,
                                    l = !v)) : (v = _,
                                        !t && _ || (_ = "error",
                                            t < 0 && (t = 0))),
                            E.status = t,
                            E.statusText = (n || _) + "",
                            l ? m.resolveWith(h, [d, _, E]) : m.rejectWith(h, [E, _, v]),
                            E.statusCode(y),
                            y = void 0,
                            u && f.trigger(l ? "ajaxSuccess" : "ajaxError", [E, p, l ? d : v]),
                            g.fireWith(h, [E, _]),
                            u && (f.trigger("ajaxComplete", [E, p]),
                                --oe.active || oe.event.trigger("ajaxStop")))
                    }
                    "object" == typeof t && (n = t,
                        t = void 0),
                        n = n || {};
                    var i, o, s, a, c, l, u, d, p = oe.ajaxSetup({}, n), h = p.context || p, f = p.context && (h.nodeType || h.jquery) ? oe(h) : oe.event, m = oe.Deferred(), g = oe.Callbacks("once memory"), y = p.statusCode || {}, v = {}, b = {}, x = 0, w = "canceled", E = {
                        readyState: 0,
                        getResponseHeader: function (e) {
                            var t;
                            if (2 === x) {
                                if (!a)
                                    for (a = {}; t = wt.exec(s);)
                                        a[t[1].toLowerCase()] = t[2];
                                t = a[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        },
                        getAllResponseHeaders: function () {
                            return 2 === x ? s : null
                        },
                        setRequestHeader: function (e, t) {
                            var n = e.toLowerCase();
                            return x || (e = b[n] = b[n] || e,
                                v[e] = t),
                                this
                        },
                        overrideMimeType: function (e) {
                            return x || (p.mimeType = e),
                                this
                        },
                        statusCode: function (e) {
                            var t;
                            if (e)
                                if (x < 2)
                                    for (t in e)
                                        y[t] = [y[t], e[t]];
                                else
                                    E.always(e[E.status]);
                            return this
                        },
                        abort: function (e) {
                            var t = e || w;
                            return i && i.abort(t),
                                r(0, t),
                                this
                        }
                    };
                    if (m.promise(E).complete = g.add,
                        E.success = E.done,
                        E.error = E.fail,
                        p.url = ((t || p.url || gt.href) + "").replace(bt, "").replace(St, gt.protocol + "//"),
                        p.type = n.method || n.type || p.method || p.type,
                        p.dataTypes = oe.trim(p.dataType || "*").toLowerCase().match(we) || [""],
                        null == p.crossDomain) {
                        l = K.createElement("a");
                        try {
                            l.href = p.url,
                                l.href = l.href,
                                p.crossDomain = It.protocol + "//" + It.host != l.protocol + "//" + l.host
                        } catch (e) {
                            p.crossDomain = !0
                        }
                    }
                    if (p.data && p.processData && "string" != typeof p.data && (p.data = oe.param(p.data, p.traditional)),
                        U(kt, p, n, E),
                        2 === x)
                        return E;
                    u = oe.event && p.global,
                        u && 0 === oe.active++ && oe.event.trigger("ajaxStart"),
                        p.type = p.type.toUpperCase(),
                        p.hasContent = !_t.test(p.type),
                        o = p.url,
                        p.hasContent || (p.data && (o = p.url += (vt.test(o) ? "&" : "?") + p.data,
                            delete p.data),
                            p.cache === !1 && (p.url = xt.test(o) ? o.replace(xt, "$1_=" + yt++) : o + (vt.test(o) ? "&" : "?") + "_=" + yt++)),
                        p.ifModified && (oe.lastModified[o] && E.setRequestHeader("If-Modified-Since", oe.lastModified[o]),
                            oe.etag[o] && E.setRequestHeader("If-None-Match", oe.etag[o])),
                        (p.data && p.hasContent && p.contentType !== !1 || n.contentType) && E.setRequestHeader("Content-Type", p.contentType),
                        E.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Ct + "; q=0.01" : "") : p.accepts["*"]);
                    for (d in p.headers)
                        E.setRequestHeader(d, p.headers[d]);
                    if (p.beforeSend && (p.beforeSend.call(h, E, p) === !1 || 2 === x))
                        return E.abort();
                    w = "abort";
                    for (d in {
                        success: 1,
                        error: 1,
                        complete: 1
                    })
                        E[d](p[d]);
                    if (i = U(Mt, p, n, E)) {
                        if (E.readyState = 1,
                            u && f.trigger("ajaxSend", [E, p]),
                            2 === x)
                            return E;
                        p.async && p.timeout > 0 && (c = e.setTimeout(function () {
                            E.abort("timeout")
                        }, p.timeout));
                        try {
                            x = 1,
                                i.send(v, r)
                        } catch (e) {
                            if (!(x < 2))
                                throw e;
                            r(-1, e)
                        }
                    } else
                        r(-1, "No Transport");
                    return E
                },
                getJSON: function (e, t, n) {
                    return oe.get(e, t, n, "json")
                },
                getScript: function (e, t) {
                    return oe.get(e, void 0, t, "script")
                }
            }),
            oe.each(["get", "post"], function (e, t) {
                oe[t] = function (e, n, r, i) {
                    return oe.isFunction(n) && (i = i || r,
                        r = n,
                        n = void 0),
                        oe.ajax(oe.extend({
                            url: e,
                            type: t,
                            dataType: i,
                            data: n,
                            success: r
                        }, oe.isPlainObject(e) && e))
                }
            }),
            oe._evalUrl = function (e) {
                return oe.ajax({
                    url: e,
                    type: "GET",
                    dataType: "script",
                    async: !1,
                    global: !1,
                    throws: !0
                })
            }
            ,
            oe.fn.extend({
                wrapAll: function (e) {
                    var t;
                    return oe.isFunction(e) ? this.each(function (t) {
                        oe(this).wrapAll(e.call(this, t))
                    }) : (this[0] && (t = oe(e, this[0].ownerDocument).eq(0).clone(!0),
                        this[0].parentNode && t.insertBefore(this[0]),
                        t.map(function () {
                            for (var e = this; e.firstElementChild;)
                                e = e.firstElementChild;
                            return e
                        }).append(this)),
                        this)
                },
                wrapInner: function (e) {
                    return oe.isFunction(e) ? this.each(function (t) {
                        oe(this).wrapInner(e.call(this, t))
                    }) : this.each(function () {
                        var t = oe(this)
                            , n = t.contents();
                        n.length ? n.wrapAll(e) : t.append(e)
                    })
                },
                wrap: function (e) {
                    var t = oe.isFunction(e);
                    return this.each(function (n) {
                        oe(this).wrapAll(t ? e.call(this, n) : e)
                    })
                },
                unwrap: function () {
                    return this.parent().each(function () {
                        oe.nodeName(this, "body") || oe(this).replaceWith(this.childNodes)
                    }).end()
                }
            }),
            oe.expr.filters.hidden = function (e) {
                return !oe.expr.filters.visible(e)
            }
            ,
            oe.expr.filters.visible = function (e) {
                return e.offsetWidth > 0 || e.offsetHeight > 0 || e.getClientRects().length > 0
            }
            ;
        var Tt = /%20/g
            , Pt = /\[\]$/
            , At = /\r?\n/g
            , Lt = /^(?:submit|button|image|reset|file)$/i
            , Ot = /^(?:input|select|textarea|keygen)/i;
        oe.param = function (e, t) {
            var n, r = [], i = function (e, t) {
                t = oe.isFunction(t) ? t() : null == t ? "" : t,
                    r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
            if (void 0 === t && (t = oe.ajaxSettings && oe.ajaxSettings.traditional),
                oe.isArray(e) || e.jquery && !oe.isPlainObject(e))
                oe.each(e, function () {
                    i(this.name, this.value)
                });
            else
                for (n in e)
                    W(n, e[n], t, i);
            return r.join("&").replace(Tt, "+")
        }
            ,
            oe.fn.extend({
                serialize: function () {
                    return oe.param(this.serializeArray())
                },
                serializeArray: function () {
                    return this.map(function () {
                        var e = oe.prop(this, "elements");
                        return e ? oe.makeArray(e) : this
                    }).filter(function () {
                        var e = this.type;
                        return this.name && !oe(this).is(":disabled") && Ot.test(this.nodeName) && !Lt.test(e) && (this.checked || !Oe.test(e))
                    }).map(function (e, t) {
                        var n = oe(this).val();
                        return null == n ? null : oe.isArray(n) ? oe.map(n, function (e) {
                            return {
                                name: t.name,
                                value: e.replace(At, "\r\n")
                            }
                        }) : {
                                name: t.name,
                                value: n.replace(At, "\r\n")
                            }
                    }).get()
                }
            }),
            oe.ajaxSettings.xhr = function () {
                try {
                    return new e.XMLHttpRequest
                } catch (e) { }
            }
            ;
        var Dt = {
            0: 200,
            1223: 204
        }
            , qt = oe.ajaxSettings.xhr();
        re.cors = !!qt && "withCredentials" in qt,
            re.ajax = qt = !!qt,
            oe.ajaxTransport(function (t) {
                var n, r;
                if (re.cors || qt && !t.crossDomain)
                    return {
                        send: function (i, o) {
                            var s, a = t.xhr();
                            if (a.open(t.type, t.url, t.async, t.username, t.password),
                                t.xhrFields)
                                for (s in t.xhrFields)
                                    a[s] = t.xhrFields[s];
                            t.mimeType && a.overrideMimeType && a.overrideMimeType(t.mimeType),
                                t.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                            for (s in i)
                                a.setRequestHeader(s, i[s]);
                            n = function (e) {
                                return function () {
                                    n && (n = r = a.onload = a.onerror = a.onabort = a.onreadystatechange = null,
                                        "abort" === e ? a.abort() : "error" === e ? "number" != typeof a.status ? o(0, "error") : o(a.status, a.statusText) : o(Dt[a.status] || a.status, a.statusText, "text" !== (a.responseType || "text") || "string" != typeof a.responseText ? {
                                            binary: a.response
                                        } : {
                                                text: a.responseText
                                            }, a.getAllResponseHeaders()))
                                }
                            }
                                ,
                                a.onload = n(),
                                r = a.onerror = n("error"),
                                void 0 !== a.onabort ? a.onabort = r : a.onreadystatechange = function () {
                                    4 === a.readyState && e.setTimeout(function () {
                                        n && r()
                                    })
                                }
                                ,
                                n = n("abort");
                            try {
                                a.send(t.hasContent && t.data || null)
                            } catch (e) {
                                if (n)
                                    throw e
                            }
                        },
                        abort: function () {
                            n && n()
                        }
                    }
            }),
            oe.ajaxSetup({
                accepts: {
                    script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                },
                contents: {
                    script: /\b(?:java|ecma)script\b/
                },
                converters: {
                    "text script": function (e) {
                        return oe.globalEval(e),
                            e
                    }
                }
            }),
            oe.ajaxPrefilter("script", function (e) {
                void 0 === e.cache && (e.cache = !1),
                    e.crossDomain && (e.type = "GET")
            }),
            oe.ajaxTransport("script", function (e) {
                if (e.crossDomain) {
                    var t, n;
                    return {
                        send: function (r, i) {
                            t = oe("<script>").prop({
                                charset: e.scriptCharset,
                                src: e.url
                            }).on("load error", n = function (e) {
                                t.remove(),
                                    n = null,
                                    e && i("error" === e.type ? 404 : 200, e.type)
                            }
                            ),
                                K.head.appendChild(t[0])
                        },
                        abort: function () {
                            n && n()
                        }
                    }
                }
            });
        var Nt = []
            , Ft = /(=)\?(?=&|$)|\?\?/;
        oe.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function () {
                var e = Nt.pop() || oe.expando + "_" + yt++;
                return this[e] = !0,
                    e
            }
        }),
            oe.ajaxPrefilter("json jsonp", function (t, n, r) {
                var i, o, s, a = t.jsonp !== !1 && (Ft.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && Ft.test(t.data) && "data");
                if (a || "jsonp" === t.dataTypes[0])
                    return i = t.jsonpCallback = oe.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
                        a ? t[a] = t[a].replace(Ft, "$1" + i) : t.jsonp !== !1 && (t.url += (vt.test(t.url) ? "&" : "?") + t.jsonp + "=" + i),
                        t.converters["script json"] = function () {
                            return s || oe.error(i + " was not called"),
                                s[0]
                        }
                        ,
                        t.dataTypes[0] = "json",
                        o = e[i],
                        e[i] = function () {
                            s = arguments
                        }
                        ,
                        r.always(function () {
                            void 0 === o ? oe(e).removeProp(i) : e[i] = o,
                                t[i] && (t.jsonpCallback = n.jsonpCallback,
                                    Nt.push(i)),
                                s && oe.isFunction(o) && o(s[0]),
                                s = o = void 0
                        }),
                        "script"
            }),
            oe.parseHTML = function (e, t, n) {
                if (!e || "string" != typeof e)
                    return null;
                "boolean" == typeof t && (n = t,
                    t = !1),
                    t = t || K;
                var r = fe.exec(e)
                    , i = !n && [];
                return r ? [t.createElement(r[1])] : (r = p([e], t, i),
                    i && i.length && oe(i).remove(),
                    oe.merge([], r.childNodes))
            }
            ;
        var Rt = oe.fn.load;
        oe.fn.load = function (e, t, n) {
            if ("string" != typeof e && Rt)
                return Rt.apply(this, arguments);
            var r, i, o, s = this, a = e.indexOf(" ");
            return a > -1 && (r = oe.trim(e.slice(a)),
                e = e.slice(0, a)),
                oe.isFunction(t) ? (n = t,
                    t = void 0) : t && "object" == typeof t && (i = "POST"),
                s.length > 0 && oe.ajax({
                    url: e,
                    type: i || "GET",
                    dataType: "html",
                    data: t
                }).done(function (e) {
                    o = arguments,
                        s.html(r ? oe("<div>").append(oe.parseHTML(e)).find(r) : e)
                }).always(n && function (e, t) {
                    s.each(function () {
                        n.apply(this, o || [e.responseText, t, e])
                    })
                }
                ),
                this
        }
            ,
            oe.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) {
                oe.fn[t] = function (e) {
                    return this.on(t, e)
                }
            }),
            oe.expr.filters.animated = function (e) {
                return oe.grep(oe.timers, function (t) {
                    return e === t.elem
                }).length
            }
            ,
            oe.offset = {
                setOffset: function (e, t, n) {
                    var r, i, o, s, a, c, l, u = oe.css(e, "position"), d = oe(e), p = {};
                    "static" === u && (e.style.position = "relative"),
                        a = d.offset(),
                        o = oe.css(e, "top"),
                        c = oe.css(e, "left"),
                        l = ("absolute" === u || "fixed" === u) && (o + c).indexOf("auto") > -1,
                        l ? (r = d.position(),
                            s = r.top,
                            i = r.left) : (s = parseFloat(o) || 0,
                                i = parseFloat(c) || 0),
                        oe.isFunction(t) && (t = t.call(e, n, oe.extend({}, a))),
                        null != t.top && (p.top = t.top - a.top + s),
                        null != t.left && (p.left = t.left - a.left + i),
                        "using" in t ? t.using.call(e, p) : d.css(p)
                }
            },
            oe.fn.extend({
                offset: function (e) {
                    if (arguments.length)
                        return void 0 === e ? this : this.each(function (t) {
                            oe.offset.setOffset(this, e, t)
                        });
                    var t, n, r = this[0], i = {
                        top: 0,
                        left: 0
                    }, o = r && r.ownerDocument;
                    if (o)
                        return t = o.documentElement,
                            oe.contains(t, r) ? (i = r.getBoundingClientRect(),
                                n = Y(o),
                                {
                                    top: i.top + n.pageYOffset - t.clientTop,
                                    left: i.left + n.pageXOffset - t.clientLeft
                                }) : i
                },
                position: function () {
                    if (this[0]) {
                        var e, t, n = this[0], r = {
                            top: 0,
                            left: 0
                        };
                        return "fixed" === oe.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(),
                            t = this.offset(),
                            oe.nodeName(e[0], "html") || (r = e.offset()),
                            r.top += oe.css(e[0], "borderTopWidth", !0),
                            r.left += oe.css(e[0], "borderLeftWidth", !0)),
                            {
                                top: t.top - r.top - oe.css(n, "marginTop", !0),
                                left: t.left - r.left - oe.css(n, "marginLeft", !0)
                            }
                    }
                },
                offsetParent: function () {
                    return this.map(function () {
                        for (var e = this.offsetParent; e && "static" === oe.css(e, "position");)
                            e = e.offsetParent;
                        return e || Ze
                    })
                }
            }),
            oe.each({
                scrollLeft: "pageXOffset",
                scrollTop: "pageYOffset"
            }, function (e, t) {
                var n = "pageYOffset" === t;
                oe.fn[e] = function (r) {
                    return _e(this, function (e, r, i) {
                        var o = Y(e);
                        return void 0 === i ? o ? o[t] : e[r] : void (o ? o.scrollTo(n ? o.pageXOffset : i, n ? i : o.pageYOffset) : e[r] = i)
                    }, e, r, arguments.length)
                }
            }),
            oe.each(["top", "left"], function (e, t) {
                oe.cssHooks[t] = C(re.pixelPosition, function (e, n) {
                    if (n)
                        return n = M(e, t),
                            Ke.test(n) ? oe(e).position()[t] + "px" : n
                })
            }),
            oe.each({
                Height: "height",
                Width: "width"
            }, function (e, t) {
                oe.each({
                    padding: "inner" + e,
                    content: t,
                    "": "outer" + e
                }, function (n, r) {
                    oe.fn[r] = function (r, i) {
                        var o = arguments.length && (n || "boolean" != typeof r)
                            , s = n || (r === !0 || i === !0 ? "margin" : "border");
                        return _e(this, function (t, n, r) {
                            var i;
                            return oe.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement,
                                Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === r ? oe.css(t, n, s) : oe.style(t, n, r, s)
                        }, t, o ? r : void 0, o, null)
                    }
                })
            }),
            oe.fn.extend({
                bind: function (e, t, n) {
                    return this.on(e, null, t, n)
                },
                unbind: function (e, t) {
                    return this.off(e, null, t)
                },
                delegate: function (e, t, n, r) {
                    return this.on(t, e, n, r)
                },
                undelegate: function (e, t, n) {
                    return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
                },
                size: function () {
                    return this.length
                }
            }),
            oe.fn.andSelf = oe.fn.addBack,
            "function" == typeof define && define.amd && define("jquery", [], function () {
                return oe
            });
        var jt = e.jQuery
            , Bt = e.$;
        return oe.noConflict = function (t) {
            return e.$ === oe && (e.$ = Bt),
                t && e.jQuery === oe && (e.jQuery = jt),
                oe
        }
            ,
            t || (e.jQuery = e.$ = oe),
            oe
    }),
    define("keys", ["require"], function (e) {
        var t = function () {
            var e = {
                8: this.BACKSPACE = "Backspace",
                9: this.TAB = "Tab",
                13: this.ENTER = "Enter",
                16: this.SHIFT = "Shift",
                17: this.CONTROL = "Control",
                18: this.ALT = "Alt",
                20: this.CAPSLOCK = "CapsLock",
                27: this.ESCAPE = "Esc",
                32: this.SPACEBAR = "Space",
                33: this.PAGEUP = "PageUp",
                34: this.PAGEDOWN = "PageDown",
                35: this.END = "End",
                36: this.HOME = "Home",
                37: this.LEFT = "Left",
                38: this.UP = "Up",
                39: this.RIGHT = "Right",
                40: this.DOWN = "Down",
                46: this.DELETE = "Del"
            }
                , t = {
                    UIKeyInputUpArrow: this.UP,
                    UIKeyInputDownArrow: this.DOWN,
                    UIKeyInputLeftArrow: this.LEFT,
                    UIKeyInputRightArrow: this.RIGHT,
                    UIKeyInputEscape: this.ESCAPE,
                    UIKeyInputPageUp: this.PAGEUP,
                    UIKeyInputPageDown: this.PAGEDOWN
                };
            this.isUndo = function (e) {
                return !e.altKey && (e.ctrlKey || e.metaKey) && 90 == e.which && !e.shiftKey
            }
                ,
                this.isRedo = function (e) {
                    return !e.altKey && (e.ctrlKey || e.metaKey) && (89 == e.which || 90 == e.which && e.shiftKey)
                }
                ,
                this.isSelectAll = function (e) {
                    return !e.altKey && (e.ctrlKey || e.metaKey) && 65 == e.which
                }
                ,
                this.isBacktick = function (e) {
                    return !(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || 192 != e.which)
                }
                ,
                this.lookup = function (n) {
                    return e[n.which] || t[n.key]
                }
                ,
                this.lookupChar = function (e) {
                    return String.fromCharCode(e.which)
                }
        };
        return new t
    }),
    define("touchtracking", ["require", "jquery", "ipad.ghostevents", "keys"], function (e) {
        var t = e("jquery")
            , n = e("ipad.ghostevents")
            , r = e("keys");
        void 0 == window._touchtracking_id_counter && (window._touchtracking_id_counter = 0),
            window._touchtracking_id_counter += 1;
        var i = "touchtracking_id_" + window._touchtracking_id_counter
            , o = function (e) {
                t(e).addClass("dcg-tap-container"),
                    t(e).addClass(i)
            }
            , s = function (e) {
                t(e).addClass("dcg-no-touchtracking")
            };
        n.evtInScope = function (e) {
            return k(e.target)
        }
            ,
            n.isGhostEvent = function (e) {
                return !window.PointerEvent && (!(p !== c && p !== d && !I()) && (e.target !== v && ((!e.target || !t.contains(e.target, v)) && (!v || !t.contains(v, e.target)))))
            }
            ;
        var a = 0
            , c = 1
            , l = 2
            , u = 3
            , d = 4
            , p = a
            , h = {}
            , f = {}
            , m = []
            , g = 0
            , y = null
            , v = null
            , b = null
            , x = []
            , w = function (e) {
                for (var t = []; e;)
                    t.push(e),
                        e = e.parentNode;
                return t
            }
            , E = function (e) {
                for (var n = [], r = 0; r < e.length; r++) {
                    var o = e[r];
                    if (n.push(o),
                        t(o).is(".dcg-tap-container, .dcg-no-touchtracking"))
                        return t(o).is(".dcg-tap-container." + i) ? n : []
                }
                return []
            }
            , _ = function (e, n) {
                v = null,
                    p = e,
                    m = w(p === c ? n.originalEvent.touches[0].target : n.target),
                    t(E(m)).addClass("dcg-depressed").each(function () {
                        var e = t(this);
                        M(e) && e.addClass("dcg-focus-by-tap")
                    }),
                    t(m).each(function () {
                        var e = t(this);
                        e.data({
                            originalScrollTop: e.scrollTop(),
                            originalScrollLeft: e.scrollLeft()
                        })
                    }),
                    f = {}
            }
            , S = function (e) {
                return e.is("input, textarea, select") || e.hasClass("dcg-mathquill-input-span")
            }
            , k = function (e) {
                return !!t(e).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container." + i)
            }
            , M = function (e) {
                return p !== u && !S(e) && k(e)
            }
            , C = function (e) {
                v = null,
                    t(".dcg-depressed").removeClass("dcg-depressed");
                var n = t(document.activeElement);
                if (M(n) && n.blur(),
                    t(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),
                    t(m).each(function () {
                        var e = t(this)
                            , n = e.data("originalScrollTop") - e.scrollTop()
                            , r = e.data("originalScrollLeft") - e.scrollLeft();
                        (n || r) && (f.scroll = !0)
                    }),
                    1 === f["dcg-tapstart"] && 1 === f["dcg-tapend"] && !f["dcg-tapcancel"] && !f.scroll) {
                    var r = "mouse" === e.device ? e.clientX : e.originalEvent.changedTouches[0].clientX
                        , i = "mouse" === e.device ? e.clientY : e.originalEvent.changedTouches[0].clientY;
                    if (e && !e.device && 0 === r && 0 === i) {
                        var o = e.target.getBoundingClientRect();
                        r = (o.left + o.right) / 2,
                            i = (o.top + o.bottom) / 2,
                            e.device = "keyboard"
                    }
                    for (var s = !1, l = 0; l < m.length && !s; l++) {
                        var u, h = t(m[l]);
                        if ("function" == typeof h[0].getBoundingClientRect && (u = h[0].getBoundingClientRect()),
                            "true" === h.attr("tapboundary") && (s = !0),
                            u) {
                            if (r < u.left || i < u.top)
                                continue;
                            if (r > u.right)
                                continue;
                            if (i > u.bottom)
                                continue
                        }
                        v = h[0],
                            P("dcg-tap", e, v);
                        break
                    }
                }
                p !== c && p !== d || (y = setTimeout(function () {
                    y = null,
                        g = (new Date).getTime()
                }, 1e3)),
                    m = [],
                    p = a
            }
            , I = function () {
                return y || (new Date).getTime() - g < 500
            }
            , T = function (e) {
                for (var t = [], n = 0; n < e.length; n++) {
                    var r = e[n];
                    t.push({
                        identifier: r.identifier,
                        x: r.pageX,
                        y: r.pageY,
                        screenX: r.screenX,
                        screenY: r.screenY,
                        pageX: r.pageX,
                        pageY: r.pageY,
                        clientX: r.clientX,
                        clientY: r.clientY
                    })
                }
                return t
            }
            , P = function (e, n, r) {
                if ("dcg-tapstart" === e)
                    h[n.identifier] = {
                        type: e,
                        pageX: n.originalEvent.changedTouches[0].pageX,
                        pageY: n.originalEvent.changedTouches[0].pageY
                    };
                else if ("dcg-tapmove" === e) {
                    var i = n.originalEvent.changedTouches[0]
                        , o = h[n.identifier];
                    if (o && i.pageX === o.pageX && i.pageY === o.pageY)
                        return;
                    if ((p === c || p === d) && o && "dcg-tapstart" === o.type && Math.abs(o.pageX - i.pageX) + Math.abs(o.pageY - i.pageY) < 2)
                        return;
                    h[n.identifier] = {
                        type: e,
                        pageX: n.originalEvent.changedTouches[0].pageX,
                        pageY: n.originalEvent.changedTouches[0].pageY
                    }
                }
                void 0 === f[e.toLowerCase()] ? f[e.toLowerCase()] = 1 : f[e.toLowerCase()]++;
                var s = t.event.fix(n.originalEvent);
                s.type = e,
                    s.device = p === c || p === d ? "touch" : p === u ? "keyboard" : "mouse",
                    s.touches = T(n.originalEvent.touches),
                    s.changedTouches = T(n.originalEvent.changedTouches),
                    s.target = r ? r : n.target;
                var a = f["dcg-longhold"] > 0;
                s.wasLongheld = function () {
                    return a
                }
                    ,
                    s.preventTap = function () {
                        f["dcg-tapcancel"] = 1
                    }
                    ,
                    clearTimeout(b),
                    "dcg-tapstart" === s.type && 1 === s.touches.length && (b = setTimeout(function () {
                        P("dcg-longhold", n, r)
                    }, 500)),
                    t(s.target).trigger(s)
            }
            , A = function (e) {
                var n = m
                    , r = !!m.length
                    , o = t(".dcg-tap-container." + i + " .dcg-hovered")
                    , s = t.makeArray(o.filter(function () {
                        return k(this)
                    }))
                    , a = []
                    , c = []
                    , l = [];
                E(w(e)).forEach(function (e) {
                    r && n.indexOf(e) === -1 || (s.indexOf(e) === -1 && l.push(e),
                        a.push(e))
                });
                for (var u = 0; u < s.length; u++)
                    e = s[u],
                        a.indexOf(e) === -1 && c.push(e);
                t(c).removeClass("dcg-hovered").trigger("tipsyhide"),
                    t(l).addClass("dcg-hovered").trigger("tipsyshow")
            }
            , L = function (e) {
                for (var t = 0; t < x.length; t++)
                    if (x[t].pointerId === e)
                        return !0;
                return !1
            }
            , O = function (e) {
                for (var t = 0; t < x.length; t++)
                    if (x[t].pointerId === e)
                        return x.splice(t, 1)[0]
            }
            , D = function (e) {
                p === a && _(d, e),
                    A(null),
                    x.push(e.originalEvent),
                    e.originalEvent.identifier = e.originalEvent.pointerId,
                    e.originalEvent.touches = x,
                    e.originalEvent.changedTouches = [e.originalEvent],
                    P("dcg-tapstart", e)
            }
            , q = function (e) {
                O(e.originalEvent.pointerId),
                    e.originalEvent.identifier = e.originalEvent.pointerId,
                    e.originalEvent.touches = x,
                    e.originalEvent.changedTouches = [e.originalEvent],
                    P("dcg-tapcancel", e),
                    0 === x.length && C(e)
            }
            , N = function (e) {
                O(e.originalEvent.pointerId),
                    e.originalEvent.identifier = e.originalEvent.pointerId,
                    e.originalEvent.touches = x,
                    e.originalEvent.changedTouches = [e.originalEvent],
                    P("dcg-tapend", e),
                    0 === x.length && C(e)
            }
            , F = function (e) {
                return "touch" === e.originalEvent.pointerType || 2 === e.originalEvent.pointerType
            };
        return t(document).on("pointerdown MSPointerDown", function (e) {
            p !== l && p !== c && F(e) && (L(e.originalEvent.pointerId) || D(e))
        }),
            t(document).on("pointermove MSPointerMove", function (e) {
                p !== l && p !== c && F(e) && (L(e.originalEvent.pointerId) || D(e),
                    O(e.originalEvent.pointerId),
                    x.push(e.originalEvent),
                    e.originalEvent.identifier = e.originalEvent.pointerId,
                    e.originalEvent.touches = x,
                    e.originalEvent.changedTouches = [e.originalEvent],
                    P("dcg-tapmove", e))
            }),
            t(document).on("pointercancel MSPointerCancel", function (e) {
                if (p === d && F(e) && L(e.originalEvent.pointerId)) {
                    q(e);
                    for (var n; n = x.pop();) {
                        var e = t.Event(n, {
                            originalEvent: n
                        });
                        q(e)
                    }
                }
            }),
            t(document).on("pointerup MSPointerUp", function (e) {
                if (p === d && F(e) && L(e.originalEvent.pointerId)) {
                    N(e);
                    for (var n; n = x.pop();) {
                        var e = t.Event(n, {
                            originalEvent: n
                        });
                        N(e)
                    }
                }
            }),
            t(document).on("touchstart", function (e) {
                p !== l && p !== d && (p === a && _(c, e),
                    A(null),
                    P("dcg-tapstart", e))
            }),
            t(document).on("touchmove", function (e) {
                p === c && P("dcg-tapmove", e)
            }),
            t(document).on("touchcancel", function (e) {
                p === c && (P("dcg-tapcancel", e),
                    0 === e.originalEvent.touches.length && C(e))
            }),
            t(document).on("touchend", function (e) {
                p === c && (P("dcg-tapend", e),
                    0 === e.originalEvent.touches.length && C(e))
            }),
            t(document).on("mousedown", function (e) {
                if (1 !== e.button && 2 !== e.button) {
                    if (p === c || p === d || I())
                        return void (!t(e.target).is("input, textarea, select") && k(e.target) && e.preventDefault());
                    _(l, e),
                        e.originalEvent.touches = [e],
                        e.originalEvent.changedTouches = [e],
                        P("dcg-tapstart", e)
                }
            }),
            t(document).ready(function () {
                t(document).on("mousedown", function (e) {
                    var n = !!t(e.target).closest(".dcg-do-not-blur").length
                        , r = !!t(e.target).closest(".dcg-do-blur").length;
                    if (n && !r && k(e.target)) {
                        e.preventDefault();
                        try {
                            var i = window.getSelection();
                            if (1 === i.rangeCount) {
                                var o = i.getRangeAt(0);
                                o.startContainer === o.endContainer && t(o.startContainer).closest(".dcg-text-selectable").length && i.removeAllRanges()
                            }
                        } catch (e) { }
                    }
                })
            }),
            t(document).on("mouseleave", function (e) {
                p === a && (I() || A(null))
            }),
            t(document).on("mousemove", function (e) {
                1 !== e.button && 2 !== e.button && p !== c && p !== d && (I() || (A(e.target),
                    e.originalEvent.touches = [e],
                    e.originalEvent.changedTouches = [e],
                    P("dcg-tapmove", e)))
            }),
            t(document).on("mouseup", function (e) {
                1 !== e.button && 2 !== e.button && p === l && (e.originalEvent.touches = [],
                    e.originalEvent.changedTouches = [e],
                    P("dcg-tapend", e),
                    C(e))
            }),
            t(document).on("keydown", function (e) {
                if ((r.lookup(e) === r.ENTER || r.lookup(e) === r.SPACEBAR) && k(e.target)) {
                    if (p !== u) {
                        if (t(e.target).is("a:not([ontap]), button, input, textarea, select, contenteditable"))
                            return;
                        e.preventDefault()
                    }
                    _(u, e),
                        e.originalEvent.touches = [e],
                        e.originalEvent.changedTouches = [e],
                        P("dcg-tapstart", e)
                }
            }),
            t(document).on("keyup", function (e) {
                r.lookup(e) !== r.ENTER && r.lookup(e) !== r.SPACEBAR || !k(e.target) || p === u && (e.originalEvent.touches = [],
                    e.originalEvent.changedTouches = [e],
                    P("dcg-tapend", e),
                    C(e))
            }),
            {
                monitor: o,
                ignore: s,
                isTapActive: function () {
                    return p !== a
                },
                elIsFocusable: S
            }
    }),
    define("browser", ["require", "jquery"], function (e) {
        var t = e("jquery")
            , n = {
                IS_IE8: null !== navigator.userAgent.match(/MSIE 8.0/i),
                IS_IE9: null !== navigator.userAgent.match(/MSIE 9.0/i),
                IS_IE: null !== navigator.userAgent.match(/MSIE/i),
                IS_EDGE: null !== navigator.userAgent.match(/Edge/i),
                IS_IPAD: null !== navigator.userAgent.match(/iPad/i),
                IS_MOBILE: null !== navigator.userAgent.match(/Mobile|Android/i),
                IS_ANDROID: null !== navigator.userAgent.match(/Android/i),
                IS_IOS: null !== navigator.userAgent.match(/(iPad|iPhone|iPod)/i),
                IS_CHROME: null !== navigator.userAgent.match(/Chrome/i),
                IS_FIREFOX: null !== navigator.userAgent.match(/Firefox/i),
                IS_SAFARI: null !== navigator.userAgent.match(/^((?!chrome|android).)*safari/i),
                IS_APPLE: null !== navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),
                IS_WINDOWS: null !== navigator.platform.match(/(Win32)/i),
                IS_TOUCH: null !== navigator.userAgent.match(/Touch/i),
                IS_KINDLE: null !== navigator.userAgent.match(/Kindle/i) || null !== navigator.userAgent.match(/Silk/i),
                IS_BRAILLENOTE: null !== navigator.userAgent.match(/KeyWeb/i),
                IS_IN_IFRAME: window.parent !== window
            };
        return n.IS_TABLET = n.IS_IPAD || n.IS_ANDROID || n.IS_KINDLE,
            n.IS_TOUCH_DEVICE = n.SHOULD_NOT_AUTOFOCUS = n.IS_IOS || n.IS_ANDROID || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i),
            n.IOS_VERSION = function () {
                var e = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
                return e ? [parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3] || 0, 10)] : null
            }(),
            n.SUPPORTS_TRANSLATE3D = !1,
            t(document).ready(function () {
                var e, t, r = document.createElement("p"), i = {
                    webkitTransform: "-webkit-transform",
                    OTransform: "-o-transform",
                    msTransform: "-ms-transform",
                    MozTransform: "-moz-transform",
                    transform: "transform"
                };
                document.body.insertBefore(r, null);
                for (var o in i)
                    if (void 0 !== r.style[o]) {
                        if (r.style[o] = "translate3d(1px,1px,1px)",
                            t = window.getComputedStyle(r),
                            !t)
                            return;
                        e = t.getPropertyValue(i[o])
                    }
                document.body.removeChild(r),
                    n.SUPPORTS_TRANSLATE3D = void 0 !== e && e.length > 0 && "none" !== e
            }),
            n.translateRule = function (e, t) {
                return n.SUPPORTS_TRANSLATE3D ? "translate3d(" + e + (e ? "px" : "") + "," + t + (t ? "px" : "") + ",0)" : "translate(" + e + (e ? "px" : "") + "," + t + (t ? "px" : "") + ")"
            }
            ,
            n.SUPPORTS_CANVAS = function () {
                var e = document.createElement("canvas")
                    , t = !(!e.getContext || !e.getContext("2d"));
                return t
            }(),
            n
    }),
    define("main/load_data", ["require", "jquery"], function (e) {
        var t = e("jquery")
            , n = t("body").data("load-data");
        return n
    }),
    define("lib/deepCopy", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            var t = e;
            if (t && "function" == typeof t.toJSON && (t = t.toJSON()),
                !t)
                return t;
            if ("object" != typeof t)
                return t;
            if (Array.isArray(t))
                return t.map(n);
            var r = {};
            for (var i in t)
                t.hasOwnProperty(i) && (r[i] = n(t[i]));
            return r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = n
    }),
    define("config", ["require", "./lib/deepCopy"], function (e) {
        var t = e("./lib/deepCopy").default
            , n = {}
            , r = location.search;
        "?" === r[0] && (r = r.slice(1));
        for (var i = r.split("&"), o = {}, s = 0; s < i.length; s++) {
            var a = i[s].split("=");
            o[a[0]] = 2 !== a.length || a[1]
        }
        if (window.Desmos && window.Desmos.config)
            for (var c in window.Desmos.config)
                window.Desmos.config.hasOwnProperty(c) && (o[c] = window.Desmos.config[c]);
        var l = function (e) {
            return o.hasOwnProperty(e)
        }
            , u = function (e) {
                n[e] = l(e)
            }
            , d = function (e) {
                n[e] = !l("no" + e)
            };
        u("testing"),
            u("maintenance"),
            u("disableScrollFix"),
            u("nativeOnscreenKeypad"),
            u("hidden"),
            u("disableMouseInteractions"),
            u("outofdom"),
            o.lang && (n.lang = o.lang),
            n.no_navigation_warning = l("noconcat") || l("testing"),
            n.previewMessage = "You're previewing some new accessibility features.",
            n.previewFeedbackUrl = "mailto:feedback@desmos.com";
        var p = location && "preview.desmos.com" === location.hostname;
        return n.previewMode = l("previewMode") || p,
            u("lockViewport"),
            u("administerSecretFolders"),
            u("degreeMode"),
            u("plaidMode"),
            u("editOnWeb"),
            u("crossOriginSaveTest"),
            d("links"),
            d("trace"),
            u("expressionsCollapsed"),
            u("invertedColors"),
            u("lightKeypad"),
            d("images"),
            d("folders"),
            d("settingsMenu"),
            d("expressionsTopbar"),
            d("zoomButtons"),
            d("keypad"),
            d("graphpaper"),
            d("expressions"),
            d("expressionsTopbar"),
            d("settingsMenu"),
            d("branding"),
            d("pointsOfInterest"),
            d("plotSingleVariableImplicitEquations"),
            d("notes"),
            u("sciKeypad"),
            u("4fnKeypad"),
            u("ans"),
            l("braille") && (n.braille = !0),
            d("qwertyKeyboard"),
            u("restrictedFunctions"),
            d("functionDefinition"),
            u("singleExpression"),
            u("restrictedEditing"),
            d("labels"),
            u("bare-i18n"),
            u("distributions"),
            o.additionalFunctions && (n.additionalFunctions = o.additionalFunctions.split(",")),
            {
                get: function (e) {
                    return n[e]
                },
                all: function () {
                    return t(n)
                }
            }
    }),
    define("text", {
        load: function (e) {
            throw new Error("Dynamic load not allowed: " + e)
        }
    }),
    function () {
        function e(e) {
            function t(t, n, r, i, o, s) {
                for (; o >= 0 && o < s; o += e) {
                    var a = i ? i[o] : o;
                    r = n(r, t[a], a, t)
                }
                return r
            }
            return function (n, r, i, o) {
                r = b(r, o, 4);
                var s = !M(n) && v.keys(n)
                    , a = (s || n).length
                    , c = e > 0 ? 0 : a - 1;
                return arguments.length < 3 && (i = n[s ? s[c] : c],
                    c += e),
                    t(n, r, i, s, c, a)
            }
        }
        function t(e) {
            return function (t, n, r) {
                n = x(n, r);
                for (var i = k(t), o = e > 0 ? 0 : i - 1; o >= 0 && o < i; o += e)
                    if (n(t[o], o, t))
                        return o;
                return -1
            }
        }
        function n(e, t, n) {
            return function (r, i, o) {
                var s = 0
                    , a = k(r);
                if ("number" == typeof o)
                    e > 0 ? s = o >= 0 ? o : Math.max(o + a, s) : a = o >= 0 ? Math.min(o + 1, a) : o + a + 1;
                else if (n && o && a)
                    return o = n(r, i),
                        r[o] === i ? o : -1;
                if (i !== i)
                    return o = t(u.call(r, s, a), v.isNaN),
                        o >= 0 ? o + s : -1;
                for (o = e > 0 ? s : a - 1; o >= 0 && o < a; o += e)
                    if (r[o] === i)
                        return o;
                return -1
            }
        }
        function r(e, t) {
            var n = A.length
                , r = e.constructor
                , i = v.isFunction(r) && r.prototype || a
                , o = "constructor";
            for (v.has(e, o) && !v.contains(t, o) && t.push(o); n--;)
                o = A[n],
                    o in e && e[o] !== i[o] && !v.contains(t, o) && t.push(o)
        }
        var i = this
            , o = i._
            , s = Array.prototype
            , a = Object.prototype
            , c = Function.prototype
            , l = s.push
            , u = s.slice
            , d = a.toString
            , p = a.hasOwnProperty
            , h = Array.isArray
            , f = Object.keys
            , m = c.bind
            , g = Object.create
            , y = function () { }
            , v = function (e) {
                return e instanceof v ? e : this instanceof v ? void (this._wrapped = e) : new v(e)
            };
        "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = v),
            exports._ = v) : i._ = v,
            v.VERSION = "1.8.3";
        var b = function (e, t, n) {
            if (void 0 === t)
                return e;
            switch (null == n ? 3 : n) {
                case 1:
                    return function (n) {
                        return e.call(t, n)
                    }
                        ;
                case 2:
                    return function (n, r) {
                        return e.call(t, n, r)
                    }
                        ;
                case 3:
                    return function (n, r, i) {
                        return e.call(t, n, r, i)
                    }
                        ;
                case 4:
                    return function (n, r, i, o) {
                        return e.call(t, n, r, i, o)
                    }
            }
            return function () {
                return e.apply(t, arguments)
            }
        }
            , x = function (e, t, n) {
                return null == e ? v.identity : v.isFunction(e) ? b(e, t, n) : v.isObject(e) ? v.matcher(e) : v.property(e)
            };
        v.iteratee = function (e, t) {
            return x(e, t, 1 / 0)
        }
            ;
        var w = function (e, t) {
            return function (n) {
                var r = arguments.length;
                if (r < 2 || null == n)
                    return n;
                for (var i = 1; i < r; i++)
                    for (var o = arguments[i], s = e(o), a = s.length, c = 0; c < a; c++) {
                        var l = s[c];
                        t && void 0 !== n[l] || (n[l] = o[l])
                    }
                return n
            }
        }
            , E = function (e) {
                if (!v.isObject(e))
                    return {};
                if (g)
                    return g(e);
                y.prototype = e;
                var t = new y;
                return y.prototype = null,
                    t
            }
            , _ = function (e) {
                return function (t) {
                    return null == t ? void 0 : t[e]
                }
            }
            , S = Math.pow(2, 53) - 1
            , k = _("length")
            , M = function (e) {
                var t = k(e);
                return "number" == typeof t && t >= 0 && t <= S
            };
        v.each = v.forEach = function (e, t, n) {
            t = b(t, n);
            var r, i;
            if (M(e))
                for (r = 0,
                    i = e.length; r < i; r++)
                    t(e[r], r, e);
            else {
                var o = v.keys(e);
                for (r = 0,
                    i = o.length; r < i; r++)
                    t(e[o[r]], o[r], e)
            }
            return e
        }
            ,
            v.map = v.collect = function (e, t, n) {
                t = x(t, n);
                for (var r = !M(e) && v.keys(e), i = (r || e).length, o = Array(i), s = 0; s < i; s++) {
                    var a = r ? r[s] : s;
                    o[s] = t(e[a], a, e)
                }
                return o
            }
            ,
            v.reduce = v.foldl = v.inject = e(1),
            v.reduceRight = v.foldr = e(-1),
            v.find = v.detect = function (e, t, n) {
                var r;
                if (r = M(e) ? v.findIndex(e, t, n) : v.findKey(e, t, n),
                    void 0 !== r && r !== -1)
                    return e[r]
            }
            ,
            v.filter = v.select = function (e, t, n) {
                var r = [];
                return t = x(t, n),
                    v.each(e, function (e, n, i) {
                        t(e, n, i) && r.push(e)
                    }),
                    r
            }
            ,
            v.reject = function (e, t, n) {
                return v.filter(e, v.negate(x(t)), n)
            }
            ,
            v.every = v.all = function (e, t, n) {
                t = x(t, n);
                for (var r = !M(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) {
                    var s = r ? r[o] : o;
                    if (!t(e[s], s, e))
                        return !1
                }
                return !0
            }
            ,
            v.some = v.any = function (e, t, n) {
                t = x(t, n);
                for (var r = !M(e) && v.keys(e), i = (r || e).length, o = 0; o < i; o++) {
                    var s = r ? r[o] : o;
                    if (t(e[s], s, e))
                        return !0
                }
                return !1
            }
            ,
            v.contains = v.includes = v.include = function (e, t, n, r) {
                return M(e) || (e = v.values(e)),
                    ("number" != typeof n || r) && (n = 0),
                    v.indexOf(e, t, n) >= 0
            }
            ,
            v.invoke = function (e, t) {
                var n = u.call(arguments, 2)
                    , r = v.isFunction(t);
                return v.map(e, function (e) {
                    var i = r ? t : e[t];
                    return null == i ? i : i.apply(e, n)
                })
            }
            ,
            v.pluck = function (e, t) {
                return v.map(e, v.property(t))
            }
            ,
            v.where = function (e, t) {
                return v.filter(e, v.matcher(t))
            }
            ,
            v.findWhere = function (e, t) {
                return v.find(e, v.matcher(t))
            }
            ,
            v.max = function (e, t, n) {
                var r, i, o = -(1 / 0), s = -(1 / 0);
                if (null == t && null != e) {
                    e = M(e) ? e : v.values(e);
                    for (var a = 0, c = e.length; a < c; a++)
                        r = e[a],
                            r > o && (o = r)
                } else
                    t = x(t, n),
                        v.each(e, function (e, n, r) {
                            i = t(e, n, r),
                                (i > s || i === -(1 / 0) && o === -(1 / 0)) && (o = e,
                                    s = i)
                        });
                return o
            }
            ,
            v.min = function (e, t, n) {
                var r, i, o = 1 / 0, s = 1 / 0;
                if (null == t && null != e) {
                    e = M(e) ? e : v.values(e);
                    for (var a = 0, c = e.length; a < c; a++)
                        r = e[a],
                            r < o && (o = r)
                } else
                    t = x(t, n),
                        v.each(e, function (e, n, r) {
                            i = t(e, n, r),
                                (i < s || i === 1 / 0 && o === 1 / 0) && (o = e,
                                    s = i)
                        });
                return o
            }
            ,
            v.shuffle = function (e) {
                for (var t, n = M(e) ? e : v.values(e), r = n.length, i = Array(r), o = 0; o < r; o++)
                    t = v.random(0, o),
                        t !== o && (i[o] = i[t]),
                        i[t] = n[o];
                return i
            }
            ,
            v.sample = function (e, t, n) {
                return null == t || n ? (M(e) || (e = v.values(e)),
                    e[v.random(e.length - 1)]) : v.shuffle(e).slice(0, Math.max(0, t))
            }
            ,
            v.sortBy = function (e, t, n) {
                return t = x(t, n),
                    v.pluck(v.map(e, function (e, n, r) {
                        return {
                            value: e,
                            index: n,
                            criteria: t(e, n, r)
                        }
                    }).sort(function (e, t) {
                        var n = e.criteria
                            , r = t.criteria;
                        if (n !== r) {
                            if (n > r || void 0 === n)
                                return 1;
                            if (n < r || void 0 === r)
                                return -1
                        }
                        return e.index - t.index
                    }), "value")
            }
            ;
        var C = function (e) {
            return function (t, n, r) {
                var i = {};
                return n = x(n, r),
                    v.each(t, function (r, o) {
                        var s = n(r, o, t);
                        e(i, r, s)
                    }),
                    i
            }
        };
        v.groupBy = C(function (e, t, n) {
            v.has(e, n) ? e[n].push(t) : e[n] = [t]
        }),
            v.indexBy = C(function (e, t, n) {
                e[n] = t
            }),
            v.countBy = C(function (e, t, n) {
                v.has(e, n) ? e[n]++ : e[n] = 1
            }),
            v.toArray = function (e) {
                return e ? v.isArray(e) ? u.call(e) : M(e) ? v.map(e, v.identity) : v.values(e) : []
            }
            ,
            v.size = function (e) {
                return null == e ? 0 : M(e) ? e.length : v.keys(e).length
            }
            ,
            v.partition = function (e, t, n) {
                t = x(t, n);
                var r = []
                    , i = [];
                return v.each(e, function (e, n, o) {
                    (t(e, n, o) ? r : i).push(e)
                }),
                    [r, i]
            }
            ,
            v.first = v.head = v.take = function (e, t, n) {
                if (null != e)
                    return null == t || n ? e[0] : v.initial(e, e.length - t)
            }
            ,
            v.initial = function (e, t, n) {
                return u.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t)))
            }
            ,
            v.last = function (e, t, n) {
                if (null != e)
                    return null == t || n ? e[e.length - 1] : v.rest(e, Math.max(0, e.length - t))
            }
            ,
            v.rest = v.tail = v.drop = function (e, t, n) {
                return u.call(e, null == t || n ? 1 : t)
            }
            ,
            v.compact = function (e) {
                return v.filter(e, v.identity)
            }
            ;
        var I = function (e, t, n, r) {
            for (var i = [], o = 0, s = r || 0, a = k(e); s < a; s++) {
                var c = e[s];
                if (M(c) && (v.isArray(c) || v.isArguments(c))) {
                    t || (c = I(c, t, n));
                    var l = 0
                        , u = c.length;
                    for (i.length += u; l < u;)
                        i[o++] = c[l++]
                } else
                    n || (i[o++] = c)
            }
            return i
        };
        v.flatten = function (e, t) {
            return I(e, t, !1)
        }
            ,
            v.without = function (e) {
                return v.difference(e, u.call(arguments, 1))
            }
            ,
            v.uniq = v.unique = function (e, t, n, r) {
                v.isBoolean(t) || (r = n,
                    n = t,
                    t = !1),
                    null != n && (n = x(n, r));
                for (var i = [], o = [], s = 0, a = k(e); s < a; s++) {
                    var c = e[s]
                        , l = n ? n(c, s, e) : c;
                    t ? (s && o === l || i.push(c),
                        o = l) : n ? v.contains(o, l) || (o.push(l),
                            i.push(c)) : v.contains(i, c) || i.push(c)
                }
                return i
            }
            ,
            v.union = function () {
                return v.uniq(I(arguments, !0, !0))
            }
            ,
            v.intersection = function (e) {
                for (var t = [], n = arguments.length, r = 0, i = k(e); r < i; r++) {
                    var o = e[r];
                    if (!v.contains(t, o)) {
                        for (var s = 1; s < n && v.contains(arguments[s], o); s++)
                            ;
                        s === n && t.push(o)
                    }
                }
                return t
            }
            ,
            v.difference = function (e) {
                var t = I(arguments, !0, !0, 1);
                return v.filter(e, function (e) {
                    return !v.contains(t, e)
                })
            }
            ,
            v.zip = function () {
                return v.unzip(arguments)
            }
            ,
            v.unzip = function (e) {
                for (var t = e && v.max(e, k).length || 0, n = Array(t), r = 0; r < t; r++)
                    n[r] = v.pluck(e, r);
                return n
            }
            ,
            v.object = function (e, t) {
                for (var n = {}, r = 0, i = k(e); r < i; r++)
                    t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1];
                return n
            }
            ,
            v.findIndex = t(1),
            v.findLastIndex = t(-1),
            v.sortedIndex = function (e, t, n, r) {
                n = x(n, r, 1);
                for (var i = n(t), o = 0, s = k(e); o < s;) {
                    var a = Math.floor((o + s) / 2);
                    n(e[a]) < i ? o = a + 1 : s = a
                }
                return o
            }
            ,
            v.indexOf = n(1, v.findIndex, v.sortedIndex),
            v.lastIndexOf = n(-1, v.findLastIndex),
            v.range = function (e, t, n) {
                null == t && (t = e || 0,
                    e = 0),
                    n = n || 1;
                for (var r = Math.max(Math.ceil((t - e) / n), 0), i = Array(r), o = 0; o < r; o++ ,
                    e += n)
                    i[o] = e;
                return i
            }
            ;
        var T = function (e, t, n, r, i) {
            if (!(r instanceof t))
                return e.apply(n, i);
            var o = E(e.prototype)
                , s = e.apply(o, i);
            return v.isObject(s) ? s : o
        };
        v.bind = function (e, t) {
            if (m && e.bind === m)
                return m.apply(e, u.call(arguments, 1));
            if (!v.isFunction(e))
                throw new TypeError("Bind must be called on a function");
            var n = u.call(arguments, 2)
                , r = function () {
                    return T(e, r, t, this, n.concat(u.call(arguments)))
                };
            return r
        }
            ,
            v.partial = function (e) {
                var t = u.call(arguments, 1)
                    , n = function () {
                        for (var r = 0, i = t.length, o = Array(i), s = 0; s < i; s++)
                            o[s] = t[s] === v ? arguments[r++] : t[s];
                        for (; r < arguments.length;)
                            o.push(arguments[r++]);
                        return T(e, n, this, this, o)
                    };
                return n
            }
            ,
            v.bindAll = function (e) {
                var t, n, r = arguments.length;
                if (r <= 1)
                    throw new Error("bindAll must be passed function names");
                for (t = 1; t < r; t++)
                    n = arguments[t],
                        e[n] = v.bind(e[n], e);
                return e
            }
            ,
            v.memoize = function (e, t) {
                var n = function (r) {
                    var i = n.cache
                        , o = "" + (t ? t.apply(this, arguments) : r);
                    return v.has(i, o) || (i[o] = e.apply(this, arguments)),
                        i[o]
                };
                return n.cache = {},
                    n
            }
            ,
            v.delay = function (e, t) {
                var n = u.call(arguments, 2);
                return setTimeout(function () {
                    return e.apply(null, n)
                }, t)
            }
            ,
            v.defer = v.partial(v.delay, v, 1),
            v.throttle = function (e, t, n) {
                var r, i, o, s = null, a = 0;
                n || (n = {});
                var c = function () {
                    a = n.leading === !1 ? 0 : v.now(),
                        s = null,
                        o = e.apply(r, i),
                        s || (r = i = null)
                };
                return function () {
                    var l = v.now();
                    a || n.leading !== !1 || (a = l);
                    var u = t - (l - a);
                    return r = this,
                        i = arguments,
                        u <= 0 || u > t ? (s && (clearTimeout(s),
                            s = null),
                            a = l,
                            o = e.apply(r, i),
                            s || (r = i = null)) : s || n.trailing === !1 || (s = setTimeout(c, u)),
                        o
                }
            }
            ,
            v.debounce = function (e, t, n) {
                var r, i, o, s, a, c = function () {
                    var l = v.now() - s;
                    l < t && l >= 0 ? r = setTimeout(c, t - l) : (r = null,
                        n || (a = e.apply(o, i),
                            r || (o = i = null)))
                };
                return function () {
                    o = this,
                        i = arguments,
                        s = v.now();
                    var l = n && !r;
                    return r || (r = setTimeout(c, t)),
                        l && (a = e.apply(o, i),
                            o = i = null),
                        a
                }
            }
            ,
            v.wrap = function (e, t) {
                return v.partial(t, e)
            }
            ,
            v.negate = function (e) {
                return function () {
                    return !e.apply(this, arguments)
                }
            }
            ,
            v.compose = function () {
                var e = arguments
                    , t = e.length - 1;
                return function () {
                    for (var n = t, r = e[t].apply(this, arguments); n--;)
                        r = e[n].call(this, r);
                    return r
                }
            }
            ,
            v.after = function (e, t) {
                return function () {
                    if (--e < 1)
                        return t.apply(this, arguments)
                }
            }
            ,
            v.before = function (e, t) {
                var n;
                return function () {
                    return --e > 0 && (n = t.apply(this, arguments)),
                        e <= 1 && (t = null),
                        n
                }
            }
            ,
            v.once = v.partial(v.before, 2);
        var P = !{
            toString: null
        }.propertyIsEnumerable("toString")
            , A = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        v.keys = function (e) {
            if (!v.isObject(e))
                return [];
            if (f)
                return f(e);
            var t = [];
            for (var n in e)
                v.has(e, n) && t.push(n);
            return P && r(e, t),
                t
        }
            ,
            v.allKeys = function (e) {
                if (!v.isObject(e))
                    return [];
                var t = [];
                for (var n in e)
                    t.push(n);
                return P && r(e, t),
                    t
            }
            ,
            v.values = function (e) {
                for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)
                    r[i] = e[t[i]];
                return r
            }
            ,
            v.mapObject = function (e, t, n) {
                t = x(t, n);
                for (var r, i = v.keys(e), o = i.length, s = {}, a = 0; a < o; a++)
                    r = i[a],
                        s[r] = t(e[r], r, e);
                return s
            }
            ,
            v.pairs = function (e) {
                for (var t = v.keys(e), n = t.length, r = Array(n), i = 0; i < n; i++)
                    r[i] = [t[i], e[t[i]]];
                return r
            }
            ,
            v.invert = function (e) {
                for (var t = {}, n = v.keys(e), r = 0, i = n.length; r < i; r++)
                    t[e[n[r]]] = n[r];
                return t
            }
            ,
            v.functions = v.methods = function (e) {
                var t = [];
                for (var n in e)
                    v.isFunction(e[n]) && t.push(n);
                return t.sort()
            }
            ,
            v.extend = w(v.allKeys),
            v.extendOwn = v.assign = w(v.keys),
            v.findKey = function (e, t, n) {
                t = x(t, n);
                for (var r, i = v.keys(e), o = 0, s = i.length; o < s; o++)
                    if (r = i[o],
                        t(e[r], r, e))
                        return r
            }
            ,
            v.pick = function (e, t, n) {
                var r, i, o = {}, s = e;
                if (null == s)
                    return o;
                v.isFunction(t) ? (i = v.allKeys(s),
                    r = b(t, n)) : (i = I(arguments, !1, !1, 1),
                        r = function (e, t, n) {
                            return t in n
                        }
                        ,
                        s = Object(s));
                for (var a = 0, c = i.length; a < c; a++) {
                    var l = i[a]
                        , u = s[l];
                    r(u, l, s) && (o[l] = u)
                }
                return o
            }
            ,
            v.omit = function (e, t, n) {
                if (v.isFunction(t))
                    t = v.negate(t);
                else {
                    var r = v.map(I(arguments, !1, !1, 1), String);
                    t = function (e, t) {
                        return !v.contains(r, t)
                    }
                }
                return v.pick(e, t, n)
            }
            ,
            v.defaults = w(v.allKeys, !0),
            v.create = function (e, t) {
                var n = E(e);
                return t && v.extendOwn(n, t),
                    n
            }
            ,
            v.clone = function (e) {
                return v.isObject(e) ? v.isArray(e) ? e.slice() : v.extend({}, e) : e
            }
            ,
            v.tap = function (e, t) {
                return t(e),
                    e
            }
            ,
            v.isMatch = function (e, t) {
                var n = v.keys(t)
                    , r = n.length;
                if (null == e)
                    return !r;
                for (var i = Object(e), o = 0; o < r; o++) {
                    var s = n[o];
                    if (t[s] !== i[s] || !(s in i))
                        return !1
                }
                return !0
            }
            ;
        var L = function (e, t, n, r) {
            if (e === t)
                return 0 !== e || 1 / e === 1 / t;
            if (null == e || null == t)
                return e === t;
            e instanceof v && (e = e._wrapped),
                t instanceof v && (t = t._wrapped);
            var i = d.call(e);
            if (i !== d.call(t))
                return !1;
            switch (i) {
                case "[object RegExp]":
                case "[object String]":
                    return "" + e == "" + t;
                case "[object Number]":
                    return +e !== +e ? +t !== +t : 0 === +e ? 1 / +e === 1 / t : +e === +t;
                case "[object Date]":
                case "[object Boolean]":
                    return +e === +t
            }
            var o = "[object Array]" === i;
            if (!o) {
                if ("object" != typeof e || "object" != typeof t)
                    return !1;
                var s = e.constructor
                    , a = t.constructor;
                if (s !== a && !(v.isFunction(s) && s instanceof s && v.isFunction(a) && a instanceof a) && "constructor" in e && "constructor" in t)
                    return !1
            }
            n = n || [],
                r = r || [];
            for (var c = n.length; c--;)
                if (n[c] === e)
                    return r[c] === t;
            if (n.push(e),
                r.push(t),
                o) {
                if (c = e.length,
                    c !== t.length)
                    return !1;
                for (; c--;)
                    if (!L(e[c], t[c], n, r))
                        return !1
            } else {
                var l, u = v.keys(e);
                if (c = u.length,
                    v.keys(t).length !== c)
                    return !1;
                for (; c--;)
                    if (l = u[c],
                        !v.has(t, l) || !L(e[l], t[l], n, r))
                        return !1
            }
            return n.pop(),
                r.pop(),
                !0
        };
        v.isEqual = function (e, t) {
            return L(e, t)
        }
            ,
            v.isEmpty = function (e) {
                return null == e || (M(e) && (v.isArray(e) || v.isString(e) || v.isArguments(e)) ? 0 === e.length : 0 === v.keys(e).length)
            }
            ,
            v.isElement = function (e) {
                return !(!e || 1 !== e.nodeType)
            }
            ,
            v.isArray = h || function (e) {
                return "[object Array]" === d.call(e)
            }
            ,
            v.isObject = function (e) {
                var t = typeof e;
                return "function" === t || "object" === t && !!e
            }
            ,
            v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function (e) {
                v["is" + e] = function (t) {
                    return d.call(t) === "[object " + e + "]"
                }
            }),
            v.isArguments(arguments) || (v.isArguments = function (e) {
                return v.has(e, "callee")
            }
            ),
            "function" != typeof /./ && "object" != typeof Int8Array && (v.isFunction = function (e) {
                return "function" == typeof e || !1
            }
            ),
            v.isFinite = function (e) {
                return isFinite(e) && !isNaN(parseFloat(e))
            }
            ,
            v.isNaN = function (e) {
                return v.isNumber(e) && e !== +e
            }
            ,
            v.isBoolean = function (e) {
                return e === !0 || e === !1 || "[object Boolean]" === d.call(e)
            }
            ,
            v.isNull = function (e) {
                return null === e
            }
            ,
            v.isUndefined = function (e) {
                return void 0 === e
            }
            ,
            v.has = function (e, t) {
                return null != e && p.call(e, t)
            }
            ,
            v.noConflict = function () {
                return i._ = o,
                    this
            }
            ,
            v.identity = function (e) {
                return e
            }
            ,
            v.constant = function (e) {
                return function () {
                    return e
                }
            }
            ,
            v.noop = function () { }
            ,
            v.property = _,
            v.propertyOf = function (e) {
                return null == e ? function () { }
                    : function (t) {
                        return e[t]
                    }
            }
            ,
            v.matcher = v.matches = function (e) {
                return e = v.extendOwn({}, e),
                    function (t) {
                        return v.isMatch(t, e)
                    }
            }
            ,
            v.times = function (e, t, n) {
                var r = Array(Math.max(0, e));
                t = b(t, n, 1);
                for (var i = 0; i < e; i++)
                    r[i] = t(i);
                return r
            }
            ,
            v.random = function (e, t) {
                return null == t && (t = e,
                    e = 0),
                    e + Math.floor(Math.random() * (t - e + 1))
            }
            ,
            v.now = Date.now || function () {
                return (new Date).getTime()
            }
            ;
        var O = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "`": "&#x60;"
        }
            , D = v.invert(O)
            , q = function (e) {
                var t = function (t) {
                    return e[t]
                }
                    , n = "(?:" + v.keys(e).join("|") + ")"
                    , r = RegExp(n)
                    , i = RegExp(n, "g");
                return function (e) {
                    return e = null == e ? "" : "" + e,
                        r.test(e) ? e.replace(i, t) : e
                }
            };
        v.escape = q(O),
            v.unescape = q(D),
            v.result = function (e, t, n) {
                var r = null == e ? void 0 : e[t];
                return void 0 === r && (r = n),
                    v.isFunction(r) ? r.call(e) : r
            }
            ;
        var N = 0;
        v.uniqueId = function (e) {
            var t = ++N + "";
            return e ? e + t : t
        }
            ,
            v.templateSettings = {
                evaluate: /<%([\s\S]+?)%>/g,
                interpolate: /<%=([\s\S]+?)%>/g,
                escape: /<%-([\s\S]+?)%>/g
            };
        var F = /(.)^/
            , R = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\u2028": "u2028",
                "\u2029": "u2029"
            }
            , j = /\\|'|\r|\n|\u2028|\u2029/g
            , B = function (e) {
                return "\\" + R[e]
            };
        v.template = function (e, t, n) {
            !t && n && (t = n),
                t = v.defaults({}, t, v.templateSettings);
            var r = RegExp([(t.escape || F).source, (t.interpolate || F).source, (t.evaluate || F).source].join("|") + "|$", "g")
                , i = 0
                , o = "__p+='";
            e.replace(r, function (t, n, r, s, a) {
                return o += e.slice(i, a).replace(j, B),
                    i = a + t.length,
                    n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? o += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : s && (o += "';\n" + s + "\n__p+='"),
                    t
            }),
                o += "';\n",
                t.variable || (o = "with(obj||{}){\n" + o + "}\n"),
                o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
            try {
                var s = new Function(t.variable || "obj", "_", o)
            } catch (e) {
                throw e.source = o,
                e
            }
            var a = function (e) {
                return s.call(this, e, v)
            }
                , c = t.variable || "obj";
            return a.source = "function(" + c + "){\n" + o + "}",
                a
        }
            ,
            v.chain = function (e) {
                var t = v(e);
                return t._chain = !0,
                    t
            }
            ;
        var V = function (e, t) {
            return e._chain ? v(t).chain() : t
        };
        v.mixin = function (e) {
            v.each(v.functions(e), function (t) {
                var n = v[t] = e[t];
                v.prototype[t] = function () {
                    var e = [this._wrapped];
                    return l.apply(e, arguments),
                        V(this, n.apply(v, e))
                }
            })
        }
            ,
            v.mixin(v),
            v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) {
                var t = s[e];
                v.prototype[e] = function () {
                    var n = this._wrapped;
                    return t.apply(n, arguments),
                        "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0],
                        V(this, n)
                }
            }),
            v.each(["concat", "join", "slice"], function (e) {
                var t = s[e];
                v.prototype[e] = function () {
                    return V(this, t.apply(this._wrapped, arguments))
                }
            }),
            v.prototype.value = function () {
                return this._wrapped
            }
            ,
            v.prototype.valueOf = v.prototype.toJSON = v.prototype.value,
            v.prototype.toString = function () {
                return "" + this._wrapped
            }
            ,
            "function" == typeof define && define.amd && define("underscore", [], function () {
                return v
            })
    }
        .call(this),
    define("lib/inject-css", ["require", "underscore"], function (e) {
        function t(e, t) {
            var o = r[e];
            if (!o) {
                o = document.createElement("style"),
                    r[e] = o;
                var s = n.sortedIndex(i, e)
                    , a = r[i[s]];
                a ? document.head.insertBefore(o, a) : document.head.appendChild(o),
                    i.splice(s, 0, e)
            }
            o.textContent = t
        }
        var n = e("underscore")
            , r = {}
            , i = [];
        return t
    }),
    define("underscore-plugins", {}),
    define("loadcss", {
        load: function (e) {
            throw new Error("Dynamic load not allowed: " + e)
        }
    }),
    define("loadcss!print", function () { }),
    define("main/cookie", [], function () {
        function e(e) {
            try {
                var t, n, r, i = encodeURIComponent(e), o = document.cookie.split(";");
                for (t = 0; t < o.length; t++)
                    if (n = o[t].substr(0, o[t].indexOf("=")),
                        r = o[t].substr(o[t].indexOf("=") + 1),
                        n = n.replace(/^\s+|\s+$/g, ""),
                        n == i)
                        return decodeURIComponent(r)
            } catch (e) {
                return
            }
        }
        function t(e, t, n) {
            try {
                var r = new Date;
                r.setDate(r.getDate() + (n || 30)),
                    document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t) + "; expires=" + r.toUTCString() + "; path=/"
            } catch (e) { }
        }
        return {
            getCookie: e,
            setCookie: t
        }
    }),
    define("console", ["require"], function (e) {
        var t = function () { }
            , n = ["log", "info", "warn", "error", "assert", "dir", "clear", "profile", "profileEnd", "time", "timeEnd", "group", "groupCollapsed", "groupEnd", "trace"]
            , r = {}
            , i = function (e) {
                "undefined" != typeof window && window.console && window.console[e] ? r[e] = function () {
                    Function.prototype.apply.call(window.console[e], window.console, arguments)
                }
                    : r[e] = t
            };
        return n.forEach(i),
            r
    }),
    define("lib/console", ["require", "exports", "console"], function (e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.log = n.log,
            t.warn = n.warn
    }),
    define("i18n", ["require", "exports", "config", "main/cookie", "jquery", "underscore", "lib/console"], function (e, t, n, r, i, o, s) {
        "use strict";
        function a(e, t) {
            m = e || "",
                g = t || {}
        }
        function c(e) {
            for (var t, n = /(__[^_]+__)/g, r = []; null !== (t = n.exec(e));)
                r.push({
                    index: t.index,
                    text: t[0]
                });
            e = e.replace(/[a-z]/gi, "");
            for (var i = e.split(""), o = 0; o < r.length; o++)
                for (var s = r[o].index, a = r[o].text, c = 0; c < a.length; c++)
                    i[s + c] = a[c];
            return i.join("")
        }
        function l(e, t, r) {
            var i = void 0 !== r ? r : m
                , o = g[i] && g[i][e] || e || "";
            if (n.get("bare-i18n") && (o = c(o)),
                t)
                for (var s in t)
                    t.hasOwnProperty(s) && (o = o.split("__" + s + "__").join(t[s]));
            return o
        }
        function u(e) {
            var n = [];
            return o.each(e, function (e) {
                if (e) {
                    var r = e.split("-")[0];
                    n.push(e),
                        n.push(r),
                        o.each(t.enabled_languages, function (e, t) {
                            t.split("-")[0] === r && e.useAsRoot && n.push(t)
                        })
                }
            }),
                n
        }
        function d() {
            for (var e = u([n.get("lang"), r.getCookie("lang"), navigator.userLanguage, navigator.language]), i = 0; i < e.length; i++) {
                var s = e[i];
                if (t.enabled_languages.hasOwnProperty(s))
                    return s;
                if (o.contains(y, s))
                    return s
            }
            return "en"
        }
        function p() {
            return m
        }
        function h(e) {
            var t = window.Desmos
                , n = i.Deferred();
            return t.supportedLanguages.indexOf(e) >= 0 || "en" === e ? (a(e, t.locales),
                n.resolve(!0),
                n.promise()) : (i.get("/api/v1/calculator/language/" + e, function (r) {
                    t.locales || (t.locales = {}),
                        t.supportedLanguages || (t.supportedLanguages = []),
                        t.locales[e] = r[e],
                        t.supportedLanguages.push(e),
                        a(e, t.locales),
                        n.resolve(!0)
                }).fail(function (t) {
                    404 === t.status && s.warn(e + " is not an available language."),
                        n.reject()
                }),
                    n.promise())
        }
        function f(e, t) {
            if (null === e || void 0 === e)
                return "";
            if ("string" == typeof e)
                return e;
            if ("number" == typeof e)
                return "" + e;
            var n, r = e.vars;
            if (r) {
                n = {};
                for (var i in r)
                    r.hasOwnProperty(i) && (n[i] = f(r[i], t))
            }
            return l(e.msg, n, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.locales = function () {
                var e = window.Desmos;
                return e && e.locales ? e.locales : {}
            }();
        var m = ""
            , g = {};
        t.enabled_languages = {
            en: {
                displayName: "English (US)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "en-GB": {
                displayName: "English (GB)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "es-ES": {
                displayName: "Espaol (Espaa)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",
                useAsRoot: !0
            },
            ru: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",
                useAsRoot: !1
            },
            de: {
                displayName: "Deutsch",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",
                useAsRoot: !1
            },
            "pt-BR": {
                displayName: "Portugus (Brasil)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "pt-PT": {
                displayName: "Portugus (Portugal)",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ca: {
                displayName: "Catal",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            fr: {
                displayName: "Franais",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",
                useAsRoot: !1
            },
            it: {
                displayName: "Italiano",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",
                useAsRoot: !1
            },
            is: {
                displayName: "slenska",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            nl: {
                displayName: "Nederlands",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            no: {
                displayName: "Norsk",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "sv-SE": {
                displayName: "Svenska",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            hr: {
                displayName: "Hrvatski",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            da: {
                displayName: "Dansk",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            cs: {
                displayName: "etina",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            tr: {
                displayName: "Trke",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",
                useAsRoot: !1
            },
            sl: {
                displayName: "Slovenina",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_SL.pdf",
                useAsRoot: !1
            },
            lt: {
                displayName: "Lietuvi",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            pl: {
                displayName: "Polski",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",
                useAsRoot: !1
            },
            ro: {
                displayName: "Romn",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            id: {
                displayName: "Bahasa Indonesia",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            vi: {
                displayName: "Ting Vit",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",
                useAsRoot: !1
            },
            el: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",
                useAsRoot: !1
            },
            "sr-CS": {
                displayName: "SRPSKI",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            bg: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_BG.pdf",
                useAsRoot: !1
            },
            mk: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            uk: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ka: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            th: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            "zh-CN": {
                displayName: "",
                useAsRoot: !0,
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"
            },
            "zh-TW": {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",
                useAsRoot: !1
            },
            ko: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",
                useAsRoot: !1
            },
            ja: {
                displayName: "",
                userGuideURL: "https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",
                useAsRoot: !1
            }
        };
        var y = ["sr", "he", "ar", "fi", "hu", "kk", "ml-IN", "tr", "fa"];
        t.init = a,
            t.t = l,
            t.detectLanguage = d,
            t.currentLanguage = p,
            t.fetchLanguage = h,
            t.unpack = f,
            a(d(), t.locales)
    }),
    define("pjs", [], function () {
        var e = function (e, t, n) {
            function r(e) {
                return "object" == typeof e
            }
            function i(e) {
                return "function" == typeof e
            }
            function o() { }
            function s(a, c) {
                function l() {
                    var e = new u;
                    return i(e.init) && e.init.apply(e, arguments),
                        e
                }
                function u() { }
                c === n && (c = a,
                    a = Object),
                    l.Bare = u;
                var d, p = o[e] = a[e], h = u[e] = l[e] = new o;
                return h.constructor = l,
                    l.mixin = function (t) {
                        return u[e] = l[e] = s(l, t)[e],
                            l
                    }
                    ,
                    (l.open = function (e) {
                        if (d = {},
                            i(e) ? d = e.call(l, h, p, l, a) : r(e) && (d = e),
                            r(d))
                            for (var n in d)
                                t.call(d, n) && (h[n] = d[n]);
                        return i(h.init) || (h.init = a),
                            l
                    }
                    )(c)
            }
            return s
        }("prototype", {}.hasOwnProperty);
        return e
    }),
    define("underscore_model", ["require", "underscore", "pjs"], function (e) {
        var t = e("underscore")
            , n = e("pjs")
            , r = n(function (e) {
                var n = 0
                    , r = "guid_" + Math.round(1e6 * Math.random()) + "_" + (new Date).getTime() + "_";
                e.init = function () {
                    this.__observers = {},
                        this.__eventObservers = {},
                        this.__oldProperties = {},
                        this.__propertyComparators = {},
                        this.guid = r + ++n
                }
                    ,
                    e.unobserveAll = function () {
                        this.__observers = {},
                            this.__eventObservers = {}
                    }
                    ,
                    e.getProperty = function (e) {
                        return this[e]
                    }
                    ,
                    e.getOldProperty = function (e) {
                        return this.__oldProperties[e]
                    }
                    ,
                    e.setProperty = function (e, n) {
                        var r = this[e];
                        this[e] = n;
                        var i = this.__propertyComparators[e];
                        if (i) {
                            if (i(r, n))
                                return
                        } else if (t.isEqual(r, n))
                            return;
                        this.__oldProperties[e] = r,
                            this.notifyPropertyChange(e)
                    }
                    ,
                    e.setProperties = function (e) {
                        for (var t in e)
                            e.hasOwnProperty(t) && this.setProperty(t, e[t])
                    }
                    ,
                    e.setPropertyComparator = function (e, t) {
                        this.__propertyComparators[e] = t
                    }
                    ,
                    e.notifyPropertyChange = function (e) {
                        this.__callObservers(this.__observers, e, this)
                    }
                    ,
                    e.observe = function (e, t) {
                        this.__addObservers(this.__observers, e, t)
                    }
                    ,
                    e.unobserve = function (e) {
                        this.__removeObservers(this.__observers, e)
                    }
                    ,
                    e.observeAndSync = function (e, t) {
                        this.observe(e, t);
                        for (var n = e.split(" "), r = 0; r < n.length; r++) {
                            var i = n[r].split(".")
                                , o = i[0];
                            this.hasOwnProperty(o) && t(o, this)
                        }
                    }
                    ,
                    e.triggerEvent = function (e, t) {
                        this.__callObservers(this.__eventObservers, e, t)
                    }
                    ,
                    e.observeEvent = function (e, t) {
                        this.__addObservers(this.__eventObservers, e, t)
                    }
                    ,
                    e.unobserveEvent = function (e) {
                        this.__removeObservers(this.__eventObservers, e)
                    }
                    ,
                    e.__callObservers = function (e, t, n) {
                        var r = e[t];
                        if (r)
                            for (var i = 0; i < r.length; i++)
                                r[i].callback(t, n)
                    }
                    ,
                    e.__removeObservers = function (e, t) {
                        for (var n = t.split(" "), r = 0; r < n.length; r++) {
                            var i = n[r].split(".")
                                , o = i[0]
                                , s = i[1];
                            if (o && s) {
                                var a = e[o]
                                    , c = [];
                                if (!a)
                                    continue;
                                for (var l = 0; l < a.length; l++) {
                                    var u = a[l];
                                    u.namespace !== s && c.push(u)
                                }
                                e[o] = c
                            } else if (o)
                                delete e[o];
                            else if (s)
                                for (o in e)
                                    e.hasOwnProperty(o) && this.__removeObservers(e, o + "." + s)
                        }
                    }
                    ,
                    e.__addObservers = function (e, t, n) {
                        for (var r = t.split(" "), i = 0; i < r.length; i++) {
                            var o = r[i].split(".")
                                , s = o[0];
                            if (!s)
                                throw "Must supply a property to observe";
                            var a = o[1]
                                , c = {
                                    namespace: a,
                                    callback: n
                                }
                                , l = e[s];
                            l ? l.push(c) : e[s] = [c]
                        }
                    }
            });
        return r
    }),
    define("lib/worker-i18n", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            return {
                msg: e,
                vars: t
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.t = n
    }),
    define("main/graph", ["require", "pjs", "underscore_model", "lib/worker-i18n"], function (e) {
        var t = e("pjs")
            , n = e("underscore_model")
            , r = e("lib/worker-i18n")
            , i = t(n, function (e, t) {
                var n = ["title", "thumbURL", "stateURL", "hash", "parentHash", "graphData", "access", "created", "example", "betchacant"];
                e.init = function (e) {
                    t.init.call(this);
                    var r = this;
                    e && n.forEach(function (t) {
                        e.hasOwnProperty(t) && r.setProperty(t, e[t])
                    }),
                        this.access || this.setProperty("access", "all"),
                        this.example || this.setProperty("example", !1),
                        this.now = new Date
                }
                    ,
                    e.copy = function () {
                        return i(this)
                    }
                    ,
                    e.getCollectionKey = function () {
                        return (this.example ? "example-" : "") + this.hash
                    }
                    ,
                    e.displayDate = function () {
                        var e = Date.now()
                            , t = (e - this.created) / 1e3
                            , n = t / 60
                            , i = n / 60
                            , o = i / 24
                            , s = o / 7
                            , a = [r.t("Jan"), r.t("Feb"), r.t("Mar"), r.t("Apr"), r.t("May"), r.t("Jun"), r.t("Jul"), r.t("Aug"), r.t("Sep"), r.t("Oct"), r.t("Nov"), r.t("Dec")];
                        return s >= 5 ? r.t("on __month__ __day__, __year__", {
                            month: a[this.created.getMonth()],
                            day: this.created.getDate(),
                            year: this.created.getFullYear()
                        }) : s >= 2 ? r.t("__number__ weeks ago", {
                            number: String(Math.floor(s))
                        }) : o >= 7 ? r.t("last week") : o >= 2 ? r.t("__number__ days ago", {
                            number: String(Math.floor(o))
                        }) : i >= 24 ? r.t("yesterday") : i >= 2 ? r.t("__number__ hours ago", {
                            number: String(Math.floor(i))
                        }) : n >= 60 ? r.t("one hour ago") : n >= 2 ? r.t("__number__ minutes ago", {
                            number: String(Math.floor(n))
                        }) : n >= 1 ? r.t("one minute ago") : r.t("less than a minute ago")
                    }
                    ,
                    e.plainObject = function () {
                        var e = {}
                            , t = this;
                        return n.forEach(function (n) {
                            e[n] = t[n]
                        }),
                            e
                    }
                    ,
                    e.getURL = function () {
                        if ("file:" === window.location.protocol)
                            return "/calculator";
                        var e = "/" + document.location.pathname.split("/")[1]
                            , t = window.location.href.split(e)[0] + e;
                        return t + (this.hash ? "/" + this.hash : "")
                    }
            });
        return i.fromAjax = function (e) {
            return i({
                title: e.title,
                thumbURL: e.thumbUrl,
                stateURL: e.stateUrl,
                graphData: e.state,
                hash: e.hash,
                parentHash: e.parent_hash,
                access: e.access,
                created: new Date(e.created),
                example: !!e.example,
                betchacant: !!e.betchacant
            })
        }
            ,
            i.toAjax = function (e) {
                return {
                    title: e.title,
                    thumbUrl: e.thumbURL,
                    stateUrl: e.stateURL,
                    state: e.graphData,
                    hash: e.hash,
                    parent_hash: e.parentHash,
                    access: e.access,
                    created: e.created.toString()
                }
            }
            ,
            i.updateFromSync = function (e, t) {
                e.setProperty("title", t.title),
                    e.setProperty("hash", t.hash),
                    e.setProperty("parentHash", t.parent_hash),
                    e.setProperty("graphData", e.graphData),
                    e.setProperty("thumbURL", t.thumbUrl),
                    e.setProperty("stateURL", t.stateUrl),
                    e.setProperty("created", new Date(t.created))
            }
            ,
            i
    }),
    define("text!example_graphs", [], function () {
        return '[{"stateUrl":"https://saved-work.desmos.com/calc-states/production/2rnqgoa6a4","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2rnqgoa6a4.png","hash":"2rnqgoa6a4","title":"Lines: Slope Intercept Form","created":"2015-08-18T19:24:05.378Z","access":"all","parent_hash":"89ndqgh5id","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/onfy0dzx2o","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/onfy0dzx2o.png","hash":"onfy0dzx2o","title":"Lines: Point Slope Form","created":"2015-08-18T20:21:16.780Z","access":"all","parent_hash":"kha6fgxhaf","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/md6buy4efz","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/md6buy4efz.png","hash":"md6buy4efz","title":"Lines: Two Point Form","created":"2015-08-18T20:21:39.575Z","access":"all","parent_hash":"fi71u8ej0q","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/zukjgk9iry","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zukjgk9iry.png","hash":"zukjgk9iry","title":"Parabolas: Standard Form","created":"2015-08-18T20:22:02.411Z","access":"all","parent_hash":"jv9fmw2qz8","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/8keeh1pt5l","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8keeh1pt5l.png","hash":"8keeh1pt5l","title":"Parabolas: Vertex Form","created":"2015-08-18T20:22:22.626Z","access":"all","parent_hash":"klodq5d0ph","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/dxkknajdqb","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dxkknajdqb.png","hash":"dxkknajdqb","title":"Parabolas: Standard Form + Tangent","created":"2015-08-18T20:24:05.891Z","access":"all","parent_hash":"t6auzqijzl","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/kihjluohq9","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/kihjluohq9.png","hash":"kihjluohq9","title":"Trigonometry: Period and Amplitude","created":"2015-08-18T20:24:32.570Z","access":"all","parent_hash":"vpnnmvncdb","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/l3u8133jwj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/l3u8133jwj.png","hash":"l3u8133jwj","title":"Trigonometry: Phase","created":"2015-08-18T20:24:53.936Z","access":"all","parent_hash":"51d9lso1ia","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/mp7qmv1igx","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/mp7qmv1igx.png","hash":"mp7qmv1igx","title":"Trigonometry: Wave Interference","created":"2015-08-18T20:25:55.647Z","access":"all","parent_hash":"0hcemdnmmw","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/qmzx2skkzy","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qmzx2skkzy.png","hash":"qmzx2skkzy","title":"Trigonometry: Unit Circle","created":"2015-08-18T20:26:18.276Z","access":"all","parent_hash":"s9myfmvujr","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/ivud1auwvw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ivud1auwvw.png","hash":"ivud1auwvw","title":"Conic Sections: Circle","created":"2015-08-18T20:27:04.445Z","access":"all","parent_hash":"8dsmqe5ycc","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/djcrjdfiif","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/djcrjdfiif.png","hash":"djcrjdfiif","title":"Conic Sections: Parabola and Focus","created":"2015-08-18T20:27:50.487Z","access":"all","parent_hash":"0jwlvn9hcs","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/afja7ee9mh","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/afja7ee9mh.png","hash":"afja7ee9mh","title":"Conic Sections: Ellipse with Foci","created":"2015-08-18T20:28:08.499Z","access":"all","parent_hash":"duajwxdopa","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/vgfqbejegx","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vgfqbejegx.png","hash":"vgfqbejegx","title":"Conic Sections: Hyperbola","created":"2015-08-18T20:28:27.874Z","access":"all","parent_hash":"k6xcbueze5","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/0ovfwwmfrb","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/0ovfwwmfrb.png","hash":"0ovfwwmfrb","title":"Polar: Rose","created":"2015-08-18T20:28:48.832Z","access":"all","parent_hash":"scuci1750d","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/qlbdlxyrza","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qlbdlxyrza.png","hash":"qlbdlxyrza","title":"Polar: Logarithmic Spiral","created":"2015-08-18T20:29:08.282Z","access":"all","parent_hash":"nicremwert","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/rayzacuktw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rayzacuktw.png","hash":"rayzacuktw","title":"Polar: Limacon","created":"2015-08-18T20:29:25.878Z","access":"all","parent_hash":"21pbohd07u","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/gxnu7fbgks","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gxnu7fbgks.png","hash":"gxnu7fbgks","title":"Polar: Conic Sections","created":"2015-08-18T20:29:42.487Z","access":"link","parent_hash":"kk3axf8oon","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/rnyjcjpouf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rnyjcjpouf.png","hash":"rnyjcjpouf","title":"Parametric: Introduction","created":"2015-08-18T20:30:31.353Z","access":"all","parent_hash":"ogvj2tzgjj","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/eg5he4xpg9","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/eg5he4xpg9.png","hash":"eg5he4xpg9","title":"Parametric: Cycloid","created":"2015-08-18T20:30:46.372Z","access":"link","parent_hash":"pwjl3pe4da","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/nyterjs0uf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/nyterjs0uf.png","hash":"nyterjs0uf","title":"Transformations: Translating a Function","created":"2017-09-29T00:47:36.436Z","access":"link","parent_hash":"nqxx2mhknn","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/vdkjrpznnu","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vdkjrpznnu.png","hash":"vdkjrpznnu","title":"Transformations: Scaling a Function","created":"2015-08-18T21:23:20.484Z","access":"link","parent_hash":"doxva7ciht","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/fcjhdt1xdw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fcjhdt1xdw.png","hash":"fcjhdt1xdw","title":"Transformations: Inverse of a Function","created":"2015-08-18T21:23:36.776Z","access":"link","parent_hash":"tif5liedlj","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/jwquvmikhr","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/jwquvmikhr.png","hash":"jwquvmikhr","title":"Statistics: Linear Regression","created":"2015-08-18T21:24:01.998Z","access":"link","parent_hash":"2l0r87hkmq","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/paknt6oneh","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/paknt6oneh.png","hash":"paknt6oneh","title":"Statistics: Anscomb\'s Quartet","created":"2015-08-18T21:24:19.652Z","access":"link","parent_hash":"c5wffk3gnd","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/sanlujpfmc","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/sanlujpfmc.png","hash":"sanlujpfmc","title":"Statistics: 4th Order Polynomial","created":"2015-08-18T21:25:02.018Z","access":"all","parent_hash":"tyszvsmelo","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/iwfjdrhdyr","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/iwfjdrhdyr.png","hash":"iwfjdrhdyr","title":"Lists: Family of sin Curves","created":"2015-08-18T21:25:30.069Z","access":"link","parent_hash":"4n11jtzki0","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/ib4qkln029","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ib4qkln029.png","hash":"ib4qkln029","title":"Lists: Curve Stitching","created":"2016-05-05T06:33:59.891Z","access":"link","parent_hash":"1flkupc1yt","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/zdv2kras4n","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zdv2kras4n.png","hash":"zdv2kras4n","title":"Lists: Plotting a List of Points","created":"2015-08-18T21:27:01.962Z","access":"link","parent_hash":"fqhp5hq3ka","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/qtzamwcdrk","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qtzamwcdrk.png","hash":"qtzamwcdrk","title":"Calculus: Derivatives","created":"2015-08-18T21:27:17.187Z","access":"link","parent_hash":"aqgbwm3qfd","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/mekfho0w38","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/mekfho0w38.png","hash":"mekfho0w38","title":"Calculus: Secant Line","created":"2015-08-18T21:27:32.274Z","access":"link","parent_hash":"irip8pnpdf","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/fs3lx8gptb","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fs3lx8gptb.png","hash":"fs3lx8gptb","title":"Calculus: Tangent Line","created":"2015-08-18T21:27:46.455Z","access":"link","parent_hash":"dlzhsldcgo","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/noanuckuli","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/noanuckuli.png","hash":"noanuckuli","title":"Calculus: Taylor Expansion of sin(x)","created":"2015-08-18T21:28:02.855Z","access":"link","parent_hash":"gkjridbqfj","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/qigfpckugc","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qigfpckugc.png","hash":"qigfpckugc","title":"Calculus: Integrals","created":"2016-04-19T14:03:33.013Z","access":"link","parent_hash":null,"example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/u2qz73ufju","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/u2qz73ufju.png","hash":"u2qz73ufju","title":"Calculus: Integral with adjustable bounds","created":"2016-04-19T14:12:40.336Z","access":"link","parent_hash":"o3pwn3vkgh","example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/gaa5aqyb5s","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gaa5aqyb5s.png","hash":"gaa5aqyb5s","title":"Calculus: Fundamental Theorem of Calculus","created":"2016-04-19T14:15:45.211Z","access":"link","parent_hash":null,"example":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/8hxtdephtf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8hxtdephtf.png","hash":"8hxtdephtf","title":"Pac Man","created":"2015-04-20T14:47:01.468Z","access":"link","parent_hash":"xova2bfhj5","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/dhzndt8brx","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dhzndt8brx.png","hash":"dhzndt8brx","title":"3D World","created":"2016-06-03T01:50:06.425Z","access":"link","parent_hash":"brei8peg52","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/zzhx3zzlns","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zzhx3zzlns.png","hash":"zzhx3zzlns","title":"Checkerboard Inversion","created":"2016-06-02T22:06:08.277Z","access":"link","parent_hash":"ccmfndxptv","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/c1u72uowae","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/c1u72uowae.png","hash":"c1u72uowae","title":"Regular Sine Wave?","created":"2013-08-18T06:25:20.605Z","access":"link","parent_hash":null,"example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/2mwse3jtff","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2mwse3jtff.png","hash":"2mwse3jtff","title":"Fastest Path to a Point","created":"2016-06-02T22:02:44.839Z","access":"link","parent_hash":"msmdonti4c","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/8ytrg3nyln","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8ytrg3nyln.png","hash":"8ytrg3nyln","title":"Fireworks!","created":"2016-06-03T01:50:52.464Z","access":"link","parent_hash":"d7qrsg2hxg","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/9ed6k6wexp","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/9qixqdozzh.png","hash":"9ed6k6wexp","title":"Fractal Valentine","created":"2015-02-14T18:42:18.283Z","access":"link","parent_hash":"9ed6k6wexp","example":true,"betchacant":true},{"stateUrl":"https://saved-work.desmos.com/calc-states/production/am6ab20tmw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/am6ab20tmw.png","hash":"am6ab20tmw","title":"Outstretched Arm","created":"2016-06-03T01:45:50.594Z","access":"link","parent_hash":"hvycjwscfq","example":true,"betchacant":true}]\n'
    }),
    define("math/mathshim", ["require"], function (e) {
        var t = {};
        return t.cosh = Math.cosh || function (e) {
            return .5 * (Math.exp(e) + Math.exp(-e))
        }
            ,
            t.sinh = Math.sinh && 0 !== Math.sinh(1e-20) ? Math.sinh : function (e) {
                var n = e > 0 ? 1 : -1;
                return e = e > 0 ? e : -e,
                    .5 * -n * Math.exp(e) * t.expm1(-2 * e)
            }
            ,
            t.tanh = Math.tanh && 0 !== Math.tanh(1e-20) ? Math.tanh : function (e) {
                var n = e > 0 ? 1 : -1;
                e = e > 0 ? e : -e;
                var r = t.expm1(-2 * e);
                return -n * r / (2 + r)
            }
            ,
            t.acosh = Math.acosh || function (e) {
                return e < 1 ? NaN : Math.log(e + t.sqrtxsqm1(e))
            }
            ,
            t.asinh = Math.asinh && 0 !== Math.asinh(1e-20) ? Math.asinh : function (e) {
                var n = e > 0 ? 1 : -1;
                return e = e > 0 ? e : -e,
                    1 + e * e === 1 ? n * t.log1p(e) : n * Math.log(e + t.sqrtxsqp1(e))
            }
            ,
            t.atanh = Math.atanh && 0 !== Math.atanh(1e-20) ? Math.atanh : function (e) {
                return .5 * (t.log1p(e) - t.log1p(-e))
            }
            ,
            t.expm1 = Math.expm1 || function (e) {
                return e + .5 * e * e === e ? e : Math.exp(e) - 1
            }
            ,
            t.log1p = Math.log1p || function (e) {
                return e - .5 * e * e === e ? e : Math.log(1 + e)
            }
            ,
            t.sqrtxsqp1 = function (e) {
                var t = e * e;
                return 1 + t === 1 ? 1 : 1 + t === t ? Math.abs(e) : Math.sqrt(t + 1)
            }
            ,
            t.sqrtxsqm1 = function (e) {
                var t = e * e;
                return t < 1 ? NaN : t - 1 === t ? Math.abs(e) : Math.sqrt(t - 1)
            }
            ,
            t
    }),
    define("math/distance", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            return e > 0 == t > 0 ? e + .5 * (t - e) : .5 * (e + t)
        }
        function r(e, t, n, r) {
            return e * n + t * r
        }
        function i(e, n, i, o, s, a) {
            var c = t.hypot(s - i, a - o);
            if (0 === c)
                return 0;
            var l = r((e - i) / c, (n - o) / c, (s - i) / c, (a - o) / c);
            return l
        }
        function o(e, t, n, r, o, s) {
            var a = i(e, t, n, r, o, s);
            return a <= 0 ? [n, r] : a >= 1 ? [o, s] : [n + a * (o - n), r + a * (s - r)]
        }
        function s(e, n, r, i, s, a) {
            var c = o(e, n, r, i, s, a);
            return t.hypot(e - c[0], n - c[1])
        }
        function a(e, t, n) {
            if (void 0 === n && (n = 1),
                n > 50)
                throw new Error("Within " + (52 - n) + " bits isn't really approximate any more");
            var r = Math.max(Math.max(Math.abs(e), Math.abs(t)), 1)
                , i = 1 === n ? .5 : Math.pow(.5, n);
            return r === r + i * Math.abs(t - e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.hypot = Math.hypot || function (e, t) {
                if (0 === e && 0 === t)
                    return 0;
                if (Math.abs(e) > Math.abs(t)) {
                    var n = t / e;
                    return Math.abs(e) * Math.sqrt(n * n + 1)
                }
                var n = e / t;
                return Math.abs(t) * Math.sqrt(n * n + 1)
            }
            ,
            t.mean = n,
            t.pointToSegmentParameter = i,
            t.closestPointOnSegment = o,
            t.pointToSegment = s,
            t.approx = a
    }),
    define("math/poi", ["require", "exports", "./distance", "lib/console"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            var r;
            e > t && (r = e,
                e = t,
                t = r);
            var i = e > 0
                , o = t > 0
                , s = Math.abs(e) > .01
                , a = Math.abs(t) > .01;
            if (s || a)
                return n.mean(e, t);
            if (0 === e)
                return t * Math.abs(t);
            if (0 === t)
                return e * Math.abs(e);
            if (i !== o)
                return 0;
            var c = i ? Math.sqrt(e * t) : -Math.sqrt(e * t);
            return c >= e && t >= c ? c : n.mean(e, t)
        }
        function o(e, t, n, o, a) {
            if (!isFinite(t) || !isFinite(o) || t < 0 == o < 0)
                return void r.log("bisectZero called with bad y values", [t, o]);
            for (; ;) {
                var c = i(e, n)
                    , l = a(c);
                if (!isFinite(l))
                    return;
                if (c === e || c === n)
                    return Math.abs(t) <= Math.abs(o) ? [e, t] : [n, o];
                if (0 === l)
                    return s(e, t, c, l, n, o, a);
                t < 0 != l < 0 ? (n = c,
                    o = l) : (e = c,
                        t = l)
            }
        }
        function s(e, t, n, r, o, s, l) {
            var u;
            if (isFinite(r)) {
                isFinite(t) || (u = a(e, t, n, r, l),
                    u && (e = u[0],
                        t = u[1])),
                    isFinite(s) || (u = a(n, r, o, s, l),
                        u && (o = u[0],
                            s = u[1]));
                var d, p;
                d = t === r ? [e, t] : c(e, t, n, r, l, r),
                    p = s === r ? [o, s] : c(n, r, o, s, l, r);
                var h;
                return d && p && (h = i(d[0], p[0])),
                    void 0 !== h ? [h, l(h)] : void 0
            }
        }
        function a(e, t, n, o, s) {
            if (isFinite(t) === isFinite(o))
                return void r.log("bisectFinite called with bad y values", [t, o]);
            for (; ;) {
                var a = i(e, n)
                    , c = s(a);
                if (a === e || a === n)
                    return isFinite(t) ? [e, t] : [n, o];
                isFinite(c) !== isFinite(t) ? (n = a,
                    o = c) : (e = a,
                        t = c)
            }
        }
        function c(e, t, n, o, s, a) {
            if (t === a == (o === a))
                return void r.log("bisectConstant called with bad y values", [t, o, a]);
            for (; ;) {
                var c = i(e, n)
                    , l = s(c);
                if (c === e || c === n)
                    return t === a ? [e, t] : [n, o];
                l === a != (t === a) ? (n = c,
                    o = l) : (e = c,
                        t = l)
            }
        }
        function l(e, t, n, o, a, c, l) {
            if (!(e < n && n < a))
                return void r.log("bisectExtremum called with bad x values", [e, n, a]);
            if (!(isFinite(t) && isFinite(o) && isFinite(c) && t !== o && o !== c && o > t == o > c))
                return void r.log("bisectExtremum called with bad y values", [t, o, c]);
            for (; ;) {
                var u = i(e, n)
                    , d = l(u)
                    , p = i(n, a)
                    , h = l(p);
                if (!isFinite(d) || !isFinite(h))
                    return;
                if (u === e || u === n || p === n || p === a)
                    return d > o == o > t ? [u, d] : h > o == o > t ? [p, h] : [n, o];
                if (d === o || h === o)
                    return s(e, t, n, o, a, c, l);
                d > t == o > t && d > t == d > o ? (a = n,
                    c = o,
                    n = u,
                    o = d) : h > c == o > c && h > o == h > c ? (e = n,
                        t = o,
                        n = p,
                        o = h) : (e = u,
                            t = d,
                            a = p,
                            c = h)
            }
        }
        function u(e, t, n, r, i, o, s, a) {
            var c = Math.abs(r - t)
                , l = Math.abs(o - r)
                , u = Math.abs(a - o);
            return c > l && c > u ? [[e, t], [n, r]] : u > l && u > c ? [[i, o], [s, a]] : [[n, r], [i, o]]
        }
        function d(e, t, r, o, s, c, l, d) {
            if (d || (d = 0),
                !((r - e) * (s - r) <= 0) && isFinite(e) && isFinite(r) && isFinite(s) && isFinite(t) && isFinite(c)) {
                if (!isFinite(o))
                    return [a(e, t, r, o, l), a(r, o, s, c, l)];
                if (!(Math.abs(o - ((s - r) * t + (r - e) * c) / (s - e)) < d))
                    for (; ;) {
                        var p = i(e, r)
                            , h = l(p)
                            , f = i(r, s)
                            , m = l(f)
                            , g = Math.abs(h - n.mean(t, o))
                            , y = Math.abs(o - n.mean(h, m))
                            , v = Math.abs(m - n.mean(o, c))
                            , b = void 0
                            , x = void 0;
                        if (g <= d && y <= d && v <= d)
                            return;
                        if (!isFinite(h))
                            return b = a(e, t, p, h, l),
                                x = a(p, h, s, c, l),
                                [b, x];
                        if (!isFinite(m))
                            return b = a(e, t, f, m, l),
                                x = a(f, m, s, c, l),
                                [b, x];
                        if (!(p !== e && p !== r || f !== r && f !== s))
                            return Math.abs(o - t) > Math.abs(c - o) ? (b = [e, t],
                                x = [r, o]) : (b = [r, o],
                                    x = [s, c]),
                                [b, x];
                        if (p === e || p === r)
                            return u(e, t, r, o, f, m, s, c);
                        if (f === r || f === s)
                            return u(e, t, p, h, r, o, s, c);
                        g > v && g >= y ? (s = r,
                            c = o,
                            r = p,
                            o = h) : v > g && v >= y ? (e = r,
                                t = o,
                                r = f,
                                o = m) : (e = p,
                                    t = h,
                                    s = f,
                                    c = m)
                    }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = {
                bisectJump: d,
                bisectExtremum: l,
                bisectFinite: a,
                bisectZero: o,
                flatCenter: s,
                INTERSECTION: 1001,
                ZERO: 1002,
                INTERCEPT: 1003,
                EXTREMUM: 1004,
                EDGE: 1005,
                DEFINITION: 1006,
                TRACE: 1007,
                LABEL: 1008
            }
    }),
    define("math/quadrature", ["require", "math/mathshim", "math/poi"], function (e) {
        "use strict";
        function t(e, t) {
            for (var n = v; n > 0; n--) {
                var r = h / v * n
                    , i = l.sinh(r)
                    , o = l.cosh(Math.PI / 2 * i)
                    , s = 1 / (Math.exp(Math.PI / 2 * i) * o)
                    , a = l.cosh(r) / (o * o);
                e.push(s),
                    t.push(a)
            }
        }
        function n(e, t, n) {
            return .5 * (t * (2 - n) + e * n)
        }
        function r(e, t, n) {
            var r = .5 * (t + n)
                , i = d(t, e(t), r, e(r), n, e(n), e, 0);
            return i ? .5 * (i[0][0] + i[1][0]) : r
        }
        function i(e, t, n, r, i) {
            return {
                x1: e,
                x2: t,
                value: n,
                error: r,
                minerror: i
            }
        }
        function o(e, t, r) {
            var i = Math.abs(e(n(t, r, m)))
                , o = Math.abs(e(n(t, r, 2 * m)));
            return !(i < m || o < m) && i > 1.95 * o
        }
        function s(e, t, r) {
            var s, a, c = n(r, t, b[0]), l = n(t, r, b[0]), u = e(c), d = e(l), h = n(t, r, 1), f = e(h);
            if (isFinite(f) && !isFinite(u)) {
                if (s = p(c, u, h, f, e),
                    Math.abs((s[0] - t) / (r - t)) > y)
                    return i(t, r, NaN, NaN, NaN);
                t = s[0],
                    u = s[1]
            }
            if (isFinite(f) && !isFinite(d)) {
                if (a = p(h, f, l, d, e),
                    Math.abs((a[0] - r) / (r - t)) > y)
                    return i(t, r, NaN, NaN, NaN);
                r = a[0],
                    d = a[1]
            }
            if (isFinite(u) && isFinite(d) && !isFinite(f)) {
                if (s = p(c, u, h, f, e),
                    a = p(h, f, l, d, e),
                    Math.abs((a[0] - s[0]) / (r - t)) > y)
                    return i(t, r, NaN, NaN, NaN);
                f = .5 * (s[1] + a[1])
            }
            if (o(e, t, r) || o(e, r, t))
                return i(t, r, NaN, NaN, NaN);
            for (var m = f, g = 0, w = 0, E = 0, S = 0, k = 0, M = 0, C = 0; C < v; C += 4)
                k = e(n(t, r, b[C])),
                    M = e(n(r, t, b[C])),
                    S = Math.max(S, Math.abs(k), Math.abs(M)),
                    g += x[C] * (k + M),
                    k = e(n(t, r, b[C + 1])),
                    M = e(n(r, t, b[C + 1])),
                    S = Math.max(S, Math.abs(k), Math.abs(M)),
                    E += x[C + 1] * (k + M),
                    k = e(n(t, r, b[C + 2])),
                    M = e(n(r, t, b[C + 2])),
                    S = Math.max(S, Math.abs(k), Math.abs(M)),
                    w += x[C + 2] * (k + M),
                    k = e(n(t, r, b[C + 3])),
                    M = e(n(r, t, b[C + 3])),
                    S = Math.max(S, Math.abs(k), Math.abs(M)),
                    E += x[C + 3] * (k + M);
            var I, T = m + g, P = T + w, A = P + E, L = Math.abs(w - T), O = Math.abs(E - P), D = _ * (r - t) * A, q = _ * Math.abs(r - t) * S * x[0];
            return I = 0 === L ? _ * Math.abs(r - t) * O : _ * Math.abs(r - t) * O * (O / L) * (O / L),
                I = Math.max(I, q),
                i(t, r, D, I, q)
        }
        function a(e) {
            for (var t = -(1 / 0), n = -(1 / 0), r = -1, i = 0, o = 0; o < e.length; o++) {
                var s = e[o];
                i += s.value,
                    s.error > t && (t = s.error,
                        r = o),
                    s.minerror > n && (n = s.minerror)
            }
            return {
                maxerror: t,
                maxminerror: n,
                maxindex: r,
                totalvalue: i
            }
        }
        function c(e, t, i, o) {
            if (void 0 === o && (o = 32),
                !isFinite(t) || !isFinite(i))
                return NaN;
            for (var c = [s(e, t, i)], l = a(c), u = 1; u < o && !(Math.abs(l.maxerror / l.totalvalue) <= 32 * g || l.maxerror <= 32 * g || l.maxerror <= 32 * l.maxminerror); u++) {
                var d = c[c.length - 1];
                c[c.length - 1] = c[l.maxindex],
                    c[l.maxindex] = d;
                var p = c.pop()
                    , h = r(e, n(p.x2, p.x1, .125), n(p.x1, p.x2, .125));
                c.push(s(e, p.x1, h)),
                    c.push(s(e, h, p.x2)),
                    l = a(c)
            }
            return l.totalvalue
        }
        var l = e("math/mathshim")
            , u = e("math/poi").default
            , d = u.bisectJump
            , p = u.bisectFinite
            , h = 3.154019550531224
            , f = Math.pow(2, -13)
            , m = f * f
            , g = m * m
            , y = m
            , v = 32
            , b = []
            , x = [];
        t(b, x);
        for (var w = 0, E = 0; E < x.length; E++)
            w += x[E];
        var _ = 1 / (1 + 2 * w);
        return {
            quad: c
        }
    }),
    define("math/studentt", ["require"], function (e) {
        var t = .5772156649015329
            , n = [-1.716185138865495, 24.76565080557592, -379.80425647094563, 629.3311553128184, 866.9662027904133, -31451.272968848367, -36144.413418691176, 66456.14382024054]
            , r = [-30.840230011973897, 315.35062697960416, -1015.1563674902192, -3107.771671572311, 22538.11842098015, 4755.846277527881, -134659.9598649693, -115132.25967555349]
            , i = function (e) {
                if (e <= 0)
                    throw new RangeError("Argument must be positive.");
                if (e < .001)
                    return 1 / (e * (1 + t * e));
                if (e < 12) {
                    var i = e
                        , o = 0
                        , s = i < 1;
                    s ? i += 1 : (o = Math.floor(i) - 1,
                        i -= o);
                    for (var c = 0, l = 1, u = i - 1, d = 0; d < 8; d++)
                        c = (c + n[d]) * u,
                            l = l * u + r[d];
                    var p = c / l + 1;
                    if (s)
                        p /= i - 1;
                    else
                        for (d = 0; d < o; d++)
                            p *= i++;
                    return p
                }
                return e > 171.624 ? 1 / 0 : Math.exp(a(e))
            }
            , o = [1 / 12, -1 / 360, 1 / 1260, -1 / 1680, 1 / 1188, -691 / 360360, 1 / 156, -3617 / 122400]
            , s = .9189385332046728
            , a = function (e) {
                if (e <= 0)
                    throw new RangeError("Argument must be positive.");
                if (e < 12)
                    return Math.log(Math.abs(i(e)));
                for (var t = 1 / (e * e), n = o[7], r = 6; r >= 0; r--)
                    n *= t,
                        n += o[r];
                var a = n / e;
                return (e - .5) * Math.log(e) - e + s + a
            }
            , c = function (e) {
                if (e <= -1)
                    throw new RangeError("Argument mustbe greater than -1.0");
                return Math.abs(e) > 1e-4 ? Math.log(1 + e) : (-.5 * e + 1) * e
            }
            , l = function (e, t, n) {
                if (e < 0 || e > 1)
                    throw new RangeError("First argument must be between 0 and 1.");
                if (1 === t && 1 === n)
                    return e;
                if (0 === e)
                    return 0;
                if (1 === e)
                    return 1;
                if (0 === t)
                    return 1;
                if (0 === n)
                    return 0;
                var r = Math.exp(a(t + n) - a(t) - a(n) + t * Math.log(e) + n * c(-e));
                return e < (t + 1) / (t + n + 2) ? r * u(e, t, n) / t : 1 - r * u(1 - e, n, t) / n
            }
            , u = function (e, t, n) {
                var r, i, o, s, a, c, l, u, d, p = 1e-30, h = 1;
                for (l = t + n,
                    d = t + 1,
                    u = t - 1,
                    o = 1,
                    s = 1 - l * e / d,
                    Math.abs(s) < p && (s = p),
                    s = 1 / s,
                    c = s; h <= 100 && (r = 2 * h,
                        i = h * (n - h) * e / ((u + r) * (t + r)),
                        s = 1 + i * s,
                        Math.abs(s) < p && (s = p),
                        o = 1 + i / o,
                        Math.abs(o) < p && (o = p),
                        s = 1 / s,
                        c *= s * o,
                        i = -(t + h) * (l + h) * e / ((t + r) * (d + r)),
                        s = 1 + i * s,
                        Math.abs(s) < p && (s = p),
                        o = 1 + i / o,
                        Math.abs(o) < p && (o = p),
                        s = 1 / s,
                        a = s * o,
                        c *= a,
                        !(Math.abs(a - 1) < 3e-7)); h++)
                    ;
                return c
            }
            , d = function (e, t) {
                var n = i((e + 1) / 2) / (Math.sqrt(e * Math.PI) * i(e / 2));
                return n * Math.pow(1 + t * t / e, -((e + 1) / 2))
            }
            , p = function (e, t) {
                var n = Math.sqrt(t * t + e);
                return l((t + n) / (2 * n), e / 2, e / 2)
            };
        return {
            cdf: p,
            pdf: d,
            gamma: i
        }
    }),
    define("math/tofraction", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            if (void 0 === t && (t = 1e6),
                e === 1 / 0)
                return {
                    n: 1 / 0,
                    d: 1
                };
            if (e === -(1 / 0))
                return {
                    n: -(1 / 0),
                    d: 1
                };
            if (!isFinite(e))
                return {
                    n: NaN,
                    d: 1
                };
            for (var n, r, i, o = 0, s = 1, a = 1, c = 0; ;) {
                if (n = Math.floor(e),
                    r = n * s + o,
                    i = n * c + a,
                    i > t)
                    break;
                if (o = s,
                    a = c,
                    s = r,
                    c = i,
                    e === n)
                    break;
                e = 1 / (e - n)
            }
            return {
                n: s,
                d: c
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = n
    }),
    define("math/builtin", ["require", "math/mathshim", "math/distance", "math/quadrature", "math/studentt", "math/tofraction"], function (e) {
        function t(e) {
            return !(e > 1e12) && Math.round(l * e) * Math.PI === e
        }
        function n(e) {
            if (e > 1e12)
                return !1;
            var t = Math.round(2 * l * e);
            return t % 2 === 1 && t * Math.PI === 2 * e
        }
        var r = e("math/mathshim")
            , i = e("math/distance")
            , o = e("math/quadrature")
            , s = e("math/studentt")
            , a = e("math/tofraction").default
            , c = {};
        c.cosh = r.cosh,
            c.sinh = r.sinh,
            c.tanh = r.tanh,
            c.acosh = r.acosh,
            c.asinh = r.asinh,
            c.atanh = r.atanh,
            c.expm1 = r.expm1,
            c.log1p = r.log1p,
            c.sqrtxsqp1 = r.sqrtxsqp1,
            c.sqrtxsqm1 = r.sqrtxsqm1,
            c.mod = function (e, t) {
                return e - t * Math.floor(e / t)
            }
            ,
            c.sign = Math.sign || function (e) {
                return 0 === e ? 0 : e > 0 ? 1 : e < 0 ? -1 : NaN
            }
            ,
            c.lcm = function (e, t) {
                e = Math.round(e),
                    t = Math.round(t);
                var n = c.gcd(e, t);
                return Math.abs(e * t / n)
            }
            ,
            c.gcd = function (e, t) {
                if (e = Math.round(e),
                    t = Math.round(t),
                    e < 0 && (e = -e),
                    t < 0 && (t = -t),
                    t > e) {
                    var n = t;
                    t = e,
                        e = n
                }
                if (0 === t)
                    return e;
                for (var r = e % t; r > 0;)
                    e = t,
                        t = r,
                        r = e % t;
                return t
            }
            ,
            c.listGCD = function (e) {
                if (0 === e.length)
                    return NaN;
                for (var t = e[0], n = 1; n < e.length; n++)
                    t = c.gcd(t, e[n]);
                return t
            }
            ,
            c.listLCM = function (e) {
                if (0 === e.length)
                    return NaN;
                for (var t = e[0], n = 1; n < e.length; n++)
                    t = c.lcm(t, e[n]);
                return t
            }
            ,
            c.nCr = function (e, t) {
                if (e = Math.round(e),
                    t = Math.round(t),
                    t > e || e < 0 || t < 0)
                    return 0;
                for (var n = 1, r = 0; r < t; r++)
                    n *= (e - r) / (r + 1);
                return n
            }
            ,
            c.nPr = function (e, t) {
                if (e = Math.round(e),
                    t = Math.round(t),
                    t > e || e < 0 || t < 0)
                    return 0;
                for (var n = 1, r = 0; r < t; r++)
                    n *= e - r;
                return n
            }
            ,
            c.factorial = function (e) {
                return c.gamma(e + 1)
            }
            ,
            c._integerFactorial = function (e) {
                if (e !== Math.floor(e))
                    return NaN;
                if (e < 0)
                    return NaN;
                if (e > 170)
                    return NaN;
                if (0 === e || 1 === e)
                    return 1;
                for (var t = 1, n = 2; n <= e; n++)
                    t *= n;
                return t
            }
            ,
            c.gamma = function (e) {
                return e === Math.floor(e) ? c._integerFactorial(e - 1) : e < 0 ? Math.PI / (Math.sin(Math.PI * e) * c.gamma(1 - e)) : Math.exp(c.lnGamma(e))
            }
            ,
            c.lnGamma = function (e) {
                if (e < 0)
                    return NaN;
                for (var t = [57.15623566586292, -59.59796035547549, 14.136097974741746, -.4919138160976202, 3399464998481189e-20, 4652362892704858e-20, -9837447530487956e-20, .0001580887032249125, -.00021026444172410488, .00021743961811521265, -.0001643181065367639, 8441822398385275e-20, -26190838401581408e-21, 36899182659531625e-22], n = .9999999999999971, r = 0; r < 14; r++)
                    n += t[r] / (e + r + 1);
                var i = e + 5.2421875;
                return (e + .5) * Math.log(i) - i + Math.log(2.5066282746310007 * n / e)
            }
            ,
            c.bernoulliTable = [1 / 6, -1 / 30, 1 / 42, -1 / 30, 5 / 66, -691 / 2730, 7 / 6, -3617 / 510, 43867 / 798, -174611 / 330, 854513 / 138, -236364091 / 2730, 8553103 / 6, -23749461029 / 870],
            c.cotDerivative = function (e, t) {
                if (e !== Math.floor(e))
                    return NaN;
                if (e < 0)
                    return NaN;
                if (0 === e)
                    return 1 / c.tan(t);
                var n = c.sin(t);
                if (1 === e)
                    return -1 / (n * n);
                var r = c.cos(t);
                if (2 === e)
                    return 2 * r / (n * n * n);
                var i, o, s, a, l, u = [0, 2];
                for (o = 3; o <= e; o++) {
                    for (i = [],
                        s = 0; s < o; s++)
                        a = 0,
                            l = 0,
                            s > 0 && (a = (o - s + 1) * u[s - 1]),
                            s + 2 < o && (l = (s + 1) * u[s + 1]),
                            i.push(-(a + l));
                    u = i
                }
                var d = 0;
                for (s = e - 1; s >= 0; s--)
                    d = i[s] + r * d;
                return d / Math.pow(n, e + 1)
            }
            ,
            c.polyGamma = function (e, t) {
                if (e < 0)
                    return NaN;
                if (e !== Math.floor(e))
                    return NaN;
                var n = e % 2 === 0 ? -1 : 1;
                if (t < 0)
                    return -n * c.polyGamma(e, 1 - t) - Math.pow(Math.PI, e + 1) * c.cotDerivative(e, Math.PI * t);
                for (var r = c.factorial(e), i = 0, o = Math.pow(t, -(e + 1)); t < 10;)
                    i += o,
                        t++ ,
                        o = Math.pow(t, -(e + 1));
                i += 0 === e ? -Math.log(t) : o * t / e,
                    i += .5 * o;
                for (var s = c.bernoulliTable, a = e + 1, l = 2, u = o * t * a / l, d = 1 / (t * t), p = 1; p <= 14; p++)
                    u *= d,
                        i += u * s[p - 1],
                        a++ ,
                        l++ ,
                        u *= a / l,
                        a++ ,
                        l++ ,
                        u *= a / l;
                return r * n * i
            }
            ,
            c.toFraction = a,
            c.log = function (e) {
                var t = Math.log(e);
                return Math.exp(Math.round(t)) === e ? Math.round(t) : t
            }
            ,
            c.log_base = function (e, t) {
                if (0 === t)
                    return NaN;
                var n = Math.log(e) / Math.log(t);
                return Math.pow(t, Math.round(n)) === e ? Math.round(n) : n
            }
            ,
            c.common_log = function (e) {
                return c.log_base(e, 10)
            }
            ,
            c.pow = function (e, t) {
                if (!isFinite(e) && 0 === t)
                    return NaN;
                if (e >= 0 || t === Math.floor(t))
                    return Math.pow(e, t);
                var n = c.toFraction(t, 100);
                return i.approx(n.n / n.d, t, 2) && n.d % 2 === 1 ? (n.n % 2 === 0 ? 1 : -1) * Math.pow(-e, t) : NaN;
            }
            ,
            c.nthroot = function (e, t) {
                return c.pow(e, 1 / t)
            }
            ;
        var l = 1 / Math.PI;
        return c.sin = function (e) {
            return t(Math.abs(e)) ? 0 : Math.sin(e)
        }
            ,
            c.cos = function (e) {
                return n(Math.abs(e)) ? 0 : Math.cos(e)
            }
            ,
            c.tan = function (e) {
                var r = Math.abs(e);
                return t(r) ? 0 : n(r) ? 1 / 0 : Math.tan(e)
            }
            ,
            c.sec = function (e) {
                return n(Math.abs(e)) ? 1 / 0 : 1 / Math.cos(e)
            }
            ,
            c.csc = function (e) {
                return t(Math.abs(e)) ? 1 / 0 : 1 / Math.sin(e)
            }
            ,
            c.cot = function (e) {
                var r = Math.abs(e);
                return t(r) ? 1 / 0 : n(r) ? 0 : 1 / Math.tan(e)
            }
            ,
            c.acot = function (e) {
                return Math.PI / 2 - Math.atan(e)
            }
            ,
            c.acsc = function (e) {
                return Math.asin(1 / e)
            }
            ,
            c.asec = function (e) {
                return Math.acos(1 / e)
            }
            ,
            c.sech = function (e) {
                return 1 / c.cosh(e)
            }
            ,
            c.csch = function (e) {
                return 1 / c.sinh(e)
            }
            ,
            c.coth = function (e) {
                return 1 / c.tanh(e)
            }
            ,
            c.asech = function (e) {
                return c.acosh(1 / e)
            }
            ,
            c.acsch = function (e) {
                return c.asinh(1 / e)
            }
            ,
            c.acoth = function (e) {
                return c.atanh(1 / e)
            }
            ,
            c.mean = function (e) {
                for (var t = 0, n = 0; n < e.length; n++)
                    t += e[n];
                return t / e.length
            }
            ,
            c.total = function (e) {
                for (var t = 0, n = 0; n < e.length; n++)
                    t += e[n];
                return t
            }
            ,
            c.tpdf = function (e, t) {
                return t !== Math.round(t) ? NaN : t <= 0 ? NaN : s.pdf(t, e)
            }
            ,
            c.tcdf = function (e, t) {
                return t !== Math.round(t) ? NaN : t <= 0 ? NaN : s.cdf(t, e)
            }
            ,
            c.normalcdf = function (e, t, n) {
                var r = (e - t) / (Math.SQRT2 * Math.abs(n));
                return r < 0 ? .5 * Math.exp(-r * r) * c.erfcx(-r) : 1 - .5 * Math.exp(-r * r) * c.erfcx(r)
            }
            ,
            c.normalpdf = function (e, t, n) {
                return 1 / Math.sqrt(2 * Math.PI * n * n) * Math.exp(-(e - t) * (e - t) / (2 * n * n))
            }
            ,
            c.binomcdf = function (e, t, n) {
                if (t !== Math.round(t) || e !== Math.round(e))
                    return NaN;
                if (n < 0 || n > 1)
                    return NaN;
                if (e < 0 || t < 0)
                    return 0;
                for (var r = n / (1 - n), i = Math.pow(1 - n, t), o = i, s = 1; s <= Math.min(t, e); s++)
                    i *= (t - s + 1) / s * r,
                        o += i;
                return o
            }
            ,
            c.binompdf = function (e, t, n) {
                return t !== Math.round(t) ? NaN : (e = Math.floor(e),
                    n < 0 || n > 1 ? NaN : e < 0 || t < 0 ? 0 : c.nCr(t, e) * Math.pow(n, e) * Math.pow(1 - n, t - e))
            }
            ,
            c.poissonpdf = function (e, t) {
                return t <= 0 ? NaN : e !== Math.round(e) ? NaN : e < 0 ? 0 : Math.exp(-t + e * Math.log(t) - c.lnGamma(e + 1))
            }
            ,
            c.poissoncdf = function (e, t) {
                if (t <= 0)
                    return NaN;
                if (e = Math.floor(e),
                    e < 0)
                    return 0;
                for (var n = 1, r = 1, i = 1; i <= e; i++)
                    n *= t / i,
                        r += n;
                return Math.exp(-t) * r
            }
            ,
            c.erf = function (e) {
                var t = -e * e;
                if (t < -750)
                    return e >= 0 ? 1 : -1;
                if (e >= .065)
                    return 1 - Math.exp(t) * c.erfcx(e);
                if (e <= -.065)
                    return Math.exp(t) * c.erfcx(-e) - 1;
                var n = 1.1283791670955126
                    , r = .37612638903183754
                    , i = .11283791670955126
                    , o = .026866170645131252
                    , s = .005223977625442188;
                return e * (n + t * (r + t * (i + t * (o + t * s))))
            }
            ,
            c.erfcx = function (e) {
                var t = .9999999999999999
                    , n = 2.224574423459406
                    , r = 2.444115549920689
                    , i = 1.7057986861852539
                    , o = .8257463703357973
                    , s = .28647031042892007
                    , a = .07124513844341643
                    , l = .012296749268608364
                    , u = .001347817214557592
                    , d = 7263959403471071e-20
                    , p = 1
                    , h = 3.352953590554884
                    , f = 5.227518529742423
                    , m = 5.003720878235473
                    , g = 3.266590890998987
                    , y = 1.5255421920765353
                    , v = .5185887413188858
                    , b = .12747319185915415
                    , x = .02185979575963238
                    , w = .0023889438122503674
                    , E = .00012875032817508128;
                if (e < 0)
                    return e < -6.1 ? 2 * Math.exp(e * e) : 2 * Math.exp(e * e) - c.erfcx(-e);
                if (e > 50) {
                    var _ = .5641895835477563
                        , S = e * e;
                    return e > 5e7 ? _ / e : _ * (S * (S + 4.5) + 2) / (e * (S * (S + 5) + 3.75))
                }
                var k = t + e * (n + e * (r + e * (i + e * (o + e * (s + e * (a + e * (l + e * (u + e * d))))))))
                    , M = p + e * (h + e * (f + e * (m + e * (g + e * (y + e * (v + e * (b + e * (x + e * (w + e * E)))))))));
                return k / M
            }
            ,
            c.invNorm = function (e) {
                var t, n, r, i = -39.6968302866538, o = 220.946098424521, s = -275.928510446969, a = 138.357751867269, l = -30.6647980661472, u = 2.50662827745924, d = -54.4760987982241, p = 161.585836858041, h = -155.698979859887, f = 66.8013118877197, m = -13.2806815528857, g = -.00778489400243029, y = -.322396458041136, v = -2.40075827716184, b = -2.54973253934373, x = 4.37466414146497, w = 2.93816398269878, E = .00778469570904146, _ = .32246712907004, S = 2.445134137143, k = 3.75440866190742, M = .02425;
                return e > .5 ? -c.invNorm(1 - e) : .5 === e ? 0 : e < 0 ? NaN : 0 === e ? -(1 / 0) : (e < M ? (t = Math.sqrt(-2 * Math.log(e)),
                    r = (((((g * t + y) * t + v) * t + b) * t + x) * t + w) / ((((E * t + _) * t + S) * t + k) * t + 1)) : (t = e - .5,
                        n = t * t,
                        r = (((((i * n + o) * n + s) * n + a) * n + l) * n + u) * t / (((((d * n + p) * n + h) * n + f) * n + m) * n + 1)),
                    r - Math.sqrt(2 * Math.PI) * (.5 * c.erfcx(-r / Math.SQRT2) - Math.exp(.5 * r * r) * e))
            }
            ,
            c.TScore = function (e, t) {
                var n = c.stdev(e)
                    , r = c.mean(e);
                return (r - t) * Math.sqrt(e.length) / n
            }
            ,
            c.TTest = function (e, t) {
                return c.tcdf(c.TScore(e, t), e.length - 1)
            }
            ,
            c.length = function (e) {
                return e.length
            }
            ,
            c.listMin = function (e) {
                if (e.length < 1)
                    return NaN;
                var t = e[0];
                if (isNaN(t))
                    return NaN;
                for (var n = 1; n < e.length; n++) {
                    if (isNaN(e[n]))
                        return NaN;
                    e[n] < t && (t = e[n])
                }
                return t
            }
            ,
            c.listMax = function (e) {
                if (e.length < 1)
                    return NaN;
                var t = e[0];
                if (isNaN(t))
                    return NaN;
                for (var n = 1; n < e.length; n++) {
                    if (isNaN(e[n]))
                        return NaN;
                    e[n] >= t && (t = e[n])
                }
                return t
            }
            ,
            c.quantile = function (e, t) {
                if (!isFinite(t) || t < 0 || t > 1)
                    return NaN;
                var n = e.length
                    , r = c.sortPerm(e)
                    , i = t * (n - 1);
                return Math.floor(i) === i ? e[r[i]] : (Math.ceil(i) - i) * e[r[Math.floor(i)]] + (i - Math.floor(i)) * e[r[Math.ceil(i)]]
            }
            ,
            c.quartile = function (e, t) {
                if (!isFinite(t) || t < 0 || t > 4)
                    return NaN;
                var n = c.sortPerm(e)
                    , r = c.quartileIndex(e, t)
                    , i = Math.floor(r)
                    , o = Math.ceil(r);
                return (e[n[i]] + e[n[o]]) / 2
            }
            ,
            c.sortPerm = function (e) {
                for (var t = e.length, n = [], r = 0; r < t; r++)
                    n.push(r);
                return n.sort(function (t, n) {
                    return e[t] - e[n]
                }),
                    n
            }
            ,
            c.quartileIndex = function (e, t) {
                t = Math.round(t);
                var n, r = e.length, i = r % 2 === 1;
                return 1 === r ? 0 : (0 === t && (n = 0),
                    2 === t && (n = (r - 1) / 2),
                    4 === t && (n = r - 1),
                    1 === t && (n = i ? (r + 1) / 4 - 1 : (r + 2) / 4 - 1),
                    3 === t && (n = i ? (3 * r + 3) / 4 - 1 : (3 * r + 2) / 4 - 1),
                    n)
            }
            ,
            c.upperQuantileIndex = function (e, t) {
                return c.sortPerm(e)[Math.ceil(t * (e.length - 1))] + 1
            }
            ,
            c.lowerQuantileIndex = function (e, t) {
                return c.sortPerm(e)[Math.floor(t * (e.length - 1))] + 1
            }
            ,
            c.upperQuartileIndex = function (e, t) {
                return c.sortPerm(e)[Math.ceil(c.quartileIndex(e, t))] + 1
            }
            ,
            c.lowerQuartileIndex = function (e, t) {
                return c.sortPerm(e)[Math.floor(c.quartileIndex(e, t))] + 1
            }
            ,
            c.median = function (e) {
                return c.quantile(e, .5)
            }
            ,
            c.argMin = function (e) {
                if (e.length < 1)
                    return 0;
                var t = e[0];
                if (isNaN(t))
                    return 0;
                for (var n = 0, r = 1; r < e.length; r++) {
                    if (isNaN(e[r]))
                        return 0;
                    e[r] < t && (n = r,
                        t = e[r])
                }
                return n + 1
            }
            ,
            c.argMax = function (e) {
                if (e.length < 1)
                    return 0;
                var t = e[0];
                if (isNaN(t))
                    return 0;
                for (var n = 0, r = 1; r < e.length; r++)
                    if (e[r] >= t) {
                        if (isNaN(e[r]))
                            return 0;
                        n = r,
                            t = e[r]
                    }
                return n + 1
            }
            ,
            c.varp = function (e) {
                for (var t = c.mean(e), n = 0, r = 0; r < e.length; r++) {
                    var i = e[r] - t;
                    n += i * i
                }
                return n / e.length
            }
            ,
            c.mad = function (e) {
                for (var t = c.mean(e), n = 0, r = 0; r < e.length; r++)
                    n += Math.abs(e[r] - t);
                return n / e.length
            }
            ,
            c.var = function (e) {
                var t = e.length;
                return c.varp(e) * t / (t - 1)
            }
            ,
            c.covp = function (e, t) {
                if (e.length !== t.length)
                    return NaN;
                for (var n = e.length, r = c.mean(e), i = c.mean(t), o = 0, s = 0; s < n; s++)
                    o += (e[s] - r) * (t[s] - i);
                return o / n
            }
            ,
            c.cov = function (e, t) {
                if (e.length !== t.length)
                    return NaN;
                var n = e.length;
                return c.covp(e, t) * n / (n - 1)
            }
            ,
            c.corr = function (e, t) {
                if (e.length !== t.length)
                    return NaN;
                for (var n, r, i = e.length, o = c.mean(e), s = c.mean(t), a = 0, l = 0, u = 0, d = 0; d < i; d++)
                    n = e[d] - o,
                        r = t[d] - s,
                        a += n * n,
                        l += r * r,
                        u += n * r;
                return u / Math.sqrt(a * l)
            }
            ,
            c.stdev = function (e) {
                return Math.sqrt(c.var(e))
            }
            ,
            c.stdevp = function (e) {
                return Math.sqrt(c.varp(e))
            }
            ,
            c.quad = o.quad,
            c.distance = function (e, t) {
                return i.hypot(t[0] - e[0], t[1] - e[1])
            }
            ,
            c.midpoint = function (e, t) {
                return [.5 * (e[0] + t[0]), .5 * (e[1] + t[1])]
            }
            ,
            c
    }),
    define("math/functions", ["require", "math/builtin"], function (e) {
        function t(e) {
            for (var t = 0; t < e.length; t++)
                e[t].compiled && delete e[t].compiled.fn
        }
        function n(e) {
            for (var t = 0; t < e.length; t++) {
                var n = e[t].compiled;
                n && (n.fn = i(n.args, n.source))
            }
        }
        function r(e, t) {
            for (var n = [], r = 0; r < t; r++)
                n.push("values[" + r + "]");
            return i(["values"], "return " + e(n))
        }
        function i(e, t) {
            var n = e.join(",")
                , r = "return (function(" + n + "){" + t + "})"
                , i = new Function(["BuiltIn"], r);
            return i(o)
        }
        var o = e("math/builtin");
        return {
            dehydrateGraphData: t,
            rehydrateGraphData: n,
            closureFunctionWithBuiltIn: i,
            createEvaluateFunction: r
        }
    }),
    define("text!worker_src_underlying", [], function () {
        return 'var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function r(e,t){var r,n,i,a,s,o,u,c,l,p,f=t&&t.split("/"),h=d.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if(p=e[c],"."===p)e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(i=h[f.slice(0,l).join("/")],i&&(i=i[n])){a=i,s=c;break}if(a)break;!o&&m&&m[n]&&(o=m[n],u=c)}!a&&o&&(a=o,s=u),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){h[e]=t}}function s(r){if(t(m,r)){var n=m[r];delete m[r],g[r]=!0,c.apply(e,n)}if(!t(h,r)&&!t(g,r))throw new Error("No "+r);return h[r]}function o(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return d&&d.config&&d.config[e]||{}}}var c,l,p,f,h={},m={},d={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;p=function(e,t){var n,a=o(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=s(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=o(e),u=a[0],e=a[1],u&&(n=s(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:u(e)}}},c=function(r,i,o,u){var c,l,d,y,v,b,x=[];if(u=u||r,"function"==typeof o){for(i=!i.length&&o.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=p(i[v],u),l=y.f,"require"===l)x[v]=f.require(r);else if("exports"===l)x[v]=f.exports(r),b=!0;else if("module"===l)c=x[v]=f.module(r);else if(t(h,l)||t(m,l)||t(g,l))x[v]=s(l);else{if(!y.p)throw new Error(r+" missing "+l);y.p.load(y.n,n(u,!0),a(l),{}),x[v]=h[l]}d=o.apply(h[r],x),r&&(c&&c.exports!==e&&c.exports!==h[r]?h[r]=c.exports:d===e&&b||(h[r]=d))}else r&&(h[r]=o)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?f[t]?f[t](r):s(p(t,r).f):(t.splice||(d=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return d=e,d.deps&&l(d.deps,d.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(h,e)||t(m,e)||(m[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){function t(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);e.apply(window.console,[].concat([t.join(" ")],t))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&t()}catch(e){}}};return r}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("pjs",[],function(){var e=function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function s(o,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=o,o=Object),c.Bare=l;var p,f=a[e]=o[e],h=l[e]=c[e]=new a;return h.constructor=c,c.mixin=function(t){return l[e]=c[e]=s(c,t)[e],c},(c.open=function(e){if(p={},i(e)?p=e.call(c,h,f,c,o):n(e)&&(p=e),n(p))for(var r in p)t.call(p,r)&&(h[r]=p[r]);return i(h.init)||(h.init=o),c})(u)}return s}("prototype",{}.hasOwnProperty);return e}),function(){function e(e){function t(t,r,n,i,a,s){for(;a>=0&&a<s;a+=e){var o=i?i[a]:a;n=r(n,t[o],o,t)}return n}return function(r,n,i,a){n=b(n,a,4);var s=!T(r)&&v.keys(r),o=(s||r).length,u=e>0?0:o-1;return arguments.length<3&&(i=r[s?s[u]:u],u+=e),t(r,n,i,s,u,o)}}function t(e){return function(t,r,n){r=x(r,n);for(var i=M(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(r(t[a],a,t))return a;return-1}}function r(e,t,r){return function(n,i,a){var s=0,o=M(n);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(r&&a&&o)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(l.call(n,s,o),v.isNaN),a>=0?a+s:-1;for(a=e>0?s:o-1;a>=0&&a<o;a+=e)if(n[a]===i)return a;return-1}}function n(e,t){var r=N.length,n=e.constructor,i=v.isFunction(n)&&n.prototype||o,a="constructor";for(v.has(e,a)&&!v.contains(t,a)&&t.push(a);r--;)a=N[r],a in e&&e[a]!==i[a]&&!v.contains(t,a)&&t.push(a)}var i=this,a=i._,s=Array.prototype,o=Object.prototype,u=Function.prototype,c=s.push,l=s.slice,p=o.toString,f=o.hasOwnProperty,h=Array.isArray,m=Object.keys,d=u.bind,g=Object.create,y=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},x=function(e,t,r){return null==e?v.identity:v.isFunction(e)?b(e,t,r):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var a=arguments[i],s=e(a),o=s.length,u=0;u<o;u++){var c=s[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}},w=function(e){if(!v.isObject(e))return{};if(g)return g(e);y.prototype=e;var t=new y;return y.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,M=S("length"),T=function(e){var t=M(e);return"number"==typeof t&&t>=0&&t<=E};v.each=v.forEach=function(e,t,r){t=b(t,r);var n,i;if(T(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var a=v.keys(e);for(n=0,i=a.length;n<i;n++)t(e[a[n]],a[n],e)}return e},v.map=v.collect=function(e,t,r){t=x(t,r);for(var n=!T(e)&&v.keys(e),i=(n||e).length,a=Array(i),s=0;s<i;s++){var o=n?n[s]:s;a[s]=t(e[o],o,e)}return a},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,r){var n;if(n=T(e)?v.findIndex(e,t,r):v.findKey(e,t,r),void 0!==n&&n!==-1)return e[n]},v.filter=v.select=function(e,t,r){var n=[];return t=x(t,r),v.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},v.reject=function(e,t,r){return v.filter(e,v.negate(x(t)),r)},v.every=v.all=function(e,t,r){t=x(t,r);for(var n=!T(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var s=n?n[a]:a;if(!t(e[s],s,e))return!1}return!0},v.some=v.any=function(e,t,r){t=x(t,r);for(var n=!T(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var s=n?n[a]:a;if(t(e[s],s,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,r,n){return T(e)||(e=v.values(e)),("number"!=typeof r||n)&&(r=0),v.indexOf(e,t,r)>=0},v.invoke=function(e,t){var r=l.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,r){var n,i,a=-(1/0),s=-(1/0);if(null==t&&null!=e){e=T(e)?e:v.values(e);for(var o=0,u=e.length;o<u;o++)n=e[o],n>a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(i>s||i===-(1/0)&&a===-(1/0))&&(a=e,s=i)});return a},v.min=function(e,t,r){var n,i,a=1/0,s=1/0;if(null==t&&null!=e){e=T(e)?e:v.values(e);for(var o=0,u=e.length;o<u;o++)n=e[o],n<a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(i<s||i===1/0&&a===1/0)&&(a=e,s=i)});return a},v.shuffle=function(e){for(var t,r=T(e)?e:v.values(e),n=r.length,i=Array(n),a=0;a<n;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},v.sample=function(e,t,r){return null==t||r?(T(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,r){return t=x(t,r),v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,r,n){var i={};return r=x(r,n),v.each(t,function(n,a){var s=r(n,a,t);e(i,n,s)}),i}};v.groupBy=P(function(e,t,r){v.has(e,r)?e[r].push(t):e[r]=[t]}),v.indexBy=P(function(e,t,r){e[r]=t}),v.countBy=P(function(e,t,r){v.has(e,r)?e[r]++:e[r]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):T(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:T(e)?e.length:v.keys(e).length},v.partition=function(e,t,r){t=x(t,r);var n=[],i=[];return v.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},v.first=v.head=v.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},v.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var I=function(e,t,r,n){for(var i=[],a=0,s=n||0,o=M(e);s<o;s++){var u=e[s];if(T(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=I(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[a++]=u[c++]}else r||(i[a++]=u)}return i};v.flatten=function(e,t){return I(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,r,n){v.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=x(r,n));for(var i=[],a=[],s=0,o=M(e);s<o;s++){var u=e[s],c=r?r(u,s,e):u;t?(s&&a===c||i.push(u),a=c):r?v.contains(a,c)||(a.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(I(arguments,!0,!0))},v.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=M(e);n<i;n++){var a=e[n];if(!v.contains(t,a)){for(var s=1;s<r&&v.contains(arguments[s],a);s++);s===r&&t.push(a)}}return t},v.difference=function(e){var t=I(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,M).length||0,r=Array(t),n=0;n<t;n++)r[n]=v.pluck(e,n);return r},v.object=function(e,t){for(var r={},n=0,i=M(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,r,n){r=x(r,n,1);for(var i=r(t),a=0,s=M(e);a<s;){var o=Math.floor((a+s)/2);r(e[o])<i?a=o+1:s=o}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;a<n;a++,e+=r)i[a]=e;return i};var D=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=w(e.prototype),s=e.apply(a,i);return v.isObject(s)?s:a};v.bind=function(e,t){if(d&&e.bind===d)return d.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return D(e,n,t,this,r.concat(l.call(arguments)))};return n},v.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),s=0;s<i;s++)a[s]=t[s]===v?arguments[n++]:t[s];for(;n<arguments.length;)a.push(arguments[n++]);return D(e,r,this,this,a)};return r},v.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=v.bind(e[r],e);return e},v.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,r){var n,i,a,s=null,o=0;r||(r={});var u=function(){o=r.leading===!1?0:v.now(),s=null,a=e.apply(n,i),s||(n=i=null)};return function(){var c=v.now();o||r.leading!==!1||(o=c);var l=t-(c-o);return n=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),o=c,a=e.apply(n,i),s||(n=i=null)):s||r.trailing===!1||(s=setTimeout(u,l)),a}},v.debounce=function(e,t,r){var n,i,a,s,o,u=function(){var c=v.now()-s;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(o=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,s=v.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(o=e.apply(a,i),a=i=null),o}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},v.once=v.partial(v.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(m)return m(e);var t=[];for(var r in e)v.has(e,r)&&t.push(r);return C&&n(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);return C&&n(e,t),t},v.values=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},v.mapObject=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=i.length,s={},o=0;o<a;o++)n=i[o],s[n]=t(e[n],n,e);return s},v.pairs=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},v.invert=function(e){for(var t={},r=v.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},v.functions=v.methods=function(e){var t=[];for(var r in e)v.isFunction(e[r])&&t.push(r);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=0,s=i.length;a<s;a++)if(n=i[a],t(e[n],n,e))return n},v.pick=function(e,t,r){var n,i,a={},s=e;if(null==s)return a;v.isFunction(t)?(i=v.allKeys(s),n=b(t,r)):(i=I(arguments,!1,!1,1),n=function(e,t,r){return t in r},s=Object(s));for(var o=0,u=i.length;o<u;o++){var c=i[o],l=s[c];n(l,c,s)&&(a[c]=l)}return a},v.omit=function(e,t,r){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(I(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var r=w(e);return t&&v.extendOwn(r,t),r},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;a<n;a++){var s=r[a];if(t[s]!==i[s]||!(s in i))return!1}return!0};var O=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!O(e[u],t[u],r,n))return!1}else{var c,l=v.keys(e);if(u=l.length,v.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!v.has(t,c)||!O(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};v.isEqual=function(e,t){return O(e,t)},v.isEmpty=function(e){return null==e||(T(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===p.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return i._=a,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=S,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var A={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},L=v.invert(A),q=function(e){var t=function(t){return e[t]},r="(?:"+v.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};v.escape=q(A),v.unescape=q(L),v.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),v.isFunction(n)?n.call(e):n};var k=0;v.uniqueId=function(e){var t=++k+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var F=/(.)^/,j={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},V=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,B=function(e){return"\\\\"+j[e]};v.template=function(e,t,r){!t&&r&&(t=r),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),i=0,a="__p+=\'";e.replace(n,function(t,r,n,s,o){return a+=e.slice(i,o).replace(V,B),i=o+t.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":n?a+="\'+\\n((__t=("+n+"))==null?\'\':__t)+\\n\'":s&&(a+="\';\\n"+s+"\\n__p+=\'"),t}),a+="\';\\n",t.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{var s=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var o=function(e){return s.call(this,e,v)},u=t.variable||"obj";return o.source="function("+u+"){\\n"+a+"}",o},v.chain=function(e){var t=v(e);return t._chain=!0,t};var R=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),R(this,r.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],R(this,r)}}),v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),define("math/distance",["require","exports"],function(e,t){"use strict";function r(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function n(e,t,r,n){return e*r+t*n}function i(e,r,i,a,s,o){var u=t.hypot(s-i,o-a);if(0===u)return 0;var c=n((e-i)/u,(r-a)/u,(s-i)/u,(o-a)/u);return c}function a(e,t,r,n,a,s){var o=i(e,t,r,n,a,s);return o<=0?[r,n]:o>=1?[a,s]:[r+o*(a-r),n+o*(s-n)]}function s(e,r,n,i,s,o){var u=a(e,r,n,i,s,o);return t.hypot(e-u[0],r-u[1])}function o(e,t,r){if(void 0===r&&(r=1),r>50)throw new Error("Within "+(52-r)+" bits isn\'t really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=1===r?.5:Math.pow(.5,r);return n===n+i*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hypot=Math.hypot||function(e,t){if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}var r=e/t;return Math.abs(t)*Math.sqrt(r*r+1)},t.mean=r,t.pointToSegmentParameter=i,t.closestPointOnSegment=a,t.pointToSegment=s,t.approx=o}),define("lib/console",["require","exports","console"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=r.log,t.warn=r.warn}),define("math/poi",["require","exports","./distance","lib/console"],function(e,t,r,n){"use strict";function i(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,a=t>0,s=Math.abs(e)>.01,o=Math.abs(t)>.01;if(s||o)return r.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==a)return 0;var u=i?Math.sqrt(e*t):-Math.sqrt(e*t);return u>=e&&t>=u?u:r.mean(e,t)}function a(e,t,r,a,o){if(!isFinite(t)||!isFinite(a)||t<0==a<0)return void n.log("bisectZero called with bad y values",[t,a]);for(;;){var u=i(e,r),c=o(u);if(!isFinite(c))return;if(u===e||u===r)return Math.abs(t)<=Math.abs(a)?[e,t]:[r,a];if(0===c)return s(e,t,u,c,r,a,o);t<0!=c<0?(r=u,a=c):(e=u,t=c)}}function s(e,t,r,n,a,s,c){var l;if(isFinite(n)){isFinite(t)||(l=o(e,t,r,n,c),l&&(e=l[0],t=l[1])),isFinite(s)||(l=o(r,n,a,s,c),l&&(a=l[0],s=l[1]));var p,f;p=t===n?[e,t]:u(e,t,r,n,c,n),f=s===n?[a,s]:u(r,n,a,s,c,n);var h;return p&&f&&(h=i(p[0],f[0])),void 0!==h?[h,c(h)]:void 0}}function o(e,t,r,a,s){if(isFinite(t)===isFinite(a))return void n.log("bisectFinite called with bad y values",[t,a]);for(;;){var o=i(e,r),u=s(o);if(o===e||o===r)return isFinite(t)?[e,t]:[r,a];isFinite(u)!==isFinite(t)?(r=o,a=u):(e=o,t=u)}}function u(e,t,r,a,s,o){if(t===o==(a===o))return void n.log("bisectConstant called with bad y values",[t,a,o]);for(;;){var u=i(e,r),c=s(u);if(u===e||u===r)return t===o?[e,t]:[r,a];c===o!=(t===o)?(r=u,a=c):(e=u,t=c)}}function c(e,t,r,a,o,u,c){if(!(e<r&&r<o))return void n.log("bisectExtremum called with bad x values",[e,r,o]);if(!(isFinite(t)&&isFinite(a)&&isFinite(u)&&t!==a&&a!==u&&a>t==a>u))return void n.log("bisectExtremum called with bad y values",[t,a,u]);for(;;){var l=i(e,r),p=c(l),f=i(r,o),h=c(f);if(!isFinite(p)||!isFinite(h))return;if(l===e||l===r||f===r||f===o)return p>a==a>t?[l,p]:h>a==a>t?[f,h]:[r,a];if(p===a||h===a)return s(e,t,r,a,o,u,c);p>t==a>t&&p>t==p>a?(o=r,u=a,r=l,a=p):h>u==a>u&&h>a==h>u?(e=r,t=a,r=f,a=h):(e=l,t=p,o=f,u=h)}}function l(e,t,r,n,i,a,s,o){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(o-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[s,o]]:[[r,n],[i,a]]}function p(e,t,n,a,s,u,c,p){if(p||(p=0),!((n-e)*(s-n)<=0)&&isFinite(e)&&isFinite(n)&&isFinite(s)&&isFinite(t)&&isFinite(u)){if(!isFinite(a))return[o(e,t,n,a,c),o(n,a,s,u,c)];if(!(Math.abs(a-((s-n)*t+(n-e)*u)/(s-e))<p))for(;;){var f=i(e,n),h=c(f),m=i(n,s),d=c(m),g=Math.abs(h-r.mean(t,a)),y=Math.abs(a-r.mean(h,d)),v=Math.abs(d-r.mean(a,u)),b=void 0,x=void 0;if(g<=p&&y<=p&&v<=p)return;if(!isFinite(h))return b=o(e,t,f,h,c),x=o(f,h,s,u,c),[b,x];if(!isFinite(d))return b=o(e,t,m,d,c),x=o(m,d,s,u,c),[b,x];if(!(f!==e&&f!==n||m!==n&&m!==s))return Math.abs(a-t)>Math.abs(u-a)?(b=[e,t],x=[n,a]):(b=[n,a],x=[s,u]),[b,x];if(f===e||f===n)return l(e,t,n,a,m,d,s,u);if(m===n||m===s)return l(e,t,f,h,n,a,s,u);g>v&&g>=y?(s=n,u=a,n=f,a=h):v>g&&v>=y?(e=n,t=a,n=m,a=d):(e=f,t=h,s=m,u=d)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={bisectJump:p,bisectExtremum:c,bisectFinite:o,bisectZero:a,flatCenter:s,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006,TRACE:1007,LABEL:1008}}),define("math/curve-accumulator",["require","exports","./distance"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,n){this.map&&(e=this.map(e),t=this.map(t),n=this.map(n));var i=r.pointToSegmentParameter(n[0],n[1],e[0],e[1],t[0],t[1]);if(i<1)return!1;var a=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1])];return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance},e.prototype.addPoint=function(e){if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);if(!this.segment.length)return void this.segment.push(e[0],e[1]);var t=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||r.hypot(t[0]-e[0],t[1]-e[1])<r.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>2&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.default=n}),define("math/implicit-plotter",["require","exports","./distance","./curve-accumulator"],function(e,t,r,n){"use strict";function i(e,t){var r=a(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function a(e,t){var r=Math.pow(2,-Y),n=c(t,r),i=c(t,2*r),a=f(e,n,i),s=I(a.root,e,n),o=R(s,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:s,contours:o}}function s(e,t,r){return{x:e,y:t,z:r}}function o(e,t,r){return{x:e,y:t,isZero:r}}function u(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function c(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin,i=(1+t)*e.ymin-t*e.ymax,a=(1+t)*e.ymax-t*e.ymin;return{xmin:r,ymin:i,xmax:n,ymax:a,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function p(e,t,r){e.center=E(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function f(e,t,r){var n=h(e,r),i=[],a=[];a.push(n);var s=1,o=!0;e:for(;a.length;){var u=i;i=a,a=u;for(var c=void 0;c=i.pop();)if(d(c,e,t)){if(m(c,e),!c.children){o=!1;break e}if(a.push(c.children[0]),a.push(c.children[1]),a.push(c.children[2]),a.push(c.children[3]),s+=3,s>=X){o=!1;break e}}else p(c,e,t)}for(var l=0;l<i.length;l++)p(i[l],e,t);for(var l=0;l<a.length;l++)p(a[l],e,t);return{root:n,resolved:o}}function h(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return l(0,[_(r,a,e),_(n,a,e),_(n,i,e),_(r,i,e)])}function m(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],s=e.vertices[3],o=w(n,i,t),u=w(i,a,t),c=w(a,s,t),p=w(s,n,t),f=w(n,a,t);e.children=[l(r,[n,o,f,p]),l(r,[o,i,u,f]),l(r,[f,u,a,c]),l(r,[p,f,c,s])]}function d(e,t,r){if(e.depth<Y)return!0;if(b(e,r))return!1;if(v(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],s=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(s.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(s.z))return!0;var o=E(n,i,a,s,t,r),u=S(n,i,t,r),c=S(i,a,t,r),l=S(a,s,t,r),p=S(s,n,t,r);return y(n,u,t)||y(i,u,t)||y(i,c,t)||y(a,c,t)||y(a,l,t)||y(s,l,t)||y(s,p,t)||y(n,p,t)||g(n,u,o,t,r)||g(u,i,o,t,r)||g(i,c,o,t,r)||g(c,a,o,t,r)||g(a,l,o,t,r)||g(l,s,o,t,r)||g(s,p,o,t,r)||g(p,n,o,t,r)}function g(e,t,n,i,a){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var s,o,u,c;if(e.z>0==t.z>0){if(s=w(e,t,i),s.z>0!=e.z>0)return!0;o=T(e,n,i,a),u=T(t,n,i,a),c=T(s,n,i,a)}else if(t.z>0==n.z>0){if(s=w(t,n,i),s.z>0!=t.z>0)return!0;o=T(t,e,i,a),u=T(n,e,i,a),c=T(s,e,i,a)}else{if(s=w(n,e,i),s.z>0!=n.z>0)return!0;o=T(n,t,i,a),u=T(e,t,i,a),c=T(s,t,i,a)}var l=a.xtolerance,p=a.ytolerance,f=r.pointToSegment(p*c.x,l*c.y,p*o.x,l*o.y,p*u.x,l*u.y);return f>l*p}function y(e,t,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var n=w(e,t,r),i=4*n.z-t.z-3*e.z,a=1e-4,s=(r((1-a)*e.x+a*t.x,(1-a)*e.y+a*t.y)-e.z)/a,o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-s)>.125*o}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,r){return s(e,t,r(e,t))}function w(e,t,r){return _(.5*(e.x+t.x),.5*(e.y+t.y),r)}function S(e,t,r,n){if(x(e,n)||x(t,n))return w(e,t,r);if(isNaN(e.z)||isNaN(t.z))return P(e,t,r,n);if(e.z>0!=t.z>0)return w(e,t,r);var i=.01,a=r((1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y)-e.z,o=t.z-r(i*e.x+(1-i)*t.x,i*e.y+(1-i)*t.y);return isNaN(a)||isNaN(o)?w(e,t,r):a>0==o>0?w(e,t,r):M(s(e.x,e.y,a),s(t.x,t.y,o),r)}function E(e,t,r,n,i,a){var s=S(e,r,i,a);return e.z>0==r.z>0&&s.z>0!=e.z>0?s:(s=S(t,n,i,a),t.z>0==n.z>0&&s.z>0!=t.z>0?s:w(e,r,i))}function M(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return w(e,t,r)}function T(e,t,r,n){var i=e.x,a=t.x,u=e.y,c=t.y,l=e.z,p=t.z,f=n.xtolerance,h=n.ytolerance;if(x(e,n)||x(t,n)){var m=w(e,t,r);return o(m.x,m.y,!1)}for(;Math.abs(i-a)>f||Math.abs(u-c)>h;){var d=.5*(i+a),g=.5*(u+c),y=r(d,g);y>0==l>0?(i=d,u=g,l=y):(a=d,c=g,p=y)}if(isNaN(l))return o(a,c,!1);if(isNaN(p))return o(i,u,!1);var v=M(s(i,u,l),s(a,c,p),r),b=0===l||0===p||0===v.z||v.z>=l==p>=v.z&&Math.abs(v.z)<1e250;return o(v.x,v.y,b)}function P(e,t,r,n){if(isNaN(e.z)===isNaN(t.z))return w(e,t,r);if(isNaN(e.z)){var i=e;e=t,t=i}for(var a=e.x,o=t.x,u=e.y,c=t.y,l=e.z,p=n.xtolerance,f=n.ytolerance;Math.abs(a-o)>p||Math.abs(u-c)>f;){var h=.5*(a+o),m=.5*(u+c),d=r(h,m);isNaN(d)===isNaN(l)?(a=h,u=m,l=d):(o=h,c=m)}return s(a,u,l)}function I(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return D(e,n),n.triangles}function D(e,t){e.children&&(D(e.children[0],t),D(e.children[1],t),D(e.children[2],t),D(e.children[3],t),C(e.children[0],e.children[1],t),C(e.children[3],e.children[2],t),N(e.children[1],e.children[2],t),N(e.children[0],e.children[3],t))}function C(e,t,r){e.children&&t.children?(C(e.children[1],t.children[0],r),C(e.children[2],t.children[3],r)):e.children?(C(e.children[1],t,r),C(e.children[2],t,r)):t.children?(C(e,t.children[0],r),C(e,t.children[3],r)):O(e,t,r)}function N(e,t,r){e.children&&t.children?(N(e.children[2],t.children[1],r),N(e.children[3],t.children[0],r)):e.children?(N(e.children[2],t,r),N(e.children[3],t,r)):t.children?(N(e,t.children[1],r),N(e,t.children[0],r)):A(e,t,r)}function O(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=S(e.vertices[1],e.vertices[2],r.fn,r.domain),i=L(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=S(t.vertices[0],t.vertices[3],r.fn,r.domain),i=L(t.vertices[0],t.center,t.vertices[3],e.center,n)),\nF(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function A(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=S(e.vertices[3],e.vertices[2],r.fn,r.domain),i=L(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=S(t.vertices[1],t.vertices[0],r.fn,r.domain),i=L(t.vertices[1],t.center,t.vertices[0],e.center,n)),F(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function L(e,t,r,n,i){return[u(e,i,t),u(t,i,r),u(r,i,n),u(n,i,e)]}function q(e,t,r){return e.z>0&&!x(e,r)&&(!(t.z>0)||x(t,r))}function k(e,t){return""+e.x+","+e.y+","+t.x+","+t.y}function F(e,t,r){j(e[0],e[1],e[2],k(e[1].vertices[2],e[1].vertices[0]),t,r),j(e[1],e[2],e[3],k(e[2].vertices[0],e[2].vertices[2]),t,r),j(e[2],e[3],e[0],k(e[3].vertices[2],e[3].vertices[0]),t,r),j(e[3],e[0],e[1],k(e[0].vertices[0],e[0].vertices[2]),t,r)}function j(e,t,r,n,i,a){var s=t.vertices[0],o=t.vertices[1],u=t.vertices[2];q(o,u,a)&&(t.next=r),q(s,o,a)&&(t.next=e),q(u,s,a)&&B(t,n,i),q(s,u,a)&&V(t,n,i)}function V(e,t,r){r[t]?r[t].next=e:r[t]=e}function B(e,t,r){r[t]?e.next=r[t]:r[t]=e}function R(e,t,r){for(var i={fillAccumulator:new n.default(r),strokeAccumulator:new n.default(r),fn:t,domain:r},a=0;a<e.length;a++){var s=e[a];s.next&&!s.visited&&z(s,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function z(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(G(r,n,t),G(n,i,t),G(i,r,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function G(e,t,r){if(q(e,t,r.domain)){var n=T(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function U(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0});var Y=5,X=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=a,t.buildQuadTree=f,t.triangulate=I,t.traceContours=R,t.displayTriangles=U}),define("worker/workerconfig",[],function(){return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0}}),function(){var e,t,r,n,i,a,s,o,u,c,l,p,f,h,m,d,g={};!function(e){function t(e,t){return function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof g?g:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(g){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r},n=function(e,t,r,n){var i,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},i=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},o=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(a,r[1])).done)return s;switch(a=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){u.label=r[1];break}if(6===r[0]&&u.label<s[1]){u.label=s[1],s=r;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(r);break}s[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],a=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,a,s,o,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},u=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},f=function(e){return this instanceof f?(this.v=e,this):new f(e)},h=function(e,t,r){function n(e){l[e]&&(c[e]=function(t){return new Promise(function(r,n){p.push([e,t,r,n])>1||i(e,t)})})}function i(e,t){try{a(l[e](t))}catch(e){u(p[0][3],e)}}function a(e){e.value instanceof f?Promise.resolve(e.value.v).then(s,o):u(p[0][2],e)}function s(e){i("next",e)}function o(e){i("throw",e)}function u(e,t){e(t),p.shift(),p.length&&i(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=r.apply(e,t||[]),p=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},m=function(e){function t(t,i){e[t]&&(r[t]=function(r){return(n=!n)?{value:f(e[t](r)),done:"return"===t}:i?i(r):r})}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},d=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof c?c(e):e[Symbol.iterator]()},g("__extends",e),g("__assign",t),g("__rest",r),g("__decorate",n),g("__param",i),g("__metadata",a),g("__awaiter",s),g("__generator",o),g("__exportStar",u),g("__values",c),g("__read",l),g("__spread",p),g("__await",f),g("__asyncGenerator",h),g("__asyncDelegator",m),g("__asyncValues",d)})}(),define("math/poi-finding-accumulator",["require","exports","worker/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,r,n,i,a){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.domain=t,i.fn=r,i.derivative=n,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.flatLeft=void 0,i}return n.__extends(t,e),t.prototype.getPOI=function(){return r.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.flushPending=function(){if(this.pendingPoint){var e=this.pendingPoint[0],t=this.pendingPoint[1];this.pivotPoint=void 0,this.pendingPoint=void 0;var r=this.segment.length,n=void 0,i=void 0;if(i=this.checkForZero(this.segment[r-2],this.segment[r-1],e,t),r>=4&&(n=this.checkForExtremum(this.segment[r-4],this.segment[r-3],this.segment[r-2],this.segment[r-1],e,t)),i&&(this.poiData.zeros.x.push(i[0]),this.poiData.zeros.y.push(i[1])),n){this.poiData.extrema.x.push(n[0]),this.poiData.extrema.y.push(n[1]);var s=void 0;n[0]<this.segment[r-2]?(s=!!this.fn&&!!a.default.bisectJump(this.segment[r-4],this.segment[r-3],n[0],n[1],this.segment[r-2],this.segment[r-1],this.fn,this.ytolerance),s||this.segment.splice(-2,0,n[0],n[1])):(s=!!this.fn&&!!a.default.bisectJump(this.segment[r-2],this.segment[r-1],n[0],n[1],e,t,this.fn,this.ytolerance),s||n[0]===e||this.segment.push(n[0],n[1]))}this.segment.push(e,t)}},t.prototype.breakSegment=function(){if(this.flushPending(),this.segment.length>2){this.segments.push(this.segment);var e=this.segment.length;s(this.segment[1])&&(this.poiData.zeros.x.push(this.segment[0]),this.poiData.zeros.y.push(this.segment[1])),s(this.segment[e-1])&&(this.poiData.zeros.x.push(this.segment[e-2]),this.poiData.zeros.y.push(this.segment[e-1]))}this.segment=[],this.flatLeft=void 0},t.prototype.checkForZero=function(e,t,r,n){if(this.fn){var i;return 0===this.segment[1]&&(this.flatLeft=[this.segment[0],this.segment[1]]),this.flatLeft?0!==n&&(this.flatLeft[0]!==this.segment[0]&&(i=a.default.flatCenter(this.flatLeft[0],this.flatLeft[1],e,t,r,n,this.fn)),this.flatLeft=void 0):0===n?this.flatLeft=[e,t]:t<0!=n<0&&(i=a.default.bisectZero(e,t,r,n,this.fn)),i}},t.prototype.checkForExtremum=function(e,t,r,n,i,s){if(this.fn){var o;if(isFinite(t)&&isFinite(n)&&isFinite(s)){if(t!==n&&n===s)this.flatLeft=[e,t];else if(t===n&&n!==s&&this.flatLeft)n>this.flatLeft[1]==n>s&&(o=a.default.flatCenter(this.flatLeft[0],this.flatLeft[1],r,n,i,s,this.fn));else{if(t===n&&n===s)return;if(n>t==n>s)if(this.derivative){if(this.derivative(e)>0==this.derivative(i)>0)return;if(o=a.default.bisectZero(e,this.derivative(e),i,this.derivative(i),this.derivative),o||(o=a.default.bisectExtremum(e,t,r,n,i,s,this.fn)),o)return[o[0],this.fn(o[0])]}else o=a.default.bisectExtremum(e,t,r,n,i,s,this.fn)}return o}}},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.default);t.default=o}),define("graphing/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10}),define("math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-(1/0),1/0])},t.intersectDomains=function(e,r){if("empty"===e.type||"empty"===r.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===r.type)return t.unknownDomain();if(e.bounds&&r.bounds){var n=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return t.knownDomain(n)}return t.emptyDomain()}}),define("math/plotter",["require","exports","./distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","graphing/graphmode","./domaintypes"],function(e,t,r,n,i,a,s,o,u){"use strict";function c(e,t){for(var r,n=new a.default,i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r[0])&&isFinite(r[1])?n.addPoint(r):n.breakSegment();return n.finish()}function l(e,t){for(var r,n=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function p(e,t){var r=new s.default(t);return r.addPoint([t.min,e[0]+t.min*e[1]]),r.addPoint([t.max,e[0]+t.max*e[1]]),r.addLinearZero(e),r.addLinearIntercept(e),r.finish()}function f(e,t){var r=p(e[0],t),n=p(e[1],t);return r.segments.length&&n.segments.length&&4===r.segments[0].length&&4===n.segments[0].length?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function h(e,t,i){var a,s,o,u,c,l,p=i.fn,f=i.jumpTolerance,h=i.stepPerturbation;a=e[0],s=e[1],c=t[0],l=t[1],o=r.mean(a,c),u=p(o);var m;if(m=n.default.bisectJump(a,s,o,u,c,l,p,f))for(var d=[-h,h],g=0;g<d.length;g++)if(a=e[0]+d[g],s=p(a),isFinite(s)||(a=e[0],s=e[1]),c=t[0]+d[g],l=p(c),isFinite(l)||(c=t[0],l=t[1]),o=r.mean(a,c),u=p(o),n.default.bisectJump(a,s,o,u,c,l,p,f))return m}function m(e,t,r){var i,a=new P(e,t,r),s=t.min,o=e(s),u=[s,o];for(isFinite(o)&&a.accumulator.addPoint([s,o]),s+=t.step;s<=t.max+t.step/2;s+=t.step){var c=s;o=e(c),isFinite(o)||(c=s+a.stepPerturbation,o=e(c)),isFinite(o)||(c=s-a.stepPerturbation,o=e(c)),isFinite(o)&&isFinite(u[1])?(T(u,[c,o],a),a.accumulator.addPoint([c,o])):isFinite(o)&&!isFinite(u[1])?(i=n.default.bisectFinite(u[0],u[1],c,o,e),i&&(i[0]!==c&&a.accumulator.addPoint(i),T(i,[c,o],a),a.accumulator.addPoint([c,o]))):!isFinite(o)&&isFinite(u[1])&&(i=n.default.bisectFinite(u[0],u[1],c,o,e),i&&(T(u,i,a),i[0]!==u[0]&&a.accumulator.addPoint(i),a.accumulator.breakSegment())),u=[c,o]}return a.accumulator.finish()}function d(e,t,r,n){function i(e,t){var i=t%2===0?1:-1;if(!n&&i===-1)return!1;for(var a=t*(Math.PI/r),s=[u,u+1,u+2,u+3],o=!1,c=0,p=s.length;c<p;c++){var f=e(s[c]),h=e(s[c]+a);if(isFinite(f)&&isFinite(h)&&(o=!0),isFinite(f)!==isFinite(h)||Math.abs(f-i*h)>l)return!1}return!!o}var a,s,o,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,p=Math.floor(c/(Math.PI/r));for(a=1;a<=p;a++)if(i(e,a)){for(o=a,s=2;s*a<=p;s++)i(e,s*a)||(o=void 0);if(o)break}return o?o*(Math.PI/r):null}function g(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function y(e,t){return t.map=g,m(e,t)}function v(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,s=Math.ceil(a/i),o=a/s,u=0;u<s;u++)t(r+u*o);t(n)}function b(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var r=new a.default(t),n=10,i=t.min,s=e(i);isFinite(s[0])&&isFinite(s[1])&&r.addPoint(s);var o;return v(t,function(t){o=e(t),x(e,i,s,t,o,n,r),i=t,s=o}),r.finish()}function x(e,t,n,i,a,s,o){if(i!==t){var u=o.xtolerance,c=o.ytolerance,l=r.mean(t,i),p=e(l),f=isFinite(n[0])&&isFinite(n[1]),h=isFinite(a[0])&&isFinite(a[1]),m=isFinite(p[0])&&isFinite(p[1]);if(0===s||l===t||l===i)return o.breakSegment(),void(h&&o.addPoint(a));if(f||h){if(f!==h){for(var d=t,g=i,y=n,v=a;t!==l&&l!==i;)m==f?(t=l,n=p,f=m):(i=l,a=p,h=m),l=t+(i-t)/2,p=e(l),m=isFinite(p[0])&&isFinite(p[1]);return void(f?(x(e,d,y,t,n,s-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(a),x(e,i,a,g,v,s-1,o)))}if(f&&m&&h){var b=r.pointToSegmentParameter(p[0],p[1],n[0],n[1],a[0],a[1]);if(b>.2&&b<.8&&Math.abs(p[0]-(n[0]+b*(a[0]-n[0])))<=u&&Math.abs(p[1]-(n[1]+b*(a[1]-n[1])))<=c)return void o.addPoint(a)}n[0]===p[0]&&n[1]===p[1]||x(e,t,n,l,p,s-1,o),a[0]===p[0]&&a[1]===p[1]||x(e,l,p,i,a,s-1,o)}}}function _(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(n)||!isFinite(i)||i<=n)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function w(e,t,r){var n,i,a=e.viewport.xmin,s=e.viewport.xmax,c=e.viewport.ymin,l=e.viewport.ymax,p=e.trigAngleMultiplier||1,f=e.oversample||4,h=1/f*(s-a)/e.screen.width,m=1/f*(l-c)/e.screen.height,g=t.domainBound;switch(t.graphMode){case o.X:switch(n=u.intersectDomains(u.knownDomain([c,l]),g),n.type){case"empty":return!1;case"known":c=n.bounds[0],l=n.bounds[1]}i={min:c,max:l,xtolerance:m,ytolerance:h,step:m};break;case o.Y:switch(n=u.intersectDomains(u.knownDomain([a,s]),g),n.type){case"empty":return!1;case"known":a=n.bounds[0],s=n.bounds[1]}i={min:a,max:s,xtolerance:h,ytolerance:m,step:h};break;case o.POLAR:i={min:0,max:2*Math.PI/p*6,step:2*Math.PI/p/1e3,tolerance:Math.min(h,m)};var y=d(r,i,p,"="===t.operator);y&&(i.max=i.min+y);break;case o.PARAMETRIC:var v=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(n=u.intersectDomains(u.knownDomain([v,b]),g),n.type){case"empty":return!1;case"known":v=n.bounds[0],b=n.bounds[1]}i={min:v,max:b,step:x,xtolerance:h,ytolerance:m};break;case o.IMPLICIT:i={xmin:a,xmax:s,ymin:c,ymax:l,xtolerance:h,ytolerance:m};break;default:return!1}return i}function S(e,t,r,n){var a,s,u,c=w(e,t,r);if(c){switch(t.graphMode){case o.X:case o.Y:a=t.isLinear?p(t.linearCoefficients,c):m(r,c,n);break;case o.POLAR:a=y(r,c);break;case o.IMPLICIT:a=i.sampleImplicit(r,c);break;default:c.step||(c.step=(c.max-c.min)/1e3),a=t.isLinear?f(t.linearCoefficients,c):b(r,c)}u=a.poi}else a={segments:[],resolved:!0};if((!u||u.zeros.x.length+u.extrema.x.length+u.intercept.x.length>250)&&(u={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),t.graphMode===o.X)for(var l in u)u.hasOwnProperty(l)&&(s=u[l].y,u[l].y=u[l].x,u[l].x=s);var h={segments:a.segments,resolved:a.resolved,graphMode:t.graphMode,color:t.color,style:t.lineStyle,operator:t.operator,poi:u,expr:null};return a.fillSegments&&(h.fillSegments=a.fillSegments),h}function E(e,t,r){var n,i,a,s,u=[],c=null;switch(r){case o.POLAR:c=g;break;case o.X:c=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i+=2)a=[s[i],s[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(s=t[n],i=s.length-2;i>=0;i-=2)a=[s[i],s[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);return u}function M(e,t,n){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},a=[],s=0,o=0,u=[],c=[],l=-(1/0),p=-(1/0);;){if(l<=p){if(s>=t.length)break;c.push(t[s++])}if(p<=l){if(o>=e.length)break;u.push(e[o++])}if(l=i(c),p=i(u),r.approx(l,p,4)){a.push(E(u,c,n)),c=[],u=[];var f=Math.max(l,p);l=f,p=f}}return a}Object.defineProperty(t,"__esModule",{value:!0});var T=function(e,t,r){if(isFinite(r.jumpTolerance)&&!(r.jumpTolerance<=0)){var n;if(n=h(e,t,r)){var i=n[0],a=n[1];i&&r.accumulator.addPoint(i),r.accumulator.breakSegment(),a&&r.accumulator.addPoint(a)}}},P=function(){function e(e,t,r){this.derivative=r,this.accumulator=new s.default(t,e,r),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0,this.stepPerturbation=t.step/10}return e}();t.default={sampleParametricNaive:c,sampleXYNaive:l,sampleLinear:p,sampleXY:m,findPiPeriod:d,samplePolar:y,sampleParametricRecursive:b,subsampleParametricRecursive:x,validateViewState:_,computeDomain:w,computeGraphData:S,polygonsFromSegments:M}}),define("lib/worker-i18n",["require","exports"],function(e,t){"use strict";function r(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=r}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t){for(var r=v;r>0;r--){var n=h/v*r,i=c.sinh(n),a=c.cosh(Math.PI/2*i),s=1/(Math.exp(Math.PI/2*i)*a),o=c.cosh(n)/(a*a);e.push(s),t.push(o)}}function r(e,t,r){return.5*(t*(2-r)+e*r)}function n(e,t,r){var n=.5*(t+r),i=p(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function i(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function a(e,t,n){var i=Math.abs(e(r(t,n,d))),a=Math.abs(e(r(t,n,2*d)));return!(i<d||a<d)&&i>1.95*a}function s(e,t,n){var s,o,u=r(n,t,b[0]),c=r(t,n,b[0]),l=e(u),p=e(c),h=r(t,n,1),m=e(h);if(isFinite(m)&&!isFinite(l)){if(s=f(u,l,h,m,e),Math.abs((s[0]-t)/(n-t))>y)return i(t,n,NaN,NaN,NaN);t=s[0],l=s[1]}if(isFinite(m)&&!isFinite(p)){if(o=f(h,m,c,p,e),Math.abs((o[0]-n)/(n-t))>y)return i(t,n,NaN,NaN,NaN);n=o[0],p=o[1]}if(isFinite(l)&&isFinite(p)&&!isFinite(m)){if(s=f(u,l,h,m,e),o=f(h,m,c,p,e),Math.abs((o[0]-s[0])/(n-t))>y)return i(t,n,NaN,NaN,NaN);m=.5*(s[1]+o[1])}if(a(e,t,n)||a(e,n,t))return i(t,n,NaN,NaN,NaN);for(var d=m,g=0,_=0,w=0,E=0,M=0,T=0,P=0;P<v;P+=4)M=e(r(t,n,b[P])),T=e(r(n,t,b[P])),E=Math.max(E,Math.abs(M),Math.abs(T)),g+=x[P]*(M+T),M=e(r(t,n,b[P+1])),T=e(r(n,t,b[P+1])),E=Math.max(E,Math.abs(M),Math.abs(T)),w+=x[P+1]*(M+T),M=e(r(t,n,b[P+2])),T=e(r(n,t,b[P+2])),E=Math.max(E,Math.abs(M),Math.abs(T)),_+=x[P+2]*(M+T),M=e(r(t,n,b[P+3])),T=e(r(n,t,b[P+3])),E=Math.max(E,Math.abs(M),Math.abs(T)),w+=x[P+3]*(M+T);var I,D=d+g,C=D+_,N=C+w,O=Math.abs(_-D),A=Math.abs(w-C),L=S*(n-t)*N,q=S*Math.abs(n-t)*E*x[0];return I=0===O?S*Math.abs(n-t)*A:S*Math.abs(n-t)*A*(A/O)*(A/O),I=Math.max(I,q),i(t,n,L,I,q)}function o(e){for(var t=-(1/0),r=-(1/0),n=-1,i=0,a=0;a<e.length;a++){var s=e[a];i+=s.value,s.error>t&&(t=s.error,n=a),s.minerror>r&&(r=s.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function u(e,t,i,a){if(void 0===a&&(a=32),!isFinite(t)||!isFinite(i))return NaN;for(var u=[s(e,t,i)],c=o(u),l=1;l<a&&!(Math.abs(c.maxerror/c.totalvalue)<=32*g||c.maxerror<=32*g||c.maxerror<=32*c.maxminerror);l++){var p=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=p;var f=u.pop(),h=n(e,r(f.x2,f.x1,.125),r(f.x1,f.x2,.125));u.push(s(e,f.x1,h)),u.push(s(e,h,f.x2)),c=o(u)}return c.totalvalue}var c=e("math/mathshim"),l=e("math/poi").default,p=l.bisectJump,f=l.bisectFinite,h=3.154019550531224,m=Math.pow(2,-13),d=m*m,g=d*d,y=d,v=32,b=[],x=[];t(b,x);for(var _=0,w=0;w<x.length;w++)_+=x[w];var S=1/(1+2*_);return{quad:u}}),define("math/studentt",["require"],function(e){var t=.5772156649015329,r=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],n=[-30.840230011973897,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.25967555349],i=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<.001)return 1/(e*(1+t*e));if(e<12){var i=e,a=0,s=i<1;s?i+=1:(a=Math.floor(i)-1,i-=a);for(var u=0,c=1,l=i-1,p=0;p<8;p++)u=(u+r[p])*l,c=c*l+n[p];var f=u/c+1;if(s)f/=i-1;else for(p=0;p<a;p++)f*=i++;return f}return e>171.624?1/0:Math.exp(o(e))},a=[1/12,-1/360,1/1260,-1/1680,1/1188,-691/360360,1/156,-3617/122400],s=.9189385332046728,o=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<12)return Math.log(Math.abs(i(e)));for(var t=1/(e*e),r=a[7],n=6;n>=0;n--)r*=t,r+=a[n];var o=r/e;return(e-.5)*Math.log(e)-e+s+o},u=function(e){if(e<=-1)throw new RangeError("Argument mustbe greater than -1.0");return Math.abs(e)>1e-4?Math.log(1+e):(-.5*e+1)*e},c=function(e,t,r){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===r)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===r)return 0;var n=Math.exp(o(t+r)-o(t)-o(r)+t*Math.log(e)+r*u(-e));return e<(t+1)/(t+r+2)?n*l(e,t,r)/t:1-n*l(1-e,r,t)/r},l=function(e,t,r){var n,i,a,s,o,u,c,l,p,f=1e-30,h=1;for(c=t+r,p=t+1,l=t-1,a=1,s=1-c*e/p,Math.abs(s)<f&&(s=f),s=1/s,u=s;h<=100&&(n=2*h,i=h*(r-h)*e/((l+n)*(t+n)),s=1+i*s,Math.abs(s)<f&&(s=f),a=1+i/a,Math.abs(a)<f&&(a=f),s=1/s,u*=s*a,i=-(t+h)*(c+h)*e/((t+n)*(p+n)),s=1+i*s,Math.abs(s)<f&&(s=f),a=1+i/a,Math.abs(a)<f&&(a=f),s=1/s,o=s*a,u*=o,!(Math.abs(o-1)<3e-7));h++);return u},p=function(e,t){var r=i((e+1)/2)/(Math.sqrt(e*Math.PI)*i(e/2));return r*Math.pow(1+t*t/e,-((e+1)/2))},f=function(e,t){var r=Math.sqrt(t*t+e);return c((t+r)/(2*r),e/2,e/2)};return{cdf:f,pdf:p,gamma:i}}),define("math/tofraction",["require","exports"],function(e,t){"use strict";function r(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-(1/0))return{n:-(1/0),d:1};if(!isFinite(e))return{n:NaN,d:1};for(var r,n,i,a=0,s=1,o=1,u=0;;){if(r=Math.floor(e),n=r*s+a,i=r*u+o,i>t)break;if(a=s,o=u,s=n,u=i,e===r)break;e=1/(e-r)}return{n:s,d:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature","math/studentt","math/tofraction"],function(e){function t(e){return!(e>1e12)&&Math.round(c*e)*Math.PI===e}function r(e){if(e>1e12)return!1;var t=Math.round(2*c*e);return t%2===1&&t*Math.PI===2*e}var n=e("math/mathshim"),i=e("math/distance"),a=e("math/quadrature"),s=e("math/studentt"),o=e("math/tofraction").default,u={};u.cosh=n.cosh,u.sinh=n.sinh,u.tanh=n.tanh,u.acosh=n.acosh,u.asinh=n.asinh,u.atanh=n.atanh,u.expm1=n.expm1,u.log1p=n.log1p,u.sqrtxsqp1=n.sqrtxsqp1,u.sqrtxsqm1=n.sqrtxsqm1,u.mod=function(e,t){return e-t*Math.floor(e/t)},u.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},u.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=u.gcd(e,t);return Math.abs(e*t/r)},u.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},u.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=u.gcd(t,e[r]);return t},u.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=u.lcm(t,e[r]);return t},u.nCr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var r=1,n=0;n<t;n++)r*=(e-n)/(n+1);return r},u.nPr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var r=1,n=0;n<t;n++)r*=e-n;return r},u.factorial=function(e){return u.gamma(e+1)},u._integerFactorial=function(e){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e>170)return NaN;if(0===e||1===e)return 1;for(var t=1,r=2;r<=e;r++)t*=r;return t},u.gamma=function(e){return e===Math.floor(e)?u._integerFactorial(e-1):e<0?Math.PI/(Math.sin(Math.PI*e)*u.gamma(1-e)):Math.exp(u.lnGamma(e))},u.lnGamma=function(e){if(e<0)return NaN;for(var t=[57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],r=.9999999999999971,n=0;n<14;n++)r+=t[n]/(e+n+1);var i=e+5.2421875;return(e+.5)*Math.log(i)-i+Math.log(2.5066282746310007*r/e)},u.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],u.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/u.tan(t);var r=u.sin(t);if(1===e)return-1/(r*r);var n=u.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,s,o,c,l=[0,2];for(a=3;a<=e;a++){for(i=[],s=0;s<a;s++)o=0,c=0,s>0&&(o=(a-s+1)*l[s-1]),s+2<a&&(c=(s+1)*l[s+1]),i.push(-(o+c));l=i}var p=0;for(s=e-1;s>=0;s--)p=i[s]+n*p;return p/Math.pow(r,e+1)},u.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2===0?-1:1;if(t<0)return-r*u.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*u.cotDerivative(e,Math.PI*t);for(var n=u.factorial(e),i=0,a=Math.pow(t,-(e+1));t<10;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var s=u.bernoulliTable,o=e+1,c=2,l=a*t*o/c,p=1/(t*t),f=1;f<=14;f++)l*=p,i+=l*s[f-1],o++,c++,l*=o/c,o++,c++,l*=o/c;return n*r*i},u.toFraction=o,u.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},u.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},u.common_log=function(e){return u.log_base(e,10)},u.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=u.toFraction(t,100);return i.approx(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN},u.nthroot=function(e,t){return u.pow(e,1/t)};var c=1/Math.PI;return u.sin=function(e){return t(Math.abs(e))?0:Math.sin(e)},u.cos=function(e){return r(Math.abs(e))?0:Math.cos(e)},u.tan=function(e){var n=Math.abs(e);return t(n)?0:r(n)?1/0:Math.tan(e)},u.sec=function(e){return r(Math.abs(e))?1/0:1/Math.cos(e)},u.csc=function(e){return t(Math.abs(e))?1/0:1/Math.sin(e)},u.cot=function(e){var n=Math.abs(e);return t(n)?1/0:r(n)?0:1/Math.tan(e)},u.acot=function(e){return Math.PI/2-Math.atan(e)},u.acsc=function(e){return Math.asin(1/e)},u.asec=function(e){return Math.acos(1/e)},u.sech=function(e){return 1/u.cosh(e)},u.csch=function(e){return 1/u.sinh(e)},u.coth=function(e){return 1/u.tanh(e)},u.asech=function(e){return u.acosh(1/e)},u.acsch=function(e){return u.asinh(1/e)},u.acoth=function(e){return u.atanh(1/e)},u.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},u.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t},u.tpdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:s.pdf(t,e)},u.tcdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:s.cdf(t,e)},u.normalcdf=function(e,t,r){var n=(e-t)/(Math.SQRT2*Math.abs(r));return n<0?.5*Math.exp(-n*n)*u.erfcx(-n):1-.5*Math.exp(-n*n)*u.erfcx(n)},u.normalpdf=function(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))},u.binomcdf=function(e,t,r){if(t!==Math.round(t)||e!==Math.round(e))return NaN;if(r<0||r>1)return NaN;if(e<0||t<0)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,s=1;s<=Math.min(t,e);s++)i*=(t-s+1)/s*n,a+=i;return a},u.binompdf=function(e,t,r){return t!==Math.round(t)?NaN:(e=Math.floor(e),r<0||r>1?NaN:e<0||t<0?0:u.nCr(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e))},u.poissonpdf=function(e,t){return t<=0?NaN:e!==Math.round(e)?NaN:e<0?0:Math.exp(-t+e*Math.log(t)-u.lnGamma(e+1))},u.poissoncdf=function(e,t){if(t<=0)return NaN;if(e=Math.floor(e),e<0)return 0;for(var r=1,n=1,i=1;i<=e;i++)r*=t/i,n+=r;return Math.exp(-t)*n},u.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*u.erfcx(e);if(e<=-.065)return Math.exp(t)*u.erfcx(-e)-1;var r=1.1283791670955126,n=.37612638903183754,i=.11283791670955126,a=.026866170645131252,s=.005223977625442188;return e*(r+t*(n+t*(i+t*(a+t*s))))},u.erfcx=function(e){var t=.9999999999999999,r=2.224574423459406,n=2.444115549920689,i=1.7057986861852539,a=.8257463703357973,s=.28647031042892007,o=.07124513844341643,c=.012296749268608364,l=.001347817214557592,p=7263959403471071e-20,f=1,h=3.352953590554884,m=5.227518529742423,d=5.003720878235473,g=3.266590890998987,y=1.5255421920765353,v=.5185887413188858,b=.12747319185915415,x=.02185979575963238,_=.0023889438122503674,w=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-u.erfcx(-e);if(e>50){var S=.5641895835477563,E=e*e;return e>5e7?S/e:S*(E*(E+4.5)+2)/(e*(E*(E+5)+3.75))}var M=t+e*(r+e*(n+e*(i+e*(a+e*(s+e*(o+e*(c+e*(l+e*p)))))))),T=f+e*(h+e*(m+e*(d+e*(g+e*(y+e*(v+e*(b+e*(x+e*(_+e*w)))))))));return M/T},u.invNorm=function(e){var t,r,n,i=-39.6968302866538,a=220.946098424521,s=-275.928510446969,o=138.357751867269,c=-30.6647980661472,l=2.50662827745924,p=-54.4760987982241,f=161.585836858041,h=-155.698979859887,m=66.8013118877197,d=-13.2806815528857,g=-.00778489400243029,y=-.322396458041136,v=-2.40075827716184,b=-2.54973253934373,x=4.37466414146497,_=2.93816398269878,w=.00778469570904146,S=.32246712907004,E=2.445134137143,M=3.75440866190742,T=.02425;\nreturn e>.5?-u.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-(1/0):(e<T?(t=Math.sqrt(-2*Math.log(e)),n=(((((g*t+y)*t+v)*t+b)*t+x)*t+_)/((((w*t+S)*t+E)*t+M)*t+1)):(t=e-.5,r=t*t,n=(((((i*r+a)*r+s)*r+o)*r+c)*r+l)*t/(((((p*r+f)*r+h)*r+m)*r+d)*r+1)),n-Math.sqrt(2*Math.PI)*(.5*u.erfcx(-n/Math.SQRT2)-Math.exp(.5*n*n)*e))},u.TScore=function(e,t){var r=u.stdev(e),n=u.mean(e);return(n-t)*Math.sqrt(e.length)/r},u.TTest=function(e,t){return u.tcdf(u.TScore(e,t),e.length-1)},u.length=function(e){return e.length},u.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},u.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},u.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;var r=e.length,n=u.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},u.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;var r=u.sortPerm(e),n=u.quartileIndex(e,t),i=Math.floor(n),a=Math.ceil(n);return(e[r[i]]+e[r[a]])/2},u.sortPerm=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},u.quartileIndex=function(e,t){t=Math.round(t);var r,n=e.length,i=n%2===1;return 1===n?0:(0===t&&(r=0),2===t&&(r=(n-1)/2),4===t&&(r=n-1),1===t&&(r=i?(n+1)/4-1:(n+2)/4-1),3===t&&(r=i?(3*n+3)/4-1:(3*n+2)/4-1),r)},u.upperQuantileIndex=function(e,t){return u.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},u.lowerQuantileIndex=function(e,t){return u.sortPerm(e)[Math.floor(t*(e.length-1))]+1},u.upperQuartileIndex=function(e,t){return u.sortPerm(e)[Math.ceil(u.quartileIndex(e,t))]+1},u.lowerQuartileIndex=function(e,t){return u.sortPerm(e)[Math.floor(u.quartileIndex(e,t))]+1},u.median=function(e){return u.quantile(e,.5)},u.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},u.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},u.varp=function(e){for(var t=u.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},u.mad=function(e){for(var t=u.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},u.var=function(e){var t=e.length;return u.varp(e)*t/(t-1)},u.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=u.mean(e),i=u.mean(t),a=0,s=0;s<r;s++)a+=(e[s]-n)*(t[s]-i);return a/r},u.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return u.covp(e,t)*r/(r-1)},u.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=u.mean(e),s=u.mean(t),o=0,c=0,l=0,p=0;p<i;p++)r=e[p]-a,n=t[p]-s,o+=r*r,c+=n*n,l+=r*n;return l/Math.sqrt(o*c)},u.stdev=function(e){return Math.sqrt(u.var(e))},u.stdevp=function(e){return Math.sqrt(u.varp(e))},u.quad=a.quad,u.distance=function(e,t){return i.hypot(t[0]-e[0],t[1]-e[1])},u.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},u}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function r(e){for(var t=0;t<e.length;t++){var r=e[t].compiled;r&&(r.fn=i(r.args,r.source))}}function n(e,t){for(var r=[],n=0;n<t;n++)r.push("values["+n+"]");return i(["values"],"return "+e(r))}function i(e,t){var r=e.join(","),n="return (function("+r+"){"+t+"})",i=new Function(["BuiltIn"],n);return i(a)}var a=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:r,closureFunctionWithBuiltIn:i,createEvaluateFunction:n}});var define_enum_constant,enum_strings={},debuggable_enums=!0;if(debuggable_enums)define_enum_constant=function(e){this[e]=e};else{var next_enum=1e3;define_enum_constant=function(e){enum_strings[next_enum]=e,this[e]=next_enum++}}define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define_enum_constant("LIST"),define("math/enums",function(){}),define("math/parsenode/base",["require","pjs","math/functions","../enums"],function(e){var t=e("pjs"),r=e("math/functions");return e("../enums"),t(function(e,t,n){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._inputString="",this._exports=[]},e.exportPenalty=0;var i=0;e.tmpVar=function(){return"tmp"+i++},e.statementType=EXPRESSION,e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputString=function(e){this._inputString=e},e.getInputString=function(){return this._inputString},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){this._dummyDependencies.indexOf(e)===-1&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){var e=this._exports||[];return e.concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.getSliderInfo=function(){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){if(!(t instanceof n))throw t;e=t}return e},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(i!==-1){var a=e[0];e[0]=e[i],e[i]=a}}return{args:e,source:n,fn:r.closureFunctionWithBuiltIn(e,n)}},e.getCompiledDerivative=function(){var e=this.getDependencies(),t=this.takeDerivative(e[0]||"x");return t.getCompiledFunction()}})}),define("math/parsenode/error",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("graphing/label",["require","exports","underscore","math/distance","math/tofraction"],function(e,t,r,n,i){"use strict";function a(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var r,a,s,o=i.default(e/Math.PI,24);if(h(t)&&n.approx(o.n/o.d*Math.PI,e,3))return r=0===o.n?"0":1===o.n?"":o.n===-1?"-":o.n.toString()+"",a=1===o.d?"":"/"+o.d.toString(),s=r+a,{ariaString:u(s),string:s,value:o.n/o.d*Math.PI};if(h(t))return s=f(l(e.toFixed(m(t)))),{ariaString:u(s),string:s,value:parseFloat(s)};var c=p(e.toExponential(m(t/e))).split("e"),d=c[0]+"10",g=c[1].replace("+","");return s=p(e.toExponential(m(t/e))).replace("+",""),{ariaString:u(s),string:s,mantissa:d,superscript:g,value:parseFloat(s)}}function s(e){return M["["+e+"]"]}function o(e){return e[0]+e.slice(1).split("").join(" ")}function u(e){return e.replace(P,o).replace(T,s).replace(/ +/gi," ").trim()}function c(e,t,r,n){var i=a(e,t),s=a(n(i.value),r);return[i,s]}function l(e){return e.indexOf(".")===-1?e:e.replace(I,"")}function p(e){var t=/\\.?0+e/;return e.replace(t,"e")}function f(e){return"-0"===e?"0":e}function h(e){return e=Math.abs(e),1e-4<e&&e<1e7}function m(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function d(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var r=t.smallCutoff||.001,n=t.bigCutoff||1e6,i=t.digits||10,a=p(e.toExponential(i-2)),s=a.match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!s)return{type:"undefined"};var o=parseInt(s[2],10)>=i;if(Math.abs(e)>n||Math.abs(e)<r||o)return{type:"scientific",mantissa:s[1],exponent:s[2]};var u=l(e.toPrecision(i));return e!==Number(u)&&t.addEllipses&&(u+="..."),{type:"decimal",value:u}}function g(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"<span class=\'dcg-cross\'></span>10<sup>"+r.exponent+"</sup>";default:var n=r;return n}}function y(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+" * 10^"+r.exponent;default:var n=r;return n}}function v(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\\\times10^{"+r.exponent+"}";default:var n=r;return n}}function b(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return u(r.value);case"scientific":return u(r.mantissa+"e"+r.exponent);default:var n=r;return n}}function x(e){e=e.replace("\\\\","");var t={pi:"",tau:"",theta:"",phi:""};return t.hasOwnProperty(e)?t[e]:e}function _(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(r+=1===t[1].length?"_"+t[1]:"_{"+t[1]+"}"),r}function w(e){if(!e)return"";var t=e.split("_").map(x).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function S(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}function E(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.value=a;var M={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},T=new RegExp(Object.keys(M).join("|"),"gi"),P=/\\.\\d+/g;t.point=c;var I=/\\.?0+$/;t.numericLabel=d,t.truncatedHTMLLabel=g,t.truncatedPlainmathLabel=y,t.truncatedLatexLabel=v,t.truncatedAriaLabel=b,t.formatSymbol=x,t.identifierToLatex=_,t.identifierToHTML=w,t.latexToIdentifier=S,t.trimLatex=E}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case p:return"Point";case f:return"ListOfAny";case h:return"ListOfNumber";case m:return"ListOfBool";case d:return"ListOfPoint";case g:return"ErrorType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return o.t("an unknown object");case c:return o.t("a number");case l:return o.t("a true/false value");case p:return o.t("a point");case f:return o.t("a list of unknown objects");case h:return o.t("a list of numbers");case m:return o.t("a list of true/false values");case d:return o.t("a list of points");case g:return o.t("an error object");default:throw new Error("Invalid type")}}function n(e){switch(e){case f:return!0;case h:return!0;case m:return!0;case d:return!0;default:return!1}}function i(e){switch(e){case f:return u;case h:return c;case m:return l;case d:return p;default:return u}}function a(e){switch(e){case u:return f;case c:return h;case l:return m;case p:return d;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function s(e){switch(e){case u:return!0;case c:return!0;case l:return!0;case p:return!0;default:return!1}}var o=e("lib/worker-i18n"),u=0,c=1,l=2,p=3,f=4,h=5,m=6,d=7,g=8;return{Any:u,Number:c,Bool:l,Point:p,ListOfAny:f,ListOfNumber:h,ListOfBool:m,ListOfPoint:d,ErrorType:g,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:s}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","math/types"],function(e){var t=e("lib/worker-i18n"),r=e("math/parsenode/error"),n=e("graphing/label"),i=e("math/types");return{parseError:function(){return r(t.t("Sorry, I don\'t understand this."))},unrecognizedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the \'__symbol__\' symbol.",{symbol:e}))},unexpectedInequality:function(){return r(t.t("Cannot use an inequality here."))},unexpectedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the way that \'__symbol__\' is used here.",{symbol:e}))},addTypeError:function(e){return r(t.t("Cannot add __symbol2__ and __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:e[0],symbol2:e[1],symbol3:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function \'__fn__\' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:i[0]})).allowExport();case 2:return r(t.t("Function \'__fn__\' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return r(t.t("Function \'__fn__\' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productArgumentTypeError:function(e){return r(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to \'__symbol1__\' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return r(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return r(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return r(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return r(t.t("Cannot make a polygon from two numbers."))},wrongArity:function(e,i,a){e=n.formatSymbol(e);var s,o;if(1===i)o=t.t("For example, try typing: __dependency__(x).",{dependency:e}),s=a>1?t.t("Function \'__dependency__\' requires only 1 argument. __supplement__",{dependency:e,supplement:o}):t.t("Function \'__dependency__\' requires an argument. __supplement__",{dependency:e,supplement:o});else{for(var u=[],c=0;c<i;c++)u[c]=c+1;var l=n.formatSymbol(e)+"("+u.join(", ")+")";o=t.t("For example, try typing: __recommendation__.",{recommendation:l}),s=t.t("Function \'__dependency__\' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:o})}return r(s)},wrongParametrizedReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function \'__symbol__\' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want \'__symbol__\' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},nonPairTuple:function(){return r(t.t("Points may only have 2 coordinates."))},badImplicitCall:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of \'__symbol__\'.",{symbol:e}))},badImplicitMultiply:function(){return r(t.t("Confusing implicit multiplication. Use parentheses or a \'*\' symbol."))},binaryOperatorMissingOperand:function(e){return r(t.t("You need something on both sides of the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingLeft:function(e){return r(t.t("You need something before the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingRight:function(e){return r(t.t("You need something after the \'__symbol__\' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},emptySubscript:function(){return r(t.t("Subscripts cannot be empty."))},emptySuperscript:function(){return r(t.t("Superscripts cannot be empty."))},invalidSubscript:function(e){return e=n.formatSymbol(e),r(t.t("Subscripts may only contain letters and digits. \'__symbol__\' is not allowed.",{symbol:e}))},invalidOperatorName:function(){return r(t.t("Operator names may only contain letters."))},unexpectedSubscript:function(){return r(t.t("Only functions and variables may have subscripts."))},superscriptWithPrime:function(){return r(t.t("Superscripts and primes cannot be combined."))},unexpectedPrime:function(){return r(t.t("Sorry, I don\'t understand this use of prime notation."))},primeWithoutParen:function(){return r(t.t("Primed function calls must use parentheses."))},emptyRadical:function(){return r(t.t("Radical cannot be empty."))},emptyRadicand:function(){return r(t.t("Radicand cannot be empty."))},emptyParen:function(){return r(t.t("Parentheses cannot be empty."))},emptySquareBracket:function(){return r(t.t("Square brackets cannot be empty."))},emptyPipe:function(){return r(t.t("Absolute value symbol cannot be empty."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},inequalityChainTooLong:function(){return r(t.t("Cannot chain more than 2 inequalities."))},piecewiseMissingCondition:function(){return r(t.t("A piecewise expression must have at least one condition."))},piecewisePartMissingCondition:function(){return r(t.t("Every part of a piecewise expression must have a condition except the last."))},colonMissingCondition:function(){return r(t.t("The left side of a \':\' must be a condition, like \'x>1\'."))},blankExpression:function(){return r(t.t("You haven\'t written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function \'__dependency__\' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__dependency__\' as a parameter of this function because \'__dependency__\' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can\'t redefine \'__symbol__\' because it\'s already defined.",{symbol:e}):t.t("You can\'t redefine \'__symbol__\' because \'__symbolRoot__\' is already defined.",{symbol:e,symbolRoot:i}))},cannotSubscript:function(e){return e=n.formatSymbol(e),r(t.t("\'__symbol__\' cannot have a subscript.",{symbol:e}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try picking a different variable, or deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__symbol__\' as an index because it\'s already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("\'__symbols__\' and \'__lastSymbol__\' can\'t be defined in terms of each other.",{symbols:e.join("\', \'"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function \'__symbol__\' cannot depend on \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don\'t know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining \'__variables__\'.",{variables:(e.length?e.join("\', \'")+"\' or \'":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var s=i+"("+a.join(",")+","+e.join(",")+")",o=e.pop(),u={symbols:e.join("\', \'"),lastSymbol:o,newSignature:s};return r(e.length?t.t("Try including \'__symbols__\' and \'__lastSymbol__\' as arguments by defining the function as \'__newSignature__\'.",u):t.t("Try including \'__lastSymbol__\' as an argument by defining the function as \'__newSignature__\'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can\'t graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can\'t plot  as a function of r. Try plotting r() instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return r(t.t("Plotting single-variable implicit equations is disabled."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding \'__lhs__\' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable \'__dependency__\' can\'t be used as a function.",{dependency:e}))},emptyList:function(){return r(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"\'y\', \'r\',",last:"\'\'"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can\'t be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("\'__symbol__\' may not be used as a regression parameter.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn\'t find any region where this model is defined."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of \'__symbol__\' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of \'__symbol__\' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},sumMissingBound:function(){return r(t.t("Sums must have upper and lower bounds."))},productMissingBound:function(){return r(t.t("Products must have upper and lower bounds."))},incorrectSumLowerBound:function(){return r(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))},incorrectProductLowerBound:function(){return r(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))},integralMissingBound:function(){return r(t.t("Integrals must have upper and lower bounds."))},integralMissingDifferential:function(){return r(t.t("Integrand must end with an integration variable, like dx."))},differentialWithSuperscript:function(){return r(t.t("Integration variable cannot have a superscript."))},sumMissingBody:function(){return r(t.t("What do you want to take the sum of?"))},productMissingBody:function(){return r(t.t("What do you want to take the product of?"))},integralMissingBody:function(){return r(t.t("What do you want to take the integral of?"))},derivativeMissingBody:function(){return r(t.t("What do you want to take the derivative of?"))},mismatchedBraces:function(e,i){return e=n.formatSymbol(e),i=n.formatSymbol(i),r(t.t("Expected \'__symbol1__\' to match \'__symbol2__\'.",{symbol1:e,symbol2:i}))},shadowedIntegrationVariable:function(e){return r(t.t("You can\'t use \'__symbol__\' as an integration variable because it\'s already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can\'t depend on integration variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},percentMissingOf:function(){return r(t.t("\'%\' must be used with \'of\'. Try \'25% of 12\'."))},badAnsContext:function(){return r(t.t("You can\'t use \'ans\' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn\'t define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like \'__variable__\'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the \'__symbol__\' function.",{symbol:n.formatSymbol(e)}))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return r(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return r(t.t("Only square matrices have an inverse."))},singularInverse:function(){return r(t.t("Singular matrices do not have an inverse."))},matrixAssignment:function(){return r(t.t("This calculator does not support this type of variable definition. Try using \'New Matrix\'."))},matrixAddDimensions:function(){return r(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return r(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return r(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return r(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return r(t.t("Only square matrices can be raised to a power."));\n},matrixElementTypeError:function(e){return r(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return r(t.t("Cannot use \'__symbol__\' as a variable.",{symbol:n.formatSymbol(e)}))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){this.mergeDependencies.apply(this,this.args)},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw n.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(r,{})};return n.RawExponent=t(n.Exponent,{}),n}),define("math/parsenode/constant",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){this.constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return this.constantValue},e.scalarExprString=function(){return this.constantValue>0?String(this.constantValue):"("+String(this.constantValue)+")"},e.getEvaluationInfo=function(){return[{val:this.constantValue}]},e.isNaN=function(){return"number"==typeof this.constantValue&&isNaN(this.constantValue)}})}),define("math/parsenode/identifier",["require","pjs","./expression","graphing/label"],function(e){var t=e("pjs"),r=e("./expression"),n=e("graphing/label");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=n.latexToIdentifier(e),this.setInputString(e),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})}),define("math/parsenode/ans",["require","pjs","./identifier"],function(e){var t=e("pjs"),r=e("./identifier");return t(r,function(e,t,r){})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){var t=e("pjs"),r=e("./freevariable");return t(r,function(){})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t,r){function a(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw n.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();Array.prototype.push.apply(e,n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.constantValue})}]},r.eachArgs=function(e,t){var r=a(e);if(!isFinite(r))return void t(e);for(var n=0;n<r;n++){for(var s=[],o=0;o<e.length;o++)s.push(e[o].isList||i.isList(e[o].valueType)?e[o].elementAt(n):e[o]);t(s)}},r.mapArgs=function(e,t){var n=[];return r.eachArgs(e,function(e){n.push(t(e))}),n},r.wrap=function(e){return e.isList||i.isList(e.valueType)?e:r([e])}})}),define("math/parsenode/range",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]}})}),define("math/parsenode/broadcast",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t,r){e.init=function(e,r){if(t.init.call(this,r),this._replacedSymbols=e,this._expression=r[0],this._lists=r.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var n=0;n<e.length;n++)this.removeDependency(e[n]);for(var i=1/0,a=0;a<this._lists.length;a++){if(!this._lists[a].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[a].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.evaluate=function(e){for(var t=this._expression.getCompiledFunction(this._replacedSymbols).fn,r=[],n=0;n<this.length;n++){for(var i=[],a=0;a<e.length;a++)i.push(e[a][n]);r.push(t.apply(void 0,i))}return r},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var r,n=[],i=[];for(r=0;r<this._lists.length;r++){var a=this._lists[r].getEvalStrings();Array.prototype.push.apply(e,a.statements);var s=this.tmpVar();i.push(s),n.push("var "+s+" = "+a.expression)}var o=this.tmpVar(),u=this.tmpVar();n.push("var "+o+" = []");var c=[];for(r=0;r<i.length;r++)c.push("var "+this._replacedSymbols[r]+" = "+i[r]+"["+u+"]");return n.push("for (var "+u+" = 0; "+u+" < "+this.length+"; "+u+"++) {\\n  "+c.join(";\\n  ")+";\\n  "+o+".push("+t.expression+");\\n}"),{statements:e.concat(n),expression:o}}})}),define("math/parsenode/listaccess",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.concat(t.statements),n=this.tmpVar();r.push(n+" = "+t.expression);var i=this.tmpVar();return r.push(i+" = Math.floor("+e.expression+") - 1"),{statements:r,expression:"("+i+" >= 0 && "+i+" < "+n+".length ? "+n+"["+i+"] : NaN)"}}})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t,r){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){var t=e("pjs"),r=e("./orderedpair");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements);var n=t.expression+"["+e.expression+"-1]";return{statements:r,expression:n}}})}),define("math/parsenode/polygon",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/comparators",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},n=function(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};t.table=r,t.get=n}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("math/comparators").table,a=e("math/functions");return t(r,function(e,r,s){s.create=function(e,r){return r=r||e,t(s,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(i[this.operator].direction===-1?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/doubleinequality",["require","pjs","./base","math/comparators","./comparator"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/comparators"),i=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=n.get(n.table[e[1]].inclusive&&n.table[e[3]].inclusive,n.table[e[1]].direction);this._indicator=i[r]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),s=this.args[2].getEvalStrings(),o=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,s.statements),e.push("var "+i+" = Math.round("+s.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+o.statements.join(";")+";"+t+this.in_place_operator+o.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.evaluate=function(e,t,r){var n=r.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,a=e;a<=t;a++)i=this.update(i,n(a));return i}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","math/builtin"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("math/builtin");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),s=e._symbol,o=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),p=n.getEvalStrings();Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+o+" = "+c.expression),i.push("var "+u+" = "+l.expression),i.push("var "+a+" = function ("+s+") { "+p.statements.join("; ")+"; return "+p.expression+";}");var f="BuiltIn.quad("+[a,o,u].join(", ")+")";return{statements:i,expression:f}},e.evaluate=function(e,t,r){var n=this.args[0],a=r.getCompiledFunction([n._symbol]).fn;return i.quad(a,e,t)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=n(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(n(this._symbol),e)}})}),define("math/parsenode/functionexponent",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){})}),define("math/parsenode/prime",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=t(r,{});return i.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=i([t.condition,t.if_expr,r]);return r},i.empty=function(){return i([n(!0),n(1),n(NaN)])},i}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){e instanceof n?this._symbol=e._symbol:this._symbol=n(e)._symbol,t.init.call(this,r)}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/errormsg","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/errormsg"),i=e("math/functions");return t(r,function(e,r,a){e.init=function(e){if(e.length<this._requiredArity)throw n.wrongArity(this._symbol,this._requiredArity,e.length);if(e.length>this._maxArity)throw n.wrongArity(this._symbol,this._maxArity,e.length);for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},a.create=function(e,r,n,a){return t(this,function(t,s,o){o.isFunction=!0,t._symbol=e,t.head=r,t._requiredArity=n,t._optionalArguments=a||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=i.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),o.getConcreteInvocationTree=function(e,t,r){return o(t).getConcreteTree(e,r)},o.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){var t=e("pjs"),r=e("./nativefunction");return t(r,function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,s=n.create.call(this,e,t,a);return s.prototype._inputTypes=r,s.prototype._outputType=i,s}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes","math/errormsg"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply,i=e("math/errormsg");return t(r,function(e,t,r,a){r.create=function(e,t){var r=1,s=a.create(e,t,r);return s.getConcreteInvocationTree=function(t,a,o){if(a.length<r)throw i.wrongArity(e,r,a.length);var u=t.trigAngleMultiplier?[n([a[0],t.trigAngleMultiplier])].concat(a.slice(1)):a;return s(u).getConcreteTree(t,o)},s.getCacheKeys=function(){return["trigAngleMultiplier"]},s}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t,r){var a=1,s=i.create(e,t,a,r);return s.getConcreteInvocationTree=function(e,t,r){var i=s(t),a=e.trigAngleMultiplier?n([i,e.trigAngleMultiplier]):i;return a.getConcreteTree(e,r)},s.getCacheKeys=function(){return["trigAngleMultiplier"]},s}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","math/functions"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions");return t(r,function(e,r,i){e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},i.create=function(e,r){return t(i,function(t,i,a){t._symbol=e,t.head=r,t._arity=1,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg");return t(r,function(e,r,a){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw i.wrongDoubleReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=Math.min(this.args[0].length,this.args[1].length),n=0;n<this.args.length;n++){var i=this.args[n],a=i.getEvalStrings();Array.prototype.push.apply(e,a.statements),t.push(i.length===r?a.expression:a.expression+".slice(0,"+r+")")}return{statements:e,expression:this.evalExpression(t)}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg");return t(r,function(e,r,a){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw i.wrongParametrizedReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),r=this.args[1].getEvalStrings();Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,r.statements);var n=this.evalExpression([t.expression,r.expression]);return{statements:e,expression:n}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/types","math/parsenode/constant"],function(e){var t=e("math/parsenode/nativefunction"),r=e("math/parsenode/typedfunction"),n=e("math/parsenode/trigfunction"),i=e("math/parsenode/inversetrigfunction"),a=e("math/parsenode/reducerfunction"),s=e("math/parsenode/doublereducerfunction"),o=e("math/parsenode/parametrizedreducerfunction"),u=e("math/types"),c=e("math/parsenode/constant"),l=c(1),p=c(0),f=c(.5);return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[l]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","Math.round",1),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),var:a.create("var","BuiltIn.var"),varp:a.create("varp","BuiltIn.varp"),cov:s.create("cov","BuiltIn.cov"),covp:s.create("covp","BuiltIn.covp"),corr:s.create("corr","BuiltIn.corr"),quantile:o.create("quantile","BuiltIn.quantile"),quartile:o.create("quartile","BuiltIn.quartile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:o.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:o.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:o.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",1,[p,l]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[p,l]),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",2,[f]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[f]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",2),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),invNorm:t.create("invNorm","BuiltIn.invNorm",1),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",2),TTest:o.create("TTest","BuiltIn.TTest"),TScore:o.create("TScore","BuiltIn.TScore"),distance:r.create("distance","BuiltIn.distance",[u.Point,u.Point],u.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[u.Point,u.Point],u.Point)}}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.mergeDependencies(e,r),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),r=e("./equation"),n=e("./identifier"),i=e("pjs");return i(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.mergeDependencies(r),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.isEquation=function(e){return e.getDependencies().indexOf(this._symbol)!==-1},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e},e.getSliderInfo=function(){if(this._expression.isConstant&&"number"==typeof this._expression.constantValue&&isFinite(this._expression.constantValue))return{value:this._expression.constantValue}}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r){if(t.length!==this._argSymbols.length)throw n.wrongArity(this._symbol,this._argSymbols.length,t.length);for(var i=Object.create(e),a=0;a<this._argSymbols.length;a++)i[this._argSymbols[a]]=t[a];return this._expression.getConcreteTree(i,r)},e.getArgs=function(){return this._args},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return r.indexOf(e)===-1})}})}),define("numeric",[],function(){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,i,a;for("undefined"==typeof t&&(t=15),i=.5,r=new Date;;){for(i*=2,a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(n=new Date,n-r>t)break}for(a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return n=new Date,1e3*(3*i-1)/(n-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t="return function ("+e.join(",")+") {"+t+"}",new Function(["numeric"],t)(numeric)},numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+t(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),n=e/Math.pow(10,r),i=n.toPrecision(numeric.precision);return 10===parseFloat(i)&&(r++,n=1,i=n.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+r.toString()}return"Infinity"}function r(e){var i;if("undefined"==typeof e)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return n.push(\'"\'+e+\'"\'),!1;if("boolean"==typeof e)return n.push(e.toString()),!1;if("number"==typeof e){var a=t(e),s=e.toPrecision(numeric.precision),o=parseFloat(e.toString()).toString(),u=[a,s,o,parseFloat(s).toString(),parseFloat(o).toString()];for(i=1;i<u.length;i++)u[i].length<a.length&&(a=u[i]);return n.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===e)return n.push("null"),!1;if("function"==typeof e){n.push(e.toString());var c=!1;for(i in e)e.hasOwnProperty(i)&&(c?n.push(",\\n"):n.push("\\n{"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return c&&n.push("}\\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return n.push("...Large Array..."),!0;var c=!1;for(n.push("["),i=0;i<e.length;i++)i>0&&(n.push(","),c&&n.push("\\n ")),c=r(e[i]);return n.push("]"),!0}n.push("{");var c=!1;for(i in e)e.hasOwnProperty(i)&&(c&&n.push(",\\n"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return n.push("}"),!0}var n=[];return r(e),n.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseCSV=function(e){var t,r,n=e.split("\\n"),i=[],a=/(([^\'",]*)|(\'[^\']*\')|("[^"]*")),/g,s=/^\\s*(([+-]?[0-9]+(\\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\\.[0-9]+)?(e[+-]?[0-9]+)?))\\s*$/,o=function(e){return e.substr(0,e.length-1)},u=0;for(r=0;r<n.length;r++){var c,l=(n[r]+",").match(a);if(l.length>0){for(i[u]=[],t=0;t<l.length;t++)c=o(l[t]),s.test(c)?i[u][t]=parseFloat(c):i[u][t]=c;u++}}return i},numeric.toCSV=function(e){var t,r,n,i,a,s,o=numeric.dim(e);for(n=o[0],i=o[1],s=[],t=0;t<n;t++){for(a=[],r=0;r<n;r++)a[r]=e[t][r].toString();s[t]=a.join(", ")}return s.join("\\n")+"\\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,r,n,i,a,s,o,u,c=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p="";for(t=0;t<c;t+=3)r=e[t],n=e[t+1],i=e[t+2],a=r>>2,s=((3&r)<<4)+(n>>4),o=((15&n)<<2)+(i>>6),u=63&i,t+1>=c?o=u=64:t+2>=c&&(u=64),p+=l.charAt(a)+l.charAt(s)+l.charAt(o)+l.charAt(u);return p}function r(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=e.length);var n,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1,s=0;\ne.length;for(n=t;n<r;n++)s=255&(a^e[n]),a=a>>>8^i[s];return a^-1}var n,i,a,s,o,u,c,l,p,f,h=e[0].length,m=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=r(d,12,29),d[29]=f>>24&255,d[30]=f>>16&255,d[31]=f>>8&255,d[32]=255&f,n=1,i=0,c=0;c<h;c++){for(c<h-1?d.push(0):d.push(1),o=3*m+1+(0===c)&255,u=3*m+1+(0===c)>>8&255,d.push(o),d.push(u),d.push(255&~o),d.push(255&~u),0===c&&d.push(0),l=0;l<m;l++)for(a=0;a<3;a++)o=e[a][c][l],o=o>255?255:o<0?0:Math.round(o),n=(n+o)%65521,i=(i+n)%65521,d.push(o);d.push(0)}return p=(i<<16)+n,d.push(p>>24&255),d.push(p>>16&255),d.push(p>>8&255),d.push(255&p),s=d.length-41,d[33]=s>>24&255,d[34]=s>>16&255,d[35]=s>>8&255,d[36]=255&s,f=r(d,37),d.push(f>>24&255),d.push(f>>16&255),d.push(f>>8&255),d.push(255&f),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+t(d)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,r;return"object"==typeof e?(t=e[0],"object"==typeof t?(r=t[0],"object"==typeof r?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return numeric.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+t+\';\\nif(typeof x === "number") { var xi = x; \'+e+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+e+";\\n    xi = x[i-1];\\n    "+e+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.mapreduce2=function(e,t){return numeric.compile("x","var n = x.length;\\nvar i,xi;\\n"+t+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.same=function e(t,r){var n,i;if(!(t instanceof Array&&r instanceof Array))return!1;if(i=t.length,i!==r.length)return!1;for(n=0;n<i;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){"undefined"==typeof r&&(r=0);var n,i=e[r],a=Array(i);if(r===e.length-1){for(n=i-2;n>=0;n-=2)a[n+1]=t,a[n]=t;return n===-1&&(a[0]=t),a}for(n=i-1;n>=0;n--)a[n]=numeric.rep(e,t,r+1);return a},numeric.dotMMsmall=function(e,t){var r,n,i,a,s,o,u,c,l,p,f;for(a=e.length,s=t.length,o=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(o),l=e[r],i=o-1;i>=0;i--){for(p=l[s-1]*t[s-1][i],n=s-2;n>=1;n-=2)f=n-1,p+=l[n]*t[n][i]+l[f]*t[f][i];0===n&&(p+=l[0]*t[0][i]),c[i]=p}u[r]=c}return u},numeric._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,i,a,s=numeric._getCol,o=t.length,u=Array(o),c=e.length,l=t[0].length,p=new Array(c),f=numeric.dotVV;for(--o,--c,n=c;n!==-1;--n)p[n]=Array(l);for(--l,n=l;n!==-1;--n)for(s(t,n,u),i=c;i!==-1;--i)a=0,r=e[i],p[i][n]=f(r,u);return p},numeric.dotMV=function(e,t){var r,n=e.length,i=(t.length,Array(n)),a=numeric.dotVV;for(r=n-1;r>=0;r--)i[r]=a(e[r],t);return i},numeric.dotVM=function(e,t){var r,n,i,a,s,o,u;for(i=e.length,a=t[0].length,s=Array(a),n=a-1;n>=0;n--){for(o=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,o+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(o+=e[0]*t[0][n]),s[n]=o}return s},numeric.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,i,a=e.length,s=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),s[t]=i}return s},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],s=/\\[i\\]$/,o="",u=!1;for(n=0;n<e.length;n++)s.test(e[n])?(i=e[n].substring(0,e[n].length-3),o=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+o+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(u?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric.pointwise2=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],s=/\\[i\\]$/,o="",u=!1;for(n=0;n<e.length;n++)s.test(e[n])?(i=e[n].substring(0,e[n].length-3),o=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="var _n = "+o+".length;\\nvar i"+(u?"":", ret = Array(_n)")+";\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric._biforeach=function e(t,r,n,i,a){if(i===n.length-1)return void a(t,r);var s,o=n[i];for(s=o-1;s>=0;s--)e("object"==typeof t?t[s]:t,"object"==typeof r?r[s]:r,n,i+1,a)},numeric._biforeach2=function e(t,r,n,i,a){if(i===n.length-1)return a(t,r);var s,o=n[i],u=Array(o);for(s=o-1;s>=0;--s)u[s]=e("object"==typeof t?t[s]:t,"object"==typeof r?r[s]:r,n,i+1,a);return u},numeric._foreach=function e(t,r,n,i){if(n===r.length-1)return void i(t);var a,s=r[n];for(a=s-1;a>=0;a--)e(t[a],r,n+1,i)},numeric._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var a,s=r[n],o=Array(s);for(a=s-1;a>=0;a--)o[a]=e(t[a],r,n+1,i);return o},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,i="";numeric.myIndexOf.call(numeric.mathfuns2,e)!==-1?(i="var "+t+" = Math."+t+";\\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),i),numeric[e]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+n("x","y")+"\\n}\\nreturn x;\\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),i),numeric[e+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+e+"eqV, S = numeric."+e+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],numeric.myIndexOf.call(numeric.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"x\\nvar i;\\nvar V = numeric."+e+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"(x)\\nvar i;\\nvar V = numeric."+e+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=numeric.compile("x","s","k",t[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+t[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+e+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+t[0]+"\\n}\\nreturn accum;\\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,i,a,s,o,e,u=numeric.dim(e),c=Math.abs,l=u[0],p=u[1],f=numeric.clone(e),h=numeric.identity(l);for(s=0;s<p;++s){var m=-1,d=-1;for(a=s;a!==l;++a)o=c(f[a][s]),o>d&&(m=a,d=o);for(r=f[m],f[m]=f[s],f[s]=r,i=h[m],h[m]=h[s],h[s]=i,e=r[s],o=s;o!==p;++o)r[o]/=e;for(o=p-1;o!==-1;--o)i[o]/=e;for(a=l-1;a!==-1;--a)if(a!==s){for(t=f[a],n=h[a],e=t[s],o=s+1;o!==p;++o)t[o]-=r[o]*e;for(o=p-1;o>0;--o)n[o]-=i[o]*e,--o,n[o]-=i[o]*e;0===o&&(n[0]-=i[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,i,a,s,o,u,c,l=t[0],p=1,f=numeric.clone(e);for(n=0;n<l-1;n++){for(i=n,r=n+1;r<l;r++)Math.abs(f[r][n])>Math.abs(f[i][n])&&(i=r);for(i!==n&&(u=f[i],f[i]=f[n],f[n]=u,p*=-1),a=f[n],r=n+1;r<l;r++){for(s=f[r],o=s[n]/a[n],i=n+1;i<l-1;i+=2)c=i+1,s[i]-=a[i]*o,s[c]-=a[c]*o;i!==l&&(s[i]-=a[i]*o)}if(0===a[n])return 0;p*=a[n]}return p*f[n][n]},numeric.transpose=function(e){var t,r,n,i,a,s=e.length,o=e[0].length,u=Array(o);for(r=0;r<o;r++)u[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=o-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=o-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},numeric.negtranspose=function(e){var t,r,n,i,a,s=e.length,o=e[0].length,u=Array(o);for(r=0;r<o;r++)u[r]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=o-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=o-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},numeric._random=function e(t,r){var n,i,a=t[r],s=Array(a);if(r===t.length-1){for(i=Math.random,n=a-1;n>=1;n-=2)s[n]=i(),s[n-1]=i();return 0===n&&(s[0]=i()),s}for(n=a-1;n>=0;n--)s[n]=e(t,r+1);return s},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if("undefined"==typeof r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},numeric.getBlock=function(e,t,r){function n(e,a){var s,o=t[a],u=r[a]-o,c=Array(u);if(a===i.length-1){for(s=u;s>=0;s--)c[s]=e[s+o];return c}for(s=u;s>=0;s--)c[s]=n(e[s+o],a+1);return c}var i=numeric.dim(e);return n(e,0)},numeric.setBlock=function(e,t,r,n){function i(e,n,s){var o,u=t[s],c=r[s]-u;if(s===a.length-1)for(o=c;o>=0;o--)e[o+u]=n[o];for(o=c;o>=0;o--)i(e[o+u],n[o],s+1)}var a=numeric.dim(e);return i(e,n,0),e},numeric.getRange=function(e,t,r){var n,i,a,s,o=t.length,u=r.length,c=Array(o);for(n=o-1;n!==-1;--n)for(c[n]=Array(u),a=c[n],s=e[t[n]],i=u-1;i!==-1;--i)a[i]=s[r[i]];return c},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,i,a,s,o=t[0],u=t[1];for(r=0,n=0,i=0;i<o;++i)r+=e[i][0].length;for(a=0;a<u;++a)n+=e[0][a][0].length;var c=Array(r);for(i=0;i<r;++i)c[i]=Array(n);var l,p,f,h,m,d=0;for(i=0;i<o;++i){for(l=n,a=u-1;a!==-1;--a)for(s=e[i][a],l-=s[0].length,f=s.length-1;f!==-1;--f)for(m=s[f],p=c[d+f],h=m.length-1;h!==-1;--h)p[l+h]=m[h];d+=e[i][0].length}return c},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,s,o,u=r[0],c=n[0],l=Array(u);for(a=u-1;a>=0;a--){for(i=Array(c),o=e[a],s=c-1;s>=3;--s)i[s]=o*t[s],--s,i[s]=o*t[s],--s,i[s]=o*t[s],--s,i[s]=o*t[s];for(;s>=0;)i[s]=o*t[s],--s;l[a]=i}return l},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,i){numeric.indexOf;if("string"!=typeof i){var a;i="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||r.indexOf(a)>=0||n.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\\n")}return numeric.compile(["y"],"var x = this;\\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\\n"+i+"\\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\\n  }\\n  return new numeric.T("+r+");\\n}\\nif(y.y) {\\n  return new numeric.T("+t+");\\n}\\nreturn new numeric.T("+e+");\\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function e(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,t.x),e(this.y,t.x)):new numeric.T(e(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),numeric.compile("var x = this;\\n"+r+"\\nif(x.y) {  "+t+"\\n}\\n"+e+"\\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex);","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x));","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x));","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,i,a,s,o,u,c,l,p,t,r,n,f,h,m,d,g,y,v,b=e.x.length,x=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),S=numeric.clone(e.y);for(t=0;t<b;t++){for(m=w[t][t],d=S[t][t],f=m*m+d*d,n=t,r=t+1;r<b;r++)m=w[r][t],d=S[r][t],h=m*m+d*d,h>f&&(n=r,f=h);for(n!==t&&(v=w[t],w[t]=w[n],w[n]=v,v=S[t],S[t]=S[n],S[n]=v,v=x[t],x[t]=x[n],x[n]=v,v=_[t],_[t]=_[n],_[n]=v),i=w[t],a=S[t],u=x[t],c=_[t],m=i[t],d=a[t],r=t+1;r<b;r++)g=i[r],y=a[r],i[r]=(g*m+y*d)/f,a[r]=(y*m-g*d)/f;for(r=0;r<b;r++)g=u[r],y=c[r],u[r]=(g*m+y*d)/f,c[r]=(y*m-g*d)/f;for(r=t+1;r<b;r++){for(s=w[r],o=S[r],l=x[r],p=_[r],m=s[t],d=o[t],n=t+1;n<b;n++)g=i[n],y=a[n],s[n]-=g*m-y*d,o[n]-=y*m+g*d;for(n=0;n<b;n++)g=u[n],y=c[n],l[n]-=g*m-y*d,p[n]-=y*m+g*d}}for(t=b-1;t>0;t--)for(u=x[t],c=_[t],r=t-1;r>=0;r--)for(l=x[r],p=_[r],m=w[r][t],d=S[r][t],n=b-1;n>=0;n--)g=u[n],y=c[n],l[n]-=m*g-d*y,p[n]-=m*y+d*g;return new numeric.T(x,_)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,i=0,a=e.length;if(n){for(;i<a;)t=e[i],r=r[t],n=n[t],i++;return new numeric.T(r,n)}for(;i<a;)t=e[i],r=r[t],i++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,i=this.y,a=0,s=e.length,o=t.x,u=t.y;if(0===s)return u?this.y=u:i&&(this.y=void 0),this.x=n,this;if(u){for(i||(i=numeric.rep(numeric.dim(n),0),this.y=i);a<s-1;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=o,i[r]=u,this}if(i){for(;a<s-1;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=o,o instanceof Array?i[r]=numeric.rep(numeric.dim(o),0):i[r]=0,this}for(;a<s-1;)r=e[a],n=n[r],a++;return r=e[a],n[r]=o,this},numeric.T.prototype.getRows=function(e,t){var r,n,i=t-e+1,a=Array(i),s=this.x,o=this.y;for(r=e;r<=t;r++)a[r-e]=s[r];if(o){for(n=Array(i),r=e;r<=t;r++)n[r-e]=o[r];return new numeric.T(a,n)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,r){var n,i=this.x,a=this.y,s=r.x,o=r.y;for(n=e;n<=t;n++)i[n]=s[n-e];if(o)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),n=e;n<=t;n++)a[n]=o[n-e];else if(a)for(n=e;n<=t;n++)a[n]=numeric.rep([s[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,i=t.x,a=t.y;return r[e]=i,a?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=a):n&&(n=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,i=numeric.getBlock;return n?new numeric.T(i(r,e,t),i(n,e,t)):new numeric.T(i(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,i=this.y,a=numeric.setBlock,s=r.x,o=r.y;return o?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(n,e,t,s),a(i,e,t,o),this):(a(n,e,t,s),void(i&&a(i,e,t,numeric.rep(numeric.dim(s),0))))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,i=t.y,a=numeric.rep;return i?new r(a(e,n),a(e,i)):new r(a(e,n))},numeric.T.diag=function e(t){t instanceof numeric.T||(t=new numeric.T(t));var r=t.x,n=t.y,e=numeric.diag;return n?new numeric.T(e(r),e(n)):new numeric.T(e(r))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=e[0]>=0?1:-1,n=r*numeric.norm2(e);t[0]+=n;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,i,a,s,o,u,c,l,p,f=t[0],h=numeric.clone(e),m=numeric.identity(f);for(n=0;n<f-2;n++){for(a=Array(f-n-1),r=n+1;r<f;r++)a[r-n-1]=h[r][n];if(numeric.norm2(a)>0){for(s=numeric.house(a),o=numeric.getBlock(h,[n+1,n],[f-1,f-1]),u=numeric.tensor(s,numeric.dot(s,o)),r=n+1;r<f;r++)for(c=h[r],l=u[r-n-1],i=n;i<f;i++)c[i]-=2*l[i-n];for(o=numeric.getBlock(h,[0,n+1],[f-1,f-1]),u=numeric.tensor(numeric.dot(o,s),s),r=0;r<f;r++)for(c=h[r],l=u[r],i=n+1;i<f;i++)c[i]-=2*l[i-n-1];for(o=Array(f-n-1),r=n+1;r<f;r++)o[r-n-1]=m[r];for(u=numeric.tensor(s,numeric.dot(s,o)),r=n+1;r<f;r++)for(p=m[r],l=u[r-n-1],i=0;i<f;i++)p[i]-=2*l[i]}}return{H:h,Q:m}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var r,n,i,a,s,o,u,c,l,p,f,h,m,d,g,y,v,b,x=(numeric.clone(e),numeric.dim(e)),_=x[0],w=numeric.identity(_);if(_<3)return{Q:w,B:[[0,_-1]]};var S=numeric.epsilon;for(b=0;b<t;b++){for(y=0;y<_-1;y++)if(Math.abs(e[y+1][y])<S*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),M=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[_-1,_-1]),t);for(h=Array(y+1),g=0;g<=y;g++)h[g]=w[g];for(m=numeric.dot(E.Q,h),g=0;g<=y;g++)w[g]=m[g];for(h=Array(_-y-1),g=y+1;g<_;g++)h[g-y-1]=w[g];for(m=numeric.dot(M.Q,h),g=y+1;g<_;g++)w[g]=m[g-y-1];return{Q:w,B:E.B.concat(numeric.add(M.B,y+1))}}if(i=e[_-2][_-2],a=e[_-2][_-1],s=e[_-1][_-2],o=e[_-1][_-1],c=i+o,u=i*o-a*s,l=numeric.getBlock(e,[0,0],[2,2]),c*c>=4*u){var T,P;T=.5*(c+Math.sqrt(c*c-4*u)),P=.5*(c-Math.sqrt(c*c-4*u)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,T+P)),numeric.diag(numeric.rep([3],T*P)))}else l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,c)),numeric.diag(numeric.rep([3],u)));for(r=[l[0][0],l[1][0],l[2][0]],n=numeric.house(r),h=[e[0],e[1],e[2]],m=numeric.tensor(n,numeric.dot(n,h)),g=0;g<3;g++)for(f=e[g],d=m[g],v=0;v<_;v++)f[v]-=2*d[v];for(h=numeric.getBlock(e,[0,0],[_-1,2]),m=numeric.tensor(numeric.dot(h,n),n),g=0;g<_;g++)for(f=e[g],d=m[g],v=0;v<3;v++)f[v]-=2*d[v];for(h=[w[0],w[1],w[2]],m=numeric.tensor(n,numeric.dot(n,h)),g=0;g<3;g++)for(p=w[g],d=m[g],v=0;v<_;v++)p[v]-=2*d[v];var I;for(y=0;y<_-2;y++){for(v=y;v<=y+1;v++)if(Math.abs(e[v+1][v])<S*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),M=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[_-1,_-1]),t);for(h=Array(v+1),g=0;g<=v;g++)h[g]=w[g];for(m=numeric.dot(E.Q,h),g=0;g<=v;g++)w[g]=m[g];for(h=Array(_-v-1),g=v+1;g<_;g++)h[g-v-1]=w[g];for(m=numeric.dot(M.Q,h),g=v+1;g<_;g++)w[g]=m[g-v-1];return{Q:w,B:E.B.concat(numeric.add(M.B,v+1))}}for(I=Math.min(_-1,y+3),r=Array(I-y),g=y+1;g<=I;g++)r[g-y-1]=e[g][y];for(n=numeric.house(r),h=numeric.getBlock(e,[y+1,y],[I,_-1]),m=numeric.tensor(n,numeric.dot(n,h)),g=y+1;g<=I;g++)for(f=e[g],d=m[g-y-1],v=y;v<_;v++)f[v]-=2*d[v-y];for(h=numeric.getBlock(e,[0,y+1],[_-1,I]),m=numeric.tensor(numeric.dot(h,n),n),g=0;g<_;g++)for(f=e[g],d=m[g],v=y+1;v<=I;v++)f[v]-=2*d[v-y-1];for(h=Array(I-y),g=y+1;g<=I;g++)h[g-y-1]=w[g];for(m=numeric.tensor(n,numeric.dot(n,h)),g=y+1;g<=I;g++)for(p=w[g],d=m[g-y-1],v=0;v<_;v++)p[v]-=2*d[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,i,a,s,o,u,c,l,p,f,h,m,d,g,y,v,b=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(b.H,t),_=numeric.T,w=e.length,S=x.B,E=numeric.dot(x.Q,numeric.dot(b.H,numeric.transpose(x.Q))),M=new _(numeric.dot(x.Q,b.Q)),T=S.length,P=Math.sqrt;for(n=0;n<T;n++)if(r=S[n][0],r===S[n][1]);else{if(a=r+1,s=E[r][r],o=E[r][a],u=E[a][r],c=E[a][a],0===o&&0===u)continue;l=-s-c,p=s*c-o*u,f=l*l-4*p,f>=0?(h=l<0?-.5*(l-P(f)):-.5*(l+P(f)),y=(s-h)*(s-h)+o*o,v=u*u+(c-h)*(c-h),y>v?(y=P(y),d=(s-h)/y,g=o/y):(v=P(v),d=u/v,g=(c-h)/v),i=new _([[g,-d],[d,g]]),M.setRows(r,a,i.dot(M.getRows(r,a)))):(h=-.5*l,m=.5*P(-f),y=(s-h)*(s-h)+o*o,v=u*u+(c-h)*(c-h),y>v?(y=P(y+m*m),d=(s-h)/y,g=o/y,h=0,m/=y):(v=P(v+m*m),d=u/v,g=(c-h)/v,h=m/v,m=0),i=new _([[g,-d],[d,g]],[[h,m],[m,-h]]),M.setRows(r,a,i.dot(M.getRows(r,a))))}var I=M.dot(e).dot(M.transjugate()),w=e.length,D=numeric.T.identity(w);for(a=0;a<w;a++)if(a>0)for(n=a-1;n>=0;n--){var C=I.get([n,n]),N=I.get([a,a]);numeric.neq(C.x,N.x)||numeric.neq(C.y,N.y)?(h=I.getRow(n).getBlock([n],[a-1]),m=D.getRow(a).getBlock([n],[a-1]),D.set([a,n],I.get([n,a]).neg().sub(h.dot(m)).div(C.sub(N)))):D.setRow(a,D.getRow(n))}for(a=0;a<w;a++)h=D.getRow(a),D.setRow(a,h.div(h.norm2()));return D=D.transpose(),D=M.transjugate().dot(D),{lambda:I.getDiag(),E:D}},numeric.ccsSparse=function(e){var t,r,n,i,a=e.length,s=[];for(n=a-1;n!==-1;--n){r=e[n];for(i in r){for(i=parseInt(i);i>=s.length;)s[s.length]=0;0!==r[i]&&s[i]++}}var t=s.length,o=Array(t+1);for(o[0]=0,n=0;n<t;++n)o[n+1]=o[n]+s[n];var u=Array(o[t]),c=Array(o[t]);for(n=a-1;n!==-1;--n){r=e[n];for(i in r)0!==r[i]&&(s[i]--,u[o[i]+s[i]]=n,c[o[i]+s[i]]=r[i])}return[o,u,c]},numeric.ccsFull=function(e){var t,r,n,i,a=e[0],s=e[1],o=e[2],u=numeric.ccsDim(e),c=u[0],l=u[1],p=numeric.rep([c,l],0);for(t=0;t<l;t++)for(n=a[t],i=a[t+1],r=n;r<i;++r)p[s[r]][t]=o[r];return p},numeric.ccsTSolve=function(e,t,r,n,i){function a(e){var t;if(0===r[e]){for(r[e]=1,t=s[e];t<s[e+1];++t)a(o[t]);i[p]=e,++p}}var s=e[0],o=e[1],u=e[2],c=s.length-1,l=Math.max,p=0;"undefined"==typeof n&&(r=numeric.rep([c],0)),"undefined"==typeof n&&(n=numeric.linspace(0,r.length-1)),"undefined"==typeof i&&(i=[]);var f,h,m,d,g,y,v;for(f=n.length-1;f!==-1;--f)a(n[f]);for(i.length=p,f=i.length-1;f!==-1;--f)r[i[f]]=0;for(f=n.length-1;f!==-1;--f)h=n[f],r[h]=t[h];for(f=i.length-1;f!==-1;--f){for(h=i[f],m=s[h],d=l(s[h+1],m),g=m;g!==d;++g)if(o[g]===h){r[h]/=u[g];break}for(v=r[h],g=m;g!==d;++g)y=o[g],y!==h&&(r[y]-=v*u[g])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,i,a){var s,o,u,c=0,l=i.length,p=this.k,f=this.k1,h=this.j;if(0===n[e])for(n[e]=1,h[0]=e,p[0]=o=t[e],f[0]=u=t[e+1];;)if(o>=u){if(i[l]=h[c],0===c)return;++l,--c,o=p[c],u=f[c]}else s=a[r[o]],0===n[s]?(n[s]=1,p[c]=o,++c,h[c]=s,o=t[s],f[c]=u=t[s+1]):++o},numeric.ccsLPSolve=function(e,t,r,n,i,a,s){var o,u,c,l,p,f,h,m,d,g=e[0],y=e[1],v=e[2],b=(g.length-1,t[0]),x=t[1],_=t[2];for(u=b[i],c=b[i+1],n.length=0,o=u;o<c;++o)s.dfs(a[x[o]],g,y,r,n,a);for(o=n.length-1;o!==-1;--o)r[n[o]]=0;for(o=u;o!==c;++o)l=a[x[o]],r[l]=_[o];for(o=n.length-1;o!==-1;--o){for(l=n[o],p=g[l],f=g[l+1],h=p;h<f;++h)if(a[y[h]]===l){r[l]/=v[h];break}for(d=r[l],h=p;h<f;++h)m=a[y[h]],m!==l&&(r[m]-=d*v[h])}return r},numeric.ccsLUP1=function(e,t){var r,n,i,a,s,o,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],p=[numeric.rep([c+1],0),[],[]],f=l[0],h=l[1],m=l[2],d=p[0],g=p[1],y=p[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),S=numeric.linspace(0,c-1),E=new numeric.ccsDFS(c);for("undefined"==typeof t&&(t=1),r=0;r<c;++r){for(x(l,e,v,b,r,S,E),a=-1,s=-1,n=b.length-1;n!==-1;--n)i=b[n],i<=r||(o=_(v[i]),o>a&&(s=i,a=o));for(_(v[r])<t*a&&(n=w[r],a=w[s],w[r]=a,S[a]=r,w[s]=n,S[n]=s,a=v[r],v[r]=v[s],v[s]=a),a=f[r],s=d[r],u=v[r],h[a]=w[r],m[a]=1,++a,n=b.length-1;n!==-1;--n)i=b[n],o=v[i],b[n]=0,v[i]=0,i<=r?(g[s]=i,y[s]=o,++s):(h[a]=w[i],m[a]=o/u,++a);f[r+1]=a,d[r+1]=s}for(n=h.length-1;n!==-1;--n)h[n]=S[h[n]];return{L:l,U:p,P:w,Pinv:S}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,i,a,s){var o,u,c,l=0,p=i.length,f=this.k,h=this.k1,m=this.j;if(0===n[e])for(n[e]=1,m[0]=e,f[0]=u=t[a[e]],h[0]=c=t[a[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(i[p]=a[m[l]],0===l)return;++p,--l,u=f[l],c=h[l]}else o=r[u],0===n[o]?(n[o]=1,f[l]=u,++l,m[l]=o,o=a[o],u=t[o],h[l]=c=t[o+1]):++u}},numeric.ccsLPSolve0=function(e,t,r,n,i,a,s,o){var u,c,l,p,f,h,m,d,g,y=e[0],v=e[1],b=e[2],x=(y.length-1,t[0]),_=t[1],w=t[2];for(c=x[i],l=x[i+1],n.length=0,u=c;u<l;++u)o.dfs(_[u],y,v,r,n,a,s);for(u=n.length-1;u!==-1;--u)p=n[u],r[s[p]]=0;for(u=c;u!==l;++u)p=_[u],r[p]=w[u];for(u=n.length-1;u!==-1;--u){for(p=n[u],d=s[p],f=y[p],h=y[p+1],m=f;m<h;++m)if(v[m]===d){r[d]/=b[m];break}for(g=r[d],m=f;m<h;++m)r[v[m]]-=g*b[m];r[d]=g}},numeric.ccsLUP0=function(e,t){var r,n,i,a,s,o,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],p=[numeric.rep([c+1],0),[],[]],f=l[0],h=l[1],m=l[2],d=p[0],g=p[1],y=p[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve0,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),S=numeric.linspace(0,c-1),E=new numeric.ccsDFS0(c);for("undefined"==typeof t&&(t=1),r=0;r<c;++r){for(x(l,e,v,b,r,S,w,E),a=-1,s=-1,n=b.length-1;n!==-1;--n)i=b[n],i<=r||(o=_(v[w[i]]),o>a&&(s=i,a=o));for(_(v[w[r]])<t*a&&(n=w[r],a=w[s],w[r]=a,S[a]=r,w[s]=n,S[n]=s),a=f[r],s=d[r],u=v[w[r]],h[a]=w[r],m[a]=1,++a,n=b.length-1;n!==-1;--n)i=b[n],o=v[w[i]],b[n]=0,v[w[i]]=0,i<=r?(g[s]=i,y[s]=o,++s):(h[a]=w[i],m[a]=o/u,++a);f[r+1]=a,d[r+1]=s}for(n=h.length-1;n!==-1;--n)h[n]=S[h[n]];return{L:l,U:p,P:w,Pinv:S}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),i=n[0],a=n[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof r?r=numeric.linspace(0,a-1):"number"==typeof r&&(r=[r]);var s,o,u,c,l,p=t.length,f=r.length,h=numeric.rep([a],0),m=[],d=[],g=[h,m,d],y=e[0],v=e[1],b=e[2],x=numeric.rep([i],0),_=0,w=numeric.rep([i],0);for(o=0;o<f;++o){c=r[o];var S=y[c],E=y[c+1];for(s=S;s<E;++s)u=v[s],w[u]=1,x[u]=b[s];for(s=0;s<p;++s)l=t[s],w[l]&&(m[_]=s,d[_]=x[t[s]],++_);for(s=S;s<E;++s)u=v[s],w[u]=0;h[o+1]=_}return g},numeric.ccsDot=function(e,t){var r,n,i,a,s,o,u,c,l,p,f,h=e[0],m=e[1],d=e[2],g=t[0],y=t[1],v=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),_=b[0],w=(b[1],x[1]),S=numeric.rep([_],0),E=numeric.rep([_],0),M=Array(_),T=numeric.rep([w],0),P=[],I=[],D=[T,P,I];for(i=0;i!==w;++i){for(a=g[i],s=g[i+1],l=0,n=a;n<s;++n)for(p=y[n],f=v[n],o=h[p],u=h[p+1],r=o;r<u;++r)c=m[r],0===E[c]&&(M[l]=c,E[c]=1,l+=1),S[c]=S[c]+d[r]*f;for(a=T[i],s=a+l,T[i+1]=s,n=l-1;n!==-1;--n)f=a+n,r=M[n],P[f]=r,I[f]=S[r],E[r]=0,S[r]=0;T[i+1]=T[i]+l;\n}return D},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],a=!0);var s,o,u,c,l,p,f=t[1],h=t[2],m=r[0].length-1,d=i.length-1,g=numeric.rep([m],0),y=Array(m),v=numeric.rep([m],0),b=Array(m),x=numeric.rep([d+1],0),_=[],w=[],S=numeric.ccsTSolve,E=0;for(s=0;s<d;++s){for(l=0,u=i[s],c=i[s+1],o=u;o<c;++o)p=e.Pinv[f[o]],b[l]=p,v[p]=h[o],++l;for(b.length=l,S(r,v,g,b,y),o=b.length-1;o!==-1;--o)v[b[o]]=0;if(S(n,g,v,y,b),a)return v;for(o=y.length-1;o!==-1;--o)g[y[o]]=0;for(o=b.length-1;o!==-1;--o)p=b[o],_[E]=p,w[E]=v[p],v[p]=0,++E;x[s+1]=E}return[x,_,w]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\\nvar xk,yk,zk;\\nvar i,j,j0,j1,k,p=0;\\n"+t+"for(i=0;i<n;++i) {\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Xj[j];\\n    x[k] = 1;\\n    Zj[p] = k;\\n    ++p;\\n  }\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Yj[j];\\n    y[k] = Yv[j];\\n    if(x[k] === 0) {\\n      Zj[p] = k;\\n      ++p;\\n    }\\n  }\\n  Zi[i+1] = p;\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\\n  j0 = Zi[i]; j1 = Zi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Zj[j];\\n    xk = x[k];\\n    yk = y[k];\\n"+e+"\\n    Zv[j] = zk;\\n  }\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\\n}\\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",\'if(typeof X === "number") return \'+A+\';\\nif(typeof Y === "number") return \'+B+";\\nreturn "+C+";\\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],i=e[2],a=numeric.sup(n)+1,s=r.length,o=numeric.rep([a],0),u=Array(s),c=Array(s),l=numeric.rep([a],0);for(t=0;t<s;++t)l[n[t]]++;for(t=0;t<a;++t)o[t+1]=o[t]+l[t];var p,f,h=o.slice(0);for(t=0;t<s;++t)f=n[t],p=h[f],u[p]=r[t],c[p]=i[t],h[f]=h[f]+1;return[o,u,c]},numeric.ccsGather=function(e){var t,r,n,i,a,s=e[0],o=e[1],u=e[2],c=s.length-1,l=o.length,p=Array(l),f=Array(l),h=Array(l);for(a=0,t=0;t<c;++t)for(n=s[t],i=s[t+1],r=n;r!==i;++r)f[a]=t,p[a]=o[r],h[a]=u[r],++a;return[p,f,h]},numeric.sdim=function e(t,r,n){if("undefined"==typeof r&&(r=[]),"object"!=typeof t)return r;"undefined"==typeof n&&(n=0),n in r||(r[n]=0),t.length>r[n]&&(r[n]=t.length);var i;for(i in t)t.hasOwnProperty(i)&&e(t[i],r,n+1);return r},numeric.sclone=function e(t,r,n){"undefined"==typeof r&&(r=0),"undefined"==typeof n&&(n=numeric.sdim(t).length);var i,a=Array(t.length);if(r===n-1){for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);return a}for(i in t)t.hasOwnProperty(i)&&(a[i]=e(t[i],r+1,n));return a},numeric.sdiag=function(e){var t,r,n=e.length,i=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,i[t]=[],i[t][t]=e[t],i[r]=[],i[r][r]=e[r];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,r,n,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){n=e[t];for(r in n)n.hasOwnProperty(r)&&("object"!=typeof i[r]&&(i[r]=[]),i[r][t]=n[r])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,i,a,s,o,u,c=e.length,l=(t.length,numeric.stranspose(t)),p=l.length,f=Array(c);for(i=c-1;i>=0;i--){for(u=[],r=e[i],s=p-1;s>=0;s--){o=0,n=l[s];for(a in r)r.hasOwnProperty(a)&&a in n&&(o+=r[a]*n[a]);o&&(u[s]=o)}f[i]=u}return f},numeric.sdotMV=function(e,t){var r,n,i,a,s=e.length,o=Array(s);for(n=s-1;n>=0;n--){r=e[n],a=0;for(i in r)r.hasOwnProperty(i)&&t[i]&&(a+=r[i]*t[i]);a&&(o[n]=a)}return o},numeric.sdotVM=function(e,t){var r,n,i,a,s=[];for(r in e)if(e.hasOwnProperty(r)){i=t[r],a=e[r];for(n in i)i.hasOwnProperty(n)&&(s[n]||(s[n]=0),s[n]+=a*i[n])}return s},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length,i=1e3*r+n;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,i,a=e[0].length,s=e.length,o=[];for(r=a-1;r>=0;--r)if(e[s-1][r]){for(i=o,n=0;n<s-2;n++)t=e[n][r],i[t]||(i[t]=[]),i=i[t];i[e[n][r]]=e[n+1][r]}return o},numeric.sgather=function e(t,r,n){"undefined"==typeof r&&(r=[]),"undefined"==typeof n&&(n=[]);var i,a,s;i=n.length;for(a in t)if(t.hasOwnProperty(a))if(n[i]=parseInt(a),s=t[a],"number"==typeof s){if(s){if(0===r.length)for(a=i+1;a>=0;--a)r[a]=[];for(a=i;a>=0;--a)r[a].push(n[a]);r[i+1].push(s)}}else e(s,r,n);return n.length>i&&n.pop(),r},numeric.cLU=function(e){var t,r,n,i,a,s,o=e[0],u=e[1],c=e[2],l=o.length,p=0;for(t=0;t<l;t++)o[t]>p&&(p=o[t]);p++;var f,h,m,d=Array(p),g=Array(p),y=numeric.rep([p],1/0),v=numeric.rep([p],-(1/0));for(n=0;n<l;n++)t=o[n],r=u[n],r<y[t]&&(y[t]=r),r>v[t]&&(v[t]=r);for(t=0;t<p-1;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=p-1;t>=1;t--)y[t]<y[t-1]&&(y[t-1]=y[t]);var b=0,x=0;for(t=0;t<p;t++)g[t]=numeric.rep([v[t]-y[t]+1],0),d[t]=numeric.rep([t-y[t]],0),b+=t-y[t]+1,x+=v[t]-t+1;for(n=0;n<l;n++)t=o[n],g[t][u[n]-y[t]]=c[n];for(t=0;t<p-1;t++)for(i=t-y[t],f=g[t],r=t+1;y[r]<=t&&r<p;r++)if(a=t-y[r],s=v[t]-t,h=g[r],m=h[a]/f[i]){for(n=1;n<=s;n++)h[n+a]-=m*f[n+i];d[r][t-y[r]]=m}var l,_,w,f=[],h=[],S=[],E=[],M=[],T=[];for(l=0,_=0,t=0;t<p;t++){for(i=y[t],a=v[t],w=g[t],r=t;r<=a;r++)w[r-i]&&(f[l]=t,h[l]=r,S[l]=w[r-i],l++);for(w=d[t],r=i;r<t;r++)w[r-i]&&(E[_]=t,M[_]=r,T[_]=w[r-i],_++);E[_]=t,M[_]=t,T[_]=1,_++}return{U:[f,h,S],L:[E,M,T]}},numeric.cLUsolve=function(e,t){var r,n,i=e.L,a=e.U,s=numeric.clone(t),o=i[0],u=i[1],c=i[2],l=a[0],p=a[1],f=a[2],h=l.length,m=(o.length,s.length);for(n=0,r=0;r<m;r++){for(;u[n]<r;)s[r]-=c[n]*s[u[n]],n++;n++}for(n=h-1,r=m-1;r>=0;r--){for(;p[n]>r;)s[r]-=f[n]*s[p[n]],n--;s[r]/=f[n],n--}return s},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(a[r][n]=i,i++);return a},numeric.cdelsq=function(e){var t,r,n,i,a,s=[[-1,0],[0,-1],[0,1],[1,0]],o=numeric.dim(e),u=o[0],c=o[1],l=[],p=[],f=[];for(t=1;t<u-1;t++)for(r=1;r<c-1;r++)if(!(e[t][r]<0)){for(n=0;n<4;n++)i=t+s[n][0],a=r+s[n][1],e[i][a]<0||(l.push(e[t][r]),p.push(e[i][a]),f.push(-1));l.push(e[t][r]),p.push(e[t][r]),f.push(4)}return[l,p,f]},numeric.cdotMV=function(e,t){var r,n,i,a=e[0],s=e[1],o=e[2],u=a.length;for(i=0,n=0;n<u;n++)a[n]>i&&(i=a[n]);for(i++,r=numeric.rep([i],0),n=0;n<u;n++)r[a[n]]+=o[n]*t[s[n]];return r},numeric.Spline=function(e,t,r,n,i){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,r,n,i,a=this.x,s=this.yl,o=this.yr,u=this.kl,c=this.kr,l=numeric.add,p=numeric.sub,f=numeric.mul;r=p(f(u[t],a[t+1]-a[t]),p(o[t+1],s[t])),n=l(f(c[t+1],a[t]-a[t+1]),p(o[t+1],s[t])),i=(e-a[t])/(a[t+1]-a[t]);var h=i*(1-i);return l(l(l(f(1-i,s[t]),f(i,o[t+1])),f(r,h*(1-i))),f(n,h*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,i=this.x,a=i.length,s=Math.floor;for(t=0,r=a-1;r-t>1;)n=s((t+r)/2),i[n]<=e?t=n:r=n;return this._at(e,t)}var o,a=e.length,u=Array(a);for(o=a-1;o!==-1;--o)u[o]=this.at(e[o]);return u},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,i=this.yl,a=this.yr,s=this.kl,o=this.kr,u=i.length,c=s,l=o,p=Array(u),f=Array(u),h=numeric.add,m=numeric.mul,d=numeric.div,g=numeric.sub;for(e=u-1;e!==-1;--e)t=n[e+1]-n[e],r=g(a[e+1],i[e]),p[e]=d(h(m(r,6),m(s[e],-4*t),m(o[e+1],-2*t)),t*t),f[e+1]=d(h(m(r,-6),m(s[e],2*t),m(o[e+1],4*t)),t*t);return new numeric.Spline(n,c,l,p,f)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,i=this.yr,a=this.kl,s=this.kr;"number"==typeof n[0]&&(n=[n],i=[i],a=[a],s=[s]);var o,u,c,l,p,f,h,m,d,g,y,v,b,x,_,w,S,E,M,T,P,I,D,C,N=n.length,O=r.length-1,t=Array(N),A=Math.sqrt;for(o=0;o!==N;++o){for(l=n[o],p=i[o],f=a[o],h=s[o],m=[],u=0;u!==O;u++){for(u>0&&p[u]*l[u]<0&&m.push(r[u]),w=r[u+1]-r[u],S=r[u],y=l[u],v=p[u+1],d=f[u]/w,g=h[u+1]/w,_=e(d-g+3*(y-v))+12*g*y,b=g+3*y+2*d-3*v,x=3*(g+d+2*(y-v)),_<=0?(M=b/x,E=M>r[u]&&M<r[u+1]?[r[u],M,r[u+1]]:[r[u],r[u+1]]):(M=(b-A(_))/x,T=(b+A(_))/x,E=[r[u]],M>r[u]&&M<r[u+1]&&E.push(M),T>r[u]&&T<r[u+1]&&E.push(T),E.push(r[u+1])),I=E[0],M=this._at(I,u),c=0;c<E.length-1;c++)if(D=E[c+1],T=this._at(D,u),0!==M)if(0===T||M*T>0)I=D,M=T;else{for(var L=0;;){if(C=(M*D-T*I)/(M-T),C<=I||C>=D)break;if(P=this._at(C,u),P*T>0)D=C,T=P,L===-1&&(M*=.5),L=-1;else{if(!(P*M>0))break;I=C,M=P,1===L&&(T*=.5),L=1}}m.push(C),I=E[c+1],M=this._at(I,u)}else m.push(I),I=D,M=T;0===T&&m.push(D)}t[o]=m}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var i,a=e.length,s=[],o=[],u=[],c=numeric.sub,l=numeric.mul,p=numeric.add;for(i=a-2;i>=0;i--)o[i]=e[i+1]-e[i],u[i]=c(t[i+1],t[i]);"string"!=typeof r&&"string"!=typeof n||(r=n="periodic");var f=[[],[],[]];switch(typeof r){case"undefined":s[0]=l(3/(o[0]*o[0]),u[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/o[0],1/o[0]);break;case"string":s[0]=p(l(3/(o[a-2]*o[a-2]),u[a-2]),l(3/(o[0]*o[0]),u[0])),f[0].push(0,0,0),f[1].push(a-2,0,1),f[2].push(1/o[a-2],2/o[a-2]+2/o[0],1/o[0]);break;default:s[0]=r,f[0].push(0),f[1].push(0),f[2].push(1)}for(i=1;i<a-1;i++)s[i]=p(l(3/(o[i-1]*o[i-1]),u[i-1]),l(3/(o[i]*o[i]),u[i])),f[0].push(i,i,i),f[1].push(i-1,i,i+1),f[2].push(1/o[i-1],2/o[i-1]+2/o[i],1/o[i]);switch(typeof n){case"undefined":s[a-1]=l(3/(o[a-2]*o[a-2]),u[a-2]),f[0].push(a-1,a-1),f[1].push(a-2,a-1),f[2].push(1/o[a-2],2/o[a-2]);break;case"string":f[1][f[1].length-1]=0;break;default:s[a-1]=n,f[0].push(a-1),f[1].push(a-1),f[2].push(1)}s="number"!=typeof s[0]?numeric.transpose(s):[s];var h=Array(s.length);if("string"==typeof r)for(i=h.length-1;i!==-1;--i)h[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),s[i]),h[i][a-1]=h[i][0];else for(i=h.length-1;i!==-1;--i)h[i]=numeric.cLUsolve(numeric.cLU(f),s[i]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function e(t,r){var n=t.length;if(1!==n){var i,a,s=Math.cos,o=Math.sin,u=Array(n/2),c=Array(n/2),l=Array(n/2),p=Array(n/2);for(a=n/2,i=n-1;i!==-1;--i)--a,l[a]=t[i],p[a]=r[i],--i,u[a]=t[i],c[a]=r[i];e(u,c),e(l,p),a=n/2;var f,h,m,d=-6.283185307179586/n;for(i=n-1;i!==-1;--i)--a,a===-1&&(a=n/2-1),f=d*i,h=s(f),m=o(f),t[i]=u[a]+h*l[a]-m*p[a],r[i]=c[a]+h*p[a]+m*l[a]}},numeric._ifftpow2=function e(t,r){var n=t.length;if(1!==n){var i,a,s=Math.cos,o=Math.sin,u=Array(n/2),c=Array(n/2),l=Array(n/2),p=Array(n/2);for(a=n/2,i=n-1;i!==-1;--i)--a,l[a]=t[i],p[a]=r[i],--i,u[a]=t[i],c[a]=r[i];e(u,c),e(l,p),a=n/2;var f,h,m,d=6.283185307179586/n;for(i=n-1;i!==-1;--i)--a,a===-1&&(a=n/2-1),f=d*i,h=s(f),m=o(f),t[i]=u[a]+h*l[a]-m*p[a],r[i]=c[a]+h*p[a]+m*l[a]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){numeric.fftpow2(e,t),numeric.fftpow2(r,n);var i,a,s,o,u,c=e.length;for(i=c-1;i!==-1;--i)a=e[i],o=t[i],s=r[i],u=n[i],e[i]=a*s-o*u,t[i]=a*u+o*s;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,s=a(2),o=Math.ceil(a(2*i-1)/s),u=Math.pow(2,o),c=numeric.rep([u],0),l=numeric.rep([u],0),p=Math.cos,f=Math.sin,h=-3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;e<i;e++)d[e]=n[e];for(c[0]=1,e=1;e<=u/2;e++)t=h*e*e,c[e]=p(t),l[e]=f(t),c[u-e]=p(t),l[u-e]=f(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,s=a(2),o=Math.ceil(a(2*i-1)/s),u=Math.pow(2,o),c=numeric.rep([u],0),l=numeric.rep([u],0),p=Math.cos,f=Math.sin,h=3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;e<i;e++)d[e]=n[e];for(c[0]=1,e=1;e<=u/2;e++)t=h*e*e,c[e]=p(t),l[e]=f(t),c[u-e]=p(t),l[u-e]=f(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var i,a,s,o,u,c,l,p,f,h,m=Math.max,d=numeric.clone(t),g=Array(r),m=(numeric.div,numeric.sub,Math.max),y=.001,v=Math.abs,b=Math.min,x=0;for(i=0;i<r;i++)for(var _=m(1e-6*n,1e-8);;){if(++x,x>20)throw new Error("Numerical gradient fails");if(d[i]=t[i]+_,a=e(d),d[i]=t[i]-_,s=e(d),d[i]=t[i],isNaN(a)||isNaN(s))_/=16;else{if(g[i]=(a-s)/(2*_),u=t[i]-_,c=t[i],l=t[i]+_,p=(a-n)/_,f=(n-s)/_,h=m(v(g[i]),v(n),v(a),v(s),v(u),v(c),v(l),1e-8),o=b(m(v(p-g[i]),v(f-g[i]),v(p-f))/h,_/h),!(o>y))break;_/=16}}return g},numeric.uncmin=function(e,t,r,n,i,a,s){var o=numeric.gradient;"undefined"==typeof s&&(s={}),"undefined"==typeof r&&(r=1e-8),"undefined"==typeof n&&(n=function(t){return o(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var u,c,l=t.length,p=e(t);if(isNaN(p))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,h=numeric.norm2;r=f(r,numeric.epsilon);var m,d,g,y,v,b,x,_,w,S,E=s.Hinv||numeric.identity(l),M=numeric.dot,T=(numeric.inv,numeric.sub),P=numeric.add,I=numeric.tensor,D=numeric.div,C=numeric.mul,N=numeric.all,O=numeric.isFinite,A=numeric.neg,L=0,q="";for(d=n(t);L<i;){if("function"==typeof a&&a(L,t,p,d,E)){q="Callback returned true";break}if(!N(O(d))){q="Gradient has Infinity or NaN";break}if(m=A(M(E,d)),!N(O(m))){q="Search direction has Infinity or NaN";break}if(S=h(m),S<r){q="Newton step smaller than tol";break}for(w=1,c=M(d,m),v=t;L<i&&!(w*S<r)&&(y=C(m,w),v=P(t,y),u=e(v),u-p>=.1*w*c||isNaN(u));)w*=.5,++L;if(w*S<r){q="Line search step size smaller than tol";break}if(L===i){q="maxit reached during line search";break}g=n(v),b=T(g,d),_=M(b,y),x=M(E,b),E=T(P(E,C((_+M(b,x))/(_*_),I(y,y))),D(P(I(x,y),I(y,x)),_)),t=v,p=u,d=g,++L}return{solution:t,f:p,gradient:d,invHessian:E,iterations:L,message:q}},numeric.Dopri=function(e,t,r,n,i,a,s){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=i,this.events=s,this.message=a},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,i,a,s,o,u,e,c,l,p,f,h=this,m=h.x,d=h.y,g=h.f,y=h.ymid,v=(m.length,Math.floor,.5),b=numeric.add,x=numeric.mul,_=numeric.sub;return n=m[t],i=m[t+1],s=d[t],o=d[t+1],c=i-n,a=n+v*c,u=y[t],l=_(g[t],x(s,1/(n-a)+2/(n-i))),p=_(g[t+1],x(o,1/(i-a)+2/(i-n))),f=[r(e-i)*(e-a)/r(n-i)/(n-a),r(e-n)*r(e-i)/r(n-a)/r(i-a),r(e-n)*(e-a)/r(i-n)/(i-a),(e-n)*r(e-i)*(e-a)/r(n-i)/(n-a),(e-i)*r(e-n)*(e-a)/r(n-i)/(i-a)],b(b(b(b(x(s,f[0]),x(u,f[1])),x(o,f[2])),x(l,f[3])),x(p,f[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,i=Math.floor;if("number"!=typeof e){var a=e.length,s=Array(a);for(t=a-1;t!==-1;--t)s[t]=this.at(e[t]);return s}var o=this.x;for(t=0,r=o.length-1;r-t>1;)n=i(.5*(t+r)),o[n]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,i,a,s){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof a&&(a=1e3);var o,u,c,l,p,f,h,m,d,g,y,v,b,x=[e],_=[r],w=[n(e,r)],S=[],E=.2,M=[.075,.225],T=[44/45,-56/15,32/9],P=[19372/6561,-25360/2187,64448/6561,-212/729],I=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],D=[35/384,0,500/1113,125/192,-2187/6784,11/84],C=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],N=[.2,.3,.8,8/9,1,1],O=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],A=0,L=(t-e)/10,q=0,k=numeric.add,F=numeric.mul,j=(Math.max,Math.min),V=Math.abs,B=numeric.norminf,R=Math.pow,z=numeric.any,G=numeric.lt,U=numeric.and,Y=(numeric.sub,new numeric.Dopri(x,_,w,S,-1,""));for("function"==typeof s&&(y=s(e,r));e<t&&q<a;)if(++q,e+L>t&&(L=t-e),o=n(e+N[0]*L,k(r,F(E*L,w[A]))),u=n(e+N[1]*L,k(k(r,F(M[0]*L,w[A])),F(M[1]*L,o))),c=n(e+N[2]*L,k(k(k(r,F(T[0]*L,w[A])),F(T[1]*L,o)),F(T[2]*L,u))),l=n(e+N[3]*L,k(k(k(k(r,F(P[0]*L,w[A])),F(P[1]*L,o)),F(P[2]*L,u)),F(P[3]*L,c))),p=n(e+N[4]*L,k(k(k(k(k(r,F(I[0]*L,w[A])),F(I[1]*L,o)),F(I[2]*L,u)),F(I[3]*L,c)),F(I[4]*L,l))),d=k(k(k(k(k(r,F(w[A],L*D[0])),F(u,L*D[2])),F(c,L*D[3])),F(l,L*D[4])),F(p,L*D[5])),f=n(e+L,d),h=k(k(k(k(k(F(w[A],L*O[0]),F(u,L*O[2])),F(c,L*O[3])),F(l,L*O[4])),F(p,L*O[5])),F(f,L*O[6])),g="number"==typeof h?V(h):B(h),g>i){if(L=.2*L*R(i/g,.25),e+L===e){Y.msg="Step size became too small";break}}else{if(S[A]=k(k(k(k(k(k(r,F(w[A],L*C[0])),F(u,L*C[2])),F(c,L*C[3])),F(l,L*C[4])),F(p,L*C[5])),F(f,L*C[6])),++A,x[A]=e+L,_[A]=d,w[A]=f,"function"==typeof s){var X,W,Q=e,Z=e+.5*L;if(v=s(Z,S[A-1]),b=U(G(y,0),G(0,v)),z(b)||(Q=Z,Z=e+L,y=v,v=s(Z,d),b=U(G(y,0),G(0,v))),z(b)){for(var H,J,K=0,$=1,ee=1;;){if("number"==typeof y)W=(ee*v*Q-$*y*Z)/(ee*v-$*y);else for(W=Z,m=y.length-1;m!==-1;--m)y[m]<0&&v[m]>0&&(W=j(W,(ee*v[m]*Q-$*y[m]*Z)/(ee*v[m]-$*y[m])));if(W<=Q||W>=Z)break;X=Y._at(W,A-1),J=s(W,X),H=U(G(y,0),G(0,J)),z(H)?(Z=W,v=J,b=H,ee=1,K===-1?$*=.5:$=1,K=-1):(Q=W,y=J,$=1,1===K?ee*=.5:ee=1,K=1)}return d=Y._at(.5*(e+W),A-1),Y.f[A]=n(W,X),Y.x[A]=W,Y.y[A]=X,Y.ymid[A-1]=d,Y.events=b,Y.iterations=q,Y}}e+=L,r=d,y=v,L=j(.8*L*R(i/g,.25),4*L)}return Y.iterations=q,Y},numeric.LU=function(e,t){t=t||!1;var r,n,i,a,s,o,u,c,l,p=Math.abs,f=e.length,h=f-1,m=new Array(f);for(t||(e=numeric.clone(e)),i=0;i<f;++i){for(u=i,o=e[i],l=p(o[i]),n=i+1;n<f;++n)a=p(e[n][i]),l<a&&(l=a,u=n);for(m[i]=u,u!=i&&(e[i]=e[u],e[u]=o,o=e[i]),s=o[i],r=i+1;r<f;++r)e[r][i]/=s;for(r=i+1;r<f;++r){for(c=e[r],n=i+1;n<h;++n)c[n]-=c[i]*o[n],++n,c[n]-=c[i]*o[n];n===h&&(c[n]-=c[i]*o[n])}}return{LU:e,P:m}},numeric.LUsolve=function(e,t){var r,n,i,a,s,o=e.LU,u=o.length,c=numeric.clone(t),l=e.P;for(r=u-1;r!==-1;--r)c[r]=t[r];for(r=0;r<u;++r)for(i=l[r],l[r]!==r&&(s=c[r],c[r]=c[i],c[i]=s),a=o[r],n=0;n<r;++n)c[r]-=c[n]*a[n];for(r=u-1;r>=0;--r){for(a=o[r],n=r+1;n<u;++n)c[r]-=c[n]*a[n];c[r]/=a[r]}return c},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,i,a,s,o,u,c=numeric.dim(e),l=c[0],p=c[1],f=numeric.identity(l),h=Array(l),m=Math.abs,d=numeric.diveq;for(e=numeric.clone(e),t=0;t<l;++t){for(n=0,a=e[t],s=f[t],r=1;r<p;++r)m(a[n])<m(a[r])&&(n=r);for(h[t]=n,d(s,a[n]),d(a,a[n]),r=0;r<l;++r)if(r!==t){for(o=e[r],u=o[n],i=p-1;i!==-1;--i)o[i]-=a[i]*u;for(o=f[r],i=l-1;i!==-1;--i)o[i]-=s[i]*u}}return{I:f,A:e,P:h}},numeric.__solveLP=function(e,t,r,n,i,a,s){var o,u,c,l,p=numeric.sum,f=(numeric.log,numeric.mul),h=numeric.sub,m=numeric.dot,d=numeric.div,g=numeric.add,y=e.length,v=r.length,b=!1,x=0,_=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),S=(numeric.leq,Math.sqrt),E=Math.abs,M=(numeric.muleq,numeric.norminf,numeric.any,Math.min),T=numeric.all,P=numeric.gt,I=Array(y),D=Array(v),C=(numeric.rep([v],1),numeric.solve),N=h(r,m(t,a)),O=m(e,e);for(c=x;c<i;++c){var A,L;for(A=v-1;A!==-1;--A)D[A]=d(t[A],N[A]);var q=w(D);for(A=y-1;A!==-1;--A)I[A]=p(q[A]);_=.25*E(O/m(e,I));var k=100*S(O/m(I,I));for((!isFinite(_)||_>k)&&(_=k),l=g(e,f(_,I)),u=m(q,D),A=y-1;A!==-1;--A)u[A][A]+=1;L=C(u,d(l,_),!0);var F=d(N,m(t,L)),j=1;for(A=v-1;A!==-1;--A)F[A]<0&&(j=M(j,-.999*F[A]));if(o=h(a,f(L,j)),N=h(r,m(t,o)),!T(P(N,0)))return{solution:a,message:"",iterations:c};if(a=o,_<n)return{solution:o,message:"",iterations:c};if(s){var V=m(e,l),B=m(t,l);for(b=!0,A=v-1;A!==-1;--A)if(V*B[A]<0){b=!1;break}}else b=!(a[y-1]>=0);if(b)return{solution:o,message:"Unbounded",iterations:c}}return{solution:a,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(e,t,r,n,i){var a,s=e.length,o=r.length,u=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,l=(numeric.div,numeric.add,numeric.rep([s],0).concat([1])),p=numeric.rep([o,1],-1),f=numeric.blockMatrix([[t,p]]),h=r,a=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),m=numeric.__solveLP(l,f,h,n,i,a,!1),d=numeric.clone(m.solution);d.length=s;var g=numeric.inf(u(r,c(t,d)));if(g<0)return{solution:NaN,message:"Infeasible",iterations:m.iterations};var y=numeric.__solveLP(e,t,r,n,i-m.iterations,d,!0);return y.iterations+=m.iterations,y},numeric.solveLP=function(e,t,r,n,i,a,s){if("undefined"==typeof s&&(s=1e3),"undefined"==typeof a&&(a=numeric.epsilon),"undefined"==typeof n)return numeric._solveLP(e,t,r,a,s);var o,u=n.length,c=n[0].length,l=t.length,p=numeric.echelonize(n),f=numeric.rep([c],0),h=p.P,m=[];for(o=h.length-1;o!==-1;--o)f[h[o]]=1;for(o=c-1;o!==-1;--o)0===f[o]&&m.push(o);var d=numeric.getRange,g=numeric.linspace(0,u-1),y=numeric.linspace(0,l-1),v=d(n,g,m),b=d(t,y,h),x=d(t,y,m),_=numeric.dot,w=numeric.sub,S=_(b,p.I),E=w(x,_(S,v)),M=w(r,_(S,i)),T=Array(h.length),P=Array(m.length);for(o=h.length-1;o!==-1;--o)T[o]=e[h[o]];for(o=m.length-1;o!==-1;--o)P[o]=e[m[o]];var I=w(P,_(T,_(p.I,v))),D=numeric._solveLP(I,E,M,a,s),C=D.solution;if(C!==C)return D;var N=_(p.I,w(i,_(v,C))),O=Array(e.length);for(o=h.length-1;o!==-1;--o)O[h[o]]=N[o];for(o=m.length-1;o!==-1;--o)O[m[o]]=C[o];return{solution:O,message:D.message,iterations:D.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\\nLine "+r+": "+e[r]+"\\nCurrent state: "+o[s]+"\\n")}e instanceof String&&e.split("\\n");var r,n,i,a,s=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],u=e.length,c=0,l={},p=[],f=0,h={},m=0,d=[],g=[],y=[];for(r=0;r<u;++r){i=e[r];var v=i.match(/\\S*/g),b=[];for(n=0;n<v.length;++n)""!==v[n]&&b.push(v[n]);if(0!==b.length){for(n=0;n<o.length&&i.substr(0,o[n].length)!==o[n];++n);if(n<o.length){if(s=n,1===n&&(a=b[1]),6===n)return{name:a,c:d,A:numeric.transpose(g),b:y,rows:l,vars:h}}else switch(s){case 0:case 1:t("Unexpected line");case 2:switch(b[0]){case"N":0===c?c=b[1]:t("Two or more N rows");break;case"L":l[b[1]]=f,p[f]=1,y[f]=0,++f;break;case"G":l[b[1]]=f,p[f]=-1,y[f]=0,++f;break;case"E":l[b[1]]=f,p[f]=0,y[f]=0,++f;break;default:t("Parse error "+numeric.prettyPrint(b))}break;case 3:h.hasOwnProperty(b[0])||(h[b[0]]=m,d[m]=0,g[m]=numeric.rep([f],0),++m);var x=h[b[0]];for(n=1;n<b.length;n+=2)if(b[n]!==c){var _=l[b[n]];g[x][_]=(p[_]<0?-1:1)*parseFloat(b[n+1])}else d[x]=parseFloat(b[n+1]);break;case 4:for(n=1;n<b.length;n+=2)y[l[b[n]]]=(p[l[b[n]]]<0?-1:1)*parseFloat(b[n+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,i,a,s){function o(e){var t,n,i=this,a=e.length,s=0,o=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);s<r;)i.S[s]=s++;for(s=0;s<r;s++)t=i.S[s],o=l(o+t+e[s%a]),n=i.S[o],i.S[s]=n,i.S[o]=t;i.g=function(e){var t=i.S,n=l(i.i+1),a=t[n],s=l(i.j+a),o=t[s];t[n]=o,t[s]=a;for(var u=t[l(a+o)];--e;)n=l(n+1),a=t[n],s=l(s+a),o=t[s],t[n]=o,t[s]=a,u=u*r+t[l(a+o)];return i.i=n,i.j=s,u},i.g(r)}function u(e,t,r,n,i){if(r=[],i=typeof e,t&&"object"==i)for(n in e)if(n.indexOf("S")<5)try{r.push(u(e[n],t-1))}catch(e){}return r.length?r:e+("string"!=i?"\\0":"")}function c(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[l(n)]=l((r^=19*t[l(n)])+e.charCodeAt(n));e="";for(n in t)e+=String.fromCharCode(t[n]);return e}function l(e){return e&r-1}t.seedrandom=function(l,p){var f,h=[];return l=c(u(p?[l,e]:arguments.length?l:[(new Date).getTime(),e,window],3),h),f=new o(h),c(f.S,e),t.random=function(){for(var e=f.g(n),t=s,o=0;e<i;)e=(e+o)*r,t*=r,o=f.g(1);for(;e>=a;)e/=2,t/=2,o>>>=1;return(e+o)/t},l},s=t.pow(r,n),i=t.pow(2,i),a=2*i,c(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],i=e.length;for(r=0;r<i;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],i=e.length;for(t=1;t<i;t++)n[t-1]=r(e[t]);return n}function n(e,t,r){var n,i,a,s,o;for(a=1;a<=r;a+=1){for(e[a][a]=1/e[a][a],o=-e[a][a],n=1;n<a;n+=1)e[n][a]=o*e[n][a];if(s=a+1,r<s)break;for(i=s;i<=r;i+=1)for(o=e[a][i],e[a][i]=0,n=1;n<=a;n+=1)e[n][i]=e[n][i]+o*e[n][a]}}function i(e,t,r,n){var i,a,s,o;for(a=1;a<=r;a+=1){for(o=0,i=1;i<a;i+=1)o+=e[i][a]*n[i];n[a]=(n[a]-o)/e[a][a]}for(s=1;s<=r;s+=1)for(a=r+1-s,n[a]=n[a]/e[a][a],o=-n[a],i=1;i<a;i+=1)n[i]=n[i]+o*e[i][a]}function a(e,t,r,n){var i,a,s,o,u,c;for(a=1;a<=r;a+=1){if(n[1]=a,c=0,s=a-1,s<1){if(c=e[a][a]-c,c<=0)break;e[a][a]=Math.sqrt(c)}else{for(o=1;o<=s;o+=1){for(u=e[o][a],i=1;i<o;i+=1)u-=e[i][a]*e[i][o];u/=e[o][o],e[o][a]=u,c+=u*u}if(c=e[a][a]-c,c<=0)break;e[a][a]=Math.sqrt(c)}n[1]=0}}function s(e,t,r,s,o,u,c,l,p,f,h,m,d,g,y,v){function b(){for(g[1]=g[1]+1,T=A,E=1;E<=f;E+=1){for(T+=1,V=-l[E],M=1;M<=s;M+=1)V+=c[M][E]*o[M];if(Math.abs(V)<W&&(V=0),E>h)y[T]=V;else if(y[T]=-Math.abs(V),V>0){for(M=1;M<=s;M+=1)c[M][E]=-c[M][E];l[E]=-l[E]}}for(E=1;E<=d;E+=1)y[A+m[E]]=0;for(q=0,j=0,E=1;E<=f;E+=1)y[A+E]<j*y[F+E]&&(q=E,j=y[A+E]/y[F+E]);return 0===q?999:0}function x(){for(E=1;E<=s;E+=1){for(V=0,M=1;M<=s;M+=1)V+=e[M][E]*c[M][q];y[E]=V}for(P=C,E=1;E<=s;E+=1)y[P+E]=0;for(M=d+1;M<=s;M+=1)for(E=1;E<=s;E+=1)y[P+E]=y[P+E]+e[E][M]*y[M];for(Y=!0,E=d;E>=1;E-=1){for(V=y[E],T=O+E*(E+3)/2,P=T-E,M=E+1;M<=d;M+=1)V-=y[T]*y[N+M],T+=M;if(V/=y[P],y[N+E]=V,m[E]<h)break;if(V<0)break;Y=!1,D=E}if(!Y)for(B=y[L+D]/y[N+D],E=1;E<=d&&!(m[E]<h)&&!(y[N+E]<0);E+=1)j=y[L+E]/y[N+E],j<B&&(B=j,D=E);for(V=0,E=C+1;E<=C+s;E+=1)V+=y[E]*y[E];if(Math.abs(V)<=W){if(Y)return v[1]=1,999;for(E=1;E<=d;E+=1)y[L+E]=y[L+E]-B*y[N+E];return y[L+d+1]=y[L+d+1]+B,700}for(V=0,E=1;E<=s;E+=1)V+=y[C+E]*c[E][q];for(R=-y[A+q]/V,X=!0,Y||B<R&&(R=B,X=!1),E=1;E<=s;E+=1)o[E]=o[E]+R*y[C+E],Math.abs(o[E])<W&&(o[E]=0);for(u[1]=u[1]+R*V*(R/2+y[L+d+1]),E=1;E<=d;E+=1)y[L+E]=y[L+E]-R*y[N+E];if(y[L+d+1]=y[L+d+1]+R,!X){for(V=-l[q],M=1;M<=s;M+=1)V+=o[M]*c[M][q];if(q>h)y[A+q]=V;else if(y[A+q]=-Math.abs(V),V>0){for(M=1;M<=s;M+=1)c[M][q]=-c[M][q];l[q]=-l[q]}return 700}for(d+=1,m[d]=q,T=O+(d-1)*d/2+1,E=1;E<=d-1;E+=1)y[T]=y[E],T+=1;if(d===s)y[T]=y[s];else{for(E=s;E>=d+1&&0!==y[E]&&(z=Math.max(Math.abs(y[E-1]),Math.abs(y[E])),G=Math.min(Math.abs(y[E-1]),Math.abs(y[E])),j=y[E-1]>=0?Math.abs(z*Math.sqrt(1+G*G/(z*z))):-Math.abs(z*Math.sqrt(1+G*G/(z*z))),z=y[E-1]/j,G=y[E]/j,1!==z);E-=1)if(0===z)for(y[E-1]=G*j,M=1;M<=s;M+=1)j=e[M][E-1],e[M][E-1]=e[M][E],e[M][E]=j;else for(y[E-1]=j,U=G/(1+z),M=1;M<=s;M+=1)j=z*e[M][E-1]+G*e[M][E],e[M][E]=U*(e[M][E-1]+j)-e[M][E],e[M][E-1]=j;y[T]=y[d]}return 0}function _(){if(T=O+D*(D+1)/2+1,P=T+D,0===y[P])return 798;if(z=Math.max(Math.abs(y[P-1]),Math.abs(y[P])),G=Math.min(Math.abs(y[P-1]),Math.abs(y[P])),j=y[P-1]>=0?Math.abs(z*Math.sqrt(1+G*G/(z*z))):-Math.abs(z*Math.sqrt(1+G*G/(z*z))),z=y[P-1]/j,G=y[P]/j,1===z)return 798;if(0===z){for(E=D+1;E<=d;E+=1)j=y[P-1],y[P-1]=y[P],y[P]=j,P+=E;for(E=1;E<=s;E+=1)j=e[E][D],e[E][D]=e[E][D+1],e[E][D+1]=j}else{for(U=G/(1+z),E=D+1;E<=d;E+=1)j=z*y[P-1]+G*y[P],y[P]=U*(y[P-1]+j)-y[P],y[P-1]=j,P+=E;for(E=1;E<=s;E+=1)j=z*e[E][D]+G*e[E][D+1],e[E][D+1]=U*(e[E][D]+j)-e[E][D+1],e[E][D]=j}return 0}function w(){for(P=T-D,E=1;E<=D;E+=1)y[P]=y[T],T+=1,P+=1;return y[L+D]=y[L+D+1],m[D]=m[D+1],D+=1,D<d?797:0}function S(){return y[L+d]=y[L+d+1],y[L+d+1]=0,m[d]=0,d-=1,g[2]=g[2]+1,0}var E,M,T,P,I,D,C,N,O,A,L,q,k,F,j,V,B,R,z,G,U,Y,X,W,Q,Z,H;k=Math.min(s,f),T=2*s+k*(k+5)/2+2*f+1,W=1e-60;do W+=W,Q=1+.1*W,Z=1+.2*W;while(Q<=1||Z<=1);for(E=1;E<=s;E+=1)y[E]=t[E];for(E=s+1;E<=T;E+=1)y[E]=0;for(E=1;E<=f;E+=1)m[E]=0;if(I=[],0===v[1]){if(a(e,r,s,I),0!==I[1])return void(v[1]=2);i(e,r,s,t),n(e,r,s)}else{for(M=1;M<=s;M+=1)for(o[M]=0,E=1;E<=M;E+=1)o[M]=o[M]+e[E][M]*t[E];for(M=1;M<=s;M+=1)for(t[M]=0,E=M;E<=s;E+=1)t[M]=t[M]+e[M][E]*o[E]}for(u[1]=0,M=1;M<=s;M+=1)for(o[M]=t[M],u[1]=u[1]+y[M]*o[M],y[M]=0,E=M+1;E<=s;E+=1)e[E][M]=0;for(u[1]=-u[1]/2,v[1]=0,C=s,N=C+s,L=N+k,O=L+k+1,A=O+k*(k+1)/2,F=A+f,E=1;E<=f;E+=1){for(V=0,M=1;M<=s;M+=1)V+=c[M][E]*c[M][E];y[F+E]=Math.sqrt(V)}for(d=0,g[1]=0,g[2]=0,H=0;;){if(H=b(),999===H)return;for(;;){if(H=x(),0===H)break;if(999===H)return;if(700===H)if(D===d)S();else{for(;;)if(_(),H=w(),797!==H)break;S()}}}}function o(e,n,i,a,o,u){e=t(e),n=t(n),i=t(i);var c,l,p,f,h,m,d=[],g=[],y=[],v=[],b=[];if(o=o||0,u=u?t(u):[void 0,0],a=a?t(a):[],l=e.length-1,p=i[1].length-1,!a)for(c=1;c<=p;c+=1)a[c]=0;for(c=1;c<=p;c+=1)g[c]=0;for(f=0,h=Math.min(l,p),c=1;c<=l;c+=1)y[c]=0;for(d[1]=0,c=1;c<=2*l+h*(h+5)/2+2*p+1;c+=1)v[c]=0;for(c=1;c<=2;c+=1)b[c]=0;return s(e,n,l,l,y,d,i,a,l,p,o,g,f,b,v,u),m="",1===u[1]&&(m="constraints are inconsistent, no solution!"),2===u[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:r(y),value:r(d),unconstrained_solution:r(n),iterations:r(b),iact:r(g),message:m}}e.solveQP=o}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var r,n=numeric.epsilon,i=1e-64/n,a=50,s=0,o=0,u=0,c=0,l=0,p=numeric.clone(e),f=p.length,h=p[0].length;if(f<h)throw"Need more rows than columns";var m=new Array(h),d=new Array(h);for(o=0;o<h;o++)m[o]=d[o]=0;var g=numeric.rep([h,h],0),y=0,v=0,b=0,x=0,_=0,w=0,S=0;for(o=0;o<h;o++){for(m[o]=v,S=0,l=o+1,u=o;u<f;u++)S+=p[u][o]*p[u][o];if(S<=i)v=0;else for(y=p[o][o],v=Math.sqrt(S),y>=0&&(v=-v),b=y*v-S,p[o][o]=y-v,u=l;u<h;u++){for(S=0,c=o;c<f;c++)S+=p[c][o]*p[c][u];for(y=S/b,c=o;c<f;c++)p[c][u]+=y*p[c][o]}for(d[o]=v,S=0,u=l;u<h;u++)S+=p[o][u]*p[o][u];if(S<=i)v=0;else{for(y=p[o][o+1],v=Math.sqrt(S),y>=0&&(v=-v),b=y*v-S,p[o][o+1]=y-v,u=l;u<h;u++)m[u]=p[o][u]/b;for(u=l;u<f;u++){for(S=0,c=l;c<h;c++)S+=p[u][c]*p[o][c];for(c=l;c<h;c++)p[u][c]+=S*m[c]}}_=Math.abs(d[o])+Math.abs(m[o]),_>x&&(x=_)}for(o=h-1;o!=-1;o+=-1){if(0!=v){for(b=v*p[o][o+1],u=l;u<h;u++)g[u][o]=p[o][u]/b;for(u=l;u<h;u++){for(S=0,c=l;c<h;c++)S+=p[o][c]*g[c][u];for(c=l;c<h;c++)g[c][u]+=S*g[c][o]}}for(u=l;u<h;u++)g[o][u]=0,g[u][o]=0;g[o][o]=1,v=m[o],l=o}for(o=h-1;o!=-1;o+=-1){for(l=o+1,v=d[o],u=l;u<h;u++)p[o][u]=0;if(0!=v){for(b=p[o][o]*v,u=l;u<h;u++){for(S=0,c=l;c<f;c++)S+=p[c][o]*p[c][u];for(y=S/b,c=o;c<f;c++)p[c][u]+=y*p[c][o]}for(u=o;u<f;u++)p[u][o]=p[u][o]/v}else for(u=o;u<f;u++)p[u][o]=0;p[o][o]+=1}for(n*=x,c=h-1;c!=-1;c+=-1)for(var E=0;E<a;E++){var M=!1;for(l=c;l!=-1;l+=-1){if(Math.abs(m[l])<=n){M=!0;break}if(Math.abs(d[l-1])<=n)break}if(!M){s=0,S=1;var T=l-1;for(o=l;o<c+1&&(y=S*m[o],m[o]=s*m[o],!(Math.abs(y)<=n));o++)for(v=d[o],b=t(y,v),d[o]=b,s=v/b,S=-y/b,u=0;u<f;u++)_=p[u][T],w=p[u][o],p[u][T]=_*s+w*S,p[u][o]=-_*S+w*s}if(w=d[c],l==c){if(w<0)for(d[c]=-w,u=0;u<h;u++)g[u][c]=-g[u][c];break}if(E>=a-1)throw"Error: no convergence.";for(x=d[l],_=d[c-1],v=m[c-1],b=m[c],y=((_-w)*(_+w)+(v-b)*(v+b))/(2*b*_),v=t(y,1),y=y<0?((x-w)*(x+w)+b*(_/(y-v)-b))/x:((x-w)*(x+w)+b*(_/(y+v)-b))/x,s=1,S=1,o=l+1;o<c+1;o++){for(v=m[o],_=d[o],b=S*v,v*=s,w=t(y,b),m[o-1]=w,s=y/w,S=b/w,y=x*s+v*S,v=-x*S+v*s,b=_*S,_*=s,u=0;u<h;u++)x=g[u][o-1],w=g[u][o],g[u][o-1]=x*s+w*S,g[u][o]=-x*S+w*s;for(w=t(y,b),d[o-1]=w,s=y/w,S=b/w,y=s*v+S*_,x=-S*v+s*_,u=0;u<f;u++)_=p[u][o-1],w=p[u][o],p[u][o-1]=_*s+w*S,p[u][o]=-_*S+w*s}m[l]=0,m[c]=y,d[c]=x}for(o=0;o<d.length;o++)d[o]<n&&(d[o]=0);for(o=0;o<h;o++)for(u=o-1;u>=0;u--)if(d[u]<d[o]){for(s=d[u],d[u]=d[o],d[o]=s,c=0;c<p.length;c++)r=p[c][o],p[c][o]=p[c][u],p[c][u]=r;for(c=0;c<g.length;c++)r=g[c][o],g[c][o]=g[c][u],g[c][u]=r;o=u}return{U:p,S:d,V:g}},numeric}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){\ne.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var s in e)e.hasOwnProperty(s)&&this._exports.push(s);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("numeric"),i=e("math/distance"),a=e("math/builtin"),s=e("graphing/label"),o=e("math/errormsg"),u=e("./error"),c=e("./optimizedregression"),l=e("./list"),p=e("./functioncall"),f=e("./identifier"),h=e("./constant"),m=e("./freevariable"),d=e("./expressionTypes"),g=e("math/types"),y=d.Subtract;return t(r,function(e,t,r){function d(e,t){for(var r=0,n=e.fn.apply(void 0,t),i=0;i<n.length;i++){var a=n[i];r+=a*a}return r/n.length}function v(e,t){return e.fn.apply(void 0,t)}function b(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n].fn.apply(void 0,t);r.push(i)}return r}function x(e,t,r,i,a){for(var s=[],o=0;o<t.length;o++)s.push(0);for(var u=b(t,s),c=n.LU(n.dot(u,n.transpose(u)),!0),l=s,p=0;p<2;p++){var f=v(e,s),h=n.neg(n.LUsolve(c,n.dot(u,f)));if(!n.all(n.isFinite(h)))return w(e,t,r,i,a);s=n.add(l,h),l=s}return{solution:s,MSE:d(e,s)}}function _(e,t,r,i){for(var a=r,s=d(e,a),o=.001,u=2,c=.1,l=[],p=0;p<t.length;p++)l.push(1);for(var f=0,h=!1,m=b(t,a),g=a,y=s;f<i&&!h;){var x=v(e,a),_=n.transpose(m),w=n.dot(m,_);if(!n.all(n.isFinite(x)))break;if(!n.all(n.isFinite(w)))break;for(var S=!1;f<i&&!h&&!S;){f+=1;var E=n.LU(n.add(w,n.diag(n.mul(o,l))),!0),M=n.neg(n.LUsolve(E,n.dot(m,x))),T=M;if(a=n.add(g,T),s=d(e,a),h=n.all(n.eq(a,g))){g=a,y=s;break}var P;if(isFinite(s)&&s<=y&&(P=b(t,a),S=n.all(n.isFinite(P))),S){m=P,g=a,y=s,o*=c,o=Math.max(1e-64,o);break}o*=u}}return{solution:g,MSE:d(e,g)}}function w(e,t,r,n,a){var s,o=[];for(n||(n={}),a||(a={}),s=0;s<r.length;s++){var u=r[s];a[u]&&isFinite(a[u].constantValue)?o.push(+a[u].constantValue):n.hasOwnProperty(u)&&isFinite(n[u])?o.push(+n[u]):o.push(1)}var c=I(30,r),l=D(e,t,c,3,5),p=D(e,t,l,60,1),f=_(e,t,p[0],250),h=_(e,t,o,100);return isFinite(h.MSE)?h.MSE<f.MSE?h:i.approx(h.MSE,f.MSE,8)?h:f:f}function S(e,t,r,n){var i,a,s=t.getDependencies();for(a=0;a<s.length;a++)if(!e.validRegressionParameter(s[a]))throw o.invalidRegressionParameter(s[a]);var u=t.getCompiledFunction(s);if(s.length){var c={};for(a=1;a<s.length;a++)c[s[a]]=m(s[0]);var l=t.substitute(c).isLinear(s[0]),p=[];for(a=0;a<s.length;a++)p.push(t.takeDerivative(s[a]).getCompiledFunction(s));i=l?x(u,p,s,r,n):w(u,p,s,r,n)}else i={solution:[],MSE:d(u,[])};var f={};for(a=0;a<s.length;a++)f[s[a]]=h(i.solution[a]);return f}function E(e,t){var r=e.length,n=e[0],a=t[0],s=e[r-1],o=t[r-1];if(!(isFinite(n)&&isFinite(s)&&isFinite(a)&&isFinite(o)))return!1;if(o-a===0)return!1;var u=s-n;if(0===u)return!1;for(var c=1;c<r-1;c++){var l=e[c],p=t[c],f=(o*(l-n)+a*(s-l))/u;if(!i.approx(p,f,5))return!1}return!0}function M(e,t,r){var n=Object.create(t);for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return l.wrap(e.getConcreteTree(n))}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof f||e instanceof l,this._logLhs=p("ln",[e]),this._rhs=r,this._difference=y([e,r]),this._logDifference=y([p("ln",[e]),p("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=s.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var a=n[i].match(/_(.*)/);if(a&&(r="e_"+a[1],!e[r]))return r}for(var o=1;;){if(r="e_"+o,!e[r])return r;o++}},e.getRHSModel=function(e,t){function r(e,t){for(var r=0;r<n.length;r++)if(n[r].node===this)return n[r].tmpVar;var a=m(this.tmpVar()),s=this.getConcreteTree(e);return s.getDependencies().length&&(i=!1),n.push({node:this,tmpVar:a,symbol:a._symbol,concrete:s}),a}var n=[],i=!0,a={List:r,TableColumn:r,Range:r},s=this._rhs.tryGetConcreteTree(e,a);return{node:s,substituted:s.isError?s:s.substitute(t),replacedNodes:n,isValid:i}};var T=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],P=function(e){var t=503*e%T.length;return T[t]},I=function(e,t){for(var r,n=[],i=t.length,a=0;a<e;a++){r=[];for(var s=0;s<i;s++)0===a?r[s]=0:1===a?r[s]=1:r[s]=P(a*i+s);n.push(r)}return n},D=function(e,t,r,n,i){for(var a=[],s=0;s<r.length;s++)a.push({soln:_(e,t,r[s],n),startingVals:r[s]});a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var o=[],u=0;u<i;u++)o.push(a[u].startingVals);return o};e.computeStatistics=function(e,t,r,n,s){if(r.getDependencies().length)throw o.optimizationError();var u=0;r.eachElement(function(e){var t=e.constantValue;u+=t*t});var c=u/r.length;if(!isFinite(c))throw o.optimizationError();if(e.getDependencies().length>0)return{RMSE:Math.sqrt(c)};var p=g.isList(e.valueType)?a.varp(e.asValue()):0;if(e.getDependencies().length||!isFinite(p)||p<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(c)};var f=1-c/p;if(t.isValid&&1===t.replacedNodes.length){var h=[],m=[],d=n&&(s===C.LINLOG||s===C.LOGLOG);l.eachArgs([t.replacedNodes[0].concrete,e],function(e){h.push(d?Math.log(e[0].constantValue):+e[0].constantValue),m.push(+e[1].constantValue)});var y=a.corr(h,m);if(i.approx(y*y,f,8))return{r:y,rsquared:y*y}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var s=a[0].getExports();if(1===s.length&&n.indexOf(s[0])!==-1){for(var o=1;o<a.length;o++)if(a[o].getDependencies().indexOf(e)!==-1)return;r=r?r:i}}}return r?r:void 0};var C={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return C.NONE;var r=t.substituted;if(r.isError)return C.NONE;if(r.valueType!==g.Number)return C.NONE;var n=r.getDependencies();if(1!==n.length)return C.NONE;if(isFinite(t.node.polynomialOrder(n[0])))return C.NONE;var i=r.getCompiledFunction(n).fn,a=t.replacedNodes[0].concrete;if(r.valueType!==g.Number)return C.NONE;var s=a.mapElements(function(e){return+e.constantValue});if(s.length<3)return C.NONE;s.sort(function(e,t){return e-t});var o=s.map(i),u=o.map(Math.log),c=s.map(Math.log),p=!0;return l.wrap(e).eachElement(function(e){isFinite(Math.log(+e.constantValue))||(p=!1)}),E(s,u)&&p?C.LOGLIN:E(c,u)&&p?C.LOGLOG:E(c,o)?C.LINLOG:C.NONE},e.optimize=function(e,t,r,n,i){var a=this._lhs.getConcreteTree(t),o=this._rhs.getConcreteTree(t);this.typeCheck([a,o]);var u,p=l.wrap(this._difference.getConcreteTree(t)),f=S(e,p,this.userData.regressionParameters,n),h=this.getRHSModel(t,f),m=M(this._difference,t,f),d=this.linearizingTransformation(a,h);if(!this.userData.isLogModeRegression||d!==C.LOGLIN&&d!==C.LOGLOG)u=this.computeStatistics(a,h,m,this.userData.isLogModeRegression,d);else{var g=this._logDifference.getConcreteTree(t),y=this._logLhs.getConcreteTree(t);f=S(e,g,this.userData.regressionParamters,n),h=this.getRHSModel(t,f),m=M(this._difference,t,f);var v=M(this._logDifference,t,f);u=this.computeStatistics(y,h,v,this.userData.isLogModeRegression,d)}var b=this.chooseResidualVariable(r),x=this.getResidualSuggestionId(b,i);return this.userData.residualVariable=s.identifierToLatex(b),c(f,m,u,h.substituted,{isModelValid:h.isValid,residualVariable:b,residualSuggestionId:x,shouldSuggestLogMode:d!==C.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof u)return e;throw e}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?o.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/image",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t,r,n){e.isImage=!0,e.init=function(e,r){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.moveStrategy=r,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height)}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var r=0;r<e.length;r++)Array.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0];e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier");return t(r,function(e,t){function s(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(s))}catch(e){if(!(e instanceof r))throw e;i[a]=e}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.mergeDependencies(r)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/broadcast","math/parsenode/listaccess","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/polygon","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/functionexponent","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression"],function(e){var t=e("math/parsenode/expressionTypes"),r={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),Broadcast:e("math/parsenode/broadcast"),ListAccess:e("math/parsenode/listaccess"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),Polygon:e("math/parsenode/polygon"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),FunctionExponent:e("math/parsenode/functionexponent"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Image:e("math/parsenode/image"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator[\'"+a+"\']");for(var s in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(s)&&(r.BuiltInFunction[s].prototype.type="BuiltInFunction[\'"+s+"\']");return r}),define("math/parser/char-codes",["require","exports"],function(e,t){"use strict";function r(e){return 48<=e&&e<=57}function n(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}function a(e){return n(e)||i(e)}function s(e){return 92===e}function o(e){return 46===e}function u(e){return 39===e}function c(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=r,t.isLowerCaseLetter=n,t.isUpperCaseLetter=i,t.isLetter=a,t.isBackslash=s,t.isDot=o,t.isSingleQuote=u,t.isWhitespace=c}),define("math/parser/input-span",["require","exports"],function(e,t){"use strict";function r(e,t,r){return{input:e,start:t,end:r}}function n(e,t){return r(e,t,t)}function i(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return r(e.input,e.start,t.end)}function a(e){return e.input.slice(e.start,e.end)}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=r,t.emptySpanAt=n,t.joinSpans=i,t.slice=a}),define("math/parser/latex-lexer",["require","exports","./char-codes","./input-span"],function(e,t,r,n){"use strict";function i(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function a(e,t,r){return{type:e,span:t,val:r}}function s(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function o(e){return u(e,0,n.emptySpanAt(e,0))}function u(e,t,n){for(;r.isWhitespace(e.charCodeAt(t));)t+=1;var i=m(e,t);return s(e,n,t,i)}function c(e){return u(e.input,e.token.span.end,e.token.span)}function l(e){return e.token}function p(e,t){if(l(e).type!==t)throw"Parse Error: expected "+t+".";return c(e)}function f(e,t){return l(e).type===t}function h(e){return e.pos>=e.input.length}function m(e,t){var i=t;if(t>=e.length)return a("End",n.emptySpanAt(e,t),"");var s=e.charCodeAt(t);if(r.isDigit(s)){var o=n.Span(e,i,t+1);return a("Digit",o,e.charAt(i))}if(r.isLetter(s)){var o=n.Span(e,i,t+1);return a("Letter",o,e.charAt(i))}if(r.isBackslash(s)){if(t+=1,r.isLetter(e.charCodeAt(t))){for(;r.isLetter(e.charCodeAt(t));)t+=1;var o=n.Span(e,i,t),u=n.slice(o),c=d[u]||"Cmd";return a(c,o,u)}t+=1;var o=n.Span(e,i,t),u=n.slice(o);return a("EscapedSymbol",o,u)}if(r.isSingleQuote(s)){for(t+=1;r.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;var o=n.Span(e,i,t),u=n.slice(o);return a("Primes^",o,u)}var o=n.Span(e,i,t),u=n.slice(o);return a("Primes",o,u)}var o=n.Span(e,i,t+1),u=e.charAt(i),c=g[u]||"Symbol";return a(c,o,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.spanStates=i,t.LatexToken=a,t.lex=o,t.advance=c,t.peek=l,t.eat=p,t.isAt=f,t.isDone=h;var d={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},g={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}}),define("math/parser/latex-node",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Group",span:e,args:t}}function n(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function i(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function a(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function s(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function o(e,t){return{type:"OperatorName",span:e,arg:t}}function u(e,t){return{type:"Symbol",span:e,val:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=r,t.Sqrt=n,t.Frac=i,t.SupSub=a,t.LeftRight=s,t.OperatorName=o,t.Symbol=u}),define("math/parser/latex-parser",["require","exports","./latex-lexer","./input-span","./latex-node"],function(e,t,r,n,i){"use strict";function a(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function s(e){var t=u(r.lex(e),!1),i=t.state,a=t.tree;if(!r.isDone(i))throw"Parse error: unexpected "+n.slice(r.peek(i).span)+".";return a}function o(e,t){return{state:e,tree:t}}function u(e,t){var n=e,a=[];e:for(;!r.isDone(e);){var s=r.peek(e);switch(s.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===s.type&&t)break e;var u=void 0;if(d=c(e),e=d.state,u=d.tree,"Group"===u.type)for(var l=0,p=u.args;l<p.length;l++){var f=p[l];a.push(f)}else a.push(u);break;case"}":case"Right":case"End":break e;default:var h=s.type;throw"Unexpected token type "+h+"."}}var m=r.spanStates(n,e);return o(e,i.Group(m,a));var d}function c(e){var t=r.peek(e);switch(t.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=r.advance(e),o(e,t);case"[":case"]":return e=r.advance(e),o(e,i.Symbol(t.span,t.val));case"{":e=r.advance(e);var n=void 0;return s=u(e,!1),e=s.state,n=s.tree,e=r.eat(e,"}"),o(e,n);case"^":case"_":case"Primes":case"Primes^":return m(e);case"Left":return h(e);case"Frac":return f(e);case"Sqrt":return p(e);case"OperatorName":return l(e);case"}":case"Right":throw"Parse Error: unexpected "+t.val+".";case"End":throw"Parse Error: unexpected end.";default:var a=t.type;throw"Unexpected token type "+a+"."}var s}function l(e){var t=e,n=r.peek(e);e=r.eat(e,"OperatorName");var a;u=d(e,n),e=u.state,a=u.tree;var s=r.spanStates(t,e);return o(e,i.OperatorName(s,a));var u}function p(e){var t=e,n=r.peek(e);e=r.eat(e,"Sqrt");var a;r.isAt(e,"[")&&(c=g(e),e=c.state,a=c.tree);var s;l=d(e,n),e=l.state,s=l.tree;var u=r.spanStates(t,e);return o(e,i.Sqrt(u,a,s));var c,l}function f(e){var t=e,n=r.peek(e);e=r.eat(e,"Frac");var a;c=d(e,n),e=c.state,a=c.tree;var s;l=d(e,n),e=l.state,s=l.tree;var u=r.spanStates(t,e);return o(e,i.Frac(u,a,s));var c,l}function h(e){var t=e;e=r.eat(e,"Left");var n=r.peek(e);e=r.advance(e);var a;l=u(e,!1),e=l.state,a=l.tree,e=r.eat(e,"Right");var s=r.peek(e);e=r.advance(e);var c=r.spanStates(t,e);return o(e,i.LeftRight(c,n,s,a));var l}function m(e){var t,n,a=e,s=0;e:for(;!r.isDone(e);){var u=r.peek(e);switch(u.type){case"^":if(e=r.advance(e),t)throw"Parse Error: double superscript.";l=d(e,u),e=l.state,t=l.tree;break;case"_":if(e=r.advance(e),n)throw"Parse Error: double subscript.";p=d(e,u),e=p.state,n=p.tree;break;case"Primes":if(e=r.advance(e),s>0)throw"Parse Error: double primes.";s=u.val.length;break;case"Primes^":if(e=r.advance(e),s>0)throw"Parse Error: double primes.";if(t)throw"Parse Error: double superscript";s=u.val.length-1,f=d(e,u),e=f.state,t=f.tree;break;default:break e}}var c=r.spanStates(a,e);return o(e,i.SupSub(c,t,n,s));var l,p,f}function d(e,t){var s,u=a(t.type);if(u<=0)throw new Error("Programming Error: greediness must be greater than 0.");var l=a(r.peek(e).type);if(l>0&&l<=u){var p=n.slice(t.span),f=n.slice(r.peek(e).span);throw"Parse Error: can\'t use "+f+" as argument of "+p+". Use {}."}return h=c(e),e=h.state,s=h.tree,"Group"!==s.type&&(s=i.Group(s.span,[s])),o(e,s);var h}function g(e){e=r.eat(e,"[");var t;return n=u(e,!0),e=n.state,t=n.tree,e=r.eat(e,"]"),o(e,t);var n}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=s}),define("math/parser/command-aliases",["require","exports","./char-codes"],function(e,t,r){"use strict";function n(e){for(var t=0;r.isBackslash(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),i[e]||e}Object.defineProperty(t,"__esModule",{value:!0});var i={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var"};t.translateCmd=n}),define("math/parser/surface-node",["require","exports","./command-aliases"],function(e,t,r){"use strict";function n(e,t){return{type:"Equals",span:e,args:t}}function i(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function a(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function s(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function o(e,t){return{type:"Tilde",span:e,args:t}}function u(e,t){return{type:"Pos",span:e,args:t}}function c(e,t){return{type:"Neg",span:e,args:t}}function l(e,t){return{type:"Add",span:e,args:t}}function p(e,t){return{type:"Sub",span:e,args:t}}function f(e,t){return{type:"Mul",span:e,args:t}}function h(e,t){return{type:"Div",span:e,args:t}}function m(e,t){return{type:"Bang",span:e,args:t}}function d(e,t){return{type:"Call",span:e,args:t}}function g(e,t){return{type:"ImplicitCall",span:e,args:t}}function y(e,t){return{type:"Index",span:e,args:t}}function v(e,t){return{type:"Paren",span:e,args:t}}function b(e,t){return{type:"List",span:e,args:t}}function x(e,t){return{type:"Pipes",span:e,args:t}}function _(e,t){return{type:"Subscript",span:e,args:t}}function w(e,t){return{type:"Superscript",span:e,args:t}}function S(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function E(e,t){return{type:"Seq",span:e,args:t}}function M(e,t){return{type:"Sqrt",span:e,args:t}}function T(e,t){return{type:"Nthroot",span:e,args:t}}function P(e,t){return{type:"Frac",span:e,args:t}}function I(e,t){return{type:"Derivative",span:e,args:t}}function D(e,t){return{type:"Integral",span:e,args:t}}function C(e,t){return{type:"EmptyIntegral",span:e,args:t}}function N(e,t){return{type:"Sum",span:e,args:t}}function O(e,t){return{type:"Product",span:e,args:t}}function A(e,t){return{type:"Piecewise",span:e,args:t}}function L(e){return{type:"EmptyPiecewise",span:e}}function q(e,t){return{type:"Colon",span:e,args:t}}function k(e,t){return{type:"Ellipsis",span:e,args:t}}function F(e,t){return{type:"PercentOf",span:e,args:t}}function j(e,t){return{type:"Juxt",span:e,args:t}}function V(e,t){return{type:"Letter",span:e,val:t}}function B(e,t){return{type:"Decimal",span:e,val:t}}function R(e,t){return{type:"Cmd",span:e,val:r.translateCmd(t)}}function z(e,t){return{type:"Alphanumeric",span:e,val:t}}function G(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function U(e){if("Subscript"===e.type){if("Alphanumeric"!==e.args[1].type)return!1;e=e.args[0]}switch(e.type){case"Cmd":return!0;case"Letter":return!0;default:return!1}}function Y(e){return"Superscript"===e.type&&U(e.args[0])}function X(e,t){if("Letter"!==e.type||"d"!==e.val)return!1;if("Juxt"!==t.type)return!1;var r=t.args,n=r[0],i=r[1];return"Letter"===n.type&&"d"===n.val&&U(i)}function W(e){switch(e.type){case"Letter":case"Cmd":case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"EmptyPiecewise":case"Paren":case"Juxt":return!0;case"Subscript":case"Superscript":case"Bang":case"Index":return W(e.args[0]);case"Decimal":case"MixedNumber":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":return!1;default:var t=e;throw"Unexpected surface node "+t.type+"."}}function Q(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var t=e.args[0];;)if("Pos"===t.type||"Paren"===t.type)t=t.args[0];else{if("Neg"!==t.type)break;t=t.args[0]}return"Decimal"===t.type||"MixedNumber"===t.type;case"Pos":return Q(e.args[0]);case"Paren":return Q(e.args[0]);case"Juxt":case"Mul":case"Div":return Q(e.args[0])&&Q(e.args[1]);case"Subscript":return Q(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return Q(e.args[0])&&Q(e.args[1]);case"Piecewise":var t=e.args[0];return"Equals"===t.type||"Inequality"===t.type||"InequalityChain"===t.type;case"Call":var r=e.args,n=r[0],i=r[1];return!U(n)&&!Y(n)&&(Q(n)&&Q(i));case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"PercentOf":case"Prime":return!1;default:var a=e;throw"Unexpected surface node "+a.type+"."}}Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=n,t.Inequality=i,t.TrailingInequalityPiece=a,t.InequalityChain=s,t.Tilde=o,t.Pos=u,t.Neg=c,t.Add=l,t.Sub=p,t.Mul=f,t.Div=h,t.Bang=m,t.Call=d,t.ImplicitCall=g,t.Index=y,t.Paren=v,t.List=b,t.Pipes=x,t.Subscript=_,t.Superscript=w,t.Prime=S,t.Seq=E,t.Sqrt=M,t.Nthroot=T,t.Frac=P,t.Derivative=I,t.Integral=D,t.EmptyIntegral=C,t.Sum=N,t.Product=O,t.Piecewise=A,t.EmptyPiecewise=L,t.Colon=q,t.Ellipsis=k,t.PercentOf=F,t.Juxt=j,t.Letter=V,t.Decimal=B,t.Cmd=R,t.Alphanumeric=z,t.MixedNumber=G,t.isIdentifier=U,t.isSuperscriptedIdentifier=Y,t.isDerivative=X,t.isOkForImplicitMultiply=W,t.isOkForImplicitCall=Q}),define("math/parser/surface-node-error",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Err",span:e,error:t}}function n(){return{type:"UnexpectedParseError"}}function i(){return{type:"EmptyInput"}}function a(){return{type:"EmptyGroup"}}function s(){return{type:"EmptySubscript"}}function o(){return{type:"EmptySuperscript"}}function u(){return{type:"EmptyRadical"}}function c(){return{type:"EmptyParen"}}function l(){return{type:"EmptySquareBracket"}}function p(){return{type:"EmptyPipe"}}function f(){return{type:"EmptyRadicand"}}function h(){return{type:"UnexpectedEnd"}}function m(e){return{type:"BinaryOperatorMissingRight",val:e}}function d(e){return{type:"BinaryOperatorMissingLeft",val:e}}function g(e){return{type:"UnaryOperatorMissingRight",val:e}}function y(e){return{type:"UnaryOperatorMissingLeft",val:e}}function v(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function b(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function x(){return{type:"UnexpectedDifferential"}}function _(e){return{type:"UnrecognizedSymbol",val:e}}function w(e){return{type:"InvalidOperatorName",val:e}}function S(e){return{type:"InvalidSubscript",val:e}}function E(e){return{type:"UnexpectedSubscript",base:e}}function M(e){return{type:"FunctionMissingArgument",val:e}}function T(){return{type:"PercentMissingOf"}}function P(){return{type:"PrimeWithoutParen"}}function I(){return{type:"SuperscriptWithPrime"}}function D(){return{type:"UnexpectedPrime"}}function C(){return{type:"SumMissingBound"}}function N(){return{type:"ProductMissingBound"}}function O(){return{type:"MissingBound"}}function A(){return{type:"IntegralMissingBound"}}function L(){return{type:"SumMissingBody"}}function q(){return{type:"ProductMissingBody"}}function k(){return{type:"IntegralMissingBody"}}function F(){return{type:"DerivativeMissingBody"}}function j(){return{type:"IntegralMissingDifferential"}}function V(){return{type:"DifferentialWithSuperscript"}}function B(){return{type:"FractionMissingNumerator"}}function R(){return{type:"FractionMissingDenominator"}}function z(){return{type:"FractionEmpty"}}Object.defineProperty(t,"__esModule",{value:!0}),t.Err=r,t.UnexpectedParseError=n,t.EmptyInput=i,t.EmptyGroup=a,t.EmptySubscript=s,t.EmptySuperscript=o,t.EmptyRadical=u,t.EmptyParen=c,t.EmptySquareBracket=l,t.EmptyPipe=p,t.EmptyRadicand=f,t.UnexpectedEnd=h,t.BinaryOperatorMissingRight=m,t.BinaryOperatorMissingLeft=d,t.UnaryOperatorMissingRight=g,t.UnaryOperatorMissingLeft=y,t.MissingCloseDelimiter=v,t.UnexpectedCloseDelimiter=b,t.UnexpectedDifferential=x,t.UnrecognizedSymbol=_,t.InvalidOperatorName=w,t.InvalidSubscript=S,t.UnexpectedSubscript=E,t.FunctionMissingArgument=M,t.PercentMissingOf=T,t.PrimeWithoutParen=P,t.SuperscriptWithPrime=I,t.UnexpectedPrime=D,t.SumMissingBound=C,t.ProductMissingBound=N,t.MissingBound=O,t.IntegralMissingBound=A,t.SumMissingBody=L,t.ProductMissingBody=q,t.IntegralMissingBody=k,t.DerivativeMissingBody=F,t.IntegralMissingDifferential=j,t.DifferentialWithSuperscript=V,t.FractionMissingNumerator=B,t.FractionMissingDenominator=R,t.FractionEmpty=z}),define("math/parser/expression-token-tables",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};t.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var n=["sin","cos","tan","cot","sec","csc"],i=0,a=n;i<a.length;i++){var s=a[i];t.commandTable["\\\\"+s]="Trig",t.commandTable["\\\\"+s+"h"]="Trig",t.commandTable["\\\\arc"+s]="Trig",t.commandTable["\\\\arc"+s+"h"]="Trig"}t.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~"},t.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},t.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},t.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},t.allTokenTypes=Object.keys(r)}),define("math/parser/expression-lexer",["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(e,t,r,n,i,a){\n"use strict";function s(e,t,r,n,i,a,s){return{input:e,prevSpan:t,startIndex:r,endIndex:n,token:i,mode:a,parent:s}}function o(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function u(e,t){return n.joinSpans(e,t.prevSpan)}function c(e,t){return{type:"Differential",span:e,val:t}}function l(e,t,r){return{type:e,span:t,val:r}}function p(e){var t=n.emptySpanAt(e.span.input,e.span.start),r=void 0,i=void 0;return f(e,0,t,i,r)}function f(e,t,n,i,a){var o=e.args;if(t>o.length&&a)return m(a,n);t=P(o,t);var u=w(e,t,i),c=u.token,p=u.endIndex;if("End"===c.type&&a){var f=a.input.args[a.startIndex];if("LeftRight"===f.type){var h=f.right,d=r.rightTable[h.val]||"Err",v=l(d,h.span,h.val);return s(e,n,t,p,v,i,a)}}else"Int"===c.type?i=g(i):"Differential"===c.type&&(i=y(i));return s(e,n,t,p,c,i,a)}function h(e){var t=e.input.args[e.startIndex],r=e.token.span;return t&&"LeftRight"===t.type?f(t.arg,0,r,e.mode,e):m(e,r)}function m(e,t){var r=e.input,n=e.endIndex,i=e.mode,a=e.parent;return f(r,n+1,t,i,a)}function d(e){return e.token}function g(e){return{type:"integral",parent:e}}function y(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function v(e,t){return d(e).type===t}function b(e){return e.startIndex>=e.input.args.length}function x(e,t){return t.token.span.start>e.token.span.start}function _(e,t){return{token:t,endIndex:e}}function w(e,t,i){var a=e.args;if(t>=a.length){var s=n.emptySpanAt(e.span.input,e.span.end);return _(t,l("End",s,""))}var o=e.args[t];switch(o.type){case"Sqrt":case"Frac":case"SupSub":return _(t,o);case"Letter":if(!i||"integral"!==i.type)return _(t,o);if("d"!=o.val)return _(t,o);var u=w(e,t+1,i),p=u.endIndex,f=u.token;if("Letter"===f.type||"Cmd"===f.type){var h=c(n.joinSpans(o.span,f.span),f.val);return _(p,h)}return _(t,o);case"LeftRight":var m=o.left,d=r.leftTable[m.val]||"Err",g=n.joinSpans(o.span,m.span);return _(t,l(d,g,m.val));case"OperatorName":for(var y=[],v=0,b=o.arg.args;v<b.length;v++){var x=b[v];if("Letter"!==x.type)return _(t,l("Err",o.span,n.slice(o.arg.span)));y.push(x.val)}var M="\\\\"+y.join(""),T=r.commandTable[M]||"Cmd";return _(t,l(T,o.span,M));case"Cmd":var P=r.commandTable[o.val]||"Cmd";return _(t,l(P,o.span,o.val));case"EscapedSymbol":var D=r.escapedSymbolTable[o.val]||"Err";return _(t,l(D,o.span,o.val));case"Symbol":if(I(o))return S(e,t);var C=r.symbolTable[o.val]||"Err";return _(t,l(C,o.span,o.val));case"Digit":return E(e,t);default:var N=o;throw"Unexpected atom "+N.type+"."}}function S(e,t){var i=e.args[t];if("Symbol"!==i.type||"."!==i.val)throw new Error("Programming Error: expected \'.\'");if(t+2<e.args.length&&I(e.args[t+1])&&I(e.args[t+2])){var a=n.joinSpans(i.span,e.args[t+2].span);return _(t+2,l("...",a,n.slice(a)))}if(t+1<e.args.length&&"Digit"===e.args[t+1].type)return E(e,t);var s=r.symbolTable[i.val]||"Err";return _(t,l(s,i.span,i.val))}function E(e,t){var r=M(e,t);if(r)return r;for(var i=e.args,a=e.args[t].span,s=[],o=!1,u=!1;t<i.length;t++){var c=i[t];if("Digit"===c.type)o=!0,s.push(c.val);else{if(u||!I(c))break;if(t+1<i.length&&I(e.args[t+1]))break;u=!0,s.push(".")}}if(!o)throw new Error("Programming Error: decimals must have at least one digit.");var p=n.joinSpans(a,e.args[t-1].span);return _(t-1,l("Decimal",p,s.join("")))}function M(e,t){for(var r=e.args,i=r[t].span,s=[];t<r.length;t++){var o=r[t];if("Digit"!==o.type)break;s.push(o.val)}if(t=P(r,t),!(t>=r.length)){var u=r[t];if("Frac"===u.type){for(var c=[],l=[],p=0,f=u.num.args;p<f.length;p++){var o=f[p];if("Digit"!==o.type)return;c.push(o.val)}for(var h=0,m=u.den.args;h<m.length;h++){var o=m[h];if("Digit"!==o.type)return;l.push(o.val)}var d=n.joinSpans(i,u.span);return _(t,a.MixedNumber(d,s.join(""),c.join(""),l.join("")))}}}function T(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:var t=e;throw"Unexpected atom "+t.type+"."}}function P(e,t){for(;t<e.length&&T(e[t]);)t+=1;return t}function I(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(t,"__esModule",{value:!0}),t.Span=i.Span,t.spanStates=o,t.joinState=u,t.lex=p,t.lexAt=f,t.advance=h,t.peek=d,t.beginIntegral=g,t.endIntegral=y,t.isAt=v,t.isDone=b,t.didAdvance=x}),define("math/parser/precspec",["require","exports","./expression-token-tables"],function(e,t,r){"use strict";function n(e){return{type:"initial",tokenType:e}}function i(e){return{type:"l",tokenType:e}}function a(e){return{type:"r",tokenType:e}}function s(e){return{type:"la",tokenType:e}}function o(e){return{type:"ra",tokenType:e}}function u(e,t){for(var n=0,i=r.allTokenTypes;n<i.length;n++){var a=i[n];if(void 0===t[a])throw new Error("Programming Error: token "+a+" must be a assigned a "+(e+" precedence"))}}function c(e,t,r,n){if(void 0!==t[r])throw new Error("Programming Error: duplicate "+e+" entry for token "+r+".");t[r]=n}function l(e){function t(e){return s[e]}function r(e){return a[e]}function n(e){var r=i[e];return void 0===r?t(e):r}for(var i={},a={},s={},o=0;o<e.length;o++)for(var l=e[o],p=0,f=l;p<f.length;p++){var h=f[p],m=h.type,d=h.tokenType;switch(m){case"initial":c("initial",i,d,o);break;case"l":c("left",a,d,o);break;case"r":c("right",s,d,o);break;case"la":c("left",a,d,o),c("right",s,d,o);break;case"ra":c("left",a,d,o),c("right",s,d,o-1)}}return u("left",a),u("right",s),{rightPrec:t,leftPrec:r,initialPrec:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.initial=n,t.l=i,t.r=a,t.la=s,t.ra=o,t.precSpec=l}),define("math/parser/expression-parser",["require","exports","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(e,t,r,n,i,a,s){"use strict";function o(e){var t=u(e);return"Err"===t.type&&"EmptyGroup"===t.error.type?n.Err(t.span,n.EmptyInput()):t}function u(e){var t=a.lex(e);if(a.isDone(t))return n.Err(a.spanStates(t,t),n.EmptyGroup());var r=l(t,0),i=r.state,s=r.tree;return"Err"===s.type||a.isDone(i)?s:E(i).tree}function c(e,t){return{state:e,tree:t}}function l(e,t){var r,n=e;if(o=f(e),e=o.state,r=o.tree,"Err"===r.type)return c(e,r);if(!a.didAdvance(n,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!a.isDone(e);){var i=void 0;if(i=a.isAt(e,"(")&&!m(r)?I("("):P(a.peek(e).type),t>=i)break;var s=e;if(u=h(e,r),e=u.state,r=u.tree,"Err"===r.type)return c(e,r);if(!a.didAdvance(s,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return c(e,r);var o,u}function p(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function f(e){var t,i=e,s=a.peek(e),o=D(s.type);switch(s.type){case"+":if(e=a.advance(e),B=l(e,o),e=B.state,t=B.tree,"Err"===t.type){if(!p(t.error))return c(e,t);var f=a.spanStates(i,e),h=n.Err(f,n.UnaryOperatorMissingRight(s.type));return c(e,h)}return c(e,r.Pos(a.spanStates(i,e),[t]));case"-":if(e=a.advance(e),R=l(e,o),e=R.state,t=R.tree,"Err"===t.type){if(!p(t.error))return c(e,t);var f=a.spanStates(i,e),h=n.Err(f,n.UnaryOperatorMissingRight(s.type));return c(e,h)}return c(e,r.Neg(a.spanStates(i,e),[t]));case"(":return _(e);case"\\\\{":return e=a.advance(e),a.isAt(e,"\\\\}")?(e=a.advance(e),c(e,r.EmptyPiecewise(a.spanStates(i,e)))):(z=l(e,o),e=z.state,t=z.tree,G=S(i,e,t,"\\\\{","\\\\}"),e=G.state,t=G.tree,"Err"===t.type?c(e,t):c(e,r.Piecewise(a.spanStates(i,e),[t])));case"[":if(e=a.advance(e),a.isAt(e,"]")){e=a.advance(e);var f=a.spanStates(i,e);return c(e,n.Err(f,n.EmptySquareBracket()))}return U=l(e,o),e=U.state,t=U.tree,Y=S(i,e,t,"[","]"),e=Y.state,t=Y.tree,"Err"===t.type?c(e,t):c(e,r.List(a.spanStates(i,e),[t]));case"(|":if(e=a.advance(e),a.isAt(e,"|)")){e=a.advance(e);var f=a.spanStates(i,e);return c(e,n.Err(f,n.EmptyPipe()))}return X=l(e,o),e=X.state,t=X.tree,W=S(i,e,t,"(|","|)"),e=W.state,t=W.tree,"Err"===t.type?c(e,t):c(e,r.Pipes(a.spanStates(i,e),[t]));case"Frac":e=a.advance(e);var m=u(s.num),d=u(s.den);if("Err"===m.type&&"EmptyGroup"===m.error.type&&"Err"===d.type&&"EmptyGroup"===d.error.type){var f=a.spanStates(i,e),h=n.Err(f,n.FractionEmpty());return c(e,h)}if("Err"===m.type&&"EmptyGroup"===m.error.type){var f=a.spanStates(i,e),h=n.Err(f,n.FractionMissingNumerator());return c(e,h)}if("Err"===d.type&&"EmptyGroup"===d.error.type){var f=a.spanStates(i,e),h=n.Err(f,n.FractionMissingDenominator());return c(e,h)}if("Err"===m.type)return c(e,m);if("Err"===d.type)return c(e,d);if(r.isDerivative(m,d)&&"Juxt"===d.type){var g=d.args[1],v=void 0;if(Q=l(e,P("*")-1),e=Q.state,v=Q.tree,"Err"===v.type){if(p(v.error)){var f=a.spanStates(i,e);return c(e,n.Err(f,n.DerivativeMissingBody()))}return c(e,v)}return c(e,r.Derivative(a.spanStates(i,e),[g,v]))}return c(e,r.Frac(a.spanStates(i,e),[m,d]));case"Sqrt":if(e=a.advance(e),s.optArg){var M=u(s.optArg);if("Err"===M.type)return"EmptyGroup"===M.error.type?c(e,n.Err(M.span,n.EmptyRadicand())):c(e,M);var T=u(s.arg);return"Err"===T.type?"EmptyGroup"===T.error.type?c(e,n.Err(T.span,n.EmptyRadical())):c(e,T):c(e,r.Nthroot(a.spanStates(i,e),[M,T]))}var T=u(s.arg);return"Err"===T.type?"EmptyGroup"===T.error.type?c(e,n.Err(T.span,n.EmptyRadical())):c(e,T):c(e,r.Sqrt(a.spanStates(i,e),[T]));case"Trig":case"Ln":e=a.advance(e);var I=r.Cmd(a.spanStates(i,e),s.val),C=0,N=a.peek(e);if("SupSub"===N.type){if(e=a.advance(e),N.sub){var f=a.spanStates(i,e),h=n.Err(f,n.UnexpectedSubscript(I.val));return c(e,h)}var O=b(N);if(O){if("Err"===O.type)return c(e,O);I=r.Superscript(a.spanStates(i,e),[I,O])}C=N.nprimes}var A=a.isAt(e,"(");if(A){if(Z=_(e),e=Z.state,t=Z.tree,"Err"===t.type)return c(e,t);t=r.Call(a.spanStates(i,e),[I,t.args[0]])}else{if(H=l(e,o-1),e=H.state,t=H.tree,"Err"===t.type)return p(t.error)?c(e,n.Err(a.spanStates(i,e),n.FunctionMissingArgument(s.val))):c(e,t);t=r.ImplicitCall(a.spanStates(i,e),[I,t])}if(C>0){var f=a.spanStates(i,e);if(!A){var h=n.Err(f,n.PrimeWithoutParen());return c(e,h)}t=r.Prime(f,C,[t])}return c(e,t);case"Log":e=a.advance(e);var I=r.Cmd(a.spanStates(i,e),s.val),C=0,L=void 0,O=void 0,N=a.peek(e);if("SupSub"===N.type&&(e=a.advance(e),L=y(N),O=b(N),C=N.nprimes),L&&"Err"===L.type)return c(e,L);if(O&&"Err"===O.type)return c(e,O);var A=a.isAt(e,"(");if(A){if(J=_(e),e=J.state,t=J.tree,"Err"===t.type)return c(e,t);t=t.args[0]}else if(K=l(e,o-1),e=K.state,t=K.tree,"Err"===t.type)return p(t.error)?c(e,n.Err(a.spanStates(i,e),n.FunctionMissingArgument(s.val))):c(e,t);var q=L?r.Seq(a.spanStates(i,e),[t,L]):t,k=L?r.Cmd(a.spanStates(i,e),"\\\\logbase"):I;if(O&&(k=r.Superscript(a.spanStates(i,e),[k,O])),t=A?r.Call(a.spanStates(i,e),[k,q]):r.ImplicitCall(a.spanStates(i,e),[k,q]),C>0){var f=a.spanStates(i,e);if(!A){var h=n.Err(f,n.PrimeWithoutParen());return c(e,h)}t=r.Prime(f,C,[t])}return c(e,t);case"Int":e=a.advance(e);var N=a.peek(e);e=a.advance(e);var F=x(N,i,e);if("Err"===F.type)return"MissingBound"===F.error.type?c(e,n.Err(F.span,n.IntegralMissingBound())):c(e,F);var O=F.sup,L=F.sub,g=void 0;if(a.isAt(e,"Differential"))return $=w(e),e=$.state,g=$.tree,"Err"===g.type?c(e,g):c(e,r.EmptyIntegral(a.spanStates(i,e),[g,L,O]));if(ee=l(e,o),e=ee.state,t=ee.tree,"Err"===t.type)return p(t.error)?c(e,n.Err(t.span,n.IntegralMissingBody())):c(e,t);var j=t;return a.isAt(e,"Differential")?(te=w(e),e=te.state,g=te.tree,"Err"===g.type?c(e,g):c(e,r.Integral(a.spanStates(i,e),[g,L,O,j]))):c(e,n.Err(a.spanStates(i,e),n.IntegralMissingDifferential()));case"Sum":e=a.advance(e);var N=a.peek(e);e=a.advance(e);var F=x(N,i,e);if("Err"===F.type)return"MissingBound"===F.error.type?c(e,n.Err(F.span,n.SumMissingBound())):c(e,F);var O=F.sup,L=F.sub;return re=l(e,o),e=re.state,t=re.tree,"Err"===t.type?p(t.error)?c(e,n.Err(t.span,n.SumMissingBody())):c(e,t):c(e,r.Sum(a.spanStates(i,e),[t,L,O]));case"Prod":e=a.advance(e);var N=a.peek(e);e=a.advance(e);var F=x(N,i,e);if("Err"===F.type)return"MissingBound"===F.error.type?c(e,n.Err(F.span,n.ProductMissingBound())):c(e,F);var O=F.sup,L=F.sub;return ne=l(e,o),e=ne.state,t=ne.tree,"Err"===t.type?p(t.error)?c(e,n.Err(t.span,n.ProductMissingBody())):c(e,t):c(e,r.Product(a.spanStates(i,e),[t,L,O]));case"Cmd":return e=a.advance(e),t=r.Cmd(a.spanStates(i,e),s.val),c(e,t);case"Letter":return e=a.advance(e),t=r.Letter(a.spanStates(i,e),s.val),c(e,t);case"Decimal":return e=a.advance(e),c(e,r.Decimal(a.spanStates(i,e),s.val));case"MixedNumber":return e=a.advance(e),c(e,s);case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":e=a.advance(e);var f=a.spanStates(i,e),h=n.Err(f,n.BinaryOperatorMissingLeft(s.type));return c(e,h);case"!":case"SupSub":e=a.advance(e);var f=a.spanStates(i,e),h=n.Err(f,n.UnaryOperatorMissingLeft(s.type));return c(e,h);case")":case"\\\\}":case"]":case"|)":case"Differential":return E(e);case"Err":e=a.advance(e);var f=a.spanStates(i,e),h=n.Err(f,n.UnrecognizedSymbol(s.val));return c(e,h);case"End":var f=a.spanStates(i,e),h=n.Err(f,n.UnexpectedEnd());return c(e,h);default:var V=s;throw"Unexpected token type "+V.type+"."}var B,R,z,G,U,Y,X,W,Q,Z,H,J,K,$,ee,te,re,ne}function h(e,t){var i,s=a.peek(e),o=I(s.type);switch(s.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":if(e=a.advance(e),C=l(e,o),e=C.state,i=C.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}return c(e,d(s.type,a.joinState(t.span,e),[t,i]));case"%":if(e=a.advance(e),N=l(e,o),e=N.state,i=N.tree,"Cmd"!==i.type||"of"!==i.val&&"\\\\of"!==i.val){var f=n.Err(s.span,n.PercentMissingOf());return c(e,f)}if(O=l(e,o),e=O.state,i=O.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}return c(e,r.PercentOf(a.joinState(t.span,e),[t,i]));case">=":case"<=":case">":case"<":var h=s.type;if(e=a.advance(e),A=g(e,h),e=A.state,h=A.symbol,L=l(e,o),e=L.state,i=L.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}for(var m=r.Inequality(a.joinState(t.span,e),h,[t,i]),y=[],x=a.peek(e).type;">="===x||"<="===x||">"===x||"<"===x;){var w=e;if(h=x,e=a.advance(e),q=g(e,h),e=q.state,h=q.symbol,k=l(e,o),e=k.state,i=k.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}y.push(r.TrailingInequalityPiece(a.spanStates(w,e),h,[i])),x=a.peek(e).type}return y.length?c(e,r.InequalityChain(a.joinState(t.span,e),m,y)):c(e,m);case"!":return e=a.advance(e),c(e,r.Bang(a.joinState(t.span,e),[t]));case"[":var w=e;if(e=a.advance(e),a.isAt(e,"]")){e=a.advance(e);var u=a.spanStates(w,e);return c(e,n.Err(u,n.EmptySquareBracket()))}return F=l(e,o),e=F.state,i=F.tree,j=S(w,e,i,"[","]"),e=j.state,i=j.tree,"Err"===i.type?c(e,i):c(e,r.Index(a.joinState(t.span,e),[t,i]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return V=l(e,o),e=V.state,i=V.tree,"Err"===i.type?c(e,i):c(e,r.Juxt(a.joinState(t.span,e),[t,i]));case"(":if(r.isIdentifier(t))return B=_(e),e=B.state,i=B.tree,"Err"===i.type?c(e,i):c(e,r.Call(a.joinState(t.span,e),[t,i.args[0]]));if("Prime"===t.type&&r.isIdentifier(t.args[0])){if(R=_(e),e=R.state,i=R.tree,"Err"===i.type)return c(e,i);var u=a.joinState(t.span,e);return c(e,r.Prime(u,t.nprimes,[r.Call(u,[t.args[0],i.args[0]])]))}return z=l(e,o),e=z.state,i=z.tree,"Err"===i.type?c(e,i):c(e,r.Juxt(a.joinState(t.span,e),[t,i]));case"SupSub":e=a.advance(e);var M=v(s),T=b(s);if(M&&"Err"===M.type)return c(e,M);if(T&&"Err"===T.type)return c(e,T);if(M&&(t=r.Subscript(a.joinState(t.span,e),[t,M])),T&&(t=r.Superscript(a.joinState(t.span,e),[t,T])),s.nprimes>0){var u=a.joinState(t.span,e);if(!r.isIdentifier(t)){var f=n.Err(u,n.UnexpectedPrime());return c(e,f)}t=r.Prime(u,s.nprimes,[t])}return c(e,t);case",":for(var P=[t];a.isAt(e,",")&&(e=a.advance(e),!a.isAt(e,"..."));){if(G=l(e,o),e=G.state,i=G.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}P.push(i)}return c(e,r.Seq(a.joinState(t.span,e),P));case"...":if(e=a.advance(e),a.isAt(e,",")&&(e=a.advance(e)),U=l(e,o),e=U.state,i=U.tree,"Err"===i.type){if(p(i.error)){var u=a.joinState(t.span,e),f=n.Err(u,n.BinaryOperatorMissingRight(s.type));return c(e,f)}return c(e,i)}return c(e,r.Ellipsis(a.joinState(t.span,e),[t,i]));case"]":case")":case"\\\\}":case"|)":case"Differential":return E(e);case"Err":return l(e,o);case"End":var u=a.spanStates(e,e),f=n.Err(u,n.UnexpectedEnd());return c(e,f);default:var D=s;throw"Unexpected token type "+D.type+"."}var C,N,O,A,L,q,k,F,j,V,B,R,z,G,U}function m(e){return!!r.isIdentifier(e)||!("Prime"!==e.type||!r.isIdentifier(e.args[0]))}function d(e,t,n){switch(e){case"+":return r.Add(t,n);case"-":return r.Sub(t,n);case"*":return r.Mul(t,n);case"/":return r.Div(t,n);case"=":return r.Equals(t,n);case"~":return r.Tilde(t,n);case":":return r.Colon(t,n);default:var i=e;throw"Unexpected token type "+i+"."}}function g(e,t){if(!a.isAt(e,"="))return{state:e,symbol:t};switch(t){case">":e=a.advance(e),t=">=";break;case"<":e=a.advance(e),t="<="}return{state:e,symbol:t}}function y(e){if(e.sub){var t=e.sub,r=u(t);return"Err"===r.type&&"EmptyGroup"===r.error.type?n.Err(r.span,n.EmptySubscript()):r}}function v(e){if(e.sub){var t=e.sub;if(0===t.args.length)return n.Err(t.span,n.EmptySubscript());for(var a=[],s=0,o=t.args;s<o.length;s++){var u=o[s];if("Digit"!==u.type&&"Letter"!==u.type){var c=u.span,l=n.Err(c,n.InvalidSubscript(i.slice(c)));return l}a.push(u.val)}return r.Alphanumeric(t.span,a.join(""))}}function b(e){if(e.sup){var t=u(e.sup);return"Err"===t.type?"EmptyGroup"===t.error.type?n.Err(t.span,n.EmptySuperscript()):t:e.nprimes>0?n.Err(e.span,n.SuperscriptWithPrime()):t}}function x(e,t,r){if("SupSub"!==e.type){var i=a.spanStates(t,r);return n.Err(i,n.MissingBound())}if(e.nprimes>0){var i=a.spanStates(t,r);return n.Err(i,n.UnexpectedPrime())}var s=y(e),o=b(e);if(!s||"Err"===s.type&&"EmptySubscript"===s.error.type||!o||"Err"===o.type&&"EmptySuperscript"===o.error.type){var i=a.spanStates(t,r);return n.Err(i,n.MissingBound())}return"Err"===s.type?s:"Err"===o.type?o:{type:"Bounds",sup:o,sub:s}}function _(e){var t=e,i=a.peek(e),s=D(i.type);if(!a.isAt(e,"("))throw new Error("Programming Error: expected \'(\' at start of parseParen.");if(e=a.advance(e),a.isAt(e,")")){e=a.advance(e);var o=a.spanStates(t,e);return c(e,n.Err(o,n.EmptyParen()))}var u;return p=l(e,s),e=p.state,u=p.tree,f=S(t,e,u,"(",")"),e=f.state,u=f.tree,"Err"===u.type?c(e,u):c(e,r.Paren(a.spanStates(t,e),[u]));var p,f}function w(e){var t=e,i=a.peek(e);if("Differential"!==i.type)throw new Error("Programming Error: expected differential");e=a.advance(e);var s=r.Cmd(i.span,i.val),o=a.peek(e);if("SupSub"===o.type){e=a.advance(e);var u=a.spanStates(t,e),l=v(o);if(l){if("Err"===l.type)return c(e,l);s=r.Subscript(u,[s,l])}if(o.sup)return c(e,n.Err(u,n.DifferentialWithSuperscript()));if(o.nprimes>0)return c(e,n.Err(u,n.UnexpectedPrime()))}return c(e,s)}function S(e,t,r,i,s){if("Err"===r.type&&"UnexpectedEnd"!==r.error.type)return c(t,r);if("Err"===r.type||!a.isAt(t,s)){var o=a.spanStates(e,t),u=n.Err(o,n.MissingCloseDelimiter(i,s));return c(t,u)}return t=a.advance(t),c(t,r)}function E(e){var t=e,r=a.peek(e);switch(r.type){case")":e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedCloseDelimiter("(",")")));case"]":e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedCloseDelimiter("|","|")));case"Differential":e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedDifferential()));default:e=a.advance(e);var i=a.spanStates(t,e);return c(e,n.Err(i,n.UnexpectedParseError()))}}Object.defineProperty(t,"__esModule",{value:!0});var M=[[s.initial("("),s.la(")"),s.initial("\\\\{"),s.la("\\\\}"),s.r("["),s.la("]"),s.initial("(|"),s.la("|)"),s.la("Differential"),s.la("End")],[s.ra("...")],[s.la(",")],[s.ra(":")],[s.la("="),s.la(">"),s.la("<"),s.la(">="),s.la("<="),s.la("~")],[s.la("+"),s.la("-")],[s.la("*"),s.la("/"),s.la("Decimal"),s.la("MixedNumber"),s.la("Letter"),s.la("Cmd"),s.la("%"),s.r("("),s.la("\\\\{"),s.la("(|"),s.la("Frac"),s.la("Sqrt"),s.la("Trig"),s.la("Ln"),s.la("Log"),s.ra("Int"),s.ra("Sum"),s.ra("Prod")],[s.initial("+"),s.initial("-")],[s.l("("),s.l("[")],[s.la("!")],[s.la("SupSub")],[s.la("Err")]],T=s.precSpec(M),P=T.leftPrec,I=T.rightPrec,D=T.initialPrec;t.parse=o}),define("math/inverses",[],function(){var e={},t=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return t.forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/parser/lower",["require","exports","math/inverses","math/errormsg","./input-span","./surface-node"],function(e,t,r,n,i,a){"use strict";function s(e,t){return u(e,t)}function o(e,t){for(var r=[],n=0;n<t.length;n++)r.push(f(e,t[n]));return r}function u(e,t){return e.setInput(c(e,t),i.slice(t.span))}function c(e,t){var r=e.nodes;switch(t.type){case"Equals":var i=t.args,s=i[0],u=i[1];if("Call"===s.type){var c=s.args,m=c[0],d=c[1],g=p(d);if("Cmd"===m.type&&"logbase"===m.val&&a.isIdentifier(g[0])&&"Decimal"===g[1].type&&!/\\./.test(g[1].val))throw n.cannotRedefine("log");if(a.isIdentifier(m)&&g.every(a.isIdentifier)){if(T(m))throw n.cannotRedefine("polygon");return r.FunctionDefinition(f(e,m),o(e,g),f(e,u))}}else if(a.isIdentifier(s))return r.Assignment(f(e,s),f(e,u));return r.Equation(f(e,s),f(e,u));case"Tilde":var y=o(e,t.args),s=y[0],u=y[1];return r.Regression(s,u);case"Inequality":return w(e,t);case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var v=t.first,b=v.symbol,x=v.args,_=x[0],S=x[1],E=t.chain[0],M=E.symbol,P=E.args[0];return a.isIdentifier(S)?r.DoubleInequality([f(e,_),b,f(e,S),M,f(e,P)]):w(e,t);case"Seq":if(!t.args.every(l))throw n.malformedPoint();return r.List(o(e,t.args));case"Call":var I=t.args,D=I[0],C=I[1];return T(D)?r.Polygon(o(e,p(C))):h(e,t);default:return h(e,t)}}function l(e){if("Paren"!==e.type)return!1;var t=e.args[0];return"Seq"===t.type&&2===t.args.length}function p(e){return"Seq"===e.type?e.args:[e]}function f(e,t){return e.setInput(h(e,t),i.slice(t.span))}function h(e,t){var r=e.nodes;switch(t.type){case"Pos":return h(e,t.args[0]);case"Neg":for(var i=-1,s=t.args[0];;)if("Pos"===s.type||"Paren"===s.type)s=s.args[0];else{if("Neg"!==s.type)break;s=s.args[0],i*=-1}switch(s.type){case"Decimal":return r.Constant(i*E(s));case"MixedNumber":return r.Constant(i*M(s));default:return i===-1?r.Negative([f(e,s)]):h(e,s)}case"Add":return r.Add(o(e,t.args));case"Sub":return r.Subtract(o(e,t.args));case"Mul":return r.Multiply(o(e,t.args));case"Div":return r.Divide(o(e,t.args));case"Bang":return r.FunctionCall("\\\\factorial",o(e,t.args));case"PercentOf":return r.PercentOf(o(e,t.args));case"Call":return v(e,t);case"ImplicitCall":return S(t),v(e,t);case"Prime":var u=t.args[0];if("Call"===u.type){var c=u.args,l=c[0],m=c[1],d=p(m).length;if("Cmd"===l.type&&"logbase"===l.val){if(2!==d)throw n.primedFunctionArity()}else if(1!==d)throw n.primedFunctionArity();return r.Prime(t.nprimes,o(e,t.args))}throw"ImplicitCall"===u.type?n.primeWithoutParen():n.unexpectedPrime();case"Index":return r.ListAccess(o(e,t.args));case"Paren":var g=t.args[0];return"Seq"===g.type?2===g.args.length?r.OrderedPair(o(e,g.args)):n.nonPairTuple():h(e,g);case"List":var y=t.args[0];if("Ellipsis"===y.type){var _=y.args,w=_[0],T=_[1];return r.Range([r.List(o(e,p(w))),r.List(o(e,p(T)))])}return r.List(o(e,p(y)));case"Pipes":return r.FunctionCall("\\\\abs",o(e,t.args));case"Subscript":var D=t.args,C=D[0],N=D[1];if(0===N.val.length)throw n.emptySubscript();var O=void 0;switch(C.type){case"Letter":O=C.val;break;case"Cmd":O=C.val;break;default:throw n.unexpectedSubscript()}return r.Identifier(O+"_"+N.val);case"Superscript":var A=t.args,C=A[0],L=A[1];return"Call"!==C.type||"Seq"===C.args[1].type||P(C)?r.Exponent(o(e,t.args)):r.FunctionExponent(o(e,[C.args[0],C.args[1],L]));case"Sqrt":return r.FunctionCall("sqrt",o(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",o(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(o(e,t.args));case"Derivative":var q=o(e,t.args);if(!a.isIdentifier(t.args[0]))throw n.parseError();return r.Derivative(q[0],[q[1]]);case"Integral":var k=t.args,F=k[0],j=k[1],V=k[2],B=k[3],q=o(e,[F,j,V,B]);return r.Integral(q);case"EmptyIntegral":var R=o(e,t.args),F=R[0],z=R[1],V=R[2],B=r.Constant(1);return r.Integral([F,z,V,B]);case"Sum":var G=t.args,U=G[0],Y=G[1],V=G[2];if("Equals"!=Y.type)throw n.incorrectSumLowerBound();if(!a.isIdentifier(Y.args[0]))throw n.incorrectSumLowerBound();var q=o(e,[Y.args[0],Y.args[1],V,U]);return r.Sum(q);case"Product":var X=t.args,W=X[0],Q=X[1],V=X[2];if("Equals"!=Q.type)throw n.incorrectProductLowerBound();if(!a.isIdentifier(Q.args[0]))throw n.incorrectProductLowerBound();var q=o(e,[Q.args[0],Q.args[1],V,W]);return r.Product(q);case"Juxt":return b(e,t);case"Letter":return r.Identifier(t.val);case"Cmd":var Z=t.val;if("ans"===Z){if(void 0===e.currentIndex)throw n.badAnsContext();return r.Ans("ans_{"+(e.currentIndex-1)+"}")}return r.Identifier(Z);case"Decimal":return r.Constant(E(t));case"MixedNumber":return r.Constant(M(t));case"Piecewise":return x(e,t);case"EmptyPiecewise":if(!r.Piecewise.empty)throw n.featureUnavailable();return r.Piecewise.empty();case"Equals":throw n.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw n.unexpectedInequality();case"Tilde":throw n.unexpectedSymbol("~");case"Seq":throw n.unexpectedSymbol(",");case"Colon":throw n.unexpectedSymbol(":");case"Ellipsis":throw n.unexpectedSymbol("...");case"Err":throw I(t.error);default:var H=t;throw"Unexpected surface node "+H.type+"."}}function m(e){return r.hasOwnProperty(e)}function d(e){return"ln"===e||"log"===e||"logbase"===e}function g(e){return"Decimal"===e.type&&"2"===e.val}function y(e){return"Neg"===e.type&&(e=e.args[0],"Decimal"===e.type&&"1"===e.val)}function v(e,t){var i=e.nodes,s=t.args,u=s[0],c=s[1],l=f(e,u),h=p(c),v=o(e,h);if(T(u))throw n.unexpectedSymbol("polygon");if(a.isIdentifier(u))return i.FunctionCall(l,v);if("Superscript"===u.type){var b=u.args,x=b[0],_=b[1];if("Cmd"===x.type){var w=x.val;if(m(w)||d(w)){if(g(_))return i.Exponent([i.FunctionCall(w,v),f(e,_)]);if(y(_)&&void 0!==r[w])return i.FunctionCall(r[w],v);throw m(w)?n.badTrigExponent(w):n.badLogExponent("logbase"===w?"log":w)}}}return i.Multiply([l,f(e,c)])}function b(e,t){var r=e.nodes,i=r.Multiply(o(e,t.args));if(!a.isOkForImplicitMultiply(t.args[1]))throw n.badImplicitMultiply();return i}function x(e,t){var r,i=e.nodes,a=t.args[0],s=p(a),o=[];e:for(r=0;r<s.length;r++){var u=s[r];switch(u.type){case"Colon":var c=u.args,l=c[0],h=c[1];if(!_(l))throw n.colonMissingCondition();o.push({condition:w(e,l),if_expr:f(e,h)});break;case"Equals":case"Inequality":case"InequalityChain":o.push({condition:w(e,u),if_expr:i.Constant(1)});break;default:break e}}if(0===r)throw n.piecewiseMissingCondition();if(r<s.length-1)throw n.piecewisePartMissingCondition();if(r===s.length-1&&o.push({condition:i.Constant(!0),if_expr:f(e,s[r])}),!i.Piecewise.chain)throw n.featureUnavailable();return i.Piecewise.chain(o)}function _(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function w(e,t){var r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](o(e,t.args));case"Inequality":return r.Comparator[t.symbol](o(e,t.args));case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var s=t.first,u=s.symbol,c=s.args,l=c[0],p=c[1],f=t.chain[0],h=f.symbol,m=f.args[0],d=i.emptySpanAt(t.span.input,t.span.start);return r.And([w(e,a.Inequality(d,u,[l,p])),w(e,a.Inequality(d,h,[p,m]))]);default:throw n.parseError()}}function S(e){var t=e.args,r=t[0],i=t[1];if("Superscript"===r.type&&(r=r.args[0]),"Cmd"===r.type&&"logbase"===r.val&&"Seq"===i.type&&2===i.args.length){if(!a.isOkForImplicitCall(i.args[0]))throw n.badImplicitCall("log")}else if(!a.isOkForImplicitCall(i)){if("Cmd"===r.type)throw n.badImplicitCall(r.val);throw n.parseError()}}function E(e){return parseFloat(e.val)}function M(e){return parseFloat(e.whole)+parseFloat(e.num)/parseFloat(e.den)}function T(e){return"Cmd"===e.type&&"polygon"===e.val}function P(e){if("Call"!==e.type)return!1;for(var t=e.args[0];"Superscript"===t.type||"Subscript"===t.type||"Prime"===t.type;)t=t.args[0];return"Cmd"===t.type&&(m(t.val)||d(t.val))}function I(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return n.parseError();case"InvalidOperatorName":return n.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return n.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?n.unexpectedSymbol(e.val):n.unrecognizedSymbol(e.val);case"EmptyInput":return n.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return n.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return n.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return n.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return n.cannotSubscript(e.base);case"PercentMissingOf":return n.percentMissingOf();case"SumMissingBound":return n.sumMissingBound();case"ProductMissingBound":return n.productMissingBound();case"IntegralMissingBound":return n.integralMissingBound();case"SumMissingBody":return n.sumMissingBody();case"ProductMissingBody":return n.productMissingBody();case"IntegralMissingBody":return n.integralMissingBody();case"DerivativeMissingBody":return n.derivativeMissingBody();case"IntegralMissingDifferential":return n.integralMissingDifferential();case"DifferentialWithSuperscript":return n.differentialWithSuperscript();case"FractionMissingNumerator":return n.fractionMissingNumerator();case"FractionMissingDenominator":return n.fractionMissingDenominator();case"FractionEmpty":return n.fractionEmpty();case"EmptySuperscript":return n.emptySuperscript();case"EmptySubscript":return n.emptySubscript();case"InvalidSubscript":return n.invalidSubscript(e.val);case"SuperscriptWithPrime":return n.superscriptWithPrime();case"PrimeWithoutParen":return n.primeWithoutParen();case"UnexpectedPrime":return n.unexpectedPrime();case"EmptyRadical":return n.emptyRadical();case"EmptyRadicand":return n.emptyRadicand();case"EmptyParen":return n.emptyParen();case"EmptySquareBracket":return n.emptySquareBracket();case"EmptyPipe":return n.emptyPipe();case"FunctionMissingArgument":return n.wrongArity(e.val,1,0);default:var t=e;throw"Unexpected surface node "+t.type+"."}}Object.defineProperty(t,"__esModule",{value:!0}),t.lower=s}),define("math/baseparser",["require","exports","math/errormsg","parsenodes","math/parser/latex-parser","math/parser/expression-parser","math/parser/lower"],function(e,t,r,n,i,a,s){"use strict";function o(){throw r.featureUnavailable()}function u(e,t){return e.setInputString(t),e}function c(e,t){if("string"!=typeof e)throw new Error("Type Error: parse can only be called with strings");t=t||{};var r=n;if(t.disabledFeatures){r=Object.create(r);for(var c=0,l=t.disabledFeatures;c<l.length;c++){var p=l[c];if(!r[p])throw new Error("Programming Error: "+p+" cannot be disabled because it is not a parsenode.");r[p]=o}}var f={nodes:r,currentIndex:t.index,setInput:u};try{var h=i.parse(e),m=a.parse(h);return s.lower(f,m)}catch(e){if(e instanceof n.Error)return e;if("string"==typeof e)return n.Error(e);throw e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=c}),define("math/rational-arithmetic-sequence",["require","math/distance","math/builtin"],function(e){function t(e,t){\nvar i=n.toFraction(e),a=n.toFraction(t);if(r.approx(i.n/i.d,e)&&r.approx(a.n/a.d,t)){var s=n.lcm(i.d,a.d),o=i.n*(s/i.d),u=a.n*(s/a.d),c=u-o;return{nstart:o,nstep:c,lcm:s}}}var r=e("math/distance"),n=e("math/builtin");return t}),define("math/features/getConcreteTree",["require","parsenodes","math/errormsg","math/types","graphing/label","math/distance","math/rational-arithmetic-sequence"],function(e){function t(e,t,r,n,i){if(r<e.length&&!u.approx(i,e.elementAt(r).constantValue,10))throw a.nonArithmeticRange();if(n-r<=t.length&&n-r>1&&!u.approx(i,t.elementAt(t.length-n+r).constantValue,10))throw a.nonArithmeticRange()}function r(e,t){for(var r=!1,n=!1,i=0;i<e.length;i++){var a=e[i];(a.isList||a.isBroadcast)&&(n=!0);for(var s=a.getDependencies(),o=0;o<s.length;o++)if(t.indexOf(s[o])!==-1){if(a.isList||a.isBroadcast)return"list"}else r=!0}return n?r?"broadcast":"list":"none"}function n(e){var t,r=[],n=[],a=[];for(t=0;t<e.length;t++){var o,u=e[t];if(u.isList){for(var c=!1,l=0;l<a.length;l++)if(u===a[l]){c=!0,o=i.DummyIndex(n[l]),o.valueType=s.elementType(u.valueType),r.push(o);break}if(!c){var p=i.Base.prototype.tmpVar();n.push(p),a.push(u),o=i.DummyIndex(p),o.valueType=s.elementType(u.valueType),r.push(o)}}else u.isBroadcast?(Array.prototype.push.apply(n,u._replacedSymbols),Array.prototype.push.apply(a,u._lists),r.push(u._expression)):r.push(u)}return{replacedArgs:a,concreteArgs:r,replacedSymbols:n}}var i=e("parsenodes"),a=e("math/errormsg"),s=e("math/types"),o=e("graphing/label"),u=e("math/distance"),c=e("math/rational-arithmetic-sequence"),l=i.List,p=i.OrderedPair,f=i.ScalarExpression,h=i.Constant,m=i.Multiply,d=i.Identifier,g=i.DummyIndex,y=i.BuiltInFunction;i.Base.prototype.getConcreteTree=function(e,t){if(t)return this._getConcreteTree(e,t);if(this.isConcreteTreeCacheValid(e))return this.__cachedConcreteTree.value;for(var r=this._getConcreteTree(e,t),n={},i=this.getCacheKeys().slice();;){if(!i.length)break;var a=i.pop();if(!n.hasOwnProperty(a)){var s=e[a];n[a]=s,s&&Array.prototype.push.apply(i,s.getCacheKeys())}}return this.__cachedConcreteTree={keys:n,value:r},r},i.Base.prototype.getCacheKeys=function(){return this.getDependencies()},i.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},i.PercentOf.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Divide([i.Multiply(this.args),i.Constant(100)]).getConcreteTree(e,t)},i.Assignment.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this._expression.getConcreteTree(e,t)},i.Identifier.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r){if(r.isError)throw r;return r.isFunction?r.getConcreteInvocationTree(e,[],t):r.getConcreteTree(e,t)}if(y.hasOwnProperty(this._symbol))throw a.functionUnsupported(o.latexToIdentifier(this.getInputString()));return i.FreeVariable(this._symbol)},i.Ans.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(void 0===e[this._symbol])throw a.ansUndefined();return d.prototype._getConcreteTree.call(this,e,t)},i.Equation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this.asComparator().getConcreteTree(e,t)},i.Constant.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this.constantValue)},i.Derivative.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r;if(e[this._symbol]){var n=Object.create(e);n[this._symbol]=i.FreeVariable(this._symbol);var o=e[this._symbol].getConcreteTree(e,t);if(o.valueType!==s.Number&&o.valueType!==s.ListOfNumber)throw a.derivativeVariableTypeError(this._symbol,[s.prettyPrint(o.valueType)]);var u={};return u[this._symbol]=o,r=this.args[0].getConcreteTree(n,t),this.typeCheck([r]),r.takeDerivative(this._symbol).substitute(u).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck([r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},i.DoubleInequality.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor([i.Piecewise([this._indicator,this._expressions[0],h(NaN)]).getConcreteTree(e,t),this._operators[0],d(this._symbol),this._operators[1],i.Piecewise([this._indicator,this._expressions[1],h(NaN)]).getConcreteTree(e,t)])},i.Expression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].getConcreteTree(e,t));return this.typeCheck(r),this._constantCollapsedCopy(r)},i.Error.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FreeVariable.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FunctionCall.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r&&r.isError)throw r;if(!r||!r.isFunction){if(y.hasOwnProperty(this._symbol))throw a.functionUnsupported(o.latexToIdentifier(this._identifier.getInputString()));if(1==this.args.length){var n=[d(this._symbol),this.args[0]];return m(n).getConcreteTree(e,t)}if(r)throw a.variableAsFunction(this._symbol);throw a.functionNotDefined(this._symbol)}for(var i=[],s=0;s<this.args.length;s++){var u=this.args[s].getConcreteTree(e,t);i.push(u)}return r.getConcreteInvocationTree(e,i,t)},i.FunctionExponent.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0]._symbol;return e[r]&&e[r].isFunction?i.Exponent([i.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):m([this.args[0],i.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},i.FunctionDefinition.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=0;r<this._argSymbols.length;r++){if(e[this._argSymbols[r]])throw a.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw a.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},i.Image.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Image({center:this.center.tryGetConcreteTree(e,t),radianAngle:this.radianAngle.tryGetConcreteTree(e,t),width:this.width.tryGetConcreteTree(e,t),height:this.height.tryGetConcreteTree(e,t)},this.moveStrategy)},i.Integral.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._differential._symbol])throw a.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],n=this.args[1],i=this.args[2];if(n.dependsOn(r._symbol)||i.dependsOn(r._symbol))throw a.badIntegralBoundDependency(r._symbol);var s=Object.create(e);s[this._differential._symbol]=g(this._differential._symbol);var o=f.prototype._getConcreteTree.call(this,s,t);return o},i.ListAccess.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.index.getConcreteTree(e,t),n=this.list.getConcreteTree(e,t),i=[n,r];return this.typeCheck(i),this._constantCollapsedCopy(i)},i.List.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=0;n<this.args.length;n++){var i=this.args[n].getConcreteTree(e,t);r.push(i)}return this.typeCheck(r),new this.constructor(r)},i.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var a=[],s=0;s<this.args.length;s++)a.push(this.args[s].getConcreteTree(e,t));switch(r([a[1]],this.getDummyDependencies())){case"none":return this.typeCheck(a),this._constantCollapsedCopy(a);case"list":return i.List(i.List.mapArgs([a[1]],function(e){return e=[a[0]].concat(e),this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var o=n([a[1]]),u=[a[0]].concat(o.concreteArgs);return this.typeCheck(u),i.Broadcast(o.replacedSymbols,[this.copyWithArgs(u)].concat(o.replacedArgs))}},i.Prime.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0],n=r.args[0];if(!e[r._symbol])throw a.functionNotDefined(r._symbol);var i,s=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw a.primedFunctionArity();i=[d(s),r.args[1]]}else{if(1!==r.args.length)throw a.primedFunctionArity();i=[d(s)]}for(var o=r.copyWithArgs(i).getConcreteTree(e,t),u=0;u<this.order;u++)o=o.takeDerivative(s);var c={};return c[s]=n,o.substitute(c).getConcreteTree(e,t)},i.Range.prototype._getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);var n=this.beginning.getConcreteTree(e,r),i=this.end.getConcreteTree(e,r);if(n.getDependencies().length)throw a.variableRange(n.getDependencies());if(i.getDependencies().length)throw a.variableRange(i.getDependencies());if(!n.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var s,o,u=n.elementAt(0).constantValue,p=i.elementAt(i.length-1).constantValue,f=p-u;if(1===n.length)s=f>=0?1:-1;else{var m=n.elementAt(1).constantValue;o=c(u,m),s=n.elementAt(1).constantValue-u}var d=Math.round(f/s)+1;if(!isFinite(d)||d<n.length||d<i.length)throw a.nonArithmeticRange();var g,y,v=[];if(o){var b=o.nstart;for(g=0;g<d;g++)y=b/o.lcm,t(n,i,g,d,y),v.push(h(y)),b+=o.nstep}else for(v.push(h(u)),g=1;g<d;g++)y=u+g*s,t(n,i,g,d,y),v.push(h(y));return l(v)},i.ReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(0===this.args.length)throw a.zeroArgReducer(this._symbol);for(var s=[],o=0;o<this.args.length;o++)s.push(this.args[o].getConcreteTree(e,t));if(1===this.args.length)return s=[i.List.wrap(s[0])],this.typeCheck(s),this._constantCollapsedCopy(s);switch(r(s,this.getDummyDependencies())){case"none":return s=[i.List(s)],this.typeCheck(s),this._constantCollapsedCopy(s);case"list":return i.List(i.List.mapArgs(s,function(e){return e=[i.List(e)],this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var u=n(s);return s=[i.List(u.concreteArgs)],this.typeCheck(s),i.Broadcast(u.replacedSymbols,[this.copyWithArgs(s)].concat(u.replacedArgs))}},i.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._index._symbol])throw a.shadowedIndex(this._index._symbol);var r=Object.create(e);r[this._index._symbol]=g(this._index._symbol);var n=f.prototype._getConcreteTree.call(this,r,t);return n},i.ScalarExpression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var a=[],s=0;s<this.args.length;s++)a.push(this.args[s].getConcreteTree(e,t));switch(r(a,this.getDummyDependencies())){case"none":return this.typeCheck(a),this._constantCollapsedCopy(a);case"list":return i.List(i.List.mapArgs(a,function(e){return this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var o=n(a);return this.typeCheck(o.concreteArgs),i.Broadcast(o.replacedSymbols,[this.copyWithArgs(o.concreteArgs)].concat(o.replacedArgs))}},i.Regression.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._lhs,this._rhs)},i.Polygon.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args.map(function(t){return t.getConcreteTree(e)});return this.typeCheck(r),1===r.length&&r[0].valueType===s.ListOfPoint?new this.constructor(r):r.every(function(e){return e.valueType===s.Point})?new this.constructor([l(r)]):2===r.length?new this.constructor([p(this.args).getConcreteTree(e)]):a.parseError()},i.SolvedEquation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},i.Table.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=Object.create(e),i=0;i<this.columns.length;i++){var a=this.columns[i].getConcreteTree(n,e,t);a.isIndependent&&this.columns[i].exportToLocal(a,n),r.push(a)}return new this.constructor(r)},i.TableColumn.prototype._getConcreteTree=function(e,t){var r,n,i=this.header.getConcreteTree(e);if(i.isFreeVariable){r=[];for(var o=0;o<this.values.length;o++)if(this.values[o].tableError())r.push(a.invalidTableEntry(this.values[o].tableError()));else{var u=this.values[o].tryGetConcreteTree(e);u.isError?r.push(u):u.tableError()?r.push(a.invalidTableEntry(u.tableError())):u.valueType===s.Number?r.push(u):r.push(a.tableEntryTypeError([s.prettyPrint(u.valueType)]))}return n=new this.constructor(i,this.length,r),n.isIndependent=!0,n}if(i.isConstant){for(var c=[],l=0;l<this.length;l++)c.push(i);r=c}else r=i.isList?i.args:[];return i=this.header.getConcreteTree(t),i.isError||i.valueType===s.Number||i.valueType===s.ListOfNumber||(i=a.tableHeaderTypeError([s.prettyPrint(i.valueType)])),n=new this.constructor(i,this.length,r)}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return s.Number}function r(){return s.Bool}function n(){return s.Point}function i(){return s.Any}var a=e("parsenodes"),s=e("math/types"),o={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return s.ListOfAny;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return s.ListOfAny;return s.hasListType(t)?s.listType(t):s.ListOfAny},ListAccess:function(e){return s.elementType(e[0].valueType)},Broadcast:function(e){return s.listType(e[0].valueType)},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,DummyIndex:t,FreeVariable:t,Constant:function(){switch(typeof this.constantValue){case"number":return s.Number;case"boolean":return s.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}},TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:i};for(var u in o)a[u].prototype._getValueType=o[u]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],r=0;r<e.length;r++)t.push(i.prettyPrint(e[r].valueType));return t}function r(e,r){return function(n){for(var i=0;i<n.length;i++)if(n[i].valueType!==e[i])throw r(t(n))}}var n=e("parsenodes"),i=e("math/types"),a=e("math/errormsg"),s={Add:r([i.Number,i.Number],a.addTypeError),Multiply:r([i.Number,i.Number],a.multiplyTypeError),Divide:r([i.Number,i.Number],a.divideTypeError),Subtract:r([i.Number,i.Number],a.subtractTypeError),Exponent:r([i.Number,i.Number],a.exponentTypeError),Negative:r([i.Number],a.negativeTypeError),BaseComparator:r([i.Number,i.Number],a.comparatorTypeError),And:r([i.Bool,i.Bool],a.andTypeError),List:function(e){if(0!==e.length){var t=e[0].valueType;if(!i.hasListType(t))throw a.listTypeError([i.prettyPrint(t)]);for(var r=0;r<e.length;r++){var n=e[r].valueType;if(!i.hasListType(n))throw a.listTypeError([i.prettyPrint(n)]);if(n!==t)throw a.heterogeneousList()}}},Broadcast:function(e){},OrderedPair:r([i.Number,i.Number],a.pointTypeError),Piecewise:function(e){if(e[0].valueType!==i.Bool)throw a.piecewiseConditionTypeError(t(e));if(e[1].valueType!==i.Number)throw a.piecewiseBranchTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.piecewiseBranchTypeError([i.prettyPrint(e[2].valueType)])},ListAccess:function(e){if(!i.isList(e[0].valueType)||e[1].valueType!==i.Number)throw a.indexTypeError(t(e))},OrderedPairAccess:r([i.Point,i.Number],a.indexTypeError),Sum:function(e){if(e[1].valueType!==i.Number)throw a.sumLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.sumUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.sumArgumentTypeError([i.prettyPrint(e[3].valueType)])},Product:function(e){if(e[1].valueType!==i.Number)throw a.productLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.productUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.productArgumentTypeError([i.prettyPrint(e[3].valueType)])},Integral:function(e){if(e[1].valueType!==i.Number)throw a.integralLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.integralUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.integralArgumentTypeError([i.prettyPrint(e[3].valueType)])},NativeFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},ReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(!i.isList(e[0].valueType)||!i.isList(e[1].valueType))throw a.nonListDoubleReducer(this._symbol);if(e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.nonListParametrizedReducer(this._symbol);if(e[1].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==this._inputTypes[r])throw a.functionTypeError(this._symbol,t(e))},Derivative:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber)throw a.derivativeTypeError(t(e))},Regression:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.Number&&e[1].valueType!==i.ListOfNumber)throw a.regressionTypeError(t(e))},Polygon:function(e){if(1===e.length&&e[0].valueType!==i.ListOfPoint)throw a.polygonListTypeError(t(e));if(2===e.length&&e[0].valueType===i.Number&&e[1].valueType===i.Number)throw a.polygonTwoNumbersError();if(e.length>2&&!e.every(function(e){return e.valueType===i.Point}))throw a.polygonPointArgsError()}};for(var o in s)n[o].prototype.typeCheck=s[o]}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return t=t||"",""+t+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"(\'"+this._symbol+"\')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.constantValue+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._msg+"\')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"center: "+this.center.repr(e,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\\n"+i+"width: "+this.width.repr(e,t+1)+",\\n"+i+"height: "+this.height.repr(e,t+1)+"},\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+r+")"},t.Broadcast.prototype.repr=function(e,t){return n(this.type,e)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+r(this.args,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),r=e("math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var s=t[a].prototype;s.scalarEvalExpression=n[a],s.evaluate=r.createEvaluateFunction(s.scalarEvalExpression,i[a])}}),define("math/reconstitute-node",["require","parsenodes","math/types"],function(e){function t(e,i){if(n.isList(e)){for(var a=[],s=0;s<i.length;s++)a.push(t(n.elementType(e),i[s]));var o=r.List(a);return o.valueType=e,o}switch(e){case n.Number:case n.Bool:return r.Constant(i);case n.Point:return r.OrderedPair([r.Constant(i[0]),r.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+n.prettyPrint(e)+".")}}var r=e("parsenodes"),n=e("math/types");return t}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/builtin","math/distance","math/reconstitute-node"],function(e){var t=e("parsenodes"),r=t.Constant,n=t.Multiply,i=t.Subtract,a=t.RawExponent,s=t.BuiltInFunction,o=e("math/builtin"),u=e("math/distance"),c=e("math/reconstitute-node"),l={Expression:function(e){return this.copyWithArgs(e)},FreeVariable:function(e){return this},ScalarExpression:function(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].isConstant)return this.copyWithArgs(e);t.push(e[n].constantValue)}return r(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?e[1]:0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[0].constantValue?e[1]:1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?t.Negative([e[1]]):0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return r(this.evaluate([e[0].constantValue,e[1].constantValue]));if(e[0].isConstant){if(e[0].constantValue===Math.E)return s.exp([e[1]]);if(e[0].constantValue>0)return a(e)}if(e[1].isConstant){var t=e[1].constantValue;if(1===t)return e[0];if(t===Math.floor(t))return a(e);var i=o.toFraction(t,100);return u.approx(i.n/i.d,t,2)&&i.d%2===1?n([i.n%2===0?r(1):s.sign([e[0]]),a([s.abs([e[0]]),e[1]])]):a(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?r(-e[0].constantValue):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?r(e[0].constantValue&&e[1].constantValue):e[0].isConstant&&e[0]===!0?e[1]:e[0].isConstant&&e[0]===!1?r(!1):e[1].isConstant&&e[1]===!0?e[0]:e[1].isConstant&&e[1]===!1?r(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&e[0].constantValue===!0?e[1]:e[0].isConstant&&e[0].constantValue===!1?e[2]:this.copyWithArgs(e)},Integral:function(e){var t=e[0],a=e[1],s=e[2],o=e[3],u=o.getDependencies();if(a.isConstant&&s.isConstant){var c=s.constantValue-a.constantValue;if(o.isConstant)return r(o.constantValue*c);if(!o.dependsOn(t._symbol))return n([o,r(c)]);if(1===u.length&&u[0]===t._symbol)return r(this.evaluate(a.constantValue,s.constantValue,o))}else if(!o.dependsOn(t._symbol))return n([o,i([s,a])]);return this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},Broadcast:function(e){var t=e[0].getDependencies();for(r=0;r<t.length;r++)if(this._replacedSymbols.indexOf(t[r])===-1)return this.copyWithArgs(e);for(var r=1;r<e.length;r++)if(0!==e[r].getDependencies().length)return this.copyWithArgs(e);return c(this.valueType,this.evaluate(e.slice(1).map(function(e){return e.asValue()})))},ReducerFunction:function(e){return 0===e[0].getDependencies().length?c(this.valueType,this.evaluate([e[0].asValue()])):this.copyWithArgs(e)},DoubleReducerFunction:function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var t=Math.min(e[0].length,e[1].length);return c(this.valueType,this.evaluate([e[0].asValue().slice(0,t),e[1].asValue().slice(0,t)]))}return this.copyWithArgs(e)},ParametrizedReducerFunction:function(e){var t=e[0],r=e[1];return r.isConstant&&0===t.getDependencies().length?c(this.valueType,this.evaluate([t.asValue(),r.asValue()])):this.copyWithArgs(e)},RepeatedOperator:function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].constantValue,n=e[2].constantValue,i=e[3];if(i.isConstant)return r(this.evaluateConstant([t,n,i.constantValue]));var a=i.getDependencies();if(0===a.length||1===a.length&&a[0]===e[0]._symbol)return r(this.evaluate(t,n,i))}return this.copyWithArgs(e)}};for(var p in l)t[p].prototype._constantCollapsedCopy=l[p];s.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?r(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},s.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var n=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([r(n[0]),r(n[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"},n=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)};for(var i in r){var a=r[i];t[i].prototype.polynomialOrder=n(a)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.constantValue===Math.round(n.constantValue)&&n.constantValue>0?t*n.constantValue:1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes"],function(e){var t=e("parsenodes"),r=t.Constant(0),n=t.Constant(1);t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[r,n]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=Math.max(i,a);o++)i>=o&&a>=o?s.push(t.Add([r[o],n[o]])):s.push(i>a?r[o]:n[o]);return s},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=Math.max(i,a);o++)i>=o&&a>=o?s.push(t.Subtract([r[o],n[o]])):s.push(i>a?r[o]:t.Negative([n[o]]));return s},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=n.length-1,s=i.length-1;if(s>0)throw"can\'t solve for variable in exponent";if(0===a)return[t.Exponent([n[0],i[0]])];if(this.args[1].isConstant){var o=this.args[1].constantValue;switch(o){case 0:return[r];case 1:return n;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,s=[],o=0;o<=i;o++)for(var u=0;u<=a;u++){var c=t.Multiply([r[o],n[u]]),l=s[o+u];void 0===l?s[o+u]=c:s[o+u]=t.Add([l,c])}return s},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can\'t solve for variable in denominator";for(var s=0;s<r.length;s++)a.push(t.Divide([r[s],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){if(!this.dependsOn(e))return[this];var t=this.args[1].getPolynomialCoefficients(e);return t}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){for(var r=0;r<this.args.length;r++){var n=this.args[r];t=n.extractConditions(e,t)}return t},t.Constant.prototype.extractConditions=function(e,t){return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("math/builtinconstants",["require","math/parsenode/constant"],function(e){var t=e("math/parsenode/constant");return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(1)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){\nvar t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes"),i=t.Constant(0);t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){return n.unknownDomain()},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].constantValue)?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return n.unknownDomain();var t=this._difference,a=this._difference.boundDomain(e),s=t.polynomialOrder(e);if(s>1)return n.unknownDomain();var o=t.getPolynomialCoefficients(e),u=o[1]?o[1].getConcreteTree(r):i,c=o[0]?o[0].getConcreteTree(r):i;if(!u.isConstant||!c.isConstant)return n.unknownDomain();if(isNaN(u.constantValue)||isNaN(c.constantValue))return n.emptyDomain();if(0===u.constantValue)return c.constantValue>=0?a:n.emptyDomain();var l=-c.constantValue/u.constantValue,p=u.constantValue<0?[-(1/0),l]:[l,1/0];return n.intersectDomains(a,n.knownDomain(p))}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction"],function(e){var t=e("parsenodes"),r=e("math/baseparser"),n=e("math/builtinframe"),i=e("math/parsenode/builtinfunction"),a=t.Constant(0),s=t.Constant(1),o=t.Constant(2),u={FreeVariable:function(e){return e===this._symbol?s:a},Constant:function(e){return isFinite(this.constantValue)?a:t.Constant(this.constantValue)},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],o])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],s])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],a]),t.Piecewise([t.Comparator[">"]([this.args[1],a]),a,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),s,a])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([a,r]),n,t.Piecewise([t.Comparator["="]([s,r]),i,a])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],s={};s[r._symbol]=i;var o={};return o[r._symbol]=n,t.Add([g(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([a.substitute(s),i.takeDerivative(e)])),g(e,n,t.Multiply([a.substitute(o),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var r=this._replacedSymbols.slice(),n=this.args.slice(1),i=this._expression.takeDerivative(e),a=0;a<this._replacedSymbols.length;a++){var s=this._replacedSymbols[a],o=this.args[a+1];if(o.dependsOn(e)){var u=this.tmpVar(),c=t.DummyIndex(u);r.push(u),n.push(o.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(s),c])])}}return t.Broadcast(r,[i].concat(n))}},c={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",round:"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{1}{\\\\normalpdf(\\\\invNorm(x))}"},l={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],TScore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],TTest:["\\\\tpdf(\\\\TScore(x,y),\\\\length(x)-1)\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\tpdf(\\\\TScore(x,y),\\\\length(x)-1)*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],poissoncdf:["0/0","y_1\\\\sum _{n=0}^{\\\\floor(x)}\\\\frac{e^{-y}(n-y)y^{(n-1)}}{n!}"],tcdf:["x_1*\\\\tpdf(x,y)","0/0"],tpdf:["x_1*\\\\tpdf(x,y)*\\\\frac{-(y+1)*x}{y+x^2}","0/0"]},p={normalcdf:["x_1\\\\normalpdf(x,y,z)","-y_1\\\\normalpdf(x,y,z)","z_1*\\\\frac{y-x}{z}\\\\normalpdf(x,y,z)"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\normalpdf(x,y,z)","y_1*\\\\frac{x-y}{z^2} \\\\normalpdf(x,y,z)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\normalpdf(x,y,z)"],binompdf:["0/0","0/0","z_1*\\\\binompdf(x,y,z)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z})"],binomcdf:["0/0","0/0","z_1*\\\\sum _{n=0}^{\\\\round(x)}\\\\binompdf(n,y,z)*(\\\\frac{n}{z}-\\\\frac{\\\\round(y)-n}{1-z})"]},f=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return g(t,r[0],e.substitute(i)).getConcreteTree(n)}},h=function(e,r){return function(i){var a=this.args,s={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([g(i,a[0],e.substitute(s)),g(i,a[1],r.substitute(s))]).getConcreteTree(n)}},m=function(e,r,i){return function(a){var s=this.args,o={x:s[0],x_1:s[0].takeDerivative(a),y:s[1],y_1:s[1].takeDerivative(a),z:s[2],z_1:s[2].takeDerivative(a)};return t.Add([t.Add([g(a,s[0],e.substitute(o)),g(a,s[1],r.substitute(o))]),g(a,s[2],i.substitute(o))]).getConcreteTree(n)}};for(var d in c)i[d].prototype.takeDerivative=f(r.parse(c[d]));for(d in l)i[d].prototype.takeDerivative=h(r.parse(l[d][0]),r.parse(l[d][1]));for(d in p)i[d].prototype.takeDerivative=m(r.parse(p[d][0]),r.parse(p[d][1]),r.parse(p[d][2]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,s]),c=t.OrderedPairAccess([r,o]),l=t.OrderedPairAccess([a,s]),p=t.OrderedPairAccess([a,o]),f=g(e,u,u.takeDerivative(e)),h=g(e,c,c.takeDerivative(e)),m=g(e,l,l.takeDerivative(e)),d=g(e,p,p.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([f,u]),t.Multiply([f,l])]),t.Subtract([t.Multiply([m,l]),t.Multiply([m,u])])]),t.Add([t.Subtract([t.Multiply([h,c]),t.Multiply([h,p])]),t.Subtract([t.Multiply([d,p]),t.Multiply([d,c])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,s]),c=t.OrderedPairAccess([r,o]),l=t.OrderedPairAccess([a,s]),p=t.OrderedPairAccess([a,o]),f=g(e,u,u.takeDerivative(e)),h=g(e,c,c.takeDerivative(e)),m=g(e,l,l.takeDerivative(e)),d=g(e,p,p.takeDerivative(e));return t.OrderedPair([i.mean([f,m]),i.mean([h,d])]).getConcreteTree(n)};var g=function(e,t,r){return t.dependsOn(e)?r:a};for(var y in u){var v=u[y];t[y].prototype.takeDerivative=v}}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe","worker/workerconfig"],function(e){function t(e){var t=Object.create(d);return t.a=e[2]?e[2].tryGetConcreteTree(d):y,t.b=e[1]?e[1].tryGetConcreteTree(d):y,t.c=e[0]?e[0].tryGetConcreteTree(d):y,t}function r(e){return 0===e.a.constantValue?0===e.b.constantValue?0:1:2}function n(e,n,i,a){for(var s,o,u=[],c=[],l=0;l<i.length;l++){var p=i[l],f=0;h.eachArgs([n],function(e){var t=e[0];f=Math.max(f,t.polynomialOrder(p))});var m=f>2,d=i.length>1&&!e.validSolvedVariable(p),g=a&&n.extractConditions(p,y)!==y;m||d||g?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,h.eachArgs([n],function(e){var n=e[0];o=t(n.getPolynomialCoefficients(p)),c[l].push(o),u[l]=Math.max(u[l],r(o))}))}var v;if(1===i.length)o=c[0],s=i[0],v=u[0];else{var b;b=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,o=c[b],s=i[b],v=u[b]}return{localFrame:o,variableOfInterest:s,effectiveOrder:v}}function i(e,t){return t?T.inequality:T.generalEquation}function a(e){e.f=v.getConcreteTree(e),e.g=b.getConcreteTree(e),e.p=x.getConcreteTree(e),e.q=_.getConcreteTree(e),e.m=c(1e305)}var s=e("math/baseparser"),o=e("parsenodes"),u=o.Base,c=o.Constant,l=o.Equation,p=o.SolvedEquation,f=o.BaseComparator,h=o.List,m=e("math/errormsg"),d=e("math/builtinframe"),g=e("worker/workerconfig"),y=c(0),v=s.parse("b*b"),b=s.parse("4*a*c"),x=s.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),_=s.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),w=s.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),S=s.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),E=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),M=s.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),T={inequality:function(e){return a(e),M.getConcreteTree(e)},generalEquation:function(e){return a(e),e.a.isConstant&&0===e.a.constantValue?w.getConcreteTree(e):e.f.isConstant&&e.g.isConstant&&e.f.constantValue-e.g.constantValue===0?S.getConcreteTree(e):E.getConcreteTree(e)}};u.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof o.Error)return e;throw e}},l.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},f.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return r;if(r.isConstant)return r;var a="="!==this.getOperator(),s=this._difference.tryGetConcreteTree(t);s.isBroadcast&&(s=h(s.mapElements(function(e){return e})));var o=s.getDependencies();if(0===o.length)return s.isList?h(s.args.map(function(e){return c(0===e.constantValue)})):c(0===s.constantValue);if(1===o.length&&s.isList&&!a)return s;if(1===o.length&&!a&&!g.plotSingleVariableImplicitEquations)return m.singleVariableImplicitEquationsDisabled();var u=h.wrap(s);if(o.length>2)return m.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(o);if(a&&!e.validInequalityVariables(o))return m.invalidInequalityVariables().setDependencies(o);var l=n(e,u,o,a),f=l.localFrame,d=l.effectiveOrder,y=l.variableOfInterest;if(e.complicatedPolarImplicit(y,d))return m.complicatedPolarImplicit().setDependencies(o);if(!e.validImplicitVariables(o))return m.invalidImplicitVariables();if(d>2)return s;for(var v=i(o,a),b=[],x=0;x<f.length;x++){var _=v(f[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var w=0;w<_.args.length;w++){var S=_.args[w],E=u.args[x].extractConditions(y,S).getConcreteTree(t);b.push(E)}}return p(y,h(b))}}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label"],function(e){function t(e){return e.isError?e.getError():void 0===e.constantValue?"":+e.constantValue}function r(e,r,n){for(var i=[],a=0;a<r.columns.length;a++){var s=n.columns[a],o={dependent:!s.isIndependent,discrete:s.isIndependent};s.isError?(o.error=s.getError(),o.values=[]):o.values=s.values.map(t),i.push(o)}return{column_data:i}}function n(e,t,r){var n={variables:[],errorMap:{},dimensions:{}};if(r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.center.isError||r.radianAngle.isError||r.width.isError||r.height.isError)return n.variables=t.getSliderVariables(e,r),n;n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],a.List.eachArgs([r.center,r.radianAngle,r.width,r.height],function(e){n.dimensions.x.push(+e[0].args[0].constantValue),n.dimensions.y.push(+e[0].args[1].constantValue),n.dimensions.radianAngle.push(+e[1].constantValue),n.dimensions.width.push(+e[2].constantValue),n.dimensions.height.push(+e[3].constantValue)});var s=e.graphingEnabled()?t.getGraphMode(e,r):i.NONE;return s!==i.NONE&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),n}var i=e("graphing/graphmode"),a=e("parsenodes"),s=e("graphing/label"),o=function(){return{operator:"=",variables:[]}},u=function(e,t,u){if(t.isTable)return r(e,t,u);if(t.isImage)return n(e,t,u);var c=o();if(u.isError&&(!(t instanceof a.FunctionDefinition)||u.blocksExport))return c.error=u.getError(),c.variables=t.getSliderVariables(e,u),c.is_single_identifier=t instanceof a.Identifier,c;u.moveStrategy&&(c.move_strategy=u.moveStrategy,c.default_drag_mode=u.defaultDragMode),t.isInequality()&&(c.is_inequality=!0),c.operator=t.getOperator(),u instanceof a.SolvedEquation?u._expression.constantValue!==!0&&u._expression.constantValue!==!1&&(c.assignment=u._symbol):t instanceof a.Assignment&&(c.assignment=t._symbol);var l=e.graphingEnabled()?t.getGraphMode(e,u):i.NONE;if(l!==i.NONE){c.is_graphable=!0,c.expression_type=t.getExpressionType(l,u.valueType),u.isShadeBetween()&&(c.is_shade_between=!0);var p=t.tableInfo(e,u);p&&(c.is_tableable=!0,c.table_info=p)}c.variables=c.is_graphable?[]:t.getSliderVariables(e,u),c.is_single_identifier=t instanceof a.Identifier;var f=t.getSliderInfo();f?(c.is_slidable=!0,c.is_animatable=!c.is_graphable,c.constant_value=f.value):u.isConstant&&(c.constant_value=u.constantValue);var h=u.getEvaluationInfo();if(!h||"="!==c.operator||t.isConstant||t.isFunction||c.is_slidable||(c.is_evaluable=!0,c.zero_values=h),u instanceof a.OptimizedRegression){var m={};for(var d in u.parameters)u.parameters.hasOwnProperty(d)&&(m[s.identifierToLatex(d)]=+u.parameters[d].constantValue);c.is_regression=!0,c.regression={parameters:m,residualVariable:s.identifierToLatex(u.residualVariable),residualSuggestionId:u.residualSuggestionId,shouldSuggestLogMode:u.shouldSuggestLogMode,statistics:u.statistics}}return c};return u.default=o,u}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),r=e("pjs"),n=e("graphing/graphmode"),i=e("worker/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("math/features/analyze",["require","parsenodes","math/statementanalysis","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types","graphing/graphmode"],function(e){function t(e,t,r,n){var a=n.getDependencies();switch(n.valueType){case c.Point:case c.ListOfPoint:return a.length?e.validParametricVariables(a)?i(e,r,n):i(e,r,o.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a)):i(e,r,n);case c.Number:case c.ListOfNumber:switch(a.length){case 0:return i(e,r,n);case 1:return e.validExpressionVariable(a[0])?i(e,r,n):i(e,r,o.equationRequired(e.implicitDependency(a[0])).setDependencies(a));default:return e.validImplicitVariables(a)?i(e,r,o.equationRequired().setDependencies(a)):i(e,r,o.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a))}}}function r(e,t){return e.filter(function(e){return!t[e]})}var n=e("parsenodes"),i=e("math/statementanalysis"),a=e("math/builtinframe"),s=e("math/parsenode/builtinfunction"),o=e("math/errormsg"),u=e("math/comparators"),c=e("math/types"),l=e("graphing/graphmode");n.Base.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.Expression.prototype.analyze=function(e,r){var n=this.tryGetConcreteTree(r);return n.isError?i(e,this,n):t(e,r,this,n)},n.Identifier.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.FunctionDefinition.prototype.analyze=function(e,t){var r=/^log_[\\d|e]/;if(a[this._symbol]||r.test(this._symbol))return i(e,this,o.cannotRedefine(this._symbol));var n=this._symbol.split("_")[0];if(s[n])return i(e,this,o.cannotRedefine(this._symbol,n));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=this._argSymbols,l=u.getDependencies();if(l.indexOf(this._symbol)!==-1)return i(e,this,o.selfReferentialFunction(this._symbol));var p=l.filter(function(e){return c.indexOf(e)===-1});return e.unplottablePolarFunction(this._symbol,l)?i(e,this,o.unplottablePolarFunction()):p.some(e.assignmentForbidden)?i(e,this,o.addArgumentsToDefinition(p,this._symbol,c).setDependencies(l)):p.length?i(e,this,o.tooManyVariables(this.getSliderVariables(e,u)).setDependencies(l)):i(e,this,u)},n.Assignment.prototype.analyze=function(e,t,r){var s=this._symbol;if(!e.validLHS(s))return i(e,this,o.invalidLHS(s));if(a[s])return i(e,this,o.cannotRedefine(s));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=u.getDependencies();if(this.isEquation(u)){var l=this.asEquation().analyze(e,t);return i(e,this,l.concreteTree)}if(c.length>1){var p=this.getSliderVariables(e,u);return p.length?i(e,this,o.tooManyVariables(p).allowExport().setDependencies(c)):i(e,this,u)}var f=this.getMoveStrategy(t,u,r);if(f){var h=this.getDefaultDragMode(f);return i(e,this,n.MovablePoint(u.args,f,h))}return i(e,this,u)},n.Regression.prototype.analyze=function(e,t,r,n,a){return i(e,this,this.tryOptimize(e,t,r,n,a))},n.Polygon.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t),n=r.getDependencies();return n.length?i(e,this,o.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):i(e,this,this.tryGetConcreteTree(t))},n.Equation.prototype.analyze=n.BaseComparator.prototype.analyze=function(e,t){var r=this.trySolve(e,t);if(r.isError)return i(e,this,r);if(r instanceof n.SolvedEquation&&r.getDependencies().length){var a=r.getDependencies().concat(r._symbol);if(!e.validImplicitVariables(a))return i(e,this,o.invalidImplicitVariables().setDependencies(a))}return this.getGraphMode(e,r)!==l.IMPLICIT||e.validImplicitVariables(r.getDependencies())?i(e,this,r):i(e,this,o.invalidImplicitVariables().setDependencies(r.getDependencies()))},n.DoubleInequality.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return u.table[this._operators[0]].direction!==u.table[this._operators[1]].direction?i(e,this,o.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?i(e,this,o.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):r._expressions[0].getDependencies().indexOf(r._symbol)!==-1||r._expressions[1].getDependencies().indexOf(r._symbol)!==-1?i(e,this,o.complicatedDoubleInequality().setDependencies(n)):i(e,this,r):i(e,this,o.invalidDoubleInequalityVariables().setDependencies(n))},n.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?i(e,this,o.complicatedDoubleInequality().setDependencies(n)):i(e,this,o.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):i(e,this,r)},n.OrderedPair.prototype.analyze=function(e,r,a){var s=this.tryGetConcreteTree(r);if(s.isError)return i(e,this,s);var o=this.getMoveStrategy(r,s,a);if(o){var u=this.getDefaultDragMode(o);return i(e,this,n.MovablePoint(s.args,o,u))}return t(e,r,this,s)},n.Table.prototype.analyze=function(e,t){for(var a,s=Object.create(t),u=[],c=0;c<this.columns.length;c++){var l=this.columns[c].analyze(e,s,t);if(0===c&&(l.concreteTree.isIndependent?e.validFirstColumnVariable(l.concreteTree.header._symbol)?a=l.concreteTree.header._symbol:l=i(e,this.columns[c],o.invalidFirstTableColumn()):l=i(e,this.columns[c],o.invalidDependentFirstTableColumn())),l.concreteTree.isIndependent)l.rawTree.exportToLocal(l.concreteTree,s);else if(!l.concreteTree.isError){var p=l.concreteTree.header.getDependencies(),f=r(p,s);f.length&&(l=i(e,this.columns[c],o.tooManyVariables(f).setDependencies(f)))}u.push(l.concreteTree)}var h=n.Table(u),m=i(e,this,h);return m.evaluationState.is_graphable=!0,m},n.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return i(e,this,o.invalidTableHeader(n));var a=this.tryGetConcreteTree(t,r);if(a.isError)return i(e,this,a);if(a.header.isError)return i(e,this,a.header);if(a.values.isError)return i(e,this,a.values);for(var s=0;s<a.values.length;s++)if(!a.values[s].isError){var u=this.values[s]&&this.values[s].tableError();if(u)a.values[s]=o.invalidTableEntry(u);else{var c=a.values[s].getDependencies();c.length&&(a.values[s]=o.tooManyVariables(c).setDependencies(c))}}return i(e,this,a)},n.Image.prototype.analyze=function(e,t,r){var a=this.tryGetConcreteTree(t);if(a.radianAngle.isError||a.center.isError||a.width.isError||a.height.isError)return i(e,this,a);var s=a.center.getDependencies(),u=a.radianAngle.getDependencies(),c=a.width.getDependencies(),l=a.height.getDependencies();return"OrderedPair"!==this.center.type?i(e,this,n.Image({center:o.parseError(),radianAngle:a.radianAngle,width:a.width,height:a.height})):s.length||u.length||c.length||l.length?i(e,this,n.Image({center:s.length?o.tooManyVariables(u).setDependencies(s):a.center,radianAngle:u.length?o.tooManyVariables(u).setDependencies(u):a.radianAngle,width:c.length?o.tooManyVariables(c).setDependencies(c):a.width,height:l.length?o.tooManyVariables(l).setDependencies(l):a.height})):(a.moveStrategy=this.getMoveStrategy(t,a,r),i(e,this,a))}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");r.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var o=r.getDependencies();if(o.length>0){var u,c=o[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):s.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeFourFunction=t,r.DoubleInequality.prototype.analyzeFourFunction=t,r.BaseComparator.prototype.analyzeFourFunction=t,r.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/builtinframe");r.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var a=r.getDependencies();return a.length>0?n(e,this,i.tooManyVariables(a)):n(e,this,r)},r.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(a[r])return n(e,this,i.cannotRedefine(r));var s=this.tryGetConcreteTree(t);if(s.isError)return n(e,this,s);var o=s.getDependencies();return this.isEquation(s)?n(e,this,i.equationsUnsupported()):o.length>0?n(e,this,i.tooManyVariables(o)):n(e,this,s)},r.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(a[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var s=this._argSymbols,o=r.getDependencies();if(o.indexOf(this._symbol)!==-1)return n(e,this,i.selfReferentialFunction(this._symbol));var u=o.filter(function(e){return s.indexOf(e)===-1});return u.length?n(e,this,i.addArgumentsToDefinition(u,this._symbol,s)):n(e,this,r)},r.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeScientific=t,r.DoubleInequality.prototype.analyzeScientific=t,r.BaseComparator.prototype.analyzeScientific=t,r.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeSingleExpressionScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");r.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var o=r.getDependencies();if(o.length>0){var u,c=o[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):s.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeSingleExpressionScientific=t,r.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,r.BaseComparator.prototype.analyzeSingleExpressionScientific=t,r.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("graphing/dragmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NONE="NONE",t.X="X",t.Y="Y",t.XY="XY",t.AUTO="AUTO";\n}),define("graphing/reconcileDragMode",["require","exports","graphing/dragmode"],function(e,t,r){"use strict";function n(e){return e?"none"===e[0].type&&"none"===e[1].type?r.NONE:"none"===e[1].type?r.X:"none"===e[0].type?r.Y:r.XY:r.NONE}function i(e,t){var i=n(t);switch(e){case r.NONE:return r.NONE;case r.AUTO:return i;case r.XY:return i;case r.X:return i===r.X||i===r.XY?r.X:r.NONE;case r.Y:return i===r.Y||i===r.XY?r.Y:r.NONE;default:return r.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===o.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,s(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case u.Point:case u.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==o.NONE?a.XYPOINT_MOVABLE:0===n.length?a.XYPOINT:e.validParametricVariables(n)?a.PARAMETRIC:a.NONE;case u.Number:case u.ListOfNumber:return 1===n.length?a.Y:a.NONE;default:return a.NONE}}function n(e,t){var r=t._expression.getDependencies();if(r.length>1)return a.NONE;if(t._expression.valueType!==u.Number&&t._expression.valueType!==u.ListOfNumber)return a.NONE;var n=t._symbol,i=r[0];return e.graphMode(n,i)}var i=e("parsenodes"),a=e("graphing/graphmode"),s=e("graphing/reconcileDragMode").default,o=e("graphing/dragmode"),u=e("math/types");i.Base.prototype.getGraphMode=function(e,t){return a.NONE},i.Identifier.prototype.getGraphMode=function(e,t){return e.graphableAsBareIdentifier(this._symbol)?a.Y:a.NONE},i.Expression.prototype.getGraphMode=r,i.Equation.prototype.getGraphMode=i.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?a.NONE:t instanceof i.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):a.NONE:n(e,t):r.length<=2?a.IMPLICIT:a.NONE},i.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},i.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof i.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var s=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(s.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):a.NONE;case 1:return t.valueType!==u.ListOfNumber||e.graphableListVariables(this._symbol,s[0])?e.graphMode(this._symbol,s[0]):a.NONE;default:return a.NONE}break;default:return r.call(this,e,t)}},i.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return a.NONE;var r=e.graphMode(this._symbol,this._argSymbols[0]),n=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?a.NONE:r;default:return a.NONE}break;default:return a.NONE}},i.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?a.NONE:a.Y:a.NONE},i.Polygon.prototype.getGraphMode=function(e,t){return t.isError?a.NONE:a.POLYGONFILL},i.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError?a.NONE:a.XYPOINT:a.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes");t.Base.prototype.getGraphInfo=function(e,t){var r,i,a=t.getDependencies();switch(a.length){case 0:r=!0,i=t.boundDomain("x");break;case 1:i=t.boundDomain(a[0]),r="known"===i.type&&t.isLinear(a[0]);break;case 2:r=!1,i=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:r,linearCoefficients:r?t.getLinearCoefficients():void 0,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.constantValue,0];case 1:var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].getConcreteTree(r).constantValue:0,t[1]?+t[1].getConcreteTree(r).constantValue:0];default:return[NaN,NaN]}},t.OrderedPair.prototype.getLinearCoefficients=function(){return[this.args[0].getLinearCoefficients(),this.args[1].getLinearCoefficients()]}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types"],function(e){function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t){for(var r in t)if(t[r].evaluationState.assignment===e&&t[r].evaluationState.is_slidable)return r}function a(e,t,r,n){for(var a=e.getDependencies(),o=0;o<a.length;o++)if(n[a[o]])return!1;for(var c=a.length-1;c>=0;c--){var l=a[c],p=i(l,r);if(void 0!==p){var f=Object.create(t);f[l]=s.FreeVariable(l);var h=e.tryGetConcreteTree(f);if(!h.isError){var m=h.polynomialOrder(l);if(1===m){var d=h.getPolynomialCoefficients(l),g=d[1]?d[1].getConcreteTree(f):u,y=d[0]?d[0].getConcreteTree(f):u;if(y.isConstant&&g.isConstant&&isFinite(y.constantValue)&&isFinite(g.constantValue)&&0!==g.constantValue){var v=[-y.constantValue/g.constantValue,1/g.constantValue];return{symbol:l,id:p,coefficients:v}}}}}}return!1}var s=e("parsenodes"),o=e("math/types"),u=s.Constant(0);s.Base.prototype.getMoveStrategy=function(){},s.Assignment.prototype.getMoveStrategy=function(e,t,r){if(this._expression instanceof s.OrderedPair)return this._expression.getMoveStrategy(e,t,r)},s.OrderedPair.prototype.getMoveStrategy=function(e,i,s){if(i.valueType===o.Point&&0===i.getDependencies().length){for(var u=[],c={},l=0;l<2;l++){var p=this.args[l],f=p.getInputString();if(p.isConstant)u[l]=r(f);else{var h=a(p,e,s,c);h&&(u[l]=n(f,h.id,h.coefficients),c[h.symbol]=!0),u[l]||(u[l]=t(f))}}if("none"!==u[0].type||"none"!==u[1].type)return u}},s.Image.prototype.getMoveStrategy=function(e,i,s){if((!this.userData||this.userData.shouldGraph!==!1)&&"OrderedPair"===i.center.type&&i.center.args[0].isConstant&&i.center.args[1].isConstant&&i.width.isConstant&&i.height.isConstant&&i.radianAngle.isConstant){for(var o=[this.width,this.height,this.center.args[0],this.center.args[1]],u=[],c={},l=[2,3,0,1],p=0;p<l.length;p++){var f=l[p],h=o[f];if(h){var m=h.getInputString();if(h.isConstant)u[f]=r(m);else{var d=a(h,e,s,c);d&&(u[f]=n(m,d.id,d.coefficients),c[d.symbol]=!0),u[f]||(u[f]=t(m))}}else u[f]=t("")}if("none"!==u[0].type||"none"!==u[1].type||"none"!==u[2].type||"none"!==u[3].type)return u}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),r=e("graphing/dragmode");t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types","graphing/label"],function(e){var t=e("parsenodes"),r=t.List,n=e("math/types"),i=e("graphing/label");t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.graphableAsBareIdentifier(this._symbol)&&(!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this._inputString,by_reference:!1})},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;var a=r.wrap(t).mapElements(function(e){return e.asArray()});return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:a};case n.Number:if(1!==i.length)return!1;var s=i[0];return!!e.validFirstColumnVariable(s)&&{independent_variable:s,dependent_column:this._inputString,by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this._inputString.length)return!1;var n=r.getDependencies();if(n.length>1)return!1;var a;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;a=e.implicitIndependent(this._symbol)}else a=n[0];if(!e.validFirstColumnVariable(a))return!1;var s=e.assignmentForbidden(this._symbol)?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:a,dependent_column:s,by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this._inputString.length)return!1;var r=t.getDependencies();if(r.length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var a=e.assignmentForbidden(this._symbol),s=a?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:n,dependent_column:s,by_reference:!a}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),r=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&r.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return r.t("Regressions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.SolvedEquation.prototype.isLinear=function(e){return this._expression.isLinear(e)},t.OptimizedRegression.prototype.isLinear=function(e){return this.model.isLinear(e)},t.OrderedPair.prototype.isLinear=function(e){return this.args[0].isLinear(e)&&this.args[1].isLinear(e)},t.List.prototype.isLinear=function(e){return this.args.every(function(t){return t.isLinear(e)})},t.Broadcast.prototype.isLinear=function(e){for(var r=this._replacedSymbols,n=this._expression,i=this._lists,a={},s=0;s<i.length;s++)if(i[s].dependsOn(e)){if(!i[s].isLinear(e))return!1;a[r[s]]=t.FreeVariable(e)}return n.substitute(a).isLinear(e)}}),define("math/expression-types",["require","exports"],function(e,t){"use strict";function r(e,r){switch(e){case t.X_OR_Y:case t.SINGLE_POINT:case t.POINT_LIST:case t.PARAMETRIC:case t.POLAR:case t.IMPLICIT:case t.POLYGON:var n=t.EXPRESSION_PROP_DEFAULTS[e];return{points:void 0===r.points?n.points:r.points,lines:void 0===r.lines?n.lines:r.lines,fill:void 0===r.fill?n.fill:r.fill};default:var i=e;return i}}Object.defineProperty(t,"__esModule",{value:!0}),t.X_OR_Y="X_OR_Y",t.SINGLE_POINT="SINGLE_POINT",t.POINT_LIST="POINT_LIST",t.PARAMETRIC="PARAMETRIC",t.POLAR="POLAR",t.IMPLICIT="IMPLICIT",t.POLYGON="POLYGON",t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0}},t.getReconciledExpressionProps=r}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/dragmode","math/expression-types"],function(e){function t(e){for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}}function r(e){return Array.prototype.concat.apply([],e)}function n(e,t,r){return!!e&&(0===t&&0===r?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==r?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==r&&"none"!==e[1].type)}var i=e("underscore"),a=e("parsenodes"),s=e("math/plotter").default,o=e("graphing/graphmode"),u=e("math/comparators"),c=e("graphing/dragmode"),l=e("math/expression-types"),p=a.List;a.Base.prototype._graph=function(e,n,u,c){if(n instanceof a.SolvedEquation)return this._graph(e,n._expression,u,c);var f,h,m,d,g,y=this,v=n.getExpressionType(c.graphMode,n.valueType),b=l.getReconciledExpressionProps(v,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(c.graphMode){case o.XYPOINT_MOVABLE:return f=[n.asArray()],m=this.userData.shouldGraph&&b.points,g=this.userData.showLabel&&!m,m?[{segments:[f],graphMode:c.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(f)}]:g?[{segments:[f],graphMode:o.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(f)}]:[];case o.XYPOINT:return h=[],f=p.wrap(n).mapElements(function(e){return e.asArray()}),m=this.userData.shouldGraph&&b.points,d=this.userData.shouldGraph&&b.lines,g=this.userData.showLabel&&!m&&!d,(this.userData.showLabel||m)&&h.push({segments:[f],graphMode:c.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:m,labelSize:this.userData.labelSize,nakedLabel:g,labels:this.computedLabels||[],poi:t(f)}),d&&h.push({segments:[f].map(r),graphMode:o.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,poi:[]}),h;case o.PARAMETRIC:var x=this.userData,_=[];if(h=p.wrap(n).mapElements(function(r){var n=r.getDependencies();if(0===n.length)return f=[r.asArray()],{segments:[f],graphMode:o.XYPOINT,color:x.color,style:x.lineStyle,poi:t(f)};var i=r.getCompiledFunction().fn,a=y.getGraphInfo(e,r);return a.graphMode=c.graphMode,a.domain=y.userData.domain,a.style=y.userData.lineStyle,s.computeGraphData(u,a,i)}),b.fill){if(h.forEach(function(e){_.push({segments:e.segments,color:x.color,fillOpacity:x.fillOpacity,graphMode:o.POLYGONFILL,poi:[]})}),!b.lines)return _;h=h.concat(_)}return h;case o.X:case o.Y:case o.IMPLICIT:case o.POLAR:return h=[],p.wrap(n).eachElement(function(t){var r,n=c.graphMode===o.IMPLICIT?t.getCompiledFunction(["x","y"]):t.getCompiledFunction();try{r=t.getCompiledDerivative()}catch(e){}var a=y.getGraphInfo(e,t);a.graphMode=c.graphMode,a.style=y.userData.lineStyle;var l=r?s.computeGraphData(u,a,n.fn,r.fn):s.computeGraphData(u,a,n.fn);l.compiled=n,l.fillSegments?h.push(i.omit(l,"fillSegments")):h.push(l),a.graphMode===o.IMPLICIT&&"="!==a.operator&&h.push({graphMode:o.POLYGONFILL,segments:l.fillSegments,poi:{}})}),h;default:return!1}},a.Base.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},a.BaseComparator.prototype.graph=function(e,t,r){var n=this,i=this.getGraphInfo(e,t),c=i.graphMode;if(c===o.IMPLICIT)return this._graph(e,t,r,i);if(c===o.NONE)return!1;if(!(t instanceof a.SolvedEquation))return!1;var l=this.getOperator(),p=[],f=[],h=!0;t._expression.eachElement(function(e){p.push(e.getCompiledFunction());try{f.push(e.getCompiledDerivative())}catch(e){h=!1}}),h||(f=void 0);var m,d,g=[],y=[-1,0,0,1],v=p.length;for(d=0;d<v;d++){var b=this.getGraphInfo(e,t._expression.args[d]);b.graphMode=c,b.style=n.userData.lineStyle,m=f?s.computeGraphData(r,b,p[d].fn,f[d].fn):s.computeGraphData(r,b,p[d].fn),m.compiled=p[d],m.operator=u.get(u.table[l].inclusive,y[d%4]),g.push(m)}for(d=0;d<v;d+=4){var x=s.polygonsFromSegments(g[d+1].segments,g[d+2].segments,c);g.push({graphMode:o.POLYGONFILL,segments:x,poi:{}})}return g},a.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===o.NONE)return!1;var i=[],a=u.get(u.table[this._operators[0]].inclusive,0),c=u.get(u.table[this._operators[1]].inclusive,0),l=this.userData,f=this;return p.eachArgs(t._expressions,function(t){var u,p;t[0].userData=t[1].userData=l,u=f._graph(e,t[0],r,n)[0],u.operator=a,i.push(u),p=f._graph(e,t[1],r,n)[0],p.operator=c,i.push(p);var h=s.polygonsFromSegments(u.segments,p.segments,u.graphMode);i.push({graphMode:o.POLYGONFILL,segments:h,poi:{}})}),i},a.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},a.Polygon.prototype.graph=function(e,t,n){for(var i=this.getGraphInfo(e,t),a=t.args[0].asValue(),s=[],u=void 0===this.userData.lines||this.userData.lines,c=void 0===this.userData.fill||this.userData.fill,l=[],p=[],f=0;f<a.length;f++){var h=a[f][0],m=a[f][1];isFinite(h)&&isFinite(m)?(u||c)&&p.push([h,m]):(u||c)&&(p.length>1&&l.push(p),p=[])}if(l.length||p.length){p.push([a[0][0],a[0][1]]),l.push(p);var d=l.map(r);c&&s.push({segments:d,graphMode:o.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.userData.fillOpacity,style:i.style}),u&&s.push({segments:d,graphMode:o.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle})}return s},a.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return!(!a||!isFinite(a.constantValue)||0!==a._dependencies.length)},a.Table.prototype.graph=function(e,n,i){var a=[];if(n.columns[0].isError)return a;for(var s=n.columns[0],u=s.values,l=1;l<this.columns.length;l++){var p=n.columns[l];if(!p.isError){var f=this.columns[l].header.userData;if(!f.hidden){for(var h=f.dragMode,m=h===c.X||h===c.XY,d=h===c.Y||h===c.XY,g=!!f.points,y=!!f.lines,v=p.isDiscrete(s),b=y&&v,x=y&&!v,_=[],w=[],S=[],E=[],M=[],T=[],P=0;P<u.length;P++){var I=u[P],D=p.values[P];if(I&&D&&isFinite(I.constantValue)&&isFinite(D.constantValue)){if(g){var C=m&&this.isValueDraggable(n,0,P),N=d&&this.isValueDraggable(n,l,P);C||N?(S.push([I.constantValue,D.constantValue]),E.push({index:P,dragX:C,dragY:N})):w.push([I.constantValue,D.constantValue])}b&&T.push([I.constantValue,D.constantValue])}else b&&(T.length>1&&M.push(T),T=[])}if(S.length&&_.push({graphMode:o.XYPOINT_MOVABLE,segments:[S],color:f.color,tableId:f.tableId,poi:t(S),movablePointInfo:E}),w.length&&_.push({segments:[w],graphMode:o.XYPOINT,showPoint:!0,poi:t(w),color:f.color,style:f.pointStyle}),(M.length||T.length)&&(M.push(T),_.push({segments:M.map(r),graphMode:o.PARAMETRIC,poi:[],color:f.color,style:f.lineStyle})),x){var O=this.columns[l].header.graph(e,n.columns[l].header,i);O.length&&Array.prototype.push.apply(_,O)}_.length&&(a[f.id]=_)}}}return a},a.Image.prototype.graph=function(e,r,i){var a=[];if(!("OrderedPair"===r.center.type&&r.center.args[0].isConstant&&r.center.args[1].isConstant&&r.radianAngle.isConstant&&r.width.isConstant&&r.height.isConstant))return a;for(var s=[],u=[],c=r.width.constantValue/2,l=r.height.constantValue/2,p=r.radianAngle.constantValue,f=-1;f<=1;f++)for(var h=-1;h<=1;h++){var m=[r.center.args[0].constantValue+f*c*Math.cos(p)+h*l*Math.sin(p),r.center.args[1].constantValue-f*c*Math.sin(p)+h*l*Math.cos(p)],d=n(r.moveStrategy,f,h);d&&(s.push(m),u.push([f,h]))}return a.push({segments:[s],scaleFactors:[u],graphMode:o.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:t(s)}),a}}),define("math/features/elementAt",["require","parsenodes","math/builtinframe"],function(e){function t(e){for(var t=0;t<this.length;t++)e(this.elementAt(t))}function r(e){for(var t=[],r=0;r<this.length;r++)t.push(e(this.elementAt(r)));return t}var n=e("parsenodes"),i=e("math/builtinframe");n.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(e){if(e=Math.floor(e),e<0||e>=this.length)return n.Constant(NaN);for(var t={},r=0;r<this._replacedSymbols.length;r++)t[this._replacedSymbols[r]]=this._lists[r].elementAt(e);return this._expression.substitute(t).getConcreteTree(i)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=r,n.Broadcast.prototype.mapElements=r,n.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}}}),define("lib/number-to-latex",["require","exports"],function(e,t){"use strict";function r(e){if("string"==typeof e)return e;var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("math/features/printLatex",["require","parsenodes","graphing/label","lib/number-to-latex"],function(e){function t(){return u.identifierToLatex(this._symbol)+" "}function r(e){switch(e){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function n(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}function a(e){return e.isConstant&&e.constantValue===!0}function s(e){return e.isConstant&&e.isNaN()}var o=e("parsenodes"),u=e("graphing/label"),c=e("lib/number-to-latex").default;o.Identifier.prototype.printLatex=t,o.FreeVariable.prototype.printLatex=t,o.Constant.prototype.printLatex=function(){return c(this.constantValue)},o.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},o.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},o.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},o.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},o.Assignment.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},o.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},o.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},o.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.args[1])+this.args[2].printLatex()+r(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},o.And.prototype.printLatex=function(){if(!(this.args[0]instanceof o.BaseComparator&&this.args[1]instanceof o.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+r(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+r(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},o.NativeFunction.prototype.printLatex=i,o.TypedFunction.prototype.printLatex=i,o.ReducerFunction.prototype.printLatex=i,o.ParametrizedReducerFunction.prototype.printLatex=i,o.DoubleReducerFunction.prototype.printLatex=i,o.FunctionCall.prototype.printLatex=i,o.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(n).join(", ")+"\\\\right)"}},o.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(n).join(", ")+"\\\\right]"},o.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\\\right]"},o.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},o.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},o.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},o.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},o.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},o.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},o.Piecewise.prototype.printLatex=function(){var e=this;if(a(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(a(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),s(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof o.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},o.FunctionDefinition.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(u.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},o.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+u.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},o.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},o.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}),define("math/features/getExpressionType",["require","parsenodes","graphing/graphmode","math/expression-types","math/types"],function(e){var t=e("parsenodes"),r=e("graphing/graphmode"),n=e("math/expression-types"),i=e("math/types");t.Base.prototype.getExpressionType=function(e,t){return e===r.X||e===r.Y?n.X_OR_Y:e===r.XYPOINT||e===r.XYPOINT_MOVABLE?t===i.Point?n.SINGLE_POINT:n.POINT_LIST:e===r.PARAMETRIC?n.PARAMETRIC:e===r.POLAR?n.POLAR:e===r.IMPLICIT?n.IMPLICIT:n.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return n.POLYGON}}),define("parser",["require","math/baseparser","math/features/getConcreteTree","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeSingleExpressionScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex","math/features/getExpressionType"],function(e){var t=e("math/baseparser");return e("math/features/getConcreteTree"),e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeSingleExpressionScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),e("math/features/getExpressionType"),t}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,i){function a(e){y[e]=y[e]||{};var r,n=y[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(m.hasOwnProperty(c))for(var l=m[c],p=0;p<l.length;p++){var f=l[p];y.hasOwnProperty(f)?(r=y[f],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(f),r=y[f],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)s(n);else{for(var h=[r];;)if(r=b.pop(),r.instack=!1,h.push(r),r===n)break;o(h)}}function s(e){x.push(e.id)}function o(r){var i,a,s=[];for(a=r.length-1;a>=0;a--){i=r[a];var o=t[i.id].getLegalExports(e);Array.prototype.push.apply(s,o),s.push(o[0]),x.push(i.id)}for(s=n.unique(s),s.sort(),a=0;a<s.length;a++)g[s[a]]=s}var u,c,l,p,f,h=[],m={},d={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(f=t[u].exportPenalty||0;h.length<f+1;)h.push([]);h[f].push(u)}for(f=0;f<h.length;f++){var _={};for(c=0;c<h[f].length;c++){u=h[f][c];var w=t[u].getLegalExports(e);for(l=0;l<w.length;l++)p=w[l],r[p]||m[p]||(_[p]=_[p]||[],_[p].push(u),_[p].length>1&&(d[p]=!0))}for(p in _)m[p]=_[p]}for(c=0;c<i.length;c++)y.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:d,cyclicallyDefined:g}}var r=e("math/builtinframe"),n=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./plotter","parsenodes","./distance"],function(e){function t(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===l.X&&n===l.X||r===l.Y&&n===l.Y?function(r){return t(r)-e(r)}:(r===l.X&&n===l.Y||r===l.Y&&n===l.X)&&function(r){return r-t(e(r))}}function n(e){e instanceof f.SolvedEquation?e=e._expression:e instanceof f.OptimizedRegression&&(e=e.model);var t=[],r=[];return e instanceof f.DoubleInequality?f.List.eachArgs(e._expressions,function(e){t.push(e[0].getCompiledFunction()),r.push(e[0].isConstant&&e[1].isNaN()),t.push(e[1].getCompiledFunction()),r.push(e[1].isConstant&&e[1].isNaN())}):f.List.wrap(e).eachElement(function(e){t.push(e.getCompiledFunction()),r.push(e.isConstant&&e.isNaN())}),{functions:t,skipIntersecting:r}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],s=n(a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:s.functions,skipIntersecting:s.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t;\n}function s(e,t){if(t===l.X){var r=e.y;e.y=e.x,e.x=r}}function o(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,t,r){var n=p.sampleXY(e,t),i=n.poi.zeros,a=n.poi.extrema,s=[],o=0,u=0;for(o=0;o<i.x.length;o++){for(;u<a.x.length&&a.x[u]<i.x[o];u++)h.approx(a.y[u],0)&&s.push(a.x[u]);s.push(i.x[o])}for(;u<a.x.length;u++)h.approx(a.y[u],0)&&s.push(a.x[u]);return{x:s,y:s.map(r)}}function c(e,c,l){var f=e[l],h=f.getGraphInfo(),d=f.getGraphMode(),g=n(f.concreteTree),y=t(g.functions.length),v=i(e,l);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var S=g.functions[w].fn,E=p.computeDomain(c,h,S),M=0;M<_.functions.length;M++)if(!v[x].skipIntersecting[M]){var T=_.functions[M].fn,P=r(S,T,d,_.graphMode);if(P){var I=u(P,E,S);if(b+=I.x.length,b>m)return t(g.functions.length);a(I,_.id),s(I,d),o(y[w],I)}}return y}var l=e("graphing/graphmode"),p=e("./plotter").default,f=e("parsenodes"),h=e("./distance"),m=100;return{findIntersections:c,findIndicatorZeros:u}}),define("math/interpolatedlabel",["require","exports","parsenodes","math/types","graphing/label"],function(e,t,r,n,i){"use strict";function a(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function s(e){for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"],n="\\\\$({"+r.join("})|\\\\$({")+"})",i=new RegExp(n,"g"),a=[],s=0,o=0;t=i.exec(e);){o=t.index,o>s&&a.push(e.substr(s,o-s));var u=t[0],c=u.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:u}),s=t.index+u.length}return s<e.length&&a.push(e.substr(s)),{raw:e,parts:a}}function o(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function u(e,t,i){for(var s=[],u=a(e.raw),c=0,l=e.parts;c<l.length;c++){var p=l[c];if("string"==typeof p)s.push(p);else{var f=r.Identifier(p.symbol).tryGetConcreteTree(t);if(f.valueType===n.Number){var h=f.constantValue;if("number"==typeof h){s.push(o(h,u));continue}}else if(f.valueType===n.ListOfNumber&&f.args[i]){var h=f.args[i].constantValue;if("number"==typeof h){s.push(o(h,u));continue}}u?s.push("{?}"):s.push("?")}}return s.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=a,t.parse=s,t.interpolate=u}),define("math/policyFourFunction",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]}};return t}),define("math/policyScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"tmp"===e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policySingleExpressionScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!1},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]}};return t}),define("math/policyGraphing",["require","graphing/graphmode","math/parsenode/builtinfunction"],function(e){var t=e("graphing/graphmode"),r=e("math/parsenode/builtinfunction"),n={assignmentForbidden:function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},sliderForbidden:function(e){return n.assignmentForbidden(e)||"ans"===e.slice(0,3)},sliderVariables:function(e){return e.indexOf("theta")!==-1&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!n.sliderForbidden(e)})},graphingEnabled:function(){return!0},ansEnabled:function(){return!1},validRegressionParameter:function(e){return"x"!==e&&"y"!==e},validLHS:function(e){return"theta"!==e},unplottablePolarFunction:function(e,t){return"theta"===e&&t.indexOf("r")!==-1},validDoubleInequalitySymbol:function(e){return"x"===e||"y"===e},validDoubleInequalityVariables:function(e){return!(e.length>2)&&e.every(n.validDoubleInequalitySymbol)},validExpressionVariable:function(e){return"x"===e},validSolvedVariable:function(e){return"x"===e||"y"===e||"r"===e},validImplicitVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},graphableListVariables:function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},validParametricVariable:function(e){return"t"===e},validParametricVariables:function(e){return 1===e.length&&n.validParametricVariable(e[0])},validInequalityVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return n.validImplicitVariables(e);default:return!1}},validFirstColumnVariable:function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},complicatedPolarImplicit:function(e,t){return"theta"===e||"r"===e&&1!==t},constantGraphMode:function(e){return"x"===e?t.X:"r"===e?t.POLAR:t.Y},graphMode:function(e,r){return"y"===r?t.X:"x"===e?t.X:"r"===e&&"theta"===r?t.POLAR:t.Y},tableableAsConstant:function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},implicitIndependent:function(e){return"x"},implicitDependency:function(e){return"y"===e?"x":"theta"===e?"r":"y"},graphableAsConstant:function(e){return"y"===e||"x"===e||"r"===e},graphableAsBareIdentifier:function(e){return"x"===e},disabledFeatures:function(){return[]}};return n}),define("math/frameFourFunction",["require"],function(e){return{frame:{},restrictedFunctionsFrame:{}}}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e,r,n,i){t(r,i),t(n,i);for(var a=0;a<r.length;a++){var s=r[a];n.indexOf(s)===-1&&(e[s]=i[s])}}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a={},s=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return r(a,s,[],n),r(a,o,[],i),{frame:a,restrictedFunctionsFrame:a}}),define("math/frameSingleExpressionScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e,r,n,i){t(r,i),t(n,i);for(var a=0;a<r.length;a++){var s=r[a];n.indexOf(s)===-1&&(e[s]=i[s])}}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a={},s=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return r(a,s,[],n),r(a,o,[],i),{frame:a,restrictedFunctionsFrame:a}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],a={},s={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t],s[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t],i.indexOf(t)===-1&&(s[t]=n[t]));return{frame:a,restrictedFunctionsFrame:s}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/parsenode/builtinfunction","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","./interpolatedlabel","math/types","math/policyFourFunction","math/policyScientific","math/policySingleExpressionScientific","math/policyGraphing","math/frameFourFunction","math/frameScientific","math/frameSingleExpressionScientific","math/frameGraphing"],function(e){function t(e,t,r){r||(r=[]);var n;return n=t?_[e].restrictedFunctionsFrame:_[e].frame,r.indexOf("sqrt")!==-1&&(n=Object.create(n),n.sqrt=f.sqrt),n}var r=e("console"),n=e("pjs"),i=e("underscore"),a=e("./plotter").default,s=e("parser"),o=e("math/parsenode/constant"),u=e("math/parsenode/image"),c=e("math/parsenode/table"),l=e("math/parsenode/tablecolumn"),p=e("math/parsenode/freevariable"),f=e("math/parsenode/builtinfunction"),h=e("math/finddependencyorder"),m=e("math/errormsg"),d=e("graphing/graphmode"),g=e("worker/workerconfig"),y=e("./findIntersections").findIntersections,v=e("./interpolatedlabel"),b=e("math/types"),x={fourFunction:e("math/policyFourFunction"),scientific:e("math/policyScientific"),singleExpressionScientific:e("math/policySingleExpressionScientific"),graphing:e("math/policyGraphing")},_={fourFunction:e("math/frameFourFunction"),scientific:e("math/frameScientific"),singleExpressionScientific:e("math/frameSingleExpressionScientific"),graphing:e("math/frameGraphing")};return n(function(e){function n(e){return"ans"!==e.slice(0,3)}function f(e,t){var r,i=e.multiplyDefined,a=e.cyclicallyDefined;for(r in i)i.hasOwnProperty(r)&&(t[r]=m.multiplyDefined(r));for(r in a)a.hasOwnProperty(r)&&(t[r]=m.cycle(a[r].filter(n)))}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unanalyzedIds={},this.unpublishedIds={},this.intersectIds={},this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._computeAllLabels(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var r in e.statements){var n=e.statements[r];if(null===n){if(!e.isCompleteState&&this.statements.hasOwnProperty(r)&&(t=this.statements[r].getAllIds()),this.removeStatement(r),!e.isCompleteState&&t){for(var i=0;i<t.length;i++)this.triggerRemoveGraph(t[i]);this.triggerDidRemoveStatement(r)}}else this.addStatement(n),e.isCompleteState||this.triggerDidAddStatement(n)}},e.setViewState=function(e){if(!i.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.constantValue:e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=x[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setPointsOfInterest=function(e){e!==g.pointsOfInterest&&(g.pointsOfInterest=e,this.invalidate())},e.setPlotSingleVariableImplicitEquations=function(e){e!==g.plotSingleVariableImplicitEquations&&(g.plotSingleVariableImplicitEquations=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}this.triggerStatusChange(e)},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var r=t.tryGetConcreteTree(this.frame),n=1;r.valueType===b.ListOfPoint&&(n=r.args.length);for(var a=[],s=0;s<n;s++)a.push(v.interpolate(this.currentLabel[e],this.frame,s));i.isEqual(a,t.computedLabels)||(t.computedLabels=a,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(){var e=this.getViewState();if(a.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var r=this.analysis[t];if(r.rawTree.isTable)for(var n=r.graph(e),s=r.rawTree.getAllIds(),o=0;o<s.length;o++)n[s[o]]?this.triggerGraphComputed(s[o],n[s[o]]):this.triggerRemoveGraph(s[o]);else r.evaluationState.is_graphable&&(r.rawTree.userData.shouldGraph||r.rawTree.userData.showLabel)?(this.triggerGraphComputed(t,r.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(i.keys(this.unpublishedIds).length)for(var u in this.intersectIds)this.unpublishedIds.hasOwnProperty(u)||this.intersectIds.hasOwnProperty(u)&&this._updateIntersections(u)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=y(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=this.functionDefinition===!1?t.concat("FunctionDefinition"):t;var r=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||r.indexOf("exponent")===-1)&&("PercentOf"!==e||r.indexOf("percent")===-1)}.bind(this))},e.addStatement=function(e){if(e){var t=e.id;this.markDirty(t);var r={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures()};switch(e.type){case"table":var n=[];this.statements.hasOwnProperty(t)&&(n=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var i,a,p,f=e.columns,h=[],m=0,d=0;d<f.length;d++)m=Math.max(f[d].values.length,m);for(var g=0;g<f.length;g++){i=s.parse(f[g].latex,r),a=[];for(var y=-1,b=0;b<f[g].values.length;b++)f[g].values[b].replace(/\\\\space/g,"").match(/\\S/)?(a.push(s.parse(f[g].values[b],r)),y=b):a.push(o(NaN));a=a.slice(0,y+1),p=l(i,m,a),p.id=f[g].id,p.header&&(p.header.userData=f[g]),h.push(p)}this.statements[t]=c(h);var x=this,_=this.statements[t].getAllIds();n.forEach(function(e){_.indexOf(e)===-1&&x.triggerRemoveGraph(e)});break;case"image":var w="-\\\\trigAngleMultiplier*\\\\arctan(\\\\sin("+e.angle+"),\\\\cos("+e.angle+"))";this.statements[t]=u({center:s.parse(e.center,r),radianAngle:s.parse(w,r),width:s.parse(e.width,r),height:s.parse(e.height,r)});break;default:this.statements[t]=s.parse(e.latex,r)}if(this.statements[t].userData=e,e.label){var S=this.currentLabel[t];S&&S.raw===e.label||(this.currentLabel[t]=v.parse(e.label))}else delete this.currentLabel[t];this.markClean(e.id),this.markDirty(e.id)}},e.removeStatement=function(e){if(this.statements.hasOwnProperty(e)){var t=this.statements[e];if(this.markDirty(e),t.isTable){var r=this;t.getAllIds().forEach(function(e){r.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.currentLabel[e],delete this.statements[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markDirty(e,{});this.currentStatus={},this.parent_frame=Object.create(t(this.evaluationMode,this.restrictedFunctions,this.additionalFunctions)),this.parent_frame.trigAngleMultiplier=o(this.use_degrees?Math.PI/180:1),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.buildSymbolToExpressionDirtyMap=function(){var e,t,r={};for(var n in this.statements)if(this.statements.hasOwnProperty(n)){var i=this.statements[n].getDependencies();for(e=0;e<i.length;e++)t=i[e],r[t]||(r[t]=[]),r[t].push(n);var a=this.statements[n].getExports();for(e=0;e<a.length;e++)t=a[e],r[t]||(r[t]=[]),r[t].push(n)}return r},e.markDirty=function(e,t){if(this.statements[e]&&!this.unanalyzedIds[e]){t||(t=this.buildSymbolToExpressionDirtyMap()),this.unanalyzedIds[e]=!0,this.unpublishedIds[e]=!0,delete this.analysis[e];for(var r=this.statements[e],n=r.getLegalExports(this.policy),i=0;i<n.length;i++)this.markSymbolDirty(n[i],t);if(r.isRegression){var a=this.lastFrame;this.invalidate(),this.lastFrame=a}}},e.markSymbolDirty=function(e,t){delete this.frame[e],delete this.regressionFrame[e];var r=t[e];if(r)for(var n=0;n<r.length;n++)this.markDirty(r[n],t)},e.markClean=function(e){delete this.unanalyzedIds[e]},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var s=this;a.sort(function(e,t){var r=s.statements[e].userData&&s.statements[e].userData.residualVariable,n=s.statements[t].userData&&s.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var o=h(this.policy,e,a);f(o,i);for(var u=o.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var p=e[t].tryGetConcreteTree(i);e[t].exportTo(this.policy,p,i),c[t]={rawTree:e[t],concreteTree:p}}},e.updateAnalysis=function(){var e,t={};for(e in this.unanalyzedIds)this.unanalyzedIds.hasOwnProperty(e)&&this.statements[e]&&(t[e]=this.statements[e]);"graphing"===this.evaluationMode&&this._updateRegressions(t);var r=this.analysis,n=this.frame,i=h(this.policy,t);f(i,n);for(var a=i.resolved,s=0;s<a.length;s++)switch(e=a[s],this.evaluationMode){case"fourFunction":r[e]=this.statements[e].analyzeFourFunction(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"scientific":r[e]=this.statements[e].analyzeScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"singleExpressionScientific":r[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"graphing":if(n.r){var o=Object.create(n);if(o.r=p("r"),r[e]=this.statements[e].analyze(this.policy,o,r),r[e].getGraphMode()===d.POLAR){r[e].exportTo(this.policy,n);continue}}r[e]=this.statements[e].analyze(this.policy,n,r),r[e].exportTo(this.policy,n)}this.unanalyzedIds={},this.lastFrame=Object.create(this.parent_frame);for(var u in n)n.hasOwnProperty(u)&&(this.lastFrame[u]=n[u])},e.evaluateOnce=function(e){return r.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.constantValue},e.compile=function(e){return r.log("Deprecated console.compile - this should not run in production code"),this.analysis[e].concreteTree.getCompiledFunction()},e.evalStrings=function(e){return r.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),r=e("math/functions");return function(e){var n=t();return n.triggerGraphComputed=function(t,n){r.dehydrateGraphData(n),e("graphComputed",{id:t,graphData:n})},n.triggerDidUpdateIntersections=function(t,r){e("updateIntersections",{id:t,intersections:r})},n.triggerRender=function(){e("render")},n.triggerRenderSlowly=function(){e("renderSlowly")},n.triggerRemoveGraph=function(t){e("removeGraph",t)},n.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){n.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/worker",["require","worker/workercore","console"],function(e){var t=e("worker/workercore"),r={},n=e("console");n.log=function(e){self.postMessage({log:JSON.stringify(e)})};var i=self;i.window=i,i.onmessage=function(e){var n=e.data&&e.data.connectionId;if(n)if("destroy"===e.data.originalMessage.type)delete r[n];else{var a=r[n];a||(a=t(function(e,t){i.postMessage({connectionId:n,originalMessage:{type:e,payload:t}})}),r[n]=a),a.processChangeSet(e.data.originalMessage)}},i.loadMessageQueue&&(i.loadMessageQueue.forEach(function(e){i.onmessage(e)}),delete i.loadMessageQueue)}),"undefined"==typeof window&&("undefined"==typeof requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"])),define("toplevel/worker",function(){});';
    }),
    define("worker_src", ["require", "text!worker_src_underlying"], function (e) {
        return e("text!worker_src_underlying")
    }),
    define("worker/create_worker_url", ["require", "worker_src"], function (e) {
        var t = e("worker_src");
        return function () {
            if (window.MSBlobBuilder)
                return null;
            if (!t.length)
                return "/assets/generated/combined/toplevel/worker.js";
            var e;
            try {
                e = new Blob([t], {
                    type: "application/javascript"
                })
            } catch (i) {
                try {
                    var n = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder
                        , r = new n;
                    r.append(t),
                        e = r.getBlob("application/javascript")
                } catch (e) {
                    return null
                }
            }
            var i = window.URL || window.webkitURL;
            return i.createObjectURL(e)
        }
    }),
    define("math/curve-accumulator", ["require", "exports", "./distance"], function (e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function () {
            function e(e) {
                e ? (this.xtolerance = e.xtolerance || e.tolerance || 0,
                    this.ytolerance = e.ytolerance || e.tolerance || 0,
                    this.map = e.map) : this.xtolerance = this.ytolerance = 0,
                    this.segments = [],
                    this.segment = [],
                    this.pivotPoint = void 0,
                    this.pendingPoint = void 0
            }
            return e.prototype.colinear = function (e, t, r) {
                this.map && (e = this.map(e),
                    t = this.map(t),
                    r = this.map(r));
                var i = n.pointToSegmentParameter(r[0], r[1], e[0], e[1], t[0], t[1]);
                if (i < 1)
                    return !1;
                var o = [e[0] + i * (t[0] - e[0]), e[1] + i * (t[1] - e[1])];
                return Math.abs(r[0] - o[0]) <= this.xtolerance && Math.abs(r[1] - o[1]) <= this.ytolerance
            }
                ,
                e.prototype.addPoint = function (e) {
                    if (this.xtolerance < 0 && this.ytolerance < 0)
                        return void this.segment.push(e[0], e[1]);
                    if (!this.segment.length)
                        return void this.segment.push(e[0], e[1]);
                    var t = [this.segment[this.segment.length - 2], this.segment[this.segment.length - 1]];
                    if (e[0] !== t[0] || e[1] !== t[1]) {
                        if (!this.pivotPoint || !this.pendingPoint)
                            return this.pivotPoint = e,
                                void (this.pendingPoint = e);
                        (!this.colinear(t, this.pivotPoint, e) || n.hypot(t[0] - e[0], t[1] - e[1]) < n.hypot(t[0] - this.pendingPoint[0], t[1] - this.pendingPoint[1])) && (this.flushPending(),
                            this.pivotPoint = e),
                            this.pendingPoint = e
                    }
                }
                ,
                e.prototype.flushPending = function () {
                    this.pendingPoint && (this.segment.push(this.pendingPoint[0], this.pendingPoint[1]),
                        this.pivotPoint = void 0,
                        this.pendingPoint = void 0)
                }
                ,
                e.prototype.breakSegment = function () {
                    this.flushPending(),
                        this.segment.length > 2 && this.segments.push(this.segment),
                        this.segment = []
                }
                ,
                e.prototype.getSegments = function () {
                    return this.breakSegment(),
                        this.segments
                }
                ,
                e.prototype.finish = function () {
                    return {
                        segments: this.getSegments(),
                        resolved: !0
                    }
                }
                ,
                e
        }();
        t.default = r
    }),
    define("math/implicit-plotter", ["require", "exports", "./distance", "./curve-accumulator"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            var n = o(e, t);
            return {
                segments: n.contours.strokeSegments,
                fillSegments: n.contours.fillSegments,
                resolved: n.quadTree.resolved
            }
        }
        function o(e, t) {
            var n = Math.pow(2, -H)
                , r = l(t, n)
                , i = l(t, 2 * n)
                , o = p(e, r, i)
                , s = I(o.root, e, r)
                , a = V(s, e, r);
            return {
                paddedDomain: r,
                rootDomain: i,
                quadTree: o,
                triangles: s,
                contours: a
            }
        }
        function s(e, t, n) {
            return {
                x: e,
                y: t,
                z: n
            }
        }
        function a(e, t, n) {
            return {
                x: e,
                y: t,
                isZero: n
            }
        }
        function c(e, t, n) {
            return {
                vertices: [e, t, n],
                visited: !1,
                next: void 0
            }
        }
        function l(e, t) {
            var n = (1 + t) * e.xmin - t * e.xmax
                , r = (1 + t) * e.xmax - t * e.xmin
                , i = (1 + t) * e.ymin - t * e.ymax
                , o = (1 + t) * e.ymax - t * e.ymin;
            return {
                xmin: n,
                ymin: i,
                xmax: r,
                ymax: o,
                xtolerance: e.xtolerance,
                ytolerance: e.ytolerance
            }
        }
        function u(e, t) {
            return {
                depth: e,
                vertices: t,
                children: void 0,
                center: void 0
            }
        }
        function d(e, t, n) {
            e.center = S(e.vertices[0], e.vertices[1], e.vertices[2], e.vertices[3], t, n)
        }
        function p(e, t, n) {
            var r = h(e, n)
                , i = []
                , o = [];
            o.push(r);
            var s = 1
                , a = !0;
            e: for (; o.length;) {
                var c = i;
                i = o,
                    o = c;
                for (var l = void 0; l = i.pop();)
                    if (m(l, e, t)) {
                        if (f(l, e),
                            !l.children) {
                            a = !1;
                            break e
                        }
                        if (o.push(l.children[0]),
                            o.push(l.children[1]),
                            o.push(l.children[2]),
                            o.push(l.children[3]),
                            s += 3,
                            s >= W) {
                            a = !1;
                            break e
                        }
                    } else
                        d(l, e, t)
            }
            for (var u = 0; u < i.length; u++)
                d(i[u], e, t);
            for (var u = 0; u < o.length; u++)
                d(o[u], e, t);
            return {
                root: r,
                resolved: a
            }
        }
        function h(e, t) {
            var n = t.xmin
                , r = t.xmax
                , i = t.ymin
                , o = t.ymax;
            return u(0, [w(n, o, e), w(r, o, e), w(r, i, e), w(n, i, e)])
        }
        function f(e, t) {
            var n = e.depth + 1
                , r = e.vertices[0]
                , i = e.vertices[1]
                , o = e.vertices[2]
                , s = e.vertices[3]
                , a = E(r, i, t)
                , c = E(i, o, t)
                , l = E(o, s, t)
                , d = E(s, r, t)
                , p = E(r, o, t);
            e.children = [u(n, [r, a, p, d]), u(n, [a, i, c, p]), u(n, [p, c, o, l]), u(n, [d, p, l, s])]
        }
        function m(e, t, n) {
            if (e.depth < H)
                return !0;
            if (b(e, n))
                return !1;
            if (v(e, n))
                return !1;
            var r = e.vertices[0]
                , i = e.vertices[1]
                , o = e.vertices[2]
                , s = e.vertices[3];
            if (isNaN(r.z) && isNaN(i.z) && isNaN(o.z) && isNaN(s.z))
                return !1;
            if (isNaN(r.z) || isNaN(i.z) || isNaN(o.z) || isNaN(s.z))
                return !0;
            var a = S(r, i, o, s, t, n)
                , c = _(r, i, t, n)
                , l = _(i, o, t, n)
                , u = _(o, s, t, n)
                , d = _(s, r, t, n);
            return y(r, c, t) || y(i, c, t) || y(i, l, t) || y(o, l, t) || y(o, u, t) || y(s, u, t) || y(s, d, t) || y(r, d, t) || g(r, c, a, t, n) || g(c, i, a, t, n) || g(i, l, a, t, n) || g(l, o, a, t, n) || g(o, u, a, t, n) || g(u, s, a, t, n) || g(s, d, a, t, n) || g(d, r, a, t, n)
        }
        function g(e, t, r, i, o) {
            if (e.z > 0 == t.z > 0 && t.z > 0 == r.z > 0)
                return !1;
            var s, a, c, l;
            if (e.z > 0 == t.z > 0) {
                if (s = E(e, t, i),
                    s.z > 0 != e.z > 0)
                    return !0;
                a = M(e, r, i, o),
                    c = M(t, r, i, o),
                    l = M(s, r, i, o)
            } else if (t.z > 0 == r.z > 0) {
                if (s = E(t, r, i),
                    s.z > 0 != t.z > 0)
                    return !0;
                a = M(t, e, i, o),
                    c = M(r, e, i, o),
                    l = M(s, e, i, o)
            } else {
                if (s = E(r, e, i),
                    s.z > 0 != r.z > 0)
                    return !0;
                a = M(r, t, i, o),
                    c = M(e, t, i, o),
                    l = M(s, t, i, o)
            }
            var u = o.xtolerance
                , d = o.ytolerance
                , p = n.pointToSegment(d * l.x, u * l.y, d * a.x, u * a.y, d * c.x, u * c.y);
            return p > u * d
        }
        function y(e, t, n) {
            if (isNaN(e.z) && isNaN(t.z))
                return !1;
            if (isNaN(e.z) || isNaN(t.z))
                return e.z > 0 || t.z > 0;
            var r = E(e, t, n)
                , i = 4 * r.z - t.z - 3 * e.z
                , o = 1e-4
                , s = (n((1 - o) * e.x + o * t.x, (1 - o) * e.y + o * t.y) - e.z) / o
                , a = Math.max(Math.abs(e.z), Math.abs(t.z));
            return Math.abs(i - s) > .125 * a
        }
        function v(e, t) {
            return e.vertices[1].x - e.vertices[0].x < 10 * t.xtolerance || e.vertices[0].y - e.vertices[3].y < 10 * t.ytolerance
        }
        function b(e, t) {
            return e.vertices[0].x < t.xmin || e.vertices[0].y > t.ymax || e.vertices[2].x > t.xmax || e.vertices[2].y < t.ymin
        }
        function x(e, t) {
            return e.x < t.xmin || e.x > t.xmax || e.y < t.ymin || e.y > t.ymax
        }
        function w(e, t, n) {
            return s(e, t, n(e, t))
        }
        function E(e, t, n) {
            return w(.5 * (e.x + t.x), .5 * (e.y + t.y), n)
        }
        function _(e, t, n, r) {
            if (x(e, r) || x(t, r))
                return E(e, t, n);
            if (isNaN(e.z) || isNaN(t.z))
                return C(e, t, n, r);
            if (e.z > 0 != t.z > 0)
                return E(e, t, n);
            var i = .01
                , o = n((1 - i) * e.x + i * t.x, (1 - i) * e.y + i * t.y) - e.z
                , a = t.z - n(i * e.x + (1 - i) * t.x, i * e.y + (1 - i) * t.y);
            return isNaN(o) || isNaN(a) ? E(e, t, n) : o > 0 == a > 0 ? E(e, t, n) : k(s(e.x, e.y, o), s(t.x, t.y, a), n)
        }
        function S(e, t, n, r, i, o) {
            var s = _(e, n, i, o);
            return e.z > 0 == n.z > 0 && s.z > 0 != e.z > 0 ? s : (s = _(t, r, i, o),
                t.z > 0 == r.z > 0 && s.z > 0 != t.z > 0 ? s : E(e, n, i))
        }
        function k(e, t, n) {
            if (isNaN(e.z))
                return t;
            if (isNaN(t.z))
                return e;
            if (isFinite(e.z) || isFinite(t.z)) {
                if (isFinite(e.z)) {
                    if (isFinite(t.z)) {
                        var r = 1 - e.z / t.z
                            , i = 1 - t.z / e.z;
                        return w(e.x / r + t.x / i, e.y / r + t.y / i, n)
                    }
                    return e
                }
                return t
            }
            return E(e, t, n)
        }
        function M(e, t, n, r) {
            var i = e.x
                , o = t.x
                , c = e.y
                , l = t.y
                , u = e.z
                , d = t.z
                , p = r.xtolerance
                , h = r.ytolerance;
            if (x(e, r) || x(t, r)) {
                var f = E(e, t, n);
                return a(f.x, f.y, !1)
            }
            for (; Math.abs(i - o) > p || Math.abs(c - l) > h;) {
                var m = .5 * (i + o)
                    , g = .5 * (c + l)
                    , y = n(m, g);
                y > 0 == u > 0 ? (i = m,
                    c = g,
                    u = y) : (o = m,
                        l = g,
                        d = y)
            }
            if (isNaN(u))
                return a(o, l, !1);
            if (isNaN(d))
                return a(i, c, !1);
            var v = k(s(i, c, u), s(o, l, d), n)
                , b = 0 === u || 0 === d || 0 === v.z || v.z >= u == d >= v.z && Math.abs(v.z) < 1e250;
            return a(v.x, v.y, b)
        }
        function C(e, t, n, r) {
            if (isNaN(e.z) === isNaN(t.z))
                return E(e, t, n);
            if (isNaN(e.z)) {
                var i = e;
                e = t,
                    t = i
            }
            for (var o = e.x, a = t.x, c = e.y, l = t.y, u = e.z, d = r.xtolerance, p = r.ytolerance; Math.abs(o - a) > d || Math.abs(c - l) > p;) {
                var h = .5 * (o + a)
                    , f = .5 * (c + l)
                    , m = n(h, f);
                isNaN(m) === isNaN(u) ? (o = h,
                    c = f,
                    u = m) : (a = h,
                        l = f)
            }
            return s(o, c, u)
        }
        function I(e, t, n) {
            var r = {
                triangles: [],
                edgeCache: {},
                domain: n,
                fn: t
            };
            return T(e, r),
                r.triangles
        }
        function T(e, t) {
            e.children && (T(e.children[0], t),
                T(e.children[1], t),
                T(e.children[2], t),
                T(e.children[3], t),
                P(e.children[0], e.children[1], t),
                P(e.children[3], e.children[2], t),
                A(e.children[1], e.children[2], t),
                A(e.children[0], e.children[3], t))
        }
        function P(e, t, n) {
            e.children && t.children ? (P(e.children[1], t.children[0], n),
                P(e.children[2], t.children[3], n)) : e.children ? (P(e.children[1], t, n),
                    P(e.children[2], t, n)) : t.children ? (P(e, t.children[0], n),
                        P(e, t.children[3], n)) : L(e, t, n)
        }
        function A(e, t, n) {
            e.children && t.children ? (A(e.children[2], t.children[1], n),
                A(e.children[3], t.children[0], n)) : e.children ? (A(e.children[2], t, n),
                    A(e.children[3], t, n)) : t.children ? (A(e, t.children[1], n),
                        A(e, t.children[0], n)) : O(e, t, n)
        }
        function L(e, t, n) {
            if (e.center && t.center) {
                var r, i;
                e.depth >= t.depth ? (r = _(e.vertices[1], e.vertices[2], n.fn, n.domain),
                    i = D(e.vertices[1], t.center, e.vertices[2], e.center, r)) : (r = _(t.vertices[0], t.vertices[3], n.fn, n.domain),
                        i = D(t.vertices[0], t.center, t.vertices[3], e.center, r)),
                    F(i, n.edgeCache, n.domain);
                for (var o = 0; o < 4; o++)
                    n.triangles.push(i[o])
            }
        }
        function O(e, t, n) {
            if (e.center && t.center) {
                var r, i;
                e.depth >= t.depth ? (r = _(e.vertices[3], e.vertices[2], n.fn, n.domain),
                    i = D(e.vertices[2], t.center, e.vertices[3], e.center, r)) : (r = _(t.vertices[1], t.vertices[0], n.fn, n.domain),
                        i = D(t.vertices[1], t.center, t.vertices[0], e.center, r)),
                    F(i, n.edgeCache, n.domain);
                for (var o = 0; o < 4; o++)
                    n.triangles.push(i[o])
            }
        }
        function D(e, t, n, r, i) {
            return [c(e, i, t), c(t, i, n), c(n, i, r), c(r, i, e)]
        }
        function q(e, t, n) {
            return e.z > 0 && !x(e, n) && (!(t.z > 0) || x(t, n))
        }
        function N(e, t) {
            return "" + e.x + "," + e.y + "," + t.x + "," + t.y
        }
        function F(e, t, n) {
            R(e[0], e[1], e[2], N(e[1].vertices[2], e[1].vertices[0]), t, n),
                R(e[1], e[2], e[3], N(e[2].vertices[0], e[2].vertices[2]), t, n),
                R(e[2], e[3], e[0], N(e[3].vertices[2], e[3].vertices[0]), t, n),
                R(e[3], e[0], e[1], N(e[0].vertices[0], e[0].vertices[2]), t, n)
        }
        function R(e, t, n, r, i, o) {
            var s = t.vertices[0]
                , a = t.vertices[1]
                , c = t.vertices[2];
            q(a, c, o) && (t.next = n),
                q(s, a, o) && (t.next = e),
                q(c, s, o) && B(t, r, i),
                q(s, c, o) && j(t, r, i)
        }
        function j(e, t, n) {
            n[t] ? n[t].next = e : n[t] = e
        }
        function B(e, t, n) {
            n[t] ? e.next = n[t] : n[t] = e
        }
        function V(e, t, n) {
            for (var i = {
                fillAccumulator: new r.default(n),
                strokeAccumulator: new r.default(n),
                fn: t,
                domain: n
            }, o = 0; o < e.length; o++) {
                var s = e[o];
                s.next && !s.visited && U(s, i)
            }
            return {
                strokeSegments: i.strokeAccumulator.finish().segments,
                fillSegments: i.fillAccumulator.finish().segments
            }
        }
        function U(e, t) {
            for (; ;) {
                var n = e.vertices[0]
                    , r = e.vertices[1]
                    , i = e.vertices[2];
                if (G(n, r, t),
                    G(r, i, t),
                    G(i, n, t),
                    e.visited)
                    break;
                if (!e.next)
                    break;
                e.visited = !0,
                    e = e.next
            }
            t.strokeAccumulator.breakSegment(),
                t.fillAccumulator.breakSegment()
        }
        function G(e, t, n) {
            if (q(e, t, n.domain)) {
                var r = M(e, t, n.fn, n.domain);
                n.fillAccumulator.addPoint([r.x, r.y]),
                    r.isZero ? n.strokeAccumulator.addPoint([r.x, r.y]) : n.strokeAccumulator.breakSegment()
            }
        }
        function z(e) {
            for (var t = [], n = 0; n < e.length; n++) {
                var r = e[n];
                t.push([r.vertices[0].x, r.vertices[0].y, r.vertices[1].x, r.vertices[1].y, r.vertices[2].x, r.vertices[2].y, r.vertices[0].x, r.vertices[0].y])
            }
            return t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var H = 5
            , W = Math.pow(2, 14);
        t.sampleImplicit = i,
            t.sampleImplicitDiagnostic = o,
            t.buildQuadTree = p,
            t.triangulate = I,
            t.traceContours = V,
            t.displayTriangles = z
    }),
    define("worker/workerconfig", [], function () {
        return {
            pointsOfInterest: !0,
            plotSingleVariableImplicitEquations: !0
        }
    }),
    function () {
        var e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g = {};
        !function (e) {
            function t(e, t) {
                return function (n, r) {
                    return e[n] = t ? t(n, r) : r
                }
            }
            var n = "object" == typeof g ? g : "object" == typeof self ? self : "object" == typeof this ? this : {};
            "function" == typeof define && define.amd ? define("tslib", ["exports"], function (r) {
                e(t(n, t(r)))
            }) : e("object" == typeof module && "object" == typeof module.exports ? t(n, t(module.exports)) : t(n))
        }(function (g) {
            var y = Object.setPrototypeOf || {
                __proto__: []
            } instanceof Array && function (e, t) {
                e.__proto__ = t
            }
                || function (e, t) {
                    for (var n in t)
                        t.hasOwnProperty(n) && (e[n] = t[n])
                }
                ;
            e = function (e, t) {
                function n() {
                    this.constructor = e
                }
                y(e, t),
                    e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                        new n)
            }
                ,
                t = Object.assign || function (e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++) {
                        t = arguments[n];
                        for (var i in t)
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                    }
                    return e
                }
                ,
                n = function (e, t) {
                    var n = {};
                    for (var r in e)
                        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                    if (null != e && "function" == typeof Object.getOwnPropertySymbols)
                        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
                            t.indexOf(r[i]) < 0 && (n[r[i]] = e[r[i]]);
                    return n
                }
                ,
                r = function (e, t, n, r) {
                    var i, o = arguments.length, s = o < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
                        s = Reflect.decorate(e, t, n, r);
                    else
                        for (var a = e.length - 1; a >= 0; a--)
                            (i = e[a]) && (s = (o < 3 ? i(s) : o > 3 ? i(t, n, s) : i(t, n)) || s);
                    return o > 3 && s && Object.defineProperty(t, n, s),
                        s
                }
                ,
                i = function (e, t) {
                    return function (n, r) {
                        t(n, r, e)
                    }
                }
                ,
                o = function (e, t) {
                    if ("object" == typeof Reflect && "function" == typeof Reflect.metadata)
                        return Reflect.metadata(e, t)
                }
                ,
                s = function (e, t, n, r) {
                    return new (n || (n = Promise))(function (i, o) {
                        function s(e) {
                            try {
                                c(r.next(e))
                            } catch (e) {
                                o(e)
                            }
                        }
                        function a(e) {
                            try {
                                c(r.throw(e))
                            } catch (e) {
                                o(e)
                            }
                        }
                        function c(e) {
                            e.done ? i(e.value) : new n(function (t) {
                                t(e.value)
                            }
                            ).then(s, a)
                        }
                        c((r = r.apply(e, t || [])).next())
                    }
                    )
                }
                ,
                a = function (e, t) {
                    function n(e) {
                        return function (t) {
                            return r([e, t])
                        }
                    }
                    function r(n) {
                        if (i)
                            throw new TypeError("Generator is already executing.");
                        for (; c;)
                            try {
                                if (i = 1,
                                    o && (s = o[2 & n[0] ? "return" : n[0] ? "throw" : "next"]) && !(s = s.call(o, n[1])).done)
                                    return s;
                                switch (o = 0,
                                s && (n = [0, s.value]),
                                n[0]) {
                                    case 0:
                                    case 1:
                                        s = n;
                                        break;
                                    case 4:
                                        return c.label++ ,
                                            {
                                                value: n[1],
                                                done: !1
                                            };
                                    case 5:
                                        c.label++ ,
                                            o = n[1],
                                            n = [0];
                                        continue;
                                    case 7:
                                        n = c.ops.pop(),
                                            c.trys.pop();
                                        continue;
                                    default:
                                        if (s = c.trys,
                                            !(s = s.length > 0 && s[s.length - 1]) && (6 === n[0] || 2 === n[0])) {
                                            c = 0;
                                            continue
                                        }
                                        if (3 === n[0] && (!s || n[1] > s[0] && n[1] < s[3])) {
                                            c.label = n[1];
                                            break
                                        }
                                        if (6 === n[0] && c.label < s[1]) {
                                            c.label = s[1],
                                                s = n;
                                            break
                                        }
                                        if (s && c.label < s[2]) {
                                            c.label = s[2],
                                                c.ops.push(n);
                                            break
                                        }
                                        s[2] && c.ops.pop(),
                                            c.trys.pop();
                                        continue
                                }
                                n = t.call(e, c)
                            } catch (e) {
                                n = [6, e],
                                    o = 0
                            } finally {
                                i = s = 0
                            }
                        if (5 & n[0])
                            throw n[1];
                        return {
                            value: n[0] ? n[1] : void 0,
                            done: !0
                        }
                    }
                    var i, o, s, a, c = {
                        label: 0,
                        sent: function () {
                            if (1 & s[0])
                                throw s[1];
                            return s[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return a = {
                        next: n(0),
                        throw: n(1),
                        return: n(2)
                    },
                        "function" == typeof Symbol && (a[Symbol.iterator] = function () {
                            return this
                        }
                        ),
                        a
                }
                ,
                c = function (e, t) {
                    for (var n in e)
                        t.hasOwnProperty(n) || (t[n] = e[n])
                }
                ,
                l = function (e) {
                    var t = "function" == typeof Symbol && e[Symbol.iterator]
                        , n = 0;
                    return t ? t.call(e) : {
                        next: function () {
                            return e && n >= e.length && (e = void 0),
                                {
                                    value: e && e[n++],
                                    done: !e
                                }
                        }
                    }
                }
                ,
                u = function (e, t) {
                    var n = "function" == typeof Symbol && e[Symbol.iterator];
                    if (!n)
                        return e;
                    var r, i, o = n.call(e), s = [];
                    try {
                        for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)
                            s.push(r.value)
                    } catch (e) {
                        i = {
                            error: e
                        }
                    } finally {
                        try {
                            r && !r.done && (n = o.return) && n.call(o)
                        } finally {
                            if (i)
                                throw i.error
                        }
                    }
                    return s
                }
                ,
                d = function () {
                    for (var e = [], t = 0; t < arguments.length; t++)
                        e = e.concat(u(arguments[t]));
                    return e
                }
                ,
                p = function (e) {
                    return this instanceof p ? (this.v = e,
                        this) : new p(e)
                }
                ,
                h = function (e, t, n) {
                    function r(e) {
                        u[e] && (l[e] = function (t) {
                            return new Promise(function (n, r) {
                                d.push([e, t, n, r]) > 1 || i(e, t)
                            }
                            )
                        }
                        )
                    }
                    function i(e, t) {
                        try {
                            o(u[e](t))
                        } catch (e) {
                            c(d[0][3], e)
                        }
                    }
                    function o(e) {
                        e.value instanceof p ? Promise.resolve(e.value.v).then(s, a) : c(d[0][2], e)
                    }
                    function s(e) {
                        i("next", e)
                    }
                    function a(e) {
                        i("throw", e)
                    }
                    function c(e, t) {
                        e(t),
                            d.shift(),
                            d.length && i(d[0][0], d[0][1])
                    }
                    if (!Symbol.asyncIterator)
                        throw new TypeError("Symbol.asyncIterator is not defined.");
                    var l, u = n.apply(e, t || []), d = [];
                    return l = {},
                        r("next"),
                        r("throw"),
                        r("return"),
                        l[Symbol.asyncIterator] = function () {
                            return this
                        }
                        ,
                        l
                }
                ,
                f = function (e) {
                    function t(t, i) {
                        e[t] && (n[t] = function (n) {
                            return (r = !r) ? {
                                value: p(e[t](n)),
                                done: "return" === t
                            } : i ? i(n) : n
                        }
                        )
                    }
                    var n, r;
                    return n = {},
                        t("next"),
                        t("throw", function (e) {
                            throw e
                        }),
                        t("return"),
                        n[Symbol.iterator] = function () {
                            return this
                        }
                        ,
                        n
                }
                ,
                m = function (e) {
                    if (!Symbol.asyncIterator)
                        throw new TypeError("Symbol.asyncIterator is not defined.");
                    var t = e[Symbol.asyncIterator];
                    return t ? t.call(e) : "function" == typeof l ? l(e) : e[Symbol.iterator]()
                }
                ,
                g("__extends", e),
                g("__assign", t),
                g("__rest", n),
                g("__decorate", r),
                g("__param", i),
                g("__metadata", o),
                g("__awaiter", s),
                g("__generator", a),
                g("__exportStar", c),
                g("__values", l),
                g("__read", u),
                g("__spread", d),
                g("__await", p),
                g("__asyncGenerator", h),
                g("__asyncDelegator", f),
                g("__asyncValues", m)
        })
    }(),
    define("math/poi-finding-accumulator", ["require", "exports", "worker/workerconfig", "tslib", "./curve-accumulator", "./poi"], function (e, t, n, r, i, o) {
        "use strict";
        function s(e) {
            return Math.abs(e) < 5e-8
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function (e) {
            function t(t, n, r) {
                var i = e.call(this, t) || this;
                return i.domain = t,
                    i.fn = n,
                    i.derivative = r,
                    i.poiData = {
                        zeros: {
                            x: [],
                            y: []
                        },
                        intercept: {
                            x: [],
                            y: []
                        },
                        extrema: {
                            x: [],
                            y: []
                        }
                    },
                    i.flatLeft = void 0,
                    i
            }
            return r.__extends(t, e),
                t.prototype.getPOI = function () {
                    return n.pointsOfInterest ? (void 0 !== this.fn && (this.poiData.intercept = this.findIntercept(this.fn)),
                        this.poiData) : {
                            zeros: {
                                x: [],
                                y: []
                            },
                            intercept: {
                                x: [],
                                y: []
                            },
                            extrema: {
                                x: [],
                                y: []
                            }
                        }
                }
                ,
                t.prototype.addLinearZero = function (e) {
                    var t = -e[0] / e[1];
                    this.isOutsideDomain(t) || (this.poiData.zeros = {
                        x: [t],
                        y: [0]
                    })
                }
                ,
                t.prototype.addLinearIntercept = function (e) {
                    this.isOutsideDomain(0) || (this.poiData.intercept = {
                        x: [0],
                        y: [e[0]]
                    })
                }
                ,
                t.prototype.isOutsideDomain = function (e) {
                    return !this.domain || void 0 === this.domain.min || void 0 === this.domain.max || (e < this.domain.min || e > this.domain.max || isNaN(e))
                }
                ,
                t.prototype.flushPending = function () {
                    if (this.pendingPoint) {
                        var e = this.pendingPoint[0]
                            , t = this.pendingPoint[1];
                        this.pivotPoint = void 0,
                            this.pendingPoint = void 0;
                        var n = this.segment.length
                            , r = void 0
                            , i = void 0;
                        if (i = this.checkForZero(this.segment[n - 2], this.segment[n - 1], e, t),
                            n >= 4 && (r = this.checkForExtremum(this.segment[n - 4], this.segment[n - 3], this.segment[n - 2], this.segment[n - 1], e, t)),
                            i && (this.poiData.zeros.x.push(i[0]),
                                this.poiData.zeros.y.push(i[1])),
                            r) {
                            this.poiData.extrema.x.push(r[0]),
                                this.poiData.extrema.y.push(r[1]);
                            var s = void 0;
                            r[0] < this.segment[n - 2] ? (s = !!this.fn && !!o.default.bisectJump(this.segment[n - 4], this.segment[n - 3], r[0], r[1], this.segment[n - 2], this.segment[n - 1], this.fn, this.ytolerance),
                                s || this.segment.splice(-2, 0, r[0], r[1])) : (s = !!this.fn && !!o.default.bisectJump(this.segment[n - 2], this.segment[n - 1], r[0], r[1], e, t, this.fn, this.ytolerance),
                                    s || r[0] === e || this.segment.push(r[0], r[1]))
                        }
                        this.segment.push(e, t)
                    }
                }
                ,
                t.prototype.breakSegment = function () {
                    if (this.flushPending(),
                        this.segment.length > 2) {
                        this.segments.push(this.segment);
                        var e = this.segment.length;
                        s(this.segment[1]) && (this.poiData.zeros.x.push(this.segment[0]),
                            this.poiData.zeros.y.push(this.segment[1])),
                            s(this.segment[e - 1]) && (this.poiData.zeros.x.push(this.segment[e - 2]),
                                this.poiData.zeros.y.push(this.segment[e - 1]))
                    }
                    this.segment = [],
                        this.flatLeft = void 0
                }
                ,
                t.prototype.checkForZero = function (e, t, n, r) {
                    if (this.fn) {
                        var i;
                        return 0 === this.segment[1] && (this.flatLeft = [this.segment[0], this.segment[1]]),
                            this.flatLeft ? 0 !== r && (this.flatLeft[0] !== this.segment[0] && (i = o.default.flatCenter(this.flatLeft[0], this.flatLeft[1], e, t, n, r, this.fn)),
                                this.flatLeft = void 0) : 0 === r ? this.flatLeft = [e, t] : t < 0 != r < 0 && (i = o.default.bisectZero(e, t, n, r, this.fn)),
                            i
                    }
                }
                ,
                t.prototype.checkForExtremum = function (e, t, n, r, i, s) {
                    if (this.fn) {
                        var a;
                        if (isFinite(t) && isFinite(r) && isFinite(s)) {
                            if (t !== r && r === s)
                                this.flatLeft = [e, t];
                            else if (t === r && r !== s && this.flatLeft)
                                r > this.flatLeft[1] == r > s && (a = o.default.flatCenter(this.flatLeft[0], this.flatLeft[1], n, r, i, s, this.fn));
                            else {
                                if (t === r && r === s)
                                    return;
                                if (r > t == r > s)
                                    if (this.derivative) {
                                        if (this.derivative(e) > 0 == this.derivative(i) > 0)
                                            return;
                                        if (a = o.default.bisectZero(e, this.derivative(e), i, this.derivative(i), this.derivative),
                                            a || (a = o.default.bisectExtremum(e, t, n, r, i, s, this.fn)),
                                            a)
                                            return [a[0], this.fn(a[0])]
                                    } else
                                        a = o.default.bisectExtremum(e, t, n, r, i, s, this.fn)
                            }
                            return a
                        }
                    }
                }
                ,
                t.prototype.findIntercept = function (e) {
                    if (!e)
                        return {
                            x: [],
                            y: []
                        };
                    var t = e(0);
                    return isFinite(t) ? {
                        x: [0],
                        y: [e(0)]
                    } : {
                            x: [],
                            y: []
                        }
                }
                ,
                t.prototype.finish = function () {
                    return {
                        segments: this.getSegments(),
                        resolved: !0,
                        poi: this.getPOI()
                    }
                }
                ,
                t
        }(i.default);
        t.default = a
    }),
    define("graphing/graphmode", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.X = 1,
            t.Y = 2,
            t.XYPOINT = 3,
            t.XYPOINT_MOVABLE = 4,
            t.PARAMETRIC = 5,
            t.POLAR = 6,
            t.POLYGONFILL = 7,
            t.IMPLICIT = 8,
            t.NONE = 10
    }),
    define("math/domaintypes", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.emptyDomain = function () {
                return {
                    type: "empty"
                }
            }
            ,
            t.unknownDomain = function () {
                return {
                    type: "unknown"
                }
            }
            ,
            t.knownDomain = function (e) {
                return isNaN(e[0]) || isNaN(e[1]) || e[1] < e[0] ? t.emptyDomain() : {
                    type: "known",
                    bounds: e
                }
            }
            ,
            t.allReals = function () {
                return t.knownDomain([-(1 / 0), 1 / 0])
            }
            ,
            t.intersectDomains = function (e, n) {
                if ("empty" === e.type || "empty" === n.type)
                    return t.emptyDomain();
                if ("unknown" === e.type || "unknown" === n.type)
                    return t.unknownDomain();
                if (e.bounds && n.bounds) {
                    var r = [Math.max(e.bounds[0], n.bounds[0]), Math.min(e.bounds[1], n.bounds[1])];
                    return t.knownDomain(r)
                }
                return t.emptyDomain()
            }
    }),
    define("math/plotter", ["require", "exports", "./distance", "./poi", "./implicit-plotter", "./curve-accumulator", "./poi-finding-accumulator", "graphing/graphmode", "./domaintypes"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        function l(e, t) {
            for (var n, r = new o.default, i = t.min; i <= t.max + t.step / 2; i += t.step)
                n = e(i),
                    isFinite(n[0]) && isFinite(n[1]) ? r.addPoint(n) : r.breakSegment();
            return r.finish()
        }
        function u(e, t) {
            for (var n, r = new s.default(t, e), i = t.min; i <= t.max + t.step / 2; i += t.step)
                n = e(i),
                    isFinite(n) ? r.addPoint([i, n]) : r.breakSegment();
            return r.finish()
        }
        function d(e, t) {
            var n = new s.default(t);
            return n.addPoint([t.min, e[0] + t.min * e[1]]),
                n.addPoint([t.max, e[0] + t.max * e[1]]),
                n.addLinearZero(e),
                n.addLinearIntercept(e),
                n.finish()
        }
        function p(e, t) {
            var n = d(e[0], t)
                , r = d(e[1], t);
            return n.segments.length && r.segments.length && 4 === n.segments[0].length && 4 === r.segments[0].length ? {
                segments: [[n.segments[0][1], r.segments[0][1], n.segments[0][3], r.segments[0][3]]],
                resolved: !0
            } : {
                    segments: [],
                    resolved: !0
                }
        }
        function h(e, t, i) {
            var o, s, a, c, l, u, d = i.fn, p = i.jumpTolerance, h = i.stepPerturbation;
            o = e[0],
                s = e[1],
                l = t[0],
                u = t[1],
                a = n.mean(o, l),
                c = d(a);
            var f;
            if (f = r.default.bisectJump(o, s, a, c, l, u, d, p))
                for (var m = [-h, h], g = 0; g < m.length; g++)
                    if (o = e[0] + m[g],
                        s = d(o),
                        isFinite(s) || (o = e[0],
                            s = e[1]),
                        l = t[0] + m[g],
                        u = d(l),
                        isFinite(u) || (l = t[0],
                            u = t[1]),
                        a = n.mean(o, l),
                        c = d(a),
                        r.default.bisectJump(o, s, a, c, l, u, d, p))
                        return f
        }
        function f(e, t, n) {
            var i, o = new C(e, t, n), s = t.min, a = e(s), c = [s, a];
            for (isFinite(a) && o.accumulator.addPoint([s, a]),
                s += t.step; s <= t.max + t.step / 2; s += t.step) {
                var l = s;
                a = e(l),
                    isFinite(a) || (l = s + o.stepPerturbation,
                        a = e(l)),
                    isFinite(a) || (l = s - o.stepPerturbation,
                        a = e(l)),
                    isFinite(a) && isFinite(c[1]) ? (M(c, [l, a], o),
                        o.accumulator.addPoint([l, a])) : isFinite(a) && !isFinite(c[1]) ? (i = r.default.bisectFinite(c[0], c[1], l, a, e),
                            i && (i[0] !== l && o.accumulator.addPoint(i),
                                M(i, [l, a], o),
                                o.accumulator.addPoint([l, a]))) : !isFinite(a) && isFinite(c[1]) && (i = r.default.bisectFinite(c[0], c[1], l, a, e),
                                    i && (M(c, i, o),
                                        i[0] !== c[0] && o.accumulator.addPoint(i),
                                        o.accumulator.breakSegment())),
                    c = [l, a]
            }
            return o.accumulator.finish()
        }
        function m(e, t, n, r) {
            function i(e, t) {
                var i = t % 2 === 0 ? 1 : -1;
                if (!r && i === -1)
                    return !1;
                for (var o = t * (Math.PI / n), s = [c, c + 1, c + 2, c + 3], a = !1, l = 0, d = s.length; l < d; l++) {
                    var p = e(s[l])
                        , h = e(s[l] + o);
                    if (isFinite(p) && isFinite(h) && (a = !0),
                        isFinite(p) !== isFinite(h) || Math.abs(p - i * h) > u)
                        return !1
                }
                return !!a
            }
            var o, s, a, c = t.min, l = t.max - t.min, u = t.xtolerance && t.ytolerance ? Math.min(t.xtolerance, t.ytolerance) : t.tolerance ? t.tolerance : 0, d = Math.floor(l / (Math.PI / n));
            for (o = 1; o <= d; o++)
                if (i(e, o)) {
                    for (a = o,
                        s = 2; s * o <= d; s++)
                        i(e, s * o) || (a = void 0);
                    if (a)
                        break
                }
            return a ? a * (Math.PI / n) : null
        }
        function g(e) {
            return [e[1] * Math.cos(e[0]), e[1] * Math.sin(e[0])]
        }
        function y(e, t) {
            return t.map = g,
                f(e, t)
        }
        function v(e, t) {
            for (var n = e.min, r = e.max, i = e.step, o = r - n, s = Math.ceil(o / i), a = o / s, c = 0; c < s; c++)
                t(n + c * a);
            t(r)
        }
        function b(e, t) {
            if (t.max < t.min)
                return {
                    segments: [],
                    resolved: !0
                };
            var n = new o.default(t)
                , r = 10
                , i = t.min
                , s = e(i);
            isFinite(s[0]) && isFinite(s[1]) && n.addPoint(s);
            var a;
            return v(t, function (t) {
                a = e(t),
                    x(e, i, s, t, a, r, n),
                    i = t,
                    s = a
            }),
                n.finish()
        }
        function x(e, t, r, i, o, s, a) {
            if (i !== t) {
                var c = a.xtolerance
                    , l = a.ytolerance
                    , u = n.mean(t, i)
                    , d = e(u)
                    , p = isFinite(r[0]) && isFinite(r[1])
                    , h = isFinite(o[0]) && isFinite(o[1])
                    , f = isFinite(d[0]) && isFinite(d[1]);
                if (0 === s || u === t || u === i)
                    return a.breakSegment(),
                        void (h && a.addPoint(o));
                if (p || h) {
                    if (p !== h) {
                        for (var m = t, g = i, y = r, v = o; t !== u && u !== i;)
                            f == p ? (t = u,
                                r = d,
                                p = f) : (i = u,
                                    o = d,
                                    h = f),
                                u = t + (i - t) / 2,
                                d = e(u),
                                f = isFinite(d[0]) && isFinite(d[1]);
                        return void (p ? (x(e, m, y, t, r, s - 1, a),
                            a.breakSegment()) : (a.breakSegment(),
                                a.addPoint(o),
                                x(e, i, o, g, v, s - 1, a)))
                    }
                    if (p && f && h) {
                        var b = n.pointToSegmentParameter(d[0], d[1], r[0], r[1], o[0], o[1]);
                        if (b > .2 && b < .8 && Math.abs(d[0] - (r[0] + b * (o[0] - r[0]))) <= c && Math.abs(d[1] - (r[1] + b * (o[1] - r[1]))) <= l)
                            return void a.addPoint(o)
                    }
                    r[0] === d[0] && r[1] === d[1] || x(e, t, r, u, d, s - 1, a),
                        o[0] === d[0] && o[1] === d[1] || x(e, u, d, i, o, s - 1, a)
                }
            }
        }
        function w(e) {
            if (!e)
                return !1;
            var t = e.viewport.xmin
                , n = e.viewport.xmax
                , r = e.viewport.ymin
                , i = e.viewport.ymax;
            return !(!isFinite(t) || !isFinite(n) || n <= t) && (!(!isFinite(r) || !isFinite(i) || i <= r) && (!(!isFinite(e.screen.width) || e.screen.width <= 0) && !(!isFinite(e.screen.height) || e.screen.height <= 0)))
        }
        function E(e, t, n) {
            var r, i, o = e.viewport.xmin, s = e.viewport.xmax, l = e.viewport.ymin, u = e.viewport.ymax, d = e.trigAngleMultiplier || 1, p = e.oversample || 4, h = 1 / p * (s - o) / e.screen.width, f = 1 / p * (u - l) / e.screen.height, g = t.domainBound;
            switch (t.graphMode) {
                case a.X:
                    switch (r = c.intersectDomains(c.knownDomain([l, u]), g),
                    r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            l = r.bounds[0],
                                u = r.bounds[1]
                    }
                    i = {
                        min: l,
                        max: u,
                        xtolerance: f,
                        ytolerance: h,
                        step: f
                    };
                    break;
                case a.Y:
                    switch (r = c.intersectDomains(c.knownDomain([o, s]), g),
                    r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            o = r.bounds[0],
                                s = r.bounds[1]
                    }
                    i = {
                        min: o,
                        max: s,
                        xtolerance: h,
                        ytolerance: f,
                        step: h
                    };
                    break;
                case a.POLAR:
                    i = {
                        min: 0,
                        max: 2 * Math.PI / d * 6,
                        step: 2 * Math.PI / d / 1e3,
                        tolerance: Math.min(h, f)
                    };
                    var y = m(n, i, d, "=" === t.operator);
                    y && (i.max = i.min + y);
                    break;
                case a.PARAMETRIC:
                    var v = t.domain ? t.domain.min : 0
                        , b = t.domain ? t.domain.max : 1
                        , x = t.domain ? t.domain.step : .01;
                    switch (r = c.intersectDomains(c.knownDomain([v, b]), g),
                    r.type) {
                        case "empty":
                            return !1;
                        case "known":
                            v = r.bounds[0],
                                b = r.bounds[1]
                    }
                    i = {
                        min: v,
                        max: b,
                        step: x,
                        xtolerance: h,
                        ytolerance: f
                    };
                    break;
                case a.IMPLICIT:
                    i = {
                        xmin: o,
                        xmax: s,
                        ymin: l,
                        ymax: u,
                        xtolerance: h,
                        ytolerance: f
                    };
                    break;
                default:
                    return !1
            }
            return i
        }
        function _(e, t, n, r) {
            var o, s, c, l = E(e, t, n);
            if (l) {
                switch (t.graphMode) {
                    case a.X:
                    case a.Y:
                        o = t.isLinear ? d(t.linearCoefficients, l) : f(n, l, r);
                        break;
                    case a.POLAR:
                        o = y(n, l);
                        break;
                    case a.IMPLICIT:
                        o = i.sampleImplicit(n, l);
                        break;
                    default:
                        l.step || (l.step = (l.max - l.min) / 1e3),
                            o = t.isLinear ? p(t.linearCoefficients, l) : b(n, l)
                }
                c = o.poi
            } else
                o = {
                    segments: [],
                    resolved: !0
                };
            if ((!c || c.zeros.x.length + c.extrema.x.length + c.intercept.x.length > 250) && (c = {
                zeros: {
                    x: [],
                    y: []
                },
                extrema: {
                    x: [],
                    y: []
                },
                intercept: {
                    x: [],
                    y: []
                }
            }),
                t.graphMode === a.X)
                for (var u in c)
                    c.hasOwnProperty(u) && (s = c[u].y,
                        c[u].y = c[u].x,
                        c[u].x = s);
            var h = {
                segments: o.segments,
                resolved: o.resolved,
                graphMode: t.graphMode,
                color: t.color,
                style: t.lineStyle,
                operator: t.operator,
                poi: c,
                expr: null
            };
            return o.fillSegments && (h.fillSegments = o.fillSegments),
                h
        }
        function S(e, t, n) {
            var r, i, o, s, c = [], l = null;
            switch (n) {
                case a.POLAR:
                    l = g;
                    break;
                case a.X:
                    l = function (e) {
                        return [e[1], e[0]]
                    }
            }
            for (r = 0; r < e.length; r++)
                for (s = e[r],
                    i = 0; i < s.length; i += 2)
                    o = [s[i], s[i + 1]],
                        l && (o = l(o)),
                        c.push(o[0], o[1]);
            for (r = t.length - 1; r >= 0; r--)
                for (s = t[r],
                    i = s.length - 2; i >= 0; i -= 2)
                    o = [s[i], s[i + 1]],
                        l && (o = l(o)),
                        c.push(o[0], o[1]);
            return c
        }
        function k(e, t, r) {
            for (var i = function (e) {
                var t = e[e.length - 1];
                return t[t.length - 2]
            }, o = [], s = 0, a = 0, c = [], l = [], u = -(1 / 0), d = -(1 / 0); ;) {
                if (u <= d) {
                    if (s >= t.length)
                        break;
                    l.push(t[s++])
                }
                if (d <= u) {
                    if (a >= e.length)
                        break;
                    c.push(e[a++])
                }
                if (u = i(l),
                    d = i(c),
                    n.approx(u, d, 4)) {
                    o.push(S(c, l, r)),
                        l = [],
                        c = [];
                    var p = Math.max(u, d);
                    u = p,
                        d = p
                }
            }
            return o
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var M = function (e, t, n) {
            if (isFinite(n.jumpTolerance) && !(n.jumpTolerance <= 0)) {
                var r;
                if (r = h(e, t, n)) {
                    var i = r[0]
                        , o = r[1];
                    i && n.accumulator.addPoint(i),
                        n.accumulator.breakSegment(),
                        o && n.accumulator.addPoint(o)
                }
            }
        }
            , C = function () {
                function e(e, t, n) {
                    this.derivative = n,
                        this.accumulator = new s.default(t, e, n),
                        this.fn = e,
                        this.jumpTolerance = t.ytolerance || t.tolerance || 0,
                        this.stepPerturbation = t.step / 10
                }
                return e
            }();
        t.default = {
            sampleParametricNaive: l,
            sampleXYNaive: u,
            sampleLinear: d,
            sampleXY: f,
            findPiPeriod: m,
            samplePolar: y,
            sampleParametricRecursive: b,
            subsampleParametricRecursive: x,
            validateViewState: w,
            computeDomain: E,
            computeGraphData: _,
            polygonsFromSegments: k
        }
    });
var define_enum_constant, enum_strings = {}, debuggable_enums = !0;
if (debuggable_enums)
    define_enum_constant = function (e) {
        this[e] = e
    }
        ;
else {
    var next_enum = 1e3;
    define_enum_constant = function (e) {
        enum_strings[next_enum] = e,
            this[e] = next_enum++
    }
}
define_enum_constant("EXPRESSION"),
    define_enum_constant("FUNCTION_DEFINITION"),
    define_enum_constant("VARIABLE_DEFINITION"),
    define_enum_constant("ORDERED_PAIR_LIST"),
    define_enum_constant("DOUBLE_INEQUALITY"),
    define_enum_constant("COMPARATOR"),
    define_enum_constant("CHAINED_COMPARATOR"),
    define_enum_constant("EQUATION"),
    define_enum_constant("CONSTANT"),
    define_enum_constant("IDENTIFIER"),
    define_enum_constant("LIST"),
    define("math/enums", function () { }),
    define("math/parsenode/base", ["require", "pjs", "math/functions", "../enums"], function (e) {
        var t = e("pjs")
            , n = e("math/functions");
        return e("../enums"),
            t(function (e, t, r) {
                e.init = function () {
                    this._dependencies = [],
                        this._dummyDependencies = [],
                        this._inputString = "",
                        this._exports = []
                }
                    ,
                    e.exportPenalty = 0;
                var i = 0;
                e.tmpVar = function () {
                    return "tmp" + i++
                }
                    ,
                    e.statementType = EXPRESSION,
                    e.dependencies = function () {
                        return this.getDependencies()
                    }
                    ,
                    e.evaluateOnce = function (e) {
                        void 0 === e && (e = {});
                        var t = this.getConcreteTree(e)
                            , n = t.getEvaluationInfo();
                        return n ? n[0].val : NaN
                    }
                    ,
                    e.setInputString = function (e) {
                        this._inputString = e
                    }
                    ,
                    e.getInputString = function () {
                        return this._inputString
                    }
                    ,
                    e.shouldExportAns = function () {
                        return !1
                    }
                    ,
                    e.getAnsVariable = function () {
                        return this.shouldExportAns() && this.userData && this.userData.hasOwnProperty("index") ? ["ans_" + this.userData.index] : []
                    }
                    ,
                    e.addDependency = function (e) {
                        this.dependsOn(e) || this._dependencies.push(e)
                    }
                    ,
                    e.addDependencies = function (e) {
                        for (var t = 0; t < e.length; t++)
                            this.addDependency(e[t])
                    }
                    ,
                    e.addDummyDependency = function (e) {
                        this._dummyDependencies.indexOf(e) === -1 && this._dummyDependencies.push(e)
                    }
                    ,
                    e.addDummyDependencies = function (e) {
                        for (var t = 0; t < e.length; t++)
                            this.addDummyDependency(e[t])
                    }
                    ,
                    e.mergeDependencies = function () {
                        for (var e = 0; e < arguments.length; e++)
                            this.addDependencies(arguments[e].getDependencies()),
                                this.addDummyDependencies(arguments[e].getDummyDependencies())
                    }
                    ,
                    e.getDependencies = function () {
                        return this._dependencies
                    }
                    ,
                    e.getDummyDependencies = function () {
                        return this._dummyDependencies
                    }
                    ,
                    e.removeDependency = function (e) {
                        var t = this._dependencies.indexOf(e);
                        t >= 0 && this._dependencies.splice(t, 1)
                    }
                    ,
                    e.dependsOn = function (e) {
                        return this._dependencies.indexOf(e) > -1
                    }
                    ,
                    e.getExports = function () {
                        var e = this._exports || [];
                        return e.concat(this.getAnsVariable())
                    }
                    ,
                    e.getLegalExports = function (e) {
                        return this.getExports().filter(function (t) {
                            return !e.assignmentForbidden(t)
                        })
                    }
                    ,
                    e.exportsSymbol = function (e) {
                        return this._exports.indexOf(e) > -1
                    }
                    ,
                    e.exportTo = function (e, t, n) {
                        for (var r = this.getLegalExports(e), i = 0; i < r.length; i++) {
                            var o = r[i];
                            if (n[o])
                                return;
                            n[o] = t.blocksExport ? t : this
                        }
                    }
                    ,
                    e.getOperator = function () {
                        return this.operator || "="
                    }
                    ,
                    e.isInequality = function () {
                        return !1
                    }
                    ,
                    e.isShadeBetween = function () {
                        return !1
                    }
                    ,
                    e.getAllIds = function () {
                        return this.userData ? [this.userData.id] : []
                    }
                    ,
                    e.getEvaluationInfo = function () {
                        return !1
                    }
                    ,
                    e.getSliderInfo = function () {
                        return !1
                    }
                    ,
                    e.getSliderVariables = function (e, t) {
                        return e.sliderVariables(t.getDependencies())
                    }
                    ,
                    e.tryGetConcreteTree = function () {
                        var e;
                        try {
                            e = this.getConcreteTree.apply(this, arguments)
                        } catch (t) {
                            if (!(t instanceof r))
                                throw t;
                            e = t
                        }
                        return e
                    }
                    ,
                    e.getCompiledFunction = function (e) {
                        var t = this.getEvalStrings()
                            , r = t.statements.join(";") + ";return " + t.expression;
                        if (void 0 === e) {
                            e = this.getDependencies();
                            var i = e.indexOf("x");
                            if (i !== -1) {
                                var o = e[0];
                                e[0] = e[i],
                                    e[i] = o
                            }
                        }
                        return {
                            args: e,
                            source: r,
                            fn: n.closureFunctionWithBuiltIn(e, r)
                        }
                    }
                    ,
                    e.getCompiledDerivative = function () {
                        var e = this.getDependencies()
                            , t = this.takeDerivative(e[0] || "x");
                        return t.getCompiledFunction()
                    }
            })
    }),
    define("math/parsenode/error", ["require", "pjs", "./base"], function (e) {
        var t = e("pjs")
            , n = e("./base");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this),
                    this._msg = e,
                    this._sliderVariables = [],
                    this.blocksExport = !0
            }
                ,
                e.evaluateOnce = function (e) {
                    return this._msg
                }
                ,
                e.isError = !0,
                e.getError = function () {
                    return this._msg
                }
                ,
                e.setDependencies = function (e) {
                    return this._dependencies = e,
                        this
                }
                ,
                e.allowExport = function () {
                    return this.blocksExport = !1,
                        this
                }
        })
    }),
    define("graphing/label", ["require", "exports", "underscore", "math/distance", "math/tofraction"], function (e, t, n, r, i) {
        "use strict";
        function o(e, t) {
            if (void 0 === t && (t = e),
                isNaN(e) || !isFinite(e))
                return {
                    ariaString: "undefined",
                    string: "undefined",
                    value: e
                };
            if (0 === e)
                return {
                    ariaString: "0",
                    string: "0",
                    value: e
                };
            Math.abs(e) > Math.abs(t) && (t = e);
            var n, o, s, a = i.default(e / Math.PI, 24);
            if (h(t) && r.approx(a.n / a.d * Math.PI, e, 3))
                return n = 0 === a.n ? "0" : 1 === a.n ? "" : a.n === -1 ? "-" : a.n.toString() + "",
                    o = 1 === a.d ? "" : "/" + a.d.toString(),
                    s = n + o,
                    {
                        ariaString: c(s),
                        string: s,
                        value: a.n / a.d * Math.PI
                    };
            if (h(t))
                return s = p(u(e.toFixed(f(t)))),
                    {
                        ariaString: c(s),
                        string: s,
                        value: parseFloat(s)
                    };
            var l = d(e.toExponential(f(t / e))).split("e")
                , m = l[0] + "10"
                , g = l[1].replace("+", "");
            return s = d(e.toExponential(f(t / e))).replace("+", ""),
                {
                    ariaString: c(s),
                    string: s,
                    mantissa: m,
                    superscript: g,
                    value: parseFloat(s)
                }
        }
        function s(e) {
            return k["[" + e + "]"]
        }
        function a(e) {
            return e[0] + e.slice(1).split("").join(" ")
        }
        function c(e) {
            return e.replace(C, a).replace(M, s).replace(/ +/gi, " ").trim()
        }
        function l(e, t, n, r) {
            var i = o(e, t)
                , s = o(r(i.value), n);
            return [i, s]
        }
        function u(e) {
            return e.indexOf(".") === -1 ? e : e.replace(I, "")
        }
        function d(e) {
            var t = /\.?0+e/;
            return e.replace(t, "e")
        }
        function p(e) {
            return "-0" === e ? "0" : e
        }
        function h(e) {
            return e = Math.abs(e),
                1e-4 < e && e < 1e7
        }
        function f(e) {
            return e = Math.abs(e),
                e = Math.max(e, 1e-16),
                Math.max(3, Math.floor(4.5 - Math.log(e) / Math.LN10))
        }
        function m(e, t) {
            if (t = t || {},
                isNaN(e) || !isFinite(e))
                return {
                    type: "undefined"
                };
            if (0 === e || t.zeroCutoff && Math.abs(e) < t.zeroCutoff)
                return {
                    type: "decimal",
                    value: "0"
                };
            var n = t.smallCutoff || .001
                , r = t.bigCutoff || 1e6
                , i = t.digits || 10
                , o = d(e.toExponential(i - 2))
                , s = o.match(/([\d\.\-]+)e\+?([\d\-]+)/);
            if (!s)
                return {
                    type: "undefined"
                };
            var a = parseInt(s[2], 10) >= i;
            if (Math.abs(e) > r || Math.abs(e) < n || a)
                return {
                    type: "scientific",
                    mantissa: s[1],
                    exponent: s[2]
                };
            var c = u(e.toPrecision(i));
            return e !== Number(c) && t.addEllipses && (c += "..."),
                {
                    type: "decimal",
                    value: c
                }
        }
        function g(e, t) {
            var n = m(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + "<span class='dcg-cross'></span>10<sup>" + n.exponent + "</sup>";
                default:
                    var r = n;
                    return r
            }
        }
        function y(e, t) {
            var n = m(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + " * 10^" + n.exponent;
                default:
                    var r = n;
                    return r
            }
        }
        function v(e, t) {
            var n = m(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return n.value;
                case "scientific":
                    return n.mantissa + "\\times10^{" + n.exponent + "}";
                default:
                    var r = n;
                    return r
            }
        }
        function b(e, t) {
            var n = m(e, t);
            switch (n.type) {
                case "undefined":
                    return "undefined";
                case "decimal":
                    return c(n.value);
                case "scientific":
                    return c(n.mantissa + "e" + n.exponent);
                default:
                    var r = n;
                    return r
            }
        }
        function x(e) {
            e = e.replace("\\", "");
            var t = {
                pi: "",
                tau: "",
                theta: "",
                phi: ""
            };
            return t.hasOwnProperty(e) ? t[e] : e
        }
        function w(e) {
            var t = e.split("_")
                , n = "";
            return t[0].length > 1 && (n += "\\"),
                n += t[0],
                t[1] && (n += 1 === t[1].length ? "_" + t[1] : "_{" + t[1] + "}"),
                n
        }
        function E(e) {
            if (!e)
                return "";
            var t = e.split("_").map(x).map(n.escape)
                , r = t[0];
            return t[1] && (r += "<sub>" + t[1] + "</sub>"),
                r
        }
        function _(e) {
            return e = e.replace(/\\operatorname\{(.*)\}/, "$1"),
                e.replace(/[{}\\]/g, "")
        }
        function S(e) {
            return e.replace(/^(\\ | |\\space)+/, "").replace(/(\\ | |\\space)+$/, "")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.value = o;
        var k = {
            "[e]": " times 10 to the ",
            "[+]": " plus ",
            "[-]": " minus ",
            "[*]": " times ",
            "[/]": " over ",
            "[]": " pi ",
            "[]": " tau ",
            "[]": " theta ",
            "[]": " phi "
        }
            , M = new RegExp(Object.keys(k).join("|"), "gi")
            , C = /\.\d+/g;
        t.point = l;
        var I = /\.?0+$/;
        t.numericLabel = m,
            t.truncatedHTMLLabel = g,
            t.truncatedPlainmathLabel = y,
            t.truncatedLatexLabel = v,
            t.truncatedAriaLabel = b,
            t.formatSymbol = x,
            t.identifierToLatex = w,
            t.identifierToHTML = E,
            t.latexToIdentifier = _,
            t.trimLatex = S
    }),
    define("math/types", ["require", "lib/worker-i18n"], function (e) {
        function t(e) {
            switch (e) {
                case c:
                    return "Any";
                case l:
                    return "Number";
                case u:
                    return "Bool";
                case d:
                    return "Point";
                case p:
                    return "ListOfAny";
                case h:
                    return "ListOfNumber";
                case f:
                    return "ListOfBool";
                case m:
                    return "ListOfPoint";
                case g:
                    return "ErrorType";
                default:
                    throw new Error("Invalid type")
            }
        }
        function n(e) {
            switch (e) {
                case c:
                    return a.t("an unknown object");
                case l:
                    return a.t("a number");
                case u:
                    return a.t("a true/false value");
                case d:
                    return a.t("a point");
                case p:
                    return a.t("a list of unknown objects");
                case h:
                    return a.t("a list of numbers");
                case f:
                    return a.t("a list of true/false values");
                case m:
                    return a.t("a list of points");
                case g:
                    return a.t("an error object");
                default:
                    throw new Error("Invalid type")
            }
        }
        function r(e) {
            switch (e) {
                case p:
                    return !0;
                case h:
                    return !0;
                case f:
                    return !0;
                case m:
                    return !0;
                default:
                    return !1
            }
        }
        function i(e) {
            switch (e) {
                case p:
                    return c;
                case h:
                    return l;
                case f:
                    return u;
                case m:
                    return d;
                default:
                    return c
            }
        }
        function o(e) {
            switch (e) {
                case c:
                    return p;
                case l:
                    return h;
                case u:
                    return f;
                case d:
                    return m;
                default:
                    throw new Error("Type " + t(e) + " does not implement listType.")
            }
        }
        function s(e) {
            switch (e) {
                case c:
                    return !0;
                case l:
                    return !0;
                case u:
                    return !0;
                case d:
                    return !0;
                default:
                    return !1
            }
        }
        var a = e("lib/worker-i18n")
            , c = 0
            , l = 1
            , u = 2
            , d = 3
            , p = 4
            , h = 5
            , f = 6
            , m = 7
            , g = 8;
        return {
            Any: c,
            Number: l,
            Bool: u,
            Point: d,
            ListOfAny: p,
            ListOfNumber: h,
            ListOfBool: f,
            ListOfPoint: m,
            ErrorType: g,
            repr: t,
            prettyPrint: n,
            isList: r,
            elementType: i,
            listType: o,
            hasListType: s
        }
    }),
    define("math/errormsg", ["require", "lib/worker-i18n", "math/parsenode/error", "graphing/label", "math/types"], function (e) {
        var t = e("lib/worker-i18n")
            , n = e("math/parsenode/error")
            , r = e("graphing/label")
            , i = e("math/types");
        return {
            parseError: function () {
                return n(t.t("Sorry, I don't understand this."))
            },
            unrecognizedSymbol: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Sorry, I don't understand the '__symbol__' symbol.", {
                        symbol: e
                    }))
            },
            unexpectedInequality: function () {
                return n(t.t("Cannot use an inequality here."))
            },
            unexpectedSymbol: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Sorry, I don't understand the way that '__symbol__' is used here.", {
                        symbol: e
                    }))
            },
            addTypeError: function (e) {
                return n(t.t("Cannot add __symbol2__ and __symbol1__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            subtractTypeError: function (e) {
                return n(t.t("Cannot subtract __symbol2__ from __symbol1__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            multiplyTypeError: function (e) {
                return n(t.t("Cannot multiply __symbol1__ by __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            divideTypeError: function (e) {
                return n(t.t("Cannot divide __symbol1__ by __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            exponentTypeError: function (e) {
                return n(t.t("Cannot raise __symbol1__ to __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            negativeTypeError: function (e) {
                return n(t.t("Cannot negate __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            comparatorTypeError: function (e) {
                return n(t.t("Cannot compare __symbol1__ to __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            andTypeError: function (e) {
                return n(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.", {
                    symbol: "and",
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            listTypeError: function (e) {
                return n(t.t("Cannot store __symbol1__ in a list.", {
                    symbol1: e[0]
                })).allowExport()
            },
            pointTypeError: function (e) {
                return n(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.", {
                    symbol1: e[0],
                    symbol2: e[1],
                    symbol3: i.prettyPrint(i.Point)
                })).allowExport()
            },
            indexTypeError: function (e) {
                return n(t.t("Cannot index __symbol1__ with __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                })).allowExport()
            },
            functionTypeError: function (e, i) {
                switch (i.length) {
                    case 1:
                        return n(t.t("Function '__fn__' cannot be applied to __arg__.", {
                            fn: r.formatSymbol(e),
                            arg: i[0]
                        })).allowExport();
                    case 2:
                        return n(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.", {
                            fn: r.formatSymbol(e),
                            arg1: i[0],
                            arg2: i[1]
                        })).allowExport();
                    default:
                        return n(t.t("Function '__fn__' cannot be applied to these arguments.", {
                            fn: r.formatSymbol(e)
                        })).allowExport()
                }
            },
            sumLowerBoundTypeError: function (e) {
                return n(t.t("Lower bound of a sum cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            sumUpperBoundTypeError: function (e) {
                return n(t.t("Upper bound of a sum cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            sumArgumentTypeError: function (e) {
                return n(t.t("Cannot take the sum of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productLowerBoundTypeError: function (e) {
                return n(t.t("Lower bound of a product cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productUpperBoundTypeError: function (e) {
                return n(t.t("Upper bound of a product cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            productArgumentTypeError: function (e) {
                return n(t.t("Cannot take the product of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralLowerBoundTypeError: function (e) {
                return n(t.t("Lower bound of an integral cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralUpperBoundTypeError: function (e) {
                return n(t.t("Upper bound of an integral cannot be __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            integralArgumentTypeError: function (e) {
                return n(t.t("Cannot take the integral of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            derivativeTypeError: function (e) {
                return n(t.t("Cannot take the derivative of __symbol__.", {
                    symbol: e[0]
                })).allowExport()
            },
            derivativeVariableTypeError: function (e, i) {
                return n(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.", {
                    symbol1: r.formatSymbol(e),
                    symbol2: i[0]
                }))
            },
            piecewiseConditionTypeError: function (e) {
                return n(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.", {
                    symbol1: i.prettyPrint(i.Bool),
                    symbol2: e[0]
                })).allowExport()
            },
            piecewiseBranchTypeError: function (e) {
                return n(t.t("Cannot use __symbol__ as a branch of a piecewise expression.", {
                    symbol: e[0]
                })).allowExport()
            },
            tableHeaderTypeError: function (e) {
                return n(t.t("Table header cannot be __symbol__.", {
                    symbol: e[0]
                }))
            },
            tableEntryTypeError: function (e) {
                return n(t.t("Table entry cannot be __symbol__.", {
                    symbol: e[0]
                }))
            },
            regressionTypeError: function (e) {
                return n(t.t("Cannot regress __symbol1__ against __symbol2__.", {
                    symbol1: e[0],
                    symbol2: e[1]
                }))
            },
            heterogeneousList: function () {
                return n(t.t("All elements of a list must have the same type.")).allowExport()
            },
            deeplyNested: function () {
                return n(t.t("Definitions are nested too deeply.")).allowExport()
            },
            polygonListTypeError: function (e) {
                return n(t.t("A single argument to polygon should be a point list, not __type__.", {
                    type: e[0]
                }))
            },
            polygonPointArgsError: function () {
                return n(t.t("Some of your arguments are not points."))
            },
            polygonTwoNumbersError: function () {
                return n(t.t("Cannot make a polygon from two numbers."))
            },
            wrongArity: function (e, i, o) {
                e = r.formatSymbol(e);
                var s, a;
                if (1 === i)
                    a = t.t("For example, try typing: __dependency__(x).", {
                        dependency: e
                    }),
                        s = o > 1 ? t.t("Function '__dependency__' requires only 1 argument. __supplement__", {
                            dependency: e,
                            supplement: a
                        }) : t.t("Function '__dependency__' requires an argument. __supplement__", {
                            dependency: e,
                            supplement: a
                        });
                else {
                    for (var c = [], l = 0; l < i; l++)
                        c[l] = l + 1;
                    var u = r.formatSymbol(e) + "(" + c.join(", ") + ")";
                    a = t.t("For example, try typing: __recommendation__.", {
                        recommendation: u
                    }),
                        s = t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__", {
                            dependency: e,
                            assignment_arity: i,
                            supplement: a
                        })
                }
                return n(s)
            },
            wrongParametrizedReducerArity: function (e) {
                return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], 1)"
                }))
            },
            wrongDoubleReducerArity: function (e) {
                return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], [3,2,1])"
                }))
            },
            primedFunctionArity: function () {
                return n(t.t("Prime notation can only be used for functions of a single argument."))
            },
            zeroArgReducer: function (e) {
                return n(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).", {
                    symbol: r.formatSymbol(e)
                }))
            },
            missingRHS: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("What do you want '__symbol__' to equal?", {
                        symbol: e
                    }))
            },
            malformedPoint: function () {
                return n(t.t("Points are written like this: (1, 2)."))
            },
            nonPairTuple: function () {
                return n(t.t("Points may only have 2 coordinates."))
            },
            badImplicitCall: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Use parentheses around the argument of '__symbol__'.", {
                        symbol: e
                    }))
            },
            badImplicitMultiply: function () {
                return n(t.t("Confusing implicit multiplication. Use parentheses or a '*' symbol."))
            },
            binaryOperatorMissingOperand: function (e) {
                return n(t.t("You need something on both sides of the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            unaryOperatorMissingLeft: function (e) {
                return n(t.t("You need something before the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            unaryOperatorMissingRight: function (e) {
                return n(t.t("You need something after the '__symbol__' symbol.", {
                    symbol: e
                }))
            },
            fractionMissingNumerator: function () {
                return n(t.t("You need a numerator for the top of your fraction."))
            },
            fractionMissingDenominator: function () {
                return n(t.t("You need a denominator for the bottom of your fraction."))
            },
            fractionEmpty: function () {
                return n(t.t("You need a numerator and denominator for your fraction."))
            },
            emptySubscript: function () {
                return n(t.t("Subscripts cannot be empty."))
            },
            emptySuperscript: function () {
                return n(t.t("Superscripts cannot be empty."))
            },
            invalidSubscript: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Subscripts may only contain letters and digits. '__symbol__' is not allowed.", {
                        symbol: e
                    }))
            },
            invalidOperatorName: function () {
                return n(t.t("Operator names may only contain letters."))
            },
            unexpectedSubscript: function () {
                return n(t.t("Only functions and variables may have subscripts."))
            },
            superscriptWithPrime: function () {
                return n(t.t("Superscripts and primes cannot be combined."))
            },
            unexpectedPrime: function () {
                return n(t.t("Sorry, I don't understand this use of prime notation."))
            },
            primeWithoutParen: function () {
                return n(t.t("Primed function calls must use parentheses."))
            },
            emptyRadical: function () {
                return n(t.t("Radical cannot be empty."))
            },
            emptyRadicand: function () {
                return n(t.t("Radicand cannot be empty."))
            },
            emptyParen: function () {
                return n(t.t("Parentheses cannot be empty."))
            },
            emptySquareBracket: function () {
                return n(t.t("Square brackets cannot be empty."))
            },
            emptyPipe: function () {
                return n(t.t("Absolute value symbol cannot be empty."))
            },
            badTrigExponent: function (e) {
                var r = e + "^2"
                    , i = e + "^-1";
                return n(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.", {
                    form1: r,
                    form2: i
                }))
            },
            badLogExponent: function (e) {
                var r = e + "^2";
                return n(t.t("Only __form__ is supported. Otherwise, use parens.", {
                    form: r
                }))
            },
            inequalityChainTooLong: function () {
                return n(t.t("Cannot chain more than 2 inequalities."))
            },
            piecewiseMissingCondition: function () {
                return n(t.t("A piecewise expression must have at least one condition."))
            },
            piecewisePartMissingCondition: function () {
                return n(t.t("Every part of a piecewise expression must have a condition except the last."))
            },
            colonMissingCondition: function () {
                return n(t.t("The left side of a ':' must be a condition, like 'x>1'."))
            },
            blankExpression: function () {
                return n(t.t("You haven't written anything yet."))
            },
            functionNotDefined: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Function '__dependency__' is not defined.", {
                        dependency: e
                    }))
            },
            parameterAlreadyDefined: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.", {
                        dependency: e
                    }))
            },
            cannotRedefine: function (e, i) {
                return e = r.formatSymbol(e),
                    n(void 0 === i ? t.t("You can't redefine '__symbol__' because it's already defined.", {
                        symbol: e
                    }) : t.t("You can't redefine '__symbol__' because '__symbolRoot__' is already defined.", {
                        symbol: e,
                        symbolRoot: i
                    }))
            },
            cannotSubscript: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("'__symbol__' cannot have a subscript.", {
                        symbol: e
                    }))
            },
            multiplyDefined: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("You've defined '__dependency__' in more than one place. Try picking a different variable, or deleting some of the definitions of '__dependency__'.", {
                        dependency: e
                    }))
            },
            shadowedIndex: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("You can't use '__symbol__' as an index because it's already defined.", {
                        symbol: e
                    }))
            },
            cycle: function (e) {
                e = e.map(r.formatSymbol);
                var i = e.pop();
                return n(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.", {
                    symbols: e.join("', '"),
                    lastSymbol: i
                }))
            },
            selfReferentialFunction: function (e) {
                return n(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            tooManyVariables: function (e) {
                if (e = e.map(r.formatSymbol),
                    0 === e.length)
                    return n(t.t("Too many variables, I don't know what to do with this."));
                var i = e.pop();
                return n(t.t("Too many variables. Try defining '__variables__'.", {
                    variables: (e.length ? e.join("', '") + "' or '" : "") + i
                }))
            },
            addArgumentsToDefinition: function (e, i, o) {
                e = e.map(r.formatSymbol),
                    i = r.formatSymbol(i),
                    o = o.map(r.formatSymbol);
                var s = i + "(" + o.join(",") + "," + e.join(",") + ")"
                    , a = e.pop()
                    , c = {
                        symbols: e.join("', '"),
                        lastSymbol: a,
                        newSignature: s
                    };
                return n(e.length ? t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.", c) : t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.", c))
            },
            invalidLHS: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.", {
                        symbol: e
                    }))
            },
            unplottablePolarFunction: function () {
                return n(t.t("We can't plot  as a function of r. Try plotting r() instead."))
            },
            invalidInequalityVariables: function () {
                return n(t.t("We only plot inequalities of x and y, or r and ."))
            },
            invalidImplicitVariables: function () {
                return n(t.t("We only support implicit equations of x and y."))
            },
            singleVariableImplicitEquationsDisabled: function () {
                return n(t.t("Plotting single-variable implicit equations is disabled."))
            },
            complicatedImplicitInequality: function () {
                return n(t.t("We can only plot inequalities when one variable is quadratic or linear."))
            },
            complicatedPolarImplicit: function () {
                return n(t.t("Polar equations must be linear in r."))
            },
            invalidDoubleInequalityVariables: function () {
                return n(t.t("We only plot double inequalities of x and y."))
            },
            mismatchedDoubleInequality: function () {
                return n(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))
            },
            complicatedDoubleInequality: function () {
                return n(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))
            },
            equationRequired: function (e) {
                return e ? (e = r.formatSymbol(e),
                    n(t.t("Try adding '__lhs__' to the beginning of this equation.", {
                        lhs: e + "="
                    }))) : n(t.t("Try adding an equals sign to turn this into an equation."))
            },
            variableAsFunction: function (e) {
                return e = r.formatSymbol(e),
                    n(t.t("Variable '__dependency__' can't be used as a function.", {
                        dependency: e
                    }))
            },
            emptyList: function () {
                return n(t.t("Empty lists are not allowed."))
            },
            invalidTableHeader: function (e) {
                return n(t.t("Table headers must be simple expressions. __supplement__", {
                    supplement: e
                }))
            },
            invalidTableEntry: function (e) {
                return n(t.t("Table entries must be simple expressions. __supplement__", {
                    supplement: e
                }))
            },
            invalidFirstTableColumn: function () {
                return n(t.t("First column may not be __most__ or __last__.", {
                    most: "'y', 'r',",
                    last: "''"
                }))
            },
            invalidDependentFirstTableColumn: function () {
                return n(t.t("This column header can't be defined elsewhere in the calculator."))
            },
            invalidRegressionParameter: function (e) {
                return n(t.t("'__symbol__' may not be used as a regression parameter.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            optimizationError: function () {
                return n(t.t("We couldn't find any region where this model is defined."))
            },
            badListInReducer: function (e) {
                return n(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.", {
                    symbol: r.formatSymbol(e)
                })).allowExport()
            },
            nonListDoubleReducer: function (e) {
                return n(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], [3,2,1])"
                })).allowExport()
            },
            nonListParametrizedReducer: function (e) {
                return n(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.", {
                    symbol: r.formatSymbol(e),
                    recommendation: r.formatSymbol(e) + "([1,2,3], 1)"
                })).allowExport()
            },
            variableRange: function (e) {
                return n(t.t("Range cannot depend on free variable '__symbol__'.", {
                    symbol: r.formatSymbol(e[0])
                })).allowExport()
            },
            nonArithmeticRange: function (e) {
                return n(t.t("Ranges must be arithmetic sequences.")).allowExport()
            },
            sumMissingBound: function () {
                return n(t.t("Sums must have upper and lower bounds."))
            },
            productMissingBound: function () {
                return n(t.t("Products must have upper and lower bounds."))
            },
            incorrectSumLowerBound: function () {
                return n(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))
            },
            incorrectProductLowerBound: function () {
                return n(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))
            },
            integralMissingBound: function () {
                return n(t.t("Integrals must have upper and lower bounds."))
            },
            integralMissingDifferential: function () {
                return n(t.t("Integrand must end with an integration variable, like dx."))
            },
            differentialWithSuperscript: function () {
                return n(t.t("Integration variable cannot have a superscript."))
            },
            sumMissingBody: function () {
                return n(t.t("What do you want to take the sum of?"))
            },
            productMissingBody: function () {
                return n(t.t("What do you want to take the product of?"))
            },
            integralMissingBody: function () {
                return n(t.t("What do you want to take the integral of?"))
            },
            derivativeMissingBody: function () {
                return n(t.t("What do you want to take the derivative of?"))
            },
            mismatchedBraces: function (e, i) {
                return e = r.formatSymbol(e),
                    i = r.formatSymbol(i),
                    n(t.t("Expected '__symbol1__' to match '__symbol2__'.", {
                        symbol1: e,
                        symbol2: i
                    }))
            },
            shadowedIntegrationVariable: function (e) {
                return n(t.t("You can't use '__symbol__' as an integration variable because it's already defined.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            badIntegralBoundDependency: function (e) {
                return n(t.t("Integration bounds can't depend on integration variable '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            percentMissingOf: function () {
                return n(t.t("'%' must be used with 'of'. Try '25% of 12'."))
            },
            badAnsContext: function () {
                return n(t.t("You can't use 'ans' in this context."))
            },
            ansUndefined: function () {
                return n(t.t("The previous expression didn't define any value for ans."))
            },
            variablesUnsupported: function (e) {
                return n(t.t("This calculator does not support variables like '__variable__'.", {
                    variable: r.formatSymbol(e)
                }))
            },
            functionUnsupported: function (e) {
                return n(t.t("This calculator does not support the '__symbol__' function.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            constantUnsupported: function (e) {
                return n(t.t("This calculator does not support the constant '__symbol__'.", {
                    symbol: r.formatSymbol(e)
                }))
            },
            assignmentsUnsupported: function () {
                return n(t.t("This calculator does not support defining variables."))
            },
            functionDefinitionsUnsupported: function () {
                return n(t.t("This calculator does not support function definitions."))
            },
            equationsUnsupported: function () {
                return n(t.t("This calculator does not support this type of equation."))
            },
            inequalitiesUnsupported: function () {
                return n(t.t("This calculator does not support inequalities."))
            },
            regressionsUnsupported: function () {
                return n(t.t("This calculator does not support regressions."))
            },
            pointsUnsupported: function () {
                return n(t.t("This calculator does not support points."))
            },
            featureUnavailable: function () {
                return n(t.t("This feature is not available in the current calculator."))
            },
            nonSquareDeterminant: function () {
                return n(t.t("Only square matrices have a determinant."))
            },
            nonSquareInverse: function () {
                return n(t.t("Only square matrices have an inverse."))
            },
            singularInverse: function () {
                return n(t.t("Singular matrices do not have an inverse."))
            },
            matrixAssignment: function () {
                return n(t.t("This calculator does not support this type of variable definition. Try using 'New Matrix'."))
            },
            matrixAddDimensions: function () {
                return n(t.t("Cannot add matrices with different dimensions."))
            },
            matrixSubtractDimensions: function () {
                return n(t.t("Cannot subtract matrices with different dimensions."))
            },
            matrixMultiplyDimensions: function () {
                return n(t.t("Cannot multiply matrices with incompatible dimensions."))
            },
            matrixFractionalPower: function () {
                return n(t.t("A matrix can only be raised to integer powers."))
            },
            matrixPowerDimensions: function () {
                return n(t.t("Only square matrices can be raised to a power."))
            },
            matrixElementTypeError: function (e) {
                return n(t.t("Cannot use __arg__ as an element of a matrix.", {
                    arg: e[0]
                }))
            },
            matrixInvalidVariable: function (e) {
                return n(t.t("Cannot use '__symbol__' as a variable.", {
                    symbol: r.formatSymbol(e)
                }))
            }
        }
    }),
    define("math/parsenode/expression", ["require", "pjs", "./base", "math/errormsg", "math/types"], function (e) {
        var t = e("pjs")
            , n = e("./base")
            , r = e("math/errormsg")
            , i = e("math/types");
        return t(n, function (e, t) {
            e.init = function (e) {
                if (!Array.isArray(e))
                    throw new TypeError("Argument to expression constructor must be an Array.");
                t.init.call(this),
                    this.args = e,
                    this.valueType = this._getValueType(e),
                    this.registerDependencies(),
                    this.computeTreeSize()
            }
                ,
                e._getValueType = function (e) {
                    return i.Any
                }
                ,
                e.shouldExportAns = function () {
                    return !0
                }
                ,
                e.registerDependencies = function () {
                    this.mergeDependencies.apply(this, this.args)
                }
                ,
                e.computeTreeSize = function () {
                    for (var e = 0, t = 0; t < this.args.length; t++)
                        this.args[t].treeSize && (e += this.args[t].treeSize);
                    if (this.treeSize = e + 1,
                        e > 1e4)
                        throw r.deeplyNested()
                }
                ,
                e.copyWithArgs = function (e) {
                    return new this.constructor(e)
                }
        })
    }),
    define("math/parsenode/scalarexpression", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e)
            }
                ,
                e.getEvalStrings = function () {
                    for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                        var r = this.args[n].getEvalStrings();
                        e = e.concat(r.statements),
                            t.push(r.expression)
                    }
                    return {
                        statements: e,
                        expression: this.scalarEvalExpression(t)
                    }
                }
        })
    }),
    define("math/parsenode/expressionTypes", ["require", "pjs", "./scalarexpression"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = {
                Add: t(n, {}),
                Subtract: t(n, {}),
                Multiply: t(n, {}),
                Divide: t(n, {}),
                Exponent: t(n, {}),
                Negative: t(n, {}),
                And: t(n, {
                    isInequality: function () {
                        return this.args[0].isInequality() && this.args[1].isInequality()
                    }
                }),
                PercentOf: t(n, {})
            };
        return r.RawExponent = t(r.Exponent, {}),
            r
    }),
    define("math/parsenode/constant", ["require", "pjs", "./scalarexpression"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression");
        return t(n, function (e, t) {
            e.init = function (e) {
                this.constantValue = e,
                    t.init.call(this, [])
            }
                ,
                e.isConstant = !0,
                e.getEvalStrings = function () {
                    return {
                        statements: [],
                        expression: this.scalarExprString()
                    }
                }
                ,
                e.asValue = function () {
                    return this.constantValue
                }
                ,
                e.scalarExprString = function () {
                    return this.constantValue > 0 ? String(this.constantValue) : "(" + String(this.constantValue) + ")"
                }
                ,
                e.getEvaluationInfo = function () {
                    return [{
                        val: this.constantValue
                    }]
                }
                ,
                e.isNaN = function () {
                    return "number" == typeof this.constantValue && isNaN(this.constantValue)
                }
        })
    }),
    define("math/parsenode/identifier", ["require", "pjs", "./expression", "graphing/label"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("graphing/label");
        return t(n, function (e, t, n) {
            e.init = function (e) {
                t.init.call(this, []),
                    this._symbol = r.latexToIdentifier(e),
                    this.setInputString(e),
                    this.addDependency(this._symbol)
            }
                ,
                e.evaluate = function () {
                    throw "Cannot evaluate undefined variable " + this._symbol
                }
        })
    }),
    define("math/parsenode/ans", ["require", "pjs", "./identifier"], function (e) {
        var t = e("pjs")
            , n = e("./identifier");
        return t(n, function (e, t, n) { })
    }),
    define("math/parsenode/freevariable", ["require", "pjs", "./scalarexpression"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, []),
                    this.addDependency(e),
                    this._symbol = e
            }
                ,
                e.isFreeVariable = !0,
                e.scalarEvalExpression = function (e) {
                    return this._symbol
                }
                ,
                e.copyWithArgs = function (e) {
                    return this
                }
        })
    }),
    define("math/parsenode/dummyindex", ["require", "pjs", "./freevariable"], function (e) {
        var t = e("pjs")
            , n = e("./freevariable");
        return t(n, function () { })
    }),
    define("math/parsenode/list", ["require", "pjs", "./expression", "math/errormsg", "math/types"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("math/errormsg")
            , i = e("math/types");
        return t(n, function (e, t, n) {
            function o(e) {
                for (var t = 1 / 0, n = 0; n < e.length; n++)
                    (e[n].isList || e[n].isBroadcast) && (t = Math.min(t, e[n].length));
                return t
            }
            e.init = function (e) {
                if (t.init.call(this, e),
                    this.length = e.length,
                    0 === this.length)
                    throw r.emptyList()
            }
                ,
                e.isList = !0,
                e.getEvalStrings = function () {
                    for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                        var r = this.args[n].getEvalStrings();
                        Array.prototype.push.apply(e, r.statements),
                            t.push(r.expression)
                    }
                    return {
                        statements: e,
                        expression: "[" + t.join(",") + "]"
                    }
                }
                ,
                e.asValue = function () {
                    for (var e = [], t = 0; t < this.args.length; t++)
                        e.push(this.args[t].asValue());
                    return e
                }
                ,
                e.getEvaluationInfo = function () {
                    if (this.args.every(function (e) {
                        return e.isConstant
                    }))
                        return [{
                            val: this.args.map(function (e) {
                                return e.constantValue
                            })
                        }]
                }
                ,
                n.eachArgs = function (e, t) {
                    var n = o(e);
                    if (!isFinite(n))
                        return void t(e);
                    for (var r = 0; r < n; r++) {
                        for (var s = [], a = 0; a < e.length; a++)
                            s.push(e[a].isList || i.isList(e[a].valueType) ? e[a].elementAt(r) : e[a]);
                        t(s)
                    }
                }
                ,
                n.mapArgs = function (e, t) {
                    var r = [];
                    return n.eachArgs(e, function (e) {
                        r.push(t(e))
                    }),
                        r
                }
                ,
                n.wrap = function (e) {
                    return e.isList || i.isList(e.valueType) ? e : n([e])
                }
        })
    }),
    define("math/parsenode/range", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t, n) {
            e.init = function (e) {
                t.init.call(this, e),
                    this.beginning = e[0],
                    this.end = e[1]
            }
        })
    }),
    define("math/parsenode/broadcast", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t, n) {
            e.init = function (e, n) {
                if (t.init.call(this, n),
                    this._replacedSymbols = e,
                    this._expression = n[0],
                    this._lists = n.slice(1),
                    !e.length)
                    throw new Error("Cannot construct a broadcast node with no replaced symbols");
                for (var r = 0; r < e.length; r++)
                    this.removeDependency(e[r]);
                for (var i = 1 / 0, o = 0; o < this._lists.length; o++) {
                    if (!this._lists[o].isList)
                        throw new Error("List arguments of broadcast must be list literals");
                    i = Math.min(i, this._lists[o].length)
                }
                this.length = i
            }
                ,
                e.isBroadcast = !0,
                e.copyWithArgs = function (e) {
                    return new this.constructor(this._replacedSymbols, e)
                }
                ,
                e.evaluate = function (e) {
                    for (var t = this._expression.getCompiledFunction(this._replacedSymbols).fn, n = [], r = 0; r < this.length; r++) {
                        for (var i = [], o = 0; o < e.length; o++)
                            i.push(e[o][r]);
                        n.push(t.apply(void 0, i))
                    }
                    return n
                }
                ,
                e.getEvalStrings = function () {
                    var e = []
                        , t = this._expression.getEvalStrings();
                    Array.prototype.push.apply(e, t.statements);
                    var n, r = [], i = [];
                    for (n = 0; n < this._lists.length; n++) {
                        var o = this._lists[n].getEvalStrings();
                        Array.prototype.push.apply(e, o.statements);
                        var s = this.tmpVar();
                        i.push(s),
                            r.push("var " + s + " = " + o.expression)
                    }
                    var a = this.tmpVar()
                        , c = this.tmpVar();
                    r.push("var " + a + " = []");
                    var l = [];
                    for (n = 0; n < i.length; n++)
                        l.push("var " + this._replacedSymbols[n] + " = " + i[n] + "[" + c + "]");
                    return r.push("for (var " + c + " = 0; " + c + " < " + this.length + "; " + c + "++) {\n  " + l.join(";\n  ") + ";\n  " + a + ".push(" + t.expression + ");\n}"),
                        {
                            statements: e.concat(r),
                            expression: a
                        }
                }
        })
    }),
    define("math/parsenode/listaccess", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e),
                    this.list = e[0],
                    this.index = e[1]
            }
                ,
                e.getEvalStrings = function () {
                    var e = this.index.getEvalStrings()
                        , t = this.list.getEvalStrings()
                        , n = e.statements.concat(t.statements)
                        , r = this.tmpVar();
                    n.push(r + " = " + t.expression);
                    var i = this.tmpVar();
                    return n.push(i + " = Math.floor(" + e.expression + ") - 1"),
                        {
                            statements: n,
                            expression: "(" + i + " >= 0 && " + i + " < " + r + ".length ? " + r + "[" + i + "] : NaN)"
                        }
                }
        })
    }),
    define("math/parsenode/orderedpair", ["require", "pjs", "./scalarexpression"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression");
        return t(n, function (e, t, n) {
            e.asArray = function () {
                return [+this.args[0].asValue(), +this.args[1].asValue()]
            }
                ,
                e.asValue = e.asArray,
                e.getSliderVariables = function (e, t) {
                    return e.sliderVariables(t.getDependencies()).filter(function (t) {
                        return !e.validParametricVariable(t)
                    })
                }
                ,
                e.getEvalStrings = function () {
                    for (var e = [], t = [], n = 0; n < this.args.length; n++) {
                        var r = this.args[n].getEvalStrings();
                        e = e.concat(r.statements),
                            t.push(r.expression)
                    }
                    return {
                        statements: e,
                        expression: "[" + t.join(",") + "]"
                    }
                }
        })
    }),
    define("math/parsenode/movablepoint", ["require", "pjs", "./orderedpair"], function (e) {
        var t = e("pjs")
            , n = e("./orderedpair");
        return t(n, function (e, t) {
            e.init = function (e, n, r) {
                t.init.call(this, e),
                    this.moveStrategy = n,
                    this.defaultDragMode = r
            }
                ,
                e.isMovablePoint = !0
        })
    }),
    define("math/parsenode/orderedpairaccess", ["require", "pjs", "./scalarexpression"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e),
                    this.point = e[0],
                    this.index = e[1]
            }
                ,
                e.getEvalStrings = function () {
                    var e = this.index.getEvalStrings()
                        , t = this.point.getEvalStrings()
                        , n = [];
                    Array.prototype.push.apply(n, e.statements),
                        Array.prototype.push.apply(n, t.statements);
                    var r = t.expression + "[" + e.expression + "-1]";
                    return {
                        statements: n,
                        expression: r
                    }
                }
        })
    }),
    define("math/parsenode/polygon", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e);
            }
                ,
                e.copyWithArgs = function (e) {
                    return new this.constructor(e)
                }
        })
    }),
    define("math/comparators", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = {
            "<": {
                inclusive: !1,
                direction: -1
            },
            "!=": {
                inclusive: !1,
                direction: 0
            },
            ">": {
                inclusive: !1,
                direction: 1
            },
            "<=": {
                inclusive: !0,
                direction: -1
            },
            "=": {
                inclusive: !0,
                direction: 0
            },
            ">=": {
                inclusive: !0,
                direction: 1
            }
        }
            , r = function (e, t) {
                switch (t) {
                    case -1:
                        return e ? "<=" : "<";
                    case 0:
                        return e ? "=" : "!=";
                    case 1:
                        return e ? ">=" : ">";
                    default:
                        throw "Programming error.  Comparators must have a direction of -1, 0, or 1"
                }
            };
        t.table = n,
            t.get = r
    }),
    define("math/parsenode/basecomparator", ["require", "pjs", "./scalarexpression", "./expressionTypes", "math/comparators", "math/functions"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("./expressionTypes").Subtract
            , i = e("math/comparators").table
            , o = e("math/functions");
        return t(n, function (e, n, s) {
            s.create = function (e, n) {
                return n = n || e,
                    t(s, function (t, r) {
                        t.operator = e,
                            t.isInequality = function () {
                                return 0 !== i[e].direction
                            }
                            ,
                            t.compiledOperator = n,
                            t.scalarEvalExpression = function (e) {
                                return e.join(n)
                            }
                            ,
                            t.evaluate = o.createEvaluateFunction(t.scalarEvalExpression, 2)
                    })
            }
                ,
                e.init = function (e) {
                    n.init.call(this, e),
                        this._difference = r(i[this.operator].direction === -1 ? [e[1], e[0]] : [e[0], e[1]])
                }
        })
    }),
    define("math/parsenode/comparator", ["require", "math/parsenode/basecomparator"], function (e) {
        var t = e("math/parsenode/basecomparator");
        return {
            "<": t.create("<"),
            ">": t.create(">"),
            "<=": t.create("<="),
            ">=": t.create(">="),
            "=": t.create("=", "===")
        }
    }),
    define("math/parsenode/doubleinequality", ["require", "pjs", "./base", "math/comparators", "./comparator"], function (e) {
        var t = e("pjs")
            , n = e("./base")
            , r = e("math/comparators")
            , i = e("./comparator");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this),
                    this.args = e,
                    this._symbol = e[2]._symbol,
                    this._operators = [e[1], e[3]],
                    this._expressions = [e[0], e[4]];
                var n = r.get(r.table[e[1]].inclusive && r.table[e[3]].inclusive, r.table[e[1]].direction);
                this._indicator = i[n]([e[0], e[4]]),
                    this.addDependency(this._symbol),
                    this.mergeDependencies(this._expressions[0], this._expressions[1])
            }
                ,
                e.isInequality = function () {
                    return !0
                }
                ,
                e.isShadeBetween = function () {
                    return !0
                }
        })
    }),
    define("math/parsenode/repeatedoperator", ["require", "pjs", "./scalarexpression", "./dummyindex"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("./dummyindex");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e),
                    this._index = e[0],
                    this.addDummyDependency(this._index._symbol),
                    this._index instanceof r && this.removeDependency(this._index._symbol)
            }
                ,
                e.getEvalStrings = function () {
                    var e = []
                        , t = this.tmpVar()
                        , n = this._index._symbol
                        , r = this.tmpVar()
                        , i = this.tmpVar()
                        , o = this.args[1].getEvalStrings()
                        , s = this.args[2].getEvalStrings()
                        , a = this.args[3].getEvalStrings();
                    Array.prototype.push.apply(e, o.statements),
                        e.push("var " + r + " = Math.round(" + o.expression + ")"),
                        Array.prototype.push.apply(e, s.statements),
                        e.push("var " + i + " = Math.round(" + s.expression + ")"),
                        e.push("var " + t + "=" + this.starting_value);
                    var c = "for (var " + n + "=" + r + ";" + n + "<=" + i + ";" + n + "++) {" + a.statements.join(";") + ";" + t + this.in_place_operator + a.expression + "};"
                        , l = "if(!isFinite(" + i + "-" + r + ")) {" + t + "=(" + i + "<" + r + "?" + this.starting_value + ":NaN);}else{" + c + "}";
                    return e.push(l),
                        {
                            statements: e,
                            expression: t
                        }
                }
                ,
                e.evaluate = function (e, t, n) {
                    var r = n.getCompiledFunction([this._index._symbol]).fn;
                    if (t = Math.round(t),
                        e = Math.round(e),
                        !isFinite(t - e))
                        return t < e ? this.starting_value : NaN;
                    for (var i = this.starting_value, o = e; o <= t; o++)
                        i = this.update(i, r(o));
                    return i
                }
        })
    }),
    define("math/parsenode/sum", ["require", "pjs", "./repeatedoperator"], function (e) {
        var t = e("pjs")
            , n = e("./repeatedoperator");
        return t(n, function (e, t) {
            e.in_place_operator = "+=",
                e.starting_value = 0,
                e.evaluateConstant = function (e) {
                    var t = 1 + Math.round(e[1]) - Math.round(e[0]);
                    return t <= 0 ? this.starting_value : t * e[2]
                }
                ,
                e.update = function (e, t) {
                    return e + t
                }
        })
    }),
    define("math/parsenode/product", ["require", "pjs", "./repeatedoperator"], function (e) {
        var t = e("pjs")
            , n = e("./repeatedoperator");
        return t(n, function (e, t) {
            e.in_place_operator = "*=",
                e.starting_value = 1,
                e.evaluateConstant = function (e) {
                    var t = 1 + Math.round(e[1]) - Math.round(e[0]);
                    return t <= 0 ? this.starting_value : Math.pow(e[2], t)
                }
                ,
                e.update = function (e, t) {
                    return e * t
                }
        })
    }),
    define("math/parsenode/integral", ["require", "pjs", "./scalarexpression", "./dummyindex", "math/builtin"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("./dummyindex")
            , i = e("math/builtin");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this, e),
                    this._differential = e[0],
                    this.addDummyDependency(this._differential._symbol),
                    this._differential instanceof r && this.removeDependency(this._differential._symbol)
            }
                ,
                e.getEvalStrings = function () {
                    var e = this.args[0]
                        , t = this.args[1]
                        , n = this.args[2]
                        , r = this.args[3]
                        , i = []
                        , o = this.tmpVar()
                        , s = e._symbol
                        , a = this.tmpVar()
                        , c = this.tmpVar()
                        , l = t.getEvalStrings()
                        , u = n.getEvalStrings()
                        , d = r.getEvalStrings();
                    Array.prototype.push.apply(i, l.statements),
                        Array.prototype.push.apply(i, u.statements),
                        i.push("var " + a + " = " + l.expression),
                        i.push("var " + c + " = " + u.expression),
                        i.push("var " + o + " = function (" + s + ") { " + d.statements.join("; ") + "; return " + d.expression + ";}");
                    var p = "BuiltIn.quad(" + [o, a, c].join(", ") + ")";
                    return {
                        statements: i,
                        expression: p
                    }
                }
                ,
                e.evaluate = function (e, t, n) {
                    var r = this.args[0]
                        , o = n.getCompiledFunction([r._symbol]).fn;
                    return i.quad(o, e, t)
                }
        })
    }),
    define("math/parsenode/functioncall", ["require", "pjs", "./expression", "./identifier"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("./identifier");
        return t(n, function (e, t) {
            e.init = function (e, n) {
                "string" == typeof e && (e = r(e)),
                    this._identifier = e,
                    this._symbol = e._symbol,
                    t.init.call(this, n),
                    this.addDependency(this._symbol)
            }
                ,
                e.copyWithArgs = function (e) {
                    return new this.constructor(r(this._symbol), e)
                }
        })
    }),
    define("math/parsenode/functionexponent", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t) { })
    }),
    define("math/parsenode/prime", ["require", "pjs", "./expression"], function (e) {
        var t = e("pjs")
            , n = e("./expression");
        return t(n, function (e, t) {
            e.init = function (e, n) {
                t.init.call(this, n),
                    this.order = e
            }
                ,
                e.copyWithArgs = function (e) {
                    return new this.constructor(this.order, e)
                }
        })
    }),
    define("math/parsenode/piecewise", ["require", "pjs", "./scalarexpression", "./constant"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("./constant")
            , i = t(n, {});
        return i.chain = function (e) {
            for (var t, n = r(NaN); e.length;)
                t = e.pop(),
                    n = i([t.condition, t.if_expr, n]);
            return n
        }
            ,
            i.empty = function () {
                return i([r(!0), r(1), r(NaN)])
            }
            ,
            i
    }),
    define("math/parsenode/derivative", ["require", "pjs", "./scalarexpression", "./identifier"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("./identifier");
        return t(n, function (e, t) {
            e.init = function (e, n) {
                e instanceof r ? this._symbol = e._symbol : this._symbol = r(e)._symbol,
                    t.init.call(this, n)
            }
        })
    }),
    define("math/parsenode/nativefunction", ["require", "pjs", "./scalarexpression", "math/errormsg", "math/functions"], function (e) {
        var t = e("pjs")
            , n = e("./scalarexpression")
            , r = e("math/errormsg")
            , i = e("math/functions");
        return t(n, function (e, n, o) {
            e.init = function (e) {
                if (e.length < this._requiredArity)
                    throw r.wrongArity(this._symbol, this._requiredArity, e.length);
                if (e.length > this._maxArity)
                    throw r.wrongArity(this._symbol, this._maxArity, e.length);
                for (; e.length < this._maxArity;)
                    e.push(this._optionalArguments[e.length - this._requiredArity]);
                n.init.call(this, e)
            }
                ,
                e.scalarEvalExpression = function (e) {
                    return this.head + "(" + e.join(",") + ")"
                }
                ,
                o.create = function (e, n, r, o) {
                    return t(this, function (t, s, a) {
                        a.isFunction = !0,
                            t._symbol = e,
                            t.head = n,
                            t._requiredArity = r,
                            t._optionalArguments = o || [],
                            t._maxArity = t._requiredArity + t._optionalArguments.length,
                            t.evaluate = i.createEvaluateFunction(t.scalarEvalExpression.bind(t), t._maxArity),
                            a.getConcreteInvocationTree = function (e, t, n) {
                                return a(t).getConcreteTree(e, n)
                            }
                            ,
                            a.getCacheKeys = function () {
                                return []
                            }
                    })
                }
        })
    }),
    define("math/parsenode/typedfunction", ["require", "pjs", "./nativefunction"], function (e) {
        var t = e("pjs")
            , n = e("./nativefunction");
        return t(n, function (e, t, n, r) {
            n.create = function (e, t, n, i) {
                var o = n.length
                    , s = r.create.call(this, e, t, o);
                return s.prototype._inputTypes = n,
                    s.prototype._outputType = i,
                    s
            }
        })
    }),
    define("math/parsenode/trigfunction", ["require", "pjs", "./nativefunction", "./expressionTypes", "math/errormsg"], function (e) {
        var t = e("pjs")
            , n = e("./nativefunction")
            , r = e("./expressionTypes").Multiply
            , i = e("math/errormsg");
        return t(n, function (e, t, n, o) {
            n.create = function (e, t) {
                var n = 1
                    , s = o.create(e, t, n);
                return s.getConcreteInvocationTree = function (t, o, a) {
                    if (o.length < n)
                        throw i.wrongArity(e, n, o.length);
                    var c = t.trigAngleMultiplier ? [r([o[0], t.trigAngleMultiplier])].concat(o.slice(1)) : o;
                    return s(c).getConcreteTree(t, a)
                }
                    ,
                    s.getCacheKeys = function () {
                        return ["trigAngleMultiplier"]
                    }
                    ,
                    s
            }
        })
    }),
    define("math/parsenode/inversetrigfunction", ["require", "pjs", "./nativefunction", "./expressionTypes"], function (e) {
        var t = e("pjs")
            , n = e("./nativefunction")
            , r = e("./expressionTypes").Divide;
        return t(n, function (e, t, n, i) {
            n.create = function (e, t, n) {
                var o = 1
                    , s = i.create(e, t, o, n);
                return s.getConcreteInvocationTree = function (e, t, n) {
                    var i = s(t)
                        , o = e.trigAngleMultiplier ? r([i, e.trigAngleMultiplier]) : i;
                    return o.getConcreteTree(e, n)
                }
                    ,
                    s.getCacheKeys = function () {
                        return ["trigAngleMultiplier"]
                    }
                    ,
                    s
            }
        })
    }),
    define("math/parsenode/reducerfunction", ["require", "pjs", "./expression", "math/functions"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("math/functions");
        return t(n, function (e, n, i) {
            e.evalExpression = function (e) {
                return this.head + "(" + e + ")"
            }
                ,
                e.getEvalStrings = function () {
                    var e = this.args[0].getEvalStrings();
                    return {
                        statements: e.statements,
                        expression: this.evalExpression(e.expression)
                    }
                }
                ,
                i.create = function (e, n) {
                    return t(i, function (t, i, o) {
                        t._symbol = e,
                            t.head = n,
                            t._arity = 1,
                            o.isFunction = !0,
                            t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity),
                            o.getConcreteInvocationTree = function (e, t, n) {
                                return o(t).getConcreteTree(e, n)
                            }
                            ,
                            o.getCacheKeys = function () {
                                return []
                            }
                    })
                }
        })
    }),
    define("math/parsenode/doublereducerfunction", ["require", "pjs", "./expression", "math/functions", "math/errormsg"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("math/functions")
            , i = e("math/errormsg");
        return t(n, function (e, n, o) {
            e.init = function () {
                if (n.init.apply(this, arguments),
                    2 !== this.args.length)
                    throw i.wrongDoubleReducerArity(this._symbol)
            }
                ,
                e.evalExpression = function (e) {
                    return this.head + "(" + e.join(",") + ")"
                }
                ,
                e.getEvalStrings = function () {
                    for (var e = [], t = [], n = Math.min(this.args[0].length, this.args[1].length), r = 0; r < this.args.length; r++) {
                        var i = this.args[r]
                            , o = i.getEvalStrings();
                        Array.prototype.push.apply(e, o.statements),
                            t.push(i.length === n ? o.expression : o.expression + ".slice(0," + n + ")")
                    }
                    return {
                        statements: e,
                        expression: this.evalExpression(t)
                    }
                }
                ,
                o.create = function (e, n) {
                    return t(o, function (t, i, o) {
                        t._symbol = e,
                            t.head = n,
                            t._arity = 2,
                            o.isFunction = !0,
                            t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity),
                            o.getConcreteInvocationTree = function (e, t, n) {
                                return o(t).getConcreteTree(e, n)
                            }
                            ,
                            o.getCacheKeys = function () {
                                return []
                            }
                    })
                }
        })
    }),
    define("math/parsenode/parametrizedreducerfunction", ["require", "pjs", "./expression", "math/functions", "math/errormsg"], function (e) {
        var t = e("pjs")
            , n = e("./expression")
            , r = e("math/functions")
            , i = e("math/errormsg");
        return t(n, function (e, n, o) {
            e.init = function () {
                if (n.init.apply(this, arguments),
                    2 !== this.args.length)
                    throw i.wrongParametrizedReducerArity(this._symbol)
            }
                ,
                e.evalExpression = function (e) {
                    return this.head + "(" + e.join(",") + ")"
                }
                ,
                e.getEvalStrings = function () {
                    var e = []
                        , t = this.args[0].getEvalStrings()
                        , n = this.args[1].getEvalStrings();
                    Array.prototype.push.apply(e, t.statements),
                        Array.prototype.push.apply(e, n.statements);
                    var r = this.evalExpression([t.expression, n.expression]);
                    return {
                        statements: e,
                        expression: r
                    }
                }
                ,
                o.create = function (e, n) {
                    return t(o, function (t, i, o) {
                        t._symbol = e,
                            t.head = n,
                            t._arity = 2,
                            o.isFunction = !0,
                            t.evaluate = r.createEvaluateFunction(t.evalExpression.bind(t), t._arity),
                            o.getConcreteInvocationTree = function (e, t, n) {
                                return o(t).getConcreteTree(e, n)
                            }
                            ,
                            o.getCacheKeys = function () {
                                return []
                            }
                    })
                }
        })
    }),
    define("math/parsenode/builtinfunction", ["require", "math/parsenode/nativefunction", "math/parsenode/typedfunction", "math/parsenode/trigfunction", "math/parsenode/inversetrigfunction", "math/parsenode/reducerfunction", "math/parsenode/doublereducerfunction", "math/parsenode/parametrizedreducerfunction", "math/types", "math/parsenode/constant"], function (e) {
        var t = e("math/parsenode/nativefunction")
            , n = e("math/parsenode/typedfunction")
            , r = e("math/parsenode/trigfunction")
            , i = e("math/parsenode/inversetrigfunction")
            , o = e("math/parsenode/reducerfunction")
            , s = e("math/parsenode/doublereducerfunction")
            , a = e("math/parsenode/parametrizedreducerfunction")
            , c = e("math/types")
            , l = e("math/parsenode/constant")
            , u = l(1)
            , d = l(0)
            , p = l(.5);
        return {
            sin: r.create("sin", "BuiltIn.sin"),
            cos: r.create("cos", "BuiltIn.cos"),
            tan: r.create("tan", "BuiltIn.tan"),
            cot: r.create("cot", "BuiltIn.cot"),
            sec: r.create("sec", "BuiltIn.sec"),
            csc: r.create("csc", "BuiltIn.csc"),
            arcsin: i.create("arcsin", "Math.asin"),
            arccos: i.create("arccos", "Math.acos"),
            arctan: i.create("arctan", "Math.atan2", [u]),
            arccot: i.create("arccot", "BuiltIn.acot"),
            arcsec: i.create("arcsec", "BuiltIn.asec"),
            arccsc: i.create("arccsc", "BuiltIn.acsc"),
            sinh: t.create("sinh", "BuiltIn.sinh", 1),
            cosh: t.create("cosh", "BuiltIn.cosh", 1),
            tanh: t.create("tanh", "BuiltIn.tanh", 1),
            coth: t.create("coth", "BuiltIn.coth", 1),
            sech: t.create("sech", "BuiltIn.sech", 1),
            csch: t.create("csch", "BuiltIn.csch", 1),
            arcsinh: t.create("arcsinh", "BuiltIn.asinh", 1),
            arccosh: t.create("arccosh", "BuiltIn.acosh", 1),
            arctanh: t.create("arctanh", "BuiltIn.atanh", 1),
            arccoth: t.create("arccoth", "BuiltIn.acoth", 1),
            arcsech: t.create("arcsech", "BuiltIn.asech", 1),
            arccsch: t.create("arccsch", "BuiltIn.acsch", 1),
            sqrt: t.create("sqrt", "Math.sqrt", 1),
            rtxsqpone: t.create("rtxsqpone", "BuiltIn.sqrtxsqp1", 1),
            rtxsqmone: t.create("rtxsqmone", "BuiltIn.sqrtxsqm1", 1),
            nthroot: t.create("nthroot", "BuiltIn.nthroot", 2),
            log: t.create("log", "BuiltIn.common_log", 1),
            logbase: t.create("logbase", "BuiltIn.log_base", 2),
            ln: t.create("ln", "BuiltIn.log", 1),
            exp: t.create("exp", "Math.exp", 1),
            floor: t.create("floor", "Math.floor", 1),
            ceil: t.create("ceil", "Math.ceil", 1),
            round: t.create("round", "Math.round", 1),
            abs: t.create("abs", "Math.abs", 1),
            sign: t.create("sign", "BuiltIn.sign", 1),
            mod: t.create("mod", "BuiltIn.mod", 2),
            nCr: t.create("nCr", "BuiltIn.nCr", 2),
            nPr: t.create("nPr", "BuiltIn.nPr", 2),
            factorial: t.create("factorial", "BuiltIn.factorial", 1),
            polyGamma: t.create("polyGamma", "BuiltIn.polyGamma", 2),
            lcm: o.create("lcm", "BuiltIn.listLCM"),
            gcd: o.create("gcd", "BuiltIn.listGCD"),
            mean: o.create("mean", "BuiltIn.mean"),
            total: o.create("total", "BuiltIn.total"),
            stdev: o.create("stdev", "BuiltIn.stdev"),
            stdevp: o.create("stdevp", "BuiltIn.stdevp"),
            mad: o.create("mad", "BuiltIn.mad"),
            length: o.create("length", "BuiltIn.length"),
            min: o.create("min", "BuiltIn.listMin"),
            max: o.create("max", "BuiltIn.listMax"),
            argmin: o.create("argmin", "BuiltIn.argMin"),
            argmax: o.create("argmax", "BuiltIn.argMax"),
            median: o.create("median", "BuiltIn.median"),
            var: o.create("var", "BuiltIn.var"),
            varp: o.create("varp", "BuiltIn.varp"),
            cov: s.create("cov", "BuiltIn.cov"),
            covp: s.create("covp", "BuiltIn.covp"),
            corr: s.create("corr", "BuiltIn.corr"),
            quantile: a.create("quantile", "BuiltIn.quantile"),
            quartile: a.create("quartile", "BuiltIn.quartile"),
            upperQuantileIndex: a.create("upperQuantileIndex", "BuiltIn.upperQuantileIndex"),
            lowerQuantileIndex: a.create("lowerQuantileIndex", "BuiltIn.lowerQuantileIndex"),
            quartileIndex: a.create("quartileIndex", "BuiltIn.quartileIndex"),
            upperQuartileIndex: a.create("upperQuartileIndex", "BuiltIn.upperQuartileIndex"),
            lowerQuartileIndex: a.create("lowerQuartileIndex", "BuiltIn.lowerQuartileIndex"),
            normalcdf: t.create("normalcdf", "BuiltIn.normalcdf", 1, [d, u]),
            normalpdf: t.create("normalpdf", "BuiltIn.normalpdf", 1, [d, u]),
            binomcdf: t.create("binomcdf", "BuiltIn.binomcdf", 2, [p]),
            binompdf: t.create("binompdf", "BuiltIn.binompdf", 2, [p]),
            poissoncdf: t.create("poissoncdf", "BuiltIn.poissoncdf", 2),
            poissonpdf: t.create("poissonpdf", "BuiltIn.poissonpdf", 2),
            invNorm: t.create("invNorm", "BuiltIn.invNorm", 1),
            erf: t.create("erf", "BuiltIn.erf", 1),
            tpdf: t.create("tpdf", "BuiltIn.tpdf", 2),
            tcdf: t.create("tcdf", "BuiltIn.tcdf", 2),
            TTest: a.create("TTest", "BuiltIn.TTest"),
            TScore: a.create("TScore", "BuiltIn.TScore"),
            distance: n.create("distance", "BuiltIn.distance", [c.Point, c.Point], c.Number),
            midpoint: n.create("midpoint", "BuiltIn.midpoint", [c.Point, c.Point], c.Point)
        }
    }),
    define("math/parsenode/equation", ["require", "./base", "pjs", "./expressionTypes", "math/parsenode/comparator"], function (e) {
        var t = e("./base")
            , n = e("pjs")
            , r = e("./expressionTypes").Subtract
            , i = e("math/parsenode/comparator");
        return n(t, function (e, t) {
            e.init = function (e, n) {
                t.init.call(this),
                    this.mergeDependencies(e, n),
                    this._lhs = e,
                    this._rhs = n,
                    this._difference = r([this._lhs, this._rhs])
            }
                ,
                e.asComparator = function () {
                    return i["="]([this._lhs, this._rhs])
                }
        })
    }),
    define("math/parsenode/assignment", ["require", "./base", "./equation", "./identifier", "pjs"], function (e) {
        var t = e("./base")
            , n = e("./equation")
            , r = e("./identifier")
            , i = e("pjs");
        return i(t, function (e, t) {
            e.init = function (e, n) {
                t.init.call(this),
                    e = e._symbol,
                    this.mergeDependencies(n),
                    this._expression = n,
                    this._symbol = e,
                    this._exports = this.computeExports()
            }
                ,
                e.shouldExportAns = function () {
                    return !0
                }
                ,
                e.computeExports = function () {
                    for (var e = this._symbol, t = this.getDependencies(), n = 0; n < t.length; n++)
                        if (t[n] === e)
                            return [];
                    return [e]
                }
                ,
                e.isEquation = function (e) {
                    return e.getDependencies().indexOf(this._symbol) !== -1
                }
                ,
                e.asEquation = function () {
                    var e = n(r(this._symbol), this._expression);
                    return e.userData = this.userData,
                        e
                }
                ,
                e.getSliderInfo = function () {
                    if (this._expression.isConstant && "number" == typeof this._expression.constantValue && isFinite(this._expression.constantValue))
                        return {
                            value: this._expression.constantValue
                        }
                }
        })
    }),
    define("math/parsenode/functiondefinition", ["require", "pjs", "./base", "math/errormsg"], function (e) {
        var t = e("pjs")
            , n = e("./base")
            , r = e("math/errormsg");
        return t(n, function (e, t) {
            e.init = function (e, n, r) {
                t.init.call(this),
                    e = e._symbol,
                    this._argSymbols = n.map(function (e) {
                        return e._symbol
                    }),
                    this._symbol = e,
                    this._exports = [e],
                    this._expression = r,
                    this.addDependencies(this._argSymbols),
                    this.addDummyDependencies(this._argSymbols),
                    this.mergeDependencies(this._expression)
            }
                ,
                e.isFunction = !0,
                e.getConcreteInvocationTree = function (e, t, n) {
                    if (t.length !== this._argSymbols.length)
                        throw r.wrongArity(this._symbol, this._argSymbols.length, t.length);
                    for (var i = Object.create(e), o = 0; o < this._argSymbols.length; o++)
                        i[this._argSymbols[o]] = t[o];
                    return this._expression.getConcreteTree(i, n)
                }
                ,
                e.getArgs = function () {
                    return this._args
                }
                ,
                e.getSliderVariables = function (e, t) {
                    var n = this._argSymbols;
                    return e.sliderVariables(t.getDependencies()).filter(function (e) {
                        return n.indexOf(e) === -1
                    })
                }
        })
    }),
    define("numeric", [], function () {
        "use strict";
        var numeric = "undefined" == typeof exports ? function () { }
            : exports;
        return "undefined" != typeof global && (global.numeric = numeric),
            numeric.version = "1.2.6",
            numeric.bench = function (e, t) {
                var n, r, i, o;
                for ("undefined" == typeof t && (t = 15),
                    i = .5,
                    n = new Date; ;) {
                    for (i *= 2,
                        o = i; o > 3; o -= 4)
                        e(),
                            e(),
                            e(),
                            e();
                    for (; o > 0;)
                        e(),
                            o--;
                    if (r = new Date,
                        r - n > t)
                        break
                }
                for (o = i; o > 3; o -= 4)
                    e(),
                        e(),
                        e(),
                        e();
                for (; o > 0;)
                    e(),
                        o--;
                return r = new Date,
                    1e3 * (3 * i - 1) / (r - n)
            }
            ,
            numeric._myIndexOf = function (e) {
                var t, n = this.length;
                for (t = 0; t < n; ++t)
                    if (this[t] === e)
                        return t;
                return -1
            }
            ,
            numeric.myIndexOf = Array.prototype.indexOf ? Array.prototype.indexOf : numeric._myIndexOf,
            numeric.precision = 4,
            numeric.largeArray = 50,
            numeric.compile = function () {
                var e = Array.prototype.slice.call(arguments)
                    , t = e.pop();
                return t = "return function (" + e.join(",") + ") {" + t + "}",
                    new Function(["numeric"], t)(numeric)
            }
            ,
            numeric.prettyPrint = function (e) {
                function t(e) {
                    if (0 === e)
                        return "0";
                    if (isNaN(e))
                        return "NaN";
                    if (e < 0)
                        return "-" + t(-e);
                    if (isFinite(e)) {
                        var n = Math.floor(Math.log(e) / Math.log(10))
                            , r = e / Math.pow(10, n)
                            , i = r.toPrecision(numeric.precision);
                        return 10 === parseFloat(i) && (n++ ,
                            r = 1,
                            i = r.toPrecision(numeric.precision)),
                            parseFloat(i).toString() + "e" + n.toString()
                    }
                    return "Infinity"
                }
                function n(e) {
                    var i;
                    if ("undefined" == typeof e)
                        return r.push(Array(numeric.precision + 8).join(" ")),
                            !1;
                    if ("string" == typeof e)
                        return r.push('"' + e + '"'),
                            !1;
                    if ("boolean" == typeof e)
                        return r.push(e.toString()),
                            !1;
                    if ("number" == typeof e) {
                        var o = t(e)
                            , s = e.toPrecision(numeric.precision)
                            , a = parseFloat(e.toString()).toString()
                            , c = [o, s, a, parseFloat(s).toString(), parseFloat(a).toString()];
                        for (i = 1; i < c.length; i++)
                            c[i].length < o.length && (o = c[i]);
                        return r.push(Array(numeric.precision + 8 - o.length).join(" ") + o),
                            !1
                    }
                    if (null === e)
                        return r.push("null"),
                            !1;
                    if ("function" == typeof e) {
                        r.push(e.toString());
                        var l = !1;
                        for (i in e)
                            e.hasOwnProperty(i) && (l ? r.push(",\n") : r.push("\n{"),
                                l = !0,
                                r.push(i),
                                r.push(": \n"),
                                n(e[i]));
                        return l && r.push("}\n"),
                            !0
                    }
                    if (e instanceof Array) {
                        if (e.length > numeric.largeArray)
                            return r.push("...Large Array..."),
                                !0;
                        var l = !1;
                        for (r.push("["),
                            i = 0; i < e.length; i++)
                            i > 0 && (r.push(","),
                                l && r.push("\n ")),
                                l = n(e[i]);
                        return r.push("]"),
                            !0
                    }
                    r.push("{");
                    var l = !1;
                    for (i in e)
                        e.hasOwnProperty(i) && (l && r.push(",\n"),
                            l = !0,
                            r.push(i),
                            r.push(": \n"),
                            n(e[i]));
                    return r.push("}"),
                        !0
                }
                var r = [];
                return n(e),
                    r.join("")
            }
            ,
            numeric.parseDate = function (e) {
                function t(e) {
                    if ("string" == typeof e)
                        return Date.parse(e.replace(/-/g, "/"));
                    if (!(e instanceof Array))
                        throw new Error("parseDate: parameter must be arrays of strings");
                    var n, r = [];
                    for (n = 0; n < e.length; n++)
                        r[n] = t(e[n]);
                    return r
                }
                return t(e)
            }
            ,
            numeric.parseFloat = function (e) {
                function t(e) {
                    if ("string" == typeof e)
                        return parseFloat(e);
                    if (!(e instanceof Array))
                        throw new Error("parseFloat: parameter must be arrays of strings");
                    var n, r = [];
                    for (n = 0; n < e.length; n++)
                        r[n] = t(e[n]);
                    return r
                }
                return t(e)
            }
            ,
            numeric.parseCSV = function (e) {
                var t, n, r = e.split("\n"), i = [], o = /(([^'",]*)|('[^']*')|("[^"]*")),/g, s = /^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/, a = function (e) {
                    return e.substr(0, e.length - 1)
                }, c = 0;
                for (n = 0; n < r.length; n++) {
                    var l, u = (r[n] + ",").match(o);
                    if (u.length > 0) {
                        for (i[c] = [],
                            t = 0; t < u.length; t++)
                            l = a(u[t]),
                                s.test(l) ? i[c][t] = parseFloat(l) : i[c][t] = l;
                        c++
                    }
                }
                return i
            }
            ,
            numeric.toCSV = function (e) {
                var t, n, r, i, o, s, a = numeric.dim(e);
                for (r = a[0],
                    i = a[1],
                    s = [],
                    t = 0; t < r; t++) {
                    for (o = [],
                        n = 0; n < r; n++)
                        o[n] = e[t][n].toString();
                    s[t] = o.join(", ")
                }
                return s.join("\n") + "\n"
            }
            ,
            numeric.getURL = function (e) {
                var t = new XMLHttpRequest;
                return t.open("GET", e, !1),
                    t.send(),
                    t
            }
            ,
            numeric.imageURL = function (e) {
                function t(e) {
                    var t, n, r, i, o, s, a, c, l = e.length, u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", d = "";
                    for (t = 0; t < l; t += 3)
                        n = e[t],
                            r = e[t + 1],
                            i = e[t + 2],
                            o = n >> 2,
                            s = ((3 & n) << 4) + (r >> 4),
                            a = ((15 & r) << 2) + (i >> 6),
                            c = 63 & i,
                            t + 1 >= l ? a = c = 64 : t + 2 >= l && (c = 64),
                            d += u.charAt(o) + u.charAt(s) + u.charAt(a) + u.charAt(c);
                    return d
                }
                function n(e, t, n) {
                    "undefined" == typeof t && (t = 0),
                        "undefined" == typeof n && (n = e.length);
                    var r, i = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918e3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117], o = -1, s = 0;
                    e.length;
                    for (r = t; r < n; r++)
                        s = 255 & (o ^ e[r]),
                            o = o >>> 8 ^ i[s];
                    return o ^ -1
                }
                var r, i, o, s, a, c, l, u, d, p, h = e[0].length, f = e[0][0].length, m = [137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, f >> 24 & 255, f >> 16 & 255, f >> 8 & 255, 255 & f, h >> 24 & 255, h >> 16 & 255, h >> 8 & 255, 255 & h, 8, 2, 0, 0, 0, -1, -2, -3, -4, -5, -6, -7, -8, 73, 68, 65, 84, 8, 29];
                for (p = n(m, 12, 29),
                    m[29] = p >> 24 & 255,
                    m[30] = p >> 16 & 255,
                    m[31] = p >> 8 & 255,
                    m[32] = 255 & p,
                    r = 1,
                    i = 0,
                    l = 0; l < h; l++) {
                    for (l < h - 1 ? m.push(0) : m.push(1),
                        a = 3 * f + 1 + (0 === l) & 255,
                        c = 3 * f + 1 + (0 === l) >> 8 & 255,
                        m.push(a),
                        m.push(c),
                        m.push(255 & ~a),
                        m.push(255 & ~c),
                        0 === l && m.push(0),
                        u = 0; u < f; u++)
                        for (o = 0; o < 3; o++)
                            a = e[o][l][u],
                                a = a > 255 ? 255 : a < 0 ? 0 : Math.round(a),
                                r = (r + a) % 65521,
                                i = (i + r) % 65521,
                                m.push(a);
                    m.push(0)
                }
                return d = (i << 16) + r,
                    m.push(d >> 24 & 255),
                    m.push(d >> 16 & 255),
                    m.push(d >> 8 & 255),
                    m.push(255 & d),
                    s = m.length - 41,
                    m[33] = s >> 24 & 255,
                    m[34] = s >> 16 & 255,
                    m[35] = s >> 8 & 255,
                    m[36] = 255 & s,
                    p = n(m, 37),
                    m.push(p >> 24 & 255),
                    m.push(p >> 16 & 255),
                    m.push(p >> 8 & 255),
                    m.push(255 & p),
                    m.push(0),
                    m.push(0),
                    m.push(0),
                    m.push(0),
                    m.push(73),
                    m.push(69),
                    m.push(78),
                    m.push(68),
                    m.push(174),
                    m.push(66),
                    m.push(96),
                    m.push(130),
                    "data:image/png;base64," + t(m)
            }
            ,
            numeric._dim = function (e) {
                for (var t = []; "object" == typeof e;)
                    t.push(e.length),
                        e = e[0];
                return t
            }
            ,
            numeric.dim = function (e) {
                var t, n;
                return "object" == typeof e ? (t = e[0],
                    "object" == typeof t ? (n = t[0],
                        "object" == typeof n ? numeric._dim(e) : [e.length, t.length]) : [e.length]) : []
            }
            ,
            numeric.mapreduce = function (e, t) {
                return numeric.compile("x", "accum", "_s", "_k", 'if(typeof accum === "undefined") accum = ' + t + ';\nif(typeof x === "number") { var xi = x; ' + e + '; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    ' + e + ";\n    xi = x[i-1];\n    " + e + ";\n}\nif(i === 0) {\n    xi = x[i];\n    " + e + "\n}\nreturn accum;")
            }
            ,
            numeric.mapreduce2 = function (e, t) {
                return numeric.compile("x", "var n = x.length;\nvar i,xi;\n" + t + "\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    " + e + "\n}\nreturn accum;")
            }
            ,
            numeric.same = function e(t, n) {
                var r, i;
                if (!(t instanceof Array && n instanceof Array))
                    return !1;
                if (i = t.length,
                    i !== n.length)
                    return !1;
                for (r = 0; r < i; r++)
                    if (t[r] !== n[r]) {
                        if ("object" != typeof t[r])
                            return !1;
                        if (!e(t[r], n[r]))
                            return !1
                    }
                return !0
            }
            ,
            numeric.rep = function (e, t, n) {
                "undefined" == typeof n && (n = 0);
                var r, i = e[n], o = Array(i);
                if (n === e.length - 1) {
                    for (r = i - 2; r >= 0; r -= 2)
                        o[r + 1] = t,
                            o[r] = t;
                    return r === -1 && (o[0] = t),
                        o
                }
                for (r = i - 1; r >= 0; r--)
                    o[r] = numeric.rep(e, t, n + 1);
                return o
            }
            ,
            numeric.dotMMsmall = function (e, t) {
                var n, r, i, o, s, a, c, l, u, d, p;
                for (o = e.length,
                    s = t.length,
                    a = t[0].length,
                    c = Array(o),
                    n = o - 1; n >= 0; n--) {
                    for (l = Array(a),
                        u = e[n],
                        i = a - 1; i >= 0; i--) {
                        for (d = u[s - 1] * t[s - 1][i],
                            r = s - 2; r >= 1; r -= 2)
                            p = r - 1,
                                d += u[r] * t[r][i] + u[p] * t[p][i];
                        0 === r && (d += u[0] * t[0][i]),
                            l[i] = d
                    }
                    c[n] = l
                }
                return c
            }
            ,
            numeric._getCol = function (e, t, n) {
                var r, i = e.length;
                for (r = i - 1; r > 0; --r)
                    n[r] = e[r][t],
                        --r,
                        n[r] = e[r][t];
                0 === r && (n[0] = e[0][t])
            }
            ,
            numeric.dotMMbig = function (e, t) {
                var n, r, i, o, s = numeric._getCol, a = t.length, c = Array(a), l = e.length, u = t[0].length, d = new Array(l), p = numeric.dotVV;
                for (--a,
                    --l,
                    r = l; r !== -1; --r)
                    d[r] = Array(u);
                for (--u,
                    r = u; r !== -1; --r)
                    for (s(t, r, c),
                        i = l; i !== -1; --i)
                        o = 0,
                            n = e[i],
                            d[i][r] = p(n, c);
                return d
            }
            ,
            numeric.dotMV = function (e, t) {
                var n, r = e.length, i = (t.length,
                    Array(r)), o = numeric.dotVV;
                for (n = r - 1; n >= 0; n--)
                    i[n] = o(e[n], t);
                return i
            }
            ,
            numeric.dotVM = function (e, t) {
                var n, r, i, o, s, a, c;
                for (i = e.length,
                    o = t[0].length,
                    s = Array(o),
                    r = o - 1; r >= 0; r--) {
                    for (a = e[i - 1] * t[i - 1][r],
                        n = i - 2; n >= 1; n -= 2)
                        c = n - 1,
                            a += e[n] * t[n][r] + e[c] * t[c][r];
                    0 === n && (a += e[0] * t[0][r]),
                        s[r] = a
                }
                return s
            }
            ,
            numeric.dotVV = function (e, t) {
                var n, r, i = e.length, o = e[i - 1] * t[i - 1];
                for (n = i - 2; n >= 1; n -= 2)
                    r = n - 1,
                        o += e[n] * t[n] + e[r] * t[r];
                return 0 === n && (o += e[0] * t[0]),
                    o
            }
            ,
            numeric.dot = function (e, t) {
                var n = numeric.dim;
                switch (1e3 * n(e).length + n(t).length) {
                    case 2002:
                        return t.length < 10 ? numeric.dotMMsmall(e, t) : numeric.dotMMbig(e, t);
                    case 2001:
                        return numeric.dotMV(e, t);
                    case 1002:
                        return numeric.dotVM(e, t);
                    case 1001:
                        return numeric.dotVV(e, t);
                    case 1e3:
                        return numeric.mulVS(e, t);
                    case 1:
                        return numeric.mulSV(e, t);
                    case 0:
                        return e * t;
                    default:
                        throw new Error("numeric.dot only works on vectors and matrices")
                }
            }
            ,
            numeric.diag = function (e) {
                var t, n, r, i, o = e.length, s = Array(o);
                for (t = o - 1; t >= 0; t--) {
                    for (i = Array(o),
                        n = t + 2,
                        r = o - 1; r >= n; r -= 2)
                        i[r] = 0,
                            i[r - 1] = 0;
                    for (r > t && (i[r] = 0),
                        i[t] = e[t],
                        r = t - 1; r >= 1; r -= 2)
                        i[r] = 0,
                            i[r - 1] = 0;
                    0 === r && (i[0] = 0),
                        s[t] = i
                }
                return s
            }
            ,
            numeric.getDiag = function (e) {
                var t, n = Math.min(e.length, e[0].length), r = Array(n);
                for (t = n - 1; t >= 1; --t)
                    r[t] = e[t][t],
                        --t,
                        r[t] = e[t][t];
                return 0 === t && (r[0] = e[0][0]),
                    r
            }
            ,
            numeric.identity = function (e) {
                return numeric.diag(numeric.rep([e], 1))
            }
            ,
            numeric.pointwise = function (e, t, n) {
                "undefined" == typeof n && (n = "");
                var r, i, o = [], s = /\[i\]$/, a = "", c = !1;
                for (r = 0; r < e.length; r++)
                    s.test(e[r]) ? (i = e[r].substring(0, e[r].length - 3),
                        a = i) : i = e[r],
                        "ret" === i && (c = !0),
                        o.push(i);
                return o[e.length] = "_s",
                    o[e.length + 1] = "_k",
                    o[e.length + 2] = 'if(typeof _s === "undefined") _s = numeric.dim(' + a + ');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i' + (c ? "" : ", ret = Array(_n)") + ";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(" + e.join(",") + ",_s,_k+1);\n    return ret;\n}\n" + n + "\nfor(i=_n-1;i!==-1;--i) {\n    " + t + "\n}\nreturn ret;",
                    numeric.compile.apply(null, o)
            }
            ,
            numeric.pointwise2 = function (e, t, n) {
                "undefined" == typeof n && (n = "");
                var r, i, o = [], s = /\[i\]$/, a = "", c = !1;
                for (r = 0; r < e.length; r++)
                    s.test(e[r]) ? (i = e[r].substring(0, e[r].length - 3),
                        a = i) : i = e[r],
                        "ret" === i && (c = !0),
                        o.push(i);
                return o[e.length] = "var _n = " + a + ".length;\nvar i" + (c ? "" : ", ret = Array(_n)") + ";\n" + n + "\nfor(i=_n-1;i!==-1;--i) {\n" + t + "\n}\nreturn ret;",
                    numeric.compile.apply(null, o)
            }
            ,
            numeric._biforeach = function e(t, n, r, i, o) {
                if (i === r.length - 1)
                    return void o(t, n);
                var s, a = r[i];
                for (s = a - 1; s >= 0; s--)
                    e("object" == typeof t ? t[s] : t, "object" == typeof n ? n[s] : n, r, i + 1, o)
            }
            ,
            numeric._biforeach2 = function e(t, n, r, i, o) {
                if (i === r.length - 1)
                    return o(t, n);
                var s, a = r[i], c = Array(a);
                for (s = a - 1; s >= 0; --s)
                    c[s] = e("object" == typeof t ? t[s] : t, "object" == typeof n ? n[s] : n, r, i + 1, o);
                return c
            }
            ,
            numeric._foreach = function e(t, n, r, i) {
                if (r === n.length - 1)
                    return void i(t);
                var o, s = n[r];
                for (o = s - 1; o >= 0; o--)
                    e(t[o], n, r + 1, i)
            }
            ,
            numeric._foreach2 = function e(t, n, r, i) {
                if (r === n.length - 1)
                    return i(t);
                var o, s = n[r], a = Array(s);
                for (o = s - 1; o >= 0; o--)
                    a[o] = e(t[o], n, r + 1, i);
                return a
            }
            ,
            numeric.ops2 = {
                add: "+",
                sub: "-",
                mul: "*",
                div: "/",
                mod: "%",
                and: "&&",
                or: "||",
                eq: "===",
                neq: "!==",
                lt: "<",
                gt: ">",
                leq: "<=",
                geq: ">=",
                band: "&",
                bor: "|",
                bxor: "^",
                lshift: "<<",
                rshift: ">>",
                rrshift: ">>>"
            },
            numeric.opseq = {
                addeq: "+=",
                subeq: "-=",
                muleq: "*=",
                diveq: "/=",
                modeq: "%=",
                lshifteq: "<<=",
                rshifteq: ">>=",
                rrshifteq: ">>>=",
                bandeq: "&=",
                boreq: "|=",
                bxoreq: "^="
            },
            numeric.mathfuns = ["abs", "acos", "asin", "atan", "ceil", "cos", "exp", "floor", "log", "round", "sin", "sqrt", "tan", "isNaN", "isFinite"],
            numeric.mathfuns2 = ["atan2", "pow", "max", "min"],
            numeric.ops1 = {
                neg: "-",
                not: "!",
                bnot: "~",
                clone: ""
            },
            numeric.mapreducers = {
                any: ["if(xi) return true;", "var accum = false;"],
                all: ["if(!xi) return false;", "var accum = true;"],
                sum: ["accum += xi;", "var accum = 0;"],
                prod: ["accum *= xi;", "var accum = 1;"],
                norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
                norminf: ["accum = max(accum,abs(xi));", "var accum = 0, max = Math.max, abs = Math.abs;"],
                norm1: ["accum += abs(xi);", "var accum = 0, abs = Math.abs;"],
                sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
                inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"]
            },
            function () {
                var e, t;
                for (e = 0; e < numeric.mathfuns2.length; ++e)
                    t = numeric.mathfuns2[e],
                        numeric.ops2[t] = t;
                for (e in numeric.ops2)
                    if (numeric.ops2.hasOwnProperty(e)) {
                        t = numeric.ops2[e];
                        var n, r, i = "";
                        numeric.myIndexOf.call(numeric.mathfuns2, e) !== -1 ? (i = "var " + t + " = Math." + t + ";\n",
                            n = function (e, n, r) {
                                return e + " = " + t + "(" + n + "," + r + ")"
                            }
                            ,
                            r = function (e, n) {
                                return e + " = " + t + "(" + e + "," + n + ")"
                            }
                        ) : (n = function (e, n, r) {
                            return e + " = " + n + " " + t + " " + r
                        }
                            ,
                            r = numeric.opseq.hasOwnProperty(e + "eq") ? function (e, n) {
                                return e + " " + t + "= " + n
                            }
                                : function (e, n) {
                                    return e + " = " + e + " " + t + " " + n
                                }
                            ),
                            numeric[e + "VV"] = numeric.pointwise2(["x[i]", "y[i]"], n("ret[i]", "x[i]", "y[i]"), i),
                            numeric[e + "SV"] = numeric.pointwise2(["x", "y[i]"], n("ret[i]", "x", "y[i]"), i),
                            numeric[e + "VS"] = numeric.pointwise2(["x[i]", "y"], n("ret[i]", "x[i]", "y"), i),
                            numeric[e] = numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric." + e + "VV, VS = numeric." + e + "VS, SV = numeric." + e + 'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else ' + r("x", "y") + "\n}\nreturn x;\n"),
                            numeric[t] = numeric[e],
                            numeric[e + "eqV"] = numeric.pointwise2(["ret[i]", "x[i]"], r("ret[i]", "x[i]"), i),
                            numeric[e + "eqS"] = numeric.pointwise2(["ret[i]", "x"], r("ret[i]", "x"), i),
                            numeric[e + "eq"] = numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric." + e + "eqV, S = numeric." + e + 'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')
                    }
                for (e = 0; e < numeric.mathfuns2.length; ++e)
                    t = numeric.mathfuns2[e],
                        delete numeric.ops2[t];
                for (e = 0; e < numeric.mathfuns.length; ++e)
                    t = numeric.mathfuns[e],
                        numeric.ops1[t] = t;
                for (e in numeric.ops1)
                    numeric.ops1.hasOwnProperty(e) && (i = "",
                        t = numeric.ops1[e],
                        numeric.myIndexOf.call(numeric.mathfuns, e) !== -1 && Math.hasOwnProperty(t) && (i = "var " + t + " = Math." + t + ";\n"),
                        numeric[e + "eqV"] = numeric.pointwise2(["ret[i]"], "ret[i] = " + t + "(ret[i]);", i),
                        numeric[e + "eq"] = numeric.compile("x", 'if(typeof x !== "object") return ' + t + "x\nvar i;\nvar V = numeric." + e + "eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),
                        numeric[e + "V"] = numeric.pointwise2(["x[i]"], "ret[i] = " + t + "(x[i]);", i),
                        numeric[e] = numeric.compile("x", 'if(typeof x !== "object") return ' + t + "(x)\nvar i;\nvar V = numeric." + e + "V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));
                for (e = 0; e < numeric.mathfuns.length; ++e)
                    t = numeric.mathfuns[e],
                        delete numeric.ops1[t];
                for (e in numeric.mapreducers)
                    numeric.mapreducers.hasOwnProperty(e) && (t = numeric.mapreducers[e],
                        numeric[e + "V"] = numeric.mapreduce2(t[0], t[1]),
                        numeric[e] = numeric.compile("x", "s", "k", t[1] + 'if(typeof x !== "object") {    xi = x;\n' + t[0] + '\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.' + e + "V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n" + t[0] + "\n}\nreturn accum;\n"))
            }(),
            numeric.truncVV = numeric.pointwise(["x[i]", "y[i]"], "ret[i] = round(x[i]/y[i])*y[i];", "var round = Math.round;"),
            numeric.truncVS = numeric.pointwise(["x[i]", "y"], "ret[i] = round(x[i]/y)*y;", "var round = Math.round;"),
            numeric.truncSV = numeric.pointwise(["x", "y[i]"], "ret[i] = round(x/y[i])*y[i];", "var round = Math.round;"),
            numeric.trunc = function (e, t) {
                return "object" == typeof e ? "object" == typeof t ? numeric.truncVV(e, t) : numeric.truncVS(e, t) : "object" == typeof t ? numeric.truncSV(e, t) : Math.round(e / t) * t
            }
            ,
            numeric.inv = function (e) {
                var t, n, r, i, o, s, a, e, c = numeric.dim(e), l = Math.abs, u = c[0], d = c[1], p = numeric.clone(e), h = numeric.identity(u);
                for (s = 0; s < d; ++s) {
                    var f = -1
                        , m = -1;
                    for (o = s; o !== u; ++o)
                        a = l(p[o][s]),
                            a > m && (f = o,
                                m = a);
                    for (n = p[f],
                        p[f] = p[s],
                        p[s] = n,
                        i = h[f],
                        h[f] = h[s],
                        h[s] = i,
                        e = n[s],
                        a = s; a !== d; ++a)
                        n[a] /= e;
                    for (a = d - 1; a !== -1; --a)
                        i[a] /= e;
                    for (o = u - 1; o !== -1; --o)
                        if (o !== s) {
                            for (t = p[o],
                                r = h[o],
                                e = t[s],
                                a = s + 1; a !== d; ++a)
                                t[a] -= n[a] * e;
                            for (a = d - 1; a > 0; --a)
                                r[a] -= i[a] * e,
                                    --a,
                                    r[a] -= i[a] * e;
                            0 === a && (r[0] -= i[0] * e)
                        }
                }
                return h
            }
            ,
            numeric.det = function (e) {
                var t = numeric.dim(e);
                if (2 !== t.length || t[0] !== t[1])
                    throw new Error("numeric: det() only works on square matrices");
                var n, r, i, o, s, a, c, l, u = t[0], d = 1, p = numeric.clone(e);
                for (r = 0; r < u - 1; r++) {
                    for (i = r,
                        n = r + 1; n < u; n++)
                        Math.abs(p[n][r]) > Math.abs(p[i][r]) && (i = n);
                    for (i !== r && (c = p[i],
                        p[i] = p[r],
                        p[r] = c,
                        d *= -1),
                        o = p[r],
                        n = r + 1; n < u; n++) {
                        for (s = p[n],
                            a = s[r] / o[r],
                            i = r + 1; i < u - 1; i += 2)
                            l = i + 1,
                                s[i] -= o[i] * a,
                                s[l] -= o[l] * a;
                        i !== u && (s[i] -= o[i] * a)
                    }
                    if (0 === o[r])
                        return 0;
                    d *= o[r]
                }
                return d * p[r][r]
            }
            ,
            numeric.transpose = function (e) {
                var t, n, r, i, o, s = e.length, a = e[0].length, c = Array(a);
                for (n = 0; n < a; n++)
                    c[n] = Array(s);
                for (t = s - 1; t >= 1; t -= 2) {
                    for (i = e[t],
                        r = e[t - 1],
                        n = a - 1; n >= 1; --n)
                        o = c[n],
                            o[t] = i[n],
                            o[t - 1] = r[n],
                            --n,
                            o = c[n],
                            o[t] = i[n],
                            o[t - 1] = r[n];
                    0 === n && (o = c[0],
                        o[t] = i[0],
                        o[t - 1] = r[0])
                }
                if (0 === t) {
                    for (r = e[0],
                        n = a - 1; n >= 1; --n)
                        c[n][0] = r[n],
                            --n,
                            c[n][0] = r[n];
                    0 === n && (c[0][0] = r[0])
                }
                return c
            }
            ,
            numeric.negtranspose = function (e) {
                var t, n, r, i, o, s = e.length, a = e[0].length, c = Array(a);
                for (n = 0; n < a; n++)
                    c[n] = Array(s);
                for (t = s - 1; t >= 1; t -= 2) {
                    for (i = e[t],
                        r = e[t - 1],
                        n = a - 1; n >= 1; --n)
                        o = c[n],
                            o[t] = -i[n],
                            o[t - 1] = -r[n],
                            --n,
                            o = c[n],
                            o[t] = -i[n],
                            o[t - 1] = -r[n];
                    0 === n && (o = c[0],
                        o[t] = -i[0],
                        o[t - 1] = -r[0])
                }
                if (0 === t) {
                    for (r = e[0],
                        n = a - 1; n >= 1; --n)
                        c[n][0] = -r[n],
                            --n,
                            c[n][0] = -r[n];
                    0 === n && (c[0][0] = -r[0])
                }
                return c
            }
            ,
            numeric._random = function e(t, n) {
                var r, i, o = t[n], s = Array(o);
                if (n === t.length - 1) {
                    for (i = Math.random,
                        r = o - 1; r >= 1; r -= 2)
                        s[r] = i(),
                            s[r - 1] = i();
                    return 0 === r && (s[0] = i()),
                        s
                }
                for (r = o - 1; r >= 0; r--)
                    s[r] = e(t, n + 1);
                return s
            }
            ,
            numeric.random = function (e) {
                return numeric._random(e, 0)
            }
            ,
            numeric.norm2 = function (e) {
                return Math.sqrt(numeric.norm2Squared(e))
            }
            ,
            numeric.linspace = function (e, t, n) {
                if ("undefined" == typeof n && (n = Math.max(Math.round(t - e) + 1, 1)),
                    n < 2)
                    return 1 === n ? [e] : [];
                var r, i = Array(n);
                for (n-- ,
                    r = n; r >= 0; r--)
                    i[r] = (r * t + (n - r) * e) / n;
                return i
            }
            ,
            numeric.getBlock = function (e, t, n) {
                function r(e, o) {
                    var s, a = t[o], c = n[o] - a, l = Array(c);
                    if (o === i.length - 1) {
                        for (s = c; s >= 0; s--)
                            l[s] = e[s + a];
                        return l
                    }
                    for (s = c; s >= 0; s--)
                        l[s] = r(e[s + a], o + 1);
                    return l
                }
                var i = numeric.dim(e);
                return r(e, 0)
            }
            ,
            numeric.setBlock = function (e, t, n, r) {
                function i(e, r, s) {
                    var a, c = t[s], l = n[s] - c;
                    if (s === o.length - 1)
                        for (a = l; a >= 0; a--)
                            e[a + c] = r[a];
                    for (a = l; a >= 0; a--)
                        i(e[a + c], r[a], s + 1)
                }
                var o = numeric.dim(e);
                return i(e, r, 0),
                    e
            }
            ,
            numeric.getRange = function (e, t, n) {
                var r, i, o, s, a = t.length, c = n.length, l = Array(a);
                for (r = a - 1; r !== -1; --r)
                    for (l[r] = Array(c),
                        o = l[r],
                        s = e[t[r]],
                        i = c - 1; i !== -1; --i)
                        o[i] = s[n[i]];
                return l
            }
            ,
            numeric.blockMatrix = function (e) {
                var t = numeric.dim(e);
                if (t.length < 4)
                    return numeric.blockMatrix([e]);
                var n, r, i, o, s, a = t[0], c = t[1];
                for (n = 0,
                    r = 0,
                    i = 0; i < a; ++i)
                    n += e[i][0].length;
                for (o = 0; o < c; ++o)
                    r += e[0][o][0].length;
                var l = Array(n);
                for (i = 0; i < n; ++i)
                    l[i] = Array(r);
                var u, d, p, h, f, m = 0;
                for (i = 0; i < a; ++i) {
                    for (u = r,
                        o = c - 1; o !== -1; --o)
                        for (s = e[i][o],
                            u -= s[0].length,
                            p = s.length - 1; p !== -1; --p)
                            for (f = s[p],
                                d = l[m + p],
                                h = f.length - 1; h !== -1; --h)
                                d[u + h] = f[h];
                    m += e[i][0].length
                }
                return l
            }
            ,
            numeric.tensor = function (e, t) {
                if ("number" == typeof e || "number" == typeof t)
                    return numeric.mul(e, t);
                var n = numeric.dim(e)
                    , r = numeric.dim(t);
                if (1 !== n.length || 1 !== r.length)
                    throw new Error("numeric: tensor product is only defined for vectors");
                var i, o, s, a, c = n[0], l = r[0], u = Array(c);
                for (o = c - 1; o >= 0; o--) {
                    for (i = Array(l),
                        a = e[o],
                        s = l - 1; s >= 3; --s)
                        i[s] = a * t[s],
                            --s,
                            i[s] = a * t[s],
                            --s,
                            i[s] = a * t[s],
                            --s,
                            i[s] = a * t[s];
                    for (; s >= 0;)
                        i[s] = a * t[s],
                            --s;
                    u[o] = i
                }
                return u
            }
            ,
            numeric.T = function (e, t) {
                this.x = e,
                    this.y = t
            }
            ,
            numeric.t = function (e, t) {
                return new numeric.T(e, t)
            }
            ,
            numeric.Tbinop = function (e, t, n, r, i) {
                numeric.indexOf;
                if ("string" != typeof i) {
                    var o;
                    i = "";
                    for (o in numeric)
                        numeric.hasOwnProperty(o) && (e.indexOf(o) >= 0 || t.indexOf(o) >= 0 || n.indexOf(o) >= 0 || r.indexOf(o) >= 0) && o.length > 1 && (i += "var " + o + " = numeric." + o + ";\n")
                }
                return numeric.compile(["y"], "var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n" + i + "\nif(x.y) {  if(y.y) {    return new numeric.T(" + r + ");\n  }\n  return new numeric.T(" + n + ");\n}\nif(y.y) {\n  return new numeric.T(" + t + ");\n}\nreturn new numeric.T(" + e + ");\n")
            }
            ,
            numeric.T.prototype.add = numeric.Tbinop("add(x.x,y.x)", "add(x.x,y.x),y.y", "add(x.x,y.x),x.y", "add(x.x,y.x),add(x.y,y.y)"),
            numeric.T.prototype.sub = numeric.Tbinop("sub(x.x,y.x)", "sub(x.x,y.x),neg(y.y)", "sub(x.x,y.x),x.y", "sub(x.x,y.x),sub(x.y,y.y)"),
            numeric.T.prototype.mul = numeric.Tbinop("mul(x.x,y.x)", "mul(x.x,y.x),mul(x.x,y.y)", "mul(x.x,y.x),mul(x.y,y.x)", "sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),
            numeric.T.prototype.reciprocal = function () {
                var e = numeric.mul
                    , t = numeric.div;
                if (this.y) {
                    var n = numeric.add(e(this.x, this.x), e(this.y, this.y));
                    return new numeric.T(t(this.x, n), t(numeric.neg(this.y), n))
                }
                return new T(t(1, this.x))
            }
            ,
            numeric.T.prototype.div = function e(t) {
                if (t instanceof numeric.T || (t = new numeric.T(t)),
                    t.y)
                    return this.mul(t.reciprocal());
                var e = numeric.div;
                return this.y ? new numeric.T(e(this.x, t.x), e(this.y, t.x)) : new numeric.T(e(this.x, t.x))
            }
            ,
            numeric.T.prototype.dot = numeric.Tbinop("dot(x.x,y.x)", "dot(x.x,y.x),dot(x.x,y.y)", "dot(x.x,y.x),dot(x.y,y.x)", "sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),
            numeric.T.prototype.transpose = function () {
                var e = numeric.transpose
                    , t = this.x
                    , n = this.y;
                return n ? new numeric.T(e(t), e(n)) : new numeric.T(e(t))
            }
            ,
            numeric.T.prototype.transjugate = function () {
                var e = numeric.transpose
                    , t = this.x
                    , n = this.y;
                return n ? new numeric.T(e(t), numeric.negtranspose(n)) : new numeric.T(e(t))
            }
            ,
            numeric.Tunop = function (e, t, n) {
                return "string" != typeof n && (n = ""),
                    numeric.compile("var x = this;\n" + n + "\nif(x.y) {  " + t + "\n}\n" + e + "\n")
            }
            ,
            numeric.T.prototype.exp = numeric.Tunop("return new numeric.T(ex);", "return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));", "var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),
            numeric.T.prototype.conj = numeric.Tunop("return new numeric.T(x.x);", "return new numeric.T(x.x,numeric.neg(x.y));"),
            numeric.T.prototype.neg = numeric.Tunop("return new numeric.T(neg(x.x));", "return new numeric.T(neg(x.x),neg(x.y));", "var neg = numeric.neg;"),
            numeric.T.prototype.sin = numeric.Tunop("return new numeric.T(numeric.sin(x.x));", "return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),
            numeric.T.prototype.cos = numeric.Tunop("return new numeric.T(numeric.cos(x.x));", "return x.exp().add(x.neg().exp()).div(2);"),
            numeric.T.prototype.abs = numeric.Tunop("return new numeric.T(numeric.abs(x.x));", "return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));", "var mul = numeric.mul;"),
            numeric.T.prototype.log = numeric.Tunop("return new numeric.T(numeric.log(x.x));", "var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),
            numeric.T.prototype.norm2 = numeric.Tunop("return numeric.norm2(x.x);", "var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),
            numeric.T.prototype.inv = function () {
                var e = this;
                if ("undefined" == typeof e.y)
                    return new numeric.T(numeric.inv(e.x));
                var t, n, r, i, o, s, a, c, l, u, d, t, n, r, p, h, f, m, g, y, v, b = e.x.length, x = numeric.identity(b), w = numeric.rep([b, b], 0), E = numeric.clone(e.x), _ = numeric.clone(e.y);
                for (t = 0; t < b; t++) {
                    for (f = E[t][t],
                        m = _[t][t],
                        p = f * f + m * m,
                        r = t,
                        n = t + 1; n < b; n++)
                        f = E[n][t],
                            m = _[n][t],
                            h = f * f + m * m,
                            h > p && (r = n,
                                p = h);
                    for (r !== t && (v = E[t],
                        E[t] = E[r],
                        E[r] = v,
                        v = _[t],
                        _[t] = _[r],
                        _[r] = v,
                        v = x[t],
                        x[t] = x[r],
                        x[r] = v,
                        v = w[t],
                        w[t] = w[r],
                        w[r] = v),
                        i = E[t],
                        o = _[t],
                        c = x[t],
                        l = w[t],
                        f = i[t],
                        m = o[t],
                        n = t + 1; n < b; n++)
                        g = i[n],
                            y = o[n],
                            i[n] = (g * f + y * m) / p,
                            o[n] = (y * f - g * m) / p;
                    for (n = 0; n < b; n++)
                        g = c[n],
                            y = l[n],
                            c[n] = (g * f + y * m) / p,
                            l[n] = (y * f - g * m) / p;
                    for (n = t + 1; n < b; n++) {
                        for (s = E[n],
                            a = _[n],
                            u = x[n],
                            d = w[n],
                            f = s[t],
                            m = a[t],
                            r = t + 1; r < b; r++)
                            g = i[r],
                                y = o[r],
                                s[r] -= g * f - y * m,
                                a[r] -= y * f + g * m;
                        for (r = 0; r < b; r++)
                            g = c[r],
                                y = l[r],
                                u[r] -= g * f - y * m,
                                d[r] -= y * f + g * m
                    }
                }
                for (t = b - 1; t > 0; t--)
                    for (c = x[t],
                        l = w[t],
                        n = t - 1; n >= 0; n--)
                        for (u = x[n],
                            d = w[n],
                            f = E[n][t],
                            m = _[n][t],
                            r = b - 1; r >= 0; r--)
                            g = c[r],
                                y = l[r],
                                u[r] -= f * g - m * y,
                                d[r] -= f * y + m * g;
                return new numeric.T(x, w)
            }
            ,
            numeric.T.prototype.get = function (e) {
                var t, n = this.x, r = this.y, i = 0, o = e.length;
                if (r) {
                    for (; i < o;)
                        t = e[i],
                            n = n[t],
                            r = r[t],
                            i++;
                    return new numeric.T(n, r)
                }
                for (; i < o;)
                    t = e[i],
                        n = n[t],
                        i++;
                return new numeric.T(n)
            }
            ,
            numeric.T.prototype.set = function (e, t) {
                var n, r = this.x, i = this.y, o = 0, s = e.length, a = t.x, c = t.y;
                if (0 === s)
                    return c ? this.y = c : i && (this.y = void 0),
                        this.x = r,
                        this;
                if (c) {
                    for (i || (i = numeric.rep(numeric.dim(r), 0),
                        this.y = i); o < s - 1;)
                        n = e[o],
                            r = r[n],
                            i = i[n],
                            o++;
                    return n = e[o],
                        r[n] = a,
                        i[n] = c,
                        this
                }
                if (i) {
                    for (; o < s - 1;)
                        n = e[o],
                            r = r[n],
                            i = i[n],
                            o++;
                    return n = e[o],
                        r[n] = a,
                        a instanceof Array ? i[n] = numeric.rep(numeric.dim(a), 0) : i[n] = 0,
                        this
                }
                for (; o < s - 1;)
                    n = e[o],
                        r = r[n],
                        o++;
                return n = e[o],
                    r[n] = a,
                    this
            }
            ,
            numeric.T.prototype.getRows = function (e, t) {
                var n, r, i = t - e + 1, o = Array(i), s = this.x, a = this.y;
                for (n = e; n <= t; n++)
                    o[n - e] = s[n];
                if (a) {
                    for (r = Array(i),
                        n = e; n <= t; n++)
                        r[n - e] = a[n];
                    return new numeric.T(o, r)
                }
                return new numeric.T(o)
            }
            ,
            numeric.T.prototype.setRows = function (e, t, n) {
                var r, i = this.x, o = this.y, s = n.x, a = n.y;
                for (r = e; r <= t; r++)
                    i[r] = s[r - e];
                if (a)
                    for (o || (o = numeric.rep(numeric.dim(i), 0),
                        this.y = o),
                        r = e; r <= t; r++)
                        o[r] = a[r - e];
                else if (o)
                    for (r = e; r <= t; r++)
                        o[r] = numeric.rep([s[r - e].length], 0);
                return this
            }
            ,
            numeric.T.prototype.getRow = function (e) {
                var t = this.x
                    , n = this.y;
                return n ? new numeric.T(t[e], n[e]) : new numeric.T(t[e])
            }
            ,
            numeric.T.prototype.setRow = function (e, t) {
                var n = this.x
                    , r = this.y
                    , i = t.x
                    , o = t.y;
                return n[e] = i,
                    o ? (r || (r = numeric.rep(numeric.dim(n), 0),
                        this.y = r),
                        r[e] = o) : r && (r = numeric.rep([i.length], 0)),
                    this
            }
            ,
            numeric.T.prototype.getBlock = function (e, t) {
                var n = this.x
                    , r = this.y
                    , i = numeric.getBlock;
                return r ? new numeric.T(i(n, e, t), i(r, e, t)) : new numeric.T(i(n, e, t))
            }
            ,
            numeric.T.prototype.setBlock = function (e, t, n) {
                n instanceof numeric.T || (n = new numeric.T(n));
                var r = this.x
                    , i = this.y
                    , o = numeric.setBlock
                    , s = n.x
                    , a = n.y;
                return a ? (i || (this.y = numeric.rep(numeric.dim(this), 0),
                    i = this.y),
                    o(r, e, t, s),
                    o(i, e, t, a),
                    this) : (o(r, e, t, s),
                        void (i && o(i, e, t, numeric.rep(numeric.dim(s), 0))))
            }
            ,
            numeric.T.rep = function (e, t) {
                var n = numeric.T;
                t instanceof n || (t = new n(t));
                var r = t.x
                    , i = t.y
                    , o = numeric.rep;
                return i ? new n(o(e, r), o(e, i)) : new n(o(e, r))
            }
            ,
            numeric.T.diag = function e(t) {
                t instanceof numeric.T || (t = new numeric.T(t));
                var n = t.x
                    , r = t.y
                    , e = numeric.diag;
                return r ? new numeric.T(e(n), e(r)) : new numeric.T(e(n))
            }
            ,
            numeric.T.eig = function () {
                if (this.y)
                    throw new Error("eig: not implemented for complex matrices.");
                return numeric.eig(this.x)
            }
            ,
            numeric.T.identity = function (e) {
                return new numeric.T(numeric.identity(e))
            }
            ,
            numeric.T.prototype.getDiag = function () {
                var e = numeric
                    , t = this.x
                    , n = this.y;
                return n ? new e.T(e.getDiag(t), e.getDiag(n)) : new e.T(e.getDiag(t))
            }
            ,
            numeric.house = function (e) {
                var t = numeric.clone(e)
                    , n = e[0] >= 0 ? 1 : -1
                    , r = n * numeric.norm2(e);
                t[0] += r;
                var i = numeric.norm2(t);
                if (0 === i)
                    throw new Error("eig: internal error");
                return numeric.div(t, i)
            }
            ,
            numeric.toUpperHessenberg = function (e) {
                var t = numeric.dim(e);
                if (2 !== t.length || t[0] !== t[1])
                    throw new Error("numeric: toUpperHessenberg() only works on square matrices");
                var n, r, i, o, s, a, c, l, u, d, p = t[0], h = numeric.clone(e), f = numeric.identity(p);
                for (r = 0; r < p - 2; r++) {
                    for (o = Array(p - r - 1),
                        n = r + 1; n < p; n++)
                        o[n - r - 1] = h[n][r];
                    if (numeric.norm2(o) > 0) {
                        for (s = numeric.house(o),
                            a = numeric.getBlock(h, [r + 1, r], [p - 1, p - 1]),
                            c = numeric.tensor(s, numeric.dot(s, a)),
                            n = r + 1; n < p; n++)
                            for (l = h[n],
                                u = c[n - r - 1],
                                i = r; i < p; i++)
                                l[i] -= 2 * u[i - r];
                        for (a = numeric.getBlock(h, [0, r + 1], [p - 1, p - 1]),
                            c = numeric.tensor(numeric.dot(a, s), s),
                            n = 0; n < p; n++)
                            for (l = h[n],
                                u = c[n],
                                i = r + 1; i < p; i++)
                                l[i] -= 2 * u[i - r - 1];
                        for (a = Array(p - r - 1),
                            n = r + 1; n < p; n++)
                            a[n - r - 1] = f[n];
                        for (c = numeric.tensor(s, numeric.dot(s, a)),
                            n = r + 1; n < p; n++)
                            for (d = f[n],
                                u = c[n - r - 1],
                                i = 0; i < p; i++)
                                d[i] -= 2 * u[i]
                    }
                }
                return {
                    H: h,
                    Q: f
                }
            }
            ,
            numeric.epsilon = 2.220446049250313e-16,
            numeric.QRFrancis = function (e, t) {
                "undefined" == typeof t && (t = 1e4),
                    e = numeric.clone(e);
                var n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x = (numeric.clone(e),
                    numeric.dim(e)), w = x[0], E = numeric.identity(w);
                if (w < 3)
                    return {
                        Q: E,
                        B: [[0, w - 1]]
                    };
                var _ = numeric.epsilon;
                for (b = 0; b < t; b++) {
                    for (y = 0; y < w - 1; y++)
                        if (Math.abs(e[y + 1][y]) < _ * (Math.abs(e[y][y]) + Math.abs(e[y + 1][y + 1]))) {
                            var S = numeric.QRFrancis(numeric.getBlock(e, [0, 0], [y, y]), t)
                                , k = numeric.QRFrancis(numeric.getBlock(e, [y + 1, y + 1], [w - 1, w - 1]), t);
                            for (h = Array(y + 1),
                                g = 0; g <= y; g++)
                                h[g] = E[g];
                            for (f = numeric.dot(S.Q, h),
                                g = 0; g <= y; g++)
                                E[g] = f[g];
                            for (h = Array(w - y - 1),
                                g = y + 1; g < w; g++)
                                h[g - y - 1] = E[g];
                            for (f = numeric.dot(k.Q, h),
                                g = y + 1; g < w; g++)
                                E[g] = f[g - y - 1];
                            return {
                                Q: E,
                                B: S.B.concat(numeric.add(k.B, y + 1))
                            }
                        }
                    if (i = e[w - 2][w - 2],
                        o = e[w - 2][w - 1],
                        s = e[w - 1][w - 2],
                        a = e[w - 1][w - 1],
                        l = i + a,
                        c = i * a - o * s,
                        u = numeric.getBlock(e, [0, 0], [2, 2]),
                        l * l >= 4 * c) {
                        var M, C;
                        M = .5 * (l + Math.sqrt(l * l - 4 * c)),
                            C = .5 * (l - Math.sqrt(l * l - 4 * c)),
                            u = numeric.add(numeric.sub(numeric.dot(u, u), numeric.mul(u, M + C)), numeric.diag(numeric.rep([3], M * C)))
                    } else
                        u = numeric.add(numeric.sub(numeric.dot(u, u), numeric.mul(u, l)), numeric.diag(numeric.rep([3], c)));
                    for (n = [u[0][0], u[1][0], u[2][0]],
                        r = numeric.house(n),
                        h = [e[0], e[1], e[2]],
                        f = numeric.tensor(r, numeric.dot(r, h)),
                        g = 0; g < 3; g++)
                        for (p = e[g],
                            m = f[g],
                            v = 0; v < w; v++)
                            p[v] -= 2 * m[v];
                    for (h = numeric.getBlock(e, [0, 0], [w - 1, 2]),
                        f = numeric.tensor(numeric.dot(h, r), r),
                        g = 0; g < w; g++)
                        for (p = e[g],
                            m = f[g],
                            v = 0; v < 3; v++)
                            p[v] -= 2 * m[v];
                    for (h = [E[0], E[1], E[2]],
                        f = numeric.tensor(r, numeric.dot(r, h)),
                        g = 0; g < 3; g++)
                        for (d = E[g],
                            m = f[g],
                            v = 0; v < w; v++)
                            d[v] -= 2 * m[v];
                    var I;
                    for (y = 0; y < w - 2; y++) {
                        for (v = y; v <= y + 1; v++)
                            if (Math.abs(e[v + 1][v]) < _ * (Math.abs(e[v][v]) + Math.abs(e[v + 1][v + 1]))) {
                                var S = numeric.QRFrancis(numeric.getBlock(e, [0, 0], [v, v]), t)
                                    , k = numeric.QRFrancis(numeric.getBlock(e, [v + 1, v + 1], [w - 1, w - 1]), t);
                                for (h = Array(v + 1),
                                    g = 0; g <= v; g++)
                                    h[g] = E[g];
                                for (f = numeric.dot(S.Q, h),
                                    g = 0; g <= v; g++)
                                    E[g] = f[g];
                                for (h = Array(w - v - 1),
                                    g = v + 1; g < w; g++)
                                    h[g - v - 1] = E[g];
                                for (f = numeric.dot(k.Q, h),
                                    g = v + 1; g < w; g++)
                                    E[g] = f[g - v - 1];
                                return {
                                    Q: E,
                                    B: S.B.concat(numeric.add(k.B, v + 1))
                                }
                            }
                        for (I = Math.min(w - 1, y + 3),
                            n = Array(I - y),
                            g = y + 1; g <= I; g++)
                            n[g - y - 1] = e[g][y];
                        for (r = numeric.house(n),
                            h = numeric.getBlock(e, [y + 1, y], [I, w - 1]),
                            f = numeric.tensor(r, numeric.dot(r, h)),
                            g = y + 1; g <= I; g++)
                            for (p = e[g],
                                m = f[g - y - 1],
                                v = y; v < w; v++)
                                p[v] -= 2 * m[v - y];
                        for (h = numeric.getBlock(e, [0, y + 1], [w - 1, I]),
                            f = numeric.tensor(numeric.dot(h, r), r),
                            g = 0; g < w; g++)
                            for (p = e[g],
                                m = f[g],
                                v = y + 1; v <= I; v++)
                                p[v] -= 2 * m[v - y - 1];
                        for (h = Array(I - y),
                            g = y + 1; g <= I; g++)
                            h[g - y - 1] = E[g];
                        for (f = numeric.tensor(r, numeric.dot(r, h)),
                            g = y + 1; g <= I; g++)
                            for (d = E[g],
                                m = f[g - y - 1],
                                v = 0; v < w; v++)
                                d[v] -= 2 * m[v]
                    }
                }
                throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")
            }
            ,
            numeric.eig = function (e, t) {
                var n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b = numeric.toUpperHessenberg(e), x = numeric.QRFrancis(b.H, t), w = numeric.T, E = e.length, _ = x.B, S = numeric.dot(x.Q, numeric.dot(b.H, numeric.transpose(x.Q))), k = new w(numeric.dot(x.Q, b.Q)), M = _.length, C = Math.sqrt;
                for (r = 0; r < M; r++)
                    if (n = _[r][0],
                        n === _[r][1])
                        ;
                    else {
                        if (o = n + 1,
                            s = S[n][n],
                            a = S[n][o],
                            c = S[o][n],
                            l = S[o][o],
                            0 === a && 0 === c)
                            continue;
                        u = -s - l,
                            d = s * l - a * c,
                            p = u * u - 4 * d,
                            p >= 0 ? (h = u < 0 ? -.5 * (u - C(p)) : -.5 * (u + C(p)),
                                y = (s - h) * (s - h) + a * a,
                                v = c * c + (l - h) * (l - h),
                                y > v ? (y = C(y),
                                    m = (s - h) / y,
                                    g = a / y) : (v = C(v),
                                        m = c / v,
                                        g = (l - h) / v),
                                i = new w([[g, -m], [m, g]]),
                                k.setRows(n, o, i.dot(k.getRows(n, o)))) : (h = -.5 * u,
                                    f = .5 * C(-p),
                                    y = (s - h) * (s - h) + a * a,
                                    v = c * c + (l - h) * (l - h),
                                    y > v ? (y = C(y + f * f),
                                        m = (s - h) / y,
                                        g = a / y,
                                        h = 0,
                                        f /= y) : (v = C(v + f * f),
                                            m = c / v,
                                            g = (l - h) / v,
                                            h = f / v,
                                            f = 0),
                                    i = new w([[g, -m], [m, g]], [[h, f], [f, -h]]),
                                    k.setRows(n, o, i.dot(k.getRows(n, o))))
                    }
                var I = k.dot(e).dot(k.transjugate())
                    , E = e.length
                    , T = numeric.T.identity(E);
                for (o = 0; o < E; o++)
                    if (o > 0)
                        for (r = o - 1; r >= 0; r--) {
                            var P = I.get([r, r])
                                , A = I.get([o, o]);
                            numeric.neq(P.x, A.x) || numeric.neq(P.y, A.y) ? (h = I.getRow(r).getBlock([r], [o - 1]),
                                f = T.getRow(o).getBlock([r], [o - 1]),
                                T.set([o, r], I.get([r, o]).neg().sub(h.dot(f)).div(P.sub(A)))) : T.setRow(o, T.getRow(r))
                        }
                for (o = 0; o < E; o++)
                    h = T.getRow(o),
                        T.setRow(o, h.div(h.norm2()));
                return T = T.transpose(),
                    T = k.transjugate().dot(T),
                    {
                        lambda: I.getDiag(),
                        E: T
                    }
            }
            ,
            numeric.ccsSparse = function (e) {
                var t, n, r, i, o = e.length, s = [];
                for (r = o - 1; r !== -1; --r) {
                    n = e[r];
                    for (i in n) {
                        for (i = parseInt(i); i >= s.length;)
                            s[s.length] = 0;
                        0 !== n[i] && s[i]++
                    }
                }
                var t = s.length
                    , a = Array(t + 1);
                for (a[0] = 0,
                    r = 0; r < t; ++r)
                    a[r + 1] = a[r] + s[r];
                var c = Array(a[t])
                    , l = Array(a[t]);
                for (r = o - 1; r !== -1; --r) {
                    n = e[r];
                    for (i in n)
                        0 !== n[i] && (s[i]-- ,
                            c[a[i] + s[i]] = r,
                            l[a[i] + s[i]] = n[i])
                }
                return [a, c, l]
            }
            ,
            numeric.ccsFull = function (e) {
                var t, n, r, i, o = e[0], s = e[1], a = e[2], c = numeric.ccsDim(e), l = c[0], u = c[1], d = numeric.rep([l, u], 0);
                for (t = 0; t < u; t++)
                    for (r = o[t],
                        i = o[t + 1],
                        n = r; n < i; ++n)
                        d[s[n]][t] = a[n];
                return d
            }
            ,
            numeric.ccsTSolve = function (e, t, n, r, i) {
                function o(e) {
                    var t;
                    if (0 === n[e]) {
                        for (n[e] = 1,
                            t = s[e]; t < s[e + 1]; ++t)
                            o(a[t]);
                        i[d] = e,
                            ++d
                    }
                }
                var s = e[0]
                    , a = e[1]
                    , c = e[2]
                    , l = s.length - 1
                    , u = Math.max
                    , d = 0;
                "undefined" == typeof r && (n = numeric.rep([l], 0)),
                    "undefined" == typeof r && (r = numeric.linspace(0, n.length - 1)),
                    "undefined" == typeof i && (i = []);
                var p, h, f, m, g, y, v;
                for (p = r.length - 1; p !== -1; --p)
                    o(r[p]);
                for (i.length = d,
                    p = i.length - 1; p !== -1; --p)
                    n[i[p]] = 0;
                for (p = r.length - 1; p !== -1; --p)
                    h = r[p],
                        n[h] = t[h];
                for (p = i.length - 1; p !== -1; --p) {
                    for (h = i[p],
                        f = s[h],
                        m = u(s[h + 1], f),
                        g = f; g !== m; ++g)
                        if (a[g] === h) {
                            n[h] /= c[g];
                            break
                        }
                    for (v = n[h],
                        g = f; g !== m; ++g)
                        y = a[g],
                            y !== h && (n[y] -= v * c[g])
                }
                return n
            }
            ,
            numeric.ccsDFS = function (e) {
                this.k = Array(e),
                    this.k1 = Array(e),
                    this.j = Array(e)
            }
            ,
            numeric.ccsDFS.prototype.dfs = function (e, t, n, r, i, o) {
                var s, a, c, l = 0, u = i.length, d = this.k, p = this.k1, h = this.j;
                if (0 === r[e])
                    for (r[e] = 1,
                        h[0] = e,
                        d[0] = a = t[e],
                        p[0] = c = t[e + 1]; ;)
                        if (a >= c) {
                            if (i[u] = h[l],
                                0 === l)
                                return;
                            ++u,
                                --l,
                                a = d[l],
                                c = p[l]
                        } else
                            s = o[n[a]],
                                0 === r[s] ? (r[s] = 1,
                                    d[l] = a,
                                    ++l,
                                    h[l] = s,
                                    a = t[s],
                                    p[l] = c = t[s + 1]) : ++a
            }
            ,
            numeric.ccsLPSolve = function (e, t, n, r, i, o, s) {
                var a, c, l, u, d, p, h, f, m, g = e[0], y = e[1], v = e[2], b = (g.length - 1,
                    t[0]), x = t[1], w = t[2];
                for (c = b[i],
                    l = b[i + 1],
                    r.length = 0,
                    a = c; a < l; ++a)
                    s.dfs(o[x[a]], g, y, n, r, o);
                for (a = r.length - 1; a !== -1; --a)
                    n[r[a]] = 0;
                for (a = c; a !== l; ++a)
                    u = o[x[a]],
                        n[u] = w[a];
                for (a = r.length - 1; a !== -1; --a) {
                    for (u = r[a],
                        d = g[u],
                        p = g[u + 1],
                        h = d; h < p; ++h)
                        if (o[y[h]] === u) {
                            n[u] /= v[h];
                            break
                        }
                    for (m = n[u],
                        h = d; h < p; ++h)
                        f = o[y[h]],
                            f !== u && (n[f] -= m * v[h])
                }
                return n
            }
            ,
            numeric.ccsLUP1 = function (e, t) {
                var n, r, i, o, s, a, c, l = e[0].length - 1, u = [numeric.rep([l + 1], 0), [], []], d = [numeric.rep([l + 1], 0), [], []], p = u[0], h = u[1], f = u[2], m = d[0], g = d[1], y = d[2], v = numeric.rep([l], 0), b = numeric.rep([l], 0), x = numeric.ccsLPSolve, w = (Math.max,
                    Math.abs), E = numeric.linspace(0, l - 1), _ = numeric.linspace(0, l - 1), S = new numeric.ccsDFS(l);
                for ("undefined" == typeof t && (t = 1),
                    n = 0; n < l; ++n) {
                    for (x(u, e, v, b, n, _, S),
                        o = -1,
                        s = -1,
                        r = b.length - 1; r !== -1; --r)
                        i = b[r],
                            i <= n || (a = w(v[i]),
                                a > o && (s = i,
                                    o = a));
                    for (w(v[n]) < t * o && (r = E[n],
                        o = E[s],
                        E[n] = o,
                        _[o] = n,
                        E[s] = r,
                        _[r] = s,
                        o = v[n],
                        v[n] = v[s],
                        v[s] = o),
                        o = p[n],
                        s = m[n],
                        c = v[n],
                        h[o] = E[n],
                        f[o] = 1,
                        ++o,
                        r = b.length - 1; r !== -1; --r)
                        i = b[r],
                            a = v[i],
                            b[r] = 0,
                            v[i] = 0,
                            i <= n ? (g[s] = i,
                                y[s] = a,
                                ++s) : (h[o] = E[i],
                                    f[o] = a / c,
                                    ++o);
                    p[n + 1] = o,
                        m[n + 1] = s
                }
                for (r = h.length - 1; r !== -1; --r)
                    h[r] = _[h[r]];
                return {
                    L: u,
                    U: d,
                    P: E,
                    Pinv: _
                }
            }
            ,
            numeric.ccsDFS0 = function (e) {
                this.k = Array(e),
                    this.k1 = Array(e),
                    this.j = Array(e)
            }
            ,
            numeric.ccsDFS0.prototype.dfs = function (e, t, n, r, i, o, s) {
                var a, c, l, u = 0, d = i.length, p = this.k, h = this.k1, f = this.j;
                if (0 === r[e])
                    for (r[e] = 1,
                        f[0] = e,
                        p[0] = c = t[o[e]],
                        h[0] = l = t[o[e] + 1]; ;) {
                        if (isNaN(c))
                            throw new Error("Ow!");
                        if (c >= l) {
                            if (i[d] = o[f[u]],
                                0 === u)
                                return;
                            ++d,
                                --u,
                                c = p[u],
                                l = h[u]
                        } else
                            a = n[c],
                                0 === r[a] ? (r[a] = 1,
                                    p[u] = c,
                                    ++u,
                                    f[u] = a,
                                    a = o[a],
                                    c = t[a],
                                    h[u] = l = t[a + 1]) : ++c
                    }
            }
            ,
            numeric.ccsLPSolve0 = function (e, t, n, r, i, o, s, a) {
                var c, l, u, d, p, h, f, m, g, y = e[0], v = e[1], b = e[2], x = (y.length - 1,
                    t[0]), w = t[1], E = t[2];
                for (l = x[i],
                    u = x[i + 1],
                    r.length = 0,
                    c = l; c < u; ++c)
                    a.dfs(w[c], y, v, n, r, o, s);
                for (c = r.length - 1; c !== -1; --c)
                    d = r[c],
                        n[s[d]] = 0;
                for (c = l; c !== u; ++c)
                    d = w[c],
                        n[d] = E[c];
                for (c = r.length - 1; c !== -1; --c) {
                    for (d = r[c],
                        m = s[d],
                        p = y[d],
                        h = y[d + 1],
                        f = p; f < h; ++f)
                        if (v[f] === m) {
                            n[m] /= b[f];
                            break
                        }
                    for (g = n[m],
                        f = p; f < h; ++f)
                        n[v[f]] -= g * b[f];
                    n[m] = g
                }
            }
            ,
            numeric.ccsLUP0 = function (e, t) {
                var n, r, i, o, s, a, c, l = e[0].length - 1, u = [numeric.rep([l + 1], 0), [], []], d = [numeric.rep([l + 1], 0), [], []], p = u[0], h = u[1], f = u[2], m = d[0], g = d[1], y = d[2], v = numeric.rep([l], 0), b = numeric.rep([l], 0), x = numeric.ccsLPSolve0, w = (Math.max,
                    Math.abs), E = numeric.linspace(0, l - 1), _ = numeric.linspace(0, l - 1), S = new numeric.ccsDFS0(l);
                for ("undefined" == typeof t && (t = 1),
                    n = 0; n < l; ++n) {
                    for (x(u, e, v, b, n, _, E, S),
                        o = -1,
                        s = -1,
                        r = b.length - 1; r !== -1; --r)
                        i = b[r],
                            i <= n || (a = w(v[E[i]]),
                                a > o && (s = i,
                                    o = a));
                    for (w(v[E[n]]) < t * o && (r = E[n],
                        o = E[s],
                        E[n] = o,
                        _[o] = n,
                        E[s] = r,
                        _[r] = s),
                        o = p[n],
                        s = m[n],
                        c = v[E[n]],
                        h[o] = E[n],
                        f[o] = 1,
                        ++o,
                        r = b.length - 1; r !== -1; --r)
                        i = b[r],
                            a = v[E[i]],
                            b[r] = 0,
                            v[E[i]] = 0,
                            i <= n ? (g[s] = i,
                                y[s] = a,
                                ++s) : (h[o] = E[i],
                                    f[o] = a / c,
                                    ++o);
                    p[n + 1] = o,
                        m[n + 1] = s
                }
                for (r = h.length - 1; r !== -1; --r)
                    h[r] = _[h[r]];
                return {
                    L: u,
                    U: d,
                    P: E,
                    Pinv: _
                }
            }
            ,
            numeric.ccsLUP = numeric.ccsLUP0,
            numeric.ccsDim = function (e) {
                return [numeric.sup(e[1]) + 1, e[0].length - 1]
            }
            ,
            numeric.ccsGetBlock = function (e, t, n) {
                var r = numeric.ccsDim(e)
                    , i = r[0]
                    , o = r[1];
                "undefined" == typeof t ? t = numeric.linspace(0, i - 1) : "number" == typeof t && (t = [t]),
                    "undefined" == typeof n ? n = numeric.linspace(0, o - 1) : "number" == typeof n && (n = [n]);
                var s, a, c, l, u, d = t.length, p = n.length, h = numeric.rep([o], 0), f = [], m = [], g = [h, f, m], y = e[0], v = e[1], b = e[2], x = numeric.rep([i], 0), w = 0, E = numeric.rep([i], 0);
                for (a = 0; a < p; ++a) {
                    l = n[a];
                    var _ = y[l]
                        , S = y[l + 1];
                    for (s = _; s < S; ++s)
                        c = v[s],
                            E[c] = 1,
                            x[c] = b[s];
                    for (s = 0; s < d; ++s)
                        u = t[s],
                            E[u] && (f[w] = s,
                                m[w] = x[t[s]],
                                ++w);
                    for (s = _; s < S; ++s)
                        c = v[s],
                            E[c] = 0;
                    h[a + 1] = w
                }
                return g
            }
            ,
            numeric.ccsDot = function (e, t) {
                var n, r, i, o, s, a, c, l, u, d, p, h = e[0], f = e[1], m = e[2], g = t[0], y = t[1], v = t[2], b = numeric.ccsDim(e), x = numeric.ccsDim(t), w = b[0], E = (b[1],
                    x[1]), _ = numeric.rep([w], 0), S = numeric.rep([w], 0), k = Array(w), M = numeric.rep([E], 0), C = [], I = [], T = [M, C, I];
                for (i = 0; i !== E; ++i) {
                    for (o = g[i],
                        s = g[i + 1],
                        u = 0,
                        r = o; r < s; ++r)
                        for (d = y[r],
                            p = v[r],
                            a = h[d],
                            c = h[d + 1],
                            n = a; n < c; ++n)
                            l = f[n],
                                0 === S[l] && (k[u] = l,
                                    S[l] = 1,
                                    u += 1),
                                _[l] = _[l] + m[n] * p;
                    for (o = M[i],
                        s = o + u,
                        M[i + 1] = s,
                        r = u - 1; r !== -1; --r)
                        p = o + r,
                            n = k[r],
                            C[p] = n,
                            I[p] = _[n],
                            S[n] = 0,
                            _[n] = 0;
                    M[i + 1] = M[i] + u
                }
                return T
            }
            ,
            numeric.ccsLUPSolve = function (e, t) {
                var n = e.L
                    , r = e.U
                    , i = (e.P,
                        t[0])
                    , o = !1;
                "object" != typeof i && (t = [[0, t.length], numeric.linspace(0, t.length - 1), t],
                    i = t[0],
                    o = !0);
                var s, a, c, l, u, d, p = t[1], h = t[2], f = n[0].length - 1, m = i.length - 1, g = numeric.rep([f], 0), y = Array(f), v = numeric.rep([f], 0), b = Array(f), x = numeric.rep([m + 1], 0), w = [], E = [], _ = numeric.ccsTSolve, S = 0;
                for (s = 0; s < m; ++s) {
                    for (u = 0,
                        c = i[s],
                        l = i[s + 1],
                        a = c; a < l; ++a)
                        d = e.Pinv[p[a]],
                            b[u] = d,
                            v[d] = h[a],
                            ++u;
                    for (b.length = u,
                        _(n, v, g, b, y),
                        a = b.length - 1; a !== -1; --a)
                        v[b[a]] = 0;
                    if (_(r, g, v, y, b),
                        o)
                        return v;
                    for (a = y.length - 1; a !== -1; --a)
                        g[y[a]] = 0;
                    for (a = b.length - 1; a !== -1; --a)
                        d = b[a],
                            w[S] = d,
                            E[S] = v[d],
                            v[d] = 0,
                            ++S;
                    x[s + 1] = S
                }
                return [x, w, E]
            }
            ,
            numeric.ccsbinop = function (e, t) {
                return "undefined" == typeof t && (t = ""),
                    numeric.compile("X", "Y", "var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n" + t + "for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n" + e + "\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")
            }
            ,
            function () {
                var k, A, B, C;
                for (k in numeric.ops2)
                    A = isFinite(eval("1" + numeric.ops2[k] + "0")) ? "[Y[0],Y[1],numeric." + k + "(X,Y[2])]" : "NaN",
                        B = isFinite(eval("0" + numeric.ops2[k] + "1")) ? "[X[0],X[1],numeric." + k + "(X[2],Y)]" : "NaN",
                        C = isFinite(eval("1" + numeric.ops2[k] + "0")) && isFinite(eval("0" + numeric.ops2[k] + "1")) ? "numeric.ccs" + k + "MM(X,Y)" : "NaN",
                        numeric["ccs" + k + "MM"] = numeric.ccsbinop("zk = xk " + numeric.ops2[k] + "yk;"),
                        numeric["ccs" + k] = numeric.compile("X", "Y", 'if(typeof X === "number") return ' + A + ';\nif(typeof Y === "number") return ' + B + ";\nreturn " + C + ";\n")
            }(),
            numeric.ccsScatter = function (e) {
                var t, n = e[0], r = e[1], i = e[2], o = numeric.sup(r) + 1, s = n.length, a = numeric.rep([o], 0), c = Array(s), l = Array(s), u = numeric.rep([o], 0);
                for (t = 0; t < s; ++t)
                    u[r[t]]++;
                for (t = 0; t < o; ++t)
                    a[t + 1] = a[t] + u[t];
                var d, p, h = a.slice(0);
                for (t = 0; t < s; ++t)
                    p = r[t],
                        d = h[p],
                        c[d] = n[t],
                        l[d] = i[t],
                        h[p] = h[p] + 1;
                return [a, c, l]
            }
            ,
            numeric.ccsGather = function (e) {
                var t, n, r, i, o, s = e[0], a = e[1], c = e[2], l = s.length - 1, u = a.length, d = Array(u), p = Array(u), h = Array(u);
                for (o = 0,
                    t = 0; t < l; ++t)
                    for (r = s[t],
                        i = s[t + 1],
                        n = r; n !== i; ++n)
                        p[o] = t,
                            d[o] = a[n],
                            h[o] = c[n],
                            ++o;
                return [d, p, h]
            }
            ,
            numeric.sdim = function e(t, n, r) {
                if ("undefined" == typeof n && (n = []),
                    "object" != typeof t)
                    return n;
                "undefined" == typeof r && (r = 0),
                    r in n || (n[r] = 0),
                    t.length > n[r] && (n[r] = t.length);
                var i;
                for (i in t)
                    t.hasOwnProperty(i) && e(t[i], n, r + 1);
                return n
            }
            ,
            numeric.sclone = function e(t, n, r) {
                "undefined" == typeof n && (n = 0),
                    "undefined" == typeof r && (r = numeric.sdim(t).length);
                var i, o = Array(t.length);
                if (n === r - 1) {
                    for (i in t)
                        t.hasOwnProperty(i) && (o[i] = t[i]);
                    return o
                }
                for (i in t)
                    t.hasOwnProperty(i) && (o[i] = e(t[i], n + 1, r));
                return o
            }
            ,
            numeric.sdiag = function (e) {
                var t, n, r = e.length, i = Array(r);
                for (t = r - 1; t >= 1; t -= 2)
                    n = t - 1,
                        i[t] = [],
                        i[t][t] = e[t],
                        i[n] = [],
                        i[n][n] = e[n];
                return 0 === t && (i[0] = [],
                    i[0][0] = e[t]),
                    i
            }
            ,
            numeric.sidentity = function (e) {
                return numeric.sdiag(numeric.rep([e], 1))
            }
            ,
            numeric.stranspose = function (e) {
                var t, n, r, i = [];
                e.length;
                for (t in e)
                    if (e.hasOwnProperty(t)) {
                        r = e[t];
                        for (n in r)
                            r.hasOwnProperty(n) && ("object" != typeof i[n] && (i[n] = []),
                                i[n][t] = r[n])
                    }
                return i
            }
            ,
            numeric.sLUP = function (e, t) {
                throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")
            }
            ,
            numeric.sdotMM = function (e, t) {
                var n, r, i, o, s, a, c, l = e.length, u = (t.length,
                    numeric.stranspose(t)), d = u.length, p = Array(l);
                for (i = l - 1; i >= 0; i--) {
                    for (c = [],
                        n = e[i],
                        s = d - 1; s >= 0; s--) {
                        a = 0,
                            r = u[s];
                        for (o in n)
                            n.hasOwnProperty(o) && o in r && (a += n[o] * r[o]);
                        a && (c[s] = a)
                    }
                    p[i] = c
                }
                return p
            }
            ,
            numeric.sdotMV = function (e, t) {
                var n, r, i, o, s = e.length, a = Array(s);
                for (r = s - 1; r >= 0; r--) {
                    n = e[r],
                        o = 0;
                    for (i in n)
                        n.hasOwnProperty(i) && t[i] && (o += n[i] * t[i]);
                    o && (a[r] = o)
                }
                return a
            }
            ,
            numeric.sdotVM = function (e, t) {
                var n, r, i, o, s = [];
                for (n in e)
                    if (e.hasOwnProperty(n)) {
                        i = t[n],
                            o = e[n];
                        for (r in i)
                            i.hasOwnProperty(r) && (s[r] || (s[r] = 0),
                                s[r] += o * i[r])
                    }
                return s
            }
            ,
            numeric.sdotVV = function (e, t) {
                var n, r = 0;
                for (n in e)
                    e[n] && t[n] && (r += e[n] * t[n]);
                return r
            }
            ,
            numeric.sdot = function (e, t) {
                var n = numeric.sdim(e).length
                    , r = numeric.sdim(t).length
                    , i = 1e3 * n + r;
                switch (i) {
                    case 0:
                        return e * t;
                    case 1001:
                        return numeric.sdotVV(e, t);
                    case 2001:
                        return numeric.sdotMV(e, t);
                    case 1002:
                        return numeric.sdotVM(e, t);
                    case 2002:
                        return numeric.sdotMM(e, t);
                    default:
                        throw new Error("numeric.sdot not implemented for tensors of order " + n + " and " + r)
                }
            }
            ,
            numeric.sscatter = function (e) {
                var t, n, r, i, o = e[0].length, s = e.length, a = [];
                for (n = o - 1; n >= 0; --n)
                    if (e[s - 1][n]) {
                        for (i = a,
                            r = 0; r < s - 2; r++)
                            t = e[r][n],
                                i[t] || (i[t] = []),
                                i = i[t];
                        i[e[r][n]] = e[r + 1][n]
                    }
                return a
            }
            ,
            numeric.sgather = function e(t, n, r) {
                "undefined" == typeof n && (n = []),
                    "undefined" == typeof r && (r = []);
                var i, o, s;
                i = r.length;
                for (o in t)
                    if (t.hasOwnProperty(o))
                        if (r[i] = parseInt(o),
                            s = t[o],
                            "number" == typeof s) {
                            if (s) {
                                if (0 === n.length)
                                    for (o = i + 1; o >= 0; --o)
                                        n[o] = [];
                                for (o = i; o >= 0; --o)
                                    n[o].push(r[o]);
                                n[i + 1].push(s)
                            }
                        } else
                            e(s, n, r);
                return r.length > i && r.pop(),
                    n
            }
            ,
            numeric.cLU = function (e) {
                var t, n, r, i, o, s, a = e[0], c = e[1], l = e[2], u = a.length, d = 0;
                for (t = 0; t < u; t++)
                    a[t] > d && (d = a[t]);
                d++;
                var p, h, f, m = Array(d), g = Array(d), y = numeric.rep([d], 1 / 0), v = numeric.rep([d], -(1 / 0));
                for (r = 0; r < u; r++)
                    t = a[r],
                        n = c[r],
                        n < y[t] && (y[t] = n),
                        n > v[t] && (v[t] = n);
                for (t = 0; t < d - 1; t++)
                    v[t] > v[t + 1] && (v[t + 1] = v[t]);
                for (t = d - 1; t >= 1; t--)
                    y[t] < y[t - 1] && (y[t - 1] = y[t]);
                var b = 0
                    , x = 0;
                for (t = 0; t < d; t++)
                    g[t] = numeric.rep([v[t] - y[t] + 1], 0),
                        m[t] = numeric.rep([t - y[t]], 0),
                        b += t - y[t] + 1,
                        x += v[t] - t + 1;
                for (r = 0; r < u; r++)
                    t = a[r],
                        g[t][c[r] - y[t]] = l[r];
                for (t = 0; t < d - 1; t++)
                    for (i = t - y[t],
                        p = g[t],
                        n = t + 1; y[n] <= t && n < d; n++)
                        if (o = t - y[n],
                            s = v[t] - t,
                            h = g[n],
                            f = h[o] / p[i]) {
                            for (r = 1; r <= s; r++)
                                h[r + o] -= f * p[r + i];
                            m[n][t - y[n]] = f
                        }
                var u, w, E, p = [], h = [], _ = [], S = [], k = [], M = [];
                for (u = 0,
                    w = 0,
                    t = 0; t < d; t++) {
                    for (i = y[t],
                        o = v[t],
                        E = g[t],
                        n = t; n <= o; n++)
                        E[n - i] && (p[u] = t,
                            h[u] = n,
                            _[u] = E[n - i],
                            u++);
                    for (E = m[t],
                        n = i; n < t; n++)
                        E[n - i] && (S[w] = t,
                            k[w] = n,
                            M[w] = E[n - i],
                            w++);
                    S[w] = t,
                        k[w] = t,
                        M[w] = 1,
                        w++
                }
                return {
                    U: [p, h, _],
                    L: [S, k, M]
                }
            }
            ,
            numeric.cLUsolve = function (e, t) {
                var n, r, i = e.L, o = e.U, s = numeric.clone(t), a = i[0], c = i[1], l = i[2], u = o[0], d = o[1], p = o[2], h = u.length, f = (a.length,
                    s.length);
                for (r = 0,
                    n = 0; n < f; n++) {
                    for (; c[r] < n;)
                        s[n] -= l[r] * s[c[r]],
                            r++;
                    r++
                }
                for (r = h - 1,
                    n = f - 1; n >= 0; n--) {
                    for (; d[r] > n;)
                        s[n] -= p[r] * s[d[r]],
                            r--;
                    s[n] /= p[r],
                        r--
                }
                return s
            }
            ,
            numeric.cgrid = function (e, t) {
                "number" == typeof e && (e = [e, e]);
                var n, r, i, o = numeric.rep(e, -1);
                if ("function" != typeof t)
                    switch (t) {
                        case "L":
                            t = function (t, n) {
                                return t >= e[0] / 2 || n < e[1] / 2
                            }
                                ;
                            break;
                        default:
                            t = function (e, t) {
                                return !0
                            }
                    }
                for (i = 0,
                    n = 1; n < e[0] - 1; n++)
                    for (r = 1; r < e[1] - 1; r++)
                        t(n, r) && (o[n][r] = i,
                            i++);
                return o
            }
            ,
            numeric.cdelsq = function (e) {
                var t, n, r, i, o, s = [[-1, 0], [0, -1], [0, 1], [1, 0]], a = numeric.dim(e), c = a[0], l = a[1], u = [], d = [], p = [];
                for (t = 1; t < c - 1; t++)
                    for (n = 1; n < l - 1; n++)
                        if (!(e[t][n] < 0)) {
                            for (r = 0; r < 4; r++)
                                i = t + s[r][0],
                                    o = n + s[r][1],
                                    e[i][o] < 0 || (u.push(e[t][n]),
                                        d.push(e[i][o]),
                                        p.push(-1));
                            u.push(e[t][n]),
                                d.push(e[t][n]),
                                p.push(4)
                        }
                return [u, d, p]
            }
            ,
            numeric.cdotMV = function (e, t) {
                var n, r, i, o = e[0], s = e[1], a = e[2], c = o.length;
                for (i = 0,
                    r = 0; r < c; r++)
                    o[r] > i && (i = o[r]);
                for (i++ ,
                    n = numeric.rep([i], 0),
                    r = 0; r < c; r++)
                    n[o[r]] += a[r] * t[s[r]];
                return n
            }
            ,
            numeric.Spline = function (e, t, n, r, i) {
                this.x = e,
                    this.yl = t,
                    this.yr = n,
                    this.kl = r,
                    this.kr = i
            }
            ,
            numeric.Spline.prototype._at = function (e, t) {
                var e, n, r, i, o = this.x, s = this.yl, a = this.yr, c = this.kl, l = this.kr, u = numeric.add, d = numeric.sub, p = numeric.mul;
                n = d(p(c[t], o[t + 1] - o[t]), d(a[t + 1], s[t])),
                    r = u(p(l[t + 1], o[t] - o[t + 1]), d(a[t + 1], s[t])),
                    i = (e - o[t]) / (o[t + 1] - o[t]);
                var h = i * (1 - i);
                return u(u(u(p(1 - i, s[t]), p(i, a[t + 1])), p(n, h * (1 - i))), p(r, h * i))
            }
            ,
            numeric.Spline.prototype.at = function (e) {
                if ("number" == typeof e) {
                    var t, n, r, i = this.x, o = i.length, s = Math.floor;
                    for (t = 0,
                        n = o - 1; n - t > 1;)
                        r = s((t + n) / 2),
                            i[r] <= e ? t = r : n = r;
                    return this._at(e, t)
                }
                var a, o = e.length, c = Array(o);
                for (a = o - 1; a !== -1; --a)
                    c[a] = this.at(e[a]);
                return c
            }
            ,
            numeric.Spline.prototype.diff = function () {
                var e, t, n, r = this.x, i = this.yl, o = this.yr, s = this.kl, a = this.kr, c = i.length, l = s, u = a, d = Array(c), p = Array(c), h = numeric.add, f = numeric.mul, m = numeric.div, g = numeric.sub;
                for (e = c - 1; e !== -1; --e)
                    t = r[e + 1] - r[e],
                        n = g(o[e + 1], i[e]),
                        d[e] = m(h(f(n, 6), f(s[e], -4 * t), f(a[e + 1], -2 * t)), t * t),
                        p[e + 1] = m(h(f(n, -6), f(s[e], 2 * t), f(a[e + 1], 4 * t)), t * t);
                return new numeric.Spline(r, l, u, d, p)
            }
            ,
            numeric.Spline.prototype.roots = function () {
                function e(e) {
                    return e * e
                }
                var t = []
                    , n = this.x
                    , r = this.yl
                    , i = this.yr
                    , o = this.kl
                    , s = this.kr;
                "number" == typeof r[0] && (r = [r],
                    i = [i],
                    o = [o],
                    s = [s]);
                var a, c, l, u, d, p, h, f, m, g, y, v, b, x, w, E, _, S, k, M, C, I, T, P, A = r.length, L = n.length - 1, t = Array(A), O = Math.sqrt;
                for (a = 0; a !== A; ++a) {
                    for (u = r[a],
                        d = i[a],
                        p = o[a],
                        h = s[a],
                        f = [],
                        c = 0; c !== L; c++) {
                        for (c > 0 && d[c] * u[c] < 0 && f.push(n[c]),
                            E = n[c + 1] - n[c],
                            _ = n[c],
                            y = u[c],
                            v = d[c + 1],
                            m = p[c] / E,
                            g = h[c + 1] / E,
                            w = e(m - g + 3 * (y - v)) + 12 * g * y,
                            b = g + 3 * y + 2 * m - 3 * v,
                            x = 3 * (g + m + 2 * (y - v)),
                            w <= 0 ? (k = b / x,
                                S = k > n[c] && k < n[c + 1] ? [n[c], k, n[c + 1]] : [n[c], n[c + 1]]) : (k = (b - O(w)) / x,
                                    M = (b + O(w)) / x,
                                    S = [n[c]],
                                    k > n[c] && k < n[c + 1] && S.push(k),
                                    M > n[c] && M < n[c + 1] && S.push(M),
                                    S.push(n[c + 1])),
                            I = S[0],
                            k = this._at(I, c),
                            l = 0; l < S.length - 1; l++)
                            if (T = S[l + 1],
                                M = this._at(T, c),
                                0 !== k)
                                if (0 === M || k * M > 0)
                                    I = T,
                                        k = M;
                                else {
                                    for (var D = 0; ;) {
                                        if (P = (k * T - M * I) / (k - M),
                                            P <= I || P >= T)
                                            break;
                                        if (C = this._at(P, c),
                                            C * M > 0)
                                            T = P,
                                                M = C,
                                                D === -1 && (k *= .5),
                                                D = -1;
                                        else {
                                            if (!(C * k > 0))
                                                break;
                                            I = P,
                                                k = C,
                                                1 === D && (M *= .5),
                                                D = 1
                                        }
                                    }
                                    f.push(P),
                                        I = S[l + 1],
                                        k = this._at(I, c)
                                }
                            else
                                f.push(I),
                                    I = T,
                                    k = M;
                        0 === M && f.push(T)
                    }
                    t[a] = f
                }
                return "number" == typeof this.yl[0] ? t[0] : t
            }
            ,
            numeric.spline = function (e, t, n, r) {
                var i, o = e.length, s = [], a = [], c = [], l = numeric.sub, u = numeric.mul, d = numeric.add;
                for (i = o - 2; i >= 0; i--)
                    a[i] = e[i + 1] - e[i],
                        c[i] = l(t[i + 1], t[i]);
                "string" != typeof n && "string" != typeof r || (n = r = "periodic");
                var p = [[], [], []];
                switch (typeof n) {
                    case "undefined":
                        s[0] = u(3 / (a[0] * a[0]), c[0]),
                            p[0].push(0, 0),
                            p[1].push(0, 1),
                            p[2].push(2 / a[0], 1 / a[0]);
                        break;
                    case "string":
                        s[0] = d(u(3 / (a[o - 2] * a[o - 2]), c[o - 2]), u(3 / (a[0] * a[0]), c[0])),
                            p[0].push(0, 0, 0),
                            p[1].push(o - 2, 0, 1),
                            p[2].push(1 / a[o - 2], 2 / a[o - 2] + 2 / a[0], 1 / a[0]);
                        break;
                    default:
                        s[0] = n,
                            p[0].push(0),
                            p[1].push(0),
                            p[2].push(1)
                }
                for (i = 1; i < o - 1; i++)
                    s[i] = d(u(3 / (a[i - 1] * a[i - 1]), c[i - 1]), u(3 / (a[i] * a[i]), c[i])),
                        p[0].push(i, i, i),
                        p[1].push(i - 1, i, i + 1),
                        p[2].push(1 / a[i - 1], 2 / a[i - 1] + 2 / a[i], 1 / a[i]);
                switch (typeof r) {
                    case "undefined":
                        s[o - 1] = u(3 / (a[o - 2] * a[o - 2]), c[o - 2]),
                            p[0].push(o - 1, o - 1),
                            p[1].push(o - 2, o - 1),
                            p[2].push(1 / a[o - 2], 2 / a[o - 2]);
                        break;
                    case "string":
                        p[1][p[1].length - 1] = 0;
                        break;
                    default:
                        s[o - 1] = r,
                            p[0].push(o - 1),
                            p[1].push(o - 1),
                            p[2].push(1)
                }
                s = "number" != typeof s[0] ? numeric.transpose(s) : [s];
                var h = Array(s.length);
                if ("string" == typeof n)
                    for (i = h.length - 1; i !== -1; --i)
                        h[i] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(p)), s[i]),
                            h[i][o - 1] = h[i][0];
                else
                    for (i = h.length - 1; i !== -1; --i)
                        h[i] = numeric.cLUsolve(numeric.cLU(p), s[i]);
                return h = "number" == typeof t[0] ? h[0] : numeric.transpose(h),
                    new numeric.Spline(e, t, t, h, h)
            }
            ,
            numeric.fftpow2 = function e(t, n) {
                var r = t.length;
                if (1 !== r) {
                    var i, o, s = Math.cos, a = Math.sin, c = Array(r / 2), l = Array(r / 2), u = Array(r / 2), d = Array(r / 2);
                    for (o = r / 2,
                        i = r - 1; i !== -1; --i)
                        --o,
                            u[o] = t[i],
                            d[o] = n[i],
                            --i,
                            c[o] = t[i],
                            l[o] = n[i];
                    e(c, l),
                        e(u, d),
                        o = r / 2;
                    var p, h, f, m = -6.283185307179586 / r;
                    for (i = r - 1; i !== -1; --i)
                        --o,
                            o === -1 && (o = r / 2 - 1),
                            p = m * i,
                            h = s(p),
                            f = a(p),
                            t[i] = c[o] + h * u[o] - f * d[o],
                            n[i] = l[o] + h * d[o] + f * u[o]
                }
            }
            ,
            numeric._ifftpow2 = function e(t, n) {
                var r = t.length;
                if (1 !== r) {
                    var i, o, s = Math.cos, a = Math.sin, c = Array(r / 2), l = Array(r / 2), u = Array(r / 2), d = Array(r / 2);
                    for (o = r / 2,
                        i = r - 1; i !== -1; --i)
                        --o,
                            u[o] = t[i],
                            d[o] = n[i],
                            --i,
                            c[o] = t[i],
                            l[o] = n[i];
                    e(c, l),
                        e(u, d),
                        o = r / 2;
                    var p, h, f, m = 6.283185307179586 / r;
                    for (i = r - 1; i !== -1; --i)
                        --o,
                            o === -1 && (o = r / 2 - 1),
                            p = m * i,
                            h = s(p),
                            f = a(p),
                            t[i] = c[o] + h * u[o] - f * d[o],
                            n[i] = l[o] + h * d[o] + f * u[o]
                }
            }
            ,
            numeric.ifftpow2 = function (e, t) {
                numeric._ifftpow2(e, t),
                    numeric.diveq(e, e.length),
                    numeric.diveq(t, t.length)
            }
            ,
            numeric.convpow2 = function (e, t, n, r) {
                numeric.fftpow2(e, t),
                    numeric.fftpow2(n, r);
                var i, o, s, a, c, l = e.length;
                for (i = l - 1; i !== -1; --i)
                    o = e[i],
                        a = t[i],
                        s = n[i],
                        c = r[i],
                        e[i] = o * s - a * c,
                        t[i] = o * c + a * s;
                numeric.ifftpow2(e, t)
            }
            ,
            numeric.T.prototype.fft = function () {
                var e, t, n = this.x, r = this.y, i = n.length, o = Math.log, s = o(2), a = Math.ceil(o(2 * i - 1) / s), c = Math.pow(2, a), l = numeric.rep([c], 0), u = numeric.rep([c], 0), d = Math.cos, p = Math.sin, h = -3.141592653589793 / i, f = numeric.rep([c], 0), m = numeric.rep([c], 0);
                Math.floor(i / 2);
                for (e = 0; e < i; e++)
                    f[e] = n[e];
                if ("undefined" != typeof r)
                    for (e = 0; e < i; e++)
                        m[e] = r[e];
                for (l[0] = 1,
                    e = 1; e <= c / 2; e++)
                    t = h * e * e,
                        l[e] = d(t),
                        u[e] = p(t),
                        l[c - e] = d(t),
                        u[c - e] = p(t);
                var g = new numeric.T(f, m)
                    , y = new numeric.T(l, u);
                return g = g.mul(y),
                    numeric.convpow2(g.x, g.y, numeric.clone(y.x), numeric.neg(y.y)),
                    g = g.mul(y),
                    g.x.length = i,
                    g.y.length = i,
                    g
            }
            ,
            numeric.T.prototype.ifft = function () {
                var e, t, n = this.x, r = this.y, i = n.length, o = Math.log, s = o(2), a = Math.ceil(o(2 * i - 1) / s), c = Math.pow(2, a), l = numeric.rep([c], 0), u = numeric.rep([c], 0), d = Math.cos, p = Math.sin, h = 3.141592653589793 / i, f = numeric.rep([c], 0), m = numeric.rep([c], 0);
                Math.floor(i / 2);
                for (e = 0; e < i; e++)
                    f[e] = n[e];
                if ("undefined" != typeof r)
                    for (e = 0; e < i; e++)
                        m[e] = r[e];
                for (l[0] = 1,
                    e = 1; e <= c / 2; e++)
                    t = h * e * e,
                        l[e] = d(t),
                        u[e] = p(t),
                        l[c - e] = d(t),
                        u[c - e] = p(t);
                var g = new numeric.T(f, m)
                    , y = new numeric.T(l, u);
                return g = g.mul(y),
                    numeric.convpow2(g.x, g.y, numeric.clone(y.x), numeric.neg(y.y)),
                    g = g.mul(y),
                    g.x.length = i,
                    g.y.length = i,
                    g.div(i)
            }
            ,
            numeric.gradient = function (e, t) {
                var n = t.length
                    , r = e(t);
                if (isNaN(r))
                    throw new Error("gradient: f(x) is a NaN!");
                var i, o, s, a, c, l, u, d, p, h, f = Math.max, m = numeric.clone(t), g = Array(n), f = (numeric.div,
                    numeric.sub,
                    Math.max), y = .001, v = Math.abs, b = Math.min, x = 0;
                for (i = 0; i < n; i++)
                    for (var w = f(1e-6 * r, 1e-8); ;) {
                        if (++x,
                            x > 20)
                            throw new Error("Numerical gradient fails");
                        if (m[i] = t[i] + w,
                            o = e(m),
                            m[i] = t[i] - w,
                            s = e(m),
                            m[i] = t[i],
                            isNaN(o) || isNaN(s))
                            w /= 16;
                        else {
                            if (g[i] = (o - s) / (2 * w),
                                c = t[i] - w,
                                l = t[i],
                                u = t[i] + w,
                                d = (o - r) / w,
                                p = (r - s) / w,
                                h = f(v(g[i]), v(r), v(o), v(s), v(c), v(l), v(u), 1e-8),
                                a = b(f(v(d - g[i]), v(p - g[i]), v(d - p)) / h, w / h),
                                !(a > y))
                                break;
                            w /= 16
                        }
                    }
                return g
            }
            ,
            numeric.uncmin = function (e, t, n, r, i, o, s) {
                var a = numeric.gradient;
                "undefined" == typeof s && (s = {}),
                    "undefined" == typeof n && (n = 1e-8),
                    "undefined" == typeof r && (r = function (t) {
                        return a(e, t)
                    }
                    ),
                    "undefined" == typeof i && (i = 1e3),
                    t = numeric.clone(t);
                var c, l, u = t.length, d = e(t);
                if (isNaN(d))
                    throw new Error("uncmin: f(x0) is a NaN!");
                var p = Math.max
                    , h = numeric.norm2;
                n = p(n, numeric.epsilon);
                var f, m, g, y, v, b, x, w, E, _, S = s.Hinv || numeric.identity(u), k = numeric.dot, M = (numeric.inv,
                    numeric.sub), C = numeric.add, I = numeric.tensor, T = numeric.div, P = numeric.mul, A = numeric.all, L = numeric.isFinite, O = numeric.neg, D = 0, q = "";
                for (m = r(t); D < i;) {
                    if ("function" == typeof o && o(D, t, d, m, S)) {
                        q = "Callback returned true";
                        break
                    }
                    if (!A(L(m))) {
                        q = "Gradient has Infinity or NaN";
                        break
                    }
                    if (f = O(k(S, m)),
                        !A(L(f))) {
                        q = "Search direction has Infinity or NaN";
                        break
                    }
                    if (_ = h(f),
                        _ < n) {
                        q = "Newton step smaller than tol";
                        break
                    }
                    for (E = 1,
                        l = k(m, f),
                        v = t; D < i && !(E * _ < n) && (y = P(f, E),
                            v = C(t, y),
                            c = e(v),
                            c - d >= .1 * E * l || isNaN(c));)
                        E *= .5,
                            ++D;
                    if (E * _ < n) {
                        q = "Line search step size smaller than tol";
                        break
                    }
                    if (D === i) {
                        q = "maxit reached during line search";
                        break
                    }
                    g = r(v),
                        b = M(g, m),
                        w = k(b, y),
                        x = k(S, b),
                        S = M(C(S, P((w + k(b, x)) / (w * w), I(y, y))), T(C(I(x, y), I(y, x)), w)),
                        t = v,
                        d = c,
                        m = g,
                        ++D
                }
                return {
                    solution: t,
                    f: d,
                    gradient: m,
                    invHessian: S,
                    iterations: D,
                    message: q
                }
            }
            ,
            numeric.Dopri = function (e, t, n, r, i, o, s) {
                this.x = e,
                    this.y = t,
                    this.f = n,
                    this.ymid = r,
                    this.iterations = i,
                    this.events = s,
                    this.message = o
            }
            ,
            numeric.Dopri.prototype._at = function (e, t) {
                function n(e) {
                    return e * e
                }
                var r, i, o, s, a, c, e, l, u, d, p, h = this, f = h.x, m = h.y, g = h.f, y = h.ymid, v = (f.length,
                    Math.floor,
                    .5), b = numeric.add, x = numeric.mul, w = numeric.sub;
                return r = f[t],
                    i = f[t + 1],
                    s = m[t],
                    a = m[t + 1],
                    l = i - r,
                    o = r + v * l,
                    c = y[t],
                    u = w(g[t], x(s, 1 / (r - o) + 2 / (r - i))),
                    d = w(g[t + 1], x(a, 1 / (i - o) + 2 / (i - r))),
                    p = [n(e - i) * (e - o) / n(r - i) / (r - o), n(e - r) * n(e - i) / n(r - o) / n(i - o), n(e - r) * (e - o) / n(i - r) / (i - o), (e - r) * n(e - i) * (e - o) / n(r - i) / (r - o), (e - i) * n(e - r) * (e - o) / n(r - i) / (i - o)],
                    b(b(b(b(x(s, p[0]), x(c, p[1])), x(a, p[2])), x(u, p[3])), x(d, p[4]))
            }
            ,
            numeric.Dopri.prototype.at = function (e) {
                var t, n, r, i = Math.floor;
                if ("number" != typeof e) {
                    var o = e.length
                        , s = Array(o);
                    for (t = o - 1; t !== -1; --t)
                        s[t] = this.at(e[t]);
                    return s
                }
                var a = this.x;
                for (t = 0,
                    n = a.length - 1; n - t > 1;)
                    r = i(.5 * (t + n)),
                        a[r] <= e ? t = r : n = r;
                return this._at(e, t)
            }
            ,
            numeric.dopri = function (e, t, n, r, i, o, s) {
                "undefined" == typeof i && (i = 1e-6),
                    "undefined" == typeof o && (o = 1e3);
                var a, c, l, u, d, p, h, f, m, g, y, v, b, x = [e], w = [n], E = [r(e, n)], _ = [], S = .2, k = [.075, .225], M = [44 / 45, -56 / 15, 32 / 9], C = [19372 / 6561, -25360 / 2187, 64448 / 6561, -212 / 729], I = [9017 / 3168, -355 / 33, 46732 / 5247, 49 / 176, -5103 / 18656], T = [35 / 384, 0, 500 / 1113, 125 / 192, -2187 / 6784, 11 / 84], P = [.10013431883002395, 0, .3918321794184259, -.02982460176594817, .05893268337240795, -.04497888809104361, .023904308236133973], A = [.2, .3, .8, 8 / 9, 1, 1], L = [-71 / 57600, 0, 71 / 16695, -71 / 1920, 17253 / 339200, -22 / 525, .025], O = 0, D = (t - e) / 10, q = 0, N = numeric.add, F = numeric.mul, R = (Math.max,
                    Math.min), j = Math.abs, B = numeric.norminf, V = Math.pow, U = numeric.any, G = numeric.lt, z = numeric.and, H = (numeric.sub,
                        new numeric.Dopri(x, w, E, _, -1, ""));
                for ("function" == typeof s && (y = s(e, n)); e < t && q < o;)
                    if (++q,
                        e + D > t && (D = t - e),
                        a = r(e + A[0] * D, N(n, F(S * D, E[O]))),
                        c = r(e + A[1] * D, N(N(n, F(k[0] * D, E[O])), F(k[1] * D, a))),
                        l = r(e + A[2] * D, N(N(N(n, F(M[0] * D, E[O])), F(M[1] * D, a)), F(M[2] * D, c))),
                        u = r(e + A[3] * D, N(N(N(N(n, F(C[0] * D, E[O])), F(C[1] * D, a)), F(C[2] * D, c)), F(C[3] * D, l))),
                        d = r(e + A[4] * D, N(N(N(N(N(n, F(I[0] * D, E[O])), F(I[1] * D, a)), F(I[2] * D, c)), F(I[3] * D, l)), F(I[4] * D, u))),
                        m = N(N(N(N(N(n, F(E[O], D * T[0])), F(c, D * T[2])), F(l, D * T[3])), F(u, D * T[4])), F(d, D * T[5])),
                        p = r(e + D, m),
                        h = N(N(N(N(N(F(E[O], D * L[0]), F(c, D * L[2])), F(l, D * L[3])), F(u, D * L[4])), F(d, D * L[5])), F(p, D * L[6])),
                        g = "number" == typeof h ? j(h) : B(h),
                        g > i) {
                        if (D = .2 * D * V(i / g, .25),
                            e + D === e) {
                            H.msg = "Step size became too small";
                            break
                        }
                    } else {
                        if (_[O] = N(N(N(N(N(N(n, F(E[O], D * P[0])), F(c, D * P[2])), F(l, D * P[3])), F(u, D * P[4])), F(d, D * P[5])), F(p, D * P[6])),
                            ++O,
                            x[O] = e + D,
                            w[O] = m,
                            E[O] = p,
                            "function" == typeof s) {
                            var W, Y, $ = e, K = e + .5 * D;
                            if (v = s(K, _[O - 1]),
                                b = z(G(y, 0), G(0, v)),
                                U(b) || ($ = K,
                                    K = e + D,
                                    y = v,
                                    v = s(K, m),
                                    b = z(G(y, 0), G(0, v))),
                                U(b)) {
                                for (var X, Q, Z = 0, J = 1, ee = 1; ;) {
                                    if ("number" == typeof y)
                                        Y = (ee * v * $ - J * y * K) / (ee * v - J * y);
                                    else
                                        for (Y = K,
                                            f = y.length - 1; f !== -1; --f)
                                            y[f] < 0 && v[f] > 0 && (Y = R(Y, (ee * v[f] * $ - J * y[f] * K) / (ee * v[f] - J * y[f])));
                                    if (Y <= $ || Y >= K)
                                        break;
                                    W = H._at(Y, O - 1),
                                        Q = s(Y, W),
                                        X = z(G(y, 0), G(0, Q)),
                                        U(X) ? (K = Y,
                                            v = Q,
                                            b = X,
                                            ee = 1,
                                            Z === -1 ? J *= .5 : J = 1,
                                            Z = -1) : ($ = Y,
                                                y = Q,
                                                J = 1,
                                                1 === Z ? ee *= .5 : ee = 1,
                                                Z = 1)
                                }
                                return m = H._at(.5 * (e + Y), O - 1),
                                    H.f[O] = r(Y, W),
                                    H.x[O] = Y,
                                    H.y[O] = W,
                                    H.ymid[O - 1] = m,
                                    H.events = b,
                                    H.iterations = q,
                                    H
                            }
                        }
                        e += D,
                            n = m,
                            y = v,
                            D = R(.8 * D * V(i / g, .25), 4 * D)
                    }
                return H.iterations = q,
                    H
            }
            ,
            numeric.LU = function (e, t) {
                t = t || !1;
                var n, r, i, o, s, a, c, l, u, d = Math.abs, p = e.length, h = p - 1, f = new Array(p);
                for (t || (e = numeric.clone(e)),
                    i = 0; i < p; ++i) {
                    for (c = i,
                        a = e[i],
                        u = d(a[i]),
                        r = i + 1; r < p; ++r)
                        o = d(e[r][i]),
                            u < o && (u = o,
                                c = r);
                    for (f[i] = c,
                        c != i && (e[i] = e[c],
                            e[c] = a,
                            a = e[i]),
                        s = a[i],
                        n = i + 1; n < p; ++n)
                        e[n][i] /= s;
                    for (n = i + 1; n < p; ++n) {
                        for (l = e[n],
                            r = i + 1; r < h; ++r)
                            l[r] -= l[i] * a[r],
                                ++r,
                                l[r] -= l[i] * a[r];
                        r === h && (l[r] -= l[i] * a[r])
                    }
                }
                return {
                    LU: e,
                    P: f
                }
            }
            ,
            numeric.LUsolve = function (e, t) {
                var n, r, i, o, s, a = e.LU, c = a.length, l = numeric.clone(t), u = e.P;
                for (n = c - 1; n !== -1; --n)
                    l[n] = t[n];
                for (n = 0; n < c; ++n)
                    for (i = u[n],
                        u[n] !== n && (s = l[n],
                            l[n] = l[i],
                            l[i] = s),
                        o = a[n],
                        r = 0; r < n; ++r)
                        l[n] -= l[r] * o[r];
                for (n = c - 1; n >= 0; --n) {
                    for (o = a[n],
                        r = n + 1; r < c; ++r)
                        l[n] -= l[r] * o[r];
                    l[n] /= o[n]
                }
                return l
            }
            ,
            numeric.solve = function (e, t, n) {
                return numeric.LUsolve(numeric.LU(e, n), t)
            }
            ,
            numeric.echelonize = function (e) {
                var t, n, r, i, o, s, a, c, l = numeric.dim(e), u = l[0], d = l[1], p = numeric.identity(u), h = Array(u), f = Math.abs, m = numeric.diveq;
                for (e = numeric.clone(e),
                    t = 0; t < u; ++t) {
                    for (r = 0,
                        o = e[t],
                        s = p[t],
                        n = 1; n < d; ++n)
                        f(o[r]) < f(o[n]) && (r = n);
                    for (h[t] = r,
                        m(s, o[r]),
                        m(o, o[r]),
                        n = 0; n < u; ++n)
                        if (n !== t) {
                            for (a = e[n],
                                c = a[r],
                                i = d - 1; i !== -1; --i)
                                a[i] -= o[i] * c;
                            for (a = p[n],
                                i = u - 1; i !== -1; --i)
                                a[i] -= s[i] * c
                        }
                }
                return {
                    I: p,
                    A: e,
                    P: h
                }
            }
            ,
            numeric.__solveLP = function (e, t, n, r, i, o, s) {
                var a, c, l, u, d = numeric.sum, p = (numeric.log,
                    numeric.mul), h = numeric.sub, f = numeric.dot, m = numeric.div, g = numeric.add, y = e.length, v = n.length, b = !1, x = 0, w = 1, E = (numeric.transpose(t),
                        numeric.svd,
                        numeric.transpose), _ = (numeric.leq,
                            Math.sqrt), S = Math.abs, k = (numeric.muleq,
                                numeric.norminf,
                                numeric.any,
                                Math.min), M = numeric.all, C = numeric.gt, I = Array(y), T = Array(v), P = (numeric.rep([v], 1),
                                    numeric.solve), A = h(n, f(t, o)), L = f(e, e);
                for (l = x; l < i; ++l) {
                    var O, D;
                    for (O = v - 1; O !== -1; --O)
                        T[O] = m(t[O], A[O]);
                    var q = E(T);
                    for (O = y - 1; O !== -1; --O)
                        I[O] = d(q[O]);
                    w = .25 * S(L / f(e, I));
                    var N = 100 * _(L / f(I, I));
                    for ((!isFinite(w) || w > N) && (w = N),
                        u = g(e, p(w, I)),
                        c = f(q, T),
                        O = y - 1; O !== -1; --O)
                        c[O][O] += 1;
                    D = P(c, m(u, w), !0);
                    var F = m(A, f(t, D))
                        , R = 1;
                    for (O = v - 1; O !== -1; --O)
                        F[O] < 0 && (R = k(R, -.999 * F[O]));
                    if (a = h(o, p(D, R)),
                        A = h(n, f(t, a)),
                        !M(C(A, 0)))
                        return {
                            solution: o,
                            message: "",
                            iterations: l
                        };
                    if (o = a,
                        w < r)
                        return {
                            solution: a,
                            message: "",
                            iterations: l
                        };
                    if (s) {
                        var j = f(e, u)
                            , B = f(t, u);
                        for (b = !0,
                            O = v - 1; O !== -1; --O)
                            if (j * B[O] < 0) {
                                b = !1;
                                break
                            }
                    } else
                        b = !(o[y - 1] >= 0);
                    if (b)
                        return {
                            solution: a,
                            message: "Unbounded",
                            iterations: l
                        }
                }
                return {
                    solution: o,
                    message: "maximum iteration count exceeded",
                    iterations: l
                }
            }
            ,
            numeric._solveLP = function (e, t, n, r, i) {
                var o, s = e.length, a = n.length, c = (numeric.sum,
                    numeric.log,
                    numeric.mul,
                    numeric.sub), l = numeric.dot, u = (numeric.div,
                        numeric.add,
                        numeric.rep([s], 0).concat([1])), d = numeric.rep([a, 1], -1), p = numeric.blockMatrix([[t, d]]), h = n, o = numeric.rep([s], 0).concat(Math.max(0, numeric.sup(numeric.neg(n))) + 1), f = numeric.__solveLP(u, p, h, r, i, o, !1), m = numeric.clone(f.solution);
                m.length = s;
                var g = numeric.inf(c(n, l(t, m)));
                if (g < 0)
                    return {
                        solution: NaN,
                        message: "Infeasible",
                        iterations: f.iterations
                    };
                var y = numeric.__solveLP(e, t, n, r, i - f.iterations, m, !0);
                return y.iterations += f.iterations,
                    y
            }
            ,
            numeric.solveLP = function (e, t, n, r, i, o, s) {
                if ("undefined" == typeof s && (s = 1e3),
                    "undefined" == typeof o && (o = numeric.epsilon),
                    "undefined" == typeof r)
                    return numeric._solveLP(e, t, n, o, s);
                var a, c = r.length, l = r[0].length, u = t.length, d = numeric.echelonize(r), p = numeric.rep([l], 0), h = d.P, f = [];
                for (a = h.length - 1; a !== -1; --a)
                    p[h[a]] = 1;
                for (a = l - 1; a !== -1; --a)
                    0 === p[a] && f.push(a);
                var m = numeric.getRange
                    , g = numeric.linspace(0, c - 1)
                    , y = numeric.linspace(0, u - 1)
                    , v = m(r, g, f)
                    , b = m(t, y, h)
                    , x = m(t, y, f)
                    , w = numeric.dot
                    , E = numeric.sub
                    , _ = w(b, d.I)
                    , S = E(x, w(_, v))
                    , k = E(n, w(_, i))
                    , M = Array(h.length)
                    , C = Array(f.length);
                for (a = h.length - 1; a !== -1; --a)
                    M[a] = e[h[a]];
                for (a = f.length - 1; a !== -1; --a)
                    C[a] = e[f[a]];
                var I = E(C, w(M, w(d.I, v)))
                    , T = numeric._solveLP(I, S, k, o, s)
                    , P = T.solution;
                if (P !== P)
                    return T;
                var A = w(d.I, E(i, w(v, P)))
                    , L = Array(e.length);
                for (a = h.length - 1; a !== -1; --a)
                    L[h[a]] = A[a];
                for (a = f.length - 1; a !== -1; --a)
                    L[f[a]] = P[a];
                return {
                    solution: L,
                    message: T.message,
                    iterations: T.iterations
                }
            }
            ,
            numeric.MPStoLP = function (e) {
                function t(t) {
                    throw new Error("MPStoLP: " + t + "\nLine " + n + ": " + e[n] + "\nCurrent state: " + a[s] + "\n")
                }
                e instanceof String && e.split("\n");
                var n, r, i, o, s = 0, a = ["Initial state", "NAME", "ROWS", "COLUMNS", "RHS", "BOUNDS", "ENDATA"], c = e.length, l = 0, u = {}, d = [], p = 0, h = {}, f = 0, m = [], g = [], y = [];
                for (n = 0; n < c; ++n) {
                    i = e[n];
                    var v = i.match(/\S*/g)
                        , b = [];
                    for (r = 0; r < v.length; ++r)
                        "" !== v[r] && b.push(v[r]);
                    if (0 !== b.length) {
                        for (r = 0; r < a.length && i.substr(0, a[r].length) !== a[r]; ++r)
                            ;
                        if (r < a.length) {
                            if (s = r,
                                1 === r && (o = b[1]),
                                6 === r)
                                return {
                                    name: o,
                                    c: m,
                                    A: numeric.transpose(g),
                                    b: y,
                                    rows: u,
                                    vars: h
                                }
                        } else
                            switch (s) {
                                case 0:
                                case 1:
                                    t("Unexpected line");
                                case 2:
                                    switch (b[0]) {
                                        case "N":
                                            0 === l ? l = b[1] : t("Two or more N rows");
                                            break;
                                        case "L":
                                            u[b[1]] = p,
                                                d[p] = 1,
                                                y[p] = 0,
                                                ++p;
                                            break;
                                        case "G":
                                            u[b[1]] = p,
                                                d[p] = -1,
                                                y[p] = 0,
                                                ++p;
                                            break;
                                        case "E":
                                            u[b[1]] = p,
                                                d[p] = 0,
                                                y[p] = 0,
                                                ++p;
                                            break;
                                        default:
                                            t("Parse error " + numeric.prettyPrint(b))
                                    }
                                    break;
                                case 3:
                                    h.hasOwnProperty(b[0]) || (h[b[0]] = f,
                                        m[f] = 0,
                                        g[f] = numeric.rep([p], 0),
                                        ++f);
                                    var x = h[b[0]];
                                    for (r = 1; r < b.length; r += 2)
                                        if (b[r] !== l) {
                                            var w = u[b[r]];
                                            g[x][w] = (d[w] < 0 ? -1 : 1) * parseFloat(b[r + 1])
                                        } else
                                            m[x] = parseFloat(b[r + 1]);
                                    break;
                                case 4:
                                    for (r = 1; r < b.length; r += 2)
                                        y[u[b[r]]] = (d[u[b[r]]] < 0 ? -1 : 1) * parseFloat(b[r + 1]);
                                    break;
                                case 5:
                                    break;
                                case 6:
                                    t("Internal error")
                            }
                    }
                }
                t("Reached end of file without ENDATA")
            }
            ,
            numeric.seedrandom = {
                pow: Math.pow,
                random: Math.random
            },
            function (e, t, n, r, i, o, s) {
                function a(e) {
                    var t, r, i = this, o = e.length, s = 0, a = i.i = i.j = i.m = 0;
                    for (i.S = [],
                        i.c = [],
                        o || (e = [o++]); s < n;)
                        i.S[s] = s++;
                    for (s = 0; s < n; s++)
                        t = i.S[s],
                            a = u(a + t + e[s % o]),
                            r = i.S[a],
                            i.S[s] = r,
                            i.S[a] = t;
                    i.g = function (e) {
                        var t = i.S
                            , r = u(i.i + 1)
                            , o = t[r]
                            , s = u(i.j + o)
                            , a = t[s];
                        t[r] = a,
                            t[s] = o;
                        for (var c = t[u(o + a)]; --e;)
                            r = u(r + 1),
                                o = t[r],
                                s = u(s + o),
                                a = t[s],
                                t[r] = a,
                                t[s] = o,
                                c = c * n + t[u(o + a)];
                        return i.i = r,
                            i.j = s,
                            c
                    }
                        ,
                        i.g(n)
                }
                function c(e, t, n, r, i) {
                    if (n = [],
                        i = typeof e,
                        t && "object" == i)
                        for (r in e)
                            if (r.indexOf("S") < 5)
                                try {
                                    n.push(c(e[r], t - 1))
                                } catch (e) { }
                    return n.length ? n : e + ("string" != i ? "\0" : "")
                }
                function l(e, t, n, r) {
                    for (e += "",
                        n = 0,
                        r = 0; r < e.length; r++)
                        t[u(r)] = u((n ^= 19 * t[u(r)]) + e.charCodeAt(r));
                    e = "";
                    for (r in t)
                        e += String.fromCharCode(t[r]);
                    return e
                }
                function u(e) {
                    return e & n - 1
                }
                t.seedrandom = function (u, d) {
                    var p, h = [];
                    return u = l(c(d ? [u, e] : arguments.length ? u : [(new Date).getTime(), e, window], 3), h),
                        p = new a(h),
                        l(p.S, e),
                        t.random = function () {
                            for (var e = p.g(r), t = s, a = 0; e < i;)
                                e = (e + a) * n,
                                    t *= n,
                                    a = p.g(1);
                            for (; e >= o;)
                                e /= 2,
                                    t /= 2,
                                    a >>>= 1;
                            return (e + a) / t
                        }
                        ,
                        u
                }
                    ,
                    s = t.pow(n, r),
                    i = t.pow(2, i),
                    o = 2 * i,
                    l(t.random(), e)
            }([], numeric.seedrandom, 256, 6, 52),
            function (e) {
                function t(e) {
                    if ("object" != typeof e)
                        return e;
                    var n, r = [], i = e.length;
                    for (n = 0; n < i; n++)
                        r[n + 1] = t(e[n]);
                    return r
                }
                function n(e) {
                    if ("object" != typeof e)
                        return e;
                    var t, r = [], i = e.length;
                    for (t = 1; t < i; t++)
                        r[t - 1] = n(e[t]);
                    return r
                }
                function r(e, t, n) {
                    var r, i, o, s, a;
                    for (o = 1; o <= n; o += 1) {
                        for (e[o][o] = 1 / e[o][o],
                            a = -e[o][o],
                            r = 1; r < o; r += 1)
                            e[r][o] = a * e[r][o];
                        if (s = o + 1,
                            n < s)
                            break;
                        for (i = s; i <= n; i += 1)
                            for (a = e[o][i],
                                e[o][i] = 0,
                                r = 1; r <= o; r += 1)
                                e[r][i] = e[r][i] + a * e[r][o]
                    }
                }
                function i(e, t, n, r) {
                    var i, o, s, a;
                    for (o = 1; o <= n; o += 1) {
                        for (a = 0,
                            i = 1; i < o; i += 1)
                            a += e[i][o] * r[i];
                        r[o] = (r[o] - a) / e[o][o]
                    }
                    for (s = 1; s <= n; s += 1)
                        for (o = n + 1 - s,
                            r[o] = r[o] / e[o][o],
                            a = -r[o],
                            i = 1; i < o; i += 1)
                            r[i] = r[i] + a * e[i][o]
                }
                function o(e, t, n, r) {
                    var i, o, s, a, c, l;
                    for (o = 1; o <= n; o += 1) {
                        if (r[1] = o,
                            l = 0,
                            s = o - 1,
                            s < 1) {
                            if (l = e[o][o] - l,
                                l <= 0)
                                break;
                            e[o][o] = Math.sqrt(l)
                        } else {
                            for (a = 1; a <= s; a += 1) {
                                for (c = e[a][o],
                                    i = 1; i < a; i += 1)
                                    c -= e[i][o] * e[i][a];
                                c /= e[a][a],
                                    e[a][o] = c,
                                    l += c * c
                            }
                            if (l = e[o][o] - l,
                                l <= 0)
                                break;
                            e[o][o] = Math.sqrt(l)
                        }
                        r[1] = 0
                    }
                }
                function s(e, t, n, s, a, c, l, u, d, p, h, f, m, g, y, v) {
                    function b() {
                        for (g[1] = g[1] + 1,
                            M = O,
                            S = 1; S <= p; S += 1) {
                            for (M += 1,
                                j = -u[S],
                                k = 1; k <= s; k += 1)
                                j += l[k][S] * a[k];
                            if (Math.abs(j) < Y && (j = 0),
                                S > h)
                                y[M] = j;
                            else if (y[M] = -Math.abs(j),
                                j > 0) {
                                for (k = 1; k <= s; k += 1)
                                    l[k][S] = -l[k][S];
                                u[S] = -u[S]
                            }
                        }
                        for (S = 1; S <= m; S += 1)
                            y[O + f[S]] = 0;
                        for (q = 0,
                            R = 0,
                            S = 1; S <= p; S += 1)
                            y[O + S] < R * y[F + S] && (q = S,
                                R = y[O + S] / y[F + S]);
                        return 0 === q ? 999 : 0
                    }
                    function x() {
                        for (S = 1; S <= s; S += 1) {
                            for (j = 0,
                                k = 1; k <= s; k += 1)
                                j += e[k][S] * l[k][q];
                            y[S] = j
                        }
                        for (C = P,
                            S = 1; S <= s; S += 1)
                            y[C + S] = 0;
                        for (k = m + 1; k <= s; k += 1)
                            for (S = 1; S <= s; S += 1)
                                y[C + S] = y[C + S] + e[S][k] * y[k];
                        for (H = !0,
                            S = m; S >= 1; S -= 1) {
                            for (j = y[S],
                                M = L + S * (S + 3) / 2,
                                C = M - S,
                                k = S + 1; k <= m; k += 1)
                                j -= y[M] * y[A + k],
                                    M += k;
                            if (j /= y[C],
                                y[A + S] = j,
                                f[S] < h)
                                break;
                            if (j < 0)
                                break;
                            H = !1,
                                T = S
                        }
                        if (!H)
                            for (B = y[D + T] / y[A + T],
                                S = 1; S <= m && !(f[S] < h) && !(y[A + S] < 0); S += 1)
                                R = y[D + S] / y[A + S],
                                    R < B && (B = R,
                                        T = S);
                        for (j = 0,
                            S = P + 1; S <= P + s; S += 1)
                            j += y[S] * y[S];
                        if (Math.abs(j) <= Y) {
                            if (H)
                                return v[1] = 1,
                                    999;
                            for (S = 1; S <= m; S += 1)
                                y[D + S] = y[D + S] - B * y[A + S];
                            return y[D + m + 1] = y[D + m + 1] + B,
                                700
                        }
                        for (j = 0,
                            S = 1; S <= s; S += 1)
                            j += y[P + S] * l[S][q];
                        for (V = -y[O + q] / j,
                            W = !0,
                            H || B < V && (V = B,
                                W = !1),
                            S = 1; S <= s; S += 1)
                            a[S] = a[S] + V * y[P + S],
                                Math.abs(a[S]) < Y && (a[S] = 0);
                        for (c[1] = c[1] + V * j * (V / 2 + y[D + m + 1]),
                            S = 1; S <= m; S += 1)
                            y[D + S] = y[D + S] - V * y[A + S];
                        if (y[D + m + 1] = y[D + m + 1] + V,
                            !W) {
                            for (j = -u[q],
                                k = 1; k <= s; k += 1)
                                j += a[k] * l[k][q];
                            if (q > h)
                                y[O + q] = j;
                            else if (y[O + q] = -Math.abs(j),
                                j > 0) {
                                for (k = 1; k <= s; k += 1)
                                    l[k][q] = -l[k][q];
                                u[q] = -u[q]
                            }
                            return 700
                        }
                        for (m += 1,
                            f[m] = q,
                            M = L + (m - 1) * m / 2 + 1,
                            S = 1; S <= m - 1; S += 1)
                            y[M] = y[S],
                                M += 1;
                        if (m === s)
                            y[M] = y[s];
                        else {
                            for (S = s; S >= m + 1 && 0 !== y[S] && (U = Math.max(Math.abs(y[S - 1]), Math.abs(y[S])),
                                G = Math.min(Math.abs(y[S - 1]), Math.abs(y[S])),
                                R = y[S - 1] >= 0 ? Math.abs(U * Math.sqrt(1 + G * G / (U * U))) : -Math.abs(U * Math.sqrt(1 + G * G / (U * U))),
                                U = y[S - 1] / R,
                                G = y[S] / R,
                                1 !== U); S -= 1)
                                if (0 === U)
                                    for (y[S - 1] = G * R,
                                        k = 1; k <= s; k += 1)
                                        R = e[k][S - 1],
                                            e[k][S - 1] = e[k][S],
                                            e[k][S] = R;
                                else
                                    for (y[S - 1] = R,
                                        z = G / (1 + U),
                                        k = 1; k <= s; k += 1)
                                        R = U * e[k][S - 1] + G * e[k][S],
                                            e[k][S] = z * (e[k][S - 1] + R) - e[k][S],
                                            e[k][S - 1] = R;
                            y[M] = y[m]
                        }
                        return 0
                    }
                    function w() {
                        if (M = L + T * (T + 1) / 2 + 1,
                            C = M + T,
                            0 === y[C])
                            return 798;
                        if (U = Math.max(Math.abs(y[C - 1]), Math.abs(y[C])),
                            G = Math.min(Math.abs(y[C - 1]), Math.abs(y[C])),
                            R = y[C - 1] >= 0 ? Math.abs(U * Math.sqrt(1 + G * G / (U * U))) : -Math.abs(U * Math.sqrt(1 + G * G / (U * U))),
                            U = y[C - 1] / R,
                            G = y[C] / R,
                            1 === U)
                            return 798;
                        if (0 === U) {
                            for (S = T + 1; S <= m; S += 1)
                                R = y[C - 1],
                                    y[C - 1] = y[C],
                                    y[C] = R,
                                    C += S;
                            for (S = 1; S <= s; S += 1)
                                R = e[S][T],
                                    e[S][T] = e[S][T + 1],
                                    e[S][T + 1] = R
                        } else {
                            for (z = G / (1 + U),
                                S = T + 1; S <= m; S += 1)
                                R = U * y[C - 1] + G * y[C],
                                    y[C] = z * (y[C - 1] + R) - y[C],
                                    y[C - 1] = R,
                                    C += S;
                            for (S = 1; S <= s; S += 1)
                                R = U * e[S][T] + G * e[S][T + 1],
                                    e[S][T + 1] = z * (e[S][T] + R) - e[S][T + 1],
                                    e[S][T] = R
                        }
                        return 0
                    }
                    function E() {
                        for (C = M - T,
                            S = 1; S <= T; S += 1)
                            y[C] = y[M],
                                M += 1,
                                C += 1;
                        return y[D + T] = y[D + T + 1],
                            f[T] = f[T + 1],
                            T += 1,
                            T < m ? 797 : 0
                    }
                    function _() {
                        return y[D + m] = y[D + m + 1],
                            y[D + m + 1] = 0,
                            f[m] = 0,
                            m -= 1,
                            g[2] = g[2] + 1,
                            0
                    }
                    var S, k, M, C, I, T, P, A, L, O, D, q, N, F, R, j, B, V, U, G, z, H, W, Y, $, K, X;
                    N = Math.min(s, p),
                        M = 2 * s + N * (N + 5) / 2 + 2 * p + 1,
                        Y = 1e-60;
                    do
                        Y += Y,
                            $ = 1 + .1 * Y,
                            K = 1 + .2 * Y;
                    while ($ <= 1 || K <= 1); for (S = 1; S <= s; S += 1)
                        y[S] = t[S];
                    for (S = s + 1; S <= M; S += 1)
                        y[S] = 0;
                    for (S = 1; S <= p; S += 1)
                        f[S] = 0;
                    if (I = [],
                        0 === v[1]) {
                        if (o(e, n, s, I),
                            0 !== I[1])
                            return void (v[1] = 2);
                        i(e, n, s, t),
                            r(e, n, s)
                    } else {
                        for (k = 1; k <= s; k += 1)
                            for (a[k] = 0,
                                S = 1; S <= k; S += 1)
                                a[k] = a[k] + e[S][k] * t[S];
                        for (k = 1; k <= s; k += 1)
                            for (t[k] = 0,
                                S = k; S <= s; S += 1)
                                t[k] = t[k] + e[k][S] * a[S]
                    }
                    for (c[1] = 0,
                        k = 1; k <= s; k += 1)
                        for (a[k] = t[k],
                            c[1] = c[1] + y[k] * a[k],
                            y[k] = 0,
                            S = k + 1; S <= s; S += 1)
                            e[S][k] = 0;
                    for (c[1] = -c[1] / 2,
                        v[1] = 0,
                        P = s,
                        A = P + s,
                        D = A + N,
                        L = D + N + 1,
                        O = L + N * (N + 1) / 2,
                        F = O + p,
                        S = 1; S <= p; S += 1) {
                        for (j = 0,
                            k = 1; k <= s; k += 1)
                            j += l[k][S] * l[k][S];
                        y[F + S] = Math.sqrt(j)
                    }
                    for (m = 0,
                        g[1] = 0,
                        g[2] = 0,
                        X = 0; ;) {
                        if (X = b(),
                            999 === X)
                            return;
                        for (; ;) {
                            if (X = x(),
                                0 === X)
                                break;
                            if (999 === X)
                                return;
                            if (700 === X)
                                if (T === m)
                                    _();
                                else {
                                    for (; ;)
                                        if (w(),
                                            X = E(),
                                            797 !== X)
                                            break;
                                    _()
                                }
                        }
                    }
                }
                function a(e, r, i, o, a, c) {
                    e = t(e),
                        r = t(r),
                        i = t(i);
                    var l, u, d, p, h, f, m = [], g = [], y = [], v = [], b = [];
                    if (a = a || 0,
                        c = c ? t(c) : [void 0, 0],
                        o = o ? t(o) : [],
                        u = e.length - 1,
                        d = i[1].length - 1,
                        !o)
                        for (l = 1; l <= d; l += 1)
                            o[l] = 0;
                    for (l = 1; l <= d; l += 1)
                        g[l] = 0;
                    for (p = 0,
                        h = Math.min(u, d),
                        l = 1; l <= u; l += 1)
                        y[l] = 0;
                    for (m[1] = 0,
                        l = 1; l <= 2 * u + h * (h + 5) / 2 + 2 * d + 1; l += 1)
                        v[l] = 0;
                    for (l = 1; l <= 2; l += 1)
                        b[l] = 0;
                    return s(e, r, u, u, y, m, i, o, u, d, a, g, p, b, v, c),
                        f = "",
                        1 === c[1] && (f = "constraints are inconsistent, no solution!"),
                        2 === c[1] && (f = "matrix D in quadratic function is not positive definite!"),
                        {
                            solution: n(y),
                            value: n(m),
                            unconstrained_solution: n(r),
                            iterations: n(b),
                            iact: n(g),
                            message: f
                        }
                }
                e.solveQP = a
            }(numeric),
            numeric.svd = function (e) {
                function t(e, t) {
                    return e = Math.abs(e),
                        t = Math.abs(t),
                        e > t ? e * Math.sqrt(1 + t * t / e / e) : 0 == t ? e : t * Math.sqrt(1 + e * e / t / t)
                }
                var n, r = numeric.epsilon, i = 1e-64 / r, o = 50, s = 0, a = 0, c = 0, l = 0, u = 0, d = numeric.clone(e), p = d.length, h = d[0].length;
                if (p < h)
                    throw "Need more rows than columns";
                var f = new Array(h)
                    , m = new Array(h);
                for (a = 0; a < h; a++)
                    f[a] = m[a] = 0;
                var g = numeric.rep([h, h], 0)
                    , y = 0
                    , v = 0
                    , b = 0
                    , x = 0
                    , w = 0
                    , E = 0
                    , _ = 0;
                for (a = 0; a < h; a++) {
                    for (f[a] = v,
                        _ = 0,
                        u = a + 1,
                        c = a; c < p; c++)
                        _ += d[c][a] * d[c][a];
                    if (_ <= i)
                        v = 0;
                    else
                        for (y = d[a][a],
                            v = Math.sqrt(_),
                            y >= 0 && (v = -v),
                            b = y * v - _,
                            d[a][a] = y - v,
                            c = u; c < h; c++) {
                            for (_ = 0,
                                l = a; l < p; l++)
                                _ += d[l][a] * d[l][c];
                            for (y = _ / b,
                                l = a; l < p; l++)
                                d[l][c] += y * d[l][a]
                        }
                    for (m[a] = v,
                        _ = 0,
                        c = u; c < h; c++)
                        _ += d[a][c] * d[a][c];
                    if (_ <= i)
                        v = 0;
                    else {
                        for (y = d[a][a + 1],
                            v = Math.sqrt(_),
                            y >= 0 && (v = -v),
                            b = y * v - _,
                            d[a][a + 1] = y - v,
                            c = u; c < h; c++)
                            f[c] = d[a][c] / b;
                        for (c = u; c < p; c++) {
                            for (_ = 0,
                                l = u; l < h; l++)
                                _ += d[c][l] * d[a][l];
                            for (l = u; l < h; l++)
                                d[c][l] += _ * f[l]
                        }
                    }
                    w = Math.abs(m[a]) + Math.abs(f[a]),
                        w > x && (x = w)
                }
                for (a = h - 1; a != -1; a += -1) {
                    if (0 != v) {
                        for (b = v * d[a][a + 1],
                            c = u; c < h; c++)
                            g[c][a] = d[a][c] / b;
                        for (c = u; c < h; c++) {
                            for (_ = 0,
                                l = u; l < h; l++)
                                _ += d[a][l] * g[l][c];
                            for (l = u; l < h; l++)
                                g[l][c] += _ * g[l][a]
                        }
                    }
                    for (c = u; c < h; c++)
                        g[a][c] = 0,
                            g[c][a] = 0;
                    g[a][a] = 1,
                        v = f[a],
                        u = a
                }
                for (a = h - 1; a != -1; a += -1) {
                    for (u = a + 1,
                        v = m[a],
                        c = u; c < h; c++)
                        d[a][c] = 0;
                    if (0 != v) {
                        for (b = d[a][a] * v,
                            c = u; c < h; c++) {
                            for (_ = 0,
                                l = u; l < p; l++)
                                _ += d[l][a] * d[l][c];
                            for (y = _ / b,
                                l = a; l < p; l++)
                                d[l][c] += y * d[l][a]
                        }
                        for (c = a; c < p; c++)
                            d[c][a] = d[c][a] / v
                    } else
                        for (c = a; c < p; c++)
                            d[c][a] = 0;
                    d[a][a] += 1
                }
                for (r *= x,
                    l = h - 1; l != -1; l += -1)
                    for (var S = 0; S < o; S++) {
                        var k = !1;
                        for (u = l; u != -1; u += -1) {
                            if (Math.abs(f[u]) <= r) {
                                k = !0;
                                break
                            }
                            if (Math.abs(m[u - 1]) <= r)
                                break
                        }
                        if (!k) {
                            s = 0,
                                _ = 1;
                            var M = u - 1;
                            for (a = u; a < l + 1 && (y = _ * f[a],
                                f[a] = s * f[a],
                                !(Math.abs(y) <= r)); a++)
                                for (v = m[a],
                                    b = t(y, v),
                                    m[a] = b,
                                    s = v / b,
                                    _ = -y / b,
                                    c = 0; c < p; c++)
                                    w = d[c][M],
                                        E = d[c][a],
                                        d[c][M] = w * s + E * _,
                                        d[c][a] = -w * _ + E * s
                        }
                        if (E = m[l],
                            u == l) {
                            if (E < 0)
                                for (m[l] = -E,
                                    c = 0; c < h; c++)
                                    g[c][l] = -g[c][l];
                            break
                        }
                        if (S >= o - 1)
                            throw "Error: no convergence.";
                        for (x = m[u],
                            w = m[l - 1],
                            v = f[l - 1],
                            b = f[l],
                            y = ((w - E) * (w + E) + (v - b) * (v + b)) / (2 * b * w),
                            v = t(y, 1),
                            y = y < 0 ? ((x - E) * (x + E) + b * (w / (y - v) - b)) / x : ((x - E) * (x + E) + b * (w / (y + v) - b)) / x,
                            s = 1,
                            _ = 1,
                            a = u + 1; a < l + 1; a++) {
                            for (v = f[a],
                                w = m[a],
                                b = _ * v,
                                v *= s,
                                E = t(y, b),
                                f[a - 1] = E,
                                s = y / E,
                                _ = b / E,
                                y = x * s + v * _,
                                v = -x * _ + v * s,
                                b = w * _,
                                w *= s,
                                c = 0; c < h; c++)
                                x = g[c][a - 1],
                                    E = g[c][a],
                                    g[c][a - 1] = x * s + E * _,
                                    g[c][a] = -x * _ + E * s;
                            for (E = t(y, b),
                                m[a - 1] = E,
                                s = y / E,
                                _ = b / E,
                                y = s * v + _ * w,
                                x = -_ * v + s * w,
                                c = 0; c < p; c++)
                                w = d[c][a - 1],
                                    E = d[c][a],
                                    d[c][a - 1] = w * s + E * _,
                                    d[c][a] = -w * _ + E * s
                        }
                        f[u] = 0,
                            f[l] = y,
                            m[l] = x
                    }
                for (a = 0; a < m.length; a++)
                    m[a] < r && (m[a] = 0);
                for (a = 0; a < h; a++)
                    for (c = a - 1; c >= 0; c--)
                        if (m[c] < m[a]) {
                            for (s = m[c],
                                m[c] = m[a],
                                m[a] = s,
                                l = 0; l < d.length; l++)
                                n = d[l][a],
                                    d[l][a] = d[l][c],
                                    d[l][c] = n;
                            for (l = 0; l < g.length; l++)
                                n = g[l][a],
                                    g[l][a] = g[l][c],
                                    g[l][c] = n;
                            a = c
                        }
                return {
                    U: d,
                    S: m,
                    V: g
                }
            }
            ,
            numeric
    }),
    define("math/parsenode/optimizedregression", ["require", "pjs", "./base"], function (e) {
        var t = e("pjs")
            , n = e("./base");
        return t(n, function (e, t) {
            e.init = function (e, n, r, i, o) {
                t.init.call(this),
                    this.parameters = e,
                    this.residuals = n,
                    this.statistics = r,
                    this.model = i,
                    this.isModelValid = o.isModelValid,
                    this.residualVariable = o.residualVariable,
                    this.residualSuggestionId = o.residualSuggestionId,
                    this.shouldSuggestLogMode = o.shouldSuggestLogMode,
                    this._exports = [this.residualVariable];
                for (var s in e)
                    e.hasOwnProperty(s) && this._exports.push(s);
                this.mergeDependencies(i)
            }
                ,
                e.getCompiledFunction = function () {
                    return this.model.getCompiledFunction.apply(this.model, arguments)
                }
                ,
                e.getCompiledDerivative = function () {
                    return this.model.getCompiledDerivative.apply(this.model, arguments)
                }
                ,
                e.evaluate = function () {
                    return this.model.evaluate.apply(this.model, arguments)
                }
        })
    }),
    define("math/parsenode/regression", ["require", "pjs", "./base", "numeric", "math/distance", "math/builtin", "graphing/label", "math/errormsg", "./error", "./optimizedregression", "./list", "./functioncall", "./identifier", "./constant", "./freevariable", "./expressionTypes", "math/types"], function (e) {
        var t = e("pjs")
            , n = e("./base")
            , r = e("numeric")
            , i = e("math/distance")
            , o = e("math/builtin")
            , s = e("graphing/label")
            , a = e("math/errormsg")
            , c = e("./error")
            , l = e("./optimizedregression")
            , u = e("./list")
            , d = e("./functioncall")
            , p = e("./identifier")
            , h = e("./constant")
            , f = e("./freevariable")
            , m = e("./expressionTypes")
            , g = e("math/types")
            , y = m.Subtract;
        return t(n, function (e, t, n) {
            function m(e, t) {
                for (var n = 0, r = e.fn.apply(void 0, t), i = 0; i < r.length; i++) {
                    var o = r[i];
                    n += o * o
                }
                return n / r.length
            }
            function v(e, t) {
                return e.fn.apply(void 0, t)
            }
            function b(e, t) {
                for (var n = [], r = 0; r < e.length; r++) {
                    var i = e[r].fn.apply(void 0, t);
                    n.push(i)
                }
                return n
            }
            function x(e, t, n, i, o) {
                for (var s = [], a = 0; a < t.length; a++)
                    s.push(0);
                for (var c = b(t, s), l = r.LU(r.dot(c, r.transpose(c)), !0), u = s, d = 0; d < 2; d++) {
                    var p = v(e, s)
                        , h = r.neg(r.LUsolve(l, r.dot(c, p)));
                    if (!r.all(r.isFinite(h)))
                        return E(e, t, n, i, o);
                    s = r.add(u, h),
                        u = s
                }
                return {
                    solution: s,
                    MSE: m(e, s)
                }
            }
            function w(e, t, n, i) {
                for (var o = n, s = m(e, o), a = .001, c = 2, l = .1, u = [], d = 0; d < t.length; d++)
                    u.push(1);
                for (var p = 0, h = !1, f = b(t, o), g = o, y = s; p < i && !h;) {
                    var x = v(e, o)
                        , w = r.transpose(f)
                        , E = r.dot(f, w);
                    if (!r.all(r.isFinite(x)))
                        break;
                    if (!r.all(r.isFinite(E)))
                        break;
                    for (var _ = !1; p < i && !h && !_;) {
                        p += 1;
                        var S = r.LU(r.add(E, r.diag(r.mul(a, u))), !0)
                            , k = r.neg(r.LUsolve(S, r.dot(f, x)))
                            , M = k;
                        if (o = r.add(g, M),
                            s = m(e, o),
                            h = r.all(r.eq(o, g))) {
                            g = o,
                                y = s;
                            break
                        }
                        var C;
                        if (isFinite(s) && s <= y && (C = b(t, o),
                            _ = r.all(r.isFinite(C))),
                            _) {
                            f = C,
                                g = o,
                                y = s,
                                a *= l,
                                a = Math.max(1e-64, a);
                            break
                        }
                        a *= c
                    }
                }
                return {
                    solution: g,
                    MSE: m(e, g)
                }
            }
            function E(e, t, n, r, o) {
                var s, a = [];
                for (r || (r = {}),
                    o || (o = {}),
                    s = 0; s < n.length; s++) {
                    var c = n[s];
                    o[c] && isFinite(o[c].constantValue) ? a.push(+o[c].constantValue) : r.hasOwnProperty(c) && isFinite(r[c]) ? a.push(+r[c]) : a.push(1)
                }
                var l = I(30, n)
                    , u = T(e, t, l, 3, 5)
                    , d = T(e, t, u, 60, 1)
                    , p = w(e, t, d[0], 250)
                    , h = w(e, t, a, 100);
                return isFinite(h.MSE) ? h.MSE < p.MSE ? h : i.approx(h.MSE, p.MSE, 8) ? h : p : p
            }
            function _(e, t, n, r) {
                var i, o, s = t.getDependencies();
                for (o = 0; o < s.length; o++)
                    if (!e.validRegressionParameter(s[o]))
                        throw a.invalidRegressionParameter(s[o]);
                var c = t.getCompiledFunction(s);
                if (s.length) {
                    var l = {};
                    for (o = 1; o < s.length; o++)
                        l[s[o]] = f(s[0]);
                    var u = t.substitute(l).isLinear(s[0])
                        , d = [];
                    for (o = 0; o < s.length; o++)
                        d.push(t.takeDerivative(s[o]).getCompiledFunction(s));
                    i = u ? x(c, d, s, n, r) : E(c, d, s, n, r)
                } else
                    i = {
                        solution: [],
                        MSE: m(c, [])
                    };
                var p = {};
                for (o = 0; o < s.length; o++)
                    p[s[o]] = h(i.solution[o]);
                return p
            }
            function S(e, t) {
                var n = e.length
                    , r = e[0]
                    , o = t[0]
                    , s = e[n - 1]
                    , a = t[n - 1];
                if (!(isFinite(r) && isFinite(s) && isFinite(o) && isFinite(a)))
                    return !1;
                if (a - o === 0)
                    return !1;
                var c = s - r;
                if (0 === c)
                    return !1;
                for (var l = 1; l < n - 1; l++) {
                    var u = e[l]
                        , d = t[l]
                        , p = (a * (u - r) + o * (s - u)) / c;
                    if (!i.approx(d, p, 5))
                        return !1
                }
                return !0
            }
            function k(e, t, n) {
                var r = Object.create(t);
                for (var i in n)
                    n.hasOwnProperty(i) && (r[i] = n[i]);
                return u.wrap(e.getConcreteTree(r))
            }
            e.init = function (e, n) {
                t.init.call(this),
                    this._lhs = e,
                    this.isLhsSimple = e instanceof p || e instanceof u,
                    this._logLhs = d("ln", [e]),
                    this._rhs = n,
                    this._difference = y([e, n]),
                    this._logDifference = y([d("ln", [e]), d("ln", [n])]),
                    this.mergeDependencies(e, n)
            }
                ,
                e.isRegression = !0,
                e.chooseResidualVariable = function (e) {
                    if (this.userData && this.userData.residualVariable) {
                        var t = s.latexToIdentifier(this.userData.residualVariable);
                        if (!e[t])
                            return t
                    }
                    for (var n, r = this.getDependencies(), i = 0; i < r.length; i++) {
                        var o = r[i].match(/_(.*)/);
                        if (o && (n = "e_" + o[1],
                            !e[n]))
                            return n
                    }
                    for (var a = 1; ;) {
                        if (n = "e_" + a,
                            !e[n])
                            return n;
                        a++
                    }
                }
                ,
                e.getRHSModel = function (e, t) {
                    function n(e, t) {
                        for (var n = 0; n < r.length; n++)
                            if (r[n].node === this)
                                return r[n].tmpVar;
                        var o = f(this.tmpVar())
                            , s = this.getConcreteTree(e);
                        return s.getDependencies().length && (i = !1),
                            r.push({
                                node: this,
                                tmpVar: o,
                                symbol: o._symbol,
                                concrete: s
                            }),
                            o
                    }
                    var r = []
                        , i = !0
                        , o = {
                            List: n,
                            TableColumn: n,
                            Range: n
                        }
                        , s = this._rhs.tryGetConcreteTree(e, o);
                    return {
                        node: s,
                        substituted: s.isError ? s : s.substitute(t),
                        replacedNodes: r,
                        isValid: i
                    }
                }
                ;
            var M = [18.9, .105, .0113, .089, 4.414, 34.32, 8.61, .373, .06, .149, 1.84, 9.26, 5, .7, .2, 1.13, 2.61, 1.89, 1, .007, 30, 120, 1500, 4e-4, 7.23, -1, -.0081, -.03, -28.6, -1.71, -.4, -6.94, -.777]
                , C = function (e) {
                    var t = 503 * e % M.length;
                    return M[t]
                }
                , I = function (e, t) {
                    for (var n, r = [], i = t.length, o = 0; o < e; o++) {
                        n = [];
                        for (var s = 0; s < i; s++)
                            0 === o ? n[s] = 0 : 1 === o ? n[s] = 1 : n[s] = C(o * i + s);
                        r.push(n)
                    }
                    return r
                }
                , T = function (e, t, n, r, i) {
                    for (var o = [], s = 0; s < n.length; s++)
                        o.push({
                            soln: w(e, t, n[s], r),
                            startingVals: n[s]
                        });
                    o.sort(function (e, t) {
                        return isNaN(e.soln.MSE) ? 1 : isNaN(t.soln.MSE) ? -1 : e.soln.MSE - t.soln.MSE
                    });
                    for (var a = [], c = 0; c < i; c++)
                        a.push(o[c].startingVals);
                    return a
                };
            e.computeStatistics = function (e, t, n, r, s) {
                if (n.getDependencies().length)
                    throw a.optimizationError();
                var c = 0;
                n.eachElement(function (e) {
                    var t = e.constantValue;
                    c += t * t
                });
                var l = c / n.length;
                if (!isFinite(l))
                    throw a.optimizationError();
                if (e.getDependencies().length > 0)
                    return {
                        RMSE: Math.sqrt(l)
                    };
                var d = g.isList(e.valueType) ? o.varp(e.asValue()) : 0;
                if (e.getDependencies().length || !isFinite(d) || d <= 0 || !this.isLhsSimple)
                    return {
                        RMSE: Math.sqrt(l)
                    };
                var p = 1 - l / d;
                if (t.isValid && 1 === t.replacedNodes.length) {
                    var h = []
                        , f = []
                        , m = r && (s === P.LINLOG || s === P.LOGLOG);
                    u.eachArgs([t.replacedNodes[0].concrete, e], function (e) {
                        h.push(m ? Math.log(e[0].constantValue) : +e[0].constantValue),
                            f.push(+e[1].constantValue)
                    });
                    var y = o.corr(h, f);
                    if (i.approx(y * y, p, 8))
                        return {
                            r: y,
                            rsquared: y * y
                        }
                }
                return {
                    Rsquared: p
                }
            }
                ,
                e.getResidualSuggestionId = function (e, t) {
                    var n, r = this._rhs.getDependencies();
                    for (var i in t)
                        if (t.hasOwnProperty(i) && t[i].concreteTree.isTable && t[i].concreteTree.columns[0]) {
                            var o = t[i].rawTree.columns;
                            if (o && o.length) {
                                var s = o[0].getExports();
                                if (1 === s.length && r.indexOf(s[0]) !== -1) {
                                    for (var a = 1; a < o.length; a++)
                                        if (o[a].getDependencies().indexOf(e) !== -1)
                                            return;
                                    n = n ? n : i
                                }
                            }
                        }
                    return n ? n : void 0
                }
                ;
            var P = {
                NONE: 0,
                LOGLIN: 1,
                LOGLOG: 2,
                LINLOG: 3
            };
            e.linearizingTransformation = function (e, t) {
                if (!this.isLhsSimple)
                    return P.NONE;
                var n = t.substituted;
                if (n.isError)
                    return P.NONE;
                if (n.valueType !== g.Number)
                    return P.NONE;
                var r = n.getDependencies();
                if (1 !== r.length)
                    return P.NONE;
                if (isFinite(t.node.polynomialOrder(r[0])))
                    return P.NONE;
                var i = n.getCompiledFunction(r).fn
                    , o = t.replacedNodes[0].concrete;
                if (n.valueType !== g.Number)
                    return P.NONE;
                var s = o.mapElements(function (e) {
                    return +e.constantValue
                });
                if (s.length < 3)
                    return P.NONE;
                s.sort(function (e, t) {
                    return e - t
                });
                var a = s.map(i)
                    , c = a.map(Math.log)
                    , l = s.map(Math.log)
                    , d = !0;
                return u.wrap(e).eachElement(function (e) {
                    isFinite(Math.log(+e.constantValue)) || (d = !1)
                }),
                    S(s, c) && d ? P.LOGLIN : S(l, c) && d ? P.LOGLOG : S(l, a) ? P.LINLOG : P.NONE
            }
                ,
                e.optimize = function (e, t, n, r, i) {
                    var o = this._lhs.getConcreteTree(t)
                        , a = this._rhs.getConcreteTree(t);
                    this.typeCheck([o, a]);
                    var c, d = u.wrap(this._difference.getConcreteTree(t)), p = _(e, d, this.userData.regressionParameters, r), h = this.getRHSModel(t, p), f = k(this._difference, t, p), m = this.linearizingTransformation(o, h);
                    if (!this.userData.isLogModeRegression || m !== P.LOGLIN && m !== P.LOGLOG)
                        c = this.computeStatistics(o, h, f, this.userData.isLogModeRegression, m);
                    else {
                        var g = this._logDifference.getConcreteTree(t)
                            , y = this._logLhs.getConcreteTree(t);
                        p = _(e, g, this.userData.regressionParamters, r),
                            h = this.getRHSModel(t, p),
                            f = k(this._difference, t, p);
                        var v = k(this._logDifference, t, p);
                        c = this.computeStatistics(y, h, v, this.userData.isLogModeRegression, m)
                    }
                    var b = this.chooseResidualVariable(n)
                        , x = this.getResidualSuggestionId(b, i);
                    return this.userData.residualVariable = s.identifierToLatex(b),
                        l(p, f, c, h.substituted, {
                            isModelValid: h.isValid,
                            residualVariable: b,
                            residualSuggestionId: x,
                            shouldSuggestLogMode: m !== P.NONE
                        })
                }
                ,
                e.tryOptimize = function () {
                    try {
                        return this.optimize.apply(this, arguments)
                    } catch (e) {
                        if (e instanceof c)
                            return e;
                        throw e
                    }
                }
                ,
                e.exportTo = function (e, t, n) {
                    if (!t.isError) {
                        for (var r in t.parameters)
                            t.parameters.hasOwnProperty(r) && (e.assignmentForbidden(r) || (n[r] = n[r] ? a.multiplyDefined(r) : t.parameters[r]));
                        e.assignmentForbidden(t.residualVariable) || (n[t.residualVariable] = t.residuals)
                    }
                }
                ,
                e.getSliderVariables = function () {
                    return []
                }
        })
    }),
    define("math/parsenode/image", ["require", "pjs", "./base"], function (e) {
        var t = e("pjs")
            , n = e("./base");
        return t(n, function (e, t, n, r) {
            e.isImage = !0,
                e.init = function (e, n) {
                    t.init.call(this),
                        this.center = e.center,
                        this.radianAngle = e.radianAngle,
                        this.width = e.width,
                        this.height = e.height,
                        this.moveStrategy = n,
                        this.mergeDependencies(this.center, this.radianAngle, this.width, this.height)
                }
        })
    }),
    define("math/parsenode/table", ["require", "pjs", "./base"], function (e) {
        var t = e("pjs")
            , n = e("./base");
        return t(n, function (e, t) {
            e.init = function (e) {
                t.init.call(this),
                    this.columns = e,
                    this._exports = [],
                    this.mergeDependencies.apply(this, e);
                for (var n = 0; n < e.length; n++)
                    Array.prototype.push.apply(this._exports, e[n].getExports())
            }
                ,
                e.exportPenalty = 1,
                e.isTable = !0,
                e.exportTo = function (e, t, n) {
                    for (var r = 0; r < this.columns.length; r++) {
                        var i = this.columns[r].getExports();
                        if (i.length) {
                            var o = i[0];
                            e.assignmentForbidden(o) || n[o] || (t.isError ? n[o] = t : this.columns[r].exportTo(e, t.columns[r], n))
                        }
                    }
                }
                ,
                e.getAllIds = function () {
                    return this.columns.map(function (e) {
                        return e.header.userData.id
                    })
                }
        })
    }),
    define("math/parsenode/tablecolumn", ["require", "pjs", "./base", "./list", "./constant", "./identifier"], function (e) {
        var t = e("pjs")
            , n = e("./base")
            , r = e("./list")
            , i = e("./constant")
            , o = e("./identifier");
        return t(n, function (e, t) {
            function s(e) {
                return e.isError ? i(NaN) : e
            }
            e.init = function (e, n, r) {
                t.init.call(this),
                    this.header = e,
                    this.length = n,
                    this.values = r,
                    this.isIndependent = !1,
                    this.registerDependencies(),
                    this._exports = this.computeExports()
            }
                ,
                e.registerDependencies = function () {
                    this.mergeDependencies(this.header),
                        this.mergeDependencies.apply(this, this.values)
                }
                ,
                e.computeExports = function () {
                    return this.header instanceof o ? [this.header._symbol] : []
                }
                ,
                e.isDiscrete = function (e) {
                    return 1 !== this.header.getDependencies().length || 1 !== e.header.getDependencies().length || this.header.getDependencies()[0] !== e.header.getDependencies()[0]
                }
                ,
                e._exportSymbolsTo = function (e, t, i) {
                    if (e.length) {
                        var o = e[0];
                        if (t.isError)
                            i[o] = t;
                        else
                            try {
                                i[o] = r(t.values.map(s))
                            } catch (e) {
                                if (!(e instanceof n))
                                    throw e;
                                i[o] = e
                            }
                    }
                }
                ,
                e.exportTo = function (e, t, n) {
                    var r = this.getLegalExports(e);
                    this._exportSymbolsTo(r, t, n)
                }
                ,
                e.exportToLocal = function (e, t) {
                    this._exportSymbolsTo(this.getExports(), e, t)
                }
        })
    }),
    define("math/parsenode/solvedequation", ["require", "pjs", "./base"], function (e) {
        var t = e("pjs")
            , n = e("./base");
        return t(n, function (e, t) {
            e.init = function (e, n) {
                t.init.call(this),
                    this._symbol = e,
                    this._expression = n,
                    this.mergeDependencies(n)
            }
                ,
                e.getCompiledFunction = function () {
                    return this._expression.getCompiledFunction.apply(this._expression, arguments)
                }
                ,
                e.getCompiledDerivative = function () {
                    return this._expression.getCompiledDerivative.apply(this._expression, arguments)
                }
                ,
                e.evaluate = function () {
                    return this._expression.evaluate.apply(this._expression, arguments)
                }
        })
    }),
    define("parsenodes", ["require", "math/parsenode/expressionTypes", "math/parsenode/base", "math/parsenode/expression", "math/parsenode/scalarexpression", "math/parsenode/error", "math/parsenode/constant", "math/parsenode/identifier", "math/parsenode/ans", "math/parsenode/freevariable", "math/parsenode/dummyindex", "math/parsenode/list", "math/parsenode/range", "math/parsenode/broadcast", "math/parsenode/listaccess", "math/parsenode/orderedpair", "math/parsenode/movablepoint", "math/parsenode/orderedpairaccess", "math/parsenode/polygon", "math/parsenode/basecomparator", "math/parsenode/comparator", "math/parsenode/doubleinequality", "math/parsenode/repeatedoperator", "math/parsenode/sum", "math/parsenode/product", "math/parsenode/integral", "math/parsenode/functioncall", "math/parsenode/functionexponent", "math/parsenode/prime", "math/parsenode/piecewise", "math/parsenode/derivative", "math/parsenode/builtinfunction", "math/parsenode/nativefunction", "math/parsenode/typedfunction", "math/parsenode/reducerfunction", "math/parsenode/parametrizedreducerfunction", "math/parsenode/doublereducerfunction", "math/parsenode/assignment", "math/parsenode/functiondefinition", "math/parsenode/equation", "math/parsenode/regression", "math/parsenode/image", "math/parsenode/table", "math/parsenode/tablecolumn", "math/parsenode/solvedequation", "math/parsenode/optimizedregression"], function (e) {
        var t = e("math/parsenode/expressionTypes")
            , n = {
                Base: e("math/parsenode/base"),
                Expression: e("math/parsenode/expression"),
                ScalarExpression: e("math/parsenode/scalarexpression"),
                Error: e("math/parsenode/error"),
                Constant: e("math/parsenode/constant"),
                Identifier: e("math/parsenode/identifier"),
                Ans: e("math/parsenode/ans"),
                FreeVariable: e("math/parsenode/freevariable"),
                DummyIndex: e("math/parsenode/dummyindex"),
                List: e("math/parsenode/list"),
                Range: e("math/parsenode/range"),
                Broadcast: e("math/parsenode/broadcast"),
                ListAccess: e("math/parsenode/listaccess"),
                OrderedPair: e("math/parsenode/orderedpair"),
                MovablePoint: e("math/parsenode/movablepoint"),
                OrderedPairAccess: e("math/parsenode/orderedpairaccess"),
                Polygon: e("math/parsenode/polygon"),
                BaseComparator: e("math/parsenode/basecomparator"),
                Comparator: e("math/parsenode/comparator"),
                DoubleInequality: e("math/parsenode/doubleinequality"),
                RepeatedOperator: e("math/parsenode/repeatedoperator"),
                Sum: e("math/parsenode/sum"),
                Product: e("math/parsenode/product"),
                Integral: e("math/parsenode/integral"),
                FunctionCall: e("math/parsenode/functioncall"),
                FunctionExponent: e("math/parsenode/functionexponent"),
                Prime: e("math/parsenode/prime"),
                Piecewise: e("math/parsenode/piecewise"),
                Derivative: e("math/parsenode/derivative"),
                BuiltInFunction: e("math/parsenode/builtinfunction"),
                NativeFunction: e("math/parsenode/nativefunction"),
                TypedFunction: e("math/parsenode/typedfunction"),
                ReducerFunction: e("math/parsenode/reducerfunction"),
                ParametrizedReducerFunction: e("math/parsenode/parametrizedreducerfunction"),
                DoubleReducerFunction: e("math/parsenode/doublereducerfunction"),
                Assignment: e("math/parsenode/assignment"),
                FunctionDefinition: e("math/parsenode/functiondefinition"),
                Equation: e("math/parsenode/equation"),
                Regression: e("math/parsenode/regression"),
                Image: e("math/parsenode/image"),
                Table: e("math/parsenode/table"),
                TableColumn: e("math/parsenode/tablecolumn"),
                SolvedEquation: e("math/parsenode/solvedequation"),
                OptimizedRegression: e("math/parsenode/optimizedregression")
            };
        for (var r in t)
            n[r] = t[r];
        for (var i in n)
            n.hasOwnProperty(i) && "Comparator" !== i && "BuiltInFunction" !== i && (n[i].prototype.type = i);
        for (var o in n.Comparator)
            n.Comparator.hasOwnProperty(o) && (n.Comparator[o].prototype.type = "Comparator['" + o + "']");
        for (var s in n.BuiltInFunction)
            n.BuiltInFunction.hasOwnProperty(s) && (n.BuiltInFunction[s].prototype.type = "BuiltInFunction['" + s + "']");
        return n
    }),
    define("math/parser/char-codes", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            return 48 <= e && e <= 57
        }
        function r(e) {
            return 97 <= e && e <= 122
        }
        function i(e) {
            return 65 <= e && e <= 90
        }
        function o(e) {
            return r(e) || i(e)
        }
        function s(e) {
            return 92 === e
        }
        function a(e) {
            return 46 === e
        }
        function c(e) {
            return 39 === e
        }
        function l(e) {
            if (9 <= e && e <= 13)
                return !0;
            if (8192 <= e && e <= 8202)
                return !0;
            switch (e) {
                case 32:
                case 160:
                case 5760:
                case 8232:
                case 8233:
                case 8239:
                case 8287:
                case 12288:
                case 65279:
                    return !0;
                default:
                    return !1
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.isDigit = n,
            t.isLowerCaseLetter = r,
            t.isUpperCaseLetter = i,
            t.isLetter = o,
            t.isBackslash = s,
            t.isDot = a,
            t.isSingleQuote = c,
            t.isWhitespace = l
    }),
    define("math/parser/input-span", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t, n) {
            return {
                input: e,
                start: t,
                end: n
            }
        }
        function r(e, t) {
            return n(e, t, t)
        }
        function i(e, t) {
            if (e.input !== t.input)
                throw new Error("Programming Error: cannot form a span on different inputs");
            return n(e.input, e.start, t.end)
        }
        function o(e) {
            return e.input.slice(e.start, e.end)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.Span = n,
            t.emptySpanAt = r,
            t.joinSpans = i,
            t.slice = o
    }),
    define("math/parser/latex-lexer", ["require", "exports", "./char-codes", "./input-span"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            return r.joinSpans(e.token.span, t.prevSpan)
        }
        function o(e, t, n) {
            return {
                type: e,
                span: t,
                val: n
            }
        }
        function s(e, t, n, r) {
            return {
                input: e,
                prevSpan: t,
                pos: n,
                token: r
            }
        }
        function a(e) {
            return c(e, 0, r.emptySpanAt(e, 0))
        }
        function c(e, t, r) {
            for (; n.isWhitespace(e.charCodeAt(t));)
                t += 1;
            var i = f(e, t);
            return s(e, r, t, i)
        }
        function l(e) {
            return c(e.input, e.token.span.end, e.token.span)
        }
        function u(e) {
            return e.token
        }
        function d(e, t) {
            if (u(e).type !== t)
                throw "Parse Error: expected " + t + ".";
            return l(e)
        }
        function p(e, t) {
            return u(e).type === t
        }
        function h(e) {
            return e.pos >= e.input.length
        }
        function f(e, t) {
            var i = t;
            if (t >= e.length)
                return o("End", r.emptySpanAt(e, t), "");
            var s = e.charCodeAt(t);
            if (n.isDigit(s)) {
                var a = r.Span(e, i, t + 1);
                return o("Digit", a, e.charAt(i))
            }
            if (n.isLetter(s)) {
                var a = r.Span(e, i, t + 1);
                return o("Letter", a, e.charAt(i))
            }
            if (n.isBackslash(s)) {
                if (t += 1,
                    n.isLetter(e.charCodeAt(t))) {
                    for (; n.isLetter(e.charCodeAt(t));)
                        t += 1;
                    var a = r.Span(e, i, t)
                        , c = r.slice(a)
                        , l = m[c] || "Cmd";
                    return o(l, a, c)
                }
                t += 1;
                var a = r.Span(e, i, t)
                    , c = r.slice(a);
                return o("EscapedSymbol", a, c)
            }
            if (n.isSingleQuote(s)) {
                for (t += 1; n.isSingleQuote(e.charCodeAt(t));)
                    t += 1;
                if ("^" === e.charAt(t)) {
                    t += 1;
                    var a = r.Span(e, i, t)
                        , c = r.slice(a);
                    return o("Primes^", a, c)
                }
                var a = r.Span(e, i, t)
                    , c = r.slice(a);
                return o("Primes", a, c)
            }
            var a = r.Span(e, i, t + 1)
                , c = e.charAt(i)
                , l = g[c] || "Symbol";
            return o(l, a, c)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.spanStates = i,
            t.LatexToken = o,
            t.lex = a,
            t.advance = l,
            t.peek = u,
            t.eat = d,
            t.isAt = p,
            t.isDone = h;
        var m = {
            "\\left": "Left",
            "\\right": "Right",
            "\\sqrt": "Sqrt",
            "\\frac": "Frac",
            "\\operatorname": "OperatorName"
        }
            , g = {
                "[": "[",
                "]": "]",
                "{": "{",
                "}": "}",
                "^": "^",
                _: "_"
            }
    }),
    define("math/parser/latex-node", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            return {
                type: "Group",
                span: e,
                args: t
            }
        }
        function r(e, t, n) {
            return {
                type: "Sqrt",
                span: e,
                optArg: t,
                arg: n
            }
        }
        function i(e, t, n) {
            return {
                type: "Frac",
                span: e,
                num: t,
                den: n
            }
        }
        function o(e, t, n, r) {
            return {
                type: "SupSub",
                span: e,
                sup: t,
                sub: n,
                nprimes: r
            }
        }
        function s(e, t, n, r) {
            return {
                type: "LeftRight",
                span: e,
                left: t,
                right: n,
                arg: r
            }
        }
        function a(e, t) {
            return {
                type: "OperatorName",
                span: e,
                arg: t
            }
        }
        function c(e, t) {
            return {
                type: "Symbol",
                span: e,
                val: t
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.Group = n,
            t.Sqrt = r,
            t.Frac = i,
            t.SupSub = o,
            t.LeftRight = s,
            t.OperatorName = a,
            t.Symbol = c
    }),
    define("math/parser/latex-parser", ["require", "exports", "./latex-lexer", "./input-span", "./latex-node"], function (e, t, n, r, i) {
        "use strict";
        function o(e) {
            switch (e) {
                case "Frac":
                    return 2;
                case "^":
                case "_":
                case "Primes^":
                case "Left":
                case "Frac":
                case "Sqrt":
                case "OperatorName":
                    return 1;
                default:
                    return 0
            }
        }
        function s(e) {
            var t = c(n.lex(e), !1)
                , i = t.state
                , o = t.tree;
            if (!n.isDone(i))
                throw "Parse error: unexpected " + r.slice(n.peek(i).span) + ".";
            return o
        }
        function a(e, t) {
            return {
                state: e,
                tree: t
            }
        }
        function c(e, t) {
            var r = e
                , o = [];
            e: for (; !n.isDone(e);) {
                var s = n.peek(e);
                switch (s.type) {
                    case "Cmd":
                    case "EscapedSymbol":
                    case "Letter":
                    case "Digit":
                    case "Symbol":
                    case "[":
                    case "{":
                    case "^":
                    case "_":
                    case "Primes":
                    case "Primes^":
                    case "Left":
                    case "Frac":
                    case "Sqrt":
                    case "OperatorName":
                    case "]":
                        if ("]" === s.type && t)
                            break e;
                        var c = void 0;
                        if (m = l(e),
                            e = m.state,
                            c = m.tree,
                            "Group" === c.type)
                            for (var u = 0, d = c.args; u < d.length; u++) {
                                var p = d[u];
                                o.push(p)
                            }
                        else
                            o.push(c);
                        break;
                    case "}":
                    case "Right":
                    case "End":
                        break e;
                    default:
                        var h = s.type;
                        throw "Unexpected token type " + h + "."
                }
            }
            var f = n.spanStates(r, e);
            return a(e, i.Group(f, o));
            var m
        }
        function l(e) {
            var t = n.peek(e);
            switch (t.type) {
                case "Cmd":
                case "EscapedSymbol":
                case "Letter":
                case "Digit":
                case "Symbol":
                    return e = n.advance(e),
                        a(e, t);
                case "[":
                case "]":
                    return e = n.advance(e),
                        a(e, i.Symbol(t.span, t.val));
                case "{":
                    e = n.advance(e);
                    var r = void 0;
                    return s = c(e, !1),
                        e = s.state,
                        r = s.tree,
                        e = n.eat(e, "}"),
                        a(e, r);
                case "^":
                case "_":
                case "Primes":
                case "Primes^":
                    return f(e);
                case "Left":
                    return h(e);
                case "Frac":
                    return p(e);
                case "Sqrt":
                    return d(e);
                case "OperatorName":
                    return u(e);
                case "}":
                case "Right":
                    throw "Parse Error: unexpected " + t.val + ".";
                case "End":
                    throw "Parse Error: unexpected end.";
                default:
                    var o = t.type;
                    throw "Unexpected token type " + o + "."
            }
            var s
        }
        function u(e) {
            var t = e
                , r = n.peek(e);
            e = n.eat(e, "OperatorName");
            var o;
            c = m(e, r),
                e = c.state,
                o = c.tree;
            var s = n.spanStates(t, e);
            return a(e, i.OperatorName(s, o));
            var c
        }
        function d(e) {
            var t = e
                , r = n.peek(e);
            e = n.eat(e, "Sqrt");
            var o;
            n.isAt(e, "[") && (l = g(e),
                e = l.state,
                o = l.tree);
            var s;
            u = m(e, r),
                e = u.state,
                s = u.tree;
            var c = n.spanStates(t, e);
            return a(e, i.Sqrt(c, o, s));
            var l, u
        }
        function p(e) {
            var t = e
                , r = n.peek(e);
            e = n.eat(e, "Frac");
            var o;
            l = m(e, r),
                e = l.state,
                o = l.tree;
            var s;
            u = m(e, r),
                e = u.state,
                s = u.tree;
            var c = n.spanStates(t, e);
            return a(e, i.Frac(c, o, s));
            var l, u
        }
        function h(e) {
            var t = e;
            e = n.eat(e, "Left");
            var r = n.peek(e);
            e = n.advance(e);
            var o;
            u = c(e, !1),
                e = u.state,
                o = u.tree,
                e = n.eat(e, "Right");
            var s = n.peek(e);
            e = n.advance(e);
            var l = n.spanStates(t, e);
            return a(e, i.LeftRight(l, r, s, o));
            var u
        }
        function f(e) {
            var t, r, o = e, s = 0;
            e: for (; !n.isDone(e);) {
                var c = n.peek(e);
                switch (c.type) {
                    case "^":
                        if (e = n.advance(e),
                            t)
                            throw "Parse Error: double superscript.";
                        u = m(e, c),
                            e = u.state,
                            t = u.tree;
                        break;
                    case "_":
                        if (e = n.advance(e),
                            r)
                            throw "Parse Error: double subscript.";
                        d = m(e, c),
                            e = d.state,
                            r = d.tree;
                        break;
                    case "Primes":
                        if (e = n.advance(e),
                            s > 0)
                            throw "Parse Error: double primes.";
                        s = c.val.length;
                        break;
                    case "Primes^":
                        if (e = n.advance(e),
                            s > 0)
                            throw "Parse Error: double primes.";
                        if (t)
                            throw "Parse Error: double superscript";
                        s = c.val.length - 1,
                            p = m(e, c),
                            e = p.state,
                            t = p.tree;
                        break;
                    default:
                        break e
                }
            }
            var l = n.spanStates(o, e);
            return a(e, i.SupSub(l, t, r, s));
            var u, d, p
        }
        function m(e, t) {
            var s, c = o(t.type);
            if (c <= 0)
                throw new Error("Programming Error: greediness must be greater than 0.");
            var u = o(n.peek(e).type);
            if (u > 0 && u <= c) {
                var d = r.slice(t.span)
                    , p = r.slice(n.peek(e).span);
                throw "Parse Error: can't use " + p + " as argument of " + d + ". Use {}."
            }
            return h = l(e),
                e = h.state,
                s = h.tree,
                "Group" !== s.type && (s = i.Group(s.span, [s])),
                a(e, s);
            var h
        }
        function g(e) {
            e = n.eat(e, "[");
            var t;
            return r = c(e, !0),
                e = r.state,
                t = r.tree,
                e = n.eat(e, "]"),
                a(e, t);
            var r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.parse = s
    }),
    define("math/parser/command-aliases", ["require", "exports", "./char-codes"], function (e, t, n) {
        "use strict";
        function r(e) {
            for (var t = 0; n.isBackslash(e.charCodeAt(t));)
                t += 1;
            return t > 0 && (e = e.slice(t)),
                i[e] || e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = {
            mcd: "gcd",
            gcf: "gcd",
            mcm: "lcm",
            signum: "sign",
            stdDevP: "stdevp",
            stddevp: "stdevp",
            stdDev: "stdev",
            stddev: "stdev",
            variance: "var"
        };
        t.translateCmd = r
    }),
    define("math/parser/surface-node", ["require", "exports", "./command-aliases"], function (e, t, n) {
        "use strict";
        function r(e, t) {
            return {
                type: "Equals",
                span: e,
                args: t
            }
        }
        function i(e, t, n) {
            return {
                type: "Inequality",
                span: e,
                symbol: t,
                args: n
            }
        }
        function o(e, t, n) {
            return {
                type: "TrailingInequalityPiece",
                span: e,
                symbol: t,
                args: n
            }
        }
        function s(e, t, n) {
            return {
                type: "InequalityChain",
                span: e,
                first: t,
                chain: n
            }
        }
        function a(e, t) {
            return {
                type: "Tilde",
                span: e,
                args: t
            }
        }
        function c(e, t) {
            return {
                type: "Pos",
                span: e,
                args: t
            }
        }
        function l(e, t) {
            return {
                type: "Neg",
                span: e,
                args: t
            }
        }
        function u(e, t) {
            return {
                type: "Add",
                span: e,
                args: t
            }
        }
        function d(e, t) {
            return {
                type: "Sub",
                span: e,
                args: t
            }
        }
        function p(e, t) {
            return {
                type: "Mul",
                span: e,
                args: t
            }
        }
        function h(e, t) {
            return {
                type: "Div",
                span: e,
                args: t
            }
        }
        function f(e, t) {
            return {
                type: "Bang",
                span: e,
                args: t
            }
        }
        function m(e, t) {
            return {
                type: "Call",
                span: e,
                args: t
            }
        }
        function g(e, t) {
            return {
                type: "ImplicitCall",
                span: e,
                args: t
            }
        }
        function y(e, t) {
            return {
                type: "Index",
                span: e,
                args: t
            }
        }
        function v(e, t) {
            return {
                type: "Paren",
                span: e,
                args: t
            }
        }
        function b(e, t) {
            return {
                type: "List",
                span: e,
                args: t
            }
        }
        function x(e, t) {
            return {
                type: "Pipes",
                span: e,
                args: t
            }
        }
        function w(e, t) {
            return {
                type: "Subscript",
                span: e,
                args: t
            }
        }
        function E(e, t) {
            return {
                type: "Superscript",
                span: e,
                args: t
            }
        }
        function _(e, t, n) {
            return {
                type: "Prime",
                span: e,
                nprimes: t,
                args: n
            }
        }
        function S(e, t) {
            return {
                type: "Seq",
                span: e,
                args: t
            }
        }
        function k(e, t) {
            return {
                type: "Sqrt",
                span: e,
                args: t
            }
        }
        function M(e, t) {
            return {
                type: "Nthroot",
                span: e,
                args: t
            }
        }
        function C(e, t) {
            return {
                type: "Frac",
                span: e,
                args: t
            }
        }
        function I(e, t) {
            return {
                type: "Derivative",
                span: e,
                args: t
            }
        }
        function T(e, t) {
            return {
                type: "Integral",
                span: e,
                args: t
            }
        }
        function P(e, t) {
            return {
                type: "EmptyIntegral",
                span: e,
                args: t
            }
        }
        function A(e, t) {
            return {
                type: "Sum",
                span: e,
                args: t
            }
        }
        function L(e, t) {
            return {
                type: "Product",
                span: e,
                args: t
            }
        }
        function O(e, t) {
            return {
                type: "Piecewise",
                span: e,
                args: t
            }
        }
        function D(e) {
            return {
                type: "EmptyPiecewise",
                span: e
            }
        }
        function q(e, t) {
            return {
                type: "Colon",
                span: e,
                args: t
            }
        }
        function N(e, t) {
            return {
                type: "Ellipsis",
                span: e,
                args: t
            }
        }
        function F(e, t) {
            return {
                type: "PercentOf",
                span: e,
                args: t
            }
        }
        function R(e, t) {
            return {
                type: "Juxt",
                span: e,
                args: t
            }
        }
        function j(e, t) {
            return {
                type: "Letter",
                span: e,
                val: t
            }
        }
        function B(e, t) {
            return {
                type: "Decimal",
                span: e,
                val: t
            }
        }
        function V(e, t) {
            return {
                type: "Cmd",
                span: e,
                val: n.translateCmd(t)
            }
        }
        function U(e, t) {
            return {
                type: "Alphanumeric",
                span: e,
                val: t
            }
        }
        function G(e, t, n, r) {
            return {
                type: "MixedNumber",
                span: e,
                whole: t,
                num: n,
                den: r
            }
        }
        function z(e) {
            if ("Subscript" === e.type) {
                if ("Alphanumeric" !== e.args[1].type)
                    return !1;
                e = e.args[0]
            }
            switch (e.type) {
                case "Cmd":
                    return !0;
                case "Letter":
                    return !0;
                default:
                    return !1
            }
        }
        function H(e) {
            return "Superscript" === e.type && z(e.args[0])
        }
        function W(e, t) {
            if ("Letter" !== e.type || "d" !== e.val)
                return !1;
            if ("Juxt" !== t.type)
                return !1;
            var n = t.args
                , r = n[0]
                , i = n[1];
            return "Letter" === r.type && "d" === r.val && z(i)
        }
        function Y(e) {
            switch (e.type) {
                case "Letter":
                case "Cmd":
                case "Mul":
                case "Div":
                case "Prime":
                case "Call":
                case "ImplicitCall":
                case "Pipes":
                case "Sqrt":
                case "Nthroot":
                case "Frac":
                case "Derivative":
                case "Integral":
                case "EmptyIntegral":
                case "Sum":
                case "Product":
                case "Piecewise":
                case "EmptyPiecewise":
                case "Paren":
                case "Juxt":
                    return !0;
                case "Subscript":
                case "Superscript":
                case "Bang":
                case "Index":
                    return Y(e.args[0]);
                case "Decimal":
                case "MixedNumber":
                case "Equals":
                case "Inequality":
                case "InequalityChain":
                case "Tilde":
                case "Pos":
                case "Neg":
                case "Add":
                case "Sub":
                case "List":
                case "Seq":
                case "Colon":
                case "Ellipsis":
                case "PercentOf":
                    return !1;
                default:
                    var t = e;
                    throw "Unexpected surface node " + t.type + "."
            }
        }
        function $(e) {
            switch (e.type) {
                case "Letter":
                case "Decimal":
                case "MixedNumber":
                case "Cmd":
                case "EmptyPiecewise":
                    return !0;
                case "Neg":
                    for (var t = e.args[0]; ;)
                        if ("Pos" === t.type || "Paren" === t.type)
                            t = t.args[0];
                        else {
                            if ("Neg" !== t.type)
                                break;
                            t = t.args[0]
                        }
                    return "Decimal" === t.type || "MixedNumber" === t.type;
                case "Pos":
                    return $(e.args[0]);
                case "Paren":
                    return $(e.args[0]);
                case "Juxt":
                case "Mul":
                case "Div":
                    return $(e.args[0]) && $(e.args[1]);
                case "Subscript":
                    return $(e.args[0]);
                case "Superscript":
                case "Frac":
                case "Add":
                case "Sub":
                    return $(e.args[0]) && $(e.args[1]);
                case "Piecewise":
                    var t = e.args[0];
                    return "Equals" === t.type || "Inequality" === t.type || "InequalityChain" === t.type;
                case "Call":
                    var n = e.args
                        , r = n[0]
                        , i = n[1];
                    return !z(r) && !H(r) && ($(r) && $(i));
                case "Derivative":
                case "Sqrt":
                case "Nthroot":
                case "Pipes":
                case "Bang":
                    return !1;
                case "Neg":
                case "Equals":
                case "Inequality":
                case "InequalityChain":
                case "Tilde":
                case "ImplicitCall":
                case "Index":
                case "List":
                case "Seq":
                case "Integral":
                case "EmptyIntegral":
                case "Sum":
                case "Product":
                case "Colon":
                case "Ellipsis":
                case "PercentOf":
                case "Prime":
                    return !1;
                default:
                    var o = e;
                    throw "Unexpected surface node " + o.type + "."
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.Equals = r,
            t.Inequality = i,
            t.TrailingInequalityPiece = o,
            t.InequalityChain = s,
            t.Tilde = a,
            t.Pos = c,
            t.Neg = l,
            t.Add = u,
            t.Sub = d,
            t.Mul = p,
            t.Div = h,
            t.Bang = f,
            t.Call = m,
            t.ImplicitCall = g,
            t.Index = y,
            t.Paren = v,
            t.List = b,
            t.Pipes = x,
            t.Subscript = w,
            t.Superscript = E,
            t.Prime = _,
            t.Seq = S,
            t.Sqrt = k,
            t.Nthroot = M,
            t.Frac = C,
            t.Derivative = I,
            t.Integral = T,
            t.EmptyIntegral = P,
            t.Sum = A,
            t.Product = L,
            t.Piecewise = O,
            t.EmptyPiecewise = D,
            t.Colon = q,
            t.Ellipsis = N,
            t.PercentOf = F,
            t.Juxt = R,
            t.Letter = j,
            t.Decimal = B,
            t.Cmd = V,
            t.Alphanumeric = U,
            t.MixedNumber = G,
            t.isIdentifier = z,
            t.isSuperscriptedIdentifier = H,
            t.isDerivative = W,
            t.isOkForImplicitMultiply = Y,
            t.isOkForImplicitCall = $
    }),
    define("math/parser/surface-node-error", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            return {
                type: "Err",
                span: e,
                error: t
            }
        }
        function r() {
            return {
                type: "UnexpectedParseError"
            }
        }
        function i() {
            return {
                type: "EmptyInput"
            }
        }
        function o() {
            return {
                type: "EmptyGroup"
            }
        }
        function s() {
            return {
                type: "EmptySubscript"
            }
        }
        function a() {
            return {
                type: "EmptySuperscript"
            }
        }
        function c() {
            return {
                type: "EmptyRadical"
            }
        }
        function l() {
            return {
                type: "EmptyParen"
            }
        }
        function u() {
            return {
                type: "EmptySquareBracket"
            }
        }
        function d() {
            return {
                type: "EmptyPipe"
            }
        }
        function p() {
            return {
                type: "EmptyRadicand"
            }
        }
        function h() {
            return {
                type: "UnexpectedEnd"
            }
        }
        function f(e) {
            return {
                type: "BinaryOperatorMissingRight",
                val: e
            }
        }
        function m(e) {
            return {
                type: "BinaryOperatorMissingLeft",
                val: e
            }
        }
        function g(e) {
            return {
                type: "UnaryOperatorMissingRight",
                val: e
            }
        }
        function y(e) {
            return {
                type: "UnaryOperatorMissingLeft",
                val: e
            }
        }
        function v(e, t) {
            return {
                type: "MissingCloseDelimiter",
                open: e,
                close: t
            }
        }
        function b(e, t) {
            return {
                type: "UnexpectedCloseDelimiter",
                open: e,
                close: t
            }
        }
        function x() {
            return {
                type: "UnexpectedDifferential"
            }
        }
        function w(e) {
            return {
                type: "UnrecognizedSymbol",
                val: e
            }
        }
        function E(e) {
            return {
                type: "InvalidOperatorName",
                val: e
            }
        }
        function _(e) {
            return {
                type: "InvalidSubscript",
                val: e
            }
        }
        function S(e) {
            return {
                type: "UnexpectedSubscript",
                base: e
            }
        }
        function k(e) {
            return {
                type: "FunctionMissingArgument",
                val: e
            }
        }
        function M() {
            return {
                type: "PercentMissingOf"
            }
        }
        function C() {
            return {
                type: "PrimeWithoutParen"
            }
        }
        function I() {
            return {
                type: "SuperscriptWithPrime"
            }
        }
        function T() {
            return {
                type: "UnexpectedPrime"
            }
        }
        function P() {
            return {
                type: "SumMissingBound"
            }
        }
        function A() {
            return {
                type: "ProductMissingBound"
            }
        }
        function L() {
            return {
                type: "MissingBound"
            }
        }
        function O() {
            return {
                type: "IntegralMissingBound"
            }
        }
        function D() {
            return {
                type: "SumMissingBody"
            }
        }
        function q() {
            return {
                type: "ProductMissingBody"
            }
        }
        function N() {
            return {
                type: "IntegralMissingBody"
            }
        }
        function F() {
            return {
                type: "DerivativeMissingBody"
            }
        }
        function R() {
            return {
                type: "IntegralMissingDifferential"
            }
        }
        function j() {
            return {
                type: "DifferentialWithSuperscript"
            }
        }
        function B() {
            return {
                type: "FractionMissingNumerator"
            }
        }
        function V() {
            return {
                type: "FractionMissingDenominator"
            }
        }
        function U() {
            return {
                type: "FractionEmpty"
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.Err = n,
            t.UnexpectedParseError = r,
            t.EmptyInput = i,
            t.EmptyGroup = o,
            t.EmptySubscript = s,
            t.EmptySuperscript = a,
            t.EmptyRadical = c,
            t.EmptyParen = l,
            t.EmptySquareBracket = u,
            t.EmptyPipe = d,
            t.EmptyRadicand = p,
            t.UnexpectedEnd = h,
            t.BinaryOperatorMissingRight = f,
            t.BinaryOperatorMissingLeft = m,
            t.UnaryOperatorMissingRight = g,
            t.UnaryOperatorMissingLeft = y,
            t.MissingCloseDelimiter = v,
            t.UnexpectedCloseDelimiter = b,
            t.UnexpectedDifferential = x,
            t.UnrecognizedSymbol = w,
            t.InvalidOperatorName = E,
            t.InvalidSubscript = _,
            t.UnexpectedSubscript = S,
            t.FunctionMissingArgument = k,
            t.PercentMissingOf = M,
            t.PrimeWithoutParen = C,
            t.SuperscriptWithPrime = I,
            t.UnexpectedPrime = T,
            t.SumMissingBound = P,
            t.ProductMissingBound = A,
            t.MissingBound = L,
            t.IntegralMissingBound = O,
            t.SumMissingBody = D,
            t.ProductMissingBody = q,
            t.IntegralMissingBody = N,
            t.DerivativeMissingBody = F,
            t.IntegralMissingDifferential = R,
            t.DifferentialWithSuperscript = j,
            t.FractionMissingNumerator = B,
            t.FractionMissingDenominator = V,
            t.FractionEmpty = U
    }),
    define("math/parser/expression-token-tables", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = {
            "+": !0,
            "-": !0,
            "*": !0,
            "/": !0,
            "!": !0,
            "(": !0,
            ")": !0,
            "\\{": !0,
            "\\}": !0,
            "(|": !0,
            "|)": !0,
            "[": !0,
            "]": !0,
            ",": !0,
            "...": !0,
            ":": !0,
            "=": !0,
            ">": !0,
            "<": !0,
            ">=": !0,
            "<=": !0,
            "~": !0,
            "%": !0,
            Letter: !0,
            Decimal: !0,
            Cmd: !0,
            Differential: !0,
            End: !0,
            Trig: !0,
            Ln: !0,
            Log: !0,
            Int: !0,
            Sum: !0,
            Prod: !0,
            Err: !0
        };
        t.commandTable = {
            "\\lt": "<",
            "\\gt": ">",
            "\\le": "<=",
            "\\ge": ">=",
            "\\ldots": "...",
            "\\sim": "~",
            "\\cdot": "*",
            "\\times": "*",
            "\\div": "/",
            "\\ln": "Ln",
            "\\log": "Log",
            "\\int": "Int",
            "\\sum": "Sum",
            "\\prod": "Prod",
            "\\backslash": "Err"
        };
        for (var r = ["sin", "cos", "tan", "cot", "sec", "csc"], i = 0, o = r; i < o.length; i++) {
            var s = o[i];
            t.commandTable["\\" + s] = "Trig",
                t.commandTable["\\" + s + "h"] = "Trig",
                t.commandTable["\\arc" + s] = "Trig",
                t.commandTable["\\arc" + s + "h"] = "Trig"
        }
        t.symbolTable = {
            "+": "+",
            "-": "-",
            "*": "*",
            "/": "/",
            "!": "!",
            "(": "(",
            ")": ")",
            "[": "[",
            "]": "]",
            ",": ",",
            "...": "...",
            ":": ":",
            "=": "=",
            ">=": ">=",
            "<=": "<=",
            ">": ">",
            "<": "<",
            "~": "~"
        },
            t.escapedSymbolTable = {
                "\\{": "\\{",
                "\\}": "\\}",
                "\\%": "%"
            },
            t.leftTable = {
                "|": "(|",
                "\\{": "\\{",
                "[": "[",
                "(": "("
            },
            t.rightTable = {
                "|": "|)",
                "\\}": "\\}",
                "]": "]",
                ")": ")"
            },
            t.allTokenTypes = Object.keys(n)
    }),
    define("math/parser/expression-lexer", ["require", "exports", "./expression-token-tables", "./input-span", "./input-span", "./surface-node"], function (e, t, n, r, i, o) {
        "use strict";
        function s(e, t, n, r, i, o, s) {
            return {
                input: e,
                prevSpan: t,
                startIndex: n,
                endIndex: r,
                token: i,
                mode: o,
                parent: s
            }
        }
        function a(e, t) {
            return r.joinSpans(e.token.span, t.prevSpan)
        }
        function c(e, t) {
            return r.joinSpans(e, t.prevSpan)
        }
        function l(e, t) {
            return {
                type: "Differential",
                span: e,
                val: t
            }
        }
        function u(e, t, n) {
            return {
                type: e,
                span: t,
                val: n
            }
        }
        function d(e) {
            var t = r.emptySpanAt(e.span.input, e.span.start)
                , n = void 0
                , i = void 0;
            return p(e, 0, t, i, n)
        }
        function p(e, t, r, i, o) {
            var a = e.args;
            if (t > a.length && o)
                return f(o, r);
            t = C(a, t);
            var c = E(e, t, i)
                , l = c.token
                , d = c.endIndex;
            if ("End" === l.type && o) {
                var p = o.input.args[o.startIndex];
                if ("LeftRight" === p.type) {
                    var h = p.right
                        , m = n.rightTable[h.val] || "Err"
                        , v = u(m, h.span, h.val);
                    return s(e, r, t, d, v, i, o)
                }
            } else
                "Int" === l.type ? i = g(i) : "Differential" === l.type && (i = y(i));
            return s(e, r, t, d, l, i, o)
        }
        function h(e) {
            var t = e.input.args[e.startIndex]
                , n = e.token.span;
            return t && "LeftRight" === t.type ? p(t.arg, 0, n, e.mode, e) : f(e, n)
        }
        function f(e, t) {
            var n = e.input
                , r = e.endIndex
                , i = e.mode
                , o = e.parent;
            return p(n, r + 1, t, i, o)
        }
        function m(e) {
            return e.token
        }
        function g(e) {
            return {
                type: "integral",
                parent: e
            }
        }
        function y(e) {
            if (!e || "integral" !== e.type)
                throw new Error("Programming Error: expected lexer to be in integral mode.");
            return e.parent
        }
        function v(e, t) {
            return m(e).type === t
        }
        function b(e) {
            return e.startIndex >= e.input.args.length
        }
        function x(e, t) {
            return t.token.span.start > e.token.span.start
        }
        function w(e, t) {
            return {
                token: t,
                endIndex: e
            }
        }
        function E(e, t, i) {
            var o = e.args;
            if (t >= o.length) {
                var s = r.emptySpanAt(e.span.input, e.span.end);
                return w(t, u("End", s, ""))
            }
            var a = e.args[t];
            switch (a.type) {
                case "Sqrt":
                case "Frac":
                case "SupSub":
                    return w(t, a);
                case "Letter":
                    if (!i || "integral" !== i.type)
                        return w(t, a);
                    if ("d" != a.val)
                        return w(t, a);
                    var c = E(e, t + 1, i)
                        , d = c.endIndex
                        , p = c.token;
                    if ("Letter" === p.type || "Cmd" === p.type) {
                        var h = l(r.joinSpans(a.span, p.span), p.val);
                        return w(d, h)
                    }
                    return w(t, a);
                case "LeftRight":
                    var f = a.left
                        , m = n.leftTable[f.val] || "Err"
                        , g = r.joinSpans(a.span, f.span);
                    return w(t, u(m, g, f.val));
                case "OperatorName":
                    for (var y = [], v = 0, b = a.arg.args; v < b.length; v++) {
                        var x = b[v];
                        if ("Letter" !== x.type)
                            return w(t, u("Err", a.span, r.slice(a.arg.span)));
                        y.push(x.val)
                    }
                    var k = "\\" + y.join("")
                        , M = n.commandTable[k] || "Cmd";
                    return w(t, u(M, a.span, k));
                case "Cmd":
                    var C = n.commandTable[a.val] || "Cmd";
                    return w(t, u(C, a.span, a.val));
                case "EscapedSymbol":
                    var T = n.escapedSymbolTable[a.val] || "Err";
                    return w(t, u(T, a.span, a.val));
                case "Symbol":
                    if (I(a))
                        return _(e, t);
                    var P = n.symbolTable[a.val] || "Err";
                    return w(t, u(P, a.span, a.val));
                case "Digit":
                    return S(e, t);
                default:
                    var A = a;
                    throw "Unexpected atom " + A.type + "."
            }
        }
        function _(e, t) {
            var i = e.args[t];
            if ("Symbol" !== i.type || "." !== i.val)
                throw new Error("Programming Error: expected '.'");
            if (t + 2 < e.args.length && I(e.args[t + 1]) && I(e.args[t + 2])) {
                var o = r.joinSpans(i.span, e.args[t + 2].span);
                return w(t + 2, u("...", o, r.slice(o)))
            }
            if (t + 1 < e.args.length && "Digit" === e.args[t + 1].type)
                return S(e, t);
            var s = n.symbolTable[i.val] || "Err";
            return w(t, u(s, i.span, i.val))
        }
        function S(e, t) {
            var n = k(e, t);
            if (n)
                return n;
            for (var i = e.args, o = e.args[t].span, s = [], a = !1, c = !1; t < i.length; t++) {
                var l = i[t];
                if ("Digit" === l.type)
                    a = !0,
                        s.push(l.val);
                else {
                    if (c || !I(l))
                        break;
                    if (t + 1 < i.length && I(e.args[t + 1]))
                        break;
                    c = !0,
                        s.push(".")
                }
            }
            if (!a)
                throw new Error("Programming Error: decimals must have at least one digit.");
            var d = r.joinSpans(o, e.args[t - 1].span);
            return w(t - 1, u("Decimal", d, s.join("")))
        }
        function k(e, t) {
            for (var n = e.args, i = n[t].span, s = []; t < n.length; t++) {
                var a = n[t];
                if ("Digit" !== a.type)
                    break;
                s.push(a.val)
            }
            if (t = C(n, t),
                !(t >= n.length)) {
                var c = n[t];
                if ("Frac" === c.type) {
                    for (var l = [], u = [], d = 0, p = c.num.args; d < p.length; d++) {
                        var a = p[d];
                        if ("Digit" !== a.type)
                            return;
                        l.push(a.val)
                    }
                    for (var h = 0, f = c.den.args; h < f.length; h++) {
                        var a = f[h];
                        if ("Digit" !== a.type)
                            return;
                        u.push(a.val)
                    }
                    var m = r.joinSpans(i, c.span);
                    return w(t, o.MixedNumber(m, s.join(""), l.join(""), u.join("")))
                }
            }
        }
        function M(e) {
            switch (e.type) {
                case "Sqrt":
                case "Frac":
                case "SupSub":
                case "LeftRight":
                case "OperatorName":
                case "Symbol":
                case "Letter":
                case "Digit":
                    return !1;
                case "Cmd":
                    return "\\space" === e.val;
                case "EscapedSymbol":
                    return "\\ " === e.val || "\\:" === e.val || "\\," === e.val || "\\;" === e.val;
                default:
                    var t = e;
                    throw "Unexpected atom " + t.type + "."
            }
        }
        function C(e, t) {
            for (; t < e.length && M(e[t]);)
                t += 1;
            return t
        }
        function I(e) {
            return "Symbol" === e.type && "." === e.val
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.Span = i.Span,
            t.spanStates = a,
            t.joinState = c,
            t.lex = d,
            t.lexAt = p,
            t.advance = h,
            t.peek = m,
            t.beginIntegral = g,
            t.endIntegral = y,
            t.isAt = v,
            t.isDone = b,
            t.didAdvance = x
    }),
    define("math/parser/precspec", ["require", "exports", "./expression-token-tables"], function (e, t, n) {
        "use strict";
        function r(e) {
            return {
                type: "initial",
                tokenType: e
            }
        }
        function i(e) {
            return {
                type: "l",
                tokenType: e
            }
        }
        function o(e) {
            return {
                type: "r",
                tokenType: e
            }
        }
        function s(e) {
            return {
                type: "la",
                tokenType: e
            }
        }
        function a(e) {
            return {
                type: "ra",
                tokenType: e
            }
        }
        function c(e, t) {
            for (var r = 0, i = n.allTokenTypes; r < i.length; r++) {
                var o = i[r];
                if (void 0 === t[o])
                    throw new Error("Programming Error: token " + o + " must be a assigned a " + (e + " precedence"))
            }
        }
        function l(e, t, n, r) {
            if (void 0 !== t[n])
                throw new Error("Programming Error: duplicate " + e + " entry for token " + n + ".");
            t[n] = r
        }
        function u(e) {
            function t(e) {
                return s[e]
            }
            function n(e) {
                return o[e]
            }
            function r(e) {
                var n = i[e];
                return void 0 === n ? t(e) : n
            }
            for (var i = {}, o = {}, s = {}, a = 0; a < e.length; a++)
                for (var u = e[a], d = 0, p = u; d < p.length; d++) {
                    var h = p[d]
                        , f = h.type
                        , m = h.tokenType;
                    switch (f) {
                        case "initial":
                            l("initial", i, m, a);
                            break;
                        case "l":
                            l("left", o, m, a);
                            break;
                        case "r":
                            l("right", s, m, a);
                            break;
                        case "la":
                            l("left", o, m, a),
                                l("right", s, m, a);
                            break;
                        case "ra":
                            l("left", o, m, a),
                                l("right", s, m, a - 1)
                    }
                }
            return c("left", o),
                c("right", s),
                {
                    rightPrec: t,
                    leftPrec: n,
                    initialPrec: r
                }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.initial = r,
            t.l = i,
            t.r = o,
            t.la = s,
            t.ra = a,
            t.precSpec = u
    }),
    define("math/parser/expression-parser", ["require", "exports", "./surface-node", "./surface-node-error", "./input-span", "./expression-lexer", "./precspec"], function (e, t, n, r, i, o, s) {
        "use strict";
        function a(e) {
            var t = c(e);
            return "Err" === t.type && "EmptyGroup" === t.error.type ? r.Err(t.span, r.EmptyInput()) : t
        }
        function c(e) {
            var t = o.lex(e);
            if (o.isDone(t))
                return r.Err(o.spanStates(t, t), r.EmptyGroup());
            var n = u(t, 0)
                , i = n.state
                , s = n.tree;
            return "Err" === s.type || o.isDone(i) ? s : S(i).tree
        }
        function l(e, t) {
            return {
                state: e,
                tree: t
            }
        }
        function u(e, t) {
            var n, r = e;
            if (a = p(e),
                e = a.state,
                n = a.tree,
                "Err" === n.type)
                return l(e, n);
            if (!o.didAdvance(r, e))
                throw new Error("Programming Error: parseInitial did not advance state.");
            for (; !o.isDone(e);) {
                var i = void 0;
                if (i = o.isAt(e, "(") && !f(n) ? I("(") : C(o.peek(e).type),
                    t >= i)
                    break;
                var s = e;
                if (c = h(e, n),
                    e = c.state,
                    n = c.tree,
                    "Err" === n.type)
                    return l(e, n);
                if (!o.didAdvance(s, e))
                    throw new Error("Programming Error: parseSuccessor did not advance state.")
            }
            return l(e, n);
            var a, c
        }
        function d(e) {
            return "UnexpectedDifferential" === e.type || "UnexpectedCloseDelimiter" === e.type || "UnexpectedEnd" === e.type || "BinaryOperatorMissingLeft" === e.type
        }
        function p(e) {
            var t, i = e, s = o.peek(e), a = T(s.type);
            switch (s.type) {
                case "+":
                    if (e = o.advance(e),
                        B = u(e, a),
                        e = B.state,
                        t = B.tree,
                        "Err" === t.type) {
                        if (!d(t.error))
                            return l(e, t);
                        var p = o.spanStates(i, e)
                            , h = r.Err(p, r.UnaryOperatorMissingRight(s.type));
                        return l(e, h)
                    }
                    return l(e, n.Pos(o.spanStates(i, e), [t]));
                case "-":
                    if (e = o.advance(e),
                        V = u(e, a),
                        e = V.state,
                        t = V.tree,
                        "Err" === t.type) {
                        if (!d(t.error))
                            return l(e, t);
                        var p = o.spanStates(i, e)
                            , h = r.Err(p, r.UnaryOperatorMissingRight(s.type));
                        return l(e, h)
                    }
                    return l(e, n.Neg(o.spanStates(i, e), [t]));
                case "(":
                    return w(e);
                case "\\{":
                    return e = o.advance(e),
                        o.isAt(e, "\\}") ? (e = o.advance(e),
                            l(e, n.EmptyPiecewise(o.spanStates(i, e)))) : (U = u(e, a),
                                e = U.state,
                                t = U.tree,
                                G = _(i, e, t, "\\{", "\\}"),
                                e = G.state,
                                t = G.tree,
                                "Err" === t.type ? l(e, t) : l(e, n.Piecewise(o.spanStates(i, e), [t])));
                case "[":
                    if (e = o.advance(e),
                        o.isAt(e, "]")) {
                        e = o.advance(e);
                        var p = o.spanStates(i, e);
                        return l(e, r.Err(p, r.EmptySquareBracket()))
                    }
                    return z = u(e, a),
                        e = z.state,
                        t = z.tree,
                        H = _(i, e, t, "[", "]"),
                        e = H.state,
                        t = H.tree,
                        "Err" === t.type ? l(e, t) : l(e, n.List(o.spanStates(i, e), [t]));
                case "(|":
                    if (e = o.advance(e),
                        o.isAt(e, "|)")) {
                        e = o.advance(e);
                        var p = o.spanStates(i, e);
                        return l(e, r.Err(p, r.EmptyPipe()))
                    }
                    return W = u(e, a),
                        e = W.state,
                        t = W.tree,
                        Y = _(i, e, t, "(|", "|)"),
                        e = Y.state,
                        t = Y.tree,
                        "Err" === t.type ? l(e, t) : l(e, n.Pipes(o.spanStates(i, e), [t]));
                case "Frac":
                    e = o.advance(e);
                    var f = c(s.num)
                        , m = c(s.den);
                    if ("Err" === f.type && "EmptyGroup" === f.error.type && "Err" === m.type && "EmptyGroup" === m.error.type) {
                        var p = o.spanStates(i, e)
                            , h = r.Err(p, r.FractionEmpty());
                        return l(e, h)
                    }
                    if ("Err" === f.type && "EmptyGroup" === f.error.type) {
                        var p = o.spanStates(i, e)
                            , h = r.Err(p, r.FractionMissingNumerator());
                        return l(e, h)
                    }
                    if ("Err" === m.type && "EmptyGroup" === m.error.type) {
                        var p = o.spanStates(i, e)
                            , h = r.Err(p, r.FractionMissingDenominator());
                        return l(e, h)
                    }
                    if ("Err" === f.type)
                        return l(e, f);
                    if ("Err" === m.type)
                        return l(e, m);
                    if (n.isDerivative(f, m) && "Juxt" === m.type) {
                        var g = m.args[1]
                            , v = void 0;
                        if ($ = u(e, C("*") - 1),
                            e = $.state,
                            v = $.tree,
                            "Err" === v.type) {
                            if (d(v.error)) {
                                var p = o.spanStates(i, e);
                                return l(e, r.Err(p, r.DerivativeMissingBody()))
                            }
                            return l(e, v)
                        }
                        return l(e, n.Derivative(o.spanStates(i, e), [g, v]))
                    }
                    return l(e, n.Frac(o.spanStates(i, e), [f, m]));
                case "Sqrt":
                    if (e = o.advance(e),
                        s.optArg) {
                        var k = c(s.optArg);
                        if ("Err" === k.type)
                            return "EmptyGroup" === k.error.type ? l(e, r.Err(k.span, r.EmptyRadicand())) : l(e, k);
                        var M = c(s.arg);
                        return "Err" === M.type ? "EmptyGroup" === M.error.type ? l(e, r.Err(M.span, r.EmptyRadical())) : l(e, M) : l(e, n.Nthroot(o.spanStates(i, e), [k, M]))
                    }
                    var M = c(s.arg);
                    return "Err" === M.type ? "EmptyGroup" === M.error.type ? l(e, r.Err(M.span, r.EmptyRadical())) : l(e, M) : l(e, n.Sqrt(o.spanStates(i, e), [M]));
                case "Trig":
                case "Ln":
                    e = o.advance(e);
                    var I = n.Cmd(o.spanStates(i, e), s.val)
                        , P = 0
                        , A = o.peek(e);
                    if ("SupSub" === A.type) {
                        if (e = o.advance(e),
                            A.sub) {
                            var p = o.spanStates(i, e)
                                , h = r.Err(p, r.UnexpectedSubscript(I.val));
                            return l(e, h)
                        }
                        var L = b(A);
                        if (L) {
                            if ("Err" === L.type)
                                return l(e, L);
                            I = n.Superscript(o.spanStates(i, e), [I, L])
                        }
                        P = A.nprimes
                    }
                    var O = o.isAt(e, "(");
                    if (O) {
                        if (K = w(e),
                            e = K.state,
                            t = K.tree,
                            "Err" === t.type)
                            return l(e, t);
                        t = n.Call(o.spanStates(i, e), [I, t.args[0]])
                    } else {
                        if (X = u(e, a - 1),
                            e = X.state,
                            t = X.tree,
                            "Err" === t.type)
                            return d(t.error) ? l(e, r.Err(o.spanStates(i, e), r.FunctionMissingArgument(s.val))) : l(e, t);
                        t = n.ImplicitCall(o.spanStates(i, e), [I, t])
                    }
                    if (P > 0) {
                        var p = o.spanStates(i, e);
                        if (!O) {
                            var h = r.Err(p, r.PrimeWithoutParen());
                            return l(e, h)
                        }
                        t = n.Prime(p, P, [t])
                    }
                    return l(e, t);
                case "Log":
                    e = o.advance(e);
                    var I = n.Cmd(o.spanStates(i, e), s.val)
                        , P = 0
                        , D = void 0
                        , L = void 0
                        , A = o.peek(e);
                    if ("SupSub" === A.type && (e = o.advance(e),
                        D = y(A),
                        L = b(A),
                        P = A.nprimes),
                        D && "Err" === D.type)
                        return l(e, D);
                    if (L && "Err" === L.type)
                        return l(e, L);
                    var O = o.isAt(e, "(");
                    if (O) {
                        if (Q = w(e),
                            e = Q.state,
                            t = Q.tree,
                            "Err" === t.type)
                            return l(e, t);
                        t = t.args[0]
                    } else if (Z = u(e, a - 1),
                        e = Z.state,
                        t = Z.tree,
                        "Err" === t.type)
                        return d(t.error) ? l(e, r.Err(o.spanStates(i, e), r.FunctionMissingArgument(s.val))) : l(e, t);
                    var q = D ? n.Seq(o.spanStates(i, e), [t, D]) : t
                        , N = D ? n.Cmd(o.spanStates(i, e), "\\logbase") : I;
                    if (L && (N = n.Superscript(o.spanStates(i, e), [N, L])),
                        t = O ? n.Call(o.spanStates(i, e), [N, q]) : n.ImplicitCall(o.spanStates(i, e), [N, q]),
                        P > 0) {
                        var p = o.spanStates(i, e);
                        if (!O) {
                            var h = r.Err(p, r.PrimeWithoutParen());
                            return l(e, h)
                        }
                        t = n.Prime(p, P, [t])
                    }
                    return l(e, t);
                case "Int":
                    e = o.advance(e);
                    var A = o.peek(e);
                    e = o.advance(e);
                    var F = x(A, i, e);
                    if ("Err" === F.type)
                        return "MissingBound" === F.error.type ? l(e, r.Err(F.span, r.IntegralMissingBound())) : l(e, F);
                    var L = F.sup
                        , D = F.sub
                        , g = void 0;
                    if (o.isAt(e, "Differential"))
                        return J = E(e),
                            e = J.state,
                            g = J.tree,
                            "Err" === g.type ? l(e, g) : l(e, n.EmptyIntegral(o.spanStates(i, e), [g, D, L]));
                    if (ee = u(e, a),
                        e = ee.state,
                        t = ee.tree,
                        "Err" === t.type)
                        return d(t.error) ? l(e, r.Err(t.span, r.IntegralMissingBody())) : l(e, t);
                    var R = t;
                    return o.isAt(e, "Differential") ? (te = E(e),
                        e = te.state,
                        g = te.tree,
                        "Err" === g.type ? l(e, g) : l(e, n.Integral(o.spanStates(i, e), [g, D, L, R]))) : l(e, r.Err(o.spanStates(i, e), r.IntegralMissingDifferential()));
                case "Sum":
                    e = o.advance(e);
                    var A = o.peek(e);
                    e = o.advance(e);
                    var F = x(A, i, e);
                    if ("Err" === F.type)
                        return "MissingBound" === F.error.type ? l(e, r.Err(F.span, r.SumMissingBound())) : l(e, F);
                    var L = F.sup
                        , D = F.sub;
                    return ne = u(e, a),
                        e = ne.state,
                        t = ne.tree,
                        "Err" === t.type ? d(t.error) ? l(e, r.Err(t.span, r.SumMissingBody())) : l(e, t) : l(e, n.Sum(o.spanStates(i, e), [t, D, L]));
                case "Prod":
                    e = o.advance(e);
                    var A = o.peek(e);
                    e = o.advance(e);
                    var F = x(A, i, e);
                    if ("Err" === F.type)
                        return "MissingBound" === F.error.type ? l(e, r.Err(F.span, r.ProductMissingBound())) : l(e, F);
                    var L = F.sup
                        , D = F.sub;
                    return re = u(e, a),
                        e = re.state,
                        t = re.tree,
                        "Err" === t.type ? d(t.error) ? l(e, r.Err(t.span, r.ProductMissingBody())) : l(e, t) : l(e, n.Product(o.spanStates(i, e), [t, D, L]));
                case "Cmd":
                    return e = o.advance(e),
                        t = n.Cmd(o.spanStates(i, e), s.val),
                        l(e, t);
                case "Letter":
                    return e = o.advance(e),
                        t = n.Letter(o.spanStates(i, e), s.val),
                        l(e, t);
                case "Decimal":
                    return e = o.advance(e),
                        l(e, n.Decimal(o.spanStates(i, e), s.val));
                case "MixedNumber":
                    return e = o.advance(e),
                        l(e, s);
                case "*":
                case "/":
                case ",":
                case "=":
                case ">":
                case "<":
                case ">=":
                case "<=":
                case "~":
                case ":":
                case "...":
                case "%":
                    e = o.advance(e);
                    var p = o.spanStates(i, e)
                        , h = r.Err(p, r.BinaryOperatorMissingLeft(s.type));
                    return l(e, h);
                case "!":
                case "SupSub":
                    e = o.advance(e);
                    var p = o.spanStates(i, e)
                        , h = r.Err(p, r.UnaryOperatorMissingLeft(s.type));
                    return l(e, h);
                case ")":
                case "\\}":
                case "]":
                case "|)":
                case "Differential":
                    return S(e);
                case "Err":
                    e = o.advance(e);
                    var p = o.spanStates(i, e)
                        , h = r.Err(p, r.UnrecognizedSymbol(s.val));
                    return l(e, h);
                case "End":
                    var p = o.spanStates(i, e)
                        , h = r.Err(p, r.UnexpectedEnd());
                    return l(e, h);
                default:
                    var j = s;
                    throw "Unexpected token type " + j.type + "."
            }
            var B, V, U, G, z, H, W, Y, $, K, X, Q, Z, J, ee, te, ne, re
        }
        function h(e, t) {
            var i, s = o.peek(e), a = I(s.type);
            switch (s.type) {
                case "+":
                case "-":
                case "*":
                case "/":
                case "=":
                case "~":
                case ":":
                    if (e = o.advance(e),
                        P = u(e, a),
                        e = P.state,
                        i = P.tree,
                        "Err" === i.type) {
                        if (d(i.error)) {
                            var c = o.joinState(t.span, e)
                                , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                            return l(e, p)
                        }
                        return l(e, i)
                    }
                    return l(e, m(s.type, o.joinState(t.span, e), [t, i]));
                case "%":
                    if (e = o.advance(e),
                        A = u(e, a),
                        e = A.state,
                        i = A.tree,
                        "Cmd" !== i.type || "of" !== i.val && "\\of" !== i.val) {
                        var p = r.Err(s.span, r.PercentMissingOf());
                        return l(e, p)
                    }
                    if (L = u(e, a),
                        e = L.state,
                        i = L.tree,
                        "Err" === i.type) {
                        if (d(i.error)) {
                            var c = o.joinState(t.span, e)
                                , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                            return l(e, p)
                        }
                        return l(e, i)
                    }
                    return l(e, n.PercentOf(o.joinState(t.span, e), [t, i]));
                case ">=":
                case "<=":
                case ">":
                case "<":
                    var h = s.type;
                    if (e = o.advance(e),
                        O = g(e, h),
                        e = O.state,
                        h = O.symbol,
                        D = u(e, a),
                        e = D.state,
                        i = D.tree,
                        "Err" === i.type) {
                        if (d(i.error)) {
                            var c = o.joinState(t.span, e)
                                , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                            return l(e, p)
                        }
                        return l(e, i)
                    }
                    for (var f = n.Inequality(o.joinState(t.span, e), h, [t, i]), y = [], x = o.peek(e).type; ">=" === x || "<=" === x || ">" === x || "<" === x;) {
                        var E = e;
                        if (h = x,
                            e = o.advance(e),
                            q = g(e, h),
                            e = q.state,
                            h = q.symbol,
                            N = u(e, a),
                            e = N.state,
                            i = N.tree,
                            "Err" === i.type) {
                            if (d(i.error)) {
                                var c = o.joinState(t.span, e)
                                    , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                                return l(e, p)
                            }
                            return l(e, i)
                        }
                        y.push(n.TrailingInequalityPiece(o.spanStates(E, e), h, [i])),
                            x = o.peek(e).type
                    }
                    return y.length ? l(e, n.InequalityChain(o.joinState(t.span, e), f, y)) : l(e, f);
                case "!":
                    return e = o.advance(e),
                        l(e, n.Bang(o.joinState(t.span, e), [t]));
                case "[":
                    var E = e;
                    if (e = o.advance(e),
                        o.isAt(e, "]")) {
                        e = o.advance(e);
                        var c = o.spanStates(E, e);
                        return l(e, r.Err(c, r.EmptySquareBracket()))
                    }
                    return F = u(e, a),
                        e = F.state,
                        i = F.tree,
                        R = _(E, e, i, "[", "]"),
                        e = R.state,
                        i = R.tree,
                        "Err" === i.type ? l(e, i) : l(e, n.Index(o.joinState(t.span, e), [t, i]));
                case "Sqrt":
                case "Frac":
                case "Letter":
                case "Cmd":
                case "Trig":
                case "Ln":
                case "Log":
                case "Sum":
                case "Int":
                case "Prod":
                case "Decimal":
                case "MixedNumber":
                case "\\{":
                case "(|":
                    return j = u(e, a),
                        e = j.state,
                        i = j.tree,
                        "Err" === i.type ? l(e, i) : l(e, n.Juxt(o.joinState(t.span, e), [t, i]));
                case "(":
                    if (n.isIdentifier(t))
                        return B = w(e),
                            e = B.state,
                            i = B.tree,
                            "Err" === i.type ? l(e, i) : l(e, n.Call(o.joinState(t.span, e), [t, i.args[0]]));
                    if ("Prime" === t.type && n.isIdentifier(t.args[0])) {
                        if (V = w(e),
                            e = V.state,
                            i = V.tree,
                            "Err" === i.type)
                            return l(e, i);
                        var c = o.joinState(t.span, e);
                        return l(e, n.Prime(c, t.nprimes, [n.Call(c, [t.args[0], i.args[0]])]))
                    }
                    return U = u(e, a),
                        e = U.state,
                        i = U.tree,
                        "Err" === i.type ? l(e, i) : l(e, n.Juxt(o.joinState(t.span, e), [t, i]));
                case "SupSub":
                    e = o.advance(e);
                    var k = v(s)
                        , M = b(s);
                    if (k && "Err" === k.type)
                        return l(e, k);
                    if (M && "Err" === M.type)
                        return l(e, M);
                    if (k && (t = n.Subscript(o.joinState(t.span, e), [t, k])),
                        M && (t = n.Superscript(o.joinState(t.span, e), [t, M])),
                        s.nprimes > 0) {
                        var c = o.joinState(t.span, e);
                        if (!n.isIdentifier(t)) {
                            var p = r.Err(c, r.UnexpectedPrime());
                            return l(e, p)
                        }
                        t = n.Prime(c, s.nprimes, [t])
                    }
                    return l(e, t);
                case ",":
                    for (var C = [t]; o.isAt(e, ",") && (e = o.advance(e),
                        !o.isAt(e, "..."));) {
                        if (G = u(e, a),
                            e = G.state,
                            i = G.tree,
                            "Err" === i.type) {
                            if (d(i.error)) {
                                var c = o.joinState(t.span, e)
                                    , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                                return l(e, p)
                            }
                            return l(e, i)
                        }
                        C.push(i)
                    }
                    return l(e, n.Seq(o.joinState(t.span, e), C));
                case "...":
                    if (e = o.advance(e),
                        o.isAt(e, ",") && (e = o.advance(e)),
                        z = u(e, a),
                        e = z.state,
                        i = z.tree,
                        "Err" === i.type) {
                        if (d(i.error)) {
                            var c = o.joinState(t.span, e)
                                , p = r.Err(c, r.BinaryOperatorMissingRight(s.type));
                            return l(e, p)
                        }
                        return l(e, i)
                    }
                    return l(e, n.Ellipsis(o.joinState(t.span, e), [t, i]));
                case "]":
                case ")":
                case "\\}":
                case "|)":
                case "Differential":
                    return S(e);
                case "Err":
                    return u(e, a);
                case "End":
                    var c = o.spanStates(e, e)
                        , p = r.Err(c, r.UnexpectedEnd());
                    return l(e, p);
                default:
                    var T = s;
                    throw "Unexpected token type " + T.type + "."
            }
            var P, A, L, O, D, q, N, F, R, j, B, V, U, G, z
        }
        function f(e) {
            return !!n.isIdentifier(e) || !("Prime" !== e.type || !n.isIdentifier(e.args[0]))
        }
        function m(e, t, r) {
            switch (e) {
                case "+":
                    return n.Add(t, r);
                case "-":
                    return n.Sub(t, r);
                case "*":
                    return n.Mul(t, r);
                case "/":
                    return n.Div(t, r);
                case "=":
                    return n.Equals(t, r);
                case "~":
                    return n.Tilde(t, r);
                case ":":
                    return n.Colon(t, r);
                default:
                    var i = e;
                    throw "Unexpected token type " + i + "."
            }
        }
        function g(e, t) {
            if (!o.isAt(e, "="))
                return {
                    state: e,
                    symbol: t
                };
            switch (t) {
                case ">":
                    e = o.advance(e),
                        t = ">=";
                    break;
                case "<":
                    e = o.advance(e),
                        t = "<="
            }
            return {
                state: e,
                symbol: t
            }
        }
        function y(e) {
            if (e.sub) {
                var t = e.sub
                    , n = c(t);
                return "Err" === n.type && "EmptyGroup" === n.error.type ? r.Err(n.span, r.EmptySubscript()) : n
            }
        }
        function v(e) {
            if (e.sub) {
                var t = e.sub;
                if (0 === t.args.length)
                    return r.Err(t.span, r.EmptySubscript());
                for (var o = [], s = 0, a = t.args; s < a.length; s++) {
                    var c = a[s];
                    if ("Digit" !== c.type && "Letter" !== c.type) {
                        var l = c.span
                            , u = r.Err(l, r.InvalidSubscript(i.slice(l)));
                        return u
                    }
                    o.push(c.val)
                }
                return n.Alphanumeric(t.span, o.join(""))
            }
        }
        function b(e) {
            if (e.sup) {
                var t = c(e.sup);
                return "Err" === t.type ? "EmptyGroup" === t.error.type ? r.Err(t.span, r.EmptySuperscript()) : t : e.nprimes > 0 ? r.Err(e.span, r.SuperscriptWithPrime()) : t
            }
        }
        function x(e, t, n) {
            if ("SupSub" !== e.type) {
                var i = o.spanStates(t, n);
                return r.Err(i, r.MissingBound())
            }
            if (e.nprimes > 0) {
                var i = o.spanStates(t, n);
                return r.Err(i, r.UnexpectedPrime())
            }
            var s = y(e)
                , a = b(e);
            if (!s || "Err" === s.type && "EmptySubscript" === s.error.type || !a || "Err" === a.type && "EmptySuperscript" === a.error.type) {
                var i = o.spanStates(t, n);
                return r.Err(i, r.MissingBound())
            }
            return "Err" === s.type ? s : "Err" === a.type ? a : {
                type: "Bounds",
                sup: a,
                sub: s
            }
        }
        function w(e) {
            var t = e
                , i = o.peek(e)
                , s = T(i.type);
            if (!o.isAt(e, "("))
                throw new Error("Programming Error: expected '(' at start of parseParen.");
            if (e = o.advance(e),
                o.isAt(e, ")")) {
                e = o.advance(e);
                var a = o.spanStates(t, e);
                return l(e, r.Err(a, r.EmptyParen()))
            }
            var c;
            return d = u(e, s),
                e = d.state,
                c = d.tree,
                p = _(t, e, c, "(", ")"),
                e = p.state,
                c = p.tree,
                "Err" === c.type ? l(e, c) : l(e, n.Paren(o.spanStates(t, e), [c]));
            var d, p
        }
        function E(e) {
            var t = e
                , i = o.peek(e);
            if ("Differential" !== i.type)
                throw new Error("Programming Error: expected differential");
            e = o.advance(e);
            var s = n.Cmd(i.span, i.val)
                , a = o.peek(e);
            if ("SupSub" === a.type) {
                e = o.advance(e);
                var c = o.spanStates(t, e)
                    , u = v(a);
                if (u) {
                    if ("Err" === u.type)
                        return l(e, u);
                    s = n.Subscript(c, [s, u])
                }
                if (a.sup)
                    return l(e, r.Err(c, r.DifferentialWithSuperscript()));
                if (a.nprimes > 0)
                    return l(e, r.Err(c, r.UnexpectedPrime()))
            }
            return l(e, s)
        }
        function _(e, t, n, i, s) {
            if ("Err" === n.type && "UnexpectedEnd" !== n.error.type)
                return l(t, n);
            if ("Err" === n.type || !o.isAt(t, s)) {
                var a = o.spanStates(e, t)
                    , c = r.Err(a, r.MissingCloseDelimiter(i, s));
                return l(t, c)
            }
            return t = o.advance(t),
                l(t, n)
        }
        function S(e) {
            var t = e
                , n = o.peek(e);
            switch (n.type) {
                case ")":
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedCloseDelimiter("(", ")")));
                case "]":
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedCloseDelimiter("[", "]")));
                case "\\}":
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedCloseDelimiter("\\{", "\\}")));
                case "|)":
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedCloseDelimiter("|", "|")));
                case "Differential":
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedDifferential()));
                default:
                    e = o.advance(e);
                    var i = o.spanStates(t, e);
                    return l(e, r.Err(i, r.UnexpectedParseError()))
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var k = [[s.initial("("), s.la(")"), s.initial("\\{"), s.la("\\}"), s.r("["), s.la("]"), s.initial("(|"), s.la("|)"), s.la("Differential"), s.la("End")], [s.ra("...")], [s.la(",")], [s.ra(":")], [s.la("="), s.la(">"), s.la("<"), s.la(">="), s.la("<="), s.la("~")], [s.la("+"), s.la("-")], [s.la("*"), s.la("/"), s.la("Decimal"), s.la("MixedNumber"), s.la("Letter"), s.la("Cmd"), s.la("%"), s.r("("), s.la("\\{"), s.la("(|"), s.la("Frac"), s.la("Sqrt"), s.la("Trig"), s.la("Ln"), s.la("Log"), s.ra("Int"), s.ra("Sum"), s.ra("Prod")], [s.initial("+"), s.initial("-")], [s.l("("), s.l("[")], [s.la("!")], [s.la("SupSub")], [s.la("Err")]]
            , M = s.precSpec(k)
            , C = M.leftPrec
            , I = M.rightPrec
            , T = M.initialPrec;
        t.parse = a
    }),
    define("math/inverses", [], function () {
        var e = {}
            , t = ["sin", "cos", "tan", "cot", "sec", "csc", "sinh", "cosh", "tanh", "coth", "sech", "csch"];
        return t.forEach(function (t) {
            e[t] = "arc" + t,
                e["arc" + t] = t
        }),
            e
    }),
    define("math/parser/lower", ["require", "exports", "math/inverses", "math/errormsg", "./input-span", "./surface-node"], function (e, t, n, r, i, o) {
        "use strict";
        function s(e, t) {
            return c(e, t)
        }
        function a(e, t) {
            for (var n = [], r = 0; r < t.length; r++)
                n.push(p(e, t[r]));
            return n
        }
        function c(e, t) {
            return e.setInput(l(e, t), i.slice(t.span))
        }
        function l(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Equals":
                    var i = t.args
                        , s = i[0]
                        , c = i[1];
                    if ("Call" === s.type) {
                        var l = s.args
                            , f = l[0]
                            , m = l[1]
                            , g = d(m);
                        if ("Cmd" === f.type && "logbase" === f.val && o.isIdentifier(g[0]) && "Decimal" === g[1].type && !/\./.test(g[1].val))
                            throw r.cannotRedefine("log");
                        if (o.isIdentifier(f) && g.every(o.isIdentifier)) {
                            if (M(f))
                                throw r.cannotRedefine("polygon");
                            return n.FunctionDefinition(p(e, f), a(e, g), p(e, c))
                        }
                    } else if (o.isIdentifier(s))
                        return n.Assignment(p(e, s), p(e, c));
                    return n.Equation(p(e, s), p(e, c));
                case "Tilde":
                    var y = a(e, t.args)
                        , s = y[0]
                        , c = y[1];
                    return n.Regression(s, c);
                case "Inequality":
                    return E(e, t);
                case "InequalityChain":
                    if (t.chain.length > 1)
                        throw r.inequalityChainTooLong();
                    var v = t.first
                        , b = v.symbol
                        , x = v.args
                        , w = x[0]
                        , _ = x[1]
                        , S = t.chain[0]
                        , k = S.symbol
                        , C = S.args[0];
                    return o.isIdentifier(_) ? n.DoubleInequality([p(e, w), b, p(e, _), k, p(e, C)]) : E(e, t);
                case "Seq":
                    if (!t.args.every(u))
                        throw r.malformedPoint();
                    return n.List(a(e, t.args));
                case "Call":
                    var I = t.args
                        , T = I[0]
                        , P = I[1];
                    return M(T) ? n.Polygon(a(e, d(P))) : h(e, t);
                default:
                    return h(e, t)
            }
        }
        function u(e) {
            if ("Paren" !== e.type)
                return !1;
            var t = e.args[0];
            return "Seq" === t.type && 2 === t.args.length
        }
        function d(e) {
            return "Seq" === e.type ? e.args : [e]
        }
        function p(e, t) {
            return e.setInput(h(e, t), i.slice(t.span))
        }
        function h(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Pos":
                    return h(e, t.args[0]);
                case "Neg":
                    for (var i = -1, s = t.args[0]; ;)
                        if ("Pos" === s.type || "Paren" === s.type)
                            s = s.args[0];
                        else {
                            if ("Neg" !== s.type)
                                break;
                            s = s.args[0],
                                i *= -1
                        }
                    switch (s.type) {
                        case "Decimal":
                            return n.Constant(i * S(s));
                        case "MixedNumber":
                            return n.Constant(i * k(s));
                        default:
                            return i === -1 ? n.Negative([p(e, s)]) : h(e, s)
                    }
                case "Add":
                    return n.Add(a(e, t.args));
                case "Sub":
                    return n.Subtract(a(e, t.args));
                case "Mul":
                    return n.Multiply(a(e, t.args));
                case "Div":
                    return n.Divide(a(e, t.args));
                case "Bang":
                    return n.FunctionCall("\\factorial", a(e, t.args));
                case "PercentOf":
                    return n.PercentOf(a(e, t.args));
                case "Call":
                    return v(e, t);
                case "ImplicitCall":
                    return _(t),
                        v(e, t);
                case "Prime":
                    var c = t.args[0];
                    if ("Call" === c.type) {
                        var l = c.args
                            , u = l[0]
                            , f = l[1]
                            , m = d(f).length;
                        if ("Cmd" === u.type && "logbase" === u.val) {
                            if (2 !== m)
                                throw r.primedFunctionArity()
                        } else if (1 !== m)
                            throw r.primedFunctionArity();
                        return n.Prime(t.nprimes, a(e, t.args))
                    }
                    throw "ImplicitCall" === c.type ? r.primeWithoutParen() : r.unexpectedPrime();
                case "Index":
                    return n.ListAccess(a(e, t.args));
                case "Paren":
                    var g = t.args[0];
                    return "Seq" === g.type ? 2 === g.args.length ? n.OrderedPair(a(e, g.args)) : r.nonPairTuple() : h(e, g);
                case "List":
                    var y = t.args[0];
                    if ("Ellipsis" === y.type) {
                        var w = y.args
                            , E = w[0]
                            , M = w[1];
                        return n.Range([n.List(a(e, d(E))), n.List(a(e, d(M)))])
                    }
                    return n.List(a(e, d(y)));
                case "Pipes":
                    return n.FunctionCall("\\abs", a(e, t.args));
                case "Subscript":
                    var T = t.args
                        , P = T[0]
                        , A = T[1];
                    if (0 === A.val.length)
                        throw r.emptySubscript();
                    var L = void 0;
                    switch (P.type) {
                        case "Letter":
                            L = P.val;
                            break;
                        case "Cmd":
                            L = P.val;
                            break;
                        default:
                            throw r.unexpectedSubscript()
                    }
                    return n.Identifier(L + "_" + A.val);
                case "Superscript":
                    var O = t.args
                        , P = O[0]
                        , D = O[1];
                    return "Call" !== P.type || "Seq" === P.args[1].type || C(P) ? n.Exponent(a(e, t.args)) : n.FunctionExponent(a(e, [P.args[0], P.args[1], D]));
                case "Sqrt":
                    return n.FunctionCall("sqrt", a(e, t.args));
                case "Nthroot":
                    return n.FunctionCall("nthroot", a(e, [t.args[1], t.args[0]]));
                case "Frac":
                    return n.Divide(a(e, t.args));
                case "Derivative":
                    var q = a(e, t.args);
                    if (!o.isIdentifier(t.args[0]))
                        throw r.parseError();
                    return n.Derivative(q[0], [q[1]]);
                case "Integral":
                    var N = t.args
                        , F = N[0]
                        , R = N[1]
                        , j = N[2]
                        , B = N[3]
                        , q = a(e, [F, R, j, B]);
                    return n.Integral(q);
                case "EmptyIntegral":
                    var V = a(e, t.args)
                        , F = V[0]
                        , U = V[1]
                        , j = V[2]
                        , B = n.Constant(1);
                    return n.Integral([F, U, j, B]);
                case "Sum":
                    var G = t.args
                        , z = G[0]
                        , H = G[1]
                        , j = G[2];
                    if ("Equals" != H.type)
                        throw r.incorrectSumLowerBound();
                    if (!o.isIdentifier(H.args[0]))
                        throw r.incorrectSumLowerBound();
                    var q = a(e, [H.args[0], H.args[1], j, z]);
                    return n.Sum(q);
                case "Product":
                    var W = t.args
                        , Y = W[0]
                        , $ = W[1]
                        , j = W[2];
                    if ("Equals" != $.type)
                        throw r.incorrectProductLowerBound();
                    if (!o.isIdentifier($.args[0]))
                        throw r.incorrectProductLowerBound();
                    var q = a(e, [$.args[0], $.args[1], j, Y]);
                    return n.Product(q);
                case "Juxt":
                    return b(e, t);
                case "Letter":
                    return n.Identifier(t.val);
                case "Cmd":
                    var K = t.val;
                    if ("ans" === K) {
                        if (void 0 === e.currentIndex)
                            throw r.badAnsContext();
                        return n.Ans("ans_{" + (e.currentIndex - 1) + "}")
                    }
                    return n.Identifier(K);
                case "Decimal":
                    return n.Constant(S(t));
                case "MixedNumber":
                    return n.Constant(k(t));
                case "Piecewise":
                    return x(e, t);
                case "EmptyPiecewise":
                    if (!n.Piecewise.empty)
                        throw r.featureUnavailable();
                    return n.Piecewise.empty();
                case "Equals":
                    throw r.unexpectedSymbol("=");
                case "Inequality":
                case "InequalityChain":
                    throw r.unexpectedInequality();
                case "Tilde":
                    throw r.unexpectedSymbol("~");
                case "Seq":
                    throw r.unexpectedSymbol(",");
                case "Colon":
                    throw r.unexpectedSymbol(":");
                case "Ellipsis":
                    throw r.unexpectedSymbol("...");
                case "Err":
                    throw I(t.error);
                default:
                    var X = t;
                    throw "Unexpected surface node " + X.type + "."
            }
        }
        function f(e) {
            return n.hasOwnProperty(e)
        }
        function m(e) {
            return "ln" === e || "log" === e || "logbase" === e
        }
        function g(e) {
            return "Decimal" === e.type && "2" === e.val
        }
        function y(e) {
            return "Neg" === e.type && (e = e.args[0],
                "Decimal" === e.type && "1" === e.val)
        }
        function v(e, t) {
            var i = e.nodes
                , s = t.args
                , c = s[0]
                , l = s[1]
                , u = p(e, c)
                , h = d(l)
                , v = a(e, h);
            if (M(c))
                throw r.unexpectedSymbol("polygon");
            if (o.isIdentifier(c))
                return i.FunctionCall(u, v);
            if ("Superscript" === c.type) {
                var b = c.args
                    , x = b[0]
                    , w = b[1];
                if ("Cmd" === x.type) {
                    var E = x.val;
                    if (f(E) || m(E)) {
                        if (g(w))
                            return i.Exponent([i.FunctionCall(E, v), p(e, w)]);
                        if (y(w) && void 0 !== n[E])
                            return i.FunctionCall(n[E], v);
                        throw f(E) ? r.badTrigExponent(E) : r.badLogExponent("logbase" === E ? "log" : E)
                    }
                }
            }
            return i.Multiply([u, p(e, l)])
        }
        function b(e, t) {
            var n = e.nodes
                , i = n.Multiply(a(e, t.args));
            if (!o.isOkForImplicitMultiply(t.args[1]))
                throw r.badImplicitMultiply();
            return i
        }
        function x(e, t) {
            var n, i = e.nodes, o = t.args[0], s = d(o), a = [];
            e: for (n = 0; n < s.length; n++) {
                var c = s[n];
                switch (c.type) {
                    case "Colon":
                        var l = c.args
                            , u = l[0]
                            , h = l[1];
                        if (!w(u))
                            throw r.colonMissingCondition();
                        a.push({
                            condition: E(e, u),
                            if_expr: p(e, h)
                        });
                        break;
                    case "Equals":
                    case "Inequality":
                    case "InequalityChain":
                        a.push({
                            condition: E(e, c),
                            if_expr: i.Constant(1)
                        });
                        break;
                    default:
                        break e
                }
            }
            if (0 === n)
                throw r.piecewiseMissingCondition();
            if (n < s.length - 1)
                throw r.piecewisePartMissingCondition();
            if (n === s.length - 1 && a.push({
                condition: i.Constant(!0),
                if_expr: p(e, s[n])
            }),
                !i.Piecewise.chain)
                throw r.featureUnavailable();
            return i.Piecewise.chain(a)
        }
        function w(e) {
            return "Equals" === e.type || "Inequality" === e.type || "InequalityChain" === e.type
        }
        function E(e, t) {
            var n = e.nodes;
            switch (t.type) {
                case "Equals":
                    return n.Comparator["="](a(e, t.args));
                case "Inequality":
                    return n.Comparator[t.symbol](a(e, t.args));
                case "InequalityChain":
                    if (t.chain.length > 1)
                        throw r.inequalityChainTooLong();
                    var s = t.first
                        , c = s.symbol
                        , l = s.args
                        , u = l[0]
                        , d = l[1]
                        , p = t.chain[0]
                        , h = p.symbol
                        , f = p.args[0]
                        , m = i.emptySpanAt(t.span.input, t.span.start);
                    return n.And([E(e, o.Inequality(m, c, [u, d])), E(e, o.Inequality(m, h, [d, f]))]);
                default:
                    throw r.parseError()
            }
        }
        function _(e) {
            var t = e.args
                , n = t[0]
                , i = t[1];
            if ("Superscript" === n.type && (n = n.args[0]),
                "Cmd" === n.type && "logbase" === n.val && "Seq" === i.type && 2 === i.args.length) {
                if (!o.isOkForImplicitCall(i.args[0]))
                    throw r.badImplicitCall("log")
            } else if (!o.isOkForImplicitCall(i)) {
                if ("Cmd" === n.type)
                    throw r.badImplicitCall(n.val);
                throw r.parseError()
            }
        }
        function S(e) {
            return parseFloat(e.val)
        }
        function k(e) {
            return parseFloat(e.whole) + parseFloat(e.num) / parseFloat(e.den)
        }
        function M(e) {
            return "Cmd" === e.type && "polygon" === e.val
        }
        function C(e) {
            if ("Call" !== e.type)
                return !1;
            for (var t = e.args[0]; "Superscript" === t.type || "Subscript" === t.type || "Prime" === t.type;)
                t = t.args[0];
            return "Cmd" === t.type && (f(t.val) || m(t.val))
        }
        function I(e) {
            switch (e.type) {
                case "UnexpectedParseError":
                case "MissingBound":
                case "EmptyGroup":
                case "UnexpectedDifferential":
                case "UnexpectedEnd":
                    return r.parseError();
                case "InvalidOperatorName":
                    return r.invalidOperatorName();
                case "UnexpectedCloseDelimiter":
                case "MissingCloseDelimiter":
                    return r.mismatchedBraces(e.open, e.close);
                case "UnrecognizedSymbol":
                    return "." === e.val ? r.unexpectedSymbol(e.val) : r.unrecognizedSymbol(e.val);
                case "EmptyInput":
                    return r.blankExpression();
                case "BinaryOperatorMissingRight":
                case "BinaryOperatorMissingLeft":
                    return r.binaryOperatorMissingOperand("%" === e.val ? "% of" : e.val);
                case "UnaryOperatorMissingLeft":
                    return r.unaryOperatorMissingLeft(e.val);
                case "UnaryOperatorMissingRight":
                    return r.unaryOperatorMissingRight(e.val);
                case "UnexpectedSubscript":
                    return r.cannotSubscript(e.base);
                case "PercentMissingOf":
                    return r.percentMissingOf();
                case "SumMissingBound":
                    return r.sumMissingBound();
                case "ProductMissingBound":
                    return r.productMissingBound();
                case "IntegralMissingBound":
                    return r.integralMissingBound();
                case "SumMissingBody":
                    return r.sumMissingBody();
                case "ProductMissingBody":
                    return r.productMissingBody();
                case "IntegralMissingBody":
                    return r.integralMissingBody();
                case "DerivativeMissingBody":
                    return r.derivativeMissingBody();
                case "IntegralMissingDifferential":
                    return r.integralMissingDifferential();
                case "DifferentialWithSuperscript":
                    return r.differentialWithSuperscript();
                case "FractionMissingNumerator":
                    return r.fractionMissingNumerator();
                case "FractionMissingDenominator":
                    return r.fractionMissingDenominator();
                case "FractionEmpty":
                    return r.fractionEmpty();
                case "EmptySuperscript":
                    return r.emptySuperscript();
                case "EmptySubscript":
                    return r.emptySubscript();
                case "InvalidSubscript":
                    return r.invalidSubscript(e.val);
                case "SuperscriptWithPrime":
                    return r.superscriptWithPrime();
                case "PrimeWithoutParen":
                    return r.primeWithoutParen();
                case "UnexpectedPrime":
                    return r.unexpectedPrime();
                case "EmptyRadical":
                    return r.emptyRadical();
                case "EmptyRadicand":
                    return r.emptyRadicand();
                case "EmptyParen":
                    return r.emptyParen();
                case "EmptySquareBracket":
                    return r.emptySquareBracket();
                case "EmptyPipe":
                    return r.emptyPipe();
                case "FunctionMissingArgument":
                    return r.wrongArity(e.val, 1, 0);
                default:
                    var t = e;
                    throw "Unexpected surface node " + t.type + "."
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.lower = s
    }),
    define("math/baseparser", ["require", "exports", "math/errormsg", "parsenodes", "math/parser/latex-parser", "math/parser/expression-parser", "math/parser/lower"], function (e, t, n, r, i, o, s) {
        "use strict";
        function a() {
            throw n.featureUnavailable()
        }
        function c(e, t) {
            return e.setInputString(t),
                e
        }
        function l(e, t) {
            if ("string" != typeof e)
                throw new Error("Type Error: parse can only be called with strings");
            t = t || {};
            var n = r;
            if (t.disabledFeatures) {
                n = Object.create(n);
                for (var l = 0, u = t.disabledFeatures; l < u.length; l++) {
                    var d = u[l];
                    if (!n[d])
                        throw new Error("Programming Error: " + d + " cannot be disabled because it is not a parsenode.");
                    n[d] = a
                }
            }
            var p = {
                nodes: n,
                currentIndex: t.index,
                setInput: c
            };
            try {
                var h = i.parse(e)
                    , f = o.parse(h);
                return s.lower(p, f)
            } catch (e) {
                if (e instanceof r.Error)
                    return e;
                if ("string" == typeof e)
                    return r.Error(e);
                throw e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.parse = l
    }),
    define("math/rational-arithmetic-sequence", ["require", "math/distance", "math/builtin"], function (e) {
        function t(e, t) {
            var i = r.toFraction(e)
                , o = r.toFraction(t);
            if (n.approx(i.n / i.d, e) && n.approx(o.n / o.d, t)) {
                var s = r.lcm(i.d, o.d)
                    , a = i.n * (s / i.d)
                    , c = o.n * (s / o.d)
                    , l = c - a;
                return {
                    nstart: a,
                    nstep: l,
                    lcm: s
                }
            }
        }
        var n = e("math/distance")
            , r = e("math/builtin");
        return t
    }),
    define("math/features/getConcreteTree", ["require", "parsenodes", "math/errormsg", "math/types", "graphing/label", "math/distance", "math/rational-arithmetic-sequence"], function (e) {
        function t(e, t, n, r, i) {
            if (n < e.length && !c.approx(i, e.elementAt(n).constantValue, 10))
                throw o.nonArithmeticRange();
            if (r - n <= t.length && r - n > 1 && !c.approx(i, t.elementAt(t.length - r + n).constantValue, 10))
                throw o.nonArithmeticRange()
        }
        function n(e, t) {
            for (var n = !1, r = !1, i = 0; i < e.length; i++) {
                var o = e[i];
                (o.isList || o.isBroadcast) && (r = !0);
                for (var s = o.getDependencies(), a = 0; a < s.length; a++)
                    if (t.indexOf(s[a]) !== -1) {
                        if (o.isList || o.isBroadcast)
                            return "list"
                    } else
                        n = !0
            }
            return r ? n ? "broadcast" : "list" : "none"
        }
        function r(e) {
            var t, n = [], r = [], o = [];
            for (t = 0; t < e.length; t++) {
                var a, c = e[t];
                if (c.isList) {
                    for (var l = !1, u = 0; u < o.length; u++)
                        if (c === o[u]) {
                            l = !0,
                                a = i.DummyIndex(r[u]),
                                a.valueType = s.elementType(c.valueType),
                                n.push(a);
                            break
                        }
                    if (!l) {
                        var d = i.Base.prototype.tmpVar();
                        r.push(d),
                            o.push(c),
                            a = i.DummyIndex(d),
                            a.valueType = s.elementType(c.valueType),
                            n.push(a)
                    }
                } else
                    c.isBroadcast ? (Array.prototype.push.apply(r, c._replacedSymbols),
                        Array.prototype.push.apply(o, c._lists),
                        n.push(c._expression)) : n.push(c)
            }
            return {
                replacedArgs: o,
                concreteArgs: n,
                replacedSymbols: r
            }
        }
        var i = e("parsenodes")
            , o = e("math/errormsg")
            , s = e("math/types")
            , a = e("graphing/label")
            , c = e("math/distance")
            , l = e("math/rational-arithmetic-sequence")
            , u = i.List
            , d = i.OrderedPair
            , p = i.ScalarExpression
            , h = i.Constant
            , f = i.Multiply
            , m = i.Identifier
            , g = i.DummyIndex
            , y = i.BuiltInFunction;
        i.Base.prototype.getConcreteTree = function (e, t) {
            if (t)
                return this._getConcreteTree(e, t);
            if (this.isConcreteTreeCacheValid(e))
                return this.__cachedConcreteTree.value;
            for (var n = this._getConcreteTree(e, t), r = {}, i = this.getCacheKeys().slice(); ;) {
                if (!i.length)
                    break;
                var o = i.pop();
                if (!r.hasOwnProperty(o)) {
                    var s = e[o];
                    r[o] = s,
                        s && Array.prototype.push.apply(i, s.getCacheKeys())
                }
            }
            return this.__cachedConcreteTree = {
                keys: r,
                value: n
            },
                n
        }
            ,
            i.Base.prototype.getCacheKeys = function () {
                return this.getDependencies()
            }
            ,
            i.Base.prototype.isConcreteTreeCacheValid = function (e) {
                if (!this.__cachedConcreteTree)
                    return !1;
                for (var t in this.__cachedConcreteTree.keys)
                    if (this.__cachedConcreteTree.keys.hasOwnProperty(t) && e[t] !== this.__cachedConcreteTree.keys[t])
                        return !1;
                return !0
            }
            ,
            i.PercentOf.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : i.Divide([i.Multiply(this.args), i.Constant(100)]).getConcreteTree(e, t)
            }
            ,
            i.Assignment.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : this._expression.getConcreteTree(e, t)
            }
            ,
            i.Identifier.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = e[this._symbol];
                if (n) {
                    if (n.isError)
                        throw n;
                    return n.isFunction ? n.getConcreteInvocationTree(e, [], t) : n.getConcreteTree(e, t)
                }
                if (y.hasOwnProperty(this._symbol))
                    throw o.functionUnsupported(a.latexToIdentifier(this.getInputString()));
                return i.FreeVariable(this._symbol)
            }
            ,
            i.Ans.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                if (void 0 === e[this._symbol])
                    throw o.ansUndefined();
                return m.prototype._getConcreteTree.call(this, e, t)
            }
            ,
            i.Equation.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : this.asComparator().getConcreteTree(e, t)
            }
            ,
            i.Constant.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : new this.constructor(this.constantValue)
            }
            ,
            i.Derivative.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n;
                if (e[this._symbol]) {
                    var r = Object.create(e);
                    r[this._symbol] = i.FreeVariable(this._symbol);
                    var a = e[this._symbol].getConcreteTree(e, t);
                    if (a.valueType !== s.Number && a.valueType !== s.ListOfNumber)
                        throw o.derivativeVariableTypeError(this._symbol, [s.prettyPrint(a.valueType)]);
                    var c = {};
                    return c[this._symbol] = a,
                        n = this.args[0].getConcreteTree(r, t),
                        this.typeCheck([n]),
                        n.takeDerivative(this._symbol).substitute(c).getConcreteTree(e, t)
                }
                return n = this.args[0].getConcreteTree(e, t),
                    this.typeCheck([n]),
                    n.takeDerivative(this._symbol).getConcreteTree(e, t)
            }
            ,
            i.DoubleInequality.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : new this.constructor([i.Piecewise([this._indicator, this._expressions[0], h(NaN)]).getConcreteTree(e, t), this._operators[0], m(this._symbol), this._operators[1], i.Piecewise([this._indicator, this._expressions[1], h(NaN)]).getConcreteTree(e, t)])
            }
            ,
            i.Expression.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var n = [], r = 0; r < this.args.length; r++)
                    n.push(this.args[r].getConcreteTree(e, t));
                return this.typeCheck(n),
                    this._constantCollapsedCopy(n)
            }
            ,
            i.Error.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : this
            }
            ,
            i.FreeVariable.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : this
            }
            ,
            i.FunctionCall.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = e[this._symbol];
                if (n && n.isError)
                    throw n;
                if (!n || !n.isFunction) {
                    if (y.hasOwnProperty(this._symbol))
                        throw o.functionUnsupported(a.latexToIdentifier(this._identifier.getInputString()));
                    if (1 == this.args.length) {
                        var r = [m(this._symbol), this.args[0]];
                        return f(r).getConcreteTree(e, t)
                    }
                    if (n)
                        throw o.variableAsFunction(this._symbol);
                    throw o.functionNotDefined(this._symbol)
                }
                for (var i = [], s = 0; s < this.args.length; s++) {
                    var c = this.args[s].getConcreteTree(e, t);
                    i.push(c)
                }
                return n.getConcreteInvocationTree(e, i, t)
            }
            ,
            i.FunctionExponent.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = this.args[0]._symbol;
                return e[n] && e[n].isFunction ? i.Exponent([i.FunctionCall(n, [this.args[1]]), this.args[2]]).getConcreteTree(e, t) : f([this.args[0], i.Exponent([this.args[1], this.args[2]])]).getConcreteTree(e, t)
            }
            ,
            i.FunctionDefinition.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var n = 0; n < this._argSymbols.length; n++) {
                    if (e[this._argSymbols[n]])
                        throw o.parameterAlreadyDefined(this._argSymbols[n]);
                    if (this._argSymbols[n] === this._symbol)
                        throw o.parameterAlreadyDefined(this._argSymbols[n])
                }
                return this._expression.getConcreteTree(e, t)
            }
            ,
            i.Image.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : i.Image({
                    center: this.center.tryGetConcreteTree(e, t),
                    radianAngle: this.radianAngle.tryGetConcreteTree(e, t),
                    width: this.width.tryGetConcreteTree(e, t),
                    height: this.height.tryGetConcreteTree(e, t)
                }, this.moveStrategy)
            }
            ,
            i.Integral.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                if (e[this._differential._symbol])
                    throw o.shadowedIntegrationVariable(this._differential._symbol);
                var n = this.args[0]
                    , r = this.args[1]
                    , i = this.args[2];
                if (r.dependsOn(n._symbol) || i.dependsOn(n._symbol))
                    throw o.badIntegralBoundDependency(n._symbol);
                var s = Object.create(e);
                s[this._differential._symbol] = g(this._differential._symbol);
                var a = p.prototype._getConcreteTree.call(this, s, t);
                return a
            }
            ,
            i.ListAccess.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = this.index.getConcreteTree(e, t)
                    , r = this.list.getConcreteTree(e, t)
                    , i = [r, n];
                return this.typeCheck(i),
                    this._constantCollapsedCopy(i)
            }
            ,
            i.List.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var n = [], r = 0; r < this.args.length; r++) {
                    var i = this.args[r].getConcreteTree(e, t);
                    n.push(i)
                }
                return this.typeCheck(n),
                    new this.constructor(n)
            }
            ,
            i.ParametrizedReducerFunction.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var o = [], s = 0; s < this.args.length; s++)
                    o.push(this.args[s].getConcreteTree(e, t));
                switch (n([o[1]], this.getDummyDependencies())) {
                    case "none":
                        return this.typeCheck(o),
                            this._constantCollapsedCopy(o);
                    case "list":
                        return i.List(i.List.mapArgs([o[1]], function (e) {
                            return e = [o[0]].concat(e),
                                this.typeCheck(e),
                                this._constantCollapsedCopy(e)
                        }
                            .bind(this)));
                    case "broadcast":
                        var a = r([o[1]])
                            , c = [o[0]].concat(a.concreteArgs);
                        return this.typeCheck(c),
                            i.Broadcast(a.replacedSymbols, [this.copyWithArgs(c)].concat(a.replacedArgs))
                }
            }
            ,
            i.Prime.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = this.args[0]
                    , r = n.args[0];
                if (!e[n._symbol])
                    throw o.functionNotDefined(n._symbol);
                var i, s = this.tmpVar();
                if ("logbase" === n._symbol) {
                    if (2 !== n.args.length)
                        throw o.primedFunctionArity();
                    i = [m(s), n.args[1]]
                } else {
                    if (1 !== n.args.length)
                        throw o.primedFunctionArity();
                    i = [m(s)]
                }
                for (var a = n.copyWithArgs(i).getConcreteTree(e, t), c = 0; c < this.order; c++)
                    a = a.takeDerivative(s);
                var l = {};
                return l[s] = r,
                    a.substitute(l).getConcreteTree(e, t)
            }
            ,
            i.Range.prototype._getConcreteTree = function (e, n) {
                if (n && n[this.type])
                    return n[this.type].call(this, e, n);
                var r = this.beginning.getConcreteTree(e, n)
                    , i = this.end.getConcreteTree(e, n);
                if (r.getDependencies().length)
                    throw o.variableRange(r.getDependencies());
                if (i.getDependencies().length)
                    throw o.variableRange(i.getDependencies());
                if (!r.isList || !i.isList)
                    throw new Error("Programming Error: range bounds must be List nodes.");
                var s, a, c = r.elementAt(0).constantValue, d = i.elementAt(i.length - 1).constantValue, p = d - c;
                if (1 === r.length)
                    s = p >= 0 ? 1 : -1;
                else {
                    var f = r.elementAt(1).constantValue;
                    a = l(c, f),
                        s = r.elementAt(1).constantValue - c
                }
                var m = Math.round(p / s) + 1;
                if (!isFinite(m) || m < r.length || m < i.length)
                    throw o.nonArithmeticRange();
                var g, y, v = [];
                if (a) {
                    var b = a.nstart;
                    for (g = 0; g < m; g++)
                        y = b / a.lcm,
                            t(r, i, g, m, y),
                            v.push(h(y)),
                            b += a.nstep
                } else
                    for (v.push(h(c)),
                        g = 1; g < m; g++)
                        y = c + g * s,
                            t(r, i, g, m, y),
                            v.push(h(y));
                return u(v)
            }
            ,
            i.ReducerFunction.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                if (0 === this.args.length)
                    throw o.zeroArgReducer(this._symbol);
                for (var s = [], a = 0; a < this.args.length; a++)
                    s.push(this.args[a].getConcreteTree(e, t));
                if (1 === this.args.length)
                    return s = [i.List.wrap(s[0])],
                        this.typeCheck(s),
                        this._constantCollapsedCopy(s);
                switch (n(s, this.getDummyDependencies())) {
                    case "none":
                        return s = [i.List(s)],
                            this.typeCheck(s),
                            this._constantCollapsedCopy(s);
                    case "list":
                        return i.List(i.List.mapArgs(s, function (e) {
                            return e = [i.List(e)],
                                this.typeCheck(e),
                                this._constantCollapsedCopy(e)
                        }
                            .bind(this)));
                    case "broadcast":
                        var c = r(s);
                        return s = [i.List(c.concreteArgs)],
                            this.typeCheck(s),
                            i.Broadcast(c.replacedSymbols, [this.copyWithArgs(s)].concat(c.replacedArgs))
                }
            }
            ,
            i.RepeatedOperator.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                if (e[this._index._symbol])
                    throw o.shadowedIndex(this._index._symbol);
                var n = Object.create(e);
                n[this._index._symbol] = g(this._index._symbol);
                var r = p.prototype._getConcreteTree.call(this, n, t);
                return r
            }
            ,
            i.ScalarExpression.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var o = [], s = 0; s < this.args.length; s++)
                    o.push(this.args[s].getConcreteTree(e, t));
                switch (n(o, this.getDummyDependencies())) {
                    case "none":
                        return this.typeCheck(o),
                            this._constantCollapsedCopy(o);
                    case "list":
                        return i.List(i.List.mapArgs(o, function (e) {
                            return this.typeCheck(e),
                                this._constantCollapsedCopy(e)
                        }
                            .bind(this)));
                    case "broadcast":
                        var a = r(o);
                        return this.typeCheck(a.concreteArgs),
                            i.Broadcast(a.replacedSymbols, [this.copyWithArgs(a.concreteArgs)].concat(a.replacedArgs))
                }
            }
            ,
            i.Regression.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : new this.constructor(this._lhs, this._rhs)
            }
            ,
            i.Polygon.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                var n = this.args.map(function (t) {
                    return t.getConcreteTree(e)
                });
                return this.typeCheck(n),
                    1 === n.length && n[0].valueType === s.ListOfPoint ? new this.constructor(n) : n.every(function (e) {
                        return e.valueType === s.Point
                    }) ? new this.constructor([u(n)]) : 2 === n.length ? new this.constructor([d(this.args).getConcreteTree(e)]) : o.parseError()
            }
            ,
            i.SolvedEquation.prototype._getConcreteTree = function (e, t) {
                return t && t[this.type] ? t[this.type].call(this, e, t) : new this.constructor(this._symbol, this._expression.getConcreteTree(e, t))
            }
            ,
            i.Table.prototype._getConcreteTree = function (e, t) {
                if (t && t[this.type])
                    return t[this.type].call(this, e, t);
                for (var n = [], r = Object.create(e), i = 0; i < this.columns.length; i++) {
                    var o = this.columns[i].getConcreteTree(r, e, t);
                    o.isIndependent && this.columns[i].exportToLocal(o, r),
                        n.push(o)
                }
                return new this.constructor(n)
            }
            ,
            i.TableColumn.prototype._getConcreteTree = function (e, t) {
                var n, r, i = this.header.getConcreteTree(e);
                if (i.isFreeVariable) {
                    n = [];
                    for (var a = 0; a < this.values.length; a++)
                        if (this.values[a].tableError())
                            n.push(o.invalidTableEntry(this.values[a].tableError()));
                        else {
                            var c = this.values[a].tryGetConcreteTree(e);
                            c.isError ? n.push(c) : c.tableError() ? n.push(o.invalidTableEntry(c.tableError())) : c.valueType === s.Number ? n.push(c) : n.push(o.tableEntryTypeError([s.prettyPrint(c.valueType)]))
                        }
                    return r = new this.constructor(i, this.length, n),
                        r.isIndependent = !0,
                        r
                }
                if (i.isConstant) {
                    for (var l = [], u = 0; u < this.length; u++)
                        l.push(i);
                    n = l
                } else
                    n = i.isList ? i.args : [];
                return i = this.header.getConcreteTree(t),
                    i.isError || i.valueType === s.Number || i.valueType === s.ListOfNumber || (i = o.tableHeaderTypeError([s.prettyPrint(i.valueType)])),
                    r = new this.constructor(i, this.length, n)
            }
    }),
    define("math/features/getValueType", ["require", "parsenodes", "math/types"], function (e) {
        function t() {
            return s.Number
        }
        function n() {
            return s.Bool
        }
        function r() {
            return s.Point
        }
        function i() {
            return s.Any
        }
        var o = e("parsenodes")
            , s = e("math/types")
            , a = {
                Add: t,
                Multiply: t,
                Divide: t,
                Subtract: t,
                Exponent: t,
                Negative: t,
                And: n,
                Piecewise: function (e) {
                    return e[1].valueType
                },
                BaseComparator: n,
                RepeatedOperator: t,
                List: function (e) {
                    if (0 === e.length)
                        return s.ListOfAny;
                    for (var t = e[0].valueType, n = 1; n < e.length; n++)
                        if (e[n].valueType !== t)
                            return s.ListOfAny;
                    return s.hasListType(t) ? s.listType(t) : s.ListOfAny
                },
                ListAccess: function (e) {
                    return s.elementType(e[0].valueType)
                },
                Broadcast: function (e) {
                    return s.listType(e[0].valueType)
                },
                OrderedPairAccess: t,
                OrderedPair: r,
                NativeFunction: t,
                ReducerFunction: t,
                DoubleReducerFunction: t,
                ParametrizedReducerFunction: t,
                DummyIndex: t,
                FreeVariable: t,
                Constant: function () {
                    switch (typeof this.constantValue) {
                        case "number":
                            return s.Number;
                        case "boolean":
                            return s.Bool;
                        default:
                            throw new Error("Constant node expects value of type number or boolean, but saw " + typeof value)
                    }
                },
                TypedFunction: function () {
                    return this._outputType
                },
                Derivative: t,
                Integral: t,
                Identifier: i
            };
        for (var c in a)
            o[c].prototype._getValueType = a[c]
    }),
    define("math/features/typeCheck", ["require", "parsenodes", "math/types", "math/errormsg"], function (e) {
        function t(e) {
            for (var t = [], n = 0; n < e.length; n++)
                t.push(i.prettyPrint(e[n].valueType));
            return t
        }
        function n(e, n) {
            return function (r) {
                for (var i = 0; i < r.length; i++)
                    if (r[i].valueType !== e[i])
                        throw n(t(r))
            }
        }
        var r = e("parsenodes")
            , i = e("math/types")
            , o = e("math/errormsg")
            , s = {
                Add: n([i.Number, i.Number], o.addTypeError),
                Multiply: n([i.Number, i.Number], o.multiplyTypeError),
                Divide: n([i.Number, i.Number], o.divideTypeError),
                Subtract: n([i.Number, i.Number], o.subtractTypeError),
                Exponent: n([i.Number, i.Number], o.exponentTypeError),
                Negative: n([i.Number], o.negativeTypeError),
                BaseComparator: n([i.Number, i.Number], o.comparatorTypeError),
                And: n([i.Bool, i.Bool], o.andTypeError),
                List: function (e) {
                    if (0 !== e.length) {
                        var t = e[0].valueType;
                        if (!i.hasListType(t))
                            throw o.listTypeError([i.prettyPrint(t)]);
                        for (var n = 0; n < e.length; n++) {
                            var r = e[n].valueType;
                            if (!i.hasListType(r))
                                throw o.listTypeError([i.prettyPrint(r)]);
                            if (r !== t)
                                throw o.heterogeneousList()
                        }
                    }
                },
                Broadcast: function (e) { },
                OrderedPair: n([i.Number, i.Number], o.pointTypeError),
                Piecewise: function (e) {
                    if (e[0].valueType !== i.Bool)
                        throw o.piecewiseConditionTypeError(t(e));
                    if (e[1].valueType !== i.Number)
                        throw o.piecewiseBranchTypeError([i.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== i.Number)
                        throw o.piecewiseBranchTypeError([i.prettyPrint(e[2].valueType)])
                },
                ListAccess: function (e) {
                    if (!i.isList(e[0].valueType) || e[1].valueType !== i.Number)
                        throw o.indexTypeError(t(e))
                },
                OrderedPairAccess: n([i.Point, i.Number], o.indexTypeError),
                Sum: function (e) {
                    if (e[1].valueType !== i.Number)
                        throw o.sumLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== i.Number)
                        throw o.sumUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== i.Number)
                        throw o.sumArgumentTypeError([i.prettyPrint(e[3].valueType)])
                },
                Product: function (e) {
                    if (e[1].valueType !== i.Number)
                        throw o.productLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== i.Number)
                        throw o.productUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== i.Number)
                        throw o.productArgumentTypeError([i.prettyPrint(e[3].valueType)])
                },
                Integral: function (e) {
                    if (e[1].valueType !== i.Number)
                        throw o.integralLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);
                    if (e[2].valueType !== i.Number)
                        throw o.integralUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);
                    if (e[3].valueType !== i.Number)
                        throw o.integralArgumentTypeError([i.prettyPrint(e[3].valueType)])
                },
                NativeFunction: function (e) {
                    for (var n = 0; n < e.length; n++)
                        if (e[n].valueType !== i.Number)
                            throw o.functionTypeError(this._symbol, t(e))
                },
                ReducerFunction: function (e) {
                    if (e[0].valueType !== i.ListOfNumber)
                        throw o.functionTypeError(this._symbol, t(e))
                },
                DoubleReducerFunction: function (e) {
                    if (!i.isList(e[0].valueType) || !i.isList(e[1].valueType))
                        throw o.nonListDoubleReducer(this._symbol);
                    if (e[0].valueType !== i.ListOfNumber || e[1].valueType !== i.ListOfNumber)
                        throw o.functionTypeError(this._symbol, t(e))
                },
                ParametrizedReducerFunction: function (e) {
                    if (e[0].valueType !== i.ListOfNumber)
                        throw o.nonListParametrizedReducer(this._symbol);
                    if (e[1].valueType !== i.Number)
                        throw o.functionTypeError(this._symbol, t(e))
                },
                TypedFunction: function (e) {
                    for (var n = 0; n < e.length; n++)
                        if (e[n].valueType !== this._inputTypes[n])
                            throw o.functionTypeError(this._symbol, t(e))
                },
                Derivative: function (e) {
                    if (e[0].valueType !== i.Number && e[0].valueType !== i.ListOfNumber)
                        throw o.derivativeTypeError(t(e))
                },
                Regression: function (e) {
                    if (e[0].valueType !== i.Number && e[0].valueType !== i.ListOfNumber || e[1].valueType !== i.Number && e[1].valueType !== i.ListOfNumber)
                        throw o.regressionTypeError(t(e))
                },
                Polygon: function (e) {
                    if (1 === e.length && e[0].valueType !== i.ListOfPoint)
                        throw o.polygonListTypeError(t(e));
                    if (2 === e.length && e[0].valueType === i.Number && e[1].valueType === i.Number)
                        throw o.polygonTwoNumbersError();
                    if (e.length > 2 && !e.every(function (e) {
                        return e.valueType === i.Point
                    }))
                        throw o.polygonPointArgsError()
                }
            };
        for (var a in s)
            r[a].prototype.typeCheck = s[a]
    }),
    define("math/features/repr", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes")
            , n = function (e, t, n) {
                n = n || 0;
                var r = Array(n + 1).join("  ")
                    , i = r + "  ";
                return "[\n" + i + e.map(function (e) {
                    return e.repr(t, n + 1)
                }).join(",\n" + i) + "\n" + r + "]"
            }
            , r = function (e, t) {
                return t = t || "",
                    "" + t + e
            };
        t.Expression.prototype.repr = function (e, t) {
            return r(this.type, e) + "(" + n(this.args, e, t) + ")"
        }
            ,
            t.DoubleInequality.prototype.repr = function (e, t) {
                t = t || 0;
                var n = Array(t + 1).join("  ")
                    , i = n + "  ";
                return r(this.type, e) + "([\n" + i + this.args[0].repr(e, t + 1) + ",\n" + i + "'" + this.args[1] + "',\n" + i + this.args[2].repr(e, t + 1) + ",\n" + i + "'" + this.args[3] + "',\n" + i + this.args[4].repr(e, t + 1) + "\n" + n + "])"
            }
            ,
            t.Identifier.prototype.repr = t.FreeVariable.prototype.repr = function (e) {
                return r(this.type, e) + "('" + this._symbol + "')"
            }
            ,
            t.Constant.prototype.repr = function (e) {
                return r(this.type, e) + "(" + this.constantValue + ")"
            }
            ,
            t.FunctionCall.prototype.repr = function (e, t) {
                return r(this.type, e) + "('" + this._symbol + "', " + n(this.args, e, t) + ")"
            }
            ,
            t.Assignment.prototype.repr = function (e, n) {
                return r(this.type, e) + "(" + t.Identifier(this._symbol).repr(e, n) + ", " + this._expression.repr(e, n) + ")"
            }
            ,
            t.Regression.prototype.repr = t.Equation.prototype.repr = function (e, t) {
                return r(this.type, e) + "(" + this._lhs.repr(e, t) + ", " + this._rhs.repr(e, t) + ")"
            }
            ,
            t.FunctionDefinition.prototype.repr = function (e, i) {
                return r(this.type, e) + "(" + t.Identifier(this._symbol).repr(e, i) + ", " + n(this._argSymbols.map(function (e) {
                    return t.Identifier(e)
                }), e, i) + ", " + this._expression.repr(e, i) + ")"
            }
            ,
            t.Error.prototype.repr = function (e, t) {
                return r(this.type, e) + "('" + this._msg + "')"
            }
            ,
            t.Derivative.prototype.repr = function (e, t) {
                return r(this.type, e) + "('" + this._symbol + "', " + n(this.args, e, t) + ")"
            }
            ,
            t.SolvedEquation.prototype.repr = function (e, t) {
                return r(this.type, e) + "('" + this._symbol + "', " + this._expression.repr(e, t) + ")"
            }
            ,
            t.OptimizedRegression.prototype.repr = function (e, t) {
                return r(this.type, e) + "(" + JSON.stringify(this.parameters) + ", " + JSON.stringify(this.residuals) + ", " + JSON.stringify(this.statistics) + ", " + this.model.repr(e, t + 1) + ", " + JSON.stringify({
                    isModelValid: this.isModelValid,
                    residualVariable: this.residualVariable,
                    residualSuggestionId: this.residualSuggestionId,
                    shouldSuggestLogMode: this.shouldSuggestLogMode
                }) + ")"
            }
            ,
            t.Table.prototype.repr = function (e, t) {
                return r(this.type, e) + "(" + n(this.columns, e, t) + ")"
            }
            ,
            t.TableColumn.prototype.repr = function (e, t) {
                return r(this.type, e) + "(" + this.header.repr(e, t) + ", " + this.length + ", " + n(this.values, e, t) + ")"
            }
            ,
            t.Image.prototype.repr = function (e, t) {
                var n = Array(t + 1).join("  ")
                    , i = n + "  ";
                return r(this.type, e) + "({\n" + i + "center: " + this.center.repr(e, t + 1) + ",\n" + i + "radianAngle: " + this.radianAngle.repr(e, t + 1) + ",\n" + i + "width: " + this.width.repr(e, t + 1) + ",\n" + i + "height: " + this.height.repr(e, t + 1) + "},\n" + i + JSON.stringify(this.moveStrategy) + "\n" + n + ")"
            }
            ,
            t.Broadcast.prototype.repr = function (e, t) {
                return r(this.type, e) + "(['" + this._replacedSymbols.join("', ") + "'], " + n(this.args, e, t) + ")"
            }
    }),
    define("math/features/scalarEvalExpression", ["require", "parsenodes", "math/functions"], function (e) {
        var t = e("parsenodes")
            , n = e("math/functions")
            , r = {
                Add: function (e) {
                    return "(" + e.join("+") + ")"
                },
                Multiply: function (e) {
                    return "(" + e.join("*") + ")"
                },
                Divide: function (e) {
                    return "(" + e.join("/") + ")"
                },
                Subtract: function (e) {
                    return "(" + e.join("-") + ")"
                },
                Exponent: function (e) {
                    return "BuiltIn.pow(" + e.join(",") + ")"
                },
                RawExponent: function (e) {
                    return "Math.pow(" + e.join(",") + ")"
                },
                Negative: function (e) {
                    return "(-" + e[0] + ")"
                },
                And: function (e) {
                    return e.join("&&")
                },
                Piecewise: function (e) {
                    return "(" + e[0] + "?" + e[1] + ":" + e[2] + ")"
                }
            }
            , i = {
                Add: 2,
                Multiply: 2,
                Divide: 2,
                Subtract: 2,
                Exponent: 2,
                RawExponent: 2,
                Negative: 1,
                And: 2,
                Piecewise: 3
            };
        for (var o in r) {
            var s = t[o].prototype;
            s.scalarEvalExpression = r[o],
                s.evaluate = n.createEvaluateFunction(s.scalarEvalExpression, i[o])
        }
    }),
    define("math/reconstitute-node", ["require", "parsenodes", "math/types"], function (e) {
        function t(e, i) {
            if (r.isList(e)) {
                for (var o = [], s = 0; s < i.length; s++)
                    o.push(t(r.elementType(e), i[s]));
                var a = n.List(o);
                return a.valueType = e,
                    a
            }
            switch (e) {
                case r.Number:
                case r.Bool:
                    return n.Constant(i);
                case r.Point:
                    return n.OrderedPair([n.Constant(i[0]), n.Constant(i[1])]);
                default:
                    throw new Error("Cannot reconstitute value of a " + r.prettyPrint(e) + ".")
            }
        }
        var n = e("parsenodes")
            , r = e("math/types");
        return t
    }),
    define("math/features/constantcollapsedcopy", ["require", "parsenodes", "math/builtin", "math/distance", "math/reconstitute-node"], function (e) {
        var t = e("parsenodes")
            , n = t.Constant
            , r = t.Multiply
            , i = t.Subtract
            , o = t.RawExponent
            , s = t.BuiltInFunction
            , a = e("math/builtin")
            , c = e("math/distance")
            , l = e("math/reconstitute-node")
            , u = {
                Expression: function (e) {
                    return this.copyWithArgs(e)
                },
                FreeVariable: function (e) {
                    return this
                },
                ScalarExpression: function (e) {
                    for (var t = [], r = 0; r < e.length; r++) {
                        if (!e[r].isConstant)
                            return this.copyWithArgs(e);
                        t.push(e[r].constantValue)
                    }
                    return n(this.evaluate(t))
                },
                OrderedPair: function (e) {
                    return this.copyWithArgs(e)
                },
                Add: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(this.evaluate([e[0].constantValue, e[1].constantValue])) : 0 === e[0].constantValue ? e[1] : 0 === e[1].constantValue ? e[0] : this.copyWithArgs(e)
                },
                Multiply: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(this.evaluate([e[0].constantValue, e[1].constantValue])) : 1 === e[0].constantValue ? e[1] : 1 === e[1].constantValue ? e[0] : this.copyWithArgs(e)
                },
                Subtract: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(this.evaluate([e[0].constantValue, e[1].constantValue])) : 0 === e[0].constantValue ? t.Negative([e[1]]) : 0 === e[1].constantValue ? e[0] : this.copyWithArgs(e)
                },
                Divide: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(this.evaluate([e[0].constantValue, e[1].constantValue])) : 1 === e[1].constantValue ? e[0] : this.copyWithArgs(e)
                },
                Exponent: function (e) {
                    if (e[0].isConstant && e[1].isConstant)
                        return n(this.evaluate([e[0].constantValue, e[1].constantValue]));
                    if (e[0].isConstant) {
                        if (e[0].constantValue === Math.E)
                            return s.exp([e[1]]);
                        if (e[0].constantValue > 0)
                            return o(e)
                    }
                    if (e[1].isConstant) {
                        var t = e[1].constantValue;
                        if (1 === t)
                            return e[0];
                        if (t === Math.floor(t))
                            return o(e);
                        var i = a.toFraction(t, 100);
                        return c.approx(i.n / i.d, t, 2) && i.d % 2 === 1 ? r([i.n % 2 === 0 ? n(1) : s.sign([e[0]]), o([s.abs([e[0]]), e[1]])]) : o(e)
                    }
                    return this.copyWithArgs(e)
                },
                RawExponent: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(this.evaluate([e[0].constantValue, e[1].constantValue])) : this.copyWithArgs(e)
                },
                Negative: function (e) {
                    return e[0].isConstant ? n(-e[0].constantValue) : e[0] instanceof t.Negative ? e[0].args[0] : this.copyWithArgs(e)
                },
                And: function (e) {
                    return e[0].isConstant && e[1].isConstant ? n(e[0].constantValue && e[1].constantValue) : e[0].isConstant && e[0] === !0 ? e[1] : e[0].isConstant && e[0] === !1 ? n(!1) : e[1].isConstant && e[1] === !0 ? e[0] : e[1].isConstant && e[1] === !1 ? n(!1) : this.copyWithArgs(e)
                },
                Piecewise: function (e) {
                    return e[0].isConstant && e[0].constantValue === !0 ? e[1] : e[0].isConstant && e[0].constantValue === !1 ? e[2] : this.copyWithArgs(e)
                },
                Integral: function (e) {
                    var t = e[0]
                        , o = e[1]
                        , s = e[2]
                        , a = e[3]
                        , c = a.getDependencies();
                    if (o.isConstant && s.isConstant) {
                        var l = s.constantValue - o.constantValue;
                        if (a.isConstant)
                            return n(a.constantValue * l);
                        if (!a.dependsOn(t._symbol))
                            return r([a, n(l)]);
                        if (1 === c.length && c[0] === t._symbol)
                            return n(this.evaluate(o.constantValue, s.constantValue, a))
                    } else if (!a.dependsOn(t._symbol))
                        return r([a, i([s, o])]);
                    return this.copyWithArgs(e)
                },
                ListAccess: function (e) {
                    return e[1].isConstant ? e[0].elementAt(e[1].constantValue - 1) : this.copyWithArgs(e)
                },
                OrderedPairAccess: function (e) {
                    return e[1].isConstant && e[0] instanceof t.OrderedPair ? e[0].elementAt(e[1].constantValue - 1) : this.copyWithArgs(e)
                },
                Broadcast: function (e) {
                    var t = e[0].getDependencies();
                    for (n = 0; n < t.length; n++)
                        if (this._replacedSymbols.indexOf(t[n]) === -1)
                            return this.copyWithArgs(e);
                    for (var n = 1; n < e.length; n++)
                        if (0 !== e[n].getDependencies().length)
                            return this.copyWithArgs(e);
                    return l(this.valueType, this.evaluate(e.slice(1).map(function (e) {
                        return e.asValue()
                    })))
                },
                ReducerFunction: function (e) {
                    return 0 === e[0].getDependencies().length ? l(this.valueType, this.evaluate([e[0].asValue()])) : this.copyWithArgs(e)
                },
                DoubleReducerFunction: function (e) {
                    if (0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length) {
                        var t = Math.min(e[0].length, e[1].length);
                        return l(this.valueType, this.evaluate([e[0].asValue().slice(0, t), e[1].asValue().slice(0, t)]))
                    }
                    return this.copyWithArgs(e)
                },
                ParametrizedReducerFunction: function (e) {
                    var t = e[0]
                        , n = e[1];
                    return n.isConstant && 0 === t.getDependencies().length ? l(this.valueType, this.evaluate([t.asValue(), n.asValue()])) : this.copyWithArgs(e)
                },
                RepeatedOperator: function (e) {
                    if (e[1].isConstant && e[2].isConstant) {
                        var t = e[1].constantValue
                            , r = e[2].constantValue
                            , i = e[3];
                        if (i.isConstant)
                            return n(this.evaluateConstant([t, r, i.constantValue]));
                        var o = i.getDependencies();
                        if (0 === o.length || 1 === o.length && o[0] === e[0]._symbol)
                            return n(this.evaluate(t, r, i))
                    }
                    return this.copyWithArgs(e)
                }
            };
        for (var d in u)
            t[d].prototype._constantCollapsedCopy = u[d];
        s.distance.prototype._constantCollapsedCopy = function (e) {
            return 0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length ? n(this.evaluate([e[0].asArray(), e[1].asArray()])) : this.copyWithArgs(e)
        }
            ,
            s.midpoint.prototype._constantCollapsedCopy = function (e) {
                if (0 === e[0].getDependencies().length && 0 === e[1].getDependencies().length) {
                    var r = this.evaluate([e[0].asArray(), e[1].asArray()]);
                    return t.OrderedPair([n(r[0]), n(r[1])])
                }
                return this.copyWithArgs(e)
            }
    }),
    define("math/features/polynomialorder", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes")
            , n = {
                Expression: "this.dependsOn(symbol) ? Infinity : 0",
                FreeVariable: "(symbol === this._symbol ? 1 : 0)",
                Constant: "0",
                Add: "Math.max(order0, order1)",
                Subtract: "Math.max(order0, order1)",
                Multiply: "order0 + order1",
                Negative: "order0",
                Divide: "order1 > 0 ? Infinity : order0"
            }
            , r = function (e) {
                return e = e.replace("order0", "this.args[0].polynomialOrder(symbol)"),
                    e = e.replace("order1", "this.args[1].polynomialOrder(symbol)"),
                    new Function(["symbol"], "return " + e)
            };
        for (var i in n) {
            var o = n[i];
            t[i].prototype.polynomialOrder = r(o)
        }
        t.Exponent.prototype.polynomialOrder = function (e) {
            var t = this.args[0].polynomialOrder(e)
                , n = this.args[1].polynomialOrder(e);
            if (0 === t && 0 === n)
                return 0;
            var r = this.args[1];
            return r.isConstant && r.constantValue === Math.round(r.constantValue) && r.constantValue > 0 ? t * r.constantValue : 1 / 0
        }
            ,
            t.Piecewise.prototype.polynomialOrder = function (e) {
                return this.dependsOn(e) ? this.args[2].isConstant && this.args[2].isNaN() ? this.args[1].polynomialOrder(e) : 1 / 0 : 0
            }
            ,
            t.List.prototype.polynomialOrder = function (e) {
                return 1 / 0
            }
    }),
    define("math/features/polynomialcoefficients", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes")
            , n = t.Constant(0)
            , r = t.Constant(1);
        t.FreeVariable.prototype.getPolynomialCoefficients = function (e) {
            return e === this._symbol ? [n, r] : [this]
        }
            ,
            t.Constant.prototype.getPolynomialCoefficients = function (e) {
                return [this]
            }
            ,
            t.Add.prototype.getPolynomialCoefficients = function (e) {
                for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, s = [], a = 0; a <= Math.max(i, o); a++)
                    i >= a && o >= a ? s.push(t.Add([n[a], r[a]])) : s.push(i > o ? n[a] : r[a]);
                return s
            }
            ,
            t.Subtract.prototype.getPolynomialCoefficients = function (e) {
                for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, s = [], a = 0; a <= Math.max(i, o); a++)
                    i >= a && o >= a ? s.push(t.Subtract([n[a], r[a]])) : s.push(i > o ? n[a] : t.Negative([r[a]]));
                return s
            }
            ,
            t.Negative.prototype.getPolynomialCoefficients = function (e) {
                for (var n = this.args[0].getPolynomialCoefficients(e), r = [], i = 0; i < n.length; i++)
                    r.push(t.Negative([n[i]]));
                return r
            }
            ,
            t.Exponent.prototype.getPolynomialCoefficients = function (e) {
                var r = this.args[0].getPolynomialCoefficients(e)
                    , i = this.args[1].getPolynomialCoefficients(e)
                    , o = r.length - 1
                    , s = i.length - 1;
                if (s > 0)
                    throw "can't solve for variable in exponent";
                if (0 === o)
                    return [t.Exponent([r[0], i[0]])];
                if (this.args[1].isConstant) {
                    var a = this.args[1].constantValue;
                    switch (a) {
                        case 0:
                            return [n];
                        case 1:
                            return r;
                        case 2:
                            return t.Multiply([this.args[0], this.args[0]]).getPolynomialCoefficients(e)
                    }
                }
                throw "Unable to compile polynomial representation"
            }
            ,
            t.Multiply.prototype.getPolynomialCoefficients = function (e) {
                for (var n = this.args[0].getPolynomialCoefficients(e), r = this.args[1].getPolynomialCoefficients(e), i = n.length - 1, o = r.length - 1, s = [], a = 0; a <= i; a++)
                    for (var c = 0; c <= o; c++) {
                        var l = t.Multiply([n[a], r[c]])
                            , u = s[a + c];
                        void 0 === u ? s[a + c] = l : s[a + c] = t.Add([u, l])
                    }
                return s
            }
            ,
            t.Divide.prototype.getPolynomialCoefficients = function (e) {
                var n = this.args[0].getPolynomialCoefficients(e)
                    , r = this.args[1].getPolynomialCoefficients(e)
                    , i = r.length - 1
                    , o = [];
                if (i > 0)
                    throw "Can't solve for variable in denominator";
                for (var s = 0; s < n.length; s++)
                    o.push(t.Divide([n[s], r[0]]));
                return o
            }
            ,
            t.Expression.prototype.getPolynomialCoefficients = function (e) {
                if (this.dependsOn(e))
                    throw "Unimplemented polynomialCoefficient call";
                return [this]
            }
            ,
            t.Piecewise.prototype.getPolynomialCoefficients = function (e) {
                if (!this.dependsOn(e))
                    return [this];
                var t = this.args[1].getPolynomialCoefficients(e);
                return t
            }
    }),
    define("math/features/extractconditions", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes");
        t.Expression.prototype.extractConditions = function (e, t) {
            for (var n = 0; n < this.args.length; n++) {
                var r = this.args[n];
                t = r.extractConditions(e, t)
            }
            return t
        }
            ,
            t.Constant.prototype.extractConditions = function (e, t) {
                return t
            }
            ,
            t.Piecewise.prototype.extractConditions = function (e, n) {
                if (!this.dependsOn(e))
                    return n;
                if (!this.args[0].dependsOn(e))
                    return n = this.args[1].extractConditions(e, n),
                        n = this.args[2].extractConditions(e, n);
                var r = {};
                return r[e] = n,
                    t.Piecewise([this.args[0].substitute(r), n, t.Constant(NaN)])
            }
    }),
    define("math/builtinconstants", ["require", "math/parsenode/constant"], function (e) {
        var t = e("math/parsenode/constant");
        return {
            pi: t(Math.PI),
            tau: t(2 * Math.PI),
            e: t(Math.E),
            trigAngleMultiplier: t(1)
        }
    }),
    define("math/builtinframe", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function (e) {
        var t, n = e("math/builtinconstants"), r = e("math/parsenode/builtinfunction"), i = {};
        for (t in n)
            n.hasOwnProperty(t) && (i[t] = n[t]);
        for (t in r)
            r.hasOwnProperty(t) && (i[t] = r[t]);
        return i
    }),
    define("math/features/bounddomain", ["require", "parsenodes", "math/builtinframe", "math/domaintypes"], function (e) {
        var t = e("parsenodes")
            , n = e("math/builtinframe")
            , r = e("math/domaintypes")
            , i = t.Constant(0);
        t.Base.prototype.boundDomain = function (e) {
            return r.unknownDomain()
        }
            ,
            t.List.prototype.boundDomain = function (e) {
                return r.unknownDomain()
            }
            ,
            t.Expression.prototype.boundDomain = function (e) {
                for (var t = r.allReals(), n = 0; n < this.args.length; n++)
                    t = r.intersectDomains(t, this.args[n].boundDomain(e));
                return t
            }
            ,
            t.Constant.prototype.boundDomain = function (e) {
                return this.isNaN() ? r.emptyDomain() : r.allReals()
            }
            ,
            t.Piecewise.prototype.boundDomain = function (e) {
                return this.args[2].isConstant && isNaN(this.args[2].constantValue) ? r.intersectDomains(this.args[0].boundDomain(e), this.args[1].boundDomain(e)) : r.unknownDomain()
            }
            ,
            t.OrderedPair.prototype.boundDomain = function (e) {
                return r.intersectDomains(this.args[0].boundDomain(e), this.args[1].boundDomain(e))
            }
            ,
            t.BaseComparator.prototype.boundDomain = function (e) {
                if ("=" === this.operator)
                    return r.unknownDomain();
                var t = this._difference
                    , o = this._difference.boundDomain(e)
                    , s = t.polynomialOrder(e);
                if (s > 1)
                    return r.unknownDomain();
                var a = t.getPolynomialCoefficients(e)
                    , c = a[1] ? a[1].getConcreteTree(n) : i
                    , l = a[0] ? a[0].getConcreteTree(n) : i;
                if (!c.isConstant || !l.isConstant)
                    return r.unknownDomain();
                if (isNaN(c.constantValue) || isNaN(l.constantValue))
                    return r.emptyDomain();
                if (0 === c.constantValue)
                    return l.constantValue >= 0 ? o : r.emptyDomain();
                var u = -l.constantValue / c.constantValue
                    , d = c.constantValue < 0 ? [-(1 / 0), u] : [u, 1 / 0];
                return r.intersectDomains(o, r.knownDomain(d))
            }
    }),
    define("math/features/derivative", ["require", "parsenodes", "math/baseparser", "math/builtinframe", "math/parsenode/builtinfunction"], function (e) {
        var t = e("parsenodes")
            , n = e("math/baseparser")
            , r = e("math/builtinframe")
            , i = e("math/parsenode/builtinfunction")
            , o = t.Constant(0)
            , s = t.Constant(1)
            , a = t.Constant(2)
            , c = {
                FreeVariable: function (e) {
                    return e === this._symbol ? s : o
                },
                Constant: function (e) {
                    return isFinite(this.constantValue) ? o : t.Constant(this.constantValue)
                },
                Negative: function (e) {
                    return t.Negative([this.args[0].takeDerivative(e)])
                },
                Add: function (e) {
                    return t.Add([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                Subtract: function (e) {
                    return t.Subtract([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                Multiply: function (e) {
                    return t.Add([g(e, this.args[0], t.Multiply([this.args[0].takeDerivative(e), this.args[1]])), g(e, this.args[1], t.Multiply([this.args[0], this.args[1].takeDerivative(e)]))])
                },
                Divide: function (e) {
                    return t.Subtract([g(e, this.args[0], t.Divide([this.args[0].takeDerivative(e), this.args[1]])), g(e, this.args[1], t.Divide([t.Multiply([this.args[0], this.args[1].takeDerivative(e)]), t.Exponent([this.args[1], a])]))])
                },
                Exponent: function (e) {
                    return t.Add([g(e, this.args[0], t.Multiply([t.Multiply([this.args[1], t.Exponent([this.args[0], t.Subtract([this.args[1], s])])]), this.args[0].takeDerivative(e)])), g(e, this.args[1], t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0], o]), t.Piecewise([t.Comparator[">"]([this.args[1], o]), o, t.Constant(NaN)]), t.Multiply([t.FunctionCall("\\ln", [this.args[0]]), t.Exponent([this.args[0], this.args[1]])])]), this.args[1].takeDerivative(e)]))]).getConcreteTree(r)
                },
                Sum: function (e) {
                    return this.copyWithArgs([this.args[0], this.args[1], this.args[2], this.args[3].takeDerivative(e)])
                },
                Product: function (e) {
                    var n = t.Sum([this.args[0], this.args[1], this.args[2], t.Piecewise([t.Comparator["="]([o, this.args[3]]), s, o])])
                        , r = t.Multiply([t.Sum([this.args[0], this.args[1], this.args[2], t.Divide([this.args[3].takeDerivative(e), this.args[3]])]), t.Product(this.args)])
                        , i = t.Product([this.args[0], this.args[1], this.args[2], t.Piecewise([t.Comparator["="]([o, this.args[3]]), this.args[3].takeDerivative(e), this.args[3]])]);
                    return t.Piecewise([t.Comparator["="]([o, n]), r, t.Piecewise([t.Comparator["="]([s, n]), i, o])])
                },
                Piecewise: function (e) {
                    return 2 === this.args.length ? t.Piecewise([this.args[0], this.args[1].takeDerivative(e)]) : 3 === this.args.length ? t.Piecewise([this.args[0], this.args[1].takeDerivative(e), this.args[2].takeDerivative(e)]) : void 0
                },
                List: function (e) {
                    return t.List(this.args.map(function (t) {
                        return t.takeDerivative(e)
                    }))
                },
                ListAccess: function (e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1]])
                },
                OrderedPair: function (e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1].takeDerivative(e)])
                },
                OrderedPairAccess: function (e) {
                    return new this.constructor([this.args[0].takeDerivative(e), this.args[1]])
                },
                Integral: function (e) {
                    var n = this.args[0]
                        , r = this.args[1]
                        , i = this.args[2]
                        , o = this.args[3]
                        , s = {};
                    s[n._symbol] = i;
                    var a = {};
                    return a[n._symbol] = r,
                        t.Add([g(e, o, this.copyWithArgs([n, r, i, o.takeDerivative(e)])), t.Subtract([g(e, i, t.Multiply([o.substitute(s), i.takeDerivative(e)])), g(e, r, t.Multiply([o.substitute(a), r.takeDerivative(e)]))])])
                },
                SolvedEquation: function (e) {
                    return this._expression.takeDerivative(e)
                },
                OptimizedRegression: function (e) {
                    return this.model.takeDerivative(e)
                },
                Broadcast: function (e) {
                    for (var n = this._replacedSymbols.slice(), r = this.args.slice(1), i = this._expression.takeDerivative(e), o = 0; o < this._replacedSymbols.length; o++) {
                        var s = this._replacedSymbols[o]
                            , a = this.args[o + 1];
                        if (a.dependsOn(e)) {
                            var c = this.tmpVar()
                                , l = t.DummyIndex(c);
                            n.push(c),
                                r.push(a.takeDerivative(e)),
                                i = t.Add([i, t.Multiply([this._expression.takeDerivative(s), l])])
                        }
                    }
                    return t.Broadcast(n, [i].concat(r))
                }
            }
            , l = {
                exp: "\\exp(x)*x_1",
                ln: "\\{x >= 0: x_1/x \\}",
                log: "\\{ x >= 0: x_1/(x*\\ln(10)) \\}",
                sqrt: "x_1/(2*\\sqrt{x})",
                rtxsqpone: "x*x_1/\\rtxsqpone(x)",
                rtxsqmone: "x*x_1/\\rtxsqmone(x)",
                sin: "\\cos(x)*x_1",
                cos: "-\\sin(x)*x_1",
                tan: "\\sec(x)^2*x_1",
                arcsin: "x_1/\\sqrt{1 - x^2}",
                arccos: "-x_1/\\sqrt{1 - x^2}",
                sinh: "\\cosh(x)*x_1",
                cosh: "\\sinh(x)*x_1",
                tanh: "(\\sech(x))^2*x_1",
                arcsinh: "x_1/\\sqrt{x^2 + 1}",
                arccosh: "\\{ x > 0: x_1/\\rtxsqmone(x) \\}",
                arctanh: "\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",
                csc: "-\\cot(x)*\\csc(x)*x_1",
                sec: "\\tan(x)*\\sec(x)*x_1",
                cot: "-\\csc(x)^2*x_1",
                arccsc: "-x_1/(\\abs(x)*\\rtxsqmone(x))",
                arcsec: "x_1/(\\abs(x)*\\rtxsqmone(x))",
                arccot: "-x_1/(1+x^2)",
                csch: "-\\coth(x)*\\csch(x)*x_1",
                sech: "-\\tanh(x)*\\sech(x)*x_1",
                coth: "-(\\csch(x))^2*x_1",
                arccsch: "-x_1/(\\abs(x)*\\rtxsqpone(x))",
                arcsech: "\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",
                arccoth: "\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",
                factorial: "(x)!*\\polyGamma(0, x + 1)*x_1",
                floor: "\\{ \\mod(x, 1) > 0: 0*x_1 \\}",
                ceil: "\\{ \\mod(x, 1) > 0: 0*x_1 \\}",
                round: "\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}",
                abs: "\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",
                sign: "\\{ \\abs(x) > 0: 0*x_1 \\}",
                mean: "\\mean(x_1)",
                total: "\\total(x_1)",
                length: "0",
                var: "2*\\cov(x, x_1)",
                varp: "2*\\cov(x, x_1)*(\\length(x)-1)/\\length(x)",
                stdev: "\\cov(x, x_1)/\\stdev(x)",
                stdevp: "\\covp(x, x_1)/\\stdevp(x)",
                mad: "\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",
                min: "x_1[\\argmin(x)]",
                max: "x_1[\\argmax(x)]",
                median: "0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",
                argmin: "0/0",
                argmax: "0/0",
                gcd: "0/0",
                lcm: "0/0",
                erf: "\\frac{2}{\\sqrt{\\pi }}e^{-x^2}",
                invNorm: "\\frac{1}{\\normalpdf(\\invNorm(x))}"
            }
            , u = {
                logbase: ["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}", "\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],
                nthroot: ["x^{1/y - 1}/y*x_1", "-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],
                polyGamma: ["0/0", "\\polyGamma(1 + x, y)*y_1"],
                mod: ["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}", "\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],
                cov: ["\\cov(x_1, y)", "\\cov(x, y_1)"],
                covp: ["\\covp(x_1, y)", "\\covp(x, y_1)"],
                corr: ["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))", "(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],
                quantile: ["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}", "\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],
                quartile: ["0.5*(x_1[\\lowerQuartileIndex(x, y)] + x_1[\\upperQuartileIndex(x, y)])", "0/0"],
                TScore: ["\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}", "-y_1*\\sqrt{\\length(x)}/\\stdev(x)"],
                TTest: ["\\tpdf(\\TScore(x,y),\\length(x)-1)\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}", "-y_1*\\tpdf(\\TScore(x,y),\\length(x)-1)*\\sqrt{\\length(x)}/\\stdev(x)"],
                quartileIndex: ["0/0", "0/0"],
                upperQuartileIndex: ["0/0", "0/0"],
                lowerQuartileIndex: ["0/0", "0/0"],
                upperQuantileIndex: ["0/0", "0/0"],
                lowerQuantileIndex: ["0/0", "0/0"],
                nCr: ["0/0", "0/0"],
                nPr: ["0/0", "0/0"],
                arctan: ["x_1*y/(y^2+x^2)", "-y_1*x/(y^2+x^2)"],
                poissonpdf: ["0/0", "y_1\\frac{e^{-y}(\\floor(x)-y)y^{(\\floor(x)-1)}}{\\floor(x)!}"],
                poissoncdf: ["0/0", "y_1\\sum _{n=0}^{\\floor(x)}\\frac{e^{-y}(n-y)y^{(n-1)}}{n!}"],
                tcdf: ["x_1*\\tpdf(x,y)", "0/0"],
                tpdf: ["x_1*\\tpdf(x,y)*\\frac{-(y+1)*x}{y+x^2}", "0/0"]
            }
            , d = {
                normalcdf: ["x_1\\normalpdf(x,y,z)", "-y_1\\normalpdf(x,y,z)", "z_1*\\frac{y-x}{z}\\normalpdf(x,y,z)"],
                normalpdf: ["-x_1*\\frac{x-y}{z^2} \\normalpdf(x,y,z)", "y_1*\\frac{x-y}{z^2} \\normalpdf(x,y,z)", "z_1*(\\frac{(x-y-z)*(x-y+z)}{z^3}) \\normalpdf(x,y,z)"],
                binompdf: ["0/0", "0/0", "z_1*\\binompdf(x,y,z)*(\\frac{\\round(x)}{z}-\\frac{\\round(y)-\\round(x)}{1-z})"],
                binomcdf: ["0/0", "0/0", "z_1*\\sum _{n=0}^{\\round(x)}\\binompdf(n,y,z)*(\\frac{n}{z}-\\frac{\\round(y)-n}{1-z})"]
            }
            , p = function (e) {
                return function (t) {
                    var n = this.args
                        , i = {
                            x: n[0],
                            x_1: n[0].takeDerivative(t)
                        };
                    return g(t, n[0], e.substitute(i)).getConcreteTree(r)
                }
            }
            , h = function (e, n) {
                return function (i) {
                    var o = this.args
                        , s = {
                            x: o[0],
                            x_1: o[0].takeDerivative(i),
                            y: o[1],
                            y_1: o[1].takeDerivative(i)
                        };
                    return t.Add([g(i, o[0], e.substitute(s)), g(i, o[1], n.substitute(s))]).getConcreteTree(r)
                }
            }
            , f = function (e, n, i) {
                return function (o) {
                    var s = this.args
                        , a = {
                            x: s[0],
                            x_1: s[0].takeDerivative(o),
                            y: s[1],
                            y_1: s[1].takeDerivative(o),
                            z: s[2],
                            z_1: s[2].takeDerivative(o)
                        };
                    return t.Add([t.Add([g(o, s[0], e.substitute(a)), g(o, s[1], n.substitute(a))]), g(o, s[2], i.substitute(a))]).getConcreteTree(r)
                }
            };
        for (var m in l)
            i[m].prototype.takeDerivative = p(n.parse(l[m]));
        for (m in u)
            i[m].prototype.takeDerivative = h(n.parse(u[m][0]), n.parse(u[m][1]));
        for (m in d)
            i[m].prototype.takeDerivative = f(n.parse(d[m][0]), n.parse(d[m][1]), n.parse(d[m][2]));
        i.distance.prototype.takeDerivative = function (e) {
            var n = this.args[0]
                , o = this.args[1]
                , c = t.OrderedPairAccess([n, s])
                , l = t.OrderedPairAccess([n, a])
                , u = t.OrderedPairAccess([o, s])
                , d = t.OrderedPairAccess([o, a])
                , p = g(e, c, c.takeDerivative(e))
                , h = g(e, l, l.takeDerivative(e))
                , f = g(e, u, u.takeDerivative(e))
                , m = g(e, d, d.takeDerivative(e));
            return g(e, this, t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([p, c]), t.Multiply([p, u])]), t.Subtract([t.Multiply([f, u]), t.Multiply([f, c])])]), t.Add([t.Subtract([t.Multiply([h, l]), t.Multiply([h, d])]), t.Subtract([t.Multiply([m, d]), t.Multiply([m, l])])])]), i.distance([this.args[0], this.args[1]])])).getConcreteTree(r)
        }
            ,
            i.midpoint.prototype.takeDerivative = function (e) {
                var n = this.args[0]
                    , o = this.args[1]
                    , c = t.OrderedPairAccess([n, s])
                    , l = t.OrderedPairAccess([n, a])
                    , u = t.OrderedPairAccess([o, s])
                    , d = t.OrderedPairAccess([o, a])
                    , p = g(e, c, c.takeDerivative(e))
                    , h = g(e, l, l.takeDerivative(e))
                    , f = g(e, u, u.takeDerivative(e))
                    , m = g(e, d, d.takeDerivative(e));
                return t.OrderedPair([i.mean([p, f]), i.mean([h, m])]).getConcreteTree(r)
            }
            ;
        var g = function (e, t, n) {
            return t.dependsOn(e) ? n : o
        };
        for (var y in c) {
            var v = c[y];
            t[y].prototype.takeDerivative = v
        }
    }),
    define("math/features/substitute", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes")
            , n = {
                Identifier: function (e) {
                    return e[this._symbol] ? e[this._symbol] : this
                },
                FreeVariable: function (e) {
                    return e[this._symbol] ? e[this._symbol] : this
                },
                Constant: function (e) {
                    return this
                },
                Expression: function (e) {
                    return this.copyWithArgs(this.args.map(function (t) {
                        return t.substitute(e)
                    }))
                },
                List: function (e) {
                    return t.List(this.args.map(function (t) {
                        return t.substitute(e)
                    }))
                },
                SolvedEquation: function (e) {
                    return new this.constructor(this._symbol, this._expression.substitute(e))
                },
                OptimizedRegression: function (e) {
                    return new this.constructor(this.model.substitute(e), this.parameters, this.residualVariables, this.residuals, this.statistics)
                }
            };
        for (var r in n)
            t[r].prototype.substitute = n[r]
    }),
    define("math/features/solve", ["require", "math/baseparser", "parsenodes", "math/errormsg", "math/builtinframe", "worker/workerconfig"], function (e) {
        function t(e) {
            var t = Object.create(m);
            return t.a = e[2] ? e[2].tryGetConcreteTree(m) : y,
                t.b = e[1] ? e[1].tryGetConcreteTree(m) : y,
                t.c = e[0] ? e[0].tryGetConcreteTree(m) : y,
                t
        }
        function n(e) {
            return 0 === e.a.constantValue ? 0 === e.b.constantValue ? 0 : 1 : 2
        }
        function r(e, r, i, o) {
            for (var s, a, c = [], l = [], u = 0; u < i.length; u++) {
                var d = i[u]
                    , p = 0;
                h.eachArgs([r], function (e) {
                    var t = e[0];
                    p = Math.max(p, t.polynomialOrder(d))
                });
                var f = p > 2
                    , m = i.length > 1 && !e.validSolvedVariable(d)
                    , g = o && r.extractConditions(d, y) !== y;
                f || m || g ? (l[u] = {},
                    c[u] = 1 / 0) : (l[u] = [],
                        c[u] = 0,
                        h.eachArgs([r], function (e) {
                            var r = e[0];
                            a = t(r.getPolynomialCoefficients(d)),
                                l[u].push(a),
                                c[u] = Math.max(c[u], n(a))
                        }))
            }
            var v;
            if (1 === i.length)
                a = l[0],
                    s = i[0],
                    v = c[0];
            else {
                var b;
                b = 0 === c[0] ? 1 : 0 === c[1] ? 0 : c[0] < c[1] ? 0 : 1,
                    a = l[b],
                    s = i[b],
                    v = c[b]
            }
            return {
                localFrame: a,
                variableOfInterest: s,
                effectiveOrder: v
            }
        }
        function i(e, t) {
            return t ? M.inequality : M.generalEquation
        }
        function o(e) {
            e.f = v.getConcreteTree(e),
                e.g = b.getConcreteTree(e),
                e.p = x.getConcreteTree(e),
                e.q = w.getConcreteTree(e),
                e.m = l(1e305)
        }
        var s = e("math/baseparser")
            , a = e("parsenodes")
            , c = a.Base
            , l = a.Constant
            , u = a.Equation
            , d = a.SolvedEquation
            , p = a.BaseComparator
            , h = a.List
            , f = e("math/errormsg")
            , m = e("math/builtinframe")
            , g = e("worker/workerconfig")
            , y = l(0)
            , v = s.parse("b*b")
            , b = s.parse("4*a*c")
            , x = s.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)")
            , w = s.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)")
            , E = s.parse("[\\{\\abs(b)>0:-c/b\\}]")
            , _ = s.parse("[\\{\\abs(a)>0:-b/(2*a)\\}]")
            , S = s.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>0:-c/b\\},p\\}]")
            , k = s.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]")
            , M = {
                inequality: function (e) {
                    return o(e),
                        k.getConcreteTree(e)
                },
                generalEquation: function (e) {
                    return o(e),
                        e.a.isConstant && 0 === e.a.constantValue ? E.getConcreteTree(e) : e.f.isConstant && e.g.isConstant && e.f.constantValue - e.g.constantValue === 0 ? _.getConcreteTree(e) : S.getConcreteTree(e)
                }
            };
        c.prototype.trySolve = function (e, t) {
            try {
                return this.solve(e, t)
            } catch (e) {
                if (e instanceof a.Error)
                    return e;
                throw e
            }
        }
            ,
            u.prototype.solve = function (e, t) {
                return this.asComparator().solve(e, t)
            }
            ,
            p.prototype.solve = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return n;
                if (n.isConstant)
                    return n;
                var o = "=" !== this.getOperator()
                    , s = this._difference.tryGetConcreteTree(t);
                s.isBroadcast && (s = h(s.mapElements(function (e) {
                    return e
                })));
                var a = s.getDependencies();
                if (0 === a.length)
                    return s.isList ? h(s.args.map(function (e) {
                        return l(0 === e.constantValue)
                    })) : l(0 === s.constantValue);
                if (1 === a.length && s.isList && !o)
                    return s;
                if (1 === a.length && !o && !g.plotSingleVariableImplicitEquations)
                    return f.singleVariableImplicitEquationsDisabled();
                var c = h.wrap(s);
                if (a.length > 2)
                    return f.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(a);
                if (o && !e.validInequalityVariables(a))
                    return f.invalidInequalityVariables().setDependencies(a);
                var u = r(e, c, a, o)
                    , p = u.localFrame
                    , m = u.effectiveOrder
                    , y = u.variableOfInterest;
                if (e.complicatedPolarImplicit(y, m))
                    return f.complicatedPolarImplicit().setDependencies(a);
                if (!e.validImplicitVariables(a))
                    return f.invalidImplicitVariables();
                if (m > 2)
                    return s;
                for (var v = i(a, o), b = [], x = 0; x < p.length; x++) {
                    var w = v(p[x]);
                    if (w.isError)
                        return w;
                    if (w.isConstant)
                        b.push(w);
                    else
                        for (var E = 0; E < w.args.length; E++) {
                            var _ = w.args[E]
                                , S = c.args[x].extractConditions(y, _).getConcreteTree(t);
                            b.push(S)
                        }
                }
                return d(y, h(b))
            }
    }),
    define("math/evaluationstate", ["require", "graphing/graphmode", "parsenodes", "graphing/label"], function (e) {
        function t(e) {
            return e.isError ? e.getError() : void 0 === e.constantValue ? "" : +e.constantValue
        }
        function n(e, n, r) {
            for (var i = [], o = 0; o < n.columns.length; o++) {
                var s = r.columns[o]
                    , a = {
                        dependent: !s.isIndependent,
                        discrete: s.isIndependent
                    };
                s.isError ? (a.error = s.getError(),
                    a.values = []) : a.values = s.values.map(t),
                    i.push(a)
            }
            return {
                column_data: i
            }
        }
        function r(e, t, n) {
            var r = {
                variables: [],
                errorMap: {},
                dimensions: {}
            };
            if (n.center.isError && (r.errorMap.center = !0),
                n.radianAngle.isError && (r.errorMap.angle = !0),
                n.width.isError && (r.errorMap.width = !0),
                n.height.isError && (r.errorMap.height = !0),
                n.center.isError || n.radianAngle.isError || n.width.isError || n.height.isError)
                return r.variables = t.getSliderVariables(e, n),
                    r;
            r.dimensions.x = [],
                r.dimensions.y = [],
                r.dimensions.radianAngle = [],
                r.dimensions.width = [],
                r.dimensions.height = [],
                o.List.eachArgs([n.center, n.radianAngle, n.width, n.height], function (e) {
                    r.dimensions.x.push(+e[0].args[0].constantValue),
                        r.dimensions.y.push(+e[0].args[1].constantValue),
                        r.dimensions.radianAngle.push(+e[1].constantValue),
                        r.dimensions.width.push(+e[2].constantValue),
                        r.dimensions.height.push(+e[3].constantValue)
                });
            var s = e.graphingEnabled() ? t.getGraphMode(e, n) : i.NONE;
            return s !== i.NONE && (r.is_graphable = !0),
                n.moveStrategy && (r.move_strategy = n.moveStrategy),
                r
        }
        var i = e("graphing/graphmode")
            , o = e("parsenodes")
            , s = e("graphing/label")
            , a = function () {
                return {
                    operator: "=",
                    variables: []
                }
            }
            , c = function (e, t, c) {
                if (t.isTable)
                    return n(e, t, c);
                if (t.isImage)
                    return r(e, t, c);
                var l = a();
                if (c.isError && (!(t instanceof o.FunctionDefinition) || c.blocksExport))
                    return l.error = c.getError(),
                        l.variables = t.getSliderVariables(e, c),
                        l.is_single_identifier = t instanceof o.Identifier,
                        l;
                c.moveStrategy && (l.move_strategy = c.moveStrategy,
                    l.default_drag_mode = c.defaultDragMode),
                    t.isInequality() && (l.is_inequality = !0),
                    l.operator = t.getOperator(),
                    c instanceof o.SolvedEquation ? c._expression.constantValue !== !0 && c._expression.constantValue !== !1 && (l.assignment = c._symbol) : t instanceof o.Assignment && (l.assignment = t._symbol);
                var u = e.graphingEnabled() ? t.getGraphMode(e, c) : i.NONE;
                if (u !== i.NONE) {
                    l.is_graphable = !0,
                        l.expression_type = t.getExpressionType(u, c.valueType),
                        c.isShadeBetween() && (l.is_shade_between = !0);
                    var d = t.tableInfo(e, c);
                    d && (l.is_tableable = !0,
                        l.table_info = d)
                }
                l.variables = l.is_graphable ? [] : t.getSliderVariables(e, c),
                    l.is_single_identifier = t instanceof o.Identifier;
                var p = t.getSliderInfo();
                p ? (l.is_slidable = !0,
                    l.is_animatable = !l.is_graphable,
                    l.constant_value = p.value) : c.isConstant && (l.constant_value = c.constantValue);
                var h = c.getEvaluationInfo();
                if (!h || "=" !== l.operator || t.isConstant || t.isFunction || l.is_slidable || (l.is_evaluable = !0,
                    l.zero_values = h),
                    c instanceof o.OptimizedRegression) {
                    var f = {};
                    for (var m in c.parameters)
                        c.parameters.hasOwnProperty(m) && (f[s.identifierToLatex(m)] = +c.parameters[m].constantValue);
                    l.is_regression = !0,
                        l.regression = {
                            parameters: f,
                            residualVariable: s.identifierToLatex(c.residualVariable),
                            residualSuggestionId: c.residualSuggestionId,
                            shouldSuggestLogMode: c.shouldSuggestLogMode,
                            statistics: c.statistics
                        }
                }
                return l
            };
        return c.default = a,
            c
    }),
    define("math/statementanalysis", ["require", "math/evaluationstate", "pjs", "graphing/graphmode", "worker/workerconfig"], function (e) {
        var t = e("math/evaluationstate")
            , n = e("pjs")
            , r = e("graphing/graphmode")
            , i = e("worker/workerconfig");
        return n(function (e) {
            e.init = function (e, n, r) {
                this.policy = e,
                    this.rawTree = n,
                    this.concreteTree = r,
                    this.evaluationState = t(e, n, r)
            }
                ,
                e.exportTo = function (e, t) {
                    this.rawTree.exportTo(e, this.concreteTree, t)
                }
                ,
                e.graph = function (e) {
                    return this.rawTree.graph(this.policy, this.concreteTree, e)
                }
                ,
                e.getGraphMode = function () {
                    return this.rawTree.getGraphMode(this.policy, this.concreteTree)
                }
                ,
                e.getGraphInfo = function () {
                    return this.rawTree.getGraphInfo(this.policy, this.concreteTree)
                }
                ,
                e.shouldIntersect = function () {
                    if (!this.evaluationState.is_graphable)
                        return !1;
                    if (!this.rawTree.userData.shouldGraph)
                        return !1;
                    if (!i.pointsOfInterest)
                        return !1;
                    var e = this.getGraphMode();
                    return e === r.X || e === r.Y
                }
        })
    }),
    define("math/features/analyze", ["require", "parsenodes", "math/statementanalysis", "math/builtinframe", "math/parsenode/builtinfunction", "math/errormsg", "math/comparators", "math/types", "graphing/graphmode"], function (e) {
        function t(e, t, n, r) {
            var o = r.getDependencies();
            switch (r.valueType) {
                case l.Point:
                case l.ListOfPoint:
                    return o.length ? e.validParametricVariables(o) ? i(e, n, r) : i(e, n, a.tooManyVariables(n.getSliderVariables(e, r)).setDependencies(o)) : i(e, n, r);
                case l.Number:
                case l.ListOfNumber:
                    switch (o.length) {
                        case 0:
                            return i(e, n, r);
                        case 1:
                            return e.validExpressionVariable(o[0]) ? i(e, n, r) : i(e, n, a.equationRequired(e.implicitDependency(o[0])).setDependencies(o));
                        default:
                            return e.validImplicitVariables(o) ? i(e, n, a.equationRequired().setDependencies(o)) : i(e, n, a.tooManyVariables(n.getSliderVariables(e, r)).setDependencies(o))
                    }
            }
        }
        function n(e, t) {
            return e.filter(function (e) {
                return !t[e]
            })
        }
        var r = e("parsenodes")
            , i = e("math/statementanalysis")
            , o = e("math/builtinframe")
            , s = e("math/parsenode/builtinfunction")
            , a = e("math/errormsg")
            , c = e("math/comparators")
            , l = e("math/types")
            , u = e("graphing/graphmode");
        r.Base.prototype.analyze = function (e, t) {
            return i(e, this, this.tryGetConcreteTree(t))
        }
            ,
            r.Expression.prototype.analyze = function (e, n) {
                var r = this.tryGetConcreteTree(n);
                return r.isError ? i(e, this, r) : t(e, n, this, r)
            }
            ,
            r.Identifier.prototype.analyze = function (e, t) {
                return i(e, this, this.tryGetConcreteTree(t))
            }
            ,
            r.FunctionDefinition.prototype.analyze = function (e, t) {
                var n = /^log_[\d|e]/;
                if (o[this._symbol] || n.test(this._symbol))
                    return i(e, this, a.cannotRedefine(this._symbol));
                var r = this._symbol.split("_")[0];
                if (s[r])
                    return i(e, this, a.cannotRedefine(this._symbol, r));
                var c = this.tryGetConcreteTree(t);
                if (c.isError)
                    return i(e, this, c);
                var l = this._argSymbols
                    , u = c.getDependencies();
                if (u.indexOf(this._symbol) !== -1)
                    return i(e, this, a.selfReferentialFunction(this._symbol));
                var d = u.filter(function (e) {
                    return l.indexOf(e) === -1
                });
                return e.unplottablePolarFunction(this._symbol, u) ? i(e, this, a.unplottablePolarFunction()) : d.some(e.assignmentForbidden) ? i(e, this, a.addArgumentsToDefinition(d, this._symbol, l).setDependencies(u)) : d.length ? i(e, this, a.tooManyVariables(this.getSliderVariables(e, c)).setDependencies(u)) : i(e, this, c)
            }
            ,
            r.Assignment.prototype.analyze = function (e, t, n) {
                var s = this._symbol;
                if (!e.validLHS(s))
                    return i(e, this, a.invalidLHS(s));
                if (o[s])
                    return i(e, this, a.cannotRedefine(s));
                var c = this.tryGetConcreteTree(t);
                if (c.isError)
                    return i(e, this, c);
                var l = c.getDependencies();
                if (this.isEquation(c)) {
                    var u = this.asEquation().analyze(e, t);
                    return i(e, this, u.concreteTree)
                }
                if (l.length > 1) {
                    var d = this.getSliderVariables(e, c);
                    return d.length ? i(e, this, a.tooManyVariables(d).allowExport().setDependencies(l)) : i(e, this, c)
                }
                var p = this.getMoveStrategy(t, c, n);
                if (p) {
                    var h = this.getDefaultDragMode(p);
                    return i(e, this, r.MovablePoint(c.args, p, h))
                }
                return i(e, this, c)
            }
            ,
            r.Regression.prototype.analyze = function (e, t, n, r, o) {
                return i(e, this, this.tryOptimize(e, t, n, r, o))
            }
            ,
            r.Polygon.prototype.analyze = function (e, t) {
                var n = this.tryGetConcreteTree(t)
                    , r = n.getDependencies();
                return r.length ? i(e, this, a.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : i(e, this, this.tryGetConcreteTree(t))
            }
            ,
            r.Equation.prototype.analyze = r.BaseComparator.prototype.analyze = function (e, t) {
                var n = this.trySolve(e, t);
                if (n.isError)
                    return i(e, this, n);
                if (n instanceof r.SolvedEquation && n.getDependencies().length) {
                    var o = n.getDependencies().concat(n._symbol);
                    if (!e.validImplicitVariables(o))
                        return i(e, this, a.invalidImplicitVariables().setDependencies(o))
                }
                return this.getGraphMode(e, n) !== u.IMPLICIT || e.validImplicitVariables(n.getDependencies()) ? i(e, this, n) : i(e, this, a.invalidImplicitVariables().setDependencies(n.getDependencies()))
            }
            ,
            r.DoubleInequality.prototype.analyze = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return i(e, this, n);
                var r = n.getDependencies();
                return c.table[this._operators[0]].direction !== c.table[this._operators[1]].direction ? i(e, this, a.mismatchedDoubleInequality()) : e.validDoubleInequalitySymbol(n._symbol) && e.validDoubleInequalityVariables(r) ? r.length > 2 ? i(e, this, a.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : n._expressions[0].getDependencies().indexOf(n._symbol) !== -1 || n._expressions[1].getDependencies().indexOf(n._symbol) !== -1 ? i(e, this, a.complicatedDoubleInequality().setDependencies(r)) : i(e, this, n) : i(e, this, a.invalidDoubleInequalityVariables().setDependencies(r))
            }
            ,
            r.And.prototype.analyze = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return i(e, this, n);
                var r = n.getDependencies();
                return r.length ? e.validDoubleInequalityVariables(r) ? i(e, this, a.complicatedDoubleInequality().setDependencies(r)) : i(e, this, a.tooManyVariables(this.getSliderVariables(e, n)).setDependencies(r)) : i(e, this, n)
            }
            ,
            r.OrderedPair.prototype.analyze = function (e, n, o) {
                var s = this.tryGetConcreteTree(n);
                if (s.isError)
                    return i(e, this, s);
                var a = this.getMoveStrategy(n, s, o);
                if (a) {
                    var c = this.getDefaultDragMode(a);
                    return i(e, this, r.MovablePoint(s.args, a, c))
                }
                return t(e, n, this, s)
            }
            ,
            r.Table.prototype.analyze = function (e, t) {
                for (var o, s = Object.create(t), c = [], l = 0; l < this.columns.length; l++) {
                    var u = this.columns[l].analyze(e, s, t);
                    if (0 === l && (u.concreteTree.isIndependent ? e.validFirstColumnVariable(u.concreteTree.header._symbol) ? o = u.concreteTree.header._symbol : u = i(e, this.columns[l], a.invalidFirstTableColumn()) : u = i(e, this.columns[l], a.invalidDependentFirstTableColumn())),
                        u.concreteTree.isIndependent)
                        u.rawTree.exportToLocal(u.concreteTree, s);
                    else if (!u.concreteTree.isError) {
                        var d = u.concreteTree.header.getDependencies()
                            , p = n(d, s);
                        p.length && (u = i(e, this.columns[l], a.tooManyVariables(p).setDependencies(p)))
                    }
                    c.push(u.concreteTree)
                }
                var h = r.Table(c)
                    , f = i(e, this, h);
                return f.evaluationState.is_graphable = !0,
                    f
            }
            ,
            r.TableColumn.prototype.analyze = function (e, t, n) {
                var r = this.header.tableError();
                if (r)
                    return i(e, this, a.invalidTableHeader(r));
                var o = this.tryGetConcreteTree(t, n);
                if (o.isError)
                    return i(e, this, o);
                if (o.header.isError)
                    return i(e, this, o.header);
                if (o.values.isError)
                    return i(e, this, o.values);
                for (var s = 0; s < o.values.length; s++)
                    if (!o.values[s].isError) {
                        var c = this.values[s] && this.values[s].tableError();
                        if (c)
                            o.values[s] = a.invalidTableEntry(c);
                        else {
                            var l = o.values[s].getDependencies();
                            l.length && (o.values[s] = a.tooManyVariables(l).setDependencies(l))
                        }
                    }
                return i(e, this, o)
            }
            ,
            r.Image.prototype.analyze = function (e, t, n) {
                var o = this.tryGetConcreteTree(t);
                if (o.radianAngle.isError || o.center.isError || o.width.isError || o.height.isError)
                    return i(e, this, o);
                var s = o.center.getDependencies()
                    , c = o.radianAngle.getDependencies()
                    , l = o.width.getDependencies()
                    , u = o.height.getDependencies();
                return "OrderedPair" !== this.center.type ? i(e, this, r.Image({
                    center: a.parseError(),
                    radianAngle: o.radianAngle,
                    width: o.width,
                    height: o.height
                })) : s.length || c.length || l.length || u.length ? i(e, this, r.Image({
                    center: s.length ? a.tooManyVariables(c).setDependencies(s) : o.center,
                    radianAngle: c.length ? a.tooManyVariables(c).setDependencies(c) : o.radianAngle,
                    width: l.length ? a.tooManyVariables(l).setDependencies(l) : o.width,
                    height: u.length ? a.tooManyVariables(u).setDependencies(u) : o.height
                })) : (o.moveStrategy = this.getMoveStrategy(t, o, n),
                    i(e, this, o))
            }
    }),
    define("math/features/analyzeFourFunction", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/parsenode/builtinfunction", "math/builtinconstants"], function (e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes")
            , r = e("math/statementanalysis")
            , i = e("math/errormsg")
            , o = e("math/parsenode/builtinfunction")
            , s = e("math/builtinconstants");
        n.Base.prototype.analyzeFourFunction = function (e, t) {
            var n = this.tryGetConcreteTree(t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }
            ,
            n.Expression.prototype.analyzeFourFunction = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return r(e, this, n);
                var a = n.getDependencies();
                if (a.length > 0) {
                    var c, l = a[0];
                    return c = o.hasOwnProperty(l) ? i.functionUnsupported(l) : s.hasOwnProperty(l) ? i.constantUnsupported(l) : i.variablesUnsupported(l),
                        r(e, this, c)
                }
                return r(e, this, n)
            }
            ,
            n.Assignment.prototype.analyzeFourFunction = function (e, t) {
                return r(e, this, i.assignmentsUnsupported())
            }
            ,
            n.FunctionDefinition.prototype.analyzeFourFunction = function (e, t) {
                return r(e, this, i.functionDefinitionsUnsupported())
            }
            ,
            n.Equation.prototype.analyzeFourFunction = function (e, t) {
                return r(e, this, i.equationsUnsupported())
            }
            ,
            n.And.prototype.analyzeFourFunction = t,
            n.DoubleInequality.prototype.analyzeFourFunction = t,
            n.BaseComparator.prototype.analyzeFourFunction = t,
            n.Regression.prototype.analyzeFourFunction = function (e, t) {
                return r(e, this, i.regressionsUnsupported())
            }
            ,
            n.OrderedPair.prototype.analyzeFourFunction = function (e, t) {
                return r(e, this, i.pointsUnsupported())
            }
    }),
    define("math/features/analyzeScientific", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/builtinframe"], function (e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes")
            , r = e("math/statementanalysis")
            , i = e("math/errormsg")
            , o = e("math/builtinframe");
        n.Base.prototype.analyzeScientific = function (e, t) {
            var n = this.tryGetConcreteTree(t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }
            ,
            n.Expression.prototype.analyzeScientific = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return r(e, this, n);
                var o = n.getDependencies();
                return o.length > 0 ? r(e, this, i.tooManyVariables(o)) : r(e, this, n)
            }
            ,
            n.Assignment.prototype.analyzeScientific = function (e, t) {
                var n = this._symbol;
                if (o[n])
                    return r(e, this, i.cannotRedefine(n));
                var s = this.tryGetConcreteTree(t);
                if (s.isError)
                    return r(e, this, s);
                var a = s.getDependencies();
                return this.isEquation(s) ? r(e, this, i.equationsUnsupported()) : a.length > 0 ? r(e, this, i.tooManyVariables(a)) : r(e, this, s)
            }
            ,
            n.FunctionDefinition.prototype.analyzeScientific = function (e, t) {
                if (o[this._symbol])
                    return r(e, this, i.cannotRedefine(this._symbol));
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return r(e, this, n);
                var s = this._argSymbols
                    , a = n.getDependencies();
                if (a.indexOf(this._symbol) !== -1)
                    return r(e, this, i.selfReferentialFunction(this._symbol));
                var c = a.filter(function (e) {
                    return s.indexOf(e) === -1
                });
                return c.length ? r(e, this, i.addArgumentsToDefinition(c, this._symbol, s)) : r(e, this, n)
            }
            ,
            n.Equation.prototype.analyzeScientific = function (e, t) {
                return r(e, this, i.equationsUnsupported())
            }
            ,
            n.And.prototype.analyzeScientific = t,
            n.DoubleInequality.prototype.analyzeScientific = t,
            n.BaseComparator.prototype.analyzeScientific = t,
            n.Regression.prototype.analyzeScientific = function (e, t) {
                return r(e, this, i.regressionsUnsupported())
            }
            ,
            n.OrderedPair.prototype.analyzeScientific = function (e, t) {
                return r(e, this, i.pointsUnsupported())
            }
    }),
    define("math/features/analyzeSingleExpressionScientific", ["require", "parsenodes", "math/statementanalysis", "math/errormsg", "math/parsenode/builtinfunction", "math/builtinconstants"], function (e) {
        function t(e, t) {
            return r(e, this, i.inequalitiesUnsupported())
        }
        var n = e("parsenodes")
            , r = e("math/statementanalysis")
            , i = e("math/errormsg")
            , o = e("math/parsenode/builtinfunction")
            , s = e("math/builtinconstants");
        n.Base.prototype.analyzeSingleExpressionScientific = function (e, t) {
            var n = this.tryGetConcreteTree(t);
            return n.isError ? r(e, this, n) : r(e, this, i.parseError())
        }
            ,
            n.Expression.prototype.analyzeSingleExpressionScientific = function (e, t) {
                var n = this.tryGetConcreteTree(t);
                if (n.isError)
                    return r(e, this, n);
                var a = n.getDependencies();
                if (a.length > 0) {
                    var c, l = a[0];
                    return c = o.hasOwnProperty(l) ? i.functionUnsupported(l) : s.hasOwnProperty(l) ? i.constantUnsupported(l) : i.variablesUnsupported(l),
                        r(e, this, c)
                }
                return r(e, this, n)
            }
            ,
            n.Assignment.prototype.analyzeSingleExpressionScientific = function (e, t) {
                return r(e, this, i.assignmentsUnsupported())
            }
            ,
            n.FunctionDefinition.prototype.analyzeSingleExpressionScientific = function (e, t) {
                return r(e, this, i.functionDefinitionsUnsupported())
            }
            ,
            n.Equation.prototype.analyzeSingleExpressionScientific = function (e, t) {
                return r(e, this, i.equationsUnsupported())
            }
            ,
            n.And.prototype.analyzeSingleExpressionScientific = t,
            n.DoubleInequality.prototype.analyzeSingleExpressionScientific = t,
            n.BaseComparator.prototype.analyzeSingleExpressionScientific = t,
            n.Regression.prototype.analyzeSingleExpressionScientific = function (e, t) {
                return r(e, this, i.regressionsUnsupported())
            }
            ,
            n.OrderedPair.prototype.analyzeSingleExpressionScientific = function (e, t) {
                return r(e, this, i.pointsUnsupported())
            }
    }),
    define("graphing/dragmode", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.NONE = "NONE",
            t.X = "X",
            t.Y = "Y",
            t.XY = "XY",
            t.AUTO = "AUTO"
    }),
    define("graphing/reconcileDragMode", ["require", "exports", "graphing/dragmode"], function (e, t, n) {
        "use strict";
        function r(e) {
            return e ? "none" === e[0].type && "none" === e[1].type ? n.NONE : "none" === e[1].type ? n.X : "none" === e[0].type ? n.Y : n.XY : n.NONE
        }
        function i(e, t) {
            var i = r(t);
            switch (e) {
                case n.NONE:
                    return n.NONE;
                case n.AUTO:
                    return i;
                case n.XY:
                    return i;
                case n.X:
                    return i === n.X || i === n.XY ? n.X : n.NONE;
                case n.Y:
                    return i === n.Y || i === n.XY ? n.Y : n.NONE;
                default:
                    return n.NONE
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = i
    }),
    define("math/features/getgraphmode", ["require", "parsenodes", "graphing/graphmode", "graphing/reconcileDragMode", "graphing/dragmode", "math/types"], function (e) {
        function t(e, t) {
            var n;
            return n = e && e.hasOwnProperty("dragMode") ? e.dragMode === a.AUTO ? t.defaultDragMode : e.dragMode : t.defaultDragMode,
                s(n, t.moveStrategy)
        }
        function n(e, n) {
            var r = n.getDependencies();
            switch (n.valueType) {
                case c.Point:
                case c.ListOfPoint:
                    return n.isMovablePoint && t(this.userData, n) !== a.NONE ? o.XYPOINT_MOVABLE : 0 === r.length ? o.XYPOINT : e.validParametricVariables(r) ? o.PARAMETRIC : o.NONE;
                case c.Number:
                case c.ListOfNumber:
                    return 1 === r.length ? o.Y : o.NONE;
                default:
                    return o.NONE
            }
        }
        function r(e, t) {
            var n = t._expression.getDependencies();
            if (n.length > 1)
                return o.NONE;
            if (t._expression.valueType !== c.Number && t._expression.valueType !== c.ListOfNumber)
                return o.NONE;
            var r = t._symbol
                , i = n[0];
            return e.graphMode(r, i)
        }
        var i = e("parsenodes")
            , o = e("graphing/graphmode")
            , s = e("graphing/reconcileDragMode").default
            , a = e("graphing/dragmode")
            , c = e("math/types");
        i.Base.prototype.getGraphMode = function (e, t) {
            return o.NONE
        }
            ,
            i.Identifier.prototype.getGraphMode = function (e, t) {
                return e.graphableAsBareIdentifier(this._symbol) ? o.Y : o.NONE
            }
            ,
            i.Expression.prototype.getGraphMode = n,
            i.Equation.prototype.getGraphMode = i.BaseComparator.prototype.getGraphMode = function (e, t) {
                var n = t.getDependencies();
                return t.isConstant ? o.NONE : t instanceof i.SolvedEquation ? 0 === n.length ? e.graphableAsConstant(t._symbol) ? e.constantGraphMode(t._symbol) : o.NONE : r(e, t) : n.length <= 2 ? o.IMPLICIT : o.NONE
            }
            ,
            i.DoubleInequality.prototype.getGraphMode = function (e, t) {
                return e.constantGraphMode(t._symbol)
            }
            ,
            i.Assignment.prototype.getGraphMode = function (e, t) {
                if (t instanceof i.SolvedEquation)
                    return r(e, t);
                if (this.isEquation(t))
                    return this.asEquation().getGraphMode(e, t);
                var s = t.getDependencies();
                switch (t.valueType) {
                    case c.Number:
                    case c.ListOfNumber:
                        switch (s.length) {
                            case 0:
                                return e.graphableAsConstant(this._symbol) ? e.constantGraphMode(this._symbol) : o.NONE;
                            case 1:
                                return t.valueType !== c.ListOfNumber || e.graphableListVariables(this._symbol, s[0]) ? e.graphMode(this._symbol, s[0]) : o.NONE;
                            default:
                                return o.NONE
                        }
                        break;
                    default:
                        return n.call(this, e, t)
                }
            }
            ,
            i.FunctionDefinition.prototype.getGraphMode = function (e, t) {
                if (1 !== this._argSymbols.length)
                    return o.NONE;
                var n = e.graphMode(this._symbol, this._argSymbols[0])
                    , r = t.getDependencies();
                switch (t.valueType) {
                    case c.Number:
                    case c.ListOfNumber:
                        switch (r.length) {
                            case 0:
                                return n;
                            case 1:
                                return r[0] !== this._argSymbols[0] ? o.NONE : n;
                            default:
                                return o.NONE
                        }
                        break;
                    default:
                        return o.NONE
                }
            }
            ,
            i.Regression.prototype.getGraphMode = function (e, t) {
                return this.isLhsSimple && t.isModelValid ? 1 !== t.model.getDependencies().length ? o.NONE : o.Y : o.NONE
            }
            ,
            i.Polygon.prototype.getGraphMode = function (e, t) {
                return t.isError ? o.NONE : o.POLYGONFILL
            }
            ,
            i.Image.prototype.getGraphMode = function (e, t) {
                return this.userData.showPoints ? this.center.isError || this.radianAngle.isError || this.width.isError || this.height.isError ? o.NONE : o.XYPOINT : o.NONE
            }
    }),
    define("math/features/getgraphinfo", ["require", "parsenodes", "math/builtinframe", "math/domaintypes"], function (e) {
        var t = e("parsenodes")
            , n = e("math/builtinframe")
            , r = e("math/domaintypes");
        t.Base.prototype.getGraphInfo = function (e, t) {
            var n, i, o = t.getDependencies();
            switch (o.length) {
                case 0:
                    n = !0,
                        i = t.boundDomain("x");
                    break;
                case 1:
                    i = t.boundDomain(o[0]),
                        n = "known" === i.type && t.isLinear(o[0]);
                    break;
                case 2:
                    n = !1,
                        i = r.unknownDomain()
            }
            return {
                graphMode: this.getGraphMode(e, t),
                color: this.userData.color,
                pointStyle: this.userData.pointStyle,
                lineStyle: this.userData.lineStyle,
                operator: this.getOperator(),
                isLinear: n,
                linearCoefficients: n ? t.getLinearCoefficients() : void 0,
                domainBound: i
            }
        }
            ,
            t.Base.prototype.getLinearCoefficients = function () {
                var e = this.getDependencies();
                switch (e.length) {
                    case 0:
                        return [+this.constantValue, 0];
                    case 1:
                        var t = this.getPolynomialCoefficients(e[0]);
                        return [t[0] ? +t[0].getConcreteTree(n).constantValue : 0, t[1] ? +t[1].getConcreteTree(n).constantValue : 0];
                    default:
                        return [NaN, NaN]
                }
            }
            ,
            t.OrderedPair.prototype.getLinearCoefficients = function () {
                return [this.args[0].getLinearCoefficients(), this.args[1].getLinearCoefficients()]
            }
    }),
    define("math/features/getMoveStrategy", ["require", "parsenodes", "math/types"], function (e) {
        function t(e) {
            return {
                type: "none",
                inputString: e
            }
        }
        function n(e) {
            return {
                type: "updateCoordinate",
                inputString: e
            }
        }
        function r(e, t, n) {
            return {
                type: "updateSlider",
                inputString: e,
                id: t,
                coefficients: n
            }
        }
        function i(e, t) {
            for (var n in t)
                if (t[n].evaluationState.assignment === e && t[n].evaluationState.is_slidable)
                    return n
        }
        function o(e, t, n, r) {
            for (var o = e.getDependencies(), a = 0; a < o.length; a++)
                if (r[o[a]])
                    return !1;
            for (var l = o.length - 1; l >= 0; l--) {
                var u = o[l]
                    , d = i(u, n);
                if (void 0 !== d) {
                    var p = Object.create(t);
                    p[u] = s.FreeVariable(u);
                    var h = e.tryGetConcreteTree(p);
                    if (!h.isError) {
                        var f = h.polynomialOrder(u);
                        if (1 === f) {
                            var m = h.getPolynomialCoefficients(u)
                                , g = m[1] ? m[1].getConcreteTree(p) : c
                                , y = m[0] ? m[0].getConcreteTree(p) : c;
                            if (y.isConstant && g.isConstant && isFinite(y.constantValue) && isFinite(g.constantValue) && 0 !== g.constantValue) {
                                var v = [-y.constantValue / g.constantValue, 1 / g.constantValue];
                                return {
                                    symbol: u,
                                    id: d,
                                    coefficients: v
                                }
                            }
                        }
                    }
                }
            }
            return !1
        }
        var s = e("parsenodes")
            , a = e("math/types")
            , c = s.Constant(0);
        s.Base.prototype.getMoveStrategy = function () { }
            ,
            s.Assignment.prototype.getMoveStrategy = function (e, t, n) {
                if (this._expression instanceof s.OrderedPair)
                    return this._expression.getMoveStrategy(e, t, n)
            }
            ,
            s.OrderedPair.prototype.getMoveStrategy = function (e, i, s) {
                if (i.valueType === a.Point && 0 === i.getDependencies().length) {
                    for (var c = [], l = {}, u = 0; u < 2; u++) {
                        var d = this.args[u]
                            , p = d.getInputString();
                        if (d.isConstant)
                            c[u] = n(p);
                        else {
                            var h = o(d, e, s, l);
                            h && (c[u] = r(p, h.id, h.coefficients),
                                l[h.symbol] = !0),
                                c[u] || (c[u] = t(p))
                        }
                    }
                    if ("none" !== c[0].type || "none" !== c[1].type)
                        return c
                }
            }
            ,
            s.Image.prototype.getMoveStrategy = function (e, i, s) {
                if ((!this.userData || this.userData.shouldGraph !== !1) && "OrderedPair" === i.center.type && i.center.args[0].isConstant && i.center.args[1].isConstant && i.width.isConstant && i.height.isConstant && i.radianAngle.isConstant) {
                    for (var a = [this.width, this.height, this.center.args[0], this.center.args[1]], c = [], l = {}, u = [2, 3, 0, 1], d = 0; d < u.length; d++) {
                        var p = u[d]
                            , h = a[p];
                        if (h) {
                            var f = h.getInputString();
                            if (h.isConstant)
                                c[p] = n(f);
                            else {
                                var m = o(h, e, s, l);
                                m && (c[p] = r(f, m.id, m.coefficients),
                                    l[m.symbol] = !0),
                                    c[p] || (c[p] = t(f))
                            }
                        } else
                            c[p] = t("")
                    }
                    if ("none" !== c[0].type || "none" !== c[1].type || "none" !== c[2].type || "none" !== c[3].type)
                        return c
                }
            }
    }),
    define("math/features/getDefaultDragMode", ["require", "parsenodes", "graphing/dragmode"], function (e) {
        var t = e("parsenodes")
            , n = e("graphing/dragmode");
        t.Base.prototype.getMoveStrategy = function () {
            return n.NONE
        }
            ,
            t.Assignment.prototype.getDefaultDragMode = function (e) {
                return "none" !== e[0].type && "none" !== e[1].type ? n.XY : "none" !== e[0].type ? n.X : "none" !== e[1].type ? n.Y : n.NONE
            }
            ,
            t.OrderedPair.prototype.getDefaultDragMode = function (e) {
                return "updateSlider" === e[0].type && "updateSlider" === e[1].type ? n.XY : "updateSlider" === e[0].type ? n.X : "updateSlider" === e[1].type ? n.Y : n.NONE
            }
    }),
    define("math/features/tableinfo", ["require", "parsenodes", "math/types", "graphing/label"], function (e) {
        var t = e("parsenodes")
            , n = t.List
            , r = e("math/types")
            , i = e("graphing/label");
        t.Base.prototype.tableInfo = function (e, t) {
            return !1
        }
            ,
            t.Identifier.prototype.tableInfo = function (e, t) {
                return !!e.graphableAsBareIdentifier(this._symbol) && (!!e.validFirstColumnVariable(this._symbol) && {
                    independent_variable: this._symbol,
                    dependent_column: this._inputString,
                    by_reference: !1
                })
            }
            ,
            t.Expression.prototype.tableInfo = function (e, t) {
                var i = t.getDependencies();
                switch (t.valueType) {
                    case r.Point:
                    case r.ListOfPoint:
                        if (0 !== i.length)
                            return !1;
                        if (t.isMovablePoint && ("updateSlider" === t.moveStrategy[0].type || "updateSlider" === t.moveStrategy[1].type))
                            return !1;
                        var o = n.wrap(t).mapElements(function (e) {
                            return e.asArray()
                        });
                        return {
                            independent_variable: "x",
                            dependent_column: "y",
                            by_reference: !1,
                            values: o
                        };
                    case r.Number:
                        if (1 !== i.length)
                            return !1;
                        var s = i[0];
                        return !!e.validFirstColumnVariable(s) && {
                            independent_variable: s,
                            dependent_column: this._inputString,
                            by_reference: !1
                        };
                    default:
                        return !1
                }
            }
            ,
            t.Assignment.prototype.tableInfo = function (e, n) {
                if (n instanceof t.SolvedEquation)
                    return !1;
                if (!this._inputString.length)
                    return !1;
                var r = n.getDependencies();
                if (r.length > 1)
                    return !1;
                var o;
                if (0 === r.length) {
                    if (!e.tableableAsConstant(this._symbol))
                        return !1;
                    o = e.implicitIndependent(this._symbol)
                } else
                    o = r[0];
                if (!e.validFirstColumnVariable(o))
                    return !1;
                var s = e.assignmentForbidden(this._symbol) ? i.trimLatex(this._inputString.replace(/[^=]*=/, "")) : i.trimLatex(this._inputString.split("=")[0]);
                return {
                    independent_variable: o,
                    dependent_column: s,
                    by_reference: !e.assignmentForbidden(this._symbol)
                }
            }
            ,
            t.FunctionDefinition.prototype.tableInfo = function (e, t) {
                if (1 !== this._argSymbols.length)
                    return !1;
                if (!this._inputString.length)
                    return !1;
                var n = t.getDependencies();
                if (n.length > 1)
                    return !1;
                var r = this._argSymbols[0];
                if (!e.validFirstColumnVariable(r))
                    return !1;
                var o = e.assignmentForbidden(this._symbol)
                    , s = o ? i.trimLatex(this._inputString.replace(/[^=]*=/, "")) : i.trimLatex(this._inputString.split("=")[0]);
                return {
                    independent_variable: r,
                    dependent_column: s,
                    by_reference: !o
                }
            }
            ,
            t.BaseComparator.prototype.tableInfo = function (e, t) {
                return !1
            }
            ,
            t.DoubleInequality.prototype.tableInfo = function (e, t) {
                return !1
            }
            ,
            t.Equation.prototype.tableInfo = function (e, t) {
                return !1
            }
    }),
    define("math/features/tableerror", ["require", "parsenodes", "lib/worker-i18n"], function (e) {
        var t = e("parsenodes")
            , n = e("lib/worker-i18n");
        t.Base.prototype.tableError = function () {
            return this.isInequality() ? n.t("Inequalities are not allowed.") : !(this instanceof t.Expression) && n.t("This type of expression is not allowed.")
        }
            ,
            t.List.prototype.tableError = function () {
                return n.t("Lists are not allowed.")
            }
            ,
            t.Equation.prototype.tableError = t.Assignment.prototype.tableError = function () {
                return n.t("Equations are not allowed.")
            }
            ,
            t.FunctionDefinition.prototype.tableError = function () {
                return n.t("Function definitions are not allowed.")
            }
            ,
            t.Regression.prototype.tableError = function () {
                return n.t("Regressions are not allowed.")
            }
    }),
    define("math/features/islinear", ["require", "parsenodes"], function (e) {
        var t = e("parsenodes");
        t.Base.prototype.isLinear = function (e) {
            return !1
        }
            ,
            t.Expression.prototype.isLinear = function (e) {
                return this.polynomialOrder(e) <= 1
            }
            ,
            t.SolvedEquation.prototype.isLinear = function (e) {
                return this._expression.isLinear(e)
            }
            ,
            t.OptimizedRegression.prototype.isLinear = function (e) {
                return this.model.isLinear(e)
            }
            ,
            t.OrderedPair.prototype.isLinear = function (e) {
                return this.args[0].isLinear(e) && this.args[1].isLinear(e)
            }
            ,
            t.List.prototype.isLinear = function (e) {
                return this.args.every(function (t) {
                    return t.isLinear(e)
                })
            }
            ,
            t.Broadcast.prototype.isLinear = function (e) {
                for (var n = this._replacedSymbols, r = this._expression, i = this._lists, o = {}, s = 0; s < i.length; s++)
                    if (i[s].dependsOn(e)) {
                        if (!i[s].isLinear(e))
                            return !1;
                        o[n[s]] = t.FreeVariable(e)
                    }
                return r.substitute(o).isLinear(e)
            }
    }),
    define("math/expression-types", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, n) {
            switch (e) {
                case t.X_OR_Y:
                case t.SINGLE_POINT:
                case t.POINT_LIST:
                case t.PARAMETRIC:
                case t.POLAR:
                case t.IMPLICIT:
                case t.POLYGON:
                    var r = t.EXPRESSION_PROP_DEFAULTS[e];
                    return {
                        points: void 0 === n.points ? r.points : n.points,
                        lines: void 0 === n.lines ? r.lines : n.lines,
                        fill: void 0 === n.fill ? r.fill : n.fill
                    };
                default:
                    var i = e;
                    return i
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.X_OR_Y = "X_OR_Y",
            t.SINGLE_POINT = "SINGLE_POINT",
            t.POINT_LIST = "POINT_LIST",
            t.PARAMETRIC = "PARAMETRIC",
            t.POLAR = "POLAR",
            t.IMPLICIT = "IMPLICIT",
            t.POLYGON = "POLYGON",
            t.EXPRESSION_PROP_DEFAULTS = {
                X_OR_Y: {
                    points: !1,
                    lines: !0,
                    fill: !1
                },
                SINGLE_POINT: {
                    points: !0,
                    lines: !1,
                    fill: !1
                },
                POINT_LIST: {
                    points: !0,
                    lines: !1,
                    fill: !1
                },
                PARAMETRIC: {
                    points: !1,
                    lines: !0,
                    fill: !1
                },
                POLAR: {
                    points: !1,
                    lines: !0,
                    fill: !1
                },
                IMPLICIT: {
                    points: !1,
                    lines: !0,
                    fill: !1
                },
                POLYGON: {
                    points: !1,
                    lines: !0,
                    fill: !0
                }
            },
            t.getReconciledExpressionProps = n
    }),
    define("math/features/graph", ["require", "underscore", "parsenodes", "math/plotter", "graphing/graphmode", "math/comparators", "graphing/dragmode", "math/expression-types"], function (e) {
        function t(e) {
            for (var t = [], n = [], r = e.length, i = 0; i < r; i++)
                t.push(e[i][0]),
                    n.push(e[i][1]);
            return {
                defined: {
                    x: t,
                    y: n
                }
            }
        }
        function n(e) {
            return Array.prototype.concat.apply([], e)
        }
        function r(e, t, n) {
            return !!e && (0 === t && 0 === n ? "none" !== e[2].type || "none" !== e[3].type : 0 !== t && 0 !== n ? "none" !== e[0].type && "none" !== e[1].type : 0 !== t ? "none" !== e[0].type : 0 !== n && "none" !== e[1].type)
        }
        var i = e("underscore")
            , o = e("parsenodes")
            , s = e("math/plotter").default
            , a = e("graphing/graphmode")
            , c = e("math/comparators")
            , l = e("graphing/dragmode")
            , u = e("math/expression-types")
            , d = o.List;
        o.Base.prototype._graph = function (e, r, c, l) {
            if (r instanceof o.SolvedEquation)
                return this._graph(e, r._expression, c, l);
            var p, h, f, m, g, y = this, v = r.getExpressionType(l.graphMode, r.valueType), b = u.getReconciledExpressionProps(v, {
                points: this.userData.points,
                lines: this.userData.lines,
                fill: this.userData.fill
            });
            switch (l.graphMode) {
                case a.XYPOINT_MOVABLE:
                    return p = [r.asArray()],
                        f = this.userData.shouldGraph && b.points,
                        g = this.userData.showLabel && !f,
                        f ? [{
                            segments: [p],
                            graphMode: l.graphMode,
                            color: this.userData.color,
                            style: this.userData.pointStyle,
                            showLabel: !!this.userData.showLabel,
                            labelSize: this.userData.labelSize,
                            labels: this.computedLabels || [],
                            poi: t(p)
                        }] : g ? [{
                            segments: [p],
                            graphMode: a.XYPOINT,
                            color: this.userData.color,
                            style: this.userData.pointStyle,
                            showLabel: !!this.userData.showLabel,
                            nakedLabel: !0,
                            labelSize: this.userData.labelSize,
                            labels: this.computedLabels || [],
                            poi: t(p)
                        }] : [];
                case a.XYPOINT:
                    return h = [],
                        p = d.wrap(r).mapElements(function (e) {
                            return e.asArray()
                        }),
                        f = this.userData.shouldGraph && b.points,
                        m = this.userData.shouldGraph && b.lines,
                        g = this.userData.showLabel && !f && !m,
                        (this.userData.showLabel || f) && h.push({
                            segments: [p],
                            graphMode: l.graphMode,
                            color: this.userData.color,
                            style: this.userData.pointStyle,
                            showLabel: !!this.userData.showLabel,
                            showPoint: f,
                            labelSize: this.userData.labelSize,
                            nakedLabel: g,
                            labels: this.computedLabels || [],
                            poi: t(p)
                        }),
                        m && h.push({
                            segments: [p].map(n),
                            graphMode: a.PARAMETRIC,
                            color: this.userData.color,
                            style: this.userData.lineStyle,
                            poi: []
                        }),
                        h;
                case a.PARAMETRIC:
                    var x = this.userData
                        , w = [];
                    if (h = d.wrap(r).mapElements(function (n) {
                        var r = n.getDependencies();
                        if (0 === r.length)
                            return p = [n.asArray()],
                                {
                                    segments: [p],
                                    graphMode: a.XYPOINT,
                                    color: x.color,
                                    style: x.lineStyle,
                                    poi: t(p)
                                };
                        var i = n.getCompiledFunction().fn
                            , o = y.getGraphInfo(e, n);
                        return o.graphMode = l.graphMode,
                            o.domain = y.userData.domain,
                            o.style = y.userData.lineStyle,
                            s.computeGraphData(c, o, i)
                    }),
                        b.fill) {
                        if (h.forEach(function (e) {
                            w.push({
                                segments: e.segments,
                                color: x.color,
                                fillOpacity: x.fillOpacity,
                                graphMode: a.POLYGONFILL,
                                poi: []
                            })
                        }),
                            !b.lines)
                            return w;
                        h = h.concat(w)
                    }
                    return h;
                case a.X:
                case a.Y:
                case a.IMPLICIT:
                case a.POLAR:
                    return h = [],
                        d.wrap(r).eachElement(function (t) {
                            var n, r = l.graphMode === a.IMPLICIT ? t.getCompiledFunction(["x", "y"]) : t.getCompiledFunction();
                            try {
                                n = t.getCompiledDerivative()
                            } catch (e) { }
                            var o = y.getGraphInfo(e, t);
                            o.graphMode = l.graphMode,
                                o.style = y.userData.lineStyle;
                            var u = n ? s.computeGraphData(c, o, r.fn, n.fn) : s.computeGraphData(c, o, r.fn);
                            u.compiled = r,
                                u.fillSegments ? h.push(i.omit(u, "fillSegments")) : h.push(u),
                                o.graphMode === a.IMPLICIT && "=" !== o.operator && h.push({
                                    graphMode: a.POLYGONFILL,
                                    segments: u.fillSegments,
                                    poi: {}
                                })
                        }),
                        h;
                default:
                    return !1
            }
        }
            ,
            o.Base.prototype.graph = function (e, t, n) {
                var r = this.getGraphInfo(e, t);
                return this._graph(e, t, n, r)
            }
            ,
            o.BaseComparator.prototype.graph = function (e, t, n) {
                var r = this
                    , i = this.getGraphInfo(e, t)
                    , l = i.graphMode;
                if (l === a.IMPLICIT)
                    return this._graph(e, t, n, i);
                if (l === a.NONE)
                    return !1;
                if (!(t instanceof o.SolvedEquation))
                    return !1;
                var u = this.getOperator()
                    , d = []
                    , p = []
                    , h = !0;
                t._expression.eachElement(function (e) {
                    d.push(e.getCompiledFunction());
                    try {
                        p.push(e.getCompiledDerivative())
                    } catch (e) {
                        h = !1
                    }
                }),
                    h || (p = void 0);
                var f, m, g = [], y = [-1, 0, 0, 1], v = d.length;
                for (m = 0; m < v; m++) {
                    var b = this.getGraphInfo(e, t._expression.args[m]);
                    b.graphMode = l,
                        b.style = r.userData.lineStyle,
                        f = p ? s.computeGraphData(n, b, d[m].fn, p[m].fn) : s.computeGraphData(n, b, d[m].fn),
                        f.compiled = d[m],
                        f.operator = c.get(c.table[u].inclusive, y[m % 4]),
                        g.push(f)
                }
                for (m = 0; m < v; m += 4) {
                    var x = s.polygonsFromSegments(g[m + 1].segments, g[m + 2].segments, l);
                    g.push({
                        graphMode: a.POLYGONFILL,
                        segments: x,
                        poi: {}
                    })
                }
                return g
            }
            ,
            o.DoubleInequality.prototype.graph = function (e, t, n) {
                var r = this.getGraphInfo(e, t);
                if (r.graphMode === a.NONE)
                    return !1;
                var i = []
                    , o = c.get(c.table[this._operators[0]].inclusive, 0)
                    , l = c.get(c.table[this._operators[1]].inclusive, 0)
                    , u = this.userData
                    , p = this;
                return d.eachArgs(t._expressions, function (t) {
                    var c, d;
                    t[0].userData = t[1].userData = u,
                        c = p._graph(e, t[0], n, r)[0],
                        c.operator = o,
                        i.push(c),
                        d = p._graph(e, t[1], n, r)[0],
                        d.operator = l,
                        i.push(d);
                    var h = s.polygonsFromSegments(c.segments, d.segments, c.graphMode);
                    i.push({
                        graphMode: a.POLYGONFILL,
                        segments: h,
                        poi: {}
                    })
                }),
                    i
            }
            ,
            o.Regression.prototype.graph = function (e, t, n) {
                var r = this.getGraphInfo(e, t);
                return this._graph(e, t.model, n, r)
            }
            ,
            o.Polygon.prototype.graph = function (e, t, r) {
                for (var i = this.getGraphInfo(e, t), o = t.args[0].asValue(), s = [], c = void 0 === this.userData.lines || this.userData.lines, l = void 0 === this.userData.fill || this.userData.fill, u = [], d = [], p = 0; p < o.length; p++) {
                    var h = o[p][0]
                        , f = o[p][1];
                    isFinite(h) && isFinite(f) ? (c || l) && d.push([h, f]) : (c || l) && (d.length > 1 && u.push(d),
                        d = [])
                }
                if (u.length || d.length) {
                    d.push([o[0][0], o[0][1]]),
                        u.push(d);
                    var m = u.map(n);
                    l && s.push({
                        segments: m,
                        graphMode: a.POLYGONFILL,
                        poi: [],
                        color: i.color,
                        fillOpacity: this.userData.fillOpacity,
                        style: i.style
                    }),
                        c && s.push({
                            segments: m,
                            graphMode: a.PARAMETRIC,
                            poi: [],
                            color: i.color,
                            style: this.userData.lineStyle
                        })
                }
                return s
            }
            ,
            o.Table.prototype.isValueDraggable = function (e, t, n) {
                if (!e.columns[t].isIndependent)
                    return !1;
                var r = this.columns[t]
                    , i = r.values
                    , o = i && i[n];
                return !(!o || !isFinite(o.constantValue) || 0 !== o._dependencies.length)
            }
            ,
            o.Table.prototype.graph = function (e, r, i) {
                var o = [];
                if (r.columns[0].isError)
                    return o;
                for (var s = r.columns[0], c = s.values, u = 1; u < this.columns.length; u++) {
                    var d = r.columns[u];
                    if (!d.isError) {
                        var p = this.columns[u].header.userData;
                        if (!p.hidden) {
                            for (var h = p.dragMode, f = h === l.X || h === l.XY, m = h === l.Y || h === l.XY, g = !!p.points, y = !!p.lines, v = d.isDiscrete(s), b = y && v, x = y && !v, w = [], E = [], _ = [], S = [], k = [], M = [], C = 0; C < c.length; C++) {
                                var I = c[C]
                                    , T = d.values[C];
                                if (I && T && isFinite(I.constantValue) && isFinite(T.constantValue)) {
                                    if (g) {
                                        var P = f && this.isValueDraggable(r, 0, C)
                                            , A = m && this.isValueDraggable(r, u, C);
                                        P || A ? (_.push([I.constantValue, T.constantValue]),
                                            S.push({
                                                index: C,
                                                dragX: P,
                                                dragY: A
                                            })) : E.push([I.constantValue, T.constantValue])
                                    }
                                    b && M.push([I.constantValue, T.constantValue])
                                } else
                                    b && (M.length > 1 && k.push(M),
                                        M = [])
                            }
                            if (_.length && w.push({
                                graphMode: a.XYPOINT_MOVABLE,
                                segments: [_],
                                color: p.color,
                                tableId: p.tableId,
                                poi: t(_),
                                movablePointInfo: S
                            }),
                                E.length && w.push({
                                    segments: [E],
                                    graphMode: a.XYPOINT,
                                    showPoint: !0,
                                    poi: t(E),
                                    color: p.color,
                                    style: p.pointStyle
                                }),
                                (k.length || M.length) && (k.push(M),
                                    w.push({
                                        segments: k.map(n),
                                        graphMode: a.PARAMETRIC,
                                        poi: [],
                                        color: p.color,
                                        style: p.lineStyle
                                    })),
                                x) {
                                var L = this.columns[u].header.graph(e, r.columns[u].header, i);
                                L.length && Array.prototype.push.apply(w, L)
                            }
                            w.length && (o[p.id] = w)
                        }
                    }
                }
                return o
            }
            ,
            o.Image.prototype.graph = function (e, n, i) {
                var o = [];
                if (!("OrderedPair" === n.center.type && n.center.args[0].isConstant && n.center.args[1].isConstant && n.radianAngle.isConstant && n.width.isConstant && n.height.isConstant))
                    return o;
                for (var s = [], c = [], l = n.width.constantValue / 2, u = n.height.constantValue / 2, d = n.radianAngle.constantValue, p = -1; p <= 1; p++)
                    for (var h = -1; h <= 1; h++) {
                        var f = [n.center.args[0].constantValue + p * l * Math.cos(d) + h * u * Math.sin(d), n.center.args[1].constantValue - p * l * Math.sin(d) + h * u * Math.cos(d)]
                            , m = r(n.moveStrategy, p, h);
                        m && (s.push(f),
                            c.push([p, h]))
                    }
                return o.push({
                    segments: [s],
                    scaleFactors: [c],
                    graphMode: a.XYPOINT_MOVABLE,
                    color: this.userData.color,
                    style: this.userData.style,
                    poi: t(s)
                }),
                    o
            }
    }),
    define("math/features/elementAt", ["require", "parsenodes", "math/builtinframe"], function (e) {
        function t(e) {
            for (var t = 0; t < this.length; t++)
                e(this.elementAt(t))
        }
        function n(e) {
            for (var t = [], n = 0; n < this.length; n++)
                t.push(e(this.elementAt(n)));
            return t
        }
        var r = e("parsenodes")
            , i = e("math/builtinframe");
        r.List.prototype.elementAt = function (e) {
            return e = Math.floor(e),
                e >= 0 && e < this.args.length ? this.args[e] : r.Constant(NaN)
        }
            ,
            r.Broadcast.prototype.elementAt = function (e) {
                if (e = Math.floor(e),
                    e < 0 || e >= this.length)
                    return r.Constant(NaN);
                for (var t = {}, n = 0; n < this._replacedSymbols.length; n++)
                    t[this._replacedSymbols[n]] = this._lists[n].elementAt(e);
                return this._expression.substitute(t).getConcreteTree(i)
            }
            ,
            r.List.prototype.eachElement = t,
            r.Broadcast.prototype.eachElement = t,
            r.List.prototype.mapElements = n,
            r.Broadcast.prototype.mapElements = n,
            r.OrderedPair.prototype.elementAt = function (e) {
                switch (e) {
                    case 0:
                        return this.args[0];
                    case 1:
                        return this.args[1];
                    default:
                        return r.Constant(NaN)
                }
            }
    }),
    define("lib/number-to-latex", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            if ("string" == typeof e)
                return e;
            var t = e + "";
            return t = t.replace(/1e\+?([-\d]+)/, "10^{$1}"),
                t = t.replace(/([-\d\.]+)e\+?([-\d]+)/, "$1\\cdot 10^{$2}")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = n
    }),
    define("math/features/printLatex", ["require", "parsenodes", "graphing/label", "lib/number-to-latex"], function (e) {
        function t() {
            return c.identifierToLatex(this._symbol) + " "
        }
        function n(e) {
            switch (e) {
                case ">":
                    return "\\gt ";
                case "<":
                    return "\\lt ";
                case ">=":
                    return "\\ge ";
                case "<=":
                    return "\\le ";
                case "=":
                    return "="
            }
        }
        function r(e) {
            return e.printLatex()
        }
        function i() {
            switch (this._symbol) {
                case "sqrt":
                    return "\\sqrt{" + this.args[0].printLatex() + "}";
                case "nthroot":
                    return "\\sqrt[" + this.args[1].printLatex() + "]{" + this.args[0].printLatex() + "}";
                case "logbase":
                    return "\\log_{" + this.args[1].printLatex() + "}\\left(" + this.args[0].printLatex() + "\\right)";
                default:
                    return c.identifierToLatex(this._symbol) + "\\left(" + this.args.map(r).join(", ") + "\\right)"
            }
        }
        function o(e) {
            return e.isConstant && e.constantValue === !0
        }
        function s(e) {
            return e.isConstant && e.isNaN()
        }
        var a = e("parsenodes")
            , c = e("graphing/label")
            , l = e("lib/number-to-latex").default;
        a.Identifier.prototype.printLatex = t,
            a.FreeVariable.prototype.printLatex = t,
            a.Constant.prototype.printLatex = function () {
                return l(this.constantValue)
            }
            ,
            a.Negative.prototype.printLatex = function () {
                return "-\\left(" + this.args[0].printLatex() + "\\right)"
            }
            ,
            a.Add.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)+\\left(" + this.args[1].printLatex() + "\\right)"
            }
            ,
            a.PercentOf.prototype.printLatex = function () {
                return this.args[0].printLatex() + " \\% \\operatorname{of} " + this.args[1].printLatex()
            }
            ,
            a.Subtract.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)-\\left(" + this.args[1].printLatex() + "\\right)"
            }
            ,
            a.Multiply.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)*\\left(" + this.args[1].printLatex() + "\\right)"
            }
            ,
            a.Divide.prototype.printLatex = function () {
                return "\\frac{" + this.args[0].printLatex() + "}{" + this.args[1].printLatex() + "}"
            }
            ,
            a.Exponent.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)^{" + this.args[1].printLatex() + "}"
            }
            ,
            a.Assignment.prototype.printLatex = function () {
                return c.identifierToLatex(this._symbol) + "=" + this._expression.printLatex()
            }
            ,
            a.Equation.prototype.printLatex = function () {
                return this._lhs.printLatex() + "=" + this._rhs.printLatex()
            }
            ,
            a.BaseComparator.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)" + n(this.operator) + "\\left(" + this.args[1].printLatex() + "\\right)"
            }
            ,
            a.DoubleInequality.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)" + n(this.args[1]) + this.args[2].printLatex() + n(this.args[3]) + "\\left(" + this.args[4].printLatex() + "\\right)"
            }
            ,
            a.And.prototype.printLatex = function () {
                if (!(this.args[0] instanceof a.BaseComparator && this.args[1] instanceof a.BaseComparator))
                    throw new Error("Not implemented");
                if (this.args[0].args[1].printLatex() !== this.args[1].args[0].printLatex())
                    throw new Error("Not implemented");
                return "\\left(" + this.args[0].args[0].printLatex() + "\\right)" + n(this.args[0].operator) + "\\left(" + this.args[0].args[1].printLatex() + "\\right)" + n(this.args[1].operator) + "\\left(" + this.args[1].args[1].printLatex() + "\\right)"
            }
            ,
            a.NativeFunction.prototype.printLatex = i,
            a.TypedFunction.prototype.printLatex = i,
            a.ReducerFunction.prototype.printLatex = i,
            a.ParametrizedReducerFunction.prototype.printLatex = i,
            a.DoubleReducerFunction.prototype.printLatex = i,
            a.FunctionCall.prototype.printLatex = i,
            a.Prime.prototype.printLatex = function () {
                switch (this.args[0]._symbol) {
                    case "logbase":
                        return "\\log_{" + this.args[0].args[1].printLatex() + "}" + Array(this.order + 1).join("'") + "\\left(" + this.args[0].args[0].printLatex() + "\\right)";
                    default:
                        return c.identifierToLatex(this.args[0]._symbol) + Array(this.order + 1).join("'") + "\\left(" + this.args[0].args.map(r).join(", ") + "\\right)"
                }
            }
            ,
            a.List.prototype.printLatex = function () {
                return "\\left[" + this.args.map(r).join(", ") + "\\right]"
            }
            ,
            a.Range.prototype.printLatex = function () {
                return "\\left[" + this.args[0].args.map(r).join(", ") + " ... " + this.args[1].args.map(r).join(", ") + "\\right]"
            }
            ,
            a.ListAccess.prototype.printLatex = function () {
                return "\\left(" + this.args[0].printLatex() + "\\right)\\left[" + this.args[1].printLatex() + "\\right]"
            }
            ,
            a.OrderedPair.prototype.printLatex = function () {
                return "\\left(" + this.args.map(r).join(", ") + "\\right)"
            }
            ,
            a.Sum.prototype.printLatex = function () {
                return "\\sum_{" + this.args[0].printLatex() + "=" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)"
            }
            ,
            a.Product.prototype.printLatex = function () {
                return "\\prod_{" + this.args[0].printLatex() + "=" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)"
            }
            ,
            a.Integral.prototype.printLatex = function () {
                return "\\int_{" + this.args[1].printLatex() + "}^{" + this.args[2].printLatex() + "}\\left(" + this.args[3].printLatex() + "\\right)d" + this.args[0].printLatex()
            }
            ,
            a.FunctionExponent.prototype.printLatex = function () {
                return this.args[0].printLatex() + "\\left(" + this.args[1].printLatex() + "\\right)^{" + this.args[2].printLatex() + "}"
            }
            ,
            a.Piecewise.prototype.printLatex = function () {
                var e = this;
                if (o(e.args[0]))
                    return e.args[1].printLatex();
                for (var t = ["\\left\\{"]; ;) {
                    if (o(e.args[0])) {
                        t.push(e.args[1].printLatex());
                        break
                    }
                    if (t.push(e.args[0].printLatex(), ": "),
                        s(e.args[2])) {
                        t.push(e.args[1].printLatex());
                        break
                    }
                    if (t.push(e.args[1].printLatex(), ", "),
                        !(e.args[2] instanceof a.Piecewise)) {
                        t.push(e.args[2].printLatex());
                        break
                    }
                    e = e.args[2]
                }
                return t.push("\\right\\}"),
                    t.join("")
            }
            ,
            a.FunctionDefinition.prototype.printLatex = function () {
                return c.identifierToLatex(this._symbol) + "\\left(" + this._argSymbols.map(c.identifierToLatex).join(", ") + "\\right) = " + this._expression.printLatex()
            }
            ,
            a.Derivative.prototype.printLatex = function () {
                return "\\frac{d}{d" + c.identifierToLatex(this._symbol) + "}\\left(" + this.args[0].printLatex() + "\\right)"
            }
            ,
            a.Regression.prototype.printLatex = function () {
                return "\\left(" + this._lhs.printLatex() + "\\right)\\sim\\left(" + this._rhs.printLatex() + "\\right)"
            }
            ,
            a.Polygon.prototype.printLatex = function () {
                return "\\polygon\\left(" + this.args.map(r).join(", ") + "\\right)"
            }
    }),
    define("math/features/getExpressionType", ["require", "parsenodes", "graphing/graphmode", "math/expression-types", "math/types"], function (e) {
        var t = e("parsenodes")
            , n = e("graphing/graphmode")
            , r = e("math/expression-types")
            , i = e("math/types");
        t.Base.prototype.getExpressionType = function (e, t) {
            return e === n.X || e === n.Y ? r.X_OR_Y : e === n.XYPOINT || e === n.XYPOINT_MOVABLE ? t === i.Point ? r.SINGLE_POINT : r.POINT_LIST : e === n.PARAMETRIC ? r.PARAMETRIC : e === n.POLAR ? r.POLAR : e === n.IMPLICIT ? r.IMPLICIT : r.X_OR_Y
        }
            ,
            t.Polygon.prototype.getExpressionType = function (e, t) {
                return r.POLYGON
            }
    }),
    define("parser", ["require", "math/baseparser", "math/features/getConcreteTree", "math/features/getValueType", "math/features/typeCheck", "math/features/repr", "math/features/scalarEvalExpression", "math/features/constantcollapsedcopy", "math/features/polynomialorder", "math/features/polynomialcoefficients", "math/features/extractconditions", "math/features/bounddomain", "math/features/derivative", "math/features/substitute", "math/features/solve", "math/features/analyze", "math/features/analyzeFourFunction", "math/features/analyzeScientific", "math/features/analyzeSingleExpressionScientific", "math/features/getgraphmode", "math/features/getgraphinfo", "math/features/getMoveStrategy", "math/features/getDefaultDragMode", "math/features/tableinfo", "math/features/tableerror", "math/features/islinear", "math/features/graph", "math/features/elementAt", "math/features/printLatex", "math/features/getExpressionType"], function (e) {
        var t = e("math/baseparser");
        return e("math/features/getConcreteTree"),
            e("math/features/getValueType"),
            e("math/features/typeCheck"),
            e("math/features/repr"),
            e("math/features/scalarEvalExpression"),
            e("math/features/constantcollapsedcopy"),
            e("math/features/polynomialorder"),
            e("math/features/polynomialcoefficients"),
            e("math/features/extractconditions"),
            e("math/features/bounddomain"),
            e("math/features/derivative"),
            e("math/features/substitute"),
            e("math/features/solve"),
            e("math/features/analyze"),
            e("math/features/analyzeFourFunction"),
            e("math/features/analyzeScientific"),
            e("math/features/analyzeSingleExpressionScientific"),
            e("math/features/getgraphmode"),
            e("math/features/getgraphinfo"),
            e("math/features/getMoveStrategy"),
            e("math/features/getDefaultDragMode"),
            e("math/features/tableinfo"),
            e("math/features/tableerror"),
            e("math/features/islinear"),
            e("math/features/graph"),
            e("math/features/elementAt"),
            e("math/features/printLatex"),
            e("math/features/getExpressionType"),
            t
    }),
    define("math/finddependencyorder", ["require", "math/builtinframe", "underscore"], function (e) {
        function t(e, t, i) {
            function o(e) {
                y[e] = y[e] || {};
                var n, r = y[e];
                r.id = e,
                    r.index = v,
                    r.lowlink = v,
                    b.push(r),
                    r.instack = !0,
                    v++;
                for (var i = t[e].getDependencies(), c = 0; c < i.length; c++) {
                    var l = i[c];
                    if (f.hasOwnProperty(l))
                        for (var u = f[l], d = 0; d < u.length; d++) {
                            var p = u[d];
                            y.hasOwnProperty(p) ? (n = y[p],
                                n.instack && (r.lowlink = Math.min(r.lowlink, n.index))) : (o(p),
                                    n = y[p],
                                    r.lowlink = Math.min(r.lowlink, n.lowlink))
                        }
                }
                if (r.lowlink === r.index)
                    if (n = b.pop(),
                        n.instack = !1,
                        n === r)
                        s(r);
                    else {
                        for (var h = [n]; ;)
                            if (n = b.pop(),
                                n.instack = !1,
                                h.push(n),
                                n === r)
                                break;
                        a(h)
                    }
            }
            function s(e) {
                x.push(e.id)
            }
            function a(n) {
                var i, o, s = [];
                for (o = n.length - 1; o >= 0; o--) {
                    i = n[o];
                    var a = t[i.id].getLegalExports(e);
                    Array.prototype.push.apply(s, a),
                        s.push(a[0]),
                        x.push(i.id)
                }
                for (s = r.unique(s),
                    s.sort(),
                    o = 0; o < s.length; o++)
                    g[s[o]] = s
            }
            var c, l, u, d, p, h = [], f = {}, m = {}, g = {}, y = {}, v = 0, b = [], x = [];
            if (!i) {
                i = [];
                for (c in t)
                    t.hasOwnProperty(c) && i.push(c)
            }
            for (c in t)
                if (t.hasOwnProperty(c)) {
                    for (p = t[c].exportPenalty || 0; h.length < p + 1;)
                        h.push([]);
                    h[p].push(c)
                }
            for (p = 0; p < h.length; p++) {
                var w = {};
                for (l = 0; l < h[p].length; l++) {
                    c = h[p][l];
                    var E = t[c].getLegalExports(e);
                    for (u = 0; u < E.length; u++)
                        d = E[u],
                            n[d] || f[d] || (w[d] = w[d] || [],
                                w[d].push(c),
                                w[d].length > 1 && (m[d] = !0))
                }
                for (d in w)
                    f[d] = w[d]
            }
            for (l = 0; l < i.length; l++)
                y.hasOwnProperty(i[l]) || o(i[l]);
            return {
                resolved: x,
                multiplyDefined: m,
                cyclicallyDefined: g
            }
        }
        var n = e("math/builtinframe")
            , r = e("underscore");
        return t
    }),
    define("math/findIntersections", ["require", "graphing/graphmode", "./plotter", "parsenodes", "./distance"], function (e) {
        function t(e) {
            for (var t = [], n = 0; n < e; n++)
                t[n] = {
                    x: [],
                    y: [],
                    intersects: []
                };
            return t
        }
        function n(e, t, n, r) {
            return n === u.X && r === u.X || n === u.Y && r === u.Y ? function (n) {
                return t(n) - e(n)
            }
                : (n === u.X && r === u.Y || n === u.Y && r === u.X) && function (n) {
                    return n - t(e(n))
                }
        }
        function r(e) {
            e instanceof p.SolvedEquation ? e = e._expression : e instanceof p.OptimizedRegression && (e = e.model);
            var t = []
                , n = [];
            return e instanceof p.DoubleInequality ? p.List.eachArgs(e._expressions, function (e) {
                t.push(e[0].getCompiledFunction()),
                    n.push(e[0].isConstant && e[1].isNaN()),
                    t.push(e[1].getCompiledFunction()),
                    n.push(e[1].isConstant && e[1].isNaN())
            }) : p.List.wrap(e).eachElement(function (e) {
                t.push(e.getCompiledFunction()),
                    n.push(e.isConstant && e.isNaN())
            }),
                {
                    functions: t,
                    skipIntersecting: n
                }
        }
        function i(e, t) {
            var n = [];
            for (var i in e)
                if (e.hasOwnProperty(i) && String(i) !== String(t) && e[i].shouldIntersect()) {
                    var o = e[i]
                        , s = r(o.concreteTree);
                    n.push({
                        id: i,
                        graphMode: o.getGraphMode(),
                        functions: s.functions,
                        skipIntersecting: s.skipIntersecting
                    })
                }
            return n
        }
        function o(e, t) {
            e.intersects = Array(e.x.length);
            for (var n = 0; n < e.x.length; n++)
                e.intersects[n] = t
        }
        function s(e, t) {
            if (t === u.X) {
                var n = e.y;
                e.y = e.x,
                    e.x = n
            }
        }
        function a(e, t) {
            Array.prototype.push.apply(e.x, t.x),
                Array.prototype.push.apply(e.y, t.y),
                Array.prototype.push.apply(e.intersects, t.intersects)
        }
        function c(e, t, n) {
            var r = d.sampleXY(e, t)
                , i = r.poi.zeros
                , o = r.poi.extrema
                , s = []
                , a = 0
                , c = 0;
            for (a = 0; a < i.x.length; a++) {
                for (; c < o.x.length && o.x[c] < i.x[a]; c++)
                    h.approx(o.y[c], 0) && s.push(o.x[c]);
                s.push(i.x[a])
            }
            for (; c < o.x.length; c++)
                h.approx(o.y[c], 0) && s.push(o.x[c]);
            return {
                x: s,
                y: s.map(n)
            }
        }
        function l(e, l, u) {
            var p = e[u]
                , h = p.getGraphInfo()
                , m = p.getGraphMode()
                , g = r(p.concreteTree)
                , y = t(g.functions.length)
                , v = i(e, u);
            if (!v)
                return y;
            for (var b = 0, x = 0; x < v.length; x++)
                for (var w = v[x], E = 0; E < g.functions.length; E++)
                    if (!g.skipIntersecting[E])
                        for (var _ = g.functions[E].fn, S = d.computeDomain(l, h, _), k = 0; k < w.functions.length; k++)
                            if (!v[x].skipIntersecting[k]) {
                                var M = w.functions[k].fn
                                    , C = n(_, M, m, w.graphMode);
                                if (C) {
                                    var I = c(C, S, _);
                                    if (b += I.x.length,
                                        b > f)
                                        return t(g.functions.length);
                                    o(I, w.id),
                                        s(I, m),
                                        a(y[E], I)
                                }
                            }
            return y
        }
        var u = e("graphing/graphmode")
            , d = e("./plotter").default
            , p = e("parsenodes")
            , h = e("./distance")
            , f = 100;
        return {
            findIntersections: l,
            findIndicatorZeros: c
        }
    }),
    define("math/interpolatedlabel", ["require", "exports", "parsenodes", "math/types", "graphing/label"], function (e, t, n, r, i) {
        "use strict";
        function o(e) {
            return !(e.length < 2) && ("`" === e[0] && "`" === e[e.length - 1])
        }
        function s(e) {
            for (var t, n = ["[a-zA-Z][0-9]*", "[a-zA-Z]_[a-zA-Z0-9]+", "[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"], r = "\\$({" + n.join("})|\\$({") + "})", i = new RegExp(r, "g"), o = [], s = 0, a = 0; t = i.exec(e);) {
                a = t.index,
                    a > s && o.push(e.substr(s, a - s));
                var c = t[0]
                    , l = c.replace(/[{}\$]/g, "").replace(/^([a-zA-Z])([0-9]+)$/, "$1_$2");
                o.push({
                    symbol: l,
                    str: c
                }),
                    s = t.index + c.length
            }
            return s < e.length && o.push(e.substr(s)),
                {
                    raw: e,
                    parts: o
                }
        }
        function a(e, t) {
            return t ? "{" + i.truncatedLatexLabel(e, {
                bigCutoff: 1e7,
                digits: 8
            }) + "}" : i.truncatedPlainmathLabel(e, {
                bigCutoff: 1e7,
                digits: 8
            })
        }
        function c(e, t, i) {
            for (var s = [], c = o(e.raw), l = 0, u = e.parts; l < u.length; l++) {
                var d = u[l];
                if ("string" == typeof d)
                    s.push(d);
                else {
                    var p = n.Identifier(d.symbol).tryGetConcreteTree(t);
                    if (p.valueType === r.Number) {
                        var h = p.constantValue;
                        if ("number" == typeof h) {
                            s.push(a(h, c));
                            continue
                        }
                    } else if (p.valueType === r.ListOfNumber && p.args[i]) {
                        var h = p.args[i].constantValue;
                        if ("number" == typeof h) {
                            s.push(a(h, c));
                            continue
                        }
                    }
                    c ? s.push("{?}") : s.push("?")
                }
            }
            return s.join("")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.isMathLabel = o,
            t.parse = s,
            t.interpolate = c
    }),
    define("math/policyFourFunction", ["require"], function (e) {
        var t = {
            assignmentForbidden: function (e) {
                return "ans" !== e.slice(0, 3)
            },
            sliderForbidden: function (e) {
                return !0
            },
            sliderVariables: function () {
                return []
            },
            graphingEnabled: function () {
                return !1
            },
            ansEnabled: function () {
                return !0
            },
            disabledFeatures: function () {
                return ["Sum", "Product", "Integral", "List", "Derivative", "Piecewise", "Exponent", "PercentOf"]
            }
        };
        return t
    }),
    define("math/policyScientific", ["require"], function (e) {
        var t = {
            assignmentForbidden: function (e) {
                return "tmp" === e.slice(0, 3)
            },
            sliderForbidden: function (e) {
                return !0
            },
            sliderVariables: function () {
                return []
            },
            graphingEnabled: function () {
                return !1
            },
            ansEnabled: function () {
                return !0
            },
            disabledFeatures: function () {
                return ["Sum", "Product", "Integral", "Derivative", "Piecewise"]
            }
        };
        return t
    }),
    define("math/policySingleExpressionScientific", ["require"], function (e) {
        var t = {
            assignmentForbidden: function (e) {
                return "ans" !== e.slice(0, 3)
            },
            sliderForbidden: function (e) {
                return !0
            },
            sliderVariables: function () {
                return []
            },
            graphingEnabled: function () {
                return !1
            },
            ansEnabled: function () {
                return !1
            },
            disabledFeatures: function () {
                return ["Sum", "Product", "Integral", "Derivative", "Piecewise", "PercentOf"]
            }
        };
        return t
    }),
    define("math/policyGraphing", ["require", "graphing/graphmode", "math/parsenode/builtinfunction"], function (e) {
        var t = e("graphing/graphmode")
            , n = e("math/parsenode/builtinfunction")
            , r = {
                assignmentForbidden: function (e) {
                    return "x" === e || "y" === e || "theta" === e || "tmp" === e.slice(0, 3) || n.hasOwnProperty(e)
                },
                sliderForbidden: function (e) {
                    return r.assignmentForbidden(e) || "ans" === e.slice(0, 3)
                },
                sliderVariables: function (e) {
                    return e.indexOf("theta") !== -1 && (e = e.filter(function (e) {
                        return "r" !== e
                    })),
                        e.filter(function (e) {
                            return !r.sliderForbidden(e)
                        })
                },
                graphingEnabled: function () {
                    return !0
                },
                ansEnabled: function () {
                    return !1
                },
                validRegressionParameter: function (e) {
                    return "x" !== e && "y" !== e
                },
                validLHS: function (e) {
                    return "theta" !== e
                },
                unplottablePolarFunction: function (e, t) {
                    return "theta" === e && t.indexOf("r") !== -1
                },
                validDoubleInequalitySymbol: function (e) {
                    return "x" === e || "y" === e
                },
                validDoubleInequalityVariables: function (e) {
                    return !(e.length > 2) && e.every(r.validDoubleInequalitySymbol)
                },
                validExpressionVariable: function (e) {
                    return "x" === e
                },
                validSolvedVariable: function (e) {
                    return "x" === e || "y" === e || "r" === e
                },
                validImplicitVariables: function (e) {
                    switch (e.length) {
                        case 1:
                            return "x" === e[0] || "y" === e[0] || "r" === e[0];
                        case 2:
                            return "x" === e[0] && "y" === e[1] || "y" === e[0] && "x" === e[1] || "r" === e[0] && "theta" === e[1] || "theta" === e[0] && "r" === e[1];
                        default:
                            return !1
                    }
                },
                graphableListVariables: function (e, t) {
                    return "x" === e || "y" === e || "r" === e || "x" === t || "y" === t
                },
                validParametricVariable: function (e) {
                    return "t" === e
                },
                validParametricVariables: function (e) {
                    return 1 === e.length && r.validParametricVariable(e[0])
                },
                validInequalityVariables: function (e) {
                    switch (e.length) {
                        case 1:
                            return "x" === e[0] || "y" === e[0] || "r" === e[0];
                        case 2:
                            return r.validImplicitVariables(e);
                        default:
                            return !1
                    }
                },
                validFirstColumnVariable: function (e) {
                    return "y" !== e && "r" !== e && "theta" !== e && !e.match(/y_(\d+)/)
                },
                complicatedPolarImplicit: function (e, t) {
                    return "theta" === e || "r" === e && 1 !== t
                },
                constantGraphMode: function (e) {
                    return "x" === e ? t.X : "r" === e ? t.POLAR : t.Y
                },
                graphMode: function (e, n) {
                    return "y" === n ? t.X : "x" === e ? t.X : "r" === e && "theta" === n ? t.POLAR : t.Y
                },
                tableableAsConstant: function (e) {
                    return "x" !== e && ("r" !== e && "theta" !== e)
                },
                implicitIndependent: function (e) {
                    return "x"
                },
                implicitDependency: function (e) {
                    return "y" === e ? "x" : "theta" === e ? "r" : "y"
                },
                graphableAsConstant: function (e) {
                    return "y" === e || "x" === e || "r" === e
                },
                graphableAsBareIdentifier: function (e) {
                    return "x" === e
                },
                disabledFeatures: function () {
                    return []
                }
            };
        return r
    }),
    define("math/frameFourFunction", ["require"], function (e) {
        return {
            frame: {},
            restrictedFunctionsFrame: {}
        }
    }),
    define("math/frameScientific", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function (e) {
        function t(e, t) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (!t.hasOwnProperty(r))
                    throw new Error("Programming Error: key '" + r + "' does not exist in table. Must be one of:\n" + Object.keys(t).join("\n"))
            }
        }
        function n(e, n, r, i) {
            t(n, i),
                t(r, i);
            for (var o = 0; o < n.length; o++) {
                var s = n[o];
                r.indexOf(s) === -1 && (e[s] = i[s])
            }
        }
        var r = e("math/builtinconstants")
            , i = e("math/parsenode/builtinfunction")
            , o = {}
            , s = ["pi", "e", "trigAngleMultiplier"]
            , a = ["sqrt", "nthroot", "abs", "ln", "sin", "cos", "tan", "log", "arcsin", "arccos", "arctan", "mean", "round", "stdev", "stdevp", "nCr", "nPr", "exp", "factorial"];
        return n(o, s, [], r),
            n(o, a, [], i),
            {
                frame: o,
                restrictedFunctionsFrame: o
            }
    }),
    define("math/frameSingleExpressionScientific", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function (e) {
        function t(e, t) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (!t.hasOwnProperty(r))
                    throw new Error("Programming Error: key '" + r + "' does not exist in table. Must be one of:\n" + Object.keys(t).join("\n"));
            }
        }
        function n(e, n, r, i) {
            t(n, i),
                t(r, i);
            for (var o = 0; o < n.length; o++) {
                var s = n[o];
                r.indexOf(s) === -1 && (e[s] = i[s])
            }
        }
        var r = e("math/builtinconstants")
            , i = e("math/parsenode/builtinfunction")
            , o = {}
            , s = ["pi", "e", "trigAngleMultiplier"]
            , a = ["sqrt", "nthroot", "abs", "ln", "sin", "cos", "tan", "log", "arcsin", "arccos", "arctan", "exp", "factorial"];
        return n(o, s, [], r),
            n(o, a, [], i),
            {
                frame: o,
                restrictedFunctionsFrame: o
            }
    }),
    define("math/frameGraphing", ["require", "math/builtinconstants", "math/parsenode/builtinfunction"], function (e) {
        var t, n = e("math/builtinconstants"), r = e("math/parsenode/builtinfunction"), i = ["csc", "sec", "cot", "arccsc", "arcsec", "arccot", "csch", "sech", "coth", "arccsch", "arcsech", "arccoth", "mad", "cov"], o = {}, s = {};
        for (t in n)
            n.hasOwnProperty(t) && (o[t] = n[t],
                s[t] = n[t]);
        for (t in r)
            r.hasOwnProperty(t) && (o[t] = r[t],
                i.indexOf(t) === -1 && (s[t] = r[t]));
        return {
            frame: o,
            restrictedFunctionsFrame: s
        }
    }),
    define("math/context", ["require", "console", "pjs", "underscore", "./plotter", "parser", "math/parsenode/constant", "math/parsenode/image", "math/parsenode/table", "math/parsenode/tablecolumn", "math/parsenode/freevariable", "math/parsenode/builtinfunction", "math/finddependencyorder", "math/errormsg", "graphing/graphmode", "worker/workerconfig", "./findIntersections", "./interpolatedlabel", "math/types", "math/policyFourFunction", "math/policyScientific", "math/policySingleExpressionScientific", "math/policyGraphing", "math/frameFourFunction", "math/frameScientific", "math/frameSingleExpressionScientific", "math/frameGraphing"], function (e) {
        function t(e, t, n) {
            n || (n = []);
            var r;
            return r = t ? w[e].restrictedFunctionsFrame : w[e].frame,
                n.indexOf("sqrt") !== -1 && (r = Object.create(r),
                    r.sqrt = p.sqrt),
                r
        }
        var n = e("console")
            , r = e("pjs")
            , i = e("underscore")
            , o = e("./plotter").default
            , s = e("parser")
            , a = e("math/parsenode/constant")
            , c = e("math/parsenode/image")
            , l = e("math/parsenode/table")
            , u = e("math/parsenode/tablecolumn")
            , d = e("math/parsenode/freevariable")
            , p = e("math/parsenode/builtinfunction")
            , h = e("math/finddependencyorder")
            , f = e("math/errormsg")
            , m = e("graphing/graphmode")
            , g = e("worker/workerconfig")
            , y = e("./findIntersections").findIntersections
            , v = e("./interpolatedlabel")
            , b = e("math/types")
            , x = {
                fourFunction: e("math/policyFourFunction"),
                scientific: e("math/policyScientific"),
                singleExpressionScientific: e("math/policySingleExpressionScientific"),
                graphing: e("math/policyGraphing")
            }
            , w = {
                fourFunction: e("math/frameFourFunction"),
                scientific: e("math/frameScientific"),
                singleExpressionScientific: e("math/frameSingleExpressionScientific"),
                graphing: e("math/frameGraphing")
            };
        return r(function (e) {
            function r(e) {
                return "ans" !== e.slice(0, 3)
            }
            function p(e, t) {
                var n, i = e.multiplyDefined, o = e.cyclicallyDefined;
                for (n in i)
                    i.hasOwnProperty(n) && (t[n] = f.multiplyDefined(n));
                for (n in o)
                    o.hasOwnProperty(n) && (t[n] = f.cycle(o[n].filter(r)))
            }
            e.triggerGraphComputed = function () { }
                ,
                e.triggerStatusChange = function () { }
                ,
                e.triggerRemoveGraph = function () { }
                ,
                e.triggerRender = function () { }
                ,
                e.triggerRenderSlowly = function () { }
                ,
                e.triggerDidAddStatement = function () { }
                ,
                e.triggerDidRemoveStatement = function () { }
                ,
                e.triggerDidUpdateIntersections = function () { }
                ,
                e.init = function () {
                    this.statements = {},
                        this.analysis = {},
                        this.currentStatus = {},
                        this.currentLabel = {},
                        this.unanalyzedIds = {},
                        this.unpublishedIds = {},
                        this.intersectIds = {},
                        this.setEvaluationMode("graphing"),
                        this.setRestrictedFunctions(!1),
                        this.setFunctionDefinition(!0),
                        this.invalidate()
                }
                ,
                e.processChangeSet = function (e) {
                    e.isCompleteState && (this.invalidate(),
                        this.statements = {},
                        this.currentLabel = {}),
                        e.viewState && this.setViewState(e.viewState),
                        e.hasOwnProperty("degreeMode") && this.setDegreeMode(e.degreeMode),
                        e.hasOwnProperty("evaluationMode") && this.setEvaluationMode(e.evaluationMode),
                        e.hasOwnProperty("additionalFunctions") && this.setAdditionalFunctions(e.additionalFunctions),
                        e.hasOwnProperty("restrictedFunctions") && this.setRestrictedFunctions(e.restrictedFunctions),
                        e.hasOwnProperty("functionDefinition") && this.setFunctionDefinition(e.functionDefinition),
                        e.hasOwnProperty("pointsOfInterest") && this.setPointsOfInterest(e.pointsOfInterest),
                        e.hasOwnProperty("plotSingleVariableImplicitEquations") && this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations),
                        e.hasOwnProperty("intersectIds") && (this.intersectIds = e.intersectIds),
                        this.processStatements(e),
                        this.updateAnalysis(),
                        e.hasOwnProperty("intersectId") && this._updateIntersections(e.intersectId),
                        this._publishAllStatuses(),
                        this._computeAllLabels(),
                        this._graphAllChanged(),
                        this.unpublishedIds = {},
                        e.isCompleteState ? this.triggerRenderSlowly() : this.triggerRender()
                }
                ,
                e.processStatements = function (e) {
                    var t;
                    if (e.statements)
                        for (var n in e.statements) {
                            var r = e.statements[n];
                            if (null === r) {
                                if (!e.isCompleteState && this.statements.hasOwnProperty(n) && (t = this.statements[n].getAllIds()),
                                    this.removeStatement(n),
                                    !e.isCompleteState && t) {
                                    for (var i = 0; i < t.length; i++)
                                        this.triggerRemoveGraph(t[i]);
                                    this.triggerDidRemoveStatement(n)
                                }
                            } else
                                this.addStatement(r),
                                    e.isCompleteState || this.triggerDidAddStatement(r)
                        }
                }
                ,
                e.setViewState = function (e) {
                    if (!i.isEqual(e, this.viewState)) {
                        this.viewState = e;
                        for (var t in this.statements)
                            this.statements.hasOwnProperty(t) && (this.unpublishedIds[t] = !0)
                    }
                }
                ,
                e.getViewState = function () {
                    if (this.viewState) {
                        var e = Object.create(this.viewState);
                        return this.parent_frame && this.parent_frame.trigAngleMultiplier ? e.trigAngleMultiplier = this.parent_frame.trigAngleMultiplier.constantValue : e.trigAngleMultiplier = 1,
                            e
                    }
                }
                ,
                e.setDegreeMode = function (e) {
                    this.use_degrees = e,
                        this.invalidate()
                }
                ,
                e.setEvaluationMode = function (e) {
                    this.evaluationMode = e,
                        this.policy = x[e],
                        this.invalidate()
                }
                ,
                e.setAdditionalFunctions = function (e) {
                    this.additionalFunctions = e,
                        this.invalidate()
                }
                ,
                e.setRestrictedFunctions = function (e) {
                    this.restrictedFunctions = e,
                        this.invalidate()
                }
                ,
                e.setFunctionDefinition = function (e) {
                    this.functionDefinition = e,
                        this.invalidate()
                }
                ,
                e.setPointsOfInterest = function (e) {
                    e !== g.pointsOfInterest && (g.pointsOfInterest = e,
                        this.invalidate())
                }
                ,
                e.setPlotSingleVariableImplicitEquations = function (e) {
                    e !== g.plotSingleVariableImplicitEquations && (g.plotSingleVariableImplicitEquations = e,
                        this.invalidate())
                }
                ,
                e._publishAllStatuses = function () {
                    var e = {}
                        , t = this.currentStatus;
                    this.currentStatus = {};
                    for (var n in this.unpublishedIds)
                        if (this.analysis.hasOwnProperty(n)) {
                            var r = this.analysis[n].evaluationState;
                            JSON.stringify(r) !== JSON.stringify(t[n]) && (e[n] = r),
                                this.currentStatus[n] = r
                        }
                    this.triggerStatusChange(e)
                }
                ,
                e._computeAllLabels = function () {
                    for (var e in this.currentLabel) {
                        var t = this.statements[e];
                        if (t) {
                            var n = t.tryGetConcreteTree(this.frame)
                                , r = 1;
                            n.valueType === b.ListOfPoint && (r = n.args.length);
                            for (var o = [], s = 0; s < r; s++)
                                o.push(v.interpolate(this.currentLabel[e], this.frame, s));
                            i.isEqual(o, t.computedLabels) || (t.computedLabels = o,
                                this.unpublishedIds[e] = !0)
                        }
                    }
                }
                ,
                e._graphAllChanged = function () {
                    var e = this.getViewState();
                    if (o.validateViewState(e)) {
                        for (var t in this.unpublishedIds)
                            if (this.analysis.hasOwnProperty(t)) {
                                var n = this.analysis[t];
                                if (n.rawTree.isTable)
                                    for (var r = n.graph(e), s = n.rawTree.getAllIds(), a = 0; a < s.length; a++)
                                        r[s[a]] ? this.triggerGraphComputed(s[a], r[s[a]]) : this.triggerRemoveGraph(s[a]);
                                else
                                    n.evaluationState.is_graphable && (n.rawTree.userData.shouldGraph || n.rawTree.userData.showLabel) ? (this.triggerGraphComputed(t, n.graph(e)),
                                        this.intersectIds.hasOwnProperty(t) && this._updateIntersections(t)) : this.triggerRemoveGraph(t)
                            }
                        if (i.keys(this.unpublishedIds).length)
                            for (var c in this.intersectIds)
                                this.unpublishedIds.hasOwnProperty(c) || this.intersectIds.hasOwnProperty(c) && this._updateIntersections(c)
                    }
                }
                ,
                e._updateIntersections = function (e) {
                    if (this.viewState) {
                        if (!this.analysis[e] || !this.analysis[e].shouldIntersect())
                            return void this.triggerDidUpdateIntersections(e, []);
                        var t = y(this.analysis, this.viewState, e);
                        this.triggerDidUpdateIntersections(e, t)
                    }
                }
                ,
                e.getDisabledFeatures = function () {
                    var e, t = this.policy.disabledFeatures();
                    e = this.functionDefinition === !1 ? t.concat("FunctionDefinition") : t;
                    var n = this.additionalFunctions || [];
                    return e = e.filter(function (e) {
                        return ("Exponent" !== e || n.indexOf("exponent") === -1) && ("PercentOf" !== e || n.indexOf("percent") === -1)
                    }
                        .bind(this))
                }
                ,
                e.addStatement = function (e) {
                    if (e) {
                        var t = e.id;
                        this.markDirty(t);
                        var n = {
                            index: this.policy.ansEnabled() ? e.index : void 0,
                            disabledFeatures: this.getDisabledFeatures()
                        };
                        switch (e.type) {
                            case "table":
                                var r = [];
                                this.statements.hasOwnProperty(t) && (r = this.statements[t].getAllIds()),
                                    e.shouldGraph = !0;
                                for (var i, o, d, p = e.columns, h = [], f = 0, m = 0; m < p.length; m++)
                                    f = Math.max(p[m].values.length, f);
                                for (var g = 0; g < p.length; g++) {
                                    i = s.parse(p[g].latex, n),
                                        o = [];
                                    for (var y = -1, b = 0; b < p[g].values.length; b++)
                                        p[g].values[b].replace(/\\space/g, "").match(/\S/) ? (o.push(s.parse(p[g].values[b], n)),
                                            y = b) : o.push(a(NaN));
                                    o = o.slice(0, y + 1),
                                        d = u(i, f, o),
                                        d.id = p[g].id,
                                        d.header && (d.header.userData = p[g]),
                                        h.push(d)
                                }
                                this.statements[t] = l(h);
                                var x = this
                                    , w = this.statements[t].getAllIds();
                                r.forEach(function (e) {
                                    w.indexOf(e) === -1 && x.triggerRemoveGraph(e)
                                });
                                break;
                            case "image":
                                var E = "-\\trigAngleMultiplier*\\arctan(\\sin(" + e.angle + "),\\cos(" + e.angle + "))";
                                this.statements[t] = c({
                                    center: s.parse(e.center, n),
                                    radianAngle: s.parse(E, n),
                                    width: s.parse(e.width, n),
                                    height: s.parse(e.height, n)
                                });
                                break;
                            default:
                                this.statements[t] = s.parse(e.latex, n)
                        }
                        if (this.statements[t].userData = e,
                            e.label) {
                            var _ = this.currentLabel[t];
                            _ && _.raw === e.label || (this.currentLabel[t] = v.parse(e.label))
                        } else
                            delete this.currentLabel[t];
                        this.markClean(e.id),
                            this.markDirty(e.id)
                    }
                }
                ,
                e.removeStatement = function (e) {
                    if (this.statements.hasOwnProperty(e)) {
                        var t = this.statements[e];
                        if (this.markDirty(e),
                            t.isTable) {
                            var n = this;
                            t.getAllIds().forEach(function (e) {
                                n.triggerRemoveGraph(e)
                            })
                        } else
                            this.triggerRemoveGraph(e);
                        delete this.currentLabel[e],
                            delete this.statements[e]
                    }
                }
                ,
                e.invalidate = function () {
                    for (var e in this.statements)
                        this.statements.hasOwnProperty(e) && this.markDirty(e, {});
                    this.currentStatus = {},
                        this.parent_frame = Object.create(t(this.evaluationMode, this.restrictedFunctions, this.additionalFunctions)),
                        this.parent_frame.trigAngleMultiplier = a(this.use_degrees ? Math.PI / 180 : 1),
                        this.frame = Object.create(this.parent_frame),
                        this.lastFrame = Object.create(this.parent_frame),
                        this.regressionFrame = Object.create(this.parent_frame)
                }
                ,
                e.buildSymbolToExpressionDirtyMap = function () {
                    var e, t, n = {};
                    for (var r in this.statements)
                        if (this.statements.hasOwnProperty(r)) {
                            var i = this.statements[r].getDependencies();
                            for (e = 0; e < i.length; e++)
                                t = i[e],
                                    n[t] || (n[t] = []),
                                    n[t].push(r);
                            var o = this.statements[r].getExports();
                            for (e = 0; e < o.length; e++)
                                t = o[e],
                                    n[t] || (n[t] = []),
                                    n[t].push(r)
                        }
                    return n
                }
                ,
                e.markDirty = function (e, t) {
                    if (this.statements[e] && !this.unanalyzedIds[e]) {
                        t || (t = this.buildSymbolToExpressionDirtyMap()),
                            this.unanalyzedIds[e] = !0,
                            this.unpublishedIds[e] = !0,
                            delete this.analysis[e];
                        for (var n = this.statements[e], r = n.getLegalExports(this.policy), i = 0; i < r.length; i++)
                            this.markSymbolDirty(r[i], t);
                        if (n.isRegression) {
                            var o = this.lastFrame;
                            this.invalidate(),
                                this.lastFrame = o
                        }
                    }
                }
                ,
                e.markSymbolDirty = function (e, t) {
                    delete this.frame[e],
                        delete this.regressionFrame[e];
                    var n = t[e];
                    if (n)
                        for (var r = 0; r < n.length; r++)
                            this.markDirty(n[r], t)
                }
                ,
                e.markClean = function (e) {
                    delete this.unanalyzedIds[e]
                }
                ,
                e.getFrame = function () {
                    return this.updateAnalysis(),
                        this.frame
                }
                ,
                e.getAnalysis = function () {
                    return this.updateAnalysis(),
                        this.analysis
                }
                ,
                e.getStatus = function (e) {
                    if (this.updateAnalysis(),
                        this.analysis[e])
                        return this.analysis[e].status
                }
                ,
                e.getEvaluationState = function (e) {
                    if (this.updateAnalysis(),
                        this.analysis[e])
                        return this.analysis[e].evaluationState
                }
                ,
                e._updateRegressions = function (e) {
                    var t, n = this.frame, r = this.lastFrame, i = this.regressionFrame, o = [];
                    for (t in e)
                        e.hasOwnProperty(t) && e[t].isRegression && o.push(t);
                    var s = this;
                    o.sort(function (e, t) {
                        var n = s.statements[e].userData && s.statements[e].userData.residualVariable
                            , r = s.statements[t].userData && s.statements[t].userData.residualVariable;
                        return n && !r ? -1 : r && !n ? 1 : 0
                    });
                    var a = h(this.policy, e, o);
                    p(a, i);
                    for (var c = a.resolved, l = {}, u = 0; u < c.length; u++)
                        if (t = c[u],
                            this.statements[t].isRegression)
                            this.analysis[t] = e[t].analyze(this.policy, i, n, r, l),
                                this.analysis[t].exportTo(this.policy, n),
                                delete e[t];
                        else {
                            var d = e[t].tryGetConcreteTree(i);
                            e[t].exportTo(this.policy, d, i),
                                l[t] = {
                                    rawTree: e[t],
                                    concreteTree: d
                                }
                        }
                }
                ,
                e.updateAnalysis = function () {
                    var e, t = {};
                    for (e in this.unanalyzedIds)
                        this.unanalyzedIds.hasOwnProperty(e) && this.statements[e] && (t[e] = this.statements[e]);
                    "graphing" === this.evaluationMode && this._updateRegressions(t);
                    var n = this.analysis
                        , r = this.frame
                        , i = h(this.policy, t);
                    p(i, r);
                    for (var o = i.resolved, s = 0; s < o.length; s++)
                        switch (e = o[s],
                        this.evaluationMode) {
                            case "fourFunction":
                                n[e] = this.statements[e].analyzeFourFunction(this.policy, r, n),
                                    n[e].exportTo(this.policy, r);
                                break;
                            case "scientific":
                                n[e] = this.statements[e].analyzeScientific(this.policy, r, n),
                                    n[e].exportTo(this.policy, r);
                                break;
                            case "singleExpressionScientific":
                                n[e] = this.statements[e].analyzeSingleExpressionScientific(this.policy, r, n),
                                    n[e].exportTo(this.policy, r);
                                break;
                            case "graphing":
                                if (r.r) {
                                    var a = Object.create(r);
                                    if (a.r = d("r"),
                                        n[e] = this.statements[e].analyze(this.policy, a, n),
                                        n[e].getGraphMode() === m.POLAR) {
                                        n[e].exportTo(this.policy, r);
                                        continue
                                    }
                                }
                                n[e] = this.statements[e].analyze(this.policy, r, n),
                                    n[e].exportTo(this.policy, r)
                        }
                    this.unanalyzedIds = {},
                        this.lastFrame = Object.create(this.parent_frame);
                    for (var c in r)
                        r.hasOwnProperty(c) && (this.lastFrame[c] = r[c])
                }
                ,
                e.evaluateOnce = function (e) {
                    return n.log("Deprecated console.evaluateOnce - this should not run in production code"),
                        this.analysis[e].concreteTree.constantValue
                }
                ,
                e.compile = function (e) {
                    return n.log("Deprecated console.compile - this should not run in production code"),
                        this.analysis[e].concreteTree.getCompiledFunction()
                }
                ,
                e.evalStrings = function (e) {
                    return n.log("Deprecated console.evalStrings - this should not run in production code"),
                        this.analysis[e].concreteTree.getEvalStrings()
                }
        })
    }),
    define("worker/workercore", ["require", "math/context", "math/functions"], function (e) {
        var t = e("math/context")
            , n = e("math/functions");
        return function (e) {
            var r = t();
            return r.triggerGraphComputed = function (t, r) {
                n.dehydrateGraphData(r),
                    e("graphComputed", {
                        id: t,
                        graphData: r
                    })
            }
                ,
                r.triggerDidUpdateIntersections = function (t, n) {
                    e("updateIntersections", {
                        id: t,
                        intersections: n
                    })
                }
                ,
                r.triggerRender = function () {
                    e("render")
                }
                ,
                r.triggerRenderSlowly = function () {
                    e("renderSlowly")
                }
                ,
                r.triggerRemoveGraph = function (t) {
                    e("removeGraph", t)
                }
                ,
                r.triggerStatusChange = function (t) {
                    e("statusChange", t)
                }
                ,
                {
                    processChangeSet: function (t) {
                        r.processChangeSet(t),
                            e("processChangeSet", t)
                    }
                }
        }
    }),
    define("worker/fakeworker", ["require", "worker/workercore"], function (e) {
        var t = e("worker/workercore");
        return function (e) {
            function n(t, n) {
                e({
                    type: t,
                    payload: n
                })
            }
            var r = {}
                , i = t(n);
            return r.postMessage = function (e) {
                setTimeout(function () {
                    i.processChangeSet(e)
                }, 0)
            }
                ,
                r
        }
    }),
    define("lib/urlparser", ["require"], function (e) {
        var t = {
            getParameter: function (e) {
                return decodeURIComponent((new RegExp("[?|&]" + e + "=([^&;]+?)(&|#|;|$)").exec(location.search) || [void 0, ""])[1].replace(/\+/g, "%20")) || null
            }
        };
        return t
    }),
    define("worker/workerpool", ["require", "console", "./create_worker_url", "pjs", "underscore_model", "./fakeworker", "underscore", "lib/urlparser"], function (e) {
        function t(e) {
            return u ? function (t) {
                d = Math.max(Date.now(), d) + u,
                    setTimeout(e, d - Date.now(), t)
            }
                : e
        }
        var n = e("console")
            , r = e("./create_worker_url")
            , i = e("pjs")
            , o = e("underscore_model")
            , s = e("./fakeworker")
            , a = e("underscore")
            , c = e("lib/urlparser")
            , l = c.getParameter("workerThrottle")
            , u = parseInt(l, 10)
            , d = 0
            , p = i(o, function (e, i) {
                e.init = function (e) {
                    i.init.call(this),
                        this.workers = [],
                        this.maxWorkers = e,
                        this.workerURL = r()
                }
                    ,
                    e.allowedToSpawnWorker = function () {
                        return this.workerURL && this.workers.length < this.maxWorkers
                    }
                    ,
                    e.killWorker = function (e) {
                        var t = a.indexOf(this.workers, e);
                        t !== -1 && (e.terminate(),
                            this.workers = a.without(this.workers, e),
                            a.shuffle(a.values(e.__connections)).forEach(function (e) {
                                e && e.onWorkerKilled && e.onWorkerKilled()
                            }))
                    }
                    ,
                    e.spawnWorker = function () {
                        try {
                            var e = new Worker(this.workerURL);
                            return e.__connections = {},
                                e.__isFake = !1,
                                e.onerror = function (e) {
                                    n.log(e)
                                }
                                ,
                                e.addEventListener("message", t(function (t) {
                                    var n = t.data;
                                    if ((!n || !n.log) && n && n.connectionId) {
                                        var r = e.__connections[n.connectionId];
                                        r && r.onResponse(n.originalMessage)
                                    }
                                })),
                                this.workers.push(e),
                                e
                        } catch (e) {
                            return null
                        }
                    }
                    ,
                    e.spawnFakeWorker = function () {
                        var e = s(t(function (t) {
                            a.values(e.__connections)[0].onResponse(t)
                        }));
                        return e.__isFake = !0,
                            e.__connections = {},
                            e
                    }
                    ,
                    e.findLeastUsedWorker = function () {
                        var e = function (e) {
                            return a.size(e.__connections)
                        }
                            , t = a.sortBy(this.workers, e)[0];
                        return t
                    }
                    ,
                    e.allocateWorker = function () {
                        var e = null;
                        return this.allowedToSpawnWorker() && (e = this.spawnWorker()),
                            e || (e = this.findLeastUsedWorker()),
                            e || (e = this.spawnFakeWorker()),
                            e
                    }
            });
        return p
    }),
    define("worker/workerpoolconnection", ["require", "pjs", "underscore_model"], function (e) {
        var t = e("pjs")
            , n = e("underscore_model")
            , r = t(n, function (e, t) {
                e.init = function (e) {
                    t.init.call(this),
                        this.workerPool = e,
                        this.worker = e.allocateWorker(),
                        this.worker.__connections[this.guid] = this
                }
                    ,
                    e.destroy = function () {
                        this.sendMessage({
                            type: "destroy"
                        }),
                            delete this.worker.__connections[this.guid]
                    }
                    ,
                    e.killWorker = function () {
                        this.worker.__isFake || this.workerPool.killWorker(this.worker)
                    }
                    ,
                    e.onWorkerKilled = function () { }
                    ,
                    e.onResponse = function (e) { }
                    ,
                    e.sendMessage = function (e) {
                        this.worker.__isFake ? this.worker.postMessage(e) : this.worker.postMessage({
                            connectionId: this.guid,
                            originalMessage: e
                        })
                    }
            });
        return r
    }),
    define("main/evaluator", ["require", "math/functions", "worker/workerpool", "worker/workerpoolconnection", "pjs", "underscore_model", "lib/deepCopy"], function (e) {
        var t = e("math/functions")
            , n = e("worker/workerpool")
            , r = e("worker/workerpoolconnection")
            , i = e("pjs")
            , o = e("underscore_model")
            , s = e("lib/deepCopy").default
            , a = 4e3
            , c = i(o, function (e, i) {
                e.triggerStatusChange = function (e) { }
                    ,
                    e.triggerGraphData = function (e) { }
                    ,
                    e.triggerRender = function () { }
                    ,
                    e.triggerRenderSlowly = function () { }
                    ,
                    e.init = function (e) {
                        i.init.call(this),
                            this.__state = {},
                            this.changeSet = null,
                            this.cumulativeChangeSet = {},
                            this.clearJobTimer(),
                            this.syncId = 1,
                            this.__addedGraphsBuffer = {},
                            this.__removedGraphsBuffer = {},
                            this.__intersectionsBuffer = {},
                            e || (e = n()),
                            this.workerPool = e,
                            this.createWorkerPoolConnection(),
                            this.syncRequests = []
                    }
                    ,
                    e.clearBuffers = function () {
                        this.__addedGraphsBuffer = {},
                            this.__removedGraphsBuffer = {},
                            this.__intersectionsBuffer = {}
                    }
                    ,
                    e.getGraphDataFromBuffer = function () {
                        return {
                            addedGraphs: this.__addedGraphsBuffer,
                            removedGraphs: this.__removedGraphsBuffer,
                            intersections: this.__intersectionsBuffer
                        }
                    }
                    ,
                    e.destroy = function () {
                        this.workerPoolConnection && (this.workerPoolConnection.onResponse = function () { }
                            ,
                            this.workerPoolConnection.onWorkerKilled = function () { }
                            ,
                            this.workerPoolConnection.destroy())
                    }
                    ,
                    e.createWorkerPoolConnection = function () {
                        this.workerPoolConnection && (this.workerPoolConnection.onResponse = function () { }
                            ,
                            this.workerPoolConnection.onWorkerKilled = function () { }
                        ),
                            this.workerPoolConnection = r(this.workerPool);
                        var e = this;
                        this.workerPoolConnection.onResponse = function (t) {
                            e.isSuspended() && "processChangeSet" !== t.type || e.listeners[t.type].call(e, t.payload)
                        }
                            ,
                            this.workerPoolConnection.onWorkerKilled = function () {
                                e.createWorkerPoolConnection(),
                                    e.resume(),
                                    e.hasJobInWorker() ? (e.changeSet = s(e.cumulativeChangeSet),
                                        e.__state.changed = !0,
                                        e.__state.droppedMessage = !0,
                                        e.clearJobTimer()) : (e.changeSet = s(e.cumulativeChangeSet),
                                            e.__state.changed = !1),
                                    e.processChangeSet()
                            }
                    }
                    ,
                    e.listeners = {},
                    e.listeners.processChangeSet = function (e) {
                        for (var t = e.syncId; this.syncRequests.length && this.syncRequests[0].id <= t;) {
                            var n = this.syncRequests.shift();
                            n.callback()
                        }
                        this.resume(),
                            this.__state.droppedMessage = !1,
                            this.clearJobTimer(),
                            this._processChangeSet()
                    }
                    ,
                    e.listeners.removeGraph = function (e) {
                        delete this.__addedGraphsBuffer[e],
                            delete this.__intersectionsBuffer[e],
                            this.__removedGraphsBuffer[e] = !0
                    }
                    ,
                    e.listeners.graphComputed = function (e) {
                        t.rehydrateGraphData(e.graphData),
                            delete this.__removedGraphsBuffer[e.id],
                            this.__addedGraphsBuffer[e.id] = e.graphData
                    }
                    ,
                    e.listeners.updateIntersections = function (e) {
                        this.__intersectionsBuffer[e.id] = e.intersections
                    }
                    ,
                    e.listeners.statusChange = function (e) {
                        this.triggerStatusChange(e)
                    }
                    ,
                    e.listeners.render = function () {
                        this.triggerGraphData(this.getGraphDataFromBuffer()),
                            this.clearBuffers(),
                            this.triggerRender()
                    }
                    ,
                    e.listeners.renderSlowly = function () {
                        this.triggerGraphData(this.getGraphDataFromBuffer()),
                            this.clearBuffers(),
                            this.triggerRenderSlowly()
                    }
                    ,
                    e.isSuspended = function () {
                        return this.__isSuspended
                    }
                    ,
                    e.suspend = function () {
                        this.__isSuspended = !0
                    }
                    ,
                    e.resume = function () {
                        this.__isSuspended = !1
                    }
                    ,
                    e.clearJobTimer = function () {
                        this.__jobStartTime = -1
                    }
                    ,
                    e.startJobTimer = function () {
                        this.__jobStartTime = (new Date).getTime()
                    }
                    ,
                    e.hasJobInWorker = function () {
                        return this.__jobStartTime !== -1
                    }
                    ,
                    e.getJobElapsedTime = function () {
                        return this.hasJobInWorker() ? (new Date).getTime() - this.__jobStartTime : NaN
                    }
                    ,
                    e.processChangeSet = function () {
                        this.__processChangeSetRequested = !0
                    }
                    ,
                    e.tick = function () {
                        this._processChangeSet()
                    }
                    ,
                    e._processChangeSet = function () {
                        if (this.__processChangeSetRequested) {
                            var e = this.getJobElapsedTime() >= a;
                            if (this.__state.droppedMessage && e)
                                return void this.workerPoolConnection.killWorker();
                            if (this.__state.changed && this.changeSet)
                                if (this.hasJobInWorker())
                                    this.changeSet.isCompleteState && e && this.workerPoolConnection.killWorker();
                                else {
                                    var t = this.changeSet;
                                    this.changeSet = null,
                                        this.__state.changed = !1,
                                        this.startJobTimer(),
                                        this.workerPoolConnection.sendMessage(t),
                                        this.__processChangeSetRequested = !1
                                }
                        }
                    }
                    ,
                    e.applyToChangeSets = function (e) {
                        this.__state.changed = !0,
                            this.changeSet || (this.changeSet = {}),
                            this.cumulativeChangeSet || (this.cumulativeChangeSet = {}),
                            e(this.changeSet),
                            e(this.cumulativeChangeSet),
                            this.processChangeSet()
                    }
                    ,
                    e.setViewState = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.viewState = s(e)
                        })
                    }
                    ,
                    e.clearStatementsAndStartCompleteState = function () {
                        this.clearBuffers(),
                            this.hasJobInWorker() && this.suspend(),
                            this.applyToChangeSets(function (e) {
                                e.isCompleteState = !0,
                                    delete e.statements
                            }),
                            this.cumulativeChangeSet = s(this.changeSet)
                    }
                    ,
                    e.addStatement = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.statements || (t.statements = {}),
                                t.statements[e.id] = s(e)
                        })
                    }
                    ,
                    e.addStatements = function (e) {
                        for (var t = 0; t < e.length; t++)
                            this.addStatement(e[t])
                    }
                    ,
                    e.removeStatement = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.statements || (t.statements = {}),
                                t.statements[e] = null
                        })
                    }
                    ,
                    e.removeStatements = function (e) {
                        for (var t = 0; t < e.length; t++)
                            this.removeStatement(e[t])
                    }
                    ,
                    e.setIntersectIds = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.intersectIds = s(e)
                        })
                    }
                    ,
                    e.updateIntersections = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.intersectId = e
                        })
                    }
                    ,
                    e.setDegreeMode = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.degreeMode = e
                        })
                    }
                    ,
                    e.setEvaluationMode = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.evaluationMode = e
                        })
                    }
                    ,
                    e.setAdditionalFunctions = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.additionalFunctions = e
                        })
                    }
                    ,
                    e.setRestrictedFunctions = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.restrictedFunctions = e
                        })
                    }
                    ,
                    e.setFunctionDefinition = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.functionDefinition = e
                        })
                    }
                    ,
                    e.setPointsOfInterest = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.pointsOfInterest = e
                        })
                    }
                    ,
                    e.setPlotSingleVariableImplicitEquations = function (e) {
                        this.applyToChangeSets(function (t) {
                            t.plotSingleVariableImplicitEquations = e
                        })
                    }
                    ,
                    e.notifyWhenSynced = function (e) {
                        if (!this.hasJobInWorker() && !this.__processChangeSetRequested)
                            return void setTimeout(e, 0);
                        this.syncId++ ,
                            this.syncRequests.push({
                                id: this.syncId,
                                callback: e
                            });
                        var t = this;
                        this.applyToChangeSets(function (e) {
                            e.syncId = t.syncId
                        })
                    }
            });
        return c
    }),
    define("graphing/viewport", ["require"], function (e) {
        function t(e, t, n, r) {
            this.xmin = void 0 !== e ? e : -10,
                this.xmax = void 0 !== t ? t : 10,
                this.ymin = void 0 !== n ? n : -10,
                this.ymax = void 0 !== r ? r : 10
        }
        return t.prototype.toObject = function () {
            return {
                xmin: this.xmin,
                ymin: this.ymin,
                xmax: this.xmax,
                ymax: this.ymax
            }
        }
            ,
            t.fromObject = function (e) {
                return new t(e.xmin, e.xmax, e.ymin, e.ymax)
            }
            ,
            t.prototype.equals = function (e) {
                return this.xmin === e.xmin && (this.ymin === e.ymin && (this.xmax === e.xmax && this.ymax === e.ymax))
            }
            ,
            t.prototype.isXValid = function () {
                return this.xmin * (1 - 1e-8) + 1e-8 * this.xmax > this.xmin
            }
            ,
            t.prototype.isYValid = function () {
                return this.ymin * (1 - 1e-8) + 1e-8 * this.ymax > this.ymin
            }
            ,
            t.prototype.isValid = function () {
                return this.isXValid() && this.isYValid()
            }
            ,
            t.prototype.isSquare = function (e) {
                return Math.abs(e.height - e.width * this.aspectRatio()) < 1
            }
            ,
            t.prototype.aspectRatio = function () {
                return (this.ymax - this.ymin) / (this.xmax - this.xmin)
            }
            ,
            t.prototype.squareXAxis = function (e) {
                var n = this.xmax - this.xmin
                    , r = this.ymax - this.ymin
                    , i = this.xmin + n / 2
                    , o = r / e.height * e.width;
                return new t(i - o / 2, i + o / 2, this.ymin, this.ymax)
            }
            ,
            t.prototype.squareYAxis = function (e) {
                var n = this.xmax - this.xmin
                    , r = this.ymax - this.ymin
                    , i = this.ymin + r / 2
                    , o = n / e.width * e.height;
                return new t(this.xmin, this.xmax, i - o / 2, i + o / 2)
            }
            ,
            t.prototype.squareCrop = function (e) {
                var t = this.aspectRatio() > e.height / e.width;
                return t ? this.squareYAxis(e) : this.squareXAxis(e)
            }
            ,
            t.prototype.polarDiameter = function () {
                var e = Math.abs(this.xmax)
                    , t = Math.abs(this.xmin)
                    , n = Math.abs(this.ymax)
                    , r = Math.abs(this.ymin);
                return 1.5 * Math.max(e, t, n, r)
            }
            ,
            t.prototype.largestR = function () {
                return Math.sqrt(Math.pow(Math.max(-this.xmin, this.xmax), 2) + Math.pow(Math.max(-this.ymin, this.ymax), 2))
            }
            ,
            t.prototype.smallestR = function () {
                return this.xmin <= 0 && this.xmax >= 0 && this.ymin <= 0 && this.ymax >= 0 ? 0 : this.xmin <= 0 && this.xmax >= 0 ? Math.min(Math.abs(this.ymin), Math.abs(this.ymax)) : this.ymin <= 0 && this.ymax >= 0 ? Math.min(Math.abs(this.xmin), Math.abs(this.xmax)) : Math.sqrt(Math.pow(Math.max(this.xmin, -this.xmax), 2) + Math.pow(Math.max(this.ymin, -this.ymax), 2))
            }
            ,
            t
    }),
    define("graphing/screen", ["require"], function (e) {
        function t(e, t) {
            return this.width = e,
                this.height = t,
                this
        }
        return t
    }),
    define("graphing/axisarrowmode", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.NONE = "NONE",
            t.POSITIVE = "POSITIVE",
            t.BOTH = "BOTH"
    }),
    define("main/font_sizes", {
        VERY_SMALL: 9,
        SMALL: 12,
        MEDIUM: 16,
        LARGE: 20,
        VERY_LARGE: 24
    }),
    define("graphing/graph-defaults", ["require", "./axisarrowmode"], function (e) {
        var t = e("./axisarrowmode")
            , n = {
                showGrid: !0,
                showXAxis: !0,
                showYAxis: !0,
                xAxisStep: 0,
                yAxisStep: 0,
                xAxisMinorSubdivisions: 0,
                yAxisMinorSubdivisions: 0,
                xAxisArrowMode: t.NONE,
                yAxisArrowMode: t.NONE,
                xAxisLabel: "",
                yAxisLabel: "",
                xAxisNumbers: !0,
                yAxisNumbers: !0,
                polarMode: !1,
                polarNumbers: !0,
                degreeMode: !1,
                squareAxes: !0
            };
        return n
    }),
    define("main/graph_settings", ["require", "pjs", "underscore", "underscore_model", "graphing/axisarrowmode", "main/font_sizes", "console", "graphing/graph-defaults"], function (e) {
        var t = e("pjs")
            , n = e("underscore")
            , r = e("underscore_model")
            , i = e("graphing/axisarrowmode")
            , o = e("main/font_sizes")
            , s = e("console")
            , a = e("graphing/graph-defaults")
            , c = t(r, function (e, t, l) {
                e.init = function () {
                    function e(e, t, n) {
                        function r() {
                            s.setProperty(e, s.projectorMode ? n : t)
                        }
                        s.cloneProperties.push(e),
                            s.observe("projectorMode", r),
                            r()
                    }
                    function n(e, t, n, r, i) {
                        function o() {
                            var o;
                            o = s.projectorMode ? s.highlight ? i : r : s.highlight ? n : t,
                                s.setProperty(e, o)
                        }
                        s.cloneProperties.push(e),
                            s.observe("projectorMode highlight", o),
                            o()
                    }
                    t.init.call(this),
                        this.stateProperties = [],
                        this.cloneProperties = [],
                        this.config = new r;
                    for (var i in a)
                        a.hasOwnProperty(i) && this.addStateProperty(i, a[i]);
                    this.instanceProperties = [],
                        this.addInstanceProperty("fontSize", o.MEDIUM),
                        this.addInstanceProperty("language", "en"),
                        this.addInstanceProperty("projectorMode", !1),
                        this.addInstanceProperty("invertedColors", !1),
                        this.addInstanceProperty("enableTabindex", !0),
                        this.labelHangingColor = "rgba(150,150,150,1)",
                        this.labelNormalColor = "rgba(0,0,0,1)",
                        this.lastChangedAxis = "x";
                    var s = this;
                    e("labelSize", 14, 19),
                        e("majorAxisOpacity", .4, 1),
                        e("minorAxisOpacity", .12, .25),
                        e("axisOpacity", 1, 1),
                        e("axisLineWidth", 1.5, 2),
                        e("axisLineOffset", .25, 0),
                        e("pixelsPerLabel", 80, 120),
                        n("graphLineWidth", 2.5, 3, 5, 6),
                        n("pointLineWidth", 9, 11, 15, 17)
                }
                    ,
                    e.addStateProperty = function (e, t) {
                        this[e] = t,
                            this.stateProperties.push(e),
                            this.cloneProperties.push(e)
                    }
                    ,
                    e.addInstanceProperty = function (e, t) {
                        this[e] = t,
                            this.instanceProperties.push(e)
                    }
                    ,
                    l.fromObject = function (e) {
                        var t = c();
                        return t.cloneProperties.forEach(function (n) {
                            e.hasOwnProperty(n) && t.setProperty(n, e[n])
                        }),
                            t
                    }
                    ,
                    e.registerCallbacks = function (e, t, n) {
                        var r = this;
                        this.stateProperties.forEach(function (t) {
                            r.observe(t, function () {
                                e.redrawAllLayers()
                            })
                        }),
                            this.observe("squareAxes", function () {
                                e.viewportController.enforceSquareAxes()
                            }),
                            this.observe("projectorMode", function () {
                                t.toggleClass("dcg-PROJECTOR-MODE", !!r.projectorMode),
                                    e.redrawAllLayers()
                            }),
                            this.observe("degreeMode", function () {
                                n.setDegreeMode(r.degreeMode)
                            }),
                            this.observe("fontSize", function () {
                                t.css("fontSize", r.fontSize + "px")
                            }),
                            this.observe("invertedColors", function () {
                                t.toggleClass("dcg-inverted-colors", !!r.invertedColors)
                            }),
                            this.observe("enableTabindex", function () {
                                e.redrawAllLayers()
                            }),
                            this.config.observeAndSync("restrictedFunctions", function () {
                                n.setRestrictedFunctions(r.config.restrictedFunctions)
                            }),
                            this.config.observeAndSync("pointsOfInterest", function () {
                                n.setPointsOfInterest(r.config.pointsOfInterest)
                            }),
                            this.config.observeAndSync("plotSingleVariableImplicitEquations", function () {
                                n.setPlotSingleVariableImplicitEquations(r.config.plotSingleVariableImplicitEquations)
                            })
                    }
                    ;
                var u = function (e, t) {
                    var r;
                    switch (e) {
                        case "xAxisMinorSubdivisions":
                        case "yAxisMinorSubdivisions":
                            r = Math.round(Math.min(Math.max(0, t), 5)),
                                t !== r && s.warn("minorSubdivisions must be an integer between 0 and 5. You provided " + t + ", which we changed to " + r + ".");
                            break;
                        case "degreeMode":
                        case "projectorMode":
                        case "showGrid":
                        case "showXAxis":
                        case "showYAxis":
                        case "xAxisNumbers":
                        case "yAxisNumbers":
                        case "polarNumbers":
                        case "enableTabindex":
                        case "invertedColors":
                            r = "false" !== t && !!t,
                                t !== r && s.warn(e + " must be a Boolean. You provided " + t + " (" + typeof t + "), which we changed to " + r + " (" + typeof r + ").");
                            break;
                        case "xAxisStep":
                        case "yAxisStep":
                            r = parseFloat(t),
                                isFinite(t) || (r = 0,
                                    s.warn(e + " must be a number. You provided " + t + ", which we changed to " + r + "."));
                            break;
                        case "yAxisMinorSubdivisions":
                            r = Math.round(Math.min(Math.max(0, t), 5)),
                                t !== r && s.warn("minorSubdivisions must be an integer between 0 and 5. You provided " + t + ", which we changed to " + r + ".");
                            break;
                        case "xAxisArrowMode":
                        case "yAxisArrowMode":
                            r = i[t],
                                r !== t && (r = i.NONE,
                                    s.warn("unknown AxisArrowMode. Allowed values are: \n" + n.keys(i).join("\n")));
                            break;
                        case "xAxisLabel":
                        case "yAxisLabel":
                            r = t,
                                "string" != typeof t && (r = "",
                                    s.warn(e + " must be a string. you provided a " + typeof t + "."));
                            break;
                        case "fontSize":
                            r = t,
                                "number" != typeof t && (r = parseInt(r, 10),
                                    s.warn("fontSize must be a number. Attempted to convert " + t + " to " + r + "."));
                            break;
                        case "language":
                            r = t,
                                "string" != typeof t && (r = "",
                                    s.warn(e + " must be a string. you provided a " + typeof t + ".")),
                                window.Desmos.supportedLanguages.indexOf(t) < 0 && "en" !== t && (r = "en",
                                    s.warn(t + " is not currently an available language."));
                            break;
                        default:
                            r = t
                    }
                    return r
                };
                e._validateSettings = function (e) {
                    var t = {}
                        , n = !1;
                    for (var r in e)
                        this.stateProperties.indexOf(r) >= 0 || this.instanceProperties.indexOf(r) >= 0 ? t[r] = u(r, e[r]) : (s.warn('Invalid graph setting "' + r + '".'),
                            n = !0);
                    return n && s.warn("Available graph settings are: \n" + this.stateProperties.join("\n")),
                        t
                }
                    ,
                    e.setGraphSettings = function (e) {
                        var t = this._validateSettings(e);
                        for (var n in t)
                            t.hasOwnProperty(n) && this.setProperty(n, t[n])
                    }
            });
        return c
    }),
    define("jquery.disabletextselection", ["require", "jquery"], function (e) {
        var t = e("jquery");
        t.fn.disableTextSelection = function (e) {
            return e && this.each(function () {
                t(this).bind("mousedown touchstart", function () {
                    t(document.activeElement).focusout()
                })
            }),
                this.each(function () {
                    t(this).attr("unselectable", "on").css({
                        "-moz-user-select": "none",
                        "-webkit-user-select": "none",
                        "user-select": "none"
                    }).each(function () {
                        this.onselectstart = function () {
                            return !1
                        }
                    })
                })
        }
    }),
    define("graphing/canvaslayer", ["require", "jquery", "pjs", "browser", "i18n", "jquery.disabletextselection"], function (e) {
        var t = e("jquery")
            , n = e("pjs")
            , r = e("browser")
            , i = e("i18n");
        e("jquery.disabletextselection");
        var o = n(function (e) {
            e.init = function (e) {
                this.grapher = e,
                    this.$ = t("<div class='dcg-graph-outer' role='img'></div>").css("position", "absolute").css("overflow", "hidden").disableTextSelection(r.IS_IE),
                    this.canvas_node = t("<canvas class='dcg-graph-inner'></canvas>").css("position", "relative").css("display", "block").disableTextSelection(r.IS_IE),
                    this.devicePixelRatio = window.devicePixelRatio || 1,
                    this.ctx = this.canvas_node[0].getContext("2d"),
                    this.resize(0, 0),
                    this.$.append(this.canvas_node)
            }
                ,
                e.resize = function (e, t, n) {
                    n = n || this.devicePixelRatio,
                        e === this.width && t === this.height || (this.width = e,
                            this.height = t,
                            this.$.css("width", e + "px").css("height", t + "px"),
                            this.canvas_node.css("width", e + "px").css("height", t + "px").attr("width", e * n).attr("height", t * n),
                            this.ctx = this.canvas_node[0].getContext("2d"),
                            this.ctx.scale(n, n))
                }
                ,
                e.t = function (e, t) {
                    return i.t(e, t, this.grapher.settings.language);
                }
                ,
                e.getAriaLabel = function (e) {
                    var t = "";
                    if (0 === e)
                        return this.t("Empty graph paper.");
                    t = 1 === e ? this.t("Graph paper showing 1 graph.") : this.t("Graph paper showing __count__ graphs.", {
                        count: e
                    });
                    var n = this.grapher.getAudioTrace();
                    if (n) {
                        var i = n.agNavigator.getFirstTraceableSketch({
                            selectAssociatedExpression: !1
                        });
                        null !== i && (t += r.IS_APPLE ? this.t(" Press OPTION+T for audio trace.") : this.t(" Press ALT+T for audio trace."))
                    }
                    return t
                }
                ,
                e.updateAria = function (e, t) {
                    this.$.attr("aria-hidden", !e || !this.grapher.settings.config.graphpaper).attr("tabindex", e && this.grapher.settings.config.graphpaper && this.grapher.settings.enableTabindex && t > 0 ? 0 : -1).attr("aria-label", this.getAriaLabel(t))
                }
                ,
                e.redraw = function () { }
        });
        return o
    }),
    define("loadcss!poi", function () { }),
    define("graphing/clipping", [], function () {
        function e(e) {
            return Math.max(-1e40, Math.min(1e40, e))
        }
        var t = {
            TOP: 1,
            BOTTOM: 2,
            LEFT: 4,
            RIGHT: 8,
            ALL: 15,
            X: 12,
            Y: 3,
            POLAR_RADIAN_EQUALITY: 1,
            POLAR_RADIAN_INEQUALITY: 2,
            POLAR_DEGREE_EQUALITY: 3,
            POLAR_DEGREE_INEQUALITY: 4,
            Y_EQUALS: 5,
            X_EQUALS: 6,
            mapSegmentToCanvas: function (e, n, r, i) {
                var o, s, a, c, l, u = [], d = n.xmin, p = n.ymin, h = n.xmax - n.xmin, f = n.ymax - n.ymin, m = r.width, g = r.height, y = m / h, v = -g / f, b = e.length;
                if (i === t.Y_EQUALS)
                    for (o = 0; o < b; o += 2)
                        s = (e[o] - d) * y - .5,
                            a = (e[o + 1] - p) * v + g - .5,
                            u.push(s, a);
                else if (i === t.X_EQUALS)
                    for (o = 0; o < b; o += 2)
                        s = (e[o + 1] - d) * y - .5,
                            a = (e[o] - p) * v + g - .5,
                            u.push(s, a);
                else if (i === t.POLAR_RADIAN_EQUALITY)
                    for (o = 0; o < e.length; o += 2)
                        c = e[o],
                            l = e[o + 1],
                            s = (l * Math.cos(c) - d) * y - .5,
                            a = (l * Math.sin(c) - p) * v + g - .5,
                            u.push(s, a);
                else if (i === t.POLAR_RADIAN_INEQUALITY)
                    for (o = 0; o < e.length; o += 2)
                        c = e[o],
                            l = e[o + 1],
                            l < 0 && (l = 0),
                            s = (l * Math.cos(c) - d) * y - .5,
                            a = (l * Math.sin(c) - p) * v + g - .5,
                            u.push(s, a);
                else if (i === t.POLAR_DEGREE_EQUALITY)
                    for (o = 0; o < e.length; o += 2)
                        c = e[o] * Math.PI / 180,
                            l = e[o + 1],
                            s = (l * Math.cos(c) - d) * y - .5,
                            a = (l * Math.sin(c) - p) * v + g - .5,
                            u.push(s, a);
                else if (i === t.POLAR_DEGREE_INEQUALITY)
                    for (o = 0; o < e.length; o += 2)
                        c = e[o] * Math.PI / 180,
                            l = e[o + 1],
                            l < 0 && (l = 0),
                            s = (l * Math.cos(c) - d) * y - .5,
                            a = (l * Math.sin(c) - p) * v + g - .5,
                            u.push(s, a);
                return u
            },
            clipStrokeEdges: function (e, n) {
                return t.clipFillEdges(e, n, t.ALL, !0)
            },
            clipFillEdge: function (e, t, n, r) {
                var i, o, s, a, c = [], l = [].push;
                r ? (o = e[0],
                    s = e[1],
                    i = 2,
                    a = t(o, s),
                    a && c.push(o, s)) : (o = e[e.length - 2],
                        s = e[e.length - 1],
                        i = 0,
                        a = t(o, s));
                for (var u = i; u < e.length; u += 2) {
                    var d = o
                        , p = s
                        , h = a;
                    o = e[u],
                        s = e[u + 1],
                        a = t(o, s),
                        (a || h) && (a && h && c.push(o, s),
                            a && !h && (l.apply(c, n(o, s, d, p)),
                                c.push(o, s)),
                            !a && h && l.apply(c, n(d, p, o, s)))
                }
                return c
            },
            clipFillEdges: function (n, r, i, o) {
                var s = r.xmin
                    , a = r.xmax
                    , c = r.ymin
                    , l = r.ymax
                    , u = function (e, t) {
                        return e >= s
                    }
                    , d = function (e, t) {
                        return e <= a
                    }
                    , p = function (e, t) {
                        return t >= c
                    }
                    , h = function (e, t) {
                        return t <= l
                    }
                    , f = function (t, n, r, i) {
                        t = e(t),
                            n = e(n),
                            r = e(r),
                            i = e(i);
                        var o = i - n;
                        return [s, n + o * (s - t) / (r - t)]
                    }
                    , m = function (t, n, r, i) {
                        t = e(t),
                            n = e(n),
                            r = e(r),
                            i = e(i);
                        var o = i - n;
                        return [a, n + o * (a - t) / (r - t)]
                    }
                    , g = function (t, n, r, i) {
                        t = e(t),
                            n = e(n),
                            r = e(r),
                            i = e(i);
                        var o = r - t;
                        return [t + o * (c - n) / (i - n), c]
                    }
                    , y = function (t, n, r, i) {
                        t = e(t),
                            n = e(n),
                            r = e(r),
                            i = e(i);
                        var o = r - t;
                        return [t + o * (l - n) / (i - n), l]
                    }
                    , v = n;
                return i & t.LEFT && (v = t.clipFillEdge(n, u, f, o)),
                    i & t.BOTTOM && (v = t.clipFillEdge(v, p, g, o)),
                    i & t.RIGHT && (v = t.clipFillEdge(v, d, m, o)),
                    i & t.TOP && (v = t.clipFillEdge(v, h, y, o)),
                    v
            },
            clipAllFillEdges: function (e, n) {
                return t.clipFillEdges(e, n, t.ALL, !1)
            },
            computePolarFill: function (e, t, n) {
                var r, i = [], o = e[0], s = o + n, a = [];
                i.push(a);
                for (var c = 0; c < e.length; c += 2) {
                    r = e[c];
                    var l = e[c + 1];
                    if (l < 0 && (l = 0),
                        r >= s) {
                        for (a = [],
                            i.push(a),
                            o = e[c - 2],
                            s = o; r >= s;)
                            s += n;
                        c -= 4
                    } else
                        a.push(r, l)
                }
                if (0 === t)
                    for (c = 0; c < i.length; c++)
                        i[c].push(0, 0);
                else {
                    var u = n / 16
                        , d = t;
                    for (c = 0; c < i.length; c++) {
                        var p = i[c];
                        for (o = p[0],
                            s = p[p.length - 2],
                            r = s; r > o; r -= u)
                            p.push(r, d);
                        p.push(o, d)
                    }
                }
                return i
            },
            computeCartesianFill: function (e, t) {
                return e = e.slice(),
                    e.push(e[e.length - 2], t),
                    e.push(e[0], t),
                    [e]
            }
        };
        return t
    }),
    define("graphing/constants", [], function () {
        return {
            ANIMATE_ZOOM_DURATION: 500,
            DOUBLETAP_ZOOM: 2,
            ZOOM_FACTOR: 1.0625,
            MAX_DOTTED_SEGMENTS: 1e3,
            STROKE_ALPHA: .7,
            HIGHLIGHTED_STROKE_ALPHA: 1,
            FILL_ALPHA: .4,
            POINT_ALPHA: .9,
            HIGHLIGHTED_POINT_ALPHA: .6,
            POLAR_ALPHA: .2,
            POI_ALPHA: .01,
            OFFSCREEN_RENDER_MARGIN: 20
        }
    }),
    define("graphing/dasheddrawer", ["require", "./constants", "math/distance"], function (e) {
        function t(e, t, r) {
            return this.pattern = r,
                this.replen = this.pattern[0] + this.pattern[1],
                null !== t && t / this.replen > n.MAX_DOTTED_SEGMENTS && (this.pattern[0] = t * this.pattern[0] / this.replen / n.MAX_DOTTED_SEGMENTS,
                    this.pattern[1] = t * this.pattern[1] / this.replen / n.MAX_DOTTED_SEGMENTS),
                this.pstate = 0,
                this.dstaccum = 0,
                this.px = null,
                this.py = null,
                this.ctx = e,
                this
        }
        var n = e("./constants")
            , r = e("math/distance");
        return t.getTotalSegmentLength = function (e) {
            if (e.length < 4)
                return 0;
            for (var t = 0, n = e[0], i = e[1], o = 2; o < e.length; o += 2) {
                var s = e[o]
                    , a = e[o + 1];
                t += r.hypot(s - n, a - i),
                    n = s,
                    i = a
            }
            return t
        }
            ,
            t.prototype.start = function (e, t) {
                this.ctx.desmos_batching || this.ctx.beginPath(),
                    this.px = e,
                    this.py = t
            }
            ,
            t.prototype.next = function (e, t) {
                var n = this.pattern[this.pstate]
                    , r = Math.sqrt(Math.pow(e - this.px, 2) + Math.pow(t - this.py, 2));
                if (r > 1e-5) {
                    for (; r + this.dstaccum >= n;) {
                        var i = e - this.px
                            , o = t - this.py
                            , s = n - this.dstaccum;
                        i *= s / r,
                            o *= s / r,
                            0 === this.pstate && (this.ctx.moveTo(this.px, this.py),
                                this.ctx.lineTo(this.px + i, this.py + o)),
                            this.dstaccum = 0,
                            this.px += i,
                            this.py += o,
                            this.pstate = 1 - this.pstate,
                            n = this.pattern[this.pstate],
                            r -= s
                    }
                    0 === this.pstate && (this.ctx.moveTo(this.px, this.py),
                        this.ctx.lineTo(e, t))
                }
                this.px = e,
                    this.py = t,
                    this.dstaccum += r
            }
            ,
            t.prototype.skip = function (e, t) {
                this.px = e,
                    this.py = t
            }
            ,
            t.prototype.close = function () {
                this.ctx.desmos_batching || this.ctx.stroke(),
                    this.pstate = 0,
                    this.dstaccum = 0,
                    this.px = null,
                    this.py = null
            }
            ,
            t
    }),
    define("lib/color-helpers", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            if (e.match(/^#([A-Fa-f0-9]{3})$/g) && (e = "#" + e[1] + e[1] + e[2] + e[2] + e[3] + e[3]),
                !e.match(/^#([A-Fa-f0-9]{6})$/g))
                return e;
            t > 1 && (t = 1),
                t < -1 && (t = -1);
            var n = parseInt(e.slice(1), 16)
                , r = t < 0 ? 0 : 255
                , i = t < 0 ? t * -1 : t
                , o = n >> 16
                , s = n >> 8 & 255
                , a = 255 & n;
            return "#" + (16777216 + 65536 * (Math.round((r - o) * i) + o) + 256 * (Math.round((r - s) * i) + s) + (Math.round((r - a) * i) + a)).toString(16).slice(1)
        }
        function r(e, t) {
            var n = /(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;
            return e.match(n) ? e.replace(n, "$1" + t + "$2") : e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.shadeColor = n,
            t.mutateOpacity = r,
            t.colors = {
                RED: "#c74440",
                BLUE: "#2d70b3",
                GREEN: "#388c46",
                PURPLE: "#6042a6",
                ORANGE: "#fa7e19",
                BLACK: "#000000",
                GRAY: "#aaaaaa"
            }
    }),
    define("expressions/colors", ["require", "lib/color-helpers"], function (e) {
        var t = e("lib/color-helpers").colors
            , n = [t.RED, t.BLUE, t.GREEN, t.PURPLE, t.ORANGE, t.BLACK];
        return {
            all: n,
            RED: t.RED,
            BLUE: t.BLUE,
            GREEN: t.GREEN,
            PURPLE: t.PURPLE,
            ORANGE: t.ORANGE,
            BLACK: t.BLACK
        }
    }),
    define("expressions/styles", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.POINT = "POINT",
            t.OPEN = "OPEN",
            t.CROSS = "CROSS",
            t.SOLID = "SOLID",
            t.DASHED = "DASHED",
            t.DOTTED = "DOTTED"
    }),
    define("lib/named-colors", ["require"], function (e) {
        return {
            aliceblue: [240, 248, 255],
            antiquewhite: [250, 235, 215],
            aqua: [0, 255, 255],
            aquamarine: [127, 255, 212],
            azure: [240, 255, 255],
            beige: [245, 245, 220],
            bisque: [255, 228, 196],
            black: [0, 0, 0],
            blanchedalmond: [255, 235, 205],
            blue: [0, 0, 255],
            blueviolet: [138, 43, 226],
            brown: [165, 42, 42],
            burlywood: [222, 184, 135],
            cadetblue: [95, 158, 160],
            chartreuse: [127, 255, 0],
            chocolate: [210, 105, 30],
            coral: [255, 127, 80],
            cornflowerblue: [100, 149, 237],
            cornsilk: [255, 248, 220],
            crimson: [220, 20, 60],
            cyan: [0, 255, 255],
            darkblue: [0, 0, 139],
            darkcyan: [0, 139, 139],
            darkgoldenrod: [184, 134, 11],
            darkgray: [169, 169, 169],
            darkgreen: [0, 100, 0],
            darkgrey: [169, 169, 169],
            darkkhaki: [189, 183, 107],
            darkmagenta: [139, 0, 139],
            darkolivegreen: [85, 107, 47],
            darkorange: [255, 140, 0],
            darkorchid: [153, 50, 204],
            darkred: [139, 0, 0],
            darksalmon: [233, 150, 122],
            darkseagreen: [143, 188, 143],
            darkslateblue: [72, 61, 139],
            darkslategray: [47, 79, 79],
            darkslategrey: [47, 79, 79],
            darkturquoise: [0, 206, 209],
            darkviolet: [148, 0, 211],
            deeppink: [255, 20, 147],
            deepskyblue: [0, 191, 255],
            dimgray: [105, 105, 105],
            dimgrey: [105, 105, 105],
            dodgerblue: [30, 144, 255],
            firebrick: [178, 34, 34],
            floralwhite: [255, 250, 240],
            forestgreen: [34, 139, 34],
            fuchsia: [255, 0, 255],
            gainsboro: [220, 220, 220],
            ghostwhite: [248, 248, 255],
            gold: [255, 215, 0],
            goldenrod: [218, 165, 32],
            gray: [128, 128, 128],
            green: [0, 128, 0],
            greenyellow: [173, 255, 47],
            grey: [128, 128, 128],
            honeydew: [240, 255, 240],
            hotpink: [255, 105, 180],
            indianred: [205, 92, 92],
            indigo: [75, 0, 130],
            ivory: [255, 255, 240],
            khaki: [240, 230, 140],
            lavender: [230, 230, 250],
            lavenderblush: [255, 240, 245],
            lawngreen: [124, 252, 0],
            lemonchiffon: [255, 250, 205],
            lightblue: [173, 216, 230],
            lightcoral: [240, 128, 128],
            lightcyan: [224, 255, 255],
            lightgoldenrodyellow: [250, 250, 210],
            lightgray: [211, 211, 211],
            lightgreen: [144, 238, 144],
            lightgrey: [211, 211, 211],
            lightpink: [255, 182, 193],
            lightsalmon: [255, 160, 122],
            lightseagreen: [32, 178, 170],
            lightskyblue: [135, 206, 250],
            lightslategray: [119, 136, 153],
            lightslategrey: [119, 136, 153],
            lightsteelblue: [176, 196, 222],
            lightyellow: [255, 255, 224],
            lime: [0, 255, 0],
            limegreen: [50, 205, 50],
            linen: [250, 240, 230],
            magenta: [255, 0, 255],
            maroon: [128, 0, 0],
            mediumaquamarine: [102, 205, 170],
            mediumblue: [0, 0, 205],
            mediumorchid: [186, 85, 211],
            mediumpurple: [147, 112, 219],
            mediumseagreen: [60, 179, 113],
            mediumslateblue: [123, 104, 238],
            mediumspringgreen: [0, 250, 154],
            mediumturquoise: [72, 209, 204],
            mediumvioletred: [199, 21, 133],
            midnightblue: [25, 25, 112],
            mintcream: [245, 255, 250],
            mistyrose: [255, 228, 225],
            moccasin: [255, 228, 181],
            navajowhite: [255, 222, 173],
            navy: [0, 0, 128],
            oldlace: [253, 245, 230],
            olive: [128, 128, 0],
            olivedrab: [107, 142, 35],
            orange: [255, 165, 0],
            orangered: [255, 69, 0],
            orchid: [218, 112, 214],
            palegoldenrod: [238, 232, 170],
            palegreen: [152, 251, 152],
            paleturquoise: [175, 238, 238],
            palevioletred: [219, 112, 147],
            papayawhip: [255, 239, 213],
            peachpuff: [255, 218, 185],
            peru: [205, 133, 63],
            pink: [255, 192, 203],
            plum: [221, 160, 221],
            powderblue: [176, 224, 230],
            purple: [128, 0, 128],
            rebeccapurple: [102, 51, 153],
            red: [255, 0, 0],
            rosybrown: [188, 143, 143],
            royalblue: [65, 105, 225],
            saddlebrown: [139, 69, 19],
            salmon: [250, 128, 114],
            sandybrown: [244, 164, 96],
            seagreen: [46, 139, 87],
            seashell: [255, 245, 238],
            sienna: [160, 82, 45],
            silver: [192, 192, 192],
            skyblue: [135, 206, 235],
            slateblue: [106, 90, 205],
            slategray: [112, 128, 144],
            slategrey: [112, 128, 144],
            snow: [255, 250, 250],
            springgreen: [0, 255, 127],
            steelblue: [70, 130, 180],
            tan: [210, 180, 140],
            teal: [0, 128, 128],
            thistle: [216, 191, 216],
            tomato: [255, 99, 71],
            turquoise: [64, 224, 208],
            violet: [238, 130, 238],
            wheat: [245, 222, 179],
            white: [255, 255, 255],
            whitesmoke: [245, 245, 245],
            yellow: [255, 255, 0],
            yellowgreen: [154, 205, 50]
        }
    }),
    define("lib/color-distance", ["require", "underscore", "lib/named-colors"], function (e) {
        function t(e) {
            var t = []
                , i = e.toLowerCase();
            if ("rgb" === i.slice(0, 3))
                try {
                    t = i.replace(/[^\d,]/g, "").split(",").slice(0, 3),
                        t = u.map(t, function (e) {
                            return parseInt(e, 10)
                        })
                } catch (t) {
                    r(e)
                }
            else if ("#" === i[0]) {
                var o = /^#?([a-f\d])([a-f\d])([a-f\d])$/;
                i = i.replace(o, function (e, t, n, r) {
                    return t + t + n + n + r + r
                });
                try {
                    t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(i).slice(1),
                        t = u.map(t, function (e) {
                            return parseInt(e, 16)
                        })
                } catch (t) {
                    r(e)
                }
            } else
                t = d[i];
            return n(t) || r(e),
                {
                    R: t[0],
                    G: t[1],
                    B: t[2]
                }
        }
        function n(e) {
            return !!u.isArray(e) && (3 === e.length && u.every(e, function (e) {
                return Number.isInteger(e) && e >= 0 && e <= 255
            }))
        }
        function r(e) {
            throw new Error("Invalid color string: " + e)
        }
        function i(e) {
            var t = e.R
                , n = e.G
                , r = e.B
                , i = [];
            return i[0] = .49 * t + .31 * n + .2 * r,
                i[1] = .17697 * t + .8124 * n + .01063 * r,
                i[2] = .01 * n + .99 * r,
                i = u.map(i, function (e) {
                    return e / .17697
                }),
                {
                    X: i[0],
                    Y: i[1],
                    Z: i[2]
                }
        }
        function o(e) {
            var t = 95.047
                , n = 100
                , r = 108.883
                , i = e.X
                , o = e.Y
                , a = e.Z
                , c = [];
            return c[0] = 116 * s(o / n) - 16,
                c[1] = 500 * (s(i / t) - s(o / n)),
                c[2] = 200 * (s(o / n) - s(a / r)),
                {
                    L: c[0],
                    a: c[1],
                    b: c[2]
                }
        }
        function s(e) {
            var t = 6 / 29;
            return e > Math.pow(t, 3) ? Math.pow(e, 1 / 3) : e / (3 * t * t) + 4 / 29
        }
        function a(e, t) {
            var n = 1
                , r = .045
                , i = .015
                , o = 1
                , s = 1
                , a = 1
                , c = e.L
                , l = e.a
                , u = e.b
                , d = t.L
                , p = t.a
                , h = t.b
                , f = c - d
                , m = Math.sqrt(l * l + u * u)
                , g = Math.sqrt(p * p + h * h)
                , y = m - g
                , v = l - p
                , b = u - h
                , x = Math.sqrt(v * v + b * b - y * y)
                , w = 1 + r * m
                , E = 1 + i * m
                , _ = f / (n * a)
                , S = y / (o * w)
                , k = x / (s * E);
            return Math.sqrt(_ * _ + S * S + k * k)
        }
        function c(e, n) {
            var r = o(i(t(e)))
                , s = o(i(t(n)));
            return a(r, s)
        }
        function l(e, t) {
            var n = u.map(t, function (t) {
                return c(e, t)
            })
                , r = u.min(n);
            return t[n.indexOf(r)]
        }
        var u = e("underscore")
            , d = e("lib/named-colors");
        return {
            str2rgb: t,
            difference: c,
            closestColor: l
        }
    }),
    define("graphing-calc/models/abstract-item", ["require", "exports", "./list"], function (e, t, n) {
        "use strict";
        function r() {
            return "abstract_item_" + l++
        }
        function i(e) {
            return {
                guid: r(),
                controller: e,
                index: -1,
                displayIndex: -1,
                secretIndex: -1,
                isHiddenFromUI: !0,
                renderShell: !0
            }
        }
        function o(e, t) {
            e.secret = t
        }
        function s(e, t) {
            e.folderId = t
        }
        function a(e) {
            e.isHiddenFromUI = n.isItemHiddenFromUI(e)
        }
        function c(e) {
            return e.isHiddenFromUI ? "none" : e.renderShell ? "shell" : "render"
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = 0;
        t.getGUID = r,
            t.DEFAULTS = i,
            t.setSecret = o,
            t.setFolderId = s,
            t.updateIsHiddenFromUI = a,
            t.getDisplayState = c
    }),
    define("expressions/opacity", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.LOW = .2,
            t.DEFAULT = .4,
            t.HIGH = .8
    }),
    define("expressions/slider_loop_modes", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.LOOP_FORWARD_REVERSE = "LOOP_FORWARD_REVERSE",
            t.LOOP_FORWARD = "LOOP_FORWARD"
    }),
    define("lib/evaluate-single-expression", ["require", "exports", "parser", "math/builtinframe", "math/parsenode/constant"], function (e, t, n, r, i) {
        "use strict";
        function o(e, t) {
            var o = /^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/;
            if (o.test(e))
                return parseFloat(e);
            var s = Object.create(r);
            return s.trigAngleMultiplier = i(t ? Math.PI / 180 : 1),
                +n.parse(e).tryGetConcreteTree(s).constantValue
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = o
    }),
    define("lib/rounding", ["require", "exports", "math/distance"], function (e, t, n) {
        "use strict";
        function r(e, t) {
            var r = n.mean(e, t);
            if (e > 0 != t > 0)
                return 0;
            if (0 === e || 0 === t)
                return 0;
            var i = e > 0 ? 1 : -1
                , o = Math.abs(e).toExponential().split("e")
                , s = Math.abs(t).toExponential().split("e")
                , a = o[0]
                , c = s[0]
                , l = o[1]
                , u = s[1];
            if (u !== l)
                return i * Math.pow(10, Math.max(parseFloat(l), parseFloat(u)));
            if (a[0] !== c[0])
                return parseFloat(r.toPrecision(1));
            for (var d = 1, p = 2; p < Math.min(a.length, c.length) && (d++ ,
                a[p] === c[p]); p++)
                ;
            return parseFloat(r.toPrecision(d))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.shortestDecimalBetween = r
    }),
    define("lib/default-spec", ["require", "exports", "underscore", "lib/deepCopy"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            var r = {};
            for (var i in t)
                t.hasOwnProperty(i) && (n.isEqual(e[i], t[i]) || (r[i] = t[i]));
            return r
        }
        function o(e, t) {
            t || (t = {});
            var n = {};
            for (var i in e)
                e.hasOwnProperty(i) && !t.hasOwnProperty(i) && (n[i] = r.default(e[i]));
            for (var i in t)
                t.hasOwnProperty(i) && (n[i] = t[i]);
            return n
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.stripDefaults = i,
            t.populateDefaults = o
    }),
    define("lib/copy-properties", ["require", "exports", "lib/deepCopy"], function (e, t, n) {
        "use strict";
        function r(e) {
            var t = e.from
                , r = e.to
                , i = e.props;
            for (var o in i)
                i[o] && t.hasOwnProperty(o) && (r[o] = n.default(t[o]))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.copyProperties = r
    }),
    define("graphing-calc/models/expression", ["require", "exports", "parser", "math/builtinframe", "math/policyGraphing", "tslib", "graphing/dragmode", "expressions/styles", "expressions/opacity", "expressions/slider_loop_modes", "graphing/reconcileDragMode", "lib/evaluate-single-expression", "graphing/label", "lib/rounding", "lib/default-spec", "lib/deepCopy", "lib/copy-properties", "lib/number-to-latex", "./abstract-item", "./list", "underscore", "math/expression-types"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w) {
        "use strict";
        function E(e, t) {
            var n = /=(.*?)([-\.0-9]+)/
                , r = e.match(n);
            return r ? parseFloat(r[2]) === t ? e : e.replace(n, "=$1" + t) : e
        }
        function _(e) {
            var t = e.latex || ""
                , n = e.label || ""
                , r = t + n;
            return "" === r.split(" ").join("")
        }
        function S(e) {
            var t = e.dragMode === s.AUTO ? e.formula.default_drag_mode : e.dragMode;
            e.reconciledDragMode = u.default(t, e.formula.move_strategy)
        }
        function k(e) {
            var t = e.memoizedUpdateComputedDomainParams
                , n = e.controller.isDegreeMode()
                , r = e.domain;
            if (!t || t.useDegrees !== n || t.domain !== r) {
                e.memoizedUpdateComputedDomainParams = {
                    useDegrees: n,
                    domain: r
                };
                var i = d.default(r.min, n)
                    , o = d.default(r.max, n);
                e.isDomainMinValid = isFinite(i) && i < o,
                    e.isDomainMaxValid = isFinite(o) && i < o,
                    e.isDomainMinValid && e.isDomainMaxValid && (e.lastValidDomain = r,
                        e.domainMinNumber = i,
                        e.domainMaxNumber = o)
            }
        }
        function M(e) {
            if (e.sliderExists) {
                var t = C(e, e.slider.min, e.slider.max, e.slider.step);
                t.min && t.max && t.step && (e.sliderMinNumber = t.values.min,
                    e.sliderMaxNumber = t.values.max,
                    e.sliderStepNumber = "" === e.slider.step ? void 0 : t.values.step)
            }
        }
        function C(e, t, n, r) {
            var i, o, s = e.controller.isDegreeMode(), a = d.default(t, s), c = d.default(n, s), l = isFinite(a) && a < c && !(a + "").match(/e/), u = isFinite(c) && a < c && !(c + "").match(/e/);
            return "" === r ? (i = NaN,
                o = !0) : (i = d.default(r, s),
                    o = isFinite(i) && i >= 0 && i <= c - a),
                {
                    min: l,
                    max: u,
                    step: o,
                    values: {
                        min: a,
                        max: c,
                        step: i
                    }
                }
        }
        function I(e, t, n) {
            if (!e.sliderExists)
                return NaN;
            var r = e.sliderMinNumber
                , i = e.sliderMaxNumber
                , o = n || e.sliderStepNumber;
            if (o) {
                var s = Math.round((t - r) / o);
                t = p.value(o * s + r, i - r).value
            }
            return e.slider.hardMin && t < r && (t = r),
                e.slider.hardMax && t > i && (t = i),
                t
        }
        function T(e, t) {
            if (!e.sliderExists)
                return NaN;
            var n, r = e.sliderValue, i = r, o = P(e), s = o.length - 1;
            switch (t) {
                case "up":
                    n = A(o, r, {
                        movingForward: !0
                    }),
                        n = Math.min(n + 1, s),
                        i = o[n];
                    break;
                case "down":
                    n = A(o, r, {
                        movingForward: !1
                    }),
                        n = Math.max(n - 1, 0),
                        i = o[n];
                    break;
                case "bigup":
                    n = A(o, r, {
                        movingForward: !0
                    }),
                        n = Math.min(n + 5, s),
                        i = o[n];
                    break;
                case "bigdown":
                    n = A(o, r, {
                        movingForward: !1
                    }),
                        n = Math.max(n - 5, 0),
                        i = o[n];
                    break;
                case "min":
                    i = o[0];
                    break;
                case "max":
                    i = o[s]
            }
            return i
        }
        function P(e) {
            if (!e.sliderExists)
                return [];
            for (var t = e.sliderMinNumber, n = e.sliderMaxNumber, r = e.sliderStepNumber || Math.abs(n - t) / 20, i = [], o = t; o <= n; o += r) {
                var s = I(e, o, r);
                i[i.length - 1] !== s && i.push(s)
            }
            return i[i.length - 1] !== n && i.push(n),
                i
        }
        function A(e, t, n) {
            if (t <= e[0])
                return 0;
            if (t >= e[e.length - 1])
                return e.length - 1;
            for (var r = 0; r < e.length - 1; r++) {
                if (e[r] === t)
                    return r;
                if (e[r] < t && t < e[r + 1])
                    return r + (n.movingForward ? 0 : 1)
            }
            return e[e.length - 1]
        }
        function L(e, t) {
            if (e.sliderExists) {
                var n = e.sliderMinNumber
                    , r = e.sliderMaxNumber
                    , i = e.sliderStepNumber
                    , o = e.slider.animationPeriod
                    , s = e.slider.loopMode
                    , a = i ? i / 2 : 0;
                if (s === l.LOOP_FORWARD_REVERSE)
                    e.sliderAnimationTargetValue >= r ? K(e, {
                        playDirection: -1
                    }) : e.sliderAnimationTargetValue <= n && K(e, {
                        playDirection: 1
                    });
                else {
                    if (s !== l.LOOP_FORWARD)
                        throw new Error("Unexpected slider loop mode: " + s);
                    K(e, {
                        playDirection: 1
                    }),
                        e.sliderAnimationTargetValue >= r + a && (e.sliderAnimationTargetValue = n - a)
                }
                isFinite(t) || (t = 0),
                    t = Math.min(t, o / 10);
                var c = (r - n) * t / o;
                e.sliderAnimationTargetValue += c * e.slider.playDirection,
                    e.sliderAnimationTargetValue = Math.max(n - a, Math.min(r + a, e.sliderAnimationTargetValue));
                var u = I(e, e.sliderAnimationTargetValue);
                i || (u = h.shortestDecimalBetween(u - .1 * c, u + .1 * c)),
                    u = Math.max(n, Math.min(r, u)),
                    e.sliderValue = u,
                    e.latex = E(e.latex, u)
            }
        }
        function O(e, t) {
            e.formula = t,
                e.loading = !1,
                e.error = t.error ? t.error : "",
                e.isGraphable = t.is_graphable,
                e.dependent = t.assignment,
                e.isTableable = t.is_tableable,
                e.unresolved = !1,
                t.is_slidable ? (e.sliderExists || D(e),
                    z(e) || (e.sliderValue = t.constant_value)) : e.sliderExists = !1;
            var n = {};
            t.is_regression && (n = t.regression.parameters,
                e.residualVariable = t.regression.residualVariable),
                x.isEqual(e.regressionParameters, n) || (e.regressionParameters = n)
        }
        function D(e) {
            e.sliderValue = e.formula.constant_value || 0,
                e.sliderAnimationTargetValue = e.sliderValue,
                e.sliderDragging = !1,
                e.sliderExists = !0,
                M(e)
        }
        function q(e) {
            var t = b.getParentFolderModel(e);
            t && t.hidden ? e.shouldGraph = !1 : e.shouldGraph = !e.hidden
        }
        function N(e, n) {
            var r = e.cachedViewState;
            if (n.stripDefaults)
                return f.stripDefaults(t.DEFAULTS, o.__assign({}, r, {
                    slider: f.stripDefaults(t.SLIDER_DEFAULTS, r.slider)
                }));
            if (void 0 === r.points || void 0 === r.lines || void 0 === r.fill) {
                var i = m.default(r);
                return void 0 === i.points && delete i.points,
                    void 0 === i.lines && delete i.lines,
                    void 0 === i.fill && delete i.fill,
                    i
            }
            return r
        }
        function F(e) {
            var t = e.cachedViewState;
            t && t.folderId === e.folderId && t.color === e.color && t.latex === e.latex && t.domain === e.domain && t.showLabel === e.showLabel && t.label === e.label && t.hidden === e.hidden && t.secret === e.secret && t.fill === e.fill && t.fillOpacity === e.fillOpacity && t.points === e.points && t.lines === e.lines && t.lineStyle === e.lineStyle && t.pointStyle === e.pointStyle && t.dragMode === e.dragMode && t.labelSize === e.labelSize && t.residualVariable === e.residualVariable && t.regressionParameters === e.regressionParameters && t.isLogModeRegression === e.isLogModeRegression && t.slider === e.slider || (e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                color: e.color,
                latex: e.latex,
                domain: e.domain,
                showLabel: e.showLabel,
                label: e.label,
                hidden: e.hidden,
                secret: e.secret,
                points: e.points,
                lines: e.lines,
                lineStyle: e.lineStyle,
                pointStyle: e.pointStyle,
                fill: e.fill,
                fillOpacity: e.fillOpacity,
                dragMode: e.dragMode,
                labelSize: e.labelSize,
                residualVariable: e.residualVariable,
                regressionParameters: e.regressionParameters,
                isLogModeRegression: e.isLogModeRegression,
                slider: e.slider
            })
        }
        function R(e) {
            if (e.formula) {
                var t = e.formula.expression_type;
                if (void 0 !== t)
                    return void 0 === e.cachedExpressionType ? void (e.cachedExpressionType = t) : void (e.cachedExpressionType !== t && (fe(e, void 0),
                        ge(e, void 0),
                        de(e, void 0),
                        e.cachedExpressionType = t))
            }
        }
        function j(e, t) {
            e.draggingOnGraphpaper = t
        }
        function B(e) {
            var t = e.memoizedUndoRedoStateParams
                , n = e.cachedViewState
                , r = e.preTransientState;
            if (!t || t.viewState !== n || t.preTransientState !== r) {
                e.memoizedUndoRedoStateParams = {
                    viewState: n,
                    preTransientState: r
                };
                var i;
                i = r ? o.__assign({}, n, {
                    latex: r.latex,
                    slider: o.__assign({}, n.slider, r.slider)
                }) : o.__assign({}, n),
                    delete i.regressionParameters,
                    delete i.residualVariable,
                    e.cachedUndoRedoState = i
            }
        }
        function V(e, n) {
            var r = m.default(o.__assign({}, t.DEFAULTS, e, {
                slider: o.__assign({}, t.SLIDER_DEFAULTS, e.slider)
            }))
                , i = o.__assign({}, r, v.DEFAULTS(n), {
                    loading: !0,
                    formula: {
                        error: void 0
                    },
                    error: void 0,
                    unresolved: !1,
                    color: r.color || n.getNextColor(),
                    fill: r.fill,
                    points: r.points,
                    lines: r.lines,
                    pointStyle: r.pointStyle,
                    lineStyle: r.lineStyle,
                    lastValidDomain: r.domain,
                    shouldGraph: void 0,
                    sliderMinNumber: void 0,
                    sliderMaxNumber: void 0,
                    sliderStepNumber: void 0,
                    sliderDragging: void 0,
                    sliderAnimationTargetValue: void 0,
                    sliderValue: void 0,
                    domainMinNumber: void 0,
                    domainMaxNumber: void 0,
                    isDomainMinValid: void 0,
                    isDomainMaxValid: void 0,
                    draggingOnGraphpaper: !1,
                    cachedUndoRedoState: void 0,
                    cachedParsableState: void 0,
                    cachedViewState: void 0,
                    cachedExpressionType: void 0
                });
            return i
        }
        function U(e) {
            var t = b.getParentFolderModel(e)
                , n = !(!t || !t.hidden)
                , r = e.cachedViewState
                , i = e.index
                , o = e.showLabel && !n
                , s = e.shouldGraph
                , a = e.domainMinNumber
                , c = e.domainMaxNumber
                , l = e.memoizedParsableStateParams;
            l && l.viewState === r && l.index === i && l.showLabel === o && l.shouldGraph === s && l.domainMinNumber === a && l.domainMaxNumber === c || (e.memoizedParsableStateParams = {
                viewState: r,
                index: i,
                domainMinNumber: a,
                domainMaxNumber: c,
                showLabel: o,
                shouldGraph: s
            },
                e.cachedParsableState = {
                    type: "statement",
                    id: r.id,
                    latex: r.latex,
                    label: r.label,
                    color: r.color,
                    fill: r.fill,
                    fillOpacity: r.fillOpacity,
                    points: r.points,
                    lines: r.lines,
                    pointStyle: r.pointStyle,
                    lineStyle: r.lineStyle,
                    dragMode: r.dragMode,
                    labelSize: r.labelSize,
                    residualVariable: r.residualVariable,
                    regressionParameters: r.regressionParameters,
                    isLogModeRegression: r.isLogModeRegression,
                    index: i,
                    showLabel: o,
                    domain: {
                        min: a,
                        max: c
                    },
                    shouldGraph: s
                })
        }
        function G(e, t) {
            t(e.latex),
                e.residualVariable && t(e.residualVariable)
        }
        function z(e) {
            return e.sliderExists && (e.slider.isPlaying || e.sliderDragging)
        }
        function H(e) {
            e.draggingOnGraphpaper || z(e) ? e.preTransientState || (e.preTransientState = {
                latex: e.latex,
                slider: {
                    min: e.slider.min,
                    max: e.slider.max,
                    playDirection: e.slider.playDirection
                }
            }) : delete e.preTransientState,
                v.updateIsHiddenFromUI(e),
                q(e),
                k(e),
                S(e),
                M(e),
                F(e),
                B(e),
                U(e),
                R(e)
        }
        function W(e, t) {
            g.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    color: !0,
                    folderId: !0,
                    latex: !0,
                    domain: !0,
                    showLabel: !0,
                    label: !0,
                    hidden: !0,
                    secret: !0,
                    points: !0,
                    lines: !0,
                    lineStyle: !0,
                    pointStyle: !0,
                    fill: !0,
                    fillOpacity: !0,
                    dragMode: !0,
                    labelSize: !0,
                    residualVariable: !0,
                    regressionParameters: !0,
                    isLogModeRegression: !0,
                    slider: !0
                }
            })
        }
        function Y(e, t, n) {
            var r = e.sliderValue;
            K(e, {
                hardMin: t,
                min: n
            }),
                M(e);
            var i = e.sliderMinNumber
                , o = i > r ? e.latex : ""
                , s = i > r ? E(o, i) : null;
            s && (e.latex = s)
        }
        function $(e, t, n) {
            var r = e.sliderValue;
            K(e, {
                hardMax: t,
                max: n
            }),
                M(e);
            var i = e.sliderMaxNumber
                , o = i < r ? e.latex : ""
                , s = i < r ? E(o, i) : "";
            s && (e.latex = s)
        }
        function K(e, t) {
            e.slider = o.__assign({}, e.slider, t)
        }
        function X(e, t) {
            if (e && e.sliderExists) {
                var n = e.slider.isPlaying;
                n !== t && (K(e, {
                    isPlaying: t
                }),
                    t && (e.sliderAnimationTargetValue = e.sliderValue))
            }
        }
        function Q(e, t) {
            e.sliderExists && (e.slider.isPlaying && X(e, !1),
                e.sliderValue = t,
                e.latex = E(e.latex, t),
                t < e.sliderMinNumber && Y(e, e.slider.hardMin, y.default(t)),
                t > e.sliderMaxNumber && $(e, e.slider.hardMax, y.default(t)))
        }
        function Z(e) {
            var t = n.parse(e);
            if ("Assignment" !== t.type)
                return NaN;
            if ("Constant" !== t._expression.type)
                return NaN;
            if (!i.validLHS(t._symbol))
                return NaN;
            if (r[t._symbol])
                return NaN;
            var o = t._expression.constantValue;
            return "number" == typeof o ? o : NaN
        }
        function J(e, t) {
            var n = Z(t);
            isFinite(n) && (e.sliderExists || (e.sliderExists = !0,
                M(e),
                e.sliderExists = !1),
                n > e.sliderMaxNumber && (e.sliderMaxNumber = n,
                    K(e, {
                        max: y.default(n)
                    })),
                n < e.sliderMinNumber && (e.sliderMinNumber = n,
                    K(e, {
                        min: y.default(n)
                    }))),
                e.latex = t
        }
        function ee(e, t) {
            K(e, {
                loopMode: t,
                playDirection: 1
            }),
                e.sliderAnimationTargetValue = e.sliderMinNumber
        }
        function te(e, t) {
            e.sliderDragging = t
        }
        function ne(e, t) {
            K(e, {
                step: t
            })
        }
        function re(e, t) {
            K(e, {
                animationPeriod: t
            })
        }
        function ie(e, t) {
            e.label = t
        }
        function oe(e, t) {
            e.showLabel = t
        }
        function se(e, t) {
            e.domain = o.__assign({}, e.domain, {
                min: t
            })
        }
        function ae(e, t) {
            e.domain = o.__assign({}, e.domain, {
                max: t
            })
        }
        function ce(e) {
            e.domain = e.lastValidDomain
        }
        function le(e, t) {
            e.isLogModeRegression = t
        }
        function ue(e, t) {
            e.color = t
        }
        function de(e, t) {
            e.fill = t
        }
        function pe(e, t) {
            e.fillOpacity !== t && (e.fillOpacity = t)
        }
        function he(e, t) {
            e.dragMode !== t && (e.dragMode = t,
                t !== s.NONE && (e.pointStyle = a.POINT))
        }
        function fe(e, t) {
            e.points = t
        }
        function me(e, t) {
            e.pointStyle !== t && (e.pointStyle = t,
                t !== a.POINT && (e.dragMode = s.NONE))
        }
        function ge(e, t) {
            e.lines = t
        }
        function ye(e, t) {
            e.lineStyle !== t && (e.lineStyle = t)
        }
        function ve(e, t) {
            e.labelSize = t
        }
        function be(e, t) {
            if (e.hidden = t,
                e.formula && e.formula.expression_type) {
                var n = e.points
                    , r = e.lines
                    , i = e.fill
                    , o = w.getReconciledExpressionProps(e.formula.expression_type, {
                        points: n,
                        lines: r,
                        fill: i
                    });
                if (!(t || o.points || o.lines || o.fill)) {
                    var s = w.EXPRESSION_PROP_DEFAULTS[e.formula.expression_type];
                    e.points = s.points,
                        e.lines = s.lines,
                        e.fill = s.fill
                }
            }
        }
        function xe(e) {
            var t = e.points
                , n = e.lines
                , r = e.fill
                , i = w.getReconciledExpressionProps(e.formula.expression_type, {
                    points: t,
                    lines: n,
                    fill: r
                });
            return !i.points && !i.lines && !i.fill
        }
        function we(e) {
            return !(!e.formula || !Se(e))
        }
        function Ee(e) {
            return !!e.sliderExists
        }
        function _e(e) {
            return e.formula.expression_type === w.POLYGON
        }
        function Se(e) {
            return e.formula.expression_type === w.PARAMETRIC
        }
        function ke(e) {
            return e.formula.expression_type === w.SINGLE_POINT
        }
        function Me(e) {
            return e.formula.expression_type === w.POINT_LIST
        }
        function Ce(e) {
            return e.formula.expression_type === w.POINT_LIST || e.formula.expression_type === w.SINGLE_POINT
        }
        function Ie(e) {
            e.showLabel = t.DEFAULTS.showLabel,
                e.label = t.DEFAULTS.label,
                e.hidden = t.DEFAULTS.hidden,
                e.dragMode = t.DEFAULTS.dragMode,
                e.fill = t.DEFAULTS.fill,
                e.fillOpacity = t.DEFAULTS.fillOpacity,
                e.points = t.DEFAULTS.points,
                e.pointStyle = t.DEFAULTS.pointStyle,
                e.lines = t.DEFAULTS.lines,
                e.lineStyle = t.DEFAULTS.lineStyle,
                e.domain = t.DEFAULTS.domain,
                e.slider = t.SLIDER_DEFAULTS,
                e.latex = "",
                e.labelSize = "medium"
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.DEFAULT_SLIDER_PERIOD = 4e3,
            t.DEFAULTS = {
                folderId: "",
                latex: "",
                color: "",
                showLabel: !1,
                label: "",
                hidden: !1,
                secret: !1,
                dragMode: s.AUTO,
                labelSize: "medium",
                residualVariable: "",
                isLogModeRegression: !1,
                pointStyle: a.POINT,
                lineStyle: a.SOLID,
                fillOpacity: c.DEFAULT,
                domain: {
                    min: "0",
                    max: "1"
                },
                regressionParameters: {},
                slider: {},
                points: void 0,
                lines: void 0,
                fill: void 0
            },
            t.SLIDER_DEFAULTS = {
                hardMin: !1,
                hardMax: !1,
                animationPeriod: t.DEFAULT_SLIDER_PERIOD,
                loopMode: l.LOOP_FORWARD_REVERSE,
                playDirection: 1,
                isPlaying: !1,
                min: "-10",
                max: "10",
                step: ""
            },
            t.computeNewSliderLatex = E,
            t.isEmpty = _,
            t.updateReconciledDragMode = S,
            t.updateComputedDomainLimits = k,
            t.computeSliderLimits = M,
            t.checkSliderLimits = C,
            t.computeSliderSnappedValue = I,
            t.computeSliderAdjustment = T,
            t.computeSliderSteps = P,
            t.nearestSliderStepIndex = A,
            t.tickSliderStep = L,
            t.onFormulaUpdate = O,
            t.createSliderModel = D,
            t.computeShouldGraph = q,
            t.getState = N,
            t.updateCachedViewState = F,
            t.updateExpressionType = R,
            t.setIsDraggingOnGrapher = j,
            t.updateCachedUndoRedoState = B,
            t.initModel = V,
            t.updateCachedParsableState = U,
            t.eachLatex = G,
            t.isSliderTransient = z,
            t.onControllerUpdate = H,
            t.restoreState = W,
            t.setSliderMin = Y,
            t.setSliderMax = $,
            t.setSliderIsPlaying = X,
            t.setSliderValue = Q,
            t.extractSliderValueFromLatex = Z,
            t.setLatex = J,
            t.setSliderLoopMode = ee,
            t.setSliderDragging = te,
            t.setSliderStep = ne,
            t.setSliderAnimationPeriod = re,
            t.setLabel = ie,
            t.setShowLabel = oe,
            t.setDomainMin = se,
            t.setDomainMax = ae,
            t.revertToLastValidDomain = ce,
            t.setLogMode = le,
            t.setColor = ue,
            t.setFill = de,
            t.setFillOpacity = pe,
            t.setDragMode = he,
            t.setPoints = fe,
            t.setPointStyle = me,
            t.setLines = ge,
            t.setLineStyle = ye,
            t.setLabelSize = ve,
            t.setHidden = be,
            t.shouldHide = xe,
            t.hasDomain = we,
            t.hasSlider = Ee,
            t.isPolygon = _e,
            t.isParametric = Se,
            t.isSinglePoint = ke,
            t.isPointList = Me,
            t.isPointOrPointList = Ce,
            t.blankOutExpressionAfterClearingLatex = Ie
    }),
    define("graphing-calc/models/folder", ["require", "exports", "tslib", "lib/default-spec", "lib/deepCopy", "lib/copy-properties", "./abstract-item", "./list"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        function c(e, n) {
            var i = e.cachedViewState;
            return n.stripDefaults ? r.stripDefaults(t.DEFAULTS, i) : i
        }
        function l(e) {
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                title: e.title,
                hidden: e.hidden,
                collapsed: e.collapsed,
                secret: e.secret
            }
        }
        function u(e) {
            e.cachedUndoRedoState = e.cachedViewState
        }
        function d(e, r) {
            var o = i.default(n.__assign({}, t.DEFAULTS, e))
                , a = n.__assign({}, o, s.DEFAULTS(r), {
                    cachedUndoRedoState: {},
                    cachedViewState: {}
                });
            return a
        }
        function p(e) {
            f(e),
                s.updateIsHiddenFromUI(e),
                l(e),
                u(e)
        }
        function h(e, t) {
            o.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    folderId: !0,
                    hidden: !0,
                    secret: !0,
                    collapsed: !0,
                    title: !0
                }
            })
        }
        function f(e) {
            var t = e.controller
                , n = t.getSelectedItem();
            e.collapsed ? n && n.folderId === e.id ? (e.selectedHiddenChild = n,
                a.setSelected(t.getListModel(), e)) : n !== e && (e.selectedHiddenChild = void 0) : (n === e && e.selectedHiddenChild && a.setSelected(t.getListModel(), e.selectedHiddenChild),
                    e.selectedHiddenChild = void 0)
        }
        function m(e, t) {
            e.collapsed = t
        }
        function g(e, t) {
            e.title = t
        }
        function y(e, t) {
            e.hidden = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.DEFAULTS = {
                folderId: "",
                collapsed: !1,
                hidden: !1,
                secret: !1,
                title: ""
            },
            t.getState = c,
            t.updateCachedViewState = l,
            t.updateCachedUndoRedoState = u,
            t.initModel = d,
            t.onControllerUpdate = p,
            t.restoreState = h,
            t.updateSelectedHiddenChild = f,
            t.setCollapsed = m,
            t.setTitle = g,
            t.setHidden = y
    }),
    define("graphing-calc/models/table", ["require", "exports", "math/rational-arithmetic-sequence", "tslib", "graphing/dragmode", "expressions/styles", "./abstract-item", "underscore", "graphing/label", "lib/default-spec", "lib/evaluate-single-expression", "math/distance", "lib/deepCopy", "lib/copy-properties", "graphing-calc/models/list"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f) {
        "use strict";
        function m(e, t, n, r) {
            r.row = e.rowModels[t],
                r.row.cells.splice(n, 0, r)
        }
        function g(e, t, n) {
            e.rowModels[t].cells.splice(n, 1)
        }
        function y(e) {
            return isFinite(e) ? c.truncatedLatexLabel(e, {
                zeroCutoff: 1e-15,
                digits: 8,
                bigCutoff: 1e6,
                smallCutoff: .001
            }) : "\\mathrm{undefined}"
        }
        function v(e, t, n) {
            var r = e.columnModels[t];
            r.error = n.error,
                r.discrete = n.discrete,
                r.disabled = n.dependent,
                r.draggable = !n.error && !n.dependent,
                r.packedErrors = [],
                r.computedValues = [];
            for (var i = n.values, o = i.length - 1; o >= 0; o--) {
                var s = i[o];
                "number" == typeof s ? r.computedValues[o] = y(s) : r.computedValues[o] = "",
                    r.packedErrors[o] = s && s.msg ? s : void 0
            }
        }
        function b(e, t) {
            var n = e.columnModels[t]
                , r = e.columns[t].values.slice();
            return {
                values: r,
                dragMode: n.dragMode,
                hidden: n.hidden,
                id: n.id,
                color: n.color,
                points: n.points,
                lines: n.lines,
                pointStyle: n.pointStyle,
                lineStyle: n.lineStyle,
                latex: n.latex
            }
        }
        function x() {
            return "table_guid_" + oe++
        }
        function w() {
            return {
                guid: x(),
                type: "cell",
                row: void 0,
                column: void 0
            }
        }
        function E(e) {
            return {
                index: e,
                guid: x(),
                cells: []
            }
        }
        function _(e, t, n, r) {
            var i = e.columnModels[t];
            i.cells.splice(n, 0, r),
                r.column = i,
                e.columns[i.index].values.splice(n, 0, "")
        }
        function S(e, t, n) {
            var r = e.columnModels[t];
            r.cells.splice(n, 1),
                e.columns[r.index].values.splice(n, 1)
        }
        function k(e, t, n) {
            var i = r.__assign({}, n, {
                type: "header",
                guid: x(),
                index: t,
                error: void 0,
                table: e,
                color: n.color || e.controller.getNextColor(),
                packedErrors: [],
                computedValues: [],
                cells: void 0,
                row: void 0,
                discrete: void 0,
                shouldGraph: void 0,
                disabled: void 0,
                draggable: void 0
            });
            return i.cells = i.values.map(function () {
                var e = w();
                return e.column = i,
                    e
            }),
                delete i.values,
                0 === t && (i.hidden = !0),
                i
        }
        function M(e) {
            e.draggingOnGraphpaper ? e.preTransientState || (e.preTransientState = {
                columns: F(e, {
                    stripDefaults: !1
                }).columns
            }) : delete e.preTransientState,
                s.updateIsHiddenFromUI(e);
            var t = f.getParentFolderModel(e)
                , n = t && t.hidden;
            a.each(e.columnModels, function (e) {
                e.shouldGraph = !n && !e.hidden
            }),
                R(e),
                B(e),
                D(e)
        }
        function C(e, t) {
            e.formula = t;
            var n, r = e.formula.column_data, i = e.columnModels[0].cells.length, o = 0;
            for (n = 0; n < r.length; n++) {
                var s = r[n].values.length;
                s > o && (o = s)
            }
            for (n = o - i; n > 0; n--)
                I(e, i),
                    i++;
            for (n = 0; n < r.length; n++)
                v(e, n, r[n]);
            var a = e.columnModels[e.columnModels.length - 1];
            a.disabled = !0,
                a.error = void 0
        }
        function I(e, t) {
            var n = E(t + 1);
            e.rowModels.splice(t + 1, 0, n);
            for (var r = t + 1; r < e.rowModels.length; r++)
                e.rowModels[r].index = r;
            for (r = 0; r < e.columnModels.length; r++) {
                var i = w();
                _(e, r, t, i),
                    m(e, t + 1, r, i)
            }
        }
        function T(e, t) {
            for (var n = 0; n < e.columnModels.length; n++)
                S(e, n, t);
            for (e.rowModels.splice(t + 1, 1),
                n = t + 1; n < e.rowModels.length; n++)
                e.rowModels[n].index = n
        }
        function P(e, n, i) {
            var o = r.__assign({}, t.COLUMN_DEFAULTS, i, {
                values: e.columns[0].values.map(function () {
                    return ""
                })
            })
                , s = k(e, n, o);
            e.columnModels.splice(n, 0, s),
                e.columns.splice(n, 0, o);
            for (var a = n + 1; a < e.columnModels.length; a++)
                e.columnModels[a].index = a;
            for (m(e, 0, n, s),
                a = 1; a < e.rowModels.length; a++)
                m(e, a, n, s.cells[a - 1])
        }
        function A(e, t) {
            e.columnModels.splice(t, 1);
            for (var n = t; n < e.columnModels.length; n++)
                e.columnModels[n].index = n;
            for (n = 0; n < e.rowModels.length; n++)
                g(e, n, t)
        }
        function L(e, t) {
            var r, i = e.columnModels.length, o = [];
            for (r = 0; r < i; r++)
                o.push("");
            var s = e.columns[0].values;
            if (t > 1) {
                var a = e.controller.isDegreeMode()
                    , c = u.default(s[0], a)
                    , l = u.default(s[1], a);
                if (isFinite(c) && isFinite(l)) {
                    var p = n(c, l);
                    if (p) {
                        var h = p.nstart
                            , f = h / p.lcm;
                        for (r = 0; r < t; r++) {
                            var m = u.default(s[r], a);
                            if (!d.approx(m, f))
                                return o;
                            h += p.nstep,
                                f = h / p.lcm
                        }
                        ("" + c).length < 8 && ("" + l).length < 8 ? o[0] = "" + f : o[0] = "\\frac{" + h + "}{" + p.lcm + "}"
                    }
                }
            }
            return o
        }
        function O(e, t) {
            for (var n = 0; n < e.columnModels.length; n++) {
                var r = e.columnModels[n];
                t(r.latex);
                for (var i = e.columns[n], o = 0; o < i.values.length; o++)
                    i.values[o] && t(i.values[o])
            }
        }
        function D(e) {
            var t = e.columnModels.map(function (t) {
                var n = b(e, t.index);
                return r.__assign({}, n, {
                    hidden: !t.shouldGraph,
                    tableId: e.id
                })
            });
            e.cachedParsableState = {
                type: "table",
                id: e.id,
                columns: t
            }
        }
        function q(e, n) {
            return e = p.default(e),
                e.push(r.__assign({}, t.COLUMN_DEFAULTS, {
                    id: n,
                    values: e[0].values.map(function () {
                        return ""
                    })
                })),
                e.forEach(function (e) {
                    e.values.push("")
                }),
                e
        }
        function N(e) {
            return e = p.default(e),
                e.pop(),
                e.forEach(function (e) {
                    e.values.pop()
                }),
                e
        }
        function F(e, n) {
            var i = r.__assign({}, e.cachedViewState, {
                columns: N(e.cachedViewState.columns)
            });
            return n.stripDefaults ? (i = r.__assign({}, i, {
                columns: i.columns.map(function (e) {
                    return l.stripDefaults(t.COLUMN_DEFAULTS, e)
                })
            }),
                l.stripDefaults(t.DEFAULTS, i)) : i
        }
        function R(e) {
            var t = e.columnModels.map(function (t, n) {
                return b(e, n)
            });
            e.cachedViewState = {
                id: e.id,
                type: e.type,
                folderId: e.folderId,
                columns: t,
                secret: e.secret
            }
        }
        function j(e, t) {
            e.draggingOnGraphpaper = t
        }
        function B(e) {
            var t = r.__assign({}, e.cachedViewState, {
                columns: N(e.cachedViewState.columns)
            });
            e.preTransientState && (t = r.__assign({}, t, e.preTransientState)),
                e.cachedUndoRedoState = t
        }
        function V(e, t) {
            if (e.columnModels.length - 1 !== t.length)
                return {
                    type: "start-fresh"
                };
            if (e.columnModels[0].cells.length - 1 !== t[0].values.length)
                return {
                    type: "start-fresh"
                };
            for (var n = -1, r = t.length - 1; r >= 0; r--) {
                var i = e.columns[r]
                    , o = t[r];
                if (i.id !== o.id)
                    return {
                        type: "start-fresh"
                    };
                for (var s = i.values, a = o.values, c = a.length - 1; c >= 0; c--)
                    if (s[c] !== a[c] && (n === -1 && (n = c),
                        n !== c))
                        return {
                            type: "start-fresh"
                        }
            }
            return n === -1 ? {
                type: "none"
            } : {
                    type: "edit-row",
                    rowIndex: n
                }
        }
        function U(e, t) {
            var n = V(e, t.columns);
            if (h.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    columns: !1,
                    folderId: !0,
                    secret: !0
                }
            }),
                "start-fresh" === n.type)
                e.columns = q(t.columns, e.controller.generateId()),
                    z(e);
            else {
                switch (n.type) {
                    case "none":
                        break;
                    case "edit-row":
                        for (var r = t.columns.length - 1; r >= 0; r--) {
                            var i = {
                                column: r,
                                row: n.rowIndex + 1
                            }
                                , o = t.columns[r].values[n.rowIndex];
                            re(e, i, o)
                        }
                        break;
                    default:
                        var s = n;
                        return s
                }
                for (var a = 0; a < t.columns.length; a++)
                    h.copyProperties({
                        from: t.columns[a],
                        to: e.columnModels[a],
                        props: {
                            id: !1,
                            values: !1,
                            color: !0,
                            latex: !0,
                            hidden: !0,
                            points: !0,
                            lines: !0,
                            dragMode: !0,
                            lineStyle: !0,
                            pointStyle: !0
                        }
                    })
            }
        }
        function G(e, n) {
            var i = p.default(r.__assign({}, t.DEFAULTS, e))
                , o = r.__assign({}, i, s.DEFAULTS(n), {
                    columnModels: void 0,
                    rowModels: void 0,
                    formula: void 0,
                    draggingOnGraphpaper: !1,
                    cachedViewState: {},
                    cachedParsableState: {},
                    cachedUndoRedoState: {}
                });
            o.columns = o.columns.map(function (e) {
                return r.__assign({}, t.COLUMN_DEFAULTS, e)
            }),
                o.columns = q(o.columns, n.generateId());
            var a, c = 0;
            for (a = 0; a < o.columns.length; a++)
                o.columns[a].values || (o.columns[a].values = []),
                    o.columns[a].values.length > c && (c = o.columns[a].values.length);
            for (a = 0; a < o.columns.length; a++)
                for (var l = c - o.columns[a].values.length; l > 0; l--)
                    o.columns[a].values.push("");
            return z(o),
                o
        }
        function z(e) {
            e.columnModels = e.columns.map(function (t, n) {
                return k(e, n, t)
            }),
                e.rowModels = [E(0)];
            for (var t = 0; t < e.columnModels.length; t++)
                m(e, 0, t, e.columnModels[t]);
            for (var t = 0; t < e.columnModels[0].cells.length; t++) {
                var n = E(t + 1);
                e.rowModels.push(n);
                for (var r = 0; r < e.columnModels.length; r++)
                    m(e, t + 1, r, e.columnModels[r].cells[t])
            }
        }
        function H(e, t, n) {
            for (var r = [], s = Math.min(t.length, se.length), a = 0; a < s; a++)
                r.push({
                    id: n.generateId(),
                    latex: c.identifierToLatex(se[a] + "_" + e),
                    values: t[a],
                    color: n.getNextColor(),
                    hidden: !1,
                    points: !0,
                    lines: !1,
                    dragMode: i.NONE,
                    pointStyle: o.POINT,
                    lineStyle: o.SOLID
                });
            return {
                id: n.generateId(),
                type: "table",
                folderId: "",
                secret: !1,
                columns: r
            }
        }
        function W(e, t) {
            var n = F(e, {
                stripDefaults: !1
            });
            if (!n.columns || !t.columns)
                return t;
            for (var r = 0; r < t.columns.length; r++) {
                var i = n.columns[r]
                    , o = t.columns[r];
                if (i)
                    for (var s in i)
                        i.hasOwnProperty(s) && (o.hasOwnProperty(s) || (o[s] = i[s]))
            }
            return t
        }
        function Y(e) {
            var t = e.controller.getFocusLocation();
            return t && "table" === t.type && t.id === e.id ? t.location : void 0
        }
        function $(e, t) {
            for (var n = 0; n < e.columnModels.length; n++) {
                var r = e.columnModels[n];
                if (r.id === t)
                    return r
            }
            throw new Error("could not find ColumnModel with id: " + t)
        }
        function K(e, t, n) {
            var r = $(e, t);
            r.points = n,
                n || (r.dragMode = i.NONE)
        }
        function X(e, t, n) {
            var r = $(e, t);
            r.pointStyle = n
        }
        function Q(e, t, n) {
            var r = $(e, t);
            r.lines = n
        }
        function Z(e, t, n) {
            var r = $(e, t);
            r.lineStyle = n
        }
        function J(e, t, n) {
            var r = $(e, t);
            r.dragMode = n,
                n === i.NONE || r.points || (r.points = !0)
        }
        function ee(e, t, n) {
            var r = $(e, t);
            r.color = n
        }
        function te(e, t, n) {
            var r = $(e, t);
            r.hidden = n
        }
        function ne(e, t) {
            var n = $(e, t);
            return !n.points && !n.lines
        }
        function re(e, t, n) {
            if (0 === t.row) {
                var r = e.columnModels[t.column].id
                    , i = $(e, r);
                return i.latex = n,
                    void (t.column >= e.columnModels.length - 1 && P(e, t.column + 1, {
                        id: e.controller.generateId(),
                        latex: "",
                        color: e.controller.getNextColor()
                    }))
            }
            var o = e.columnModels[t.column];
            e.columns[o.index].values[t.row - 1] = n,
                "" !== n && t.row >= e.columnModels[0].cells.length && I(e, t.row)
        }
        function ie(e, t) {
            return t.row < e.rowModels.length && t.column < e.columnModels.length
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.DEFAULTS = {
                folderId: "",
                secret: !1,
                columns: []
            },
            t.COLUMN_DEFAULTS = {
                latex: "",
                color: "",
                hidden: !1,
                values: [],
                points: !0,
                lines: !1,
                dragMode: i.NONE,
                pointStyle: o.POINT,
                lineStyle: o.SOLID
            },
            t.insertCellToRow = m,
            t.removeCellFromRow = g,
            t.formatValueForDisplay = y,
            t.setColumnComputedValues = v,
            t.getColumnState = b;
        var oe = 0;
        t.getGUID = x,
            t.makeCell = w,
            t.makeRow = E,
            t.insertCellToColumn = _,
            t.removeCellFromColumn = S,
            t.makeColumn = k,
            t.onControllerUpdate = M,
            t.onFormulaUpdate = C,
            t.insertBlankRow = I,
            t.removeRow = T,
            t.insertBlankColumn = P,
            t.removeColumn = A,
            t.getRowAutoFillValues = L,
            t.eachLatex = O,
            t.updateCachedParsableState = D,
            t.addBlankRowAndColumn = q,
            t.stripBlankRowAndColumn = N,
            t.getState = F,
            t.updateCachedViewState = R,
            t.setIsDraggingOnGrapher = j,
            t.updateCachedUndoRedoState = B,
            t.computeTableStructureMutation = V,
            t.restoreState = U,
            t.initModel = G,
            t.buildEntireColumnStructure = z;
        var se = ["x", "y", "z", "u", "v", "w"];
        t.makeTableState = H,
            t.cloneTableAndExtendWithProperties = W,
            t.getSelectedCell = Y,
            t.getColumnModel = $,
            t.setColumnPoints = K,
            t.setColumnPointStyle = X,
            t.setColumnLines = Q,
            t.setColumnLineStyle = Z,
            t.setColumnDragMode = J,
            t.setColumnColor = ee,
            t.setColumnHidden = te,
            t.shouldHideColumn = ne,
            t.setCellLatex = re,
            t.doesCellExist = ie
    }),
    define("graphing-calc/models/text", ["require", "exports", "tslib", "lib/default-spec", "./abstract-item", "lib/deepCopy", "lib/copy-properties"], function (e, t, n, r, i, o, s) {
        "use strict";
        function a(e, t) {
            e.text = t
        }
        function c(e, r) {
            var s = o.default(n.__assign({}, t.DEFAULTS, e))
                , a = n.__assign({}, s, i.DEFAULTS(r), {
                    cachedUndoRedoState: {},
                    cachedViewState: {}
                });
            return a
        }
        function l(e) {
            i.updateIsHiddenFromUI(e),
                p(e),
                h(e)
        }
        function u(e, t) {
            s.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    folderId: !0,
                    text: !0,
                    secret: !0
                }
            })
        }
        function d(e, n) {
            var i = e.cachedViewState;
            return n.stripDefaults ? r.stripDefaults(t.DEFAULTS, i) : i
        }
        function p(e) {
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                text: e.text,
                secret: e.secret
            }
        }
        function h(e) {
            e.cachedUndoRedoState = e.cachedViewState
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.DEFAULTS = {
                folderId: "",
                text: "",
                secret: !1
            },
            t.setText = a,
            t.initModel = c,
            t.onControllerUpdate = l,
            t.restoreState = u,
            t.getState = d,
            t.updateCachedViewState = p,
            t.updateCachedUndoRedoState = h
    }),
    define("graphing-calc/models/helper-expression", ["require", "exports", "math/evaluationstate", "tslib", "underscore"], function (e, t, n, r, i) {
        "use strict";
        function o(e) {
            var t = r.__assign({}, e, {
                formula: n.default(),
                cachedParsableState: {
                    type: "statement",
                    id: e.id,
                    latex: e.latex,
                    shouldGraph: !1
                }
            });
            return t
        }
        function s(e, t, n) {
            t.formula = n;
            var r, o = t.proxy, s = {
                numericValue: o.numericValue,
                listValue: o.listValue
            };
            n.zero_values && 1 === n.zero_values.length && (r = n.zero_values[0].val),
                o.numericValue = i.isNumber(r) ? r : NaN,
                o.listValue = i.isArray(r) ? r.slice(0) : void 0,
                i.isEqual(o.numericValue, s.numericValue) || e.runAfterDispatch(function () {
                    o.notifyPropertyChange("numericValue")
                }),
                i.isEqual(o.listValue, s.listValue) || e.runAfterDispatch(function () {
                    o.notifyPropertyChange("listValue")
                })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.init = o,
            t.onFormulaUpdate = s
    }),
    define("graphing-calc/models/image", ["require", "exports", "tslib", "lib/default-spec", "lib/color-helpers", "./abstract-item", "lib/deepCopy", "lib/copy-properties", "./list", "jquery"], function (e, t, n, r, i, o, s, a, c, l) {
        "use strict";
        function u(e, t) {
            e.hidden = t
        }
        function d(e, t) {
            e.secret = t
        }
        function p(e, t, n) {
            e[t] = n
        }
        function h(e, t) {
            return e[t]
        }
        function f(e, t) {
            e.name = t
        }
        function m(e, t) {
            e.opacity = t
        }
        function g(e, t) {
            e.foreground = t
        }
        function y(e, t) {
            e.image_url = t
        }
        function v(e) {
            e.cachedParsableState = {
                type: "image",
                id: e.id,
                guid: e.guid,
                index: e.index,
                center: e.center,
                angle: e.angle,
                width: e.width,
                height: e.height,
                shouldGraph: e.shouldGraph,
                showPoints: e.showPoints,
                color: e.color
            }
        }
        function b(e) {
            e.draggingOnGraphpaper ? e.preTransientState || (e.preTransientState = {
                center: e.center,
                angle: e.angle,
                width: e.width,
                height: e.height
            }) : delete e.preTransientState,
                o.updateIsHiddenFromUI(e);
            var t = c.getParentFolderModel(e);
            e.shouldGraph = (!t || !t.hidden) && !e.hidden,
                e.showPoints = e.shouldGraph && c.isItemSelected(e) && "loaded" === e.loadStatus,
                _(e),
                k(e),
                v(e)
        }
        function x(e, t) {
            e.formula = t,
                e.computed_x = e.formula.dimensions.x,
                e.computed_y = e.formula.dimensions.y,
                e.computed_radian_angle = e.formula.dimensions.radianAngle,
                e.computed_height = e.formula.dimensions.height,
                e.computed_width = e.formula.dimensions.width;
            var n = {
                center: e.controller.t("Invalid center. Try, for example, (0,0)."),
                angle: e.controller.t("Invalid angle. Try using any number."),
                width: e.controller.t("Invalid width. Try using any number."),
                height: e.controller.t("Invalid height. Try using any number.")
            }
                , r = [];
            for (var i in e.formula.errorMap)
                e.formula.errorMap[i] && r.push(n[i]);
            e.error = r[0],
                e.inputErrors = {
                    center: !!e.formula.errorMap.center,
                    width: !!e.formula.errorMap.width,
                    height: !!e.formula.errorMap.height,
                    angle: !!e.formula.errorMap.angle
                }
        }
        function w(e, t) {
            return !!e.inputErrors && e.inputErrors[t]
        }
        function E(e, n) {
            var i = e.cachedViewState;
            return n.stripDefaults ? r.stripDefaults(t.DEFAULTS, i) : i
        }
        function _(e) {
            e.cachedViewState = {
                type: e.type,
                id: e.id,
                folderId: e.folderId,
                image_url: e.image_url,
                name: e.name,
                hidden: e.hidden,
                height: e.height,
                width: e.width,
                center: e.center,
                angle: e.angle,
                opacity: e.opacity,
                foreground: e.foreground,
                secret: e.secret
            }
        }
        function S(e, t) {
            e.draggingOnGraphpaper = t
        }
        function k(e) {
            var t = e.cachedViewState;
            e.preTransientState && (t = n.__assign({}, t, e.preTransientState)),
                e.cachedUndoRedoState = t
        }
        function M(e, t, n, r) {
            l(e).on("load", n).on("error", r),
                /^data:/.test(t) || (e.crossOrigin = "anonymous"),
                e.src = t
        }
        function C(e, r) {
            function a() {
                u.controller.dispatch({
                    type: "image-load-success",
                    id: u.id
                })
            }
            function c() {
                u.controller.dispatch({
                    type: "image-load-error",
                    id: u.id
                })
            }
            var l = s.default(n.__assign({}, t.DEFAULTS, e))
                , u = n.__assign({}, l, o.DEFAULTS(r), {
                    color: i.colors.BLUE,
                    loadStatus: "loading",
                    failures: 0,
                    imageObj: new Image,
                    shouldGraph: void 0,
                    showPoints: void 0,
                    error: void 0,
                    formula: void 0,
                    computed_x: void 0,
                    computed_y: void 0,
                    computed_width: void 0,
                    computed_height: void 0,
                    computed_radian_angle: void 0,
                    draggingOnGraphpaper: !1,
                    cachedViewState: {},
                    cachedParsableState: {},
                    cachedUndoRedoState: {}
                });
            return M(u.imageObj, u.image_url, a, c),
                u
        }
        function I(e, t) {
            a.copyProperties({
                from: t,
                to: e,
                props: {
                    id: !1,
                    type: !1,
                    image_url: !1,
                    name: !0,
                    folderId: !0,
                    hidden: !0,
                    secret: !0,
                    center: !0,
                    angle: !0,
                    width: !0,
                    height: !0,
                    opacity: !0,
                    foreground: !0
                }
            })
        }
        function T(e, t) {
            for (var n = {
                errors: [],
                tokens: []
            }, r = 0; r < t.length; r++) {
                var i = t[r];
                i.type.match("image/*") ? n.tokens.push(P(e, i)) : n.errors.push(e.t('The file "__file__" is not an image', {
                    file: i.name
                }))
            }
            return n
        }
        function P(e, t) {
            var n = "" + O++;
            return e.getGraphSettings().config.imageUploadCallback(t, function (r, i) {
                setTimeout(function () {
                    if (r)
                        e.dispatch({
                            type: "image-upload-error",
                            token: n,
                            error: r
                        });
                    else {
                        var o = new Image
                            , s = function () {
                                var r = o.width
                                    , s = o.height
                                    , a = Math.max(r, s) / Math.min(r, s);
                                r < s ? (s = 10,
                                    r = Math.round(10 * s / a) / 10) : (r = 10,
                                        s = Math.round(10 * r / a) / 10),
                                    e.dispatch({
                                        type: "image-upload-success",
                                        token: n,
                                        url: i,
                                        width: r + "",
                                        height: s + "",
                                        name: t.name
                                    })
                            }
                            , a = function () {
                                e.dispatch({
                                    type: "image-upload-error",
                                    token: n,
                                    error: ""
                                })
                            };
                        M(o, i, s, a)
                    }
                })
            }),
                n
        }
        function A(e, t) {
            e.loadStatus = t,
                "loaded" === t && (e.failures = 0),
                "failed" === t && (e.failures += 1)
        }
        function L(e) {
            e.imageObj.src = e.imageObj.src,
                A(e, "loading")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.DEFAULTS = {
                folderId: "",
                hidden: !1,
                secret: !1,
                center: "\\left(0,0\\right)",
                angle: "0",
                width: "10",
                height: "10",
                opacity: 1,
                foreground: !1,
                name: ""
            },
            t.setHidden = u,
            t.setSecret = d,
            t.setMQAttribute = p,
            t.getMQAttribute = h,
            t.setName = f,
            t.setOpacity = m,
            t.setForeground = g,
            t.setImageURL = y,
            t.updateCachedParsableState = v,
            t.onControllerUpdate = b,
            t.onFormulaUpdate = x,
            t.hasInputError = w,
            t.getState = E,
            t.updateCachedViewState = _,
            t.setIsDraggingOnGrapher = S,
            t.updateCachedUndoRedoState = k,
            t.initModel = C,
            t.restoreState = I,
            t.uploadImages = T;
        var O = 0;
        t.uploadImageAndGenerateToken = P,
            t.setLoadStatus = A,
            t.retryLoading = L
    }),
    define("graphing-calc/models/list", ["require", "exports", "lib/color-distance", "./abstract-item", "./expression", "./folder", "./table", "./text", "./helper-expression", "./image", "underscore", "lib/deepCopy"], function (e, t, n, r, i, o, s, a, c, l, u, d) {
        "use strict";
        function p(e) {
            var t = {
                controller: e,
                __itemModelArray: [],
                __itemIdToModel: {},
                __helperIdToModel: {},
                drawOrder: [],
                colorIdx: 0,
                expressionAnalysis: {},
                nextDisplayIndex: 1
            };
            return t
        }
        function h(e) {
            for (var t = 0; t < e.__itemModelArray.length; t++) {
                var n = e.__itemModelArray[t];
                if ("image" === n.type && "loading" === n.loadStatus)
                    return !0
            }
            return !1
        }
        function f(e) {
            var t = u.values(e.controller.getColors())
                , n = t[e.colorIdx];
            return e.colorIdx = (e.colorIdx + 1) % t.length,
                n
        }
        function m(e, t) {
            return e.__itemModelArray[t]
        }
        function g(e) {
            for (var t = 0; t < e.__itemModelArray.length; t++) {
                var n = e.__itemModelArray[t];
                if (_(n))
                    return n
            }
        }
        function y(e) {
            for (var t = e.__itemModelArray.length - 1; t >= 0; t--) {
                var n = e.__itemModelArray[t];
                if (_(n))
                    return n
            }
        }
        function v(e, t) {
            var n;
            do {
                if (t-- ,
                    t === -1)
                    return;
                n = m(e, t)
            } while (n && !_(n)); return n
        }
        function b(e, t) {
            var n, r = q(e);
            do {
                if (t++ ,
                    t === r)
                    return;
                n = m(e, t)
            } while (n && !_(n)); return n
        }
        function x(e) {
            if (e.folderId) {
                var t = e.controller.getListModel()
                    , n = P(t, e.folderId);
                if (n && "folder" === n.type)
                    return n
            }
        }
        function w(e, t) {
            var n = P(e, t);
            if (!n || "folder" !== n.type)
                return 0;
            for (var r = 0, i = e.__itemModelArray.length, o = n.index + 1; o < i && e.__itemModelArray[o].folderId === t; o++)
                r += 1;
            return r
        }
        function E(e) {
            if (!e)
                return !1;
            if (e.secret)
                return !0;
            var t = x(e);
            return !(!t || !t.secret)
        }
        function _(e) {
            return !S(e)
        }
        function S(e) {
            if (!e)
                return !0;
            if (e.controller.isItemBeingDragged(e.id))
                return !1;
            var t = !e.controller.canAdministerSecretFolders();
            if (t && E(e))
                return !0;
            var n = x(e);
            return !(!n || !n.collapsed)
        }
        function k(e) {
            return e.__itemModelArray
        }
        function M(e) {
            return u.values(e.__helperIdToModel)
        }
        function C(e, t) {
            for (var n = 0; n < e.__itemModelArray.length; n++) {
                var r = e.__itemModelArray[n];
                switch (r.type) {
                    case "expression":
                        i.eachLatex(r, t);
                        break;
                    case "table":
                        s.eachLatex(r, t);
                        break;
                    case "image":
                    case "folder":
                    case "text":
                        break;
                    default:
                        var o = r;
                        return o
                }
            }
        }
        function I(e) {
            var t = [];
            C(e, function (e) {
                if (e.indexOf("~") === -1 && e.indexOf("\\sim") === -1)
                    for (var n = /_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g; ;) {
                        var r = n.exec(e);
                        if (!r)
                            break;
                        t.push(parseInt(r[1] || r[2], 10))
                    }
            }),
                t.sort(function (e, t) {
                    return e - t
                });
            for (var n = 1, r = 0; r < t.length; r++)
                t[r] === n && n++;
            return n
        }
        function T(e) {
            var t = [];
            u.each(e.__itemModelArray, function (e) {
                "table" === e.type ? u.each(e.columnModels, function (e) {
                    t.push(e.id)
                }) : t.push(e.id)
            }),
                e.drawOrder = t
        }
        function P(e, t) {
            return e.__itemIdToModel[t]
        }
        function A(e, t) {
            return e.__helperIdToModel[t]
        }
        function L(e, t) {
            var n = c.init(t);
            e.__helperIdToModel[n.id] = n
        }
        function O(e) {
            for (var t = !e.controller.canAdministerSecretFolders(), n = 1, r = 1, i = 0; i < e.__itemModelArray.length; i++) {
                var o = e.__itemModelArray[i];
                o.index = i,
                    o.displayIndex = n,
                    E(o) && (o.secretIndex = r,
                        r += 1),
                    t && E(o) || (n += 1)
            }
            e.nextDisplayIndex = n
        }
        function D(e) {
            e.__itemModelArray = [],
                e.__itemIdToModel = {},
                e.__helperIdToModel = {}
        }
        function q(e) {
            return e.__itemModelArray.length
        }
        function N(e) {
            return 1 === e.nextDisplayIndex
        }
        function F(e) {
            for (var t = [], n = 0; n < e.__itemModelArray.length; n++) {
                var r = e.__itemModelArray[n];
                "expression" === r.type && r.sliderExists && t.push(r)
            }
            return t
        }
        function R(e) {
            return e.selectedItem
        }
        function j(e) {
            return {
                list: e.__itemModelArray.map(function (e) {
                    return e.cachedUndoRedoState
                })
            }
        }
        function B(e, t) {
            return {
                list: e.__itemModelArray.map(function (e) {
                    switch (e.type) {
                        case "expression":
                            return i.getState(e, t);
                        case "image":
                            return l.getState(e, t);
                        case "table":
                            return s.getState(e, t);
                        case "folder":
                            return o.getState(e, t);
                        case "text":
                            return a.getState(e, t);
                        default:
                            var n = e;
                            return n
                    }
                })
            }
        }
        function V(e) {
            for (var t = 0, n = /^[0-9]+$/, r = e.list.length - 1; r >= 0; r--) {
                var i = e.list[r]
                    , o = i.id;
                if (n.test(o)) {
                    var s = parseInt(o, 10);
                    s > t && (t = s)
                }
                if ("table" === i.type && i.columns)
                    for (var a = i.columns.length - 1; a >= 0; a--)
                        if (o = i.columns[a].id,
                            n.test(o)) {
                            var s = parseInt(o, 10);
                            s > t && (t = s)
                        }
            }
            return t
        }
        function U(e, t, r) {
            r || (r = {});
            var i, o;
            for (e.colorIdx = 0,
                D(e),
                e.expressionAnalysis = {},
                i = 0; i < t.list.length; i++) {
                o = G(e, t.list[i]);
                var s = o.color;
                if (r.remapColors && s) {
                    var a = u.values(e.controller.getColors());
                    u.contains(a, s) || (o.color = n.closestColor(s, a))
                }
                e.__itemModelArray.push(o),
                    e.__itemIdToModel[o.id] = o
            }
            if (O(e),
                1 === e.nextDisplayIndex) {
                var c = G(e, {
                    type: "expression",
                    id: e.controller.generateId(),
                    color: e.controller.getNextColor()
                });
                X(e, c, e.__itemModelArray.length)
            }
        }
        function G(e, t) {
            switch (t.type) {
                case "expression":
                    return i.initModel(t, e.controller);
                case "table":
                    return s.initModel(t, e.controller);
                case "image":
                    return l.initModel(t, e.controller);
                case "folder":
                    return o.initModel(t, e.controller);
                case "text":
                    return a.initModel(t, e.controller);
                default:
                    var n = t;
                    return n
            }
        }
        function z(e, t) {
            var n, r, c = e.__itemIdToModel;
            for (e.__itemModelArray = [],
                e.__itemIdToModel = {},
                n = 0; n < t.list.length; n++) {
                var u = t.list[n];
                if (r = c[u.id],
                    r && r.type === u.type)
                    switch (r.type) {
                        case "expression":
                            if (u.type !== r.type)
                                throw new Error("invalid restoration");
                            i.restoreState(r, u);
                            break;
                        case "table":
                            if (u.type !== r.type)
                                throw new Error("invalid restoration");
                            s.restoreState(r, u);
                            break;
                        case "image":
                            if (u.type !== r.type)
                                throw new Error("invalid restoration");
                            l.restoreState(r, u);
                            break;
                        case "folder":
                            if (u.type !== r.type)
                                throw new Error("invalid restoration");
                            o.restoreState(r, u);
                            break;
                        case "text":
                            if (u.type !== r.type)
                                throw new Error("invalid restoration");
                            a.restoreState(r, u);
                            break;
                        default:
                            var d = r;
                            return d
                    }
                else
                    r = G(e, u);
                e.__itemModelArray.push(r),
                    e.__itemIdToModel[r.id] = r
            }
            O(e)
        }
        function H(e, t, n) {
            var r = P(e, t);
            if (r && "expression" === r.type) {
                var i = !n.every(function (e) {
                    return !e.hasOwnProperty("resolved") || e.resolved
                });
                r.unresolved = i
            }
        }
        function W(e, t) {
            var n, r, o, a = d.default(e.expressionAnalysis);
            for (n in t)
                if (t.hasOwnProperty(n)) {
                    o = t[n],
                        r = P(e, n);
                    var p = {
                        isGraphable: !!o.is_graphable,
                        isError: !!o.error,
                        errorMessage: o.error ? e.controller.unpack(o.error) : void 0
                    };
                    if (r)
                        switch (r.type) {
                            case "expression":
                                if (i.onFormulaUpdate(r, o),
                                    o.zero_values && 1 === o.zero_values.length) {
                                    var h = o.zero_values[0].val;
                                    u.isNumber(h) && (p.evaluation = {
                                        type: "Number",
                                        value: h
                                    },
                                        p.evaluationDisplayed = !0),
                                        u.isArray(h) && h.every(u.isNumber) && (p.evaluation = {
                                            type: "ListOfNumber",
                                            value: h.slice()
                                        },
                                            p.evaluationDisplayed = !0)
                                } else
                                    o.hasOwnProperty("constant_value") && u.isNumber(o.constant_value) && (p.evaluation = {
                                        type: "Number",
                                        value: o.constant_value
                                    },
                                        p.evaluationDisplayed = !1);
                                break;
                            case "image":
                                l.onFormulaUpdate(r, o);
                                break;
                            case "table":
                                s.onFormulaUpdate(r, o);
                                break;
                            case "folder":
                            case "text":
                                break;
                            default:
                                var f = r;
                                return f
                        }
                    else {
                        var m = A(e, n);
                        if (!m)
                            continue;
                        c.onFormulaUpdate(e.controller, m, o)
                    }
                    a[n] = p
                }
            e.expressionAnalysis = a
        }
        function Y(e, t) {
            var n = R(e);
            n !== t && (e.selectedItem = t)
        }
        function $(e) {
            for (var t = "", n = 0, i = e.__itemModelArray; n < i.length; n++) {
                var o = i[n];
                "folder" === o.type ? (t = o.id,
                    "" !== o.folderId && r.setFolderId(o, "")) : "" === o.folderId ? t = "" : o.folderId !== t && (r.setFolderId(o, ""),
                        t = "")
            }
        }
        function K(e, t, n, r) {
            if (t !== n) {
                var i = e.__itemModelArray.splice(t, r);
                t < n && (n = n - r + 1),
                    e.__itemModelArray.splice.apply(e.__itemModelArray, [n, 0].concat(i)),
                    O(e)
            }
        }
        function X(e, t, n) {
            var r = String(t.id);
            if (e.__itemIdToModel.hasOwnProperty(r))
                throw Error("Item with id '" + r + "' is already in list");
            e.__itemIdToModel[r] = t,
                e.__itemModelArray.splice(n, 0, t),
                O(e)
        }
        function Q(e, t) {
            X(e, t, q(e))
        }
        function Z(e, t) {
            var n = e.__itemModelArray[t];
            if ("folder" === n.type) {
                for (var r = 0, i = n.index + 1; i < e.__itemModelArray.length; i++) {
                    var o = e.__itemModelArray[i];
                    if (o.folderId !== n.id)
                        break;
                    r += 1,
                        ne(o) && Y(e, void 0),
                        delete e.__itemIdToModel[o.id]
                }
                e.__itemModelArray.splice(t, 1 + r)
            } else
                e.__itemModelArray.splice(t, 1);
            ne(n) && Y(e, void 0),
                delete e.__itemIdToModel[n.id],
                delete e.expressionAnalysis[n.id],
                O(e)
        }
        function J(e, t) {
            var n = P(e, t);
            n && Z(e, n.index)
        }
        function ee(e) {
            var t = R(e);
            if (!t)
                return !1;
            var n = v(e, t.index);
            return !!n && (Y(e, n),
                n.index === q(e) - 1 && "expression" === t.type && i.isEmpty(t) && Z(e, n.index),
                !0)
        }
        function te(e) {
            var t = R(e);
            if (!t)
                return !1;
            var n = b(e, t.index);
            return !!n && (Y(e, n),
                !0)
        }
        function ne(e) {
            return e.controller.getListModel().selectedItem === e
        }
        function re(e, t) {
            e.dragState = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.init = p,
            t.areAnyImagesLoading = h,
            t.getNextColor = f,
            t.getItemByIndex = m,
            t.getFirstSelectableItem = g,
            t.getLastSelectableItem = y,
            t.findPrevSelectableItem = v,
            t.findNextSelectableItem = b,
            t.getParentFolderModel = x,
            t.getNumberOfItemsInFolder = w,
            t.isItemSecret = E,
            t.isItemSelectable = _,
            t.isItemHiddenFromUI = S,
            t.getAllItemModels = k,
            t.getAllHelperItemModels = M,
            t.eachLatex = C,
            t.findAvailableColumnSubscript = I,
            t.updateDrawOrder = T,
            t.getItemById = P,
            t.getHelperExpressionById = A,
            t.addHelperExpression = L,
            t.reindex = O,
            t.removeAllItems = D,
            t.getItemCount = q,
            t.hasNoVisibleExpressions = N,
            t.getAllModelsWithSliders = F,
            t.getSelected = R,
            t.getUndoRedoState = j,
            t.getState = B,
            t.getLargestIntegerId = V,
            t.setListState = U,
            t.modelFromSpec = G,
            t.restoreListState = z,
            t.onGraphComputed = H,
            t.onEvaluatorFormulaUpdates = W,
            t.setSelected = Y,
            t.verifyFolderIntegrity = $,
            t.moveItemsTo = K,
            t.insertItemAtIndex = X,
            t.insertItemAtEnd = Q,
            t.removeItemAtIndex = Z,
            t.removeItemById = J,
            t.selectPrevItem = ee,
            t.selectNextItem = te,
            t.isItemSelected = ne,
            t.setDragState = re
    }),
    define("graphing/draw-image-to-ctx", ["require", "exports", "graphing-calc/models/list"], function (e, t, n) {
        "use strict";
        function r(e, t, r) {
            if (e.computed_x)
                for (var i = 0; i < e.computed_x.length; i++) {
                    var o = e.computed_x[i]
                        , s = e.computed_y[i]
                        , a = e.computed_width[i]
                        , c = e.computed_height[i]
                        , l = e.computed_radian_angle[i];
                    if (isFinite(o) && isFinite(s) && isFinite(a) && isFinite(c) && isFinite(l)) {
                        t.save(),
                            t.globalAlpha = e.opacity;
                        var u = r.mapy(c) - r.mapy(0)
                            , d = r.mapx(a) - r.mapx(0)
                            , p = 0 === l ? 1 : Math.abs(d / a * (c / u))
                            , h = r.mapx(o)
                            , f = r.mapy(s)
                            , m = h - d / 2
                            , g = f + u * p / 2
                            , y = c < 0 ? -1 : 1
                            , v = a < 0 ? -1 : 1
                            , b = m * v
                            , x = g * y
                            , w = Math.abs(d)
                            , E = Math.abs(u);
                        0 !== l && (t.translate(h, f),
                            t.scale(1, 1 / p),
                            t.rotate(l),
                            t.translate(-h, -f)),
                            t.scale(v, y),
                            t.drawImage(e.imageObj, b, x, w, E * p),
                            n.isItemSelected(e) && (t.beginPath(),
                                t.rect(b, x, w, E * p),
                                t.restore(),
                                t.save(),
                                t.strokeStyle = "#6993C7",
                                t.lineWidth = 2,
                                t.stroke()),
                            t.restore()
                    }
                }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.drawImageToCtx = r
    }),
    define("graphing/graphslayer", ["require", "pjs", "./clipping", "./dasheddrawer", "./constants", "./viewport", "graphing/graphmode", "expressions/colors", "expressions/styles", "./draw-image-to-ctx"], function (e) {
        var t = e("pjs")
            , n = e("./clipping")
            , r = e("./dasheddrawer")
            , i = e("./constants")
            , o = e("./viewport")
            , s = e("graphing/graphmode")
            , a = e("expressions/colors")
            , c = e("expressions/styles")
            , l = {}
            , u = e("./draw-image-to-ctx").drawImageToCtx
            , d = function (e) {
                return new o(-3, e.width + 3, -3, e.height + 3)
            }
            , p = t(function (e) {
                e.init = function (e) {
                    if (e.config.plaidMode)
                        for (var t in a)
                            a.hasOwnProperty(t) && "string" == typeof a[t] && (l[a[t]] = document.createElement("img"),
                                l[a[t]].setAttribute("src", "/assets/img/april-fools/" + t.toLowerCase() + ".png"))
                }
                    ,
                    e.redrawToCtx = function (e, t, n, r, i) {
                        if (void 0 === i)
                            throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");
                        i.forEach(function (i) {
                            var o = n[i]
                                , s = r[i];
                            void 0 !== o && o.visible && p.drawSketchToCtx(n[i], e, t),
                                s && s.shouldGraph && s.foreground && u(s, e, t)
                        })
                    }
            });
        return p.eachSegment = function (e, t) {
            for (var n = 0; n < e.branches.length; n++)
                for (var r = e.branches[n], i = 0; i < r.segments.length; i++) {
                    var o = r.segments[i];
                    t(r, o)
                }
        }
            ,
            p.drawSketchToCtx = function (e, t, n) {
                if (e.branches && e.branches.length) {
                    var r = t.lineWidth
                        , o = l[e.color];
                    if (o && o.complete && o.naturalWidth > 0) {
                        var a = t.createPattern(o, "repeat");
                        t.fillStyle = a
                    } else
                        t.fillStyle = e.color;
                    t.strokeStyle = e.color,
                        t.lineJoin = "round",
                        t.lineCap = "round";
                    for (var u = !!n.settings.takingScreenshot, d = 0; d < e.branches.length; d++) {
                        var h = e.branches[d];
                        if (h.graphMode !== s.XYPOINT && h.graphMode !== s.XYPOINT_MOVABLE) {
                            t.desmos_batching = !0,
                                t.beginPath();
                            for (var f = 0; f < h.segments.length; f++) {
                                var m = h.segments[f]
                                    , g = s.Y;
                                if (h.flip && (g = s.X),
                                    h.graphMode && (g = h.graphMode),
                                    g === s.POLYGONFILL)
                                    p.fillPolygonToCtx(t, n, m, h.fillOpacity);
                                else if (g !== s.IMPLICIT) {
                                    var y = h.operator
                                        , v = "<" == y || ">" == y || "<=" == y || ">=" == y || "\\leq" == y || "\\le" == y || "\\geq" == y || "\\ge" == y
                                        , b = "<=" == y || "<" == y || "\\leq" == y || "\\le" == y;
                                    v && p.fillGraphStrokeToCtx(t, n, m, b, g)
                                }
                            }
                            t.globalAlpha = h.fillOpacity || i.FILL_ALPHA,
                                t.fill(),
                                t.globalAlpha = 1,
                                t.desmos_batching = !1
                        }
                    }
                    t.lineWidth = n.settings.graphLineWidth,
                        e.style === c.DOTTED && (t.lineWidth = 2 * n.settings.graphLineWidth),
                        p.eachSegment(e, function (r, i) {
                            if (r.graphMode !== s.XYPOINT && r.graphMode !== s.XYPOINT_MOVABLE) {
                                var o = s.Y;
                                r.flip && (o = s.X),
                                    r.graphMode && (o = r.graphMode);
                                var a = r.operator
                                    , l = "default";
                                "<" == a || ">" == a || "!=" == a || e.style === c.DASHED || r.style === c.DASHED ? l = c.DASHED : e.style !== c.DOTTED && r.style !== c.DOTTED || (l = c.DOTTED,
                                    t.lineWidth = 2 * n.settings.graphLineWidth),
                                    p.drawGraphStrokeToCtx(t, n, i, l, o, a)
                            }
                        }),
                        t.lineWidth = r,
                        p.eachSegment(e, function (e, r) {
                            (e.graphMode === s.XYPOINT && e.showPoint || e.graphMode === s.XYPOINT_MOVABLE && u) && p.drawPointsToCtx(t, n, r, e.style)
                        })
                }
            }
            ,
            p.drawGraphStrokeToCtx = function (e, t, o, s, a, l) {
                e.globalAlpha = t.settings.highlight ? i.HIGHLIGHTED_STROKE_ALPHA : i.STROKE_ALPHA;
                var u, h, f = p.getClippingGraphType(a, "=" !== l, t.settings), m = n.mapSegmentToCanvas(o, t.viewport, t.screen, f), g = n.clipStrokeEdges(m, d(t.screen));
                if (s == c.DASHED) {
                    for (h = new r(e, r.getTotalSegmentLength(g), [11, 7]),
                        h.start(g[0], g[1]),
                        u = 2; u < g.length; u += 2)
                        h.next(g[u], g[u + 1]);
                    h.close()
                } else if (s == c.DOTTED) {
                    for (h = t.settings.projectorMode ? new r(e, r.getTotalSegmentLength(g), [.1, 16]) : new r(e, r.getTotalSegmentLength(g), [.1, 8]),
                        h.start(g[0], g[1]),
                        u = 2; u < g.length; u += 2)
                        h.next(g[u], g[u + 1]);
                    h.close()
                } else {
                    for (e.desmos_batching || e.beginPath(),
                        e.moveTo(g[0], g[1]),
                        u = 0; u < g.length; u += 2)
                        e.lineTo(g[u], g[u + 1]);
                    e.desmos_batching || e.stroke()
                }
                e.globalAlpha = 1
            }
            ,
            p.mapPointToScreen = function (e, t, n) {
                var r = 20
                    , i = e.mapx(t) - .5;
                if (i < -r || i > e.screen.width + r)
                    return null;
                var o = e.mapy(n) - .5;
                return o < -r || o > e.screen.height + r ? null : {
                    x: i,
                    y: o
                }
            }
            ,
            p.drawPointToCtx = function (e, t, n, r, o, s) {
                var a, l = e.lineWidth, u = e.fillStyle, d = p.mapPointToScreen(t, n, r);
                return !!d && (e.globalAlpha = t.settings.highlight ? i.HIGHLIGHTED_POINT_ALPHA : i.POINT_ALPHA,
                    o && (e.globalAlpha = o),
                    e.globalAlpha = i.POINT_ALPHA,
                    e.desmos_batching || e.beginPath(),
                    s === c.CROSS ? (a = .4 * t.settings.pointLineWidth,
                        e.moveTo(d.x - a, d.y - a),
                        e.lineTo(d.x + a, d.y + a),
                        e.moveTo(d.x + a, d.y - a),
                        e.lineTo(d.x - a, d.y + a),
                        e.lineWidth = .3 * t.settings.pointLineWidth) : s === c.OPEN ? (a = .42 * t.settings.pointLineWidth,
                            e.moveTo(d.x + a, d.y),
                            e.arc(d.x, d.y, a, 0, 2 * Math.PI, !0),
                            e.closePath(),
                            e.fillStyle = "white",
                            e.lineWidth = .25 * t.settings.pointLineWidth,
                            e.fill()) : (e.moveTo(d.x - .1, d.y - .1),
                                e.lineTo(d.x - .1, d.y + .1),
                                e.lineTo(d.x + .1, d.y + .1),
                                e.lineTo(d.x + .1, d.y - .1)),
                    e.desmos_batching || e.stroke(),
                    e.globalAlpha = 1,
                    e.lineWidth = l,
                    e.fillStyle = u,
                    !0)
            }
            ,
            p.drawPointsToCtx = function (e, t, n, r) {
                var i = e.lineWidth;
                e.lineWidth = t.settings.pointLineWidth;
                for (var o = 0; o < n.length; o++)
                    p.drawPointToCtx(e, t, n[o][0], n[o][1], !1, r);
                e.lineWidth = i
            }
            ,
            p.fillGraphStrokeToCtx = function (e, t, r, o, a) {
                e.globalAlpha = a === s.POLAR ? i.POLAR_ALPHA : i.FILL_ALPHA;
                var c, l = null, u = null;
                if (a === s.POLAR) {
                    u = n.ALL;
                    var h = o ? 0 : t.viewport.polarDiameter()
                        , f = t.settings.degreeMode ? 180 : 2 * Math.PI;
                    l = n.computePolarFill(r, h, f)
                } else
                    a === s.Y ? (u = n.Y,
                        c = o ? t.viewport.ymin : t.viewport.ymax,
                        l = n.computeCartesianFill(r, c)) : a === s.X && (u = n.X,
                            c = o ? t.viewport.xmin : t.viewport.xmax,
                            l = n.computeCartesianFill(r, c));
                for (var m = d(t.screen), g = 0; g < l.length; g++) {
                    var y = p.getClippingGraphType(a, !0, t.settings)
                        , v = n.mapSegmentToCanvas(l[g], t.viewport, t.screen, y)
                        , b = n.clipFillEdges(v, m, u);
                    if (b.length >= 6) {
                        e.desmos_batching || e.beginPath(),
                            e.moveTo(b[0], b[1]);
                        for (var x = 2; x < b.length; x += 2)
                            e.lineTo(b[x], b[x + 1]);
                        e.lineTo(b[0], b[1]),
                            e.desmos_batching || e.fill()
                    }
                }
                e.globalAlpha = 1
            }
            ,
            p.fillPolygonToCtx = function (e, t, r, o) {
                e.globalAlpha = o || i.FILL_ALPHA;
                var s = d(t.screen)
                    , a = n.mapSegmentToCanvas(r, t.viewport, t.screen, n.Y_EQUALS)
                    , c = n.clipFillEdges(a, s, n.ALL);
                if (c.length >= 6) {
                    e.desmos_batching || e.beginPath(),
                        e.moveTo(c[0], c[1]);
                    for (var l = 2; l < c.length; l += 2)
                        e.lineTo(c[l], c[l + 1]);
                    e.desmos_batching || e.fill()
                }
                e.globalAlpha = 1
            }
            ,
            p.getClippingGraphType = function (e, t, r) {
                switch (e) {
                    case s.X:
                        return n.X_EQUALS;
                    case s.IMPLICIT:
                    case s.PARAMETRIC:
                    case s.Y:
                        return n.Y_EQUALS;
                    case s.POLAR:
                        return r.degreeMode ? t ? n.POLAR_DEGREE_INEQUALITY : n.POLAR_DEGREE_EQUALITY : t ? n.POLAR_RADIAN_INEQUALITY : n.POLAR_RADIAN_EQUALITY
                }
            }
            ,
            p
    }),
    define("graphing/poidotslayer", ["require", "loadcss!poi", "pjs", "./graphslayer", "./constants"], function (e) {
        e("loadcss!poi");
        var t = e("pjs")
            , n = e("./graphslayer")
            , r = e("./constants")
            , i = t(function (e) {
                e.init = function () {
                    this.savedPOI = []
                }
                    ,
                    e.redrawToCtx = function (e, t, n) {
                        var r = [];
                        for (var o in n) {
                            var s = n[o];
                            if (s.visible) {
                                s.showHighlight && i.drawSketchHighlight(s, e, t);
                                var a = s.getPOI();
                                (s.showPOI || a.length && a[0].isAttachedToPlottedPoint()) && r.push.apply(r, i.drawPOIs(a, e, "#AAAAAA", t))
                            }
                        }
                        this.savedPOI = r
                    }
                    ,
                    e.getDrawnPOI = function () {
                        return this.savedPOI
                    }
            });
        return i.drawSketchHighlight = function (e, t, r) {
            r.settings.setProperty("highlight", !0),
                n.drawSketchToCtx(e, t, r),
                r.settings.setProperty("highlight", !1)
        }
            ,
            i.drawPOIs = function (e, t, i, o) {
                t.lineWidth = o.settings.pointLineWidth,
                    t.strokeStyle = i || "#AAAAAA",
                    t.fillStyle = i || "#AAAAAA",
                    t.lineJoin = "round",
                    t.lineCap = "round";
                var s = t.globalAlpha;
                t.globalAlpha = r.POI_ALPHA;
                var a, c, l = [], u = e.length;
                if (u && e[0].isAttachedToPlottedPoint())
                    for (a = 0; a < u; a++)
                        c = e[a],
                            n.mapPointToScreen(o, c.x, c.y) && l.push(c);
                else
                    for (a = 0; a < u; a++)
                        c = e[a],
                            n.drawPointToCtx(t, o, c.x, c.y, r.POI_ALPHA) && l.push(c);
                return t.globalAlpha = s,
                    l
            }
            ,
            i
    }),
    define("graphing/domlayer", ["require", "pjs", "jquery", "browser", "jquery.disabletextselection"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("browser");
        e("jquery.disabletextselection");
        var i = t(function (e) {
            e.init = function (e) {
                this.$ = n("<div class='dcg-graph-outer'></div>").css("position", "absolute").css("overflow", "hidden").disableTextSelection(r.IS_IE),
                    this.dom_node = n("<div></div>").css("position", "relative").css("display", "block").disableTextSelection(r.IS_IE),
                    this.$root = e,
                    this.$.append(this.dom_node)
            }
                ,
                e.addGlobalClass = function (e) {
                    this.$root.hasClass(e) || this.$root.addClass(e)
                }
                ,
                e.removeGlobalClass = function (e) {
                    this.$root.hasClass(e) && this.$root.removeClass(e)
                }
                ,
                e.resize = function (e, t) {
                    e === this.width && t === this.height || (this.width = e,
                        this.height = t,
                        this.$.css("width", e + "px").css("height", t + "px"),
                        this.dom_node.css("width", e + "px").css("height", t + "px"))
                }
                ,
                e.redraw = function () { }
        });
        return i
    }),
    define("graphing/poi", ["require", "math/poi", "./graphmode"], function (e) {
        function t(e, t, n, r, o, s, a) {
            this.x = e,
                this.y = t,
                this.type = n,
                this.sketch = r,
                this.branch = o,
                this.pointIdxOnBranch = s,
                this.bareLabel = void 0 !== a && a,
                this.id = i++
        }
        var n = e("math/poi").default
            , r = e("./graphmode")
            , i = 1;
        return t.prototype.getLabel = function () {
            var e = this.sketch && this.sketch.branches[this.branch];
            return this.type === n.LABEL && e ? e.labels[this.pointIdxOnBranch] || "" : ""
        }
            ,
            t.prototype.getGraphMode = function () {
                return this.sketch.branches[this.branch].graphMode
            }
            ,
            t.prototype.getCompiledFunction = function () {
                return this.sketch.branches[this.branch].compiled.fn
            }
            ,
            t.prototype.isAttachedToPlottedPoint = function () {
                return this.type === n.DEFINITION || this.type === n.LABEL
            }
            ,
            t.prototype.isMovable = function () {
                return this.getGraphMode() === r.XYPOINT_MOVABLE
            }
            ,
            t.prototype.isPersistent = function () {
                return this.type === n.LABEL
            }
            ,
            t.prototype.getLabelSize = function () {
                var e = this.sketch && this.sketch.branches[this.branch];
                if (this.type === n.LABEL && e)
                    return e.labelSize
            }
            ,
            t.prototype.isBareLabel = function () {
                return this.bareLabel
            }
            ,
            t.prototype.getMovablePoint = function () {
                return this.sketch.getMovablePoints()[this.pointIdxOnBranch]
            }
            ,
            t
    }),
    define("graphing/integral-image", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t, n) {
            return Math.max(t, Math.min(n, e))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function () {
            function e(e) {
                var t = e.data
                    , n = e.width
                    , r = e.height;
                this.imageData = e;
                for (var i = 1; i < n; i++)
                    t[i] += t[i - 1];
                for (var o = 1; o < r; o++)
                    t[o * n] += t[o * n - n];
                for (var s = n * r - n - r + 1, a = n - 1, c = 0; c < s; c++) {
                    var i = 1 + c % a
                        , o = 1 + Math.floor(c / a)
                        , l = o * n
                        , u = i - 1 + l
                        , d = i + l - n
                        , p = i - 1 + l - n;
                    t[l + i] += t[u] + t[d] - t[p]
                }
            }
            return e.prototype.getSumForValidRect = function (e) {
                var t = e.left - 1
                    , n = e.right - 1
                    , r = e.top - 1
                    , i = e.bottom - 1
                    , o = this.imageData.width
                    , s = this.imageData.data
                    , a = s[t + r * o]
                    , c = s[n + r * o]
                    , l = s[t + i * o]
                    , u = s[n + i * o];
                return t >= 0 && r >= 0 ? u - c - l + a : t >= 0 ? u - l : r >= 0 ? u - c : u
            }
                ,
                e.prototype.getSum = function (e) {
                    var t = {
                        left: n(Math.floor(e.left), 0, this.imageData.width),
                        right: n(Math.ceil(e.right), 0, this.imageData.width),
                        top: n(Math.floor(e.top), 0, this.imageData.height),
                        bottom: n(Math.ceil(e.bottom), 0, this.imageData.height)
                    };
                    return t.left >= t.right || t.top >= t.bottom ? 0 : this.getSumForValidRect(t)
                }
                ,
                e
        }();
        t.default = r
    }),
    define("graphing/automatic-label-placer", ["require", "exports", "graphing/integral-image", "underscore"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            var r = t.width * t.height > 0;
            if (!r)
                return new n.default({
                    width: 0,
                    height: 0,
                    data: []
                });
            b.width = 0,
                b.width = Math.round(t.width * v),
                b.height = Math.round(t.height * v);
            var i = b.getContext("2d");
            i.save(),
                i.scale(b.width / e.canvas.width, b.height / e.canvas.height),
                i.drawImage(e.canvas, 0, 0),
                i.restore();
            var o = i.getImageData(0, 0, b.width, b.height)
                , s = o.data;
            s.length / 4 !== x.length,
                x = new Array(s.length / 4);
            for (var a = x, c = 0; c < a.length; c++)
                a[c] = s[4 * c + 3];
            var l = new n.default({
                width: o.width,
                height: o.height,
                data: a
            });
            return l
        }
        function o(e) {
            for (var t = 0; t < e.length; t++) {
                var n = s(t, e);
                e[t] = [n]
            }
            return e.map(function (e) {
                return e[0]
            })
        }
        function s(e, t) {
            var n = 1 / 0
                , r = -1
                , i = t[e];
            if (1 === i.length)
                return i[0];
            for (var o = 0; o < i.length; o++) {
                var s = t[e][o].staticScore
                    , c = a(e, o, t)
                    , l = s + c;
                (r === -1 || l < n) && (n = l,
                    r = o)
            }
            return i[r]
        }
        function a(e, t, n) {
            for (var r = 0, i = n[e][t], o = 0; o < n.length; o++)
                if (o !== e) {
                    for (var s = 0, a = n[o], c = a.length - 1; c >= 0; c--) {
                        var l = a[c]
                            , u = Math.max(0, Math.min(i.right, l.right) - Math.max(i.left, l.left))
                            , d = Math.max(0, Math.min(i.bottom, l.bottom) - Math.max(i.top, l.top));
                        s += u * d
                    }
                    r += s / a.length
                }
            return r
        }
        function c(e, t) {
            var n = t.getSum({
                left: e.left * v,
                right: e.right * v,
                top: e.top * v,
                bottom: e.bottom * v
            });
            return n /= 200,
                n /= v * v
        }
        function l(e, t) {
            var n = 0;
            return t.forEach(function (t) {
                n += d(e, t)
            }),
                n
        }
        function u(e, t) {
            var n = d(e, t);
            return 10 * (e.width * e.height - n)
        }
        function d(e, t) {
            var n = Math.max(0, Math.min(e.right, t.right) - Math.max(e.left, t.left))
                , r = Math.max(0, Math.min(e.bottom, t.bottom) - Math.max(e.top, t.top));
            return n * r
        }
        function p(e, t, n) {
            var r;
            return function () {
                return r || (r = {
                    domObstructions: n,
                    viewport: {
                        left: 0,
                        right: t.width,
                        top: 0,
                        bottom: t.height
                    },
                    integralImage: i(e, t)
                }),
                    r
            }
        }
        function h(e, t) {
            if (!(t.length <= 1))
                for (var n = e(), r = 0, i = t; r < i.length; r++) {
                    var o = i[r];
                    o.staticScore += u(o, n.viewport),
                        o.staticScore += l(o, n.domObstructions),
                        o.staticScore += c(o, n.integralImage)
                }
        }
        function f(e, t) {
            var n = t.pt_radius
                , i = Math.round(n / Math.sqrt(2))
                , o = []
                , s = t.pt_x
                , a = t.pt_y
                , c = t.width
                , l = t.height
                , u = -(1 / 0)
                , d = 400
                , p = 1 / 0;
            o.push({
                left: s - c / 2,
                top: a - l / 2,
                staticScore: t.nakedLabel ? u : p,
                orientation: "center"
            }),
                o.push({
                    left: s + n + 3,
                    top: a - l / 2,
                    staticScore: d,
                    orientation: "right"
                }),
                o.push({
                    left: s - (n + c) - 3,
                    top: a - l / 2,
                    staticScore: d,
                    orientation: "left"
                }),
                o.push({
                    left: s - c / 2,
                    top: a - (l + n),
                    staticScore: d,
                    orientation: "top"
                }),
                o.push({
                    left: s - (c + i),
                    top: a - (l + i),
                    staticScore: d,
                    orientation: "tl"
                }),
                o.push({
                    left: s + i,
                    top: a - (l + i),
                    staticScore: d,
                    orientation: "tr"
                }),
                o.push({
                    left: s - c / 2,
                    top: a + n,
                    staticScore: d,
                    orientation: "bottom"
                }),
                o.push({
                    left: s - (c + i),
                    top: a + i,
                    staticScore: d,
                    orientation: "bl"
                }),
                o.push({
                    left: s + i,
                    top: a + i,
                    staticScore: d,
                    orientation: "br"
                });
            var f = o.map(function (e) {
                var n = Math.round(e.left)
                    , r = Math.round(e.left + c)
                    , i = Math.round(e.top)
                    , o = Math.round(e.top + l);
                return {
                    pt_x: Math.round(s),
                    pt_y: Math.round(a),
                    left: n,
                    right: r,
                    top: i,
                    bottom: o,
                    width: r - n,
                    height: o - i,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (f = r.filter(f, function (e) {
                return e.orientation === t.priorOrientation
            })),
                h(e, f),
                f
        }
        function m(e, t) {
            for (var n = [], i = t.width, o = t.height, s = i / 2, a = o / 2, c = t.pt_x1, l = t.pt_y1, u = t.pt_x2, d = t.pt_y2, p = 5, f = (d - l) / (u - c), m = Math.atan2(d - l, u - c) + Math.PI / 2, g = p * Math.cos(m), y = p * Math.sin(m), v = Math.min(l, d) - Math.abs(y) - o, b = Math.max(l, d) + Math.abs(y), x = [.5, .33, .66, 0, 1], w = [], E = 0, _ = x; E < _.length; E++) {
                var S = _[E];
                w.push({
                    x: c * (1 - S) + u * S,
                    y: l * (1 - S) + d * S
                })
            }
            for (var k = 0; k < w.length; k++) {
                var M, C, I, T, P = w[k];
                if (f >= 2 || f <= -2) {
                    I = T = P.y - a;
                    var A = Math.abs((u - c) / (d - l) * a) + Math.abs(g);
                    M = P.x + A,
                        C = P.x - A - i
                } else if (f <= .05 && f >= -.05) {
                    M = C = P.x - s;
                    var L = Math.abs(f * s) + Math.abs(y);
                    I = P.y - L - o,
                        T = P.y + L
                } else
                    g > 0 ? (M = P.x + g,
                        C = P.x - g - i) : (M = P.x + g - i,
                            C = P.x - g),
                        y > 0 ? (I = P.y + y,
                            T = P.y - y - o) : (I = P.y + y - o,
                                T = P.y - y);
                I < v ? I = v : I > b && (I = b),
                    T < v ? T = v : T > b && (T = b);
                var O = (u - c) * (I - l) - (d - l) * (M - c) > 0;
                n.push({
                    pt_x: P.x,
                    pt_y: P.y,
                    left: M,
                    top: I,
                    staticScore: 0,
                    orientation: k.toString() + (O ? "-a" : "-b")
                }),
                    n.push({
                        pt_x: P.x,
                        pt_y: P.y,
                        left: C,
                        top: T,
                        staticScore: 0,
                        orientation: k.toString() + (O ? "-b" : "-a")
                    })
            }
            var D = n.map(function (e) {
                var n = Math.round(e.left)
                    , r = Math.round(e.left + i)
                    , s = Math.round(e.top)
                    , a = Math.round(e.top + o);
                return {
                    pt_x: Math.round(e.pt_x),
                    pt_y: Math.round(e.pt_y),
                    left: n,
                    right: r,
                    top: s,
                    bottom: a,
                    width: r - n,
                    height: a - s,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (D = r.filter(D, function (e) {
                return e.orientation === t.priorOrientation
            })),
                h(e, D),
                D
        }
        function g(e, t) {
            var n = []
                , i = t.pt_x
                , o = t.pt_y
                , s = t.width
                , a = t.height
                , c = t.startAngle
                , l = t.endAngle;
            l < c && (l += 2 * Math.PI);
            var u = (c + l) / 2
                , d = t.isRightAngle ? t.radius * Math.sqrt(2) : t.radius + 4
                , p = d + Math.sqrt(t.width * t.width / 4 + t.height * t.height / 4)
                , f = []
                , m = p * Math.sin(u);
            m > d + .5 * a && (m = d + .5 * a),
                m < -d - .5 * a && (m = -d - .5 * a),
                f.push({
                    x: i + p * Math.cos(u) - s / 2,
                    y: o + m - a / 2
                });
            for (var g = 0; g < f.length; g++) {
                var y = f[g];
                n.push({
                    pt_x: y.x,
                    pt_y: y.y,
                    left: y.x,
                    top: y.y,
                    staticScore: 0,
                    orientation: g.toString() + "-a"
                })
            }
            var v = n.map(function (e) {
                var n = Math.round(e.left)
                    , r = Math.round(e.left + s)
                    , i = Math.round(e.top)
                    , o = Math.round(e.top + a);
                return {
                    pt_x: Math.round(e.pt_x),
                    pt_y: Math.round(e.pt_y),
                    left: n,
                    right: r,
                    top: i,
                    bottom: o,
                    width: r - n,
                    height: o - i,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (v = r.filter(v, function (e) {
                return e.orientation === t.priorOrientation
            })),
                h(e, v),
                v
        }
        function y(e, t) {
            for (var n = [], i = t.width, o = t.height, s = 10, a = Math.round(s / Math.sqrt(2)), c = 0, l = 50, u = 0, d = 0, p = 0, f = 0; f < t.path.length - 2; f += 2)
                p += 1,
                    u += t.path[f],
                    d += t.path[f + 1];
            var m = u / p
                , g = d / p;
            n.push({
                left: m - i / 2,
                top: g - o / 2,
                staticScore: c,
                orientation: "center"
            }),
                n.push({
                    left: m + s + 3,
                    top: g - o / 2,
                    staticScore: l,
                    orientation: "right"
                }),
                n.push({
                    left: m - (s + i) - 3,
                    top: g - o / 2,
                    staticScore: l,
                    orientation: "left"
                }),
                n.push({
                    left: m - i / 2,
                    top: g - (o + s),
                    staticScore: l,
                    orientation: "top"
                }),
                n.push({
                    left: m - (i + a),
                    top: g - (o + a),
                    staticScore: l,
                    orientation: "tl"
                }),
                n.push({
                    left: m + a,
                    top: g - (o + a),
                    staticScore: l,
                    orientation: "tr"
                }),
                n.push({
                    left: m - i / 2,
                    top: g + s,
                    staticScore: l,
                    orientation: "bottom"
                }),
                n.push({
                    left: m - (i + a),
                    top: g + a,
                    staticScore: l,
                    orientation: "bl"
                }),
                n.push({
                    left: m + a,
                    top: g + a,
                    staticScore: l,
                    orientation: "br"
                });
            var y = n.map(function (e) {
                var n = Math.round(e.left)
                    , r = Math.round(e.left + i)
                    , s = Math.round(e.top)
                    , a = Math.round(e.top + o);
                return {
                    pt_x: Math.round(m),
                    pt_y: Math.round(g),
                    left: n,
                    right: r,
                    top: s,
                    bottom: a,
                    width: r - n,
                    height: a - s,
                    staticScore: t.priorOrientation === e.orientation ? e.staticScore - 20 : e.staticScore,
                    orientation: e.orientation
                }
            });
            return t.keepOrientation && t.priorOrientation && (y = r.filter(y, function (e) {
                return e.orientation === t.priorOrientation
            })),
                h(e, y),
                y
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var v = .5
            , b = document.createElement("canvas")
            , x = [];
        t.getIntegralImage = i,
            t.computePositions = o,
            t.buildStaticEnvGetter = p,
            t.generateCandidatesForPoint = f,
            t.generateCandidatesForSegment = m,
            t.generateCandidatesForAngle = g,
            t.generateCandidatesForPolygon = y
    }),
    function () {
        function e() { }
        function t(e) {
            var t = x.call(arguments, 1);
            return function () {
                return e.apply(this, t)
            }
        }
        function n(e, t) {
            if (!t)
                throw new Error("prayer failed: " + e)
        }
        function r(e) {
            n("a direction was passed", e === E || e === _)
        }
        function i() {
            C || (C = !0,
                setTimeout(o))
        }
        function o() {
            C = !1,
                M = {}
        }
        function s(e, t) {
            var n = e[E];
            if (n)
                for (; n !== e[_][_]; n = n[_]) {
                    var r = t(n);
                    if (r === !1)
                        break
                }
        }
        function a(e, t, n) {
            var r = e[E];
            if (!r)
                return t;
            for (; r !== e[_][_]; r = r[_])
                t = n(t, r);
            return t
        }
        function c(e, t, r) {
            n("a parent is always present", e),
                n("leftward is properly set up", function () {
                    return t ? t[_] === r && t.parent === e : e.ends[E] === r
                }()),
                n("rightward is properly set up", function () {
                    return r ? r[E] === t && r.parent === e : e.ends[_] === t
                }())
        }
        function l() {
            window.console && console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
        }
        function u(e) {
            return l(),
                Ne(e)
        }
        function d(t) {
            function n(e) {
                if (!e || !e.nodeType)
                    return null;
                var t = I.getNodeOfElement(S(e).children(".dcg-mq-root-block")[0])
                    , n = t && t.controller;
                return n ? i[n.KIND_OF_MQ](n) : null
            }
            function r(e, t) {
                t && t.handlers && (t.handlers = {
                    fns: t.handlers,
                    APIClasses: i
                });
                for (var n in t)
                    if (t.hasOwnProperty(n)) {
                        var r = t[n]
                            , o = F[n];
                        e[n] = o ? o(r) : r
                    }
            }
            if (!(B <= t && t <= V))
                throw "Only interface versions between " + B + " and " + V + " supported. You specified: " + t;
            var i = {};
            n.L = E,
                n.R = _,
                n.saneKeyboardEvents = G,
                n.config = function (e) {
                    return r(N.p, e),
                        this
                }
                ,
                n.registerEmbed = function (e, t) {
                    if (!/^[a-z][a-z0-9]*$/i.test(e))
                        throw "Embed name must start with letter and be only letters and digits";
                    j[e] = t
                }
                ;
            var o = i.AbstractMathQuill = w(R, function (e) {
                e.init = function (e) {
                    this.__controller = e,
                        this.__options = e.options,
                        this.id = e.id,
                        this.data = e.data
                }
                    ,
                    e.__mathquillify = function (e) {
                        var t = this.__controller
                            , n = t.root
                            , r = t.container;
                        t.createTextarea();
                        var i = r.addClass(e).contents().detach();
                        n.jQ = S('<span class="dcg-mq-root-block"/>').appendTo(r),
                            I.linkElementByBlockId(n.jQ[0], n.id),
                            this.latex(i.text()),
                            this.revert = function () {
                                return r.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(i)
                            }
                    }
                    ,
                    e.config = function (e) {
                        return r(this.__options, e),
                            this
                    }
                    ,
                    e.el = function () {
                        return this.__controller.container[0]
                    }
                    ,
                    e.text = function () {
                        return this.__controller.exportText()
                    }
                    ,
                    e.mathspeak = function () {
                        return this.__controller.exportMathSpeak()
                    }
                    ,
                    e.latex = function (e) {
                        return arguments.length > 0 ? (this.__controller.renderLatexMath(e),
                            this.__controller.blurred && this.__controller.cursor.hide().parent.blur(),
                            this) : this.__controller.exportLatex()
                    }
                    ,
                    e.html = function () {
                        return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g, "").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i, "").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/, "").replace(/ class=(""|(?= |>))/g, "")
                    }
                    ,
                    e.reflow = function () {
                        return this.__controller.root.postOrder(function (e) {
                            e.reflow()
                        }),
                            this
                    }
            });
            n.prototype = o.prototype,
                i.EditableField = w(o, function (t, n) {
                    t.__mathquillify = function () {
                        return n.__mathquillify.apply(this, arguments),
                            this.__controller.editable = !0,
                            this.__controller.delegateMouseEvents(),
                            this.__controller.editablesTextareaEvents(),
                            this
                    }
                        ,
                        t.focus = function () {
                            return this.__controller.textarea.focus(),
                                this.__controller.scrollHoriz(),
                                this
                        }
                        ,
                        t.blur = function () {
                            return this.__controller.textarea.blur(),
                                this
                        }
                        ,
                        t.write = function (e) {
                            return this.__controller.writeLatex(e),
                                this.__controller.scrollHoriz(),
                                this.__controller.blurred && this.__controller.cursor.hide().parent.blur(),
                                this
                        }
                        ,
                        t.cmd = function (e) {
                            var t = this.__controller.notify()
                                , n = t.cursor;
                            if (/^\\[a-z]+$/i.test(e)) {
                                e = e.slice(1);
                                var r = P[e];
                                r && (e = r(e),
                                    n.selection && e.replaces(n.replaceSelection()),
                                    e.createLeftOf(n.show()))
                            } else
                                n.parent.write(n, e);
                            return t.blurred && n.hide().parent.blur(),
                                t.scrollHoriz(),
                                this
                        }
                        ,
                        t.select = function () {
                            var e = this.__controller;
                            for (e.notify("move").cursor.insAtRightEnd(e.root); e.cursor[E];)
                                e.selectLeft();
                            return this
                        }
                        ,
                        t.clearSelection = function () {
                            return this.__controller.cursor.clearSelection(),
                                this
                        }
                        ,
                        t.moveToDirEnd = function (e) {
                            return this.__controller.notify("move").cursor.insAtDirEnd(e, this.__controller.root),
                                this
                        }
                        ,
                        t.moveToLeftEnd = function () {
                            return this.moveToDirEnd(E)
                        }
                        ,
                        t.moveToRightEnd = function () {
                            return this.moveToDirEnd(_)
                        }
                        ,
                        t.keystroke = function (t, n) {
                            for (var t = t.replace(/^\s+|\s+$/g, "").split(/\s+/), r = 0; r < t.length; r += 1)
                                this.__controller.keystroke(t[r], n || {
                                    preventDefault: e
                                });
                            return this
                        }
                        ,
                        t.typedText = function (e) {
                            for (var t = 0; t < e.length; t += 1)
                                this.__controller.typedText(e.charAt(t));
                            return this
                        }
                        ,
                        t.dropEmbedded = function (e, t, n) {
                            var r = e - S(window).scrollLeft()
                                , i = t - S(window).scrollTop()
                                , o = document.elementFromPoint(r, i);
                            this.__controller.seek(S(o), e, t);
                            var s = qe().setOptions(n);
                            s.createLeftOf(this.__controller.cursor)
                        }
                        ,
                        t.setAriaLabel = function (e) {
                            return e && "string" == typeof e && "" != e ? this.__controller.ariaLabel = e : this.__controller.ariaLabel = "MathQuill Input",
                                this
                        }
                        ,
                        t.getAriaLabel = function () {
                            return this.__controller.ariaLabel || "MathQuill Input"
                        }
                        ,
                        t.setAriaPostLabel = function (e) {
                            return e && "string" == typeof e && "" != e ? this.__controller.ariaPostLabel = e : this.__controller.ariaPostLabel = "",
                                this
                        }
                        ,
                        t.getAriaPostLabel = function () {
                            return this.__controller.ariaPostLabel || ""
                        }
                        ,
                        t.clickAt = function (e, t, n) {
                            n = n || document.elementFromPoint(e, t);
                            var r = this.__controller
                                , i = r.root;
                            return y.contains(i.jQ[0], n) || (n = i.jQ[0]),
                                r.seek(S(n), e + pageXOffset, t + pageYOffset),
                                r.blurred && this.focus(),
                                this
                        }
                        ,
                        t.ignoreNextMousedown = function (e) {
                            return this.__controller.cursor.options.ignoreNextMousedown = e,
                                this
                        }
                }),
                n.EditableField = function () {
                    throw "wtf don't call me, I'm 'abstract'"
                }
                ,
                n.EditableField.prototype = i.EditableField.prototype;
            for (var s in q)
                (function (e, r) {
                    var o = i[e] = r(i);
                    n[e] = function (r, i) {
                        var s = n(r);
                        if (s instanceof o || !r || !r.nodeType)
                            return s;
                        var a = D(o.RootBlock(), S(r), N());
                        return a.KIND_OF_MQ = e,
                            o(a).__mathquillify(i, t)
                    }
                        ,
                        n[e].prototype = o.prototype
                }
                )(s, q[s]);
            return n
        }
        function p(e) {
            for (var t = "moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "), n = 0; n < t.length; n += 1)
                (function (t) {
                    e[t] = function (e) {
                        this.controller.handle(t, e)
                    }
                }
                )(t[n]);
            e.reflow = function () {
                this.controller.handle("reflow"),
                    this.controller.handle("edited"),
                    this.controller.handle("edit")
            }
        }
        function h(e) {
            var t = this.parent
                , n = e;
            do {
                if (n[_])
                    return e.insLeftOf(t);
                n = n.parent.parent
            } while (n !== t); e.insRightOf(t)
        }
        function f(e, t) {
            e.jQadd = function () {
                t.jQadd.apply(this, arguments),
                    this.delimjQs = this.jQ.children(":first").add(this.jQ.children(":last")),
                    this.contentjQ = this.jQ.children(":eq(1)")
            }
                ,
                e.reflow = function () {
                    var e = this.contentjQ.outerHeight() / parseFloat(this.contentjQ.css("fontSize"));
                    ge(this.delimjQs, v(1 + .2 * (e - 1), 1.2), 1.2 * e)
                }
        }
        function m(e, n, r) {
            var n = n || e
                , i = Le[e]
                , o = Le[n];
            A[e] = t(Ae, E, e, i, n, o),
                A[i] = t(Ae, _, e, i, n, o),
                Oe[e] = Oe[i] = r
        }
        var g, y = window.jQuery, v = Math.min, b = Math.max;
        if (!y)
            throw "MathQuill requires jQuery 1.5.2+ to be loaded first";
        var x = [].slice
            , w = function (e, t, n) {
                function r(e) {
                    return "object" == typeof e
                }
                function i(e) {
                    return "function" == typeof e
                }
                function o() { }
                return function s(a, c) {
                    function l() {
                        var e = new u;
                        return i(e.init) && e.init.apply(e, arguments),
                            e
                    }
                    function u() { }
                    c === n && (c = a,
                        a = Object),
                        l.Bare = u;
                    var d, p = o[e] = a[e], h = u[e] = l[e] = l.p = new o;
                    return h.constructor = l,
                        l.extend = function (e) {
                            return s(l, e)
                        }
                        ,
                        (l.open = function (e) {
                            if (d = {},
                                i(e) ? d = e.call(l, h, p, l, a) : r(e) && (d = e),
                                r(d))
                                for (var n in d)
                                    t.call(d, n) && (h[n] = d[n]);
                            return i(h.init) || (h.init = a),
                                l
                        }
                        )(c)
                }
            }("prototype", {}.hasOwnProperty)
            , E = -1
            , _ = 1
            , S = w(y, function (e) {
                e.insDirOf = function (e, t) {
                    return e === E ? this.insertBefore(t.first()) : this.insertAfter(t.last())
                }
                    ,
                    e.insAtDirEnd = function (e, t) {
                        return e === E ? this.prependTo(t) : this.appendTo(t)
                    }
            })
            , k = w(function (e) {
                e.parent = 0,
                    e[E] = 0,
                    e[_] = 0,
                    e.init = function (e, t, n) {
                        this.parent = e,
                            this[E] = t,
                            this[_] = n
                    }
                    ,
                    this.copy = function (e) {
                        return k(e.parent, e[E], e[_])
                    }
            })
            , M = {}
            , C = !1
            , I = w(function (e) {
                function t() {
                    return n += 1
                }
                e[E] = 0,
                    e[_] = 0,
                    e.parent = 0;
                var n = 0;
                this.getNodeOfElement = function (e) {
                    if (e) {
                        if (!e.nodeType)
                            throw new Error("must pass an HTMLElement to Node.getNodeOfElement");
                        return e.mqBlockNode || e.mqCmdNode
                    }
                }
                    ,
                    this.linkElementByBlockId = function (e, t) {
                        I.linkElementByBlockNode(e, M[t])
                    }
                    ,
                    this.linkElementByBlockNode = function (e, t) {
                        e.mqBlockNode = t
                    }
                    ,
                    this.linkElementByCmdNode = function (e, t) {
                        e.mqCmdNode = t
                    }
                    ,
                    e.init = function () {
                        this.id = t(),
                            M[n] = this,
                            i(n, this),
                            this.ends = {},
                            this.ends[E] = 0,
                            this.ends[_] = 0
                    }
                    ,
                    e.toString = function () {
                        return "{{ MathQuill Node #" + this.id + " }}"
                    }
                    ,
                    e.jQ = S(),
                    e.jQadd = function (e) {
                        return this.jQ = this.jQ.add(e)
                    }
                    ,
                    e.jQize = function (e) {
                        function t(e) {
                            if (e.getAttribute) {
                                var n = e.getAttribute("mathquill-command-id");
                                if (n) {
                                    e.removeAttribute("mathquill-command-id");
                                    var r = M[n];
                                    r.jQadd(e),
                                        I.linkElementByCmdNode(e, r)
                                }
                                var i = e.getAttribute("mathquill-block-id");
                                if (i) {
                                    e.removeAttribute("mathquill-block-id");
                                    var o = M[i];
                                    o.jQadd(e),
                                        I.linkElementByBlockNode(e, o)
                                }
                            }
                            for (e = e.firstChild; e; e = e.nextSibling)
                                t(e)
                        }
                        for (var e = S(e || this.html()), n = 0; n < e.length; n += 1)
                            t(e[n]);
                        return e
                    }
                    ,
                    e.createDir = function (e, t) {
                        r(e);
                        var n = this;
                        return n.jQize(),
                            n.jQ.insDirOf(e, t.jQ),
                            t[e] = n.adopt(t.parent, t[E], t[_]),
                            n
                    }
                    ,
                    e.createLeftOf = function (e) {
                        return this.createDir(E, e)
                    }
                    ,
                    e.selectChildren = function (e, t) {
                        return O(e, t)
                    }
                    ,
                    e.bubble = function (e) {
                        for (var t = this; t; t = t.parent) {
                            var n = e(t);
                            if (n === !1)
                                break
                        }
                        return this
                    }
                    ,
                    e.postOrder = function (e) {
                        return function t(n) {
                            n.eachChild(t),
                                e(n)
                        }(this),
                            this
                    }
                    ,
                    e.isEmpty = function () {
                        return 0 === this.ends[E] && 0 === this.ends[_]
                    }
                    ,
                    e.isStyleBlock = function () {
                        return !1
                    }
                    ,
                    e.children = function () {
                        return T(this.ends[E], this.ends[_])
                    }
                    ,
                    e.eachChild = function (e) {
                        return s(this.ends, e),
                            this
                    }
                    ,
                    e.foldChildren = function (e, t) {
                        return a(this.ends, e, t)
                    }
                    ,
                    e.withDirAdopt = function (e, t, n, r) {
                        return T(this, this).withDirAdopt(e, t, n, r),
                            this
                    }
                    ,
                    e.adopt = function (e, t, n) {
                        return T(this, this).adopt(e, t, n),
                            this
                    }
                    ,
                    e.disown = function () {
                        return T(this, this).disown(),
                            this
                    }
                    ,
                    e.remove = function () {
                        return this.jQ.remove(),
                            this.disown()
                    }
                    ,
                    e.finalizeTree = function () { }
                    ,
                    e.contactWeld = function () { }
                    ,
                    e.blur = function () { }
                    ,
                    e.intentionalBlur = function () { }
                    ,
                    e.reflow = function () { }
                    ,
                    e.registerInnerField = function () { }
            })
            , T = w(function (e) {
                e.init = function (e, t, i) {
                    if (i === g && (i = E),
                        r(i),
                        n("no half-empty fragments", !e == !t),
                        this.ends = {},
                        e) {
                        n("withDir is passed to Fragment", e instanceof I),
                            n("oppDir is passed to Fragment", t instanceof I),
                            n("withDir and oppDir have the same parent", e.parent === t.parent),
                            this.ends[i] = e,
                            this.ends[-i] = t;
                        var o = this.fold([], function (e, t) {
                            return e.push.apply(e, t.jQ.get()),
                                e
                        });
                        this.jQ = this.jQ.add(o)
                    }
                }
                    ,
                    e.jQ = S(),
                    e.withDirAdopt = function (e, t, n, r) {
                        return e === E ? this.adopt(t, n, r) : this.adopt(t, r, n)
                    }
                    ,
                    e.adopt = function (e, t, n) {
                        c(e, t, n);
                        var r = this;
                        r.disowned = !1;
                        var i = r.ends[E];
                        if (!i)
                            return this;
                        var o = r.ends[_];
                        return t || (e.ends[E] = i),
                            n ? n[E] = o : e.ends[_] = o,
                            r.ends[_][_] = n,
                            r.each(function (n) {
                                n[E] = t,
                                    n.parent = e,
                                    t && (t[_] = n),
                                    t = n
                            }),
                            r
                    }
                    ,
                    e.disown = function () {
                        var e = this
                            , t = e.ends[E];
                        if (!t || e.disowned)
                            return e;
                        e.disowned = !0;
                        var n = e.ends[_]
                            , r = t.parent;
                        return c(r, t[E], t),
                            c(r, n, n[_]),
                            t[E] ? t[E][_] = n[_] : r.ends[E] = n[_],
                            n[_] ? n[_][E] = t[E] : r.ends[_] = t[E],
                            e
                    }
                    ,
                    e.remove = function () {
                        return this.jQ.remove(),
                            this.disown()
                    }
                    ,
                    e.each = function (e) {
                        return s(this.ends, e),
                            this
                    }
                    ,
                    e.fold = function (e, t) {
                        return a(this.ends, e, t)
                    }
            })
            , P = {}
            , A = {}
            , L = w(k, function (e) {
                e.init = function (e, t) {
                    this.parent = e,
                        this.options = t;
                    var n = this.jQ = this._jQ = S('<span class="dcg-mq-cursor">&#8203;</span>');
                    this.blink = function () {
                        n.toggleClass("dcg-mq-blink")
                    }
                        ,
                        this.upDownCache = {}
                }
                    ,
                    e.show = function () {
                        return this.jQ = this._jQ.removeClass("dcg-mq-blink"),
                            "intervalId" in this ? clearInterval(this.intervalId) : (this[_] ? this.selection && this.selection.ends[E][E] === this[E] ? this.jQ.insertBefore(this.selection.jQ) : this.jQ.insertBefore(this[_].jQ.first()) : this.jQ.appendTo(this.parent.jQ),
                                this.parent.focus()),
                            this.intervalId = setInterval(this.blink, 500),
                            this
                    }
                    ,
                    e.hide = function () {
                        return "intervalId" in this && clearInterval(this.intervalId),
                            delete this.intervalId,
                            this.jQ.detach(),
                            this.jQ = S(),
                            this
                    }
                    ,
                    e.withDirInsertAt = function (e, t, n, r) {
                        var i = this.parent;
                        this.parent = t,
                            this[e] = n,
                            this[-e] = r,
                            i !== t && i.blur && i.blur(this)
                    }
                    ,
                    e.insDirOf = function (e, t) {
                        return r(e),
                            this.jQ.insDirOf(e, t.jQ),
                            this.withDirInsertAt(e, t.parent, t[e], t),
                            this.parent.jQ.addClass("dcg-mq-hasCursor"),
                            this
                    }
                    ,
                    e.insLeftOf = function (e) {
                        return this.insDirOf(E, e)
                    }
                    ,
                    e.insRightOf = function (e) {
                        return this.insDirOf(_, e)
                    }
                    ,
                    e.insAtDirEnd = function (e, t) {
                        return r(e),
                            this.jQ.insAtDirEnd(e, t.jQ),
                            this.withDirInsertAt(e, t, 0, t.ends[e]),
                            t.focus(),
                            this
                    }
                    ,
                    e.insAtLeftEnd = function (e) {
                        return this.insAtDirEnd(E, e)
                    }
                    ,
                    e.insAtRightEnd = function (e) {
                        return this.insAtDirEnd(_, e)
                    }
                    ,
                    e.jumpUpDown = function (e, t) {
                        var n = this;
                        n.upDownCache[e.id] = k.copy(n);
                        var r = n.upDownCache[t.id];
                        if (r)
                            r[_] ? n.insLeftOf(r[_]) : n.insAtRightEnd(r.parent);
                        else {
                            var i = n.offset().left;
                            t.seek(i, n)
                        }
                        Y.queue(t, !0)
                    }
                    ,
                    e.offset = function () {
                        var e = this
                            , t = e.jQ.removeClass("dcg-mq-cursor").offset();
                        return e.jQ.addClass("dcg-mq-cursor"),
                            t
                    }
                    ,
                    e.unwrapGramp = function () {
                        var e = this.parent.parent
                            , t = e.parent
                            , n = e[_]
                            , r = this
                            , i = e[E];
                        if (e.disown().eachChild(function (r) {
                            r.isEmpty() || (r.children().adopt(t, i, n).each(function (t) {
                                t.jQ.insertBefore(e.jQ.first())
                            }),
                                i = r.ends[_])
                        }),
                            !this[_])
                            if (this[E])
                                this[_] = this[E][_];
                            else
                                for (; !this[_];) {
                                    if (this.parent = this.parent[_],
                                        !this.parent) {
                                        this[_] = e[_],
                                            this.parent = t;
                                        break
                                    }
                                    this[_] = this.parent.ends[E]
                                }
                        this[_] ? this.insLeftOf(this[_]) : this.insAtRightEnd(t),
                            e.jQ.remove(),
                            e[E].siblingDeleted && e[E].siblingDeleted(r.options, _),
                            e[_].siblingDeleted && e[_].siblingDeleted(r.options, E)
                    }
                    ,
                    e.startSelection = function () {
                        for (var e = this.anticursor = k.copy(this), t = e.ancestors = {}, n = e; n.parent; n = n.parent)
                            t[n.parent.id] = n
                    }
                    ,
                    e.endSelection = function () {
                        delete this.anticursor
                    }
                    ,
                    e.select = function () {
                        var e = this.anticursor;
                        if (this[E] === e[E] && this.parent === e.parent)
                            return !1;
                        for (var t = this; t.parent; t = t.parent)
                            if (t.parent.id in e.ancestors) {
                                var r = t.parent;
                                break
                            }
                        n("cursor and anticursor in the same tree", r);
                        var i, o, s = e.ancestors[r.id], a = _;
                        if (t[E] !== s)
                            for (var c = t; c; c = c[_])
                                if (c[_] === s[_]) {
                                    a = E,
                                        i = t,
                                        o = s;
                                    break
                                }
                        return a === _ && (i = s,
                            o = t),
                            i instanceof k && (i = i[_]),
                            o instanceof k && (o = o[E]),
                            this.hide().selection = r.selectChildren(i, o),
                            this.insDirOf(a, this.selection.ends[a]),
                            this.selectionChanged(),
                            !0
                    }
                    ,
                    e.resetToEnd = function (e) {
                        this.clearSelection();
                        var t = e.root;
                        this[_] = 0,
                            this[E] = t.ends[_],
                            this.parent = t
                    }
                    ,
                    e.clearSelection = function () {
                        return this.selection && (this.selection.clear(),
                            delete this.selection,
                            this.selectionChanged()),
                            this
                    }
                    ,
                    e.deleteSelection = function () {
                        this.selection && (this[E] = this.selection.ends[E][E],
                            this[_] = this.selection.ends[_][_],
                            this.selection.remove(),
                            this.selectionChanged(),
                            delete this.selection)
                    }
                    ,
                    e.replaceSelection = function () {
                        var e = this.selection;
                        return e && (this[E] = e.ends[E][E],
                            this[_] = e.ends[_][_],
                            delete this.selection),
                            e
                    }
            })
            , O = w(T, function (e, t) {
                e.init = function () {
                    t.init.apply(this, arguments),
                        this.jQ = this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()
                }
                    ,
                    e.adopt = function () {
                        return this.jQ.replaceWith(this.jQ = this.jQ.children()),
                            t.adopt.apply(this, arguments)
                    }
                    ,
                    e.clear = function () {
                        return this.jQ.replaceWith(this.jQ[0].childNodes),
                            this
                    }
                    ,
                    e.join = function (e, t) {
                        var n = t || "";
                        return this.fold("", function (t, r) {
                            return t + n + r[e]()
                        })
                    }
            })
            , D = w(function (e) {
                e.init = function (e, t, n) {
                    this.id = e.id,
                        this.data = {},
                        this.root = e,
                        this.container = t,
                        this.options = n,
                        this.ariaLabel = "MathQuill Input",
                        this.ariaPostLabel = "",
                        e.controller = this,
                        this.cursor = e.cursor = L(e, n)
                }
                    ,
                    e.handle = function (e, t) {
                        var n = this.options.handlers;
                        if (n && n.fns[e]) {
                            var r = n.APIClasses[this.KIND_OF_MQ](this);
                            t === E || t === _ ? n.fns[e](t, r) : n.fns[e](r)
                        }
                    }
                    ;
                var t = [];
                this.onNotify = function (e) {
                    t.push(e)
                }
                    ,
                    e.notify = function () {
                        for (var e = 0; e < t.length; e += 1)
                            t[e].apply(this.cursor, arguments);
                        return this
                    }
            })
            , q = {}
            , N = w()
            , F = {}
            , R = w()
            , j = {};
        u.prototype = R.p,
            u.VERSION = "v0.10.1",
            u.interfaceVersion = function (e) {
                if (1 !== e)
                    throw "Only interface version 1 supported. You specified: " + e;
                return l = function () {
                    window.console && console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
                }
                    ,
                    l(),
                    u
            }
            ,
            u.getInterface = d;
        var B = d.MIN = 1
            , V = d.MAX = 2;
        u.noConflict = function () {
            return window.MathQuill = U,
                u
        }
            ;
        var U = window.MathQuill;
        window.MathQuill = u;
        var G = function () {
            function t(e) {
                var t, r = e.which || e.keyCode, i = n[r], o = [];
                return e.ctrlKey && o.push("Ctrl"),
                    e.originalEvent && e.originalEvent.metaKey && o.push("Meta"),
                    e.altKey && o.push("Alt"),
                    e.shiftKey && o.push("Shift"),
                    t = i || String.fromCharCode(r),
                    o.length || i ? (o.push(t),
                        o.join("-")) : t
            }
            var n = {
                8: "Backspace",
                9: "Tab",
                10: "Enter",
                13: "Enter",
                16: "Shift",
                17: "Control",
                18: "Alt",
                20: "CapsLock",
                27: "Esc",
                32: "Spacebar",
                33: "PageUp",
                34: "PageDown",
                35: "End",
                36: "Home",
                37: "Left",
                38: "Up",
                39: "Right",
                40: "Down",
                45: "Insert",
                46: "Del",
                144: "NumLock"
            };
            return function (n, r) {
                function i(e) {
                    _ = e,
                        clearTimeout(v),
                        v = setTimeout(e)
                }
                function o(t) {
                    i(function (n) {
                        _ = e,
                            clearTimeout(v),
                            t(n)
                    })
                }
                function s(t) {
                    _(),
                        _ = e,
                        clearTimeout(v),
                        w.val(t),
                        t && w[0].select && w[0].select(),
                        S = !!t
                }
                function a() {
                    var e = w[0];
                    return "selectionStart" in e && e.selectionStart !== e.selectionEnd
                }
                function c() {
                    r.options && r.options.overrideKeystroke ? r.options.overrideKeystroke(t(b), b) : r.keystroke(t(b), b)
                }
                function l(e) {
                    b = e,
                        x = null,
                        S && o(function (e) {
                            e && "focusout" === e.type || !w[0].select || w[0].select()
                        }),
                        c()
                }
                function u(e) {
                    if (!e || !e.originalEvent)
                        return !1;
                    switch (e.originalEvent.key) {
                        case "ArrowRight":
                        case "ArrowLeft":
                        case "ArrowDown":
                        case "ArrowUp":
                            return !0
                    }
                    return !1
                }
                function d(e) {
                    b && x && c(),
                        x = e,
                        u(e) || i(h)
                }
                function p(e) {
                    b && !x && (u(e) || i(h))
                }
                function h() {
                    if (!a()) {
                        var e = w.val();
                        1 === e.length ? (w.val(""),
                            r.options && r.options.overrideTypedText ? r.options.overrideTypedText(e) : r.typedText(e)) : e && w[0].select && w[0].select()
                    }
                }
                function f() {
                    b = x = null
                }
                function m(e) {
                    w.focus(),
                        i(g)
                }
                function g() {
                    var e = w.val();
                    w.val(""),
                        e && r.paste(e)
                }
                var v, b = null, x = null, w = y(n), E = y(r.container || w), _ = e;
                E.bind("keydown keypress input keyup focusout paste", function (e) {
                    _(e)
                });
                var S = !1;
                return r.options && r.options.disableCopyPaste ? E.bind({
                    keydown: l,
                    keypress: d,
                    keyup: p,
                    focusout: f,
                    copy: function (e) {
                        e.preventDefault()
                    },
                    cut: function (e) {
                        e.preventDefault()
                    },
                    paste: function (e) {
                        e.preventDefault()
                    }
                }) : E.bind({
                    keydown: l,
                    keypress: d,
                    keyup: p,
                    focusout: f,
                    cut: function () {
                        o(function () {
                            r.cut()
                        })
                    },
                    copy: function () {
                        o(function () {
                            r.copy()
                        })
                    },
                    paste: m
                }),
                    {
                        select: s
                    }
            }
        }()
            , z = w(function (e, t, r) {
                function i(e, t) {
                    throw e = e ? "'" + e + "'" : "EOF",
                    "Parse Error: " + t + " at " + e
                }
                e.init = function (e) {
                    this._ = e
                }
                    ,
                    e.parse = function (e) {
                        function t(e, t) {
                            return t
                        }
                        return this.skip(a)._("" + e, t, i)
                    }
                    ,
                    e.or = function (e) {
                        n("or is passed a parser", e instanceof r);
                        var t = this;
                        return r(function (n, r, i) {
                            function o(t) {
                                return e._(n, r, i)
                            }
                            return t._(n, r, o)
                        })
                    }
                    ,
                    e.then = function (e) {
                        var t = this;
                        return r(function (i, o, s) {
                            function a(t, i) {
                                var a = e instanceof r ? e : e(i);
                                return n("a parser is returned", a instanceof r),
                                    a._(t, o, s)
                            }
                            return t._(i, a, s)
                        })
                    }
                    ,
                    e.many = function () {
                        var e = this;
                        return r(function (t, n, r) {
                            function i(e, n) {
                                return t = e,
                                    s.push(n),
                                    !0
                            }
                            function o() {
                                return !1
                            }
                            for (var s = []; e._(t, i, o);)
                                ;
                            return n(t, s)
                        })
                    }
                    ,
                    e.times = function (e, t) {
                        arguments.length < 2 && (t = e);
                        var n = this;
                        return r(function (r, i, o) {
                            function s(e, t) {
                                return u.push(t),
                                    r = e,
                                    !0
                            }
                            function a(e, t) {
                                return l = t,
                                    r = e,
                                    !1
                            }
                            function c(e, t) {
                                return !1
                            }
                            for (var l, u = [], d = !0, p = 0; p < e; p += 1)
                                if (d = n._(r, s, a),
                                    !d)
                                    return o(r, l);
                            for (; p < t && d; p += 1)
                                d = n._(r, s, c);
                            return i(r, u)
                        })
                    }
                    ,
                    e.result = function (e) {
                        return this.then(s(e))
                    }
                    ,
                    e.atMost = function (e) {
                        return this.times(0, e)
                    }
                    ,
                    e.atLeast = function (e) {
                        var t = this;
                        return t.times(e).then(function (e) {
                            return t.many().map(function (t) {
                                return e.concat(t)
                            })
                        })
                    }
                    ,
                    e.map = function (e) {
                        return this.then(function (t) {
                            return s(e(t))
                        })
                    }
                    ,
                    e.skip = function (e) {
                        return this.then(function (t) {
                            return e.result(t)
                        })
                    }
                    ;
                var o = (this.string = function (e) {
                    var t = e.length
                        , n = "expected '" + e + "'";
                    return r(function (r, i, o) {
                        var s = r.slice(0, t);
                        return s === e ? i(r.slice(t), s) : o(r, n)
                    })
                }
                    ,
                    this.regex = function (e) {
                        n("regexp parser is anchored", "^" === e.toString().charAt(1));
                        var t = "expected " + e;
                        return r(function (n, r, i) {
                            var o = e.exec(n);
                            if (o) {
                                var s = o[0];
                                return r(n.slice(s.length), s)
                            }
                            return i(n, t)
                        })
                    }
                )
                    , s = r.succeed = function (e) {
                        return r(function (t, n) {
                            return n(t, e)
                        })
                    }
                    , a = (r.fail = function (e) {
                        return r(function (t, n, r) {
                            return r(t, e)
                        })
                    }
                        ,
                        r.letter = o(/^[a-z]/i),
                        r.letters = o(/^[a-z]*/i),
                        r.digit = o(/^[0-9]/),
                        r.digits = o(/^[0-9]*/),
                        r.whitespace = o(/^\s+/),
                        r.optWhitespace = o(/^\s*/),
                        r.any = r(function (e, t, n) {
                            return e ? t(e.slice(1), e.charAt(0)) : n(e, "expected any character")
                        }),
                        r.all = r(function (e, t, n) {
                            return t("", e)
                        }),
                        r.eof = r(function (e, t, n) {
                            return e ? n(e, "expected EOF") : t(e, e)
                        }))
            });
        D.open(function (e) {
            e.focusBlurEvents = function () {
                function e() {
                    clearTimeout(r),
                        s.selection && s.selection.jQ.addClass("dcg-mq-blur"),
                        t()
                }
                function t() {
                    s.hide().parent.blur(),
                        i.container.removeClass("dcg-mq-focused"),
                        S(window).unbind("blur", e),
                        i.options && i.options.resetCursorOnBlur && s.resetToEnd(i)
                }
                function n() {
                    var e = (i.ariaLabel + ": " + o.mathspeak() + " " + i.ariaPostLabel).trim();
                    Y.jQ.empty(),
                        i.textarea.attr("aria-label", e),
                        i.container.attr("aria-label", e)
                }
                var r, i = this, o = i.root, s = i.cursor;
                i.textarea.focus(function () {
                    n(),
                        i.blurred = !1,
                        clearTimeout(r),
                        i.container.addClass("dcg-mq-focused"),
                        s.parent || s.insAtRightEnd(o),
                        s.selection ? (s.selection.jQ.removeClass("dcg-mq-blur"),
                            i.selectionChanged()) : s.show(),
                        i.setOverflowClasses()
                }).blur(function () {
                    i.textareaSelectionTimeout && (clearTimeout(i.textareaSelectionTimeout),
                        i.textareaSelectionTimeout = g),
                        i.blurred = !0,
                        r = setTimeout(function () {
                            o.postOrder(function (e) {
                                e.intentionalBlur()
                            }),
                                s.clearSelection().endSelection(),
                                t(),
                                n(),
                                i.scrollHoriz()
                        }),
                        S(window).bind("blur", e)
                }),
                    i.blurred = !0,
                    s.hide().parent.blur()
            }
        }),
            D.open(function (e, t) {
                e.exportText = function () {
                    return this.root.foldChildren("", function (e, t) {
                        return e + t.text()
                    })
                }
            }),
            D.open(function (t) {
                N.p.ignoreNextMousedown = e;
                var n;
                this.onNotify(function (e) {
                    "edit" !== e && "replace" !== e || n && n.cursor === this && n.cb()
                }),
                    t.delegateMouseEvents = function () {
                        var t = this.root.jQ;
                        this.container.bind("mousedown.mathquill", function (r) {
                            function i(e) {
                                y = S(e.target)
                            }
                            function o(e) {
                                p.anticursor || p.startSelection(),
                                    d.seek(y, e.pageX, e.pageY).cursor.select(),
                                    p.selection && Y.clear().queue(p.selection.join("mathspeak") + " selected").alert(),
                                    y = g
                            }
                            function s(e) {
                                l.unbind("mousemove", i),
                                    S(e.target.ownerDocument).unbind("mousemove", o).unbind("mouseup", c),
                                    n = g
                            }
                            function a() {
                                d.editable ? (p.show(),
                                    Y.queue(p.parent).alert()) : f.detach()
                            }
                            function c(e) {
                                p.blink = h,
                                    p.selection || a(),
                                    s(e)
                            }
                            var l = S(r.target).closest(".dcg-mq-root-block")
                                , u = I.getNodeOfElement(l[0]) || I.getNodeOfElement(t[0])
                                , d = u.controller
                                , p = d.cursor
                                , h = p.blink
                                , f = d.textareaSpan
                                , m = d.textarea;
                            if (r.preventDefault(),
                                r.target.unselectable = !0,
                                !p.options.ignoreNextMousedown(r)) {
                                p.options.ignoreNextMousedown = e;
                                var y, v;
                                n = {
                                    cursor: p,
                                    cb: function () {
                                        v = !0,
                                            p.blink = h,
                                            p.clearSelection(),
                                            a(),
                                            s(r)
                                    }
                                },
                                    d.blurred && (d.editable || l.prepend(f),
                                        m.focus(),
                                        v) || (p.blink = e,
                                            d.seek(S(r.target), r.pageX, r.pageY).cursor.startSelection(),
                                            l.mousemove(i),
                                            S(r.target.ownerDocument).mousemove(o).mouseup(c))
                            }
                        })
                    }
            }),
            D.open(function (e) {
                e.seek = function (e, t, r) {
                    var i, o = this.notify("select").cursor, s = e && e[0];
                    return s && (i = I.getNodeOfElement(s),
                        i || (i = I.getNodeOfElement(e.parentElement))),
                        i || (i = this.root),
                        n("nodeId is the id of some Node that exists", i),
                        o.clearSelection().show(),
                        i.seek(t, o),
                        this.scrollHoriz(),
                        this
                }
            }),
            D.open(function (e) {
                e.keystroke = function (e, t) {
                    this.cursor.parent.keystroke(e, t, this)
                }
            }),
            I.open(function (e) {
                e.keystroke = function (e, t, n) {
                    var r = n.cursor;
                    switch (e) {
                        case "Ctrl-Shift-Backspace":
                        case "Ctrl-Backspace":
                            n.ctrlDeleteDir(E);
                            break;
                        case "Shift-Backspace":
                        case "Backspace":
                            n.backspace();
                            break;
                        case "Esc":
                        case "Tab":
                            return void n.escapeDir(_, e, t);
                        case "Shift-Tab":
                        case "Shift-Esc":
                            return void n.escapeDir(E, e, t);
                        case "End":
                            n.notify("move").cursor.insAtRightEnd(r.parent),
                                Y.queue("end of").queue(r.parent, !0);
                            break;
                        case "Ctrl-End":
                            n.notify("move").cursor.insAtRightEnd(n.root),
                                Y.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);
                            break;
                        case "Shift-End":
                            for (; r[_];)
                                n.selectRight();
                            break;
                        case "Ctrl-Shift-End":
                            for (; r[_] || r.parent !== n.root;)
                                n.selectRight();
                            break;
                        case "Home":
                            n.notify("move").cursor.insAtLeftEnd(r.parent),
                                Y.queue("beginning of").queue(r.parent, !0);
                            break;
                        case "Ctrl-Home":
                            n.notify("move").cursor.insAtLeftEnd(n.root),
                                Y.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);
                            break;
                        case "Shift-Home":
                            for (; r[E];)
                                n.selectLeft();
                            break;
                        case "Ctrl-Shift-Home":
                            for (; r[E] || r.parent !== n.root;)
                                n.selectLeft();
                            break;
                        case "Left":
                            n.moveLeft();
                            break;
                        case "Shift-Left":
                            n.selectLeft();
                            break;
                        case "Ctrl-Left":
                            break;
                        case "Right":
                            n.moveRight();
                            break;
                        case "Shift-Right":
                            n.selectRight();
                            break;
                        case "Ctrl-Right":
                            break;
                        case "Up":
                            n.moveUp();
                            break;
                        case "Down":
                            n.moveDown();
                            break;
                        case "Shift-Up":
                            if (r[E])
                                for (; r[E];)
                                    n.selectLeft();
                            else
                                n.selectLeft();
                        case "Shift-Down":
                            if (r[_])
                                for (; r[_];)
                                    n.selectRight();
                            else
                                n.selectRight();
                        case "Ctrl-Up":
                            break;
                        case "Ctrl-Down":
                            break;
                        case "Ctrl-Shift-Del":
                        case "Ctrl-Del":
                            n.ctrlDeleteDir(_);
                            break;
                        case "Shift-Del":
                        case "Del":
                            n.deleteForward();
                            break;
                        case "Meta-A":
                        case "Ctrl-A":
                            for (n.notify("move").cursor.insAtRightEnd(n.root); r[E];)
                                n.selectLeft();
                            break;
                        case "Ctrl-Alt-Up":
                            r.parent.parent && r.parent.parent instanceof I ? Y.queue(r.parent.parent) : Y.queue("nothing above");
                            break;
                        case "Ctrl-Alt-Down":
                            r.parent && r.parent instanceof I ? Y.queue(r.parent) : Y.queue("block is empty");
                            break;
                        case "Ctrl-Alt-Left":
                            r.parent.parent && r.parent.parent.ends && r.parent.parent.ends[E] && r.parent.parent.ends[E] instanceof I ? Y.queue(r.parent.parent.ends[E]) : Y.queue("nothing to the left");
                            break;
                        case "Ctrl-Alt-Right":
                            r.parent.parent && r.parent.parent.ends && r.parent.parent.ends[_] && r.parent.parent.ends[_] instanceof I ? Y.queue(r.parent.parent.ends[_]) : Y.queue("nothing to the right");
                            break;
                        case "Ctrl-Alt-Shift-Down":
                            r.selection ? Y.queue(r.selection.join("mathspeak", " ").trim() + " selected") : Y.queue("nothing selected");
                            break;
                        case "Ctrl-Alt-=":
                        case "Ctrl-Alt-Shift-Right":
                            n.ariaPostLabel.length ? Y.queue(n.ariaPostLabel) : Y.queue("no answer");
                            break;
                        default:
                            return
                    }
                    Y.alert(),
                        t.preventDefault(),
                        n.scrollHoriz()
                }
                    ,
                    e.moveOutOf = e.moveTowards = e.deleteOutOf = e.deleteTowards = e.unselectInto = e.selectOutOf = e.selectTowards = function () {
                        n("overridden or never called on this node")
                    }
            }),
            D.open(function (e) {
                function t(e, t) {
                    var n = e.notify("upDown").cursor
                        , r = t + "Into"
                        , i = t + "OutOf";
                    return n[_][r] ? n.insAtLeftEnd(n[_][r]) : n[E][r] ? n.insAtRightEnd(n[E][r]) : n.parent.bubble(function (e) {
                        var t = e[i];
                        if (t && ("function" == typeof t && (t = e[i](n)),
                            t instanceof I && n.jumpUpDown(e, t),
                            t !== !0))
                            return !1
                    }),
                        e
                }
                this.onNotify(function (e) {
                    "move" !== e && "upDown" !== e || this.show().clearSelection()
                }),
                    e.escapeDir = function (e, t, n) {
                        r(e);
                        var i = this.cursor;
                        if (i.parent !== this.root && n.preventDefault(),
                            i.parent !== this.root)
                            return i.parent.moveOutOf(e, i),
                                Y.alert(),
                                this.notify("move")
                    }
                    ,
                    F.leftRightIntoCmdGoes = function (e) {
                        if (e && "up" !== e && "down" !== e)
                            throw '"up" or "down" required for leftRightIntoCmdGoes option, got "' + e + '"';
                        return e
                    }
                    ,
                    e.moveDir = function (e) {
                        r(e);
                        var t = this.cursor
                            , n = t.options.leftRightIntoCmdGoes;
                        return t.selection ? t.insDirOf(e, t.selection.ends[e]) : t[e] ? t[e].moveTowards(e, t, n) : t.parent.moveOutOf(e, t, n),
                            this.notify("move")
                    }
                    ,
                    e.moveLeft = function () {
                        return this.moveDir(E)
                    }
                    ,
                    e.moveRight = function () {
                        return this.moveDir(_)
                    }
                    ,
                    e.moveUp = function () {
                        return t(this, "up")
                    }
                    ,
                    e.moveDown = function () {
                        return t(this, "down")
                    }
                    ,
                    this.onNotify(function (e) {
                        "upDown" !== e && (this.upDownCache = {})
                    }),
                    this.onNotify(function (e) {
                        "edit" === e && this.show().deleteSelection()
                    }),
                    e.deleteDir = function (e) {
                        r(e);
                        var t = this.cursor
                            , n = t[e]
                            , i = t.parent.parent;
                        if (n && n instanceof I)
                            n.sides ? Y.queue(n.parent.chToCmd(n.sides[-e].ch).mathspeak({
                                createdLeftOf: t
                            })) : n.blocks || "\\text" === n.parent.ctrlSeq || Y.queue(n);
                        else if (i && i instanceof I)
                            if (i.sides)
                                Y.queue(i.parent.chToCmd(i.sides[e].ch).mathspeak({
                                    createdLeftOf: t
                                }));
                            else if (i.blocks && i.mathspeakTemplate)
                                if (i.upInto && i.downInto)
                                    Y.queue(i.mathspeakTemplate[1]);
                                else {
                                    var o = i.mathspeakTemplate
                                        , s = e === E ? o[0] : o[o.length - 1];
                                    Y.queue(s)
                                }
                            else
                                Y.queue(i);
                        var a = t.selection;
                        return this.notify("edit"),
                            a || (t[e] ? t[e].deleteTowards(e, t) : t.parent.deleteOutOf(e, t)),
                            t[E].siblingDeleted && t[E].siblingDeleted(t.options, _),
                            t[_].siblingDeleted && t[_].siblingDeleted(t.options, E),
                            t.parent.bubble(function (e) {
                                e.reflow()
                            }),
                            this
                    }
                    ,
                    e.ctrlDeleteDir = function (e) {
                        r(e);
                        var t = this.cursor;
                        if (!t[e] || t.selection)
                            return this.deleteDir(e);
                        this.notify("edit");
                        var n;
                        return n = e === E ? T(t.parent.ends[E], t[E]) : T(t[_], t.parent.ends[_]),
                            Y.queue(n),
                            n.remove(),
                            t.insAtDirEnd(e, t.parent),
                            t[E].siblingDeleted && t[E].siblingDeleted(t.options, _),
                            t[_].siblingDeleted && t[_].siblingDeleted(t.options, E),
                            t.parent.bubble(function (e) {
                                e.reflow()
                            }),
                            this
                    }
                    ,
                    e.backspace = function () {
                        return this.deleteDir(E)
                    }
                    ,
                    e.deleteForward = function () {
                        return this.deleteDir(_)
                    }
                    ,
                    this.onNotify(function (e) {
                        "select" !== e && this.endSelection()
                    }),
                    e.selectDir = function (e) {
                        var t = this.notify("select").cursor
                            , n = t.selection;
                        r(e),
                            t.anticursor || t.startSelection();
                        var i = t[e];
                        i ? n && n.ends[e] === i && t.anticursor[-e] !== i ? i.unselectInto(e, t) : i.selectTowards(e, t) : t.parent.selectOutOf(e, t),
                            t.clearSelection(),
                            t.select() || t.show(),
                            t.selection && Y.clear().queue(t.selection.join("mathspeak", " ").trim() + " selected")
                    }
                    ,
                    e.selectLeft = function () {
                        return this.selectDir(E)
                    }
                    ,
                    e.selectRight = function () {
                        return this.selectDir(_)
                    }
            }),
            D.open(function (e) {
                N.p.substituteTextarea = function () {
                    return S("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]
                }
                    ,
                    e.createTextarea = function () {
                        var e = this.textareaSpan = S('<span class="dcg-mq-textarea"></span>')
                            , t = this.options.substituteTextarea();
                        if (!t.nodeType)
                            throw "substituteTextarea() must return a DOM element, got " + t;
                        t = this.textarea = S(t).appendTo(e);
                        var n = this;
                        n.cursor.selectionChanged = function () {
                            n.selectionChanged()
                        }
                    }
                    ,
                    e.selectionChanged = function () {
                        var e = this;
                        ve(e.container[0]),
                            e.textareaSelectionTimeout === g && (e.textareaSelectionTimeout = setTimeout(function () {
                                e.setTextareaSelection()
                            }))
                    }
                    ,
                    e.setTextareaSelection = function () {
                        this.textareaSelectionTimeout = g;
                        var e = "";
                        this.cursor.selection && (e = this.cleanLatex(this.cursor.selection.join("latex")),
                            this.options.statelessClipboard && (e = "$" + e + "$")),
                            this.selectFn(e)
                    }
                    ,
                    e.staticMathTextareaEvents = function () {
                        function e() {
                            o.detach(),
                                t.blurred = !0
                        }
                        var t = this
                            , n = t.root
                            , r = t.cursor
                            , i = t.textarea
                            , o = t.textareaSpan;
                        this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$' + t.exportLatex() + "$</span>"),
                            t.blurred = !0,
                            i.bind("cut paste", !1),
                            t.options.disableCopyPaste ? i.bind("copy", !1) : i.bind("copy", function () {
                                t.setTextareaSelection()
                            }),
                            i.focus(function () {
                                t.blurred = !1
                            }).blur(function () {
                                r.selection && r.selection.clear(),
                                    setTimeout(e)
                            }),
                            t.selectFn = function (e) {
                                i.val(e),
                                    e && i.select()
                            }
                            ;
                        var s = t && "MathQuill Input" !== t.ariaLabel ? t.ariaLabel + ": " : "";
                        t.container.attr("aria-label", s + n.mathspeak().trim())
                    }
                    ,
                    e.editablesTextareaEvents = function () {
                        var e = this
                            , t = e.textarea
                            , n = e.textareaSpan
                            , r = G(t, this);
                        this.selectFn = function (e) {
                            r.select(e)
                        }
                            ,
                            this.container.prepend(n),
                            this.focusBlurEvents()
                    }
                    ,
                    e.typedText = function (e) {
                        if ("\n" === e)
                            return this.handle("enter");
                        var t = this.notify().cursor;
                        t.parent.write(t, e),
                            this.scrollHoriz()
                    }
                    ,
                    e.cut = function () {
                        var e = this
                            , t = e.cursor;
                        t.selection && setTimeout(function () {
                            e.notify("edit"),
                                t.parent.bubble(function (e) {
                                    e.reflow()
                                }),
                                e.options && e.options.onCut && e.options.onCut()
                        })
                    }
                    ,
                    e.copy = function () {
                        this.setTextareaSelection()
                    }
                    ,
                    e.paste = function (e) {
                        this.options.statelessClipboard && (e = "$" === e.slice(0, 1) && "$" === e.slice(-1) ? e.slice(1, -1) : "\\text{" + e + "}"),
                            this.writeLatex(e).cursor.show(),
                            this.scrollHoriz(),
                            this.options && this.options.onPaste && this.options.onPaste()
                    }
            });
        var H = function () {
            function e(e) {
                var t = J();
                return e.adopt(t, 0, 0),
                    t
            }
            function t(e) {
                for (var t = e[0] || J(), n = 1; n < e.length; n += 1)
                    e[n].children().adopt(t, t.ends[_], 0);
                return t
            }
            var n = z.string
                , r = z.regex
                , i = z.letter
                , o = z.any
                , s = z.optWhitespace
                , a = z.succeed
                , c = z.fail
                , l = i.map(function (e) {
                    return re(e)
                })
                , u = r(/^[^${}\\_^]/).map(function (e) {
                    return Q(e)
                })
                , d = r(/^[^\\a-eg-zA-Z]/).or(n("\\").then(r(/^[a-z]+/i).or(r(/^\s+/).result(" ")).or(o))).then(function (e) {
                    var t = P[e];
                    return t ? t(e).parser() : c("unknown command: \\" + e)
                })
                , p = d.or(l).or(u)
                , h = n("{").then(function () {
                    return m
                }).skip(n("}"))
                , f = s.then(h.or(p.map(e)))
                , m = f.many().map(t).skip(s)
                , g = n("[").then(f.then(function (e) {
                    return "]" !== e.join("latex") ? a(e) : c()
                }).many().map(t).skip(s)).skip(n("]"))
                , y = m;
            return y.block = f,
                y.optBlock = g,
                y
        }();
        D.open(function (e, t) {
            e.cleanLatex = function (e) {
                return e.replace(/(\\[a-z]+) (?![a-z])/gi, "$1")
            }
                ,
                e.exportLatex = function () {
                    return this.cleanLatex(this.root.latex())
                }
                ,
                e.writeLatex = function (e) {
                    var t = this.notify("edit").cursor
                        , n = z.all
                        , r = z.eof
                        , i = H.skip(r).or(n.result(!1)).parse(e);
                    if (i && !i.isEmpty()) {
                        i.children().adopt(t.parent, t[E], t[_]);
                        var o = i.jQize();
                        o.insertBefore(t.jQ),
                            t[E] = i.ends[_],
                            i.finalizeInsert(t.options, t),
                            i.ends[_][_].siblingCreated && i.ends[_][_].siblingCreated(t.options, E),
                            i.ends[E][E].siblingCreated && i.ends[E][E].siblingCreated(t.options, _),
                            t.parent.bubble(function (e) {
                                e.reflow()
                            })
                    }
                    return this
                }
                ,
                e.classifyLatexForEfficientUpdate = function (e) {
                    if ("string" == typeof e) {
                        var t = e.match(/-?[0-9.]+$/g);
                        return t && 1 === t.length ? {
                            latex: e,
                            prefix: e.substr(0, e.length - t[0].length),
                            digits: t[0]
                        } : void 0
                    }
                }
                ,
                e.renderLatexMathEfficiently = function (e) {
                    var t, n, r = this.classifyLatexForEfficientUpdate(e);
                    if (!r)
                        return !1;
                    if (t = this.exportLatex(),
                        n = this.classifyLatexForEfficientUpdate(t),
                        !n || n.prefix !== r.prefix)
                        return !1;
                    var i = this.root
                        , o = n.digits
                        , s = r.digits
                        , a = !1
                        , c = !1;
                    "-" === o[0] && (a = !0,
                        o = o.substr(1)),
                        "-" === s[0] && (c = !0,
                            s = s.substr(1));
                    for (var l = this.root.ends[_], u = [], d = o.length - 1; d >= 0; d--) {
                        if (l.ctrlSeq !== o[d])
                            return !1;
                        if (l.parent !== i)
                            return !1;
                        u.unshift(l),
                            l = l[E]
                    }
                    if (a && !c) {
                        var p = l;
                        if ("-" !== p.ctrlSeq)
                            return !1;
                        if (p[_] !== u[0])
                            return !1;
                        if (p.parent !== i)
                            return !1;
                        if (p[E] && p[E].parent !== i)
                            return !1;
                        u[0][E] = p[E],
                            i.ends[E] === p && (i.ends[E] = u[0]),
                            p[E] && (p[E][_] = u[0]),
                            p.jQ.remove()
                    }
                    if (!a && c) {
                        var h = de("-")
                            , f = document.createElement("span");
                        f.textContent = "-",
                            h.jQ = S(f),
                            u[0][E] && (u[0][E][_] = h),
                            i.ends[E] === u[0] && (i.ends[E] = h),
                            h.parent = i,
                            h[E] = u[0][E],
                            h[_] = u[0],
                            u[0][E] = h,
                            h.contactWeld(),
                            h.jQ.insertBefore(u[0].jQ)
                    }
                    var m = Math.min(o.length, s.length);
                    for (d = 0; d < m; d++) {
                        var g = s[d];
                        l = u[d],
                            l.ctrlSeq !== g && (l.ctrlSeq = g,
                                l.jQ[0].textContent = g,
                                l.mathspeakName = g)
                    }
                    if (o.length > s.length)
                        for (l = u[s.length - 1],
                            i.ends[_] = l,
                            l[_] = 0,
                            d = o.length - 1; d >= m; d--)
                            u[d].jQ.remove();
                    if (s.length > o.length) {
                        var y = document.createDocumentFragment();
                        for (d = m; d < s.length; d++) {
                            var v = document.createElement("span");
                            v.textContent = s[d];
                            var b = te(s[d]);
                            b.parent = i,
                                b.jQ = S(v),
                                y.appendChild(v),
                                b[E] = i.ends[_],
                                b[_] = 0,
                                b[E][_] = b,
                                i.ends[_] = b
                        }
                        i.jQ[0].appendChild(y)
                    }
                    var x = this.exportLatex();
                    return x !== e ? (console.warn("tried updating latex efficiently but did not work. Attempted: " + e + " but wrote: " + x),
                        !1) : (this.cursor.resetToEnd(this),
                            !0)
                }
                ,
                e.renderLatexMathFromScratch = function (e) {
                    var t = this.root
                        , n = this.cursor
                        , r = z.all
                        , i = z.eof
                        , o = H.skip(i).or(r.result(!1)).parse(e);
                    t.ends[E] = t.ends[_] = 0,
                        o && o.children().adopt(t, 0, 0);
                    var s = t.jQ;
                    if (o) {
                        var a = o.join("html");
                        s.html(a),
                            t.jQize(s.children()),
                            t.finalizeInsert(n.options)
                    } else
                        s.empty();
                    var c = this.ariaLabel && "MathQuill Input" !== this.ariaLabel ? this.ariaLabel + ": " : "";
                    this.container.attr("aria-label", c + t.mathspeak().trim()),
                        delete n.selection,
                        n.insAtRightEnd(t)
                }
                ,
                e.renderLatexMath = function (e) {
                    this.notify("replace"),
                        this.renderLatexMathEfficiently(e) || this.renderLatexMathFromScratch(e)
                }
                ,
                e.renderLatexText = function (e) {
                    var t = this.root
                        , n = this.cursor;
                    t.jQ.children().slice(1).remove(),
                        t.ends[E] = t.ends[_] = 0,
                        delete n.selection,
                        n.show().insAtRightEnd(t);
                    var r = z.regex
                        , i = z.string
                        , o = z.eof
                        , s = z.all
                        , a = i("$").then(H).skip(i("$").or(o)).map(function (e) {
                            var t = RootMathCommand(n);
                            t.createBlocks();
                            var r = t.ends[E];
                            return e.children().adopt(r, 0, 0),
                                t
                        })
                        , c = i("\\$").result("$")
                        , l = c.or(r(/^[^$]/)).map(Q)
                        , u = a.or(l).many()
                        , d = u.skip(o).or(s.result(!1)).parse(e);
                    if (d) {
                        for (var p = 0; p < d.length; p += 1)
                            d[p].adopt(t, t.ends[_], 0);
                        t.jQize().appendTo(t.jQ),
                            t.finalizeInsert(n.options)
                    }
                }
        }),
            D.open(function (e) {
                e.setOverflowClasses = function () {
                    var e = this.root.jQ[0]
                        , t = !1
                        , n = !1;
                    if (!this.blurred) {
                        var r = e.getBoundingClientRect().width
                            , i = e.scrollWidth
                            , o = e.scrollLeft;
                        t = i > r + o,
                            n = o > 0
                    }
                    e.classList.contains("dcg-mq-editing-overflow-right") !== t && e.classList.toggle("dcg-mq-editing-overflow-right"),
                        e.classList.contains("dcg-mq-editing-overflow-left") !== n && e.classList.toggle("dcg-mq-editing-overflow-left")
                }
                    ,
                    e.scrollHoriz = function () {
                        var e = this.cursor
                            , t = e.selection
                            , n = this.root.jQ[0].getBoundingClientRect();
                        if (!e.jQ[0] && !t)
                            return void this.root.jQ.stop().animate({
                                scrollLeft: 0
                            }, 100, function () {
                                this.setOverflowClasses()
                            }
                                .bind(this));
                        if (t) {
                            var r = t.jQ[0].getBoundingClientRect()
                                , i = r.left - (n.left + 20)
                                , o = r.right - (n.right - 20);
                            if (t.ends[E] === e[_])
                                if (i < 0)
                                    var s = i;
                                else {
                                    if (!(o > 0))
                                        return;
                                    if (r.left - o < n.left + 20)
                                        var s = i;
                                    else
                                        var s = o
                                }
                            else if (o > 0)
                                var s = o;
                            else {
                                if (!(i < 0))
                                    return;
                                if (r.right - i > n.right - 20)
                                    var s = o;
                                else
                                    var s = i
                            }
                        } else {
                            var a = e.jQ[0].getBoundingClientRect().left;
                            if (a > n.right - 20)
                                var s = a - (n.right - 20);
                            else {
                                if (!(a < n.left + 20))
                                    return;
                                var s = a - (n.left + 20)
                            }
                        }
                        var c = this.root.jQ[0];
                        s < 0 && 0 === c.scrollLeft || s > 0 && c.scrollWidth <= c.scrollLeft + n.width || this.root.jQ.stop().animate({
                            scrollLeft: "+=" + s
                        }, 100, function () {
                            this.setOverflowClasses()
                        }
                            .bind(this))
                    }
            });
        var W = w(function (e) {
            e.init = function () {
                this.jQ = y([]),
                    y(document).ready(function () {
                        var e = ".dcg-mq-aria-alert";
                        y(e).length || y("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),
                            this.jQ = y(e)
                    }
                        .bind(this)),
                    this.items = [],
                    this.msg = ""
            }
                ,
                e.queue = function (e, t) {
                    return e instanceof I && (e = t ? e.parent && e.parent.ariaLabel && "block" === e.ariaLabel ? e.parent.ariaLabel + " " + e.mathspeak() : e.ariaLabel ? e.ariaLabel + " " + e.mathspeak() : e.mathspeak() : e.mathspeak()),
                        this.items.push(e),
                        this
                }
                ,
                e.queueDirOf = function (e) {
                    return r(e),
                        this.queue(e === E ? "before" : "after")
                }
                ,
                e.queueDirEndOf = function (e) {
                    return r(e),
                        this.queue(e === E ? "beginning of" : "end of")
                }
                ,
                e.alert = function (e) {
                    return e && this.queue(e),
                        this.items.length && (this.msg = this.items.join(" ").replace(/ +(?= )/g, "").trim(),
                            this.jQ.empty().text(this.msg)),
                        this.clear()
                }
                ,
                e.clear = function () {
                    return this.items.length = 0,
                        this
                }
        })
            , Y = W();
        D.open(function (e) {
            e.aria = Y,
                e.exportMathSpeak = function () {
                    return this.root.mathspeak()
                }
        });
        var $ = w(I, function (e, t) {
            e.finalizeInsert = function (e, t) {
                var n = this;
                n.postOrder(function (t) {
                    t.finalizeTree(e)
                }),
                    n.postOrder(function (e) {
                        e.contactWeld(t)
                    }),
                    n.postOrder(function (e) {
                        e.blur()
                    }),
                    n.postOrder(function (e) {
                        e.reflow()
                    }),
                    n[_].siblingCreated && n[_].siblingCreated(e, E),
                    n[E].siblingCreated && n[E].siblingCreated(e, _),
                    n.bubble(function (e) {
                        e.reflow()
                    })
            }
        })
            , K = w($, function (e, t) {
                e.init = function (e, n, r) {
                    var i = this;
                    t.init.call(i),
                        i.ctrlSeq || (i.ctrlSeq = e),
                        n && (i.htmlTemplate = n),
                        r && (i.textTemplate = r)
                }
                    ,
                    e.replaces = function (e) {
                        e.disown(),
                            this.replacedFragment = e
                    }
                    ,
                    e.isEmpty = function () {
                        return this.foldChildren(!0, function (e, t) {
                            return e && t.isEmpty()
                        })
                    }
                    ,
                    e.parser = function () {
                        var e = H.block
                            , t = this;
                        return e.times(t.numBlocks()).map(function (e) {
                            t.blocks = e;
                            for (var n = 0; n < e.length; n += 1)
                                e[n].adopt(t, t.ends[_], 0);
                            return t
                        })
                    }
                    ,
                    e.createLeftOf = function (e) {
                        var n = this
                            , r = n.replacedFragment;
                        n.createBlocks(),
                            t.createLeftOf.call(n, e),
                            r && (r.adopt(n.ends[E], 0, 0),
                                r.jQ.appendTo(n.ends[E].jQ)),
                            n.finalizeInsert(e.options),
                            n.placeCursor(e)
                    }
                    ,
                    e.createBlocks = function () {
                        for (var e = this, t = e.numBlocks(), n = e.blocks = Array(t), r = 0; r < t; r += 1) {
                            var i = n[r] = J();
                            i.adopt(e, e.ends[_], 0)
                        }
                    }
                    ,
                    e.placeCursor = function (e) {
                        e.insAtRightEnd(this.foldChildren(this.ends[E], function (e, t) {
                            return e.isEmpty() ? e : t
                        }))
                    }
                    ,
                    e.moveTowards = function (e, t, n) {
                        var r = n && this[n + "Into"];
                        t.insAtDirEnd(-e, r || this.ends[-e]),
                            Y.queueDirEndOf(-e).queue(t.parent, !0)
                    }
                    ,
                    e.deleteTowards = function (e, t) {
                        this.isEmpty() ? t[e] = this.remove()[e] : this.moveTowards(e, t, null)
                    }
                    ,
                    e.selectTowards = function (e, t) {
                        t[-e] = this,
                            t[e] = this[e]
                    }
                    ,
                    e.selectChildren = function () {
                        return O(this, this)
                    }
                    ,
                    e.unselectInto = function (e, t) {
                        t.insAtDirEnd(-e, t.anticursor.ancestors[this.id])
                    }
                    ,
                    e.seek = function (e, t) {
                        function n(e) {
                            var t = {};
                            return t[E] = e.jQ.offset().left,
                                t[_] = t[E] + e.jQ.outerWidth(),
                                t
                        }
                        var r = this
                            , i = n(r);
                        if (e < i[E])
                            return t.insLeftOf(r);
                        if (e > i[_])
                            return t.insRightOf(r);
                        var o = i[E];
                        r.eachChild(function (s) {
                            var a = n(s);
                            return e < a[E] ? (e - o < a[E] - e ? s[E] ? t.insAtRightEnd(s[E]) : t.insLeftOf(r) : t.insAtLeftEnd(s),
                                !1) : e > a[_] ? void (s[_] ? o = a[_] : i[_] - e < e - a[_] ? t.insRightOf(r) : t.insAtRightEnd(s)) : (s.seek(e, t),
                                    !1)
                        })
                    }
                    ,
                    e.numBlocks = function () {
                        var e = this.htmlTemplate.match(/&\d+/g);
                        return e ? e.length : 0
                    }
                    ,
                    e.html = function () {
                        var e = this
                            , t = e.blocks
                            , r = " mathquill-command-id=" + e.id
                            , i = e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);
                        n("no unmatched angle brackets", i.join("") === this.htmlTemplate);
                        for (var o = 0, s = i[0]; s; o += 1,
                            s = i[o])
                            if ("/>" === s.slice(-2))
                                i[o] = s.slice(0, -2) + r + ' aria-hidden="true"/>';
                            else if ("<" === s.charAt(0)) {
                                n("not an unmatched top-level close tag", "/" !== s.charAt(1)),
                                    i[o] = s.slice(0, -1) + r + ' aria-hidden="true">';
                                var a = 1;
                                do
                                    o += 1,
                                        s = i[o],
                                        n("no missing close tags", s),
                                        "</" === s.slice(0, 2) ? a -= 1 : "<" === s.charAt(0) && "/>" !== s.slice(-2) && (a += 1);
                                while (a > 0)
                            }
                        return i.join("").replace(/>&(\d+)/g, function (e, n) {
                            return " mathquill-block-id=" + t[n].id + ' aria-hidden="true">' + t[n].join("html")
                        })
                    }
                    ,
                    e.latex = function () {
                        return this.foldChildren(this.ctrlSeq, function (e, t) {
                            return e + "{" + (t.latex() || " ") + "}"
                        })
                    }
                    ,
                    e.textTemplate = [""],
                    e.text = function () {
                        var e = this
                            , t = 0;
                        return e.foldChildren(e.textTemplate[t], function (n, r) {
                            t += 1;
                            var i = r.text();
                            return n && "(" === e.textTemplate[t] && "(" === i[0] && ")" === i.slice(-1) ? n + i.slice(1, -1) + e.textTemplate[t] : n + i + (e.textTemplate[t] || "")
                        })
                    }
                    ,
                    e.mathspeakTemplate = [],
                    e.mathspeak = function () {
                        var e = this
                            , t = 0;
                        return e.foldChildren(e.mathspeakTemplate[t] || "Start" + e.ctrlSeq + " ", function (n, r) {
                            return t += 1,
                                n + " " + r.mathspeak() + " " + (e.mathspeakTemplate[t] + " " || "End" + e.ctrlSeq + " ")
                        })
                    }
            })
            , X = w(K, function (t, n) {
                t.init = function (e, t, r, i) {
                    r || (r = e && e.length > 1 ? e.slice(1) : e),
                        this.mathspeakName = i || r,
                        n.init.call(this, e, t, [r])
                }
                    ,
                    t.parser = function () {
                        return z.succeed(this)
                    }
                    ,
                    t.numBlocks = function () {
                        return 0
                    }
                    ,
                    t.replaces = function (e) {
                        e.remove()
                    }
                    ,
                    t.createBlocks = e,
                    t.moveTowards = function (e, t) {
                        t.jQ.insDirOf(e, this.jQ),
                            t[-e] = this,
                            t[e] = this[e],
                            Y.queue(this)
                    }
                    ,
                    t.deleteTowards = function (e, t) {
                        t[e] = this.remove()[e]
                    }
                    ,
                    t.seek = function (e, t) {
                        e - this.jQ.offset().left < this.jQ.outerWidth() / 2 ? t.insLeftOf(this) : t.insRightOf(this)
                    }
                    ,
                    t.latex = function () {
                        return this.ctrlSeq
                    }
                    ,
                    t.text = function () {
                        return this.textTemplate.join("")
                    }
                    ,
                    t.mathspeak = function () {
                        return this.mathspeakName
                    }
                    ,
                    t.placeCursor = e,
                    t.isEmpty = function () {
                        return !0
                    }
            })
            , Q = w(X, function (e, t) {
                e.init = function (e, n, r) {
                    t.init.call(this, e, "<span>" + (n || e) + "</span>", g, r)
                }
            })
            , Z = w(X, function (e, t) {
                e.init = function (e, n, r, i) {
                    t.init.call(this, e, '<span class="dcg-mq-binary-operator">' + n + "</span>", r, i)
                }
            })
            , J = w($, function (e, t) {
                e.join = function (e) {
                    return this.foldChildren("", function (t, n) {
                        return t + n[e]()
                    })
                }
                    ,
                    e.html = function () {
                        return this.join("html")
                    }
                    ,
                    e.latex = function () {
                        return this.join("latex")
                    }
                    ,
                    e.text = function () {
                        return this.ends[E] === this.ends[_] && 0 !== this.ends[E] ? this.ends[E].text() : this.join("text")
                    }
                    ,
                    e.mathspeak = function () {
                        var e = ""
                            , t = {};
                        return this.controller && (t = this.controller.options.autoOperatorNames),
                            this.foldChildren([], function (n, r) {
                                if (r.isPartOfOperator)
                                    e += r.mathspeak();
                                else {
                                    if ("" !== e) {
                                        if (t !== {} && t._maxLength > 0) {
                                            var i = t[e.toLowerCase()];
                                            "string" == typeof i && (e = i)
                                        }
                                        n.push(e + " "),
                                            e = ""
                                    }
                                    var o = r.mathspeak()
                                        , s = r.ctrlSeq;
                                    isNaN(s) && (o = " " + o,
                                        "." !== s && (o += " ")),
                                        n.push(o)
                                }
                                return n
                            }).join("").replace(/ +(?= )/g, "")
                    }
                    ,
                    e.ariaLabel = "block",
                    e.keystroke = function (e, n, r) {
                        return !r.options.spaceBehavesLikeTab || "Spacebar" !== e && "Shift-Spacebar" !== e ? t.keystroke.apply(this, arguments) : (n.preventDefault(),
                            void r.escapeDir("Shift-Spacebar" === e ? E : _, e, n))
                    }
                    ,
                    e.moveOutOf = function (e, t, n) {
                        var r = n && this.parent[n + "Into"];
                        !r && this[e] ? (t.insAtDirEnd(-e, this[e]),
                            Y.queueDirEndOf(-e).queue(t.parent, !0)) : (t.insDirOf(e, this.parent),
                                Y.queueDirOf(e).queue(this.parent))
                    }
                    ,
                    e.selectOutOf = function (e, t) {
                        t.insDirOf(e, this.parent)
                    }
                    ,
                    e.deleteOutOf = function (e, t) {
                        t.unwrapGramp()
                    }
                    ,
                    e.seek = function (e, t) {
                        var n = this.ends[_];
                        if (!n || n.jQ.offset().left + n.jQ.outerWidth() < e)
                            return t.insAtRightEnd(this);
                        if (e < this.ends[E].jQ.offset().left)
                            return t.insAtLeftEnd(this);
                        for (; e < n.jQ.offset().left;)
                            n = n[E];
                        return n.seek(e, t)
                    }
                    ,
                    e.chToCmd = function (e, t) {
                        var n;
                        return e.match(/^[a-eg-zA-Z]$/) ? re(e) : /^\d$/.test(e) ? te(e) : t && t.typingSlashWritesDivisionSymbol && "/" === e ? P[""](e) : t && t.typingAsteriskWritesTimesSymbol && "*" === e ? P[""](e) : t && t.typingPercentWritesPercentOf && "%" === e ? P.percentof(e) : (n = A[e] || P[e]) ? n(e) : Q(e)
                    }
                    ,
                    e.write = function (e, t) {
                        var n = this.chToCmd(t, e.options);
                        e.selection && n.replaces(e.replaceSelection()),
                            n.createLeftOf(e.show()),
                            "/" === t ? Y.alert("over") : Y.alert(n.mathspeak({
                                createdLeftOf: e
                            }))
                    }
                    ,
                    e.focus = function () {
                        return this.jQ.addClass("dcg-mq-hasCursor"),
                            this.jQ.removeClass("dcg-mq-empty"),
                            this
                    }
                    ,
                    e.blur = function () {
                        return this.jQ.removeClass("dcg-mq-hasCursor"),
                            this.isEmpty() && this.jQ.addClass("dcg-mq-empty"),
                            this
                    }
            });
        q.StaticMath = function (e) {
            return w(e.AbstractMathQuill, function (t, n) {
                this.RootBlock = J,
                    t.__mathquillify = function (e, t) {
                        return this.config(e),
                            n.__mathquillify.call(this, "dcg-mq-math-mode"),
                            this.__controller.delegateMouseEvents(),
                            this.__controller.staticMathTextareaEvents(),
                            this
                    }
                    ,
                    t.init = function () {
                        n.init.apply(this, arguments);
                        var t = this.innerFields = [];
                        this.__controller.root.postOrder(function (n) {
                            n.registerInnerField(t, e.MathField)
                        })
                    }
                    ,
                    t.latex = function () {
                        var t = n.latex.apply(this, arguments);
                        if (arguments.length > 0) {
                            var r = this.innerFields = [];
                            this.__controller.root.postOrder(function (t) {
                                t.registerInnerField(r, e.MathField)
                            })
                        }
                        return t
                    }
                    ,
                    t.setAriaLabel = function (e) {
                        this.__controller.ariaLabel = "string" == typeof e ? e : "";
                        var t = "MathQuill Input" !== this.__controller.ariaLabel ? this.__controller.ariaLabel + ": " : "";
                        return this.__controller.container.attr("aria-label", t + this.__controller.root.mathspeak().trim()),
                            this
                    }
                    ,
                    t.getAriaLabel = function () {
                        return this.__controller.ariaLabel || ""
                    }
            })
        }
            ;
        var ee = w(J, p);
        q.MathField = function (t) {
            return w(t.EditableField, function (t, n) {
                this.RootBlock = ee,
                    t.__mathquillify = function (t, r) {
                        return this.config(t),
                            r > 1 && (this.__controller.root.reflow = e),
                            n.__mathquillify.call(this, "dcg-mq-editable-field dcg-mq-math-mode"),
                            delete this.__controller.root.reflow,
                            this
                    }
            })
        }
            ;
        var te = w(Q, function (e, t) {
            e.createLeftOf = function (e) {
                e.options.autoSubscriptNumerals && e.parent !== e.parent.parent.sub && (e[E] instanceof ne && e[E].isItalic !== !1 || e[E] instanceof Se && e[E][E] instanceof ne && e[E][E].isItalic !== !1) ? (P._().createLeftOf(e),
                    t.createLeftOf.call(this, e),
                    e.insRightOf(e.parent.parent)) : t.createLeftOf.call(this, e)
            }
                ,
                e.mathspeak = function (e) {
                    if (e && e.createdLeftOf) {
                        var n = e.createdLeftOf;
                        if (n.options.autoSubscriptNumerals && n.parent !== n.parent.parent.sub && (n[E] instanceof ne && n[E].isItalic !== !1 || n[E] instanceof Se && n[E][E] instanceof ne && n[E][E].isItalic !== !1))
                            return "Subscript " + t.mathspeak.call(this) + " Baseline"
                    }
                    return t.mathspeak.apply(this, arguments)
                }
        })
            , ne = w(X, function (e, t) {
                e.init = function (e, n) {
                    t.init.call(this, e, "<var>" + (n || e) + "</var>")
                }
                    ,
                    e.text = function () {
                        var e = this.ctrlSeq;
                        return this.isPartOfOperator ? "\\" == e[0] ? e = e.slice(1, e.length) : " " == e[e.length - 1] && (e = e.slice(0, -1)) : (!this[E] || this[E] instanceof ne || this[E] instanceof Z || "\\ " === this[E].ctrlSeq || (e = "*" + e),
                            !this[_] || this[_] instanceof Z || this[_] instanceof Se || (e += "*")),
                            e
                    }
                    ,
                    e.mathspeak = function () {
                        var e = this.ctrlSeq;
                        return this.isPartOfOperator || 1 !== e.length ? t.mathspeak.call(this) : '"' + e + '"'
                    }
            });
        N.p.autoCommands = {
            _maxLength: 0
        },
            F.autoCommands = function (e) {
                if (!/^[a-z]+(?: [a-z]+)*$/i.test(e))
                    throw '"' + e + '" not a space-delimited list of only letters';
                for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                    var o = t[i];
                    if (o.length < 2)
                        throw 'autocommand "' + o + '" not minimum length of 2';
                    if (P[o] === ae)
                        throw '"' + o + '" is a built-in operator name';
                    n[o] = 1,
                        r = b(r, o.length)
                }
                return n._maxLength = r,
                    n
            }
            ,
            N.p.autoParenthesizedFunctions = {
                _maxLength: 0
            },
            F.autoParenthesizedFunctions = function (e) {
                if (!/^[a-z]+(?: [a-z]+)*$/i.test(e))
                    throw '"' + e + '" not a space-delimited list of only letters';
                for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                    var o = t[i];
                    if (o.length < 2)
                        throw 'autocommand "' + o + '" not minimum length of 2';
                    n[o] = 1,
                        r = b(r, o.length)
                }
                return n._maxLength = r,
                    n
            }
            ;
        var re = w(ne, function (e, t) {
            function n(e) {
                return !e || e instanceof Z || e instanceof ke
            }
            e.init = function (e) {
                return t.init.call(this, this.letter = e)
            }
                ,
                e.checkAutoCmds = function (e) {
                    var t = e.options.autoCommands
                        , n = t._maxLength;
                    if (n > 0) {
                        for (var r = "", i = this, o = 0; i instanceof re && i.ctrlSeq === i.letter && o < n;)
                            r = i.letter + r,
                                i = i[E],
                                o += 1;
                        for (; r.length;) {
                            if (t.hasOwnProperty(r)) {
                                for (var o = 1, i = this; o < r.length; o += 1,
                                    i = i[E])
                                    ;
                                return T(i, this).remove(),
                                    e[E] = i[E],
                                    P[r](r).createLeftOf(e)
                            }
                            r = r.slice(1)
                        }
                    }
                }
                ,
                e.autoParenthesize = function (e) {
                    var t = e.parent.ends[_];
                    if (!(t && t instanceof Ae && "\\left(" === t.ctrlSeq)) {
                        for (var n = "", r = this, i = 0, o = e.options.autoParenthesizedFunctions, s = o._maxLength, a = e.options.autoOperatorNames; r instanceof re && i < s;)
                            n = r.letter + n,
                                r = r[E],
                                i += 1;
                        for (; n.length;) {
                            if (o.hasOwnProperty(n) && a.hasOwnProperty(n))
                                return e.parent.write(e, "(");
                            n = n.slice(1)
                        }
                    }
                }
                ,
                e.createLeftOf = function (e) {
                    t.createLeftOf.apply(this, arguments),
                        this.checkAutoCmds(e),
                        this.autoParenthesize(e)
                }
                ,
                e.italicize = function (e) {
                    return this.isItalic = e,
                        this.isPartOfOperator = !e,
                        this.jQ.toggleClass("dcg-mq-operator-name", !e),
                        this
                }
                ,
                e.finalizeTree = e.siblingDeleted = e.siblingCreated = function (e, t) {
                    t !== E && this[_] instanceof re || this.autoUnItalicize(e)
                }
                ,
                e.autoUnItalicize = function (e) {
                    var t = e.autoOperatorNames;
                    if (0 !== t._maxLength) {
                        for (var r = this.letter, i = this[E]; i instanceof re; i = i[E])
                            r = i.letter + r;
                        for (var o = this[_]; o instanceof re; o = o[_])
                            r += o.letter;
                        T(i[_] || this.parent.ends[E], o[E] || this.parent.ends[_]).each(function (e) {
                            e.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),
                                e.ctrlSeq = e.letter
                        });
                        e: for (var s = 0, a = i[_] || this.parent.ends[E]; s < r.length; s += 1,
                            a = a[_])
                            for (var c = v(t._maxLength, r.length - s); c > 0; c -= 1) {
                                var l = r.slice(s, s + c);
                                if (t.hasOwnProperty(l)) {
                                    for (var u = 0, d = a; u < c; u += 1,
                                        d = d[_]) {
                                        d.italicize(!1);
                                        var p = d
                                    }
                                    var h = ie.hasOwnProperty(l);
                                    if (a.ctrlSeq = (h ? "\\" : "\\operatorname{") + a.ctrlSeq,
                                        p.ctrlSeq += h ? " " : "}",
                                        se.hasOwnProperty(l) && p[E][E][E].jQ.addClass("dcg-mq-last"),
                                        n(a[E]) || a.jQ.addClass("dcg-mq-first"),
                                        !n(p[_]))
                                        if (p[_] instanceof Se) {
                                            var f = p[_]
                                                , m = f.siblingCreated = f.siblingDeleted = function () {
                                                    f.jQ.toggleClass("dcg-mq-after-operator-name", !(f[_] instanceof Ae))
                                                }
                                                ;
                                            m()
                                        } else
                                            p.jQ.toggleClass("dcg-mq-last", !(p[_] instanceof Ae));
                                    s += c - 1,
                                        a = p;
                                    continue e
                                }
                            }
                    }
                }
        })
            , ie = {}
            , oe = N.p.autoOperatorNames = {
                _maxLength: 9
            }
            , se = {
                limsup: 1,
                liminf: 1,
                projlim: 1,
                injlim: 1
            };
        !function () {
            for (var e = "arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "), t = 0; t < e.length; t += 1)
                ie[e[t]] = oe[e[t]] = 1;
            for (var n = "sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "), t = 0; t < n.length; t += 1)
                ie[n[t]] = 1;
            for (var r = "sin cos tan sec cosec csc cotan cot ctg".split(" "), t = 0; t < r.length; t += 1)
                oe[r[t]] = oe["arc" + r[t]] = oe[r[t] + "h"] = oe["ar" + r[t] + "h"] = oe["arc" + r[t] + "h"] = 1;
            for (var i = "gcf hcf lcm proj span".split(" "), t = 0; t < i.length; t += 1)
                oe[i[t]] = 1
        }(),
            F.autoOperatorNames = function (e) {
                if ("string" != typeof e)
                    throw '"' + e + '" not a space-delimited list';
                if (!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e))
                    throw '"' + e + '" not a space-delimited list of letters or "|"';
                for (var t = e.split(" "), n = {}, r = 0, i = 0; i < t.length; i += 1) {
                    var o = t[i];
                    if (o.length < 2)
                        throw '"' + o + '" not minimum length of 2';
                    if (o.indexOf("|") < 0)
                        n[o] = o,
                            r = b(r, o.length);
                    else {
                        var s = o.split("|");
                        if (s.length > 2)
                            throw '"' + o + '" has more than 1 mathspeak delimiter';
                        if (s[0].length < 2)
                            throw '"' + o[0] + '" not minimum length of 2';
                        n[s[0]] = s[1].replace(/-/g, " "),
                            r = b(r, s[0].length)
                    }
                }
                return n._maxLength = r,
                    n
            }
            ;
        var ae = w(X, function (e, t) {
            e.init = function (e) {
                this.ctrlSeq = e
            }
                ,
                e.createLeftOf = function (e) {
                    for (var t = this.ctrlSeq, n = 0; n < t.length; n += 1)
                        re(t.charAt(n)).createLeftOf(e)
                }
                ,
                e.parser = function () {
                    for (var e = this.ctrlSeq, t = J(), n = 0; n < e.length; n += 1)
                        re(e.charAt(n)).adopt(t, t.ends[_], 0);
                    return z.succeed(t.children())
                }
        });
        for (var ce in oe)
            oe.hasOwnProperty(ce) && (P[ce] = ae);
        P.operatorname = w(K, function (t) {
            t.createLeftOf = e,
                t.numBlocks = function () {
                    return 1
                }
                ,
                t.parser = function () {
                    return H.block.map(function (e) {
                        var t = !0
                            , n = ""
                            , r = e.children();
                        return r.each(function (e) {
                            e instanceof re ? n += e.letter : t = !1
                        }),
                            t && "ans" === n ? P[n](n) : r
                    })
                }
        }),
            P.f = w(re, function (e, t) {
                e.init = function () {
                    X.p.init.call(this, this.letter = "f", '<var class="dcg-mq-f">f</var>')
                }
                    ,
                    e.italicize = function (e) {
                        return this.jQ.html("f").toggleClass("dcg-mq-f", e),
                            t.italicize.apply(this, arguments)
                    }
            }),
            P[" "] = P.space = t(Q, "\\ ", "&nbsp;", "space"),
            P["'"] = P.prime = t(Q, "'", "&prime;", "prime"),
            P[""] = P.dprime = t(Q, "", "&Prime;", "double prime"),
            P.backslash = t(Q, "\\backslash ", "\\", "backslash"),
            A["\\"] || (A["\\"] = P.backslash),
            P.$ = t(Q, "\\$", "$", "dollar"),
            P.square = t(Q, "\\square ", "", "square"),
            P.mid = t(Q, "\\mid ", "", "mid");
        var le = w(X, function (e, t) {
            e.init = function (e, n) {
                t.init.call(this, e, '<span class="dcg-mq-nonSymbola">' + (n || e) + "</span>")
            }
        });
        P["@"] = le,
            P["&"] = t(le, "\\&", "&amp;", "and"),
            P["%"] = w(le, function (e, t) {
                e.init = function () {
                    t.init.call(this, "\\%", "%", "percent")
                }
                    ,
                    e.parser = function () {
                        var e = z.optWhitespace
                            , n = z.string;
                        return e.then(n("\\operatorname{of}").map(function () {
                            return P.percentof()
                        })).or(t.parser.call(this))
                    }
            }),
            P[""] = P.parallel = t(Q, "\\parallel ", "&#x2225;", "parallel"),
            P[""] = P.nparallel = t(Q, "\\nparallel ", "&#x2226;", "not parallel"),
            P[""] = P.perp = t(Q, "\\perp ", "&#x27C2;", "perpendicular"),
            P.alpha = P.beta = P.gamma = P.delta = P.zeta = P.eta = P.theta = P.iota = P.kappa = P.mu = P.nu = P.xi = P.rho = P.sigma = P.tau = P.chi = P.psi = P.omega = w(ne, function (e, t) {
                e.init = function (e) {
                    t.init.call(this, "\\" + e + " ", "&" + e + ";")
                }
            }),
            P.phi = t(ne, "\\phi ", "&#981;", "phi"),
            P.phiv = P.varphi = t(ne, "\\varphi ", "&phi;", "phi"),
            P.epsilon = t(ne, "\\epsilon ", "&#1013;", "epsilon"),
            P.epsiv = P.varepsilon = t(ne, "\\varepsilon ", "&epsilon;", "epsilon"),
            P.piv = P.varpi = t(ne, "\\varpi ", "&piv;", "piv"),
            P.sigmaf = P.sigmav = P.varsigma = t(ne, "\\varsigma ", "&sigmaf;", "sigma"),
            P.thetav = P.vartheta = P.thetasym = t(ne, "\\vartheta ", "&thetasym;", "theta"),
            P.upsilon = P.upsi = t(ne, "\\upsilon ", "&upsilon;", "upsilon"),
            P.gammad = P.Gammad = P.digamma = t(ne, "\\digamma ", "&#989;", "gamma"),
            P.kappav = P.varkappa = t(ne, "\\varkappa ", "&#1008;", "kappa"),
            P.rhov = P.varrho = t(ne, "\\varrho ", "&#1009;", "rho"),
            P.pi = P[""] = t(le, "\\pi ", "&pi;", "pi"),
            P.lambda = t(le, "\\lambda ", "&lambda;", "lambda"),
            P.Upsilon = P.Upsi = P.upsih = P.Upsih = t(X, "\\Upsilon ", '<var style="font-family: serif">&upsih;</var>', "capital upsilon"),
            P.Gamma = P.Delta = P.Theta = P.Lambda = P.Xi = P.Pi = P.Sigma = P.Phi = P.Psi = P.Omega = P.forall = w(Q, function (e, t) {
                e.init = function (e) {
                    t.init.call(this, "\\" + e + " ", "&" + e + ";")
                }
            });
        var ue = w(K, function (e) {
            e.init = function (e) {
                this.latex = e
            }
                ,
                e.createLeftOf = function (e) {
                    var t = H.parse(this.latex);
                    t.children().adopt(e.parent, e[E], e[_]),
                        e[E] = t.ends[_],
                        t.jQize().insertBefore(e.jQ),
                        t.finalizeInsert(e.options, e),
                        t.ends[_][_].siblingCreated && t.ends[_][_].siblingCreated(e.options, E),
                        t.ends[E][E].siblingCreated && t.ends[E][E].siblingCreated(e.options, _),
                        e.parent.bubble(function (e) {
                            e.reflow()
                        })
                }
                ,
                e.mathspeak = function () {
                    return H.parse(this.latex).mathspeak()
                }
                ,
                e.parser = function () {
                    var e = H.parse(this.latex).children();
                    return z.succeed(e)
                }
        });
        P[""] = t(ue, "^1"),
            P[""] = t(ue, "^2"),
            P[""] = t(ue, "^3"),
            P[""] = t(ue, "\\frac14"),
            P[""] = t(ue, "\\frac12"),
            P[""] = t(ue, "\\frac34");
        var de = w(Z, function (e) {
            e.init = Q.prototype.init,
                e.contactWeld = e.siblingCreated = e.siblingDeleted = function (e, t) {
                    function n(e) {
                        return e[E] ? e[E] instanceof Z || /^[,;:\(\[]$/.test(e[E].ctrlSeq) ? "" : "dcg-mq-binary-operator" : e.parent && e.parent.parent && e.parent.parent.isStyleBlock() ? n(e.parent.parent) : "";
                    }
                    if (t !== _)
                        return this.jQ[0].className = n(this),
                            this
                }
        });
        P["+"] = t(de, "+", "+", "plus"),
            P[""] = P[""] = P[""] = P["-"] = t(de, "-", "&minus;", "minus"),
            P[""] = P.pm = P.plusmn = P.plusminus = t(de, "\\pm ", "&plusmn;", "plus-or-minus"),
            P.mp = P.mnplus = P.minusplus = t(de, "\\mp ", "&#8723;", "minus-or-plus"),
            A["*"] = P.sdot = P.cdot = t(Z, "\\cdot ", "&middot;", "*", "times");
        var pe = w(Z, function (e, t) {
            e.init = function (e, n) {
                this.data = e,
                    this.strict = n;
                var r = n ? "Strict" : "";
                t.init.call(this, e["ctrlSeq" + r], e["html" + r], e["text" + r], e["mathspeak" + r])
            }
                ,
                e.swap = function (e) {
                    this.strict = e;
                    var t = e ? "Strict" : "";
                    this.ctrlSeq = this.data["ctrlSeq" + t],
                        this.jQ.html(this.data["html" + t]),
                        this.textTemplate = [this.data["text" + t]],
                        this.mathspeakName = this.data["mathspeak" + t]
                }
                ,
                e.deleteTowards = function (e, n) {
                    return e !== E || this.strict ? void t.deleteTowards.apply(this, arguments) : (this.swap(!0),
                        void this.bubble(function (e) {
                            e.reflow()
                        }))
                }
        })
            , he = {
                ctrlSeq: "\\le ",
                html: "&le;",
                text: "",
                mathspeak: "less than or equal to",
                ctrlSeqStrict: "<",
                htmlStrict: "&lt;",
                textStrict: "<",
                mathspeakStrict: "less than"
            }
            , fe = {
                ctrlSeq: "\\ge ",
                html: "&ge;",
                text: "",
                mathspeak: "greater than or equal to",
                ctrlSeqStrict: ">",
                htmlStrict: "&gt;",
                textStrict: ">",
                mathspeakStrict: "greater than"
            };
        P["<"] = P.lt = t(pe, he, !0),
            P[">"] = P.gt = t(pe, fe, !0),
            P[""] = P.le = P.leq = t(pe, he, !1),
            P[""] = P.ge = P.geq = t(pe, fe, !1);
        var me = w(Z, function (e, t) {
            e.init = function () {
                t.init.call(this, "=", "=", "=", "equals")
            }
                ,
                e.createLeftOf = function (e) {
                    return e[E] instanceof pe && e[E].strict ? (e[E].swap(!1),
                        void e[E].bubble(function (e) {
                            e.reflow()
                        })) : void t.createLeftOf.apply(this, arguments)
                }
        });
        P["="] = me,
            P[""] = P.times = t(Z, "\\times ", "&times;", "[x]", "times"),
            P[""] = P.div = P.divide = P.divides = t(Z, "\\div ", "&divide;", "[/]", "over"),
            A["~"] = P.sim = t(Z, "\\sim ", "~", "~", "tilde");
        var ge, ye, ve = e, be = document.createElement("div"), xe = be.style, we = {
            transform: 1,
            WebkitTransform: 1,
            MozTransform: 1,
            OTransform: 1,
            msTransform: 1
        };
        for (var Ee in we)
            if (Ee in xe) {
                ye = Ee;
                break
            }
        ye ? ge = function (e, t, n) {
            e.css(ye, "scale(" + t + "," + n + ")")
        }
            : "filter" in xe ? (ve = function (e) {
                e.className = e.className
            }
                ,
                ge = function (e, t, n) {
                    function r() {
                        e.css("marginRight", (i.width() - 1) * (t - 1) / t + "px")
                    }
                    t /= 1 + (n - 1) / 2,
                        e.css("fontSize", n + "em"),
                        e.hasClass("dcg-mq-matrixed-container") || e.addClass("dcg-mq-matrixed-container").wrapInner('<span class="dcg-mq-matrixed"></span>');
                    var i = e.children().css("filter", "progid:DXImageTransform.Microsoft.Matrix(M11=" + t + ",SizingMethod='auto expand')");
                    r();
                    var o = setInterval(r);
                    S(window).load(function () {
                        clearTimeout(o),
                            r()
                    })
                }
            ) : ge = function (e, t, n) {
                e.css("fontSize", n + "em")
            }
            ;
        var _e = w(K, function (e, t) {
            e.init = function (e, n, r) {
                t.init.call(this, e, "<" + n + " " + r + ">&0</" + n + ">")
            }
        });
        P.mathrm = t(_e, "\\mathrm", "span", 'class="dcg-mq-roman dcg-mq-font"'),
            P.mathit = t(_e, "\\mathit", "i", 'class="dcg-mq-font"'),
            P.mathbf = t(_e, "\\mathbf", "b", 'class="dcg-mq-font"'),
            P.mathsf = t(_e, "\\mathsf", "span", 'class="dcg-mq-sans-serif dcg-mq-font"'),
            P.mathtt = t(_e, "\\mathtt", "span", 'class="dcg-mq-monospace dcg-mq-font"'),
            P.underline = t(_e, "\\underline", "span", 'class="dcg-mq-non-leaf dcg-mq-underline"'),
            P.overline = P.bar = t(_e, "\\overline", "span", 'class="dcg-mq-non-leaf dcg-mq-overline"'),
            P.overrightarrow = t(_e, "\\overrightarrow", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"'),
            P.overleftarrow = t(_e, "\\overleftarrow", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"'),
            P.overleftrightarrow = t(_e, "\\overleftrightarrow ", "span", 'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"'),
            P.overarc = t(_e, "\\overarc", "span", 'class="dcg-mq-non-leaf dcg-mq-overarc"');
        var Se = (P.textcolor = w(K, function (e, t) {
            e.setColor = function (e) {
                this.color = e,
                    this.htmlTemplate = '<span class="dcg-mq-textcolor" style="color:' + e + '">&0</span>'
            }
                ,
                e.latex = function () {
                    return "\\textcolor{" + this.color + "}{" + this.blocks[0].latex() + "}"
                }
                ,
                e.parser = function () {
                    var e = this
                        , n = z.optWhitespace
                        , r = z.string
                        , i = z.regex;
                    return n.then(r("{")).then(i(/^[#\w\s.,()%-]*/)).skip(r("}")).then(function (n) {
                        return e.setColor(n),
                            t.parser.call(e)
                    })
                }
                ,
                e.isStyleBlock = function () {
                    return !0
                }
        }),
            P.class = w(K, function (e, t) {
                e.parser = function () {
                    var e = this
                        , n = z.string
                        , r = z.regex;
                    return z.optWhitespace.then(n("{")).then(r(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function (n) {
                        return e.cls = n || "",
                            e.htmlTemplate = '<span class="dcg-mq-class ' + n + '">&0</span>',
                            t.parser.call(e)
                    })
                }
                    ,
                    e.latex = function () {
                        return "\\class{" + this.cls + "}{" + this.blocks[0].latex() + "}"
                    }
                    ,
                    e.isStyleBlock = function () {
                        return !0
                    }
            }),
            w(K, function (e, t) {
                e.ctrlSeq = "_{...}^{...}",
                    e.createLeftOf = function (e) {
                        if (this.replacedFragment || e[E] || !e.options.supSubsRequireOperand)
                            return t.createLeftOf.apply(this, arguments)
                    }
                    ,
                    e.contactWeld = function (e) {
                        for (var t = E; t; t = t === E && _)
                            if (this[t] instanceof Se) {
                                for (var n = "sub"; n; n = "sub" === n && "sup") {
                                    var r = this[n]
                                        , i = this[t][n];
                                    if (r) {
                                        if (i)
                                            if (r.isEmpty())
                                                var o = k(i, 0, i.ends[E]);
                                            else {
                                                r.jQ.children().insAtDirEnd(-t, i.jQ);
                                                var s = r.children().disown()
                                                    , o = k(i, s.ends[_], i.ends[E]);
                                                t === E ? s.adopt(i, i.ends[_], 0) : s.adopt(i, 0, i.ends[E])
                                            }
                                        else
                                            this[t].addBlock(r.disown());
                                        this.placeCursor = function (e, n) {
                                            return function (r) {
                                                r.insAtDirEnd(-t, e || n)
                                            }
                                        }(i, r)
                                    }
                                }
                                this.remove(),
                                    e && e[E] === this && (t === _ && o ? o[E] ? e.insRightOf(o[E]) : e.insAtLeftEnd(o.parent) : e.insRightOf(this[t]));
                                break
                            }
                    }
                    ,
                    N.p.charsThatBreakOutOfSupSub = "",
                    e.finalizeTree = function () {
                        this.ends[E].write = function (e, t) {
                            if (e.options.autoSubscriptNumerals && this === this.parent.sub) {
                                if ("_" === t)
                                    return;
                                var n = this.chToCmd(t, e.options);
                                return n instanceof X ? e.deleteSelection() : e.clearSelection().insRightOf(this.parent),
                                    n.createLeftOf(e.show()),
                                    void Y.queue("Baseline").alert(n.mathspeak({
                                        createdLeftOf: e
                                    }))
                            }
                            e[E] && !e[_] && !e.selection && e.options.charsThatBreakOutOfSupSub.indexOf(t) > -1 && (e.insRightOf(this.parent),
                                Y.queue("Baseline")),
                                J.p.write.apply(this, arguments)
                        }
                    }
                    ,
                    e.moveTowards = function (e, n, r) {
                        n.options.autoSubscriptNumerals && !this.sup ? n.insDirOf(e, this) : t.moveTowards.apply(this, arguments)
                    }
                    ,
                    e.deleteTowards = function (e, n) {
                        if (n.options.autoSubscriptNumerals && this.sub) {
                            var r = this.sub.ends[-e];
                            r instanceof X ? r.remove() : r && r.deleteTowards(e, n.insAtDirEnd(-e, this.sub)),
                                this.sub.isEmpty() && (this.sub.deleteOutOf(E, n.insAtLeftEnd(this.sub)),
                                    this.sup && n.insDirOf(-e, this))
                        } else
                            t.deleteTowards.apply(this, arguments)
                    }
                    ,
                    e.latex = function () {
                        function e(e, t) {
                            var n = t && t.latex();
                            return t ? e + (1 === n.length ? n : "{" + (n || " ") + "}") : ""
                        }
                        return e("_", this.sub) + e("^", this.sup)
                    }
                    ,
                    e.addBlock = function (e) {
                        "sub" === this.supsub ? (this.sup = this.upInto = this.sub.upOutOf = e,
                            e.adopt(this, this.sub, 0).downOutOf = this.sub,
                            e.jQ = S('<span class="dcg-mq-sup"/>').append(e.jQ.children()).prependTo(this.jQ),
                            I.linkElementByBlockNode(e.jQ[0], e)) : (this.sub = this.downInto = this.sup.downOutOf = e,
                                e.adopt(this, 0, this.sup).upOutOf = this.sup,
                                e.jQ = S('<span class="dcg-mq-sub"></span>').append(e.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),
                                I.linkElementByBlockNode(e.jQ[0], e),
                                this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));
                        for (var t = 0; t < 2; t += 1)
                            (function (e, t, n, r) {
                                e[t].deleteOutOf = function (i, o) {
                                    if (o.insDirOf(this[i] ? -i : i, this.parent),
                                        !this.isEmpty()) {
                                        var s = this.ends[i];
                                        this.children().disown().withDirAdopt(i, o.parent, o[i], o[-i]).jQ.insDirOf(-i, o.jQ),
                                            o[-i] = s
                                    }
                                    e.supsub = n,
                                        delete e[t],
                                        delete e[r + "Into"],
                                        e[n][r + "OutOf"] = h,
                                        delete e[n].deleteOutOf,
                                        "sub" === t && S(e.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),
                                        this.remove()
                                }
                            }
                            )(this, "sub sup".split(" ")[t], "sup sub".split(" ")[t], "down up".split(" ")[t])
                    }
            }));
        P.subscript = P._ = w(Se, function (e, t) {
            e.supsub = "sub",
                e.htmlTemplate = '<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',
                e.textTemplate = ["_"],
                e.mathspeakTemplate = ["Subscript,", ", Baseline"],
                e.ariaLabel = "subscript",
                e.finalizeTree = function () {
                    this.downInto = this.sub = this.ends[E],
                        this.sub.upOutOf = h,
                        t.finalizeTree.call(this)
                }
        }),
            P.superscript = P.supscript = P["^"] = w(Se, function (e, t) {
                e.supsub = "sup",
                    e.htmlTemplate = '<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',
                    e.textTemplate = ["^"],
                    e.mathspeakTemplate = ["Superscript,", ", Baseline"],
                    e.ariaLabel = "superscript",
                    e.finalizeTree = function () {
                        this.upInto = this.sup = this.ends[_],
                            this.sup.downOutOf = h,
                            t.finalizeTree.call(this)
                    }
            });
        var ke = w(K, function (e, t) {
            e.init = function (t, n, r) {
                e.ariaLabel = r || ctrlSeq;
                var i = '<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>' + n + '</big><span class="dcg-mq-from"><span>&0</span></span></span>';
                X.prototype.init.call(this, t, i)
            }
                ,
                e.createLeftOf = function (e) {
                    t.createLeftOf.apply(this, arguments),
                        e.options.sumStartsWithNEquals && (re("n").createLeftOf(e),
                            me().createLeftOf(e))
                }
                ,
                e.latex = function () {
                    function e(e) {
                        return 1 === e.length ? e : "{" + (e || " ") + "}"
                    }
                    return this.ctrlSeq + "_" + e(this.ends[E].latex()) + "^" + e(this.ends[_].latex())
                }
                ,
                e.mathspeak = function () {
                    return "Start " + this.ariaLabel + " from " + this.ends[E].mathspeak() + " to " + this.ends[_].mathspeak() + ", end " + this.ariaLabel + ", "
                }
                ,
                e.parser = function () {
                    for (var e = z.string, t = z.optWhitespace, n = z.succeed, r = H.block, i = this, o = i.blocks = [J(), J()], s = 0; s < o.length; s += 1) {
                        switch (s) {
                            case 0:
                                o[s].ariaLabel = "lower bound";
                                break;
                            case 1:
                                o[s].ariaLabel = "upper bound";
                                break;
                            default:
                                o[s].ariaLabel = "block " + s
                        }
                        o[s].adopt(i, i.ends[_], 0)
                    }
                    return t.then(e("_").or(e("^"))).then(function (e) {
                        var t = o["_" === e ? 0 : 1];
                        return r.then(function (e) {
                            return e.children().adopt(t, t.ends[_], 0),
                                n(i)
                        })
                    }).many().result(i)
                }
                ,
                e.finalizeTree = function () {
                    this.downInto = this.ends[E],
                        this.upInto = this.ends[_],
                        this.ends[E].upOutOf = this.ends[_],
                        this.ends[_].downOutOf = this.ends[E]
                }
        });
        P[""] = P.sum = P.summation = t(ke, "\\sum ", "&sum;", "sum"),
            P[""] = P.prod = P.product = t(ke, "\\prod ", "&prod;", "product"),
            P.coprod = P.coproduct = t(ke, "\\coprod ", "&#8720;", "co product"),
            P[""] = P.int = P.integral = w(ke, function (e, t) {
                e.init = function () {
                    e.ariaLabel = "integral";
                    var t = '<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>';
                    X.prototype.init.call(this, "\\int ", t, "integral")
                }
                    ,
                    e.createLeftOf = K.p.createLeftOf
            });
        var Me = P.frac = P.dfrac = P.cfrac = P.fraction = w(K, function (e, t) {
            e.ctrlSeq = "\\frac",
                e.htmlTemplate = '<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',
                e.textTemplate = ["(", ")/(", ")"],
                e.finalizeTree = function () {
                    this.upInto = this.ends[_].upOutOf = this.ends[E],
                        this.downInto = this.ends[E].downOutOf = this.ends[_],
                        this.ends[E].ariaLabel = "numerator",
                        this.ends[_].ariaLabel = "denominator",
                        this.getFracDepth() > 1 ? this.mathspeakTemplate = ["StartNestedFraction,", "NestedOver", ", EndNestedFraction"] : this.mathspeakTemplate = ["StartFraction,", "Over", ", EndFraction"]
                }
                ,
                e.mathspeak = function (e) {
                    if (e && e.createdLeftOf) {
                        var n = e.createdLeftOf;
                        return n.parent.mathspeak()
                    }
                    return t.mathspeak.apply(this, arguments)
                }
                ,
                e.getFracDepth = function () {
                    var e = 0
                        , t = function (e, n) {
                            return e instanceof I && e.ctrlSeq && e.ctrlSeq.toLowerCase().search("frac") >= 0 && (n += 1),
                                e.parent ? t(e.parent, n) : n
                        };
                    return t(this, e)
                }
        })
            , Ce = P.over = A["/"] = w(Me, function (t, n) {
                t.createLeftOf = function (t) {
                    if (!this.replacedFragment) {
                        var r = t[E];
                        if (!t.options.typingSlashCreatesNewFraction)
                            for (; r && !(r instanceof Z || r instanceof (P.text || e) || r instanceof ke || "\\ " === r.ctrlSeq || /^[,;:]$/.test(r.ctrlSeq));)
                                r = r[E];
                        r instanceof ke && r[_] instanceof Se && (r = r[_],
                            r[_] instanceof Se && r[_].ctrlSeq != r.ctrlSeq && (r = r[_])),
                            r !== t[E] && (this.replaces(T(r[_] || t.parent.ends[E], t[E])),
                                t[E] = r)
                    }
                    n.createLeftOf.call(this, t)
                }
            });
        P.ans = w(X, function (e, t) {
            e.init = function (e) {
                t.init.call(this, "\\operatorname{ans}", '<span class="dcg-mq-ans">ans</span>', "ans")
            }
        }),
            P.percent = P.percentof = w(X, function (e, t) {
                e.init = function () {
                    t.init.call(this, "\\%\\operatorname{of}", '<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>', "percent of")
                }
            });
        var Ie = P.sqrt = P[""] = w(K, function (e, t) {
            e.ctrlSeq = "\\sqrt",
                e.htmlTemplate = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">&radic;</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',
                e.textTemplate = ["sqrt(", ")"],
                e.mathspeakTemplate = ["StartRoot,", ", EndRoot"],
                e.ariaLabel = "root",
                e.parser = function () {
                    return H.optBlock.then(function (e) {
                        return H.block.map(function (t) {
                            var n = Te();
                            return n.blocks = [e, t],
                                e.adopt(n, 0, 0),
                                t.adopt(n, e, 0),
                                n
                        })
                    }).or(t.parser.call(this))
                }
                ,
                e.reflow = function () {
                    var e = this.ends[_].jQ;
                    ge(e.prev(), 1, e.innerHeight() / +e.css("fontSize").slice(0, -2) - .1)
                }
        })
            , Te = (P.hat = w(K, function (e, t) {
                e.ctrlSeq = "\\hat",
                    e.htmlTemplate = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',
                    e.textTemplate = ["hat(", ")"]
            }),
                P.nthroot = w(Ie, function (e, t) {
                    e.htmlTemplate = '<sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">&radic;</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span>',
                        e.textTemplate = ["sqrt[", "](", ")"],
                        e.latex = function () {
                            return "\\sqrt[" + this.ends[E].latex() + "]{" + this.ends[_].latex() + "}"
                        }
                        ,
                        e.mathspeak = function () {
                            return this.ends[E].ariaLabel = "Index",
                                this.ends[_].ariaLabel = "Radicand",
                                "Start " + this.ends[E].mathspeak() + " Root, " + this.ends[_].mathspeak() + ", End Root"
                        }
                }))
            , Pe = w(K, function (e, t) {
                e.init = function (e, n, r) {
                    var i = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">' + n + '</span><span class="dcg-mq-diacritic-stem">&0</span></span>';
                    t.init.call(this, e, i, r)
                }
            });
        P.vec = t(Pe, "\\vec", "&rarr;", ["vec(", ")"]),
            P.tilde = t(Pe, "\\tilde", "~", ["tilde(", ")"]);
        var Ae = w(w(K, f), function (t, n) {
            t.init = function (e, t, r, i, o) {
                n.init.call(this, "\\left" + i, g, [t, r]),
                    this.side = e,
                    this.sides = {},
                    this.sides[E] = {
                        ch: t,
                        ctrlSeq: i
                    },
                    this.sides[_] = {
                        ch: r,
                        ctrlSeq: o
                    }
            }
                ,
                t.numBlocks = function () {
                    return 1
                }
                ,
                t.html = function () {
                    return this.htmlTemplate = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-scaled dcg-mq-paren' + (this.side === _ ? " dcg-mq-ghost" : "") + '">' + this.sides[E].ch + '</span><span class="dcg-mq-non-leaf">&0</span><span class="dcg-mq-scaled dcg-mq-paren' + (this.side === E ? " dcg-mq-ghost" : "") + '">' + this.sides[_].ch + "</span></span>",
                        n.html.call(this)
                }
                ,
                t.latex = function () {
                    return "\\left" + this.sides[E].ctrlSeq + this.ends[E].latex() + "\\right" + this.sides[_].ctrlSeq
                }
                ,
                t.mathspeak = function (e) {
                    var t = this.sides[E].ch
                        , r = this.sides[_].ch;
                    if ("|" === t && "|" === r)
                        this.mathspeakTemplate = ["StartAbsoluteValue,", ", EndAbsoluteValue"],
                            this.ariaLabel = "absolute value";
                    else {
                        if (e && e.createdLeftOf && this.side) {
                            var i = "";
                            return this.side === E ? i = this.textTemplate[0] : this.side === _ && (i = this.textTemplate[1]),
                                (this.side === E ? "left " : "right ") + Oe[i]
                        }
                        this.mathspeakTemplate = ["left " + Oe[t] + ",", ", right " + Oe[r]],
                            this.ariaLabel = Oe[t] + " block"
                    }
                    return n.mathspeak.call(this)
                }
                ,
                t.matchBrack = function (e, t, n) {
                    return n instanceof Ae && n.side && n.side !== -t && (!e.restrictMismatchedBrackets || Le[this.sides[this.side].ch] === n.sides[n.side].ch || {
                        "(": "]",
                        "[": ")"
                    }[this.sides[E].ch] === n.sides[_].ch) && n
                }
                ,
                t.closeOpposing = function (e) {
                    e.side = 0,
                        e.sides[this.side] = this.sides[this.side],
                        e.delimjQs.eq(this.side === E ? 0 : 1).removeClass("dcg-mq-ghost").html(this.sides[this.side].ch)
                }
                ,
                t.createLeftOf = function (e) {
                    if (!this.replacedFragment) {
                        var t = e.options;
                        if ("|" === this.sides[E].ch)
                            var r = this.matchBrack(t, _, e[_]) || this.matchBrack(t, E, e[E]) || this.matchBrack(t, 0, e.parent.parent);
                        else
                            var r = this.matchBrack(t, -this.side, e[-this.side]) || this.matchBrack(t, -this.side, e.parent.parent)
                    }
                    if (r) {
                        var i = this.side = -r.side;
                        this.closeOpposing(r),
                            r === e.parent.parent && e[i] && T(e[i], e.parent.ends[i], -i).disown().withDirAdopt(-i, r.parent, r, r[i]).jQ.insDirOf(i, r.jQ),
                            r.bubble(function (e) {
                                e.reflow()
                            })
                    } else
                        r = this,
                            i = r.side,
                            r.replacedFragment ? r.side = 0 : e[-i] && (r.replaces(T(e[-i], e.parent.ends[-i], i)),
                                e[-i] = 0),
                            n.createLeftOf.call(r, e);
                    i === E ? e.insAtLeftEnd(r.ends[E]) : e.insRightOf(r)
                }
                ,
                t.placeCursor = e,
                t.unwrap = function () {
                    this.ends[E].children().disown().adopt(this.parent, this, this[_]).jQ.insertAfter(this.jQ),
                        this.remove()
                }
                ,
                t.deleteSide = function (e, t, n) {
                    var r = this.parent
                        , i = this[e]
                        , o = r.ends[e];
                    if (e === this.side)
                        return this.unwrap(),
                            void (i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r));
                    var s = n.options
                        , a = !this.side;
                    if (this.side = -e,
                        this.matchBrack(s, e, this.ends[E].ends[this.side])) {
                        this.closeOpposing(this.ends[E].ends[this.side]);
                        var c = this.ends[E].ends[e];
                        this.unwrap(),
                            c.siblingCreated && c.siblingCreated(n.options, e),
                            i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r)
                    } else {
                        if (this.matchBrack(s, e, this.parent.parent))
                            this.parent.parent.closeOpposing(this),
                                this.parent.parent.unwrap();
                        else {
                            if (t && a)
                                return this.unwrap(),
                                    void (i ? n.insDirOf(-e, i) : n.insAtDirEnd(e, r));
                            this.sides[e] = {
                                ch: Le[this.sides[this.side].ch],
                                ctrlSeq: Le[this.sides[this.side].ctrlSeq]
                            },
                                this.delimjQs.removeClass("dcg-mq-ghost").eq(e === E ? 0 : 1).addClass("dcg-mq-ghost").html(this.sides[e].ch)
                        }
                        if (i) {
                            var c = this.ends[E].ends[e];
                            T(i, o, -e).disown().withDirAdopt(-e, this.ends[E], c, 0).jQ.insAtDirEnd(e, this.ends[E].jQ.removeClass("dcg-mq-empty")),
                                c.siblingCreated && c.siblingCreated(n.options, e),
                                n.insDirOf(-e, i)
                        } else
                            t ? n.insDirOf(e, this) : n.insAtDirEnd(e, this.ends[E])
                    }
                }
                ,
                t.deleteTowards = function (e, t) {
                    this.deleteSide(-e, !1, t)
                }
                ,
                t.finalizeTree = function () {
                    this.ends[E].deleteOutOf = function (e, t) {
                        this.parent.deleteSide(e, !0, t)
                    }
                        ,
                        this.finalizeTree = this.intentionalBlur = function () {
                            this.delimjQs.eq(this.side === E ? 1 : 0).removeClass("dcg-mq-ghost"),
                                this.side = 0
                        }
                }
                ,
                t.siblingCreated = function (e, t) {
                    t === -this.side && this.finalizeTree()
                }
        })
            , Le = {
                "(": ")",
                ")": "(",
                "[": "]",
                "]": "[",
                "{": "}",
                "}": "{",
                "\\{": "\\}",
                "\\}": "\\{",
                "&lang;": "&rang;",
                "&rang;": "&lang;",
                "\\langle ": "\\rangle ",
                "\\rangle ": "\\langle ",
                "|": "|",
                "\\lVert ": "\\rVert ",
                "\\rVert ": "\\lVert "
            }
            , Oe = {
                "&lang;": "angle-bracket",
                "&rang;": "angle-bracket",
                "|": "pipe"
            };
        m("(", null, "parenthesis"),
            m("[", null, "bracket"),
            m("{", "\\{", "brace"),
            P.langle = t(Ae, E, "&lang;", "&rang;", "\\langle ", "\\rangle "),
            P.rangle = t(Ae, _, "&lang;", "&rang;", "\\langle ", "\\rangle "),
            A["|"] = t(Ae, E, "|", "|", "|", "|"),
            P.lVert = t(Ae, E, "&#8741;", "&#8741;", "\\lVert ", "\\rVert "),
            P.rVert = t(Ae, _, "&#8741;", "&#8741;", "\\lVert ", "\\rVert "),
            P.left = w(K, function (e) {
                e.parser = function () {
                    var e = z.regex
                        , t = z.string
                        , n = (z.succeed,
                            z.optWhitespace);
                    return n.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function (r) {
                        var i = "\\" === r.charAt(0) ? r.slice(1) : r;
                        return "\\langle" == r && (i = "&lang;",
                            r += " "),
                            "\\lVert" == r && (i = "&#8741;",
                                r += " "),
                            H.then(function (o) {
                                return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function (e) {
                                    var t = "\\" === e.charAt(0) ? e.slice(1) : e;
                                    "\\rangle" == e && (t = "&rang;",
                                        e += " "),
                                        "\\rVert" == e && (t = "&#8741;",
                                            e += " ");
                                    var n = Ae(0, i, t, r, e);
                                    return n.blocks = [o],
                                        o.adopt(n, 0, 0),
                                        n
                                })
                            })
                    })
                }
            }),
            P.right = w(K, function (e) {
                e.parser = function () {
                    return z.fail("unmatched \\right")
                }
            });
        var De = P.binom = P.binomial = w(w(K, f), function (e, t) {
            e.ctrlSeq = "\\binom",
                e.htmlTemplate = '<span class="dcg-mq-non-leaf"><span class="dcg-mq-paren dcg-mq-scaled">(</span><span class="dcg-mq-non-leaf"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="dcg-mq-paren dcg-mq-scaled">)</span></span>',
                e.textTemplate = ["choose(", ",", ")"],
                e.mathspeakTemplate = ["StartBinomial,", "Choose", ", EndBinomial"],
                e.ariaLabel = "binomial"
        });
        P.choose = w(De, function (e) {
            e.createLeftOf = Ce.prototype.createLeftOf
        });
        P.editable = P.MathQuillMathField = w(K, function (e, t) {
            e.ctrlSeq = "\\MathQuillMathField",
                e.htmlTemplate = '<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',
                e.parser = function () {
                    var e = this
                        , n = z.string
                        , r = z.regex
                        , i = z.succeed;
                    return n("[").then(r(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function (t) {
                        e.name = t
                    }).or(i()).then(t.parser.call(e))
                }
                ,
                e.finalizeTree = function (e) {
                    var t = D(this.ends[E], this.jQ, e);
                    t.KIND_OF_MQ = "MathField",
                        t.editable = !0,
                        t.createTextarea(),
                        t.editablesTextareaEvents(),
                        t.cursor.insAtRightEnd(t.root),
                        p(t.root)
                }
                ,
                e.registerInnerField = function (e, t) {
                    e.push(e[this.name] = t(this.ends[E].controller))
                }
                ,
                e.latex = function () {
                    return this.ends[E].latex()
                }
                ,
                e.text = function () {
                    return this.ends[E].text()
                }
        });
        var qe = P.embed = w(X, function (e, t) {
            e.setOptions = function (e) {
                function t() {
                    return ""
                }
                return this.text = e.text || t,
                    this.htmlTemplate = e.htmlString || "",
                    this.latex = e.latex || t,
                    this
            }
                ,
                e.parser = function () {
                    var e = this
                        , t = z.string
                        , n = z.regex
                        , r = z.succeed;
                    return t("{").then(n(/^[a-z][a-z0-9]*/i)).skip(t("}")).then(function (i) {
                        return t("[").then(n(/^[-\w\s]*/)).skip(t("]")).or(r()).map(function (t) {
                            return e.setOptions(j[i](t))
                        })
                    })
                }
        })
            , Ne = d(1);
        for (var Fe in Ne)
            (function (e, t) {
                "function" == typeof t ? (u[e] = function () {
                    return l(),
                        t.apply(this, arguments)
                }
                    ,
                    u[e].prototype = t.prototype) : u[e] = t
            }
            )(Fe, Ne[Fe])
    }(),
    define("mathquill_src", ["jquery"], function () { }),
    define("loadcss!Symbola-basic", function () { }),
    define("loadcss!vendor_css/mathquill/mathquill-basic", function () { }),
    define("toplevel/mathquill", ["require", "mathquill_src", "loadcss!Symbola-basic", "loadcss!vendor_css/mathquill/mathquill-basic"], function (e) {
        return e("mathquill_src"),
            e("loadcss!Symbola-basic"),
            e("loadcss!vendor_css/mathquill/mathquill-basic"),
            window.MathQuill.noConflict()
    }),
    define("mathquill", ["require", "browser", "jquery", "keys", "toplevel/mathquill", "config"], function (e) {
        var t = e("browser")
            , n = e("jquery")
            , r = e("keys")
            , i = e("toplevel/mathquill").getInterface(1)
            , o = i.L
            , s = e("config")
            , a = ["normalcdf normalpdf", "binomcdf binompdf", "poissoncdf poissonpdf", "erf invNorm", "tpdf tcdf TTest TScore"].join(" ");
        return i.config({
            handlers: {
                reflow: function (e) {
                    setTimeout(function () {
                        n(e.el()).trigger("render")
                    })
                },
                enter: function (e) {
                    n(e.el()).trigger("enterPressed")
                },
                upOutOf: function (e) {
                    n(e.el()).trigger("upPressed")
                },
                downOutOf: function (e) {
                    n(e.el()).trigger("downPressed")
                },
                moveOutOf: function (e, t) {
                    n(t.el()).trigger((e === o ? "left" : "right") + "Pressed")
                },
                deleteOutOf: function (e, t) {
                    n(t.el()).trigger((e === o ? "backspace" : "del") + "Pressed")
                }
            },
            leftRightIntoCmdGoes: "up",
            sumStartsWithNEquals: !0,
            supSubsRequireOperand: !0,
            charsThatBreakOutOfSupSub: "+-=<>",
            autoCommands: "alpha beta sqrt theta phi pi tau nthroot sum prod int ans percent",
            autoSubscriptNumerals: !0,
            restrictMismatchedBrackets: !0,
            typingPercentWritesPercentOf: !0,
            disableCopyPaste: s.get("restrictedEditing"),
            substituteTextarea: function () {
                return t.IS_IOS || t.IS_ANDROID ? n('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">').on("keypress.globalConfig", function (e) {
                    var t = i(n(document.activeElement).closest(".dcg-mq-editable-field")[0]);
                    t && (e.preventDefault(),
                        t.typedText(r.lookupChar(e)))
                })[0] : t.IS_WINDOWS && t.IS_TOUCH ? n("<textarea readonly>").on("keydown", function () {
                    this.readOnly = !1,
                        this.select()
                }).on("blur", function () {
                    this.readOnly = !0
                })[0] : n("<textarea>")[0]
            },
            autoOperatorNames: ["exp|exponent ln|natural-log log", "total length mean median quantile quartile nCr nPr", "stdev|standard-deviation stddev|standard-deviation", "stdDev|standard-deviation stdevp|standard-deviation-population", "stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance", "varp|variance-population variance cov|co-variance corr|correlation", "lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum", "sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent", "sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant", "sech|hyperbolic-secant coth|hyperbolic-co-tangent", "arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant", "arccot|arc-co-tangent", "arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent", "arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant", "arccoth|hyperbolic-arc-co-tangent", "polygon", "distance midpoint" + (s.get("distributions") ? " " + a : "")].join(" "),
            resetCursorOnBlur: !0
        })
    }),
    define("graphing/poilabelslayer", ["require", "pjs", "jquery", "underscore", "./domlayer", "./label", "graphing/graphmode", "math/poi", "./constants", "./poi", "./automatic-label-placer", "lib/color-helpers", "mathquill", "math/interpolatedlabel"], function (e) {
        function t(e, t, n, r) {
            var i = "html." + n;
            e.hasOwnProperty(i) && e[i] === r || (t.find(n).html(r),
                e[i] = r)
        }
        function n(e, t, n, r, i) {
            var o = "text." + n;
            if (!e.hasOwnProperty(o) || e[o] !== r) {
                var s = t.data("id");
                if (i.hasOwnProperty(s) && (i[s].revert(),
                    delete i[s]),
                    v(r)) {
                    var a = r.substr(1, r.length - 2);
                    t.find(n).text(a),
                        i[s] = y.StaticMath(t.find(n)[0])
                } else
                    t.find(n).text(r);
                e[o] = r
            }
        }
        function r(e, t, n, r) {
            var i = "visible." + n;
            e.hasOwnProperty(i) && e[i] === r || (t.find(n).toggle(!!r),
                e[i] = r)
        }
        function i(e, t, n, r) {
            var i = "class." + n;
            e.hasOwnProperty(i) && e[i] === r || (t.toggleClass(n, !!r),
                e[i] = r)
        }
        function o(e, t, n) {
            var r = "css";
            e.hasOwnProperty(r) && c.isEqual(e[r], n) || (t.css(n),
                e[r] = n)
        }
        var s = e("pjs")
            , a = e("jquery")
            , c = e("underscore")
            , l = e("./domlayer")
            , u = e("./label")
            , d = e("graphing/graphmode")
            , p = e("math/poi").default
            , h = e("./constants")
            , f = e("./poi")
            , m = e("./automatic-label-placer")
            , g = e("lib/color-helpers")
            , y = e("mathquill")
            , v = e("math/interpolatedlabel").isMathLabel
            , b = s(l, function (e, s) {
                e.init = function (e, t) {
                    s.init.call(this, e),
                        this.$labelsLayer = a('<div class="dcg-poi-labels-layer"></div>'),
                        this.$traceLayer = a('<div class="dcg-trace-layer"></div>'),
                        this.cachedLabels = {},
                        this.cachedMQLabels = {},
                        this.settings = t,
                        this.dom_node.append(this.$labelsLayer),
                        this.dom_node.append(this.$traceLayer),
                        this.hoveredPOI = null,
                        this.openedPOI2Sketch = {}
                }
                    ,
                    e.renderPOILabels = function (e, t) {
                        var n = function (e, n) {
                            var r = t[n];
                            return r && r.visible ? r.getPOIById(e) : null
                        };
                        this.savedPOI = [];
                        for (var r in t) {
                            var i = t[r];
                            if (i.visible) {
                                var o = this.drawLabels(i, e);
                                o.length && this.savedPOI.push.apply(this.savedPOI, o)
                            }
                        }
                        this.hoveredPOI && !n(this.hoveredPOI.id, this.hoveredPOI.sketch.id) && (this.hoveredPOI = null);
                        var s = {};
                        for (r in this.openedPOI2Sketch) {
                            var a = n(r, this.openedPOI2Sketch[r]);
                            a && (s[r] = a.sketch.id,
                                this.drawOpenedPOI(a, e),
                                this.savedPOI.push(a))
                        }
                        this.openedPOI2Sketch = s,
                            this.hoveredPOI ? this.isOpenPOI(this.hoveredPOI) ? this.addGlobalClass("dcg-mouse-over-opened-poi") : (this.drawHoveredPOI(this.hoveredPOI, e),
                                this.addGlobalClass("dcg-mouse-over-closed-poi")) : (this.removeGlobalClass("dcg-mouse-over-closed-poi"),
                                    this.removeGlobalClass("dcg-mouse-over-opened-poi"))
                    }
                    ,
                    e.renderTracePt = function (e) {
                        var t = this.traceInfo ? this.traceInfo.pt : null;
                        if (t) {
                            var n = e.mapx(t.x)
                                , r = e.mapy(t.y);
                            if (e.coordsAreOnscreen(n, r, h.OFFSCREEN_RENDER_MARGIN)) {
                                var i = new f(t.x, t.y, p.TRACE, this.traceInfo.branchInfo.sketch, this.traceInfo.branchInfo.branch);
                                this.drawTracePt(i, e.viewport, {
                                    color: i.sketch.color,
                                    x: n,
                                    y: r
                                })
                            }
                        }
                    }
                    ,
                    e.drawTracePt = function (e, t, n) {
                        var r = b.getPointLabel(e, t)
                            , i = r.is_hole ? " dcg-hole" : ""
                            , o = r.x_label.replace("", "<span class='dcg-pi'></span>")
                            , s = r.y_label.replace("", "<span class='dcg-pi'></span>")
                            , c = "tracept"
                            , l = this.cachedLabels[c];
                        l ? l.removeClass("dcg-will-remove") : (l = a('<div class="dcg-poi-label dcg-tracept dcg-temp"><div class="dcg-pt"></div><div class="dcg-label"><span class="dcg-label-paren">(</span><span class="dcg-x-value"></span>, <span class="dcg-y-value"></span><span class="dcg-label-paren">)</span></div></div>'),
                            l.data("id", c),
                            this.$traceLayer.append(l)),
                            l.find(".dcg-x-value").html(o),
                            l.find(".dcg-y-value").html(s),
                            l.toggleClass("dcg-hole", !!i),
                            l.find(".dcg-pt").css("background-color", n.color),
                            l.find(".dcg-pt").css("border-color", n.color),
                            l.css({
                                left: n.x + "px",
                                top: n.y + "px"
                            })
                    }
                    ,
                    e.drawSinglePOI = function (e, s, c) {
                        var l = b.getPointLabel(e, s)
                            , u = l.is_hole
                            , d = e.isPersistent()
                            , p = e.getLabelSize()
                            , h = e.isAttachedToPlottedPoint()
                            , f = l.x_label.replace("", "<span class='dcg-pi'></span>")
                            , m = l.y_label.replace("", "<span class='dcg-pi'></span>")
                            , y = e.getLabel()
                            , v = e.id
                            , x = this.cachedLabels[v];
                        x ? x.removeClass("dcg-will-remove") : (x = a('<div class="dcg-poi-label dcg-tracept dcg-poi dcg-attached-to-real-point"><div class="dcg-pt"></div><div class="dcg-label"><span class="dcg-pt-value"><span class="dcg-label-paren">(</span><span class="dcg-x-value"></span>, <span class="dcg-y-value"></span><span class="dcg-label-paren">)</span></span><span class="dcg-text-value"></span></div></div>'),
                            x.data("__lastRender", {}),
                            x.data("id", v),
                            this.$labelsLayer.append(x));
                        var w = x.data("__lastRender");
                        t(w, x, ".dcg-x-value", f),
                            t(w, x, ".dcg-y-value", m),
                            n(w, x, ".dcg-text-value", y, this.cachedMQLabels),
                            r(w, x, ".dcg-pt-value", !y),
                            r(w, x, ".dcg-text-value", !!y),
                            i(w, x, "dcg-hole", !!u),
                            i(w, x, "dcg-persistent", !!d),
                            i(w, x, "dcg-size-small", "small" === p),
                            i(w, x, "dcg-size-medium", "medium" === p),
                            i(w, x, "dcg-size-large", "large" === p),
                            i(w, x, "dcg-attached-to-real-point", !!h),
                            i(w, x, "dcg-opened", !!c.opened),
                            i(w, x, "dcg-mouseover", !!c.hovered);
                        var E = {
                            left: c.x + "px",
                            top: c.y + "px"
                        };
                        d && e && e.sketch && e.sketch.color && (E.color = g.shadeColor(e.sketch.color, .3)),
                            o(w, x, E)
                    }
                    ,
                    e.drawHoveredPOI = function (e, t) {
                        var n = t.mapx(e.x)
                            , r = t.mapy(e.y);
                        t.coordsAreOnscreen(n, r, h.OFFSCREEN_RENDER_MARGIN) && this.drawSinglePOI(e, t.viewport, {
                            hovered: !0,
                            x: n,
                            y: r
                        })
                    }
                    ,
                    e.drawOpenedPOI = function (e, t) {
                        var n = t.mapx(e.x)
                            , r = t.mapy(e.y);
                        t.coordsAreOnscreen(n, r, h.OFFSCREEN_RENDER_MARGIN) && this.drawSinglePOI(e, t.viewport, {
                            opened: !0,
                            x: n,
                            y: r
                        })
                    }
                    ,
                    e.drawLabels = function (e, t) {
                        var n = e.labels;
                        if (!n.length)
                            return [];
                        for (var r = [], i = 0; i < n.length; i++) {
                            var o = n[i]
                                , s = t.mapx(o.x)
                                , a = t.mapy(o.y);
                            t.coordsAreOnscreen(s, a, h.OFFSCREEN_RENDER_MARGIN) && (this.drawSinglePOI(o, t.viewport, {
                                opened: !0,
                                x: s,
                                y: a
                            }),
                                r.push(o))
                        }
                        return r
                    }
                    ,
                    e.markLabelsDirty = function () {
                        this.labelsDirty = !0
                    }
                    ,
                    e.positionLabels = function (e, t, n) {
                        var r = !this.labelsDirty;
                        this.cachedLabels = {},
                            this.labelsDirty = !1;
                        var i = this
                            , o = {};
                        c.each(this.savedPOI, function (e) {
                            e.sketch && (o[e.id] = e.sketch)
                        });
                        var s = this.settings.projectorMode ? 14 : 10
                            , l = this.$.find(".dcg-poi-label").map(function () {
                                var e = a(this)
                                    , t = e.find(".dcg-label")
                                    , n = t[0].getBoundingClientRect()
                                    , c = parseFloat(e[0].style.left)
                                    , l = parseFloat(e[0].style.top)
                                    , u = n.width
                                    , d = n.height
                                    , p = e.data("id");
                                p && (i.cachedLabels[p] = e);
                                var h = o[p] && o[p].branches[0].nakedLabel;
                                return {
                                    $label: t,
                                    pt_x: c,
                                    pt_y: l,
                                    pt_radius: s,
                                    nakedLabel: h,
                                    width: u,
                                    height: d,
                                    keepOrientation: r,
                                    priorOrientation: t.data("orientation")
                                }
                            }).get();
                        l = c.filter(l, function (e) {
                            return e.width > 0 && e.height > 0
                        });
                        var u = e.canvas.getBoundingClientRect()
                            , d = {
                                width: u.width,
                                height: u.height
                            }
                            , p = m.buildStaticEnvGetter(e, d, n)
                            , h = l.map(function (e) {
                                return m.generateCandidatesForPoint(p, e)
                            })
                            , f = m.computePositions(h);
                        f.forEach(function (e, t) {
                            var n = l[t].$label;
                            n.css({
                                left: e.left - e.pt_x,
                                top: e.top - e.pt_y
                            }),
                                n.data("orientation", e.orientation)
                        })
                    }
                    ,
                    e.redraw = function (e, t, n, r) {
                        this.resize(e.screen.width, e.screen.height),
                            this.dom_node.find(".dcg-poi-label").addClass("dcg-will-remove"),
                            this.renderPOILabels(e, t),
                            this.renderTracePt(e),
                            this.dom_node.find(".dcg-will-remove").remove(),
                            this.positionLabels(n, t, r)
                    }
                    ,
                    e.getDrawnPOI = function () {
                        return this.savedPOI || []
                    }
                    ,
                    e.clearOpenedPOI = function () {
                        this.openedPOI2Sketch = {}
                    }
                    ,
                    e.closePOI = function (e) {
                        delete this.openedPOI2Sketch[e.id]
                    }
                    ,
                    e.openPOI = function (e) {
                        this.openedPOI2Sketch[e.id] = e.sketch.id
                    }
                    ,
                    e.isOpenPOI = function (e) {
                        return this.openedPOI2Sketch.hasOwnProperty(e.id)
                    }
                    ,
                    e.setHoveredPOI = function (e) {
                        this.hoveredPOI = e
                    }
                    ,
                    e.getHoveredPOI = function () {
                        return this.hoveredPOI
                    }
            });
        return b.getPointLabel = function (e, t) {
            var n, r = t.xmax - t.xmin, i = t.ymax - t.ymin, o = e.getGraphMode();
            if (e.type === p.TRACE) {
                var s = o === d.X
                    , a = s ? e.y : e.x
                    , c = e.getCompiledFunction();
                if (n = u.point(a, r, i, c),
                    s) {
                    var l = n[0];
                    n[0] = n[1],
                        n[1] = l
                }
            } else
                n = [u.value(e.x, r), u.value(e.y, i)];
            var h = n[0].superscript ? n[0].mantissa + "<sup>" + n[0].superscript + "</sup>" : n[0].string
                , f = n[1].superscript ? n[1].mantissa + "<sup>" + n[1].superscript + "</sup>" : n[1].string;
            return {
                x: n[0].value,
                x_label: h,
                y: n[1].value,
                y_label: f,
                is_hole: !isFinite(n[1].value)
            }
        }
            ,
            b
    }),
    define("graphing/stepnumber", ["require", "pjs"], function (e) {
        var t = e("pjs")
            , n = document.createElement("canvas").getContext("2d")
            , r = t(function (e) {
                e.init = function (e, t) {
                    this._label = e,
                        this._fontSize = t,
                        this._layout = this._computeLayout(e, t)
                }
                    ,
                    e._computeLayout = function (e, t) {
                        var i = {};
                        return e.superscript ? (i.mantissa_height = t,
                            r.setCtxFontSize(n, i.mantissa_height),
                            i.mantissa_width = n.measureText(e.mantissa).width,
                            i.superscript_height = Math.round(.8 * t),
                            r.setCtxFontSize(n, i.superscript_height),
                            i.superscript_width = n.measureText(e.superscript).width,
                            i.mantissa_x = 0,
                            i.mantissa_y = t / 5,
                            i.superscript_x = i.mantissa_width / 2 + i.superscript_width / 2,
                            i.superscript_y = -t / 4,
                            i.top = i.superscript_y - i.superscript_height / 2,
                            i.bottom = i.mantissa_y + i.mantissa_height / 2,
                            i.left = i.mantissa_x - i.mantissa_width / 2,
                            i.right = i.superscript_x + i.superscript_width / 2) : (i.mantissa_height = t,
                                r.setCtxFontSize(n, t),
                                i.mantissa_width = n.measureText(e.string).width,
                                i.mantissa_x = 0,
                                i.mantissa_y = 0,
                                i.top = i.mantissa_y - i.mantissa_height / 2,
                                i.bottom = i.mantissa_y + i.mantissa_height / 2,
                                i.left = i.mantissa_x - i.mantissa_width / 2,
                                i.right = i.mantissa_x + i.mantissa_width / 2),
                            i
                    }
                    ,
                    e.getRect = function () {
                        return this.getRectWhenCenteredAt({
                            x: 0,
                            y: 0
                        })
                    }
                    ,
                    e.getRectWhenCenteredAt = function (e) {
                        return {
                            left: this._layout.left + e.x,
                            right: this._layout.right + e.x,
                            top: this._layout.top + e.y,
                            bottom: this._layout.bottom + e.y
                        }
                    }
                    ,
                    e.getWidth = function () {
                        return this._layout.right - this._layout.left
                    }
                    ,
                    e.getHeight = function () {
                        return this._layout.bottom - this._layout.top
                    }
                    ,
                    e.clampBoundsWithinRect = function (e, t) {
                        var n = {};
                        return e.x + this._layout.left < t.left ? n.x = t.left - this._layout.left : e.x + this._layout.right > t.right ? n.x = t.right - this._layout.right : n.x = e.x,
                            e.y + this._layout.top < t.top ? n.y = t.top - this._layout.top : e.y + this._layout.bottom > t.bottom ? n.y = t.bottom - this._layout.bottom : n.y = e.y,
                            n
                    }
                    ,
                    e.getValue = function () {
                        return this._label.value
                    }
                    ,
                    e.getMinusWidth = function () {
                        return this.getValue() < 0 ? (r.setCtxFontSize(n, this._fontSize),
                            n.measureText("-1").width - n.measureText("1").width) : 0
                    }
                    ,
                    e.getString = function () {
                        return this._label.superscript ? this._label.mantissa + "^" + this._label.superscript : this._label.string
                    }
                    ,
                    e.drawCenteredAt = function (e, t) {
                        var n = t.x
                            , i = t.y;
                        e.save(),
                            r.setCtxFontSize(e, this._fontSize),
                            this._label.superscript ? (e.strokeText(this._label.mantissa, this._layout.mantissa_x + n, this._layout.mantissa_y + i),
                                e.strokeText(this._label.superscript, this._layout.superscript_x + n, this._layout.superscript_y + i),
                                e.fillText(this._label.mantissa, this._layout.mantissa_x + n, this._layout.mantissa_y + i),
                                e.fillText(this._label.superscript, this._layout.superscript_x + n, this._layout.superscript_y + i)) : (e.strokeText(this._label.string, this._layout.mantissa_x + n, this._layout.mantissa_y + i),
                                    e.fillText(this._label.string, this._layout.mantissa_x + n, this._layout.mantissa_y + i)),
                            e.restore()
                    }
            });
        return r.setCtxFontSize = function (e, t) {
            e.font = t + "px Arial",
                e.textAlign = "center",
                e.textBaseline = "middle"
        }
            ,
            r
    }),
    define("graphing/computestepsizes", ["require", "./stepnumber", "./label"], function (e) {
        function t(e) {
            return e ? {
                base: 10,
                major: [e, 2 * e, 5 * e],
                minor: [4, 4, 5]
            } : i.RATIONAL_STEPS
        }
        var n = e("./stepnumber")
            , r = e("./label")
            , i = {}
            , o = function (e, t, n, r) {
                var i = Math.ceil(e / n)
                    , o = Math.floor(t / n)
                    , s = 1 / n;
                if (!(i > o || o - i > 1e4))
                    for (var a = i; a <= o; a++)
                        r(a / s)
            };
        return i.RATIONAL_STEPS = {
            base: 10,
            major: [1, 2, 5],
            minor: [5, 4, 5]
        },
            i.PI_STEPS = {
                base: 10,
                major: [Math.PI, 2 * Math.PI, 5 * Math.PI],
                minor: [4, 4, 5]
            },
            i.PI_FRAC_STEPS = {
                base: 2,
                major: [Math.PI / 3],
                minor: [3]
            },
            i.bestStep = function (e, t) {
                for (var n, r, i, o, s = 1 / 0, a = 0; a < t.major.length; a++)
                    n = t.major[a],
                        i = Math.ceil(Math.log(e / n) / Math.log(t.base)),
                        o = n * Math.pow(t.base, i),
                        o < s && (s = o,
                            r = s / t.minor[a]);
                return {
                    major: s,
                    minor: r
                }
            }
            ,
            i.countStepsInRange = function (e, t, n) {
                return 1 + (t - e) / n
            }
            ,
            i.calculateSpaceBetweenRects = function (e, t) {
                var n, r;
                return r = e.right < t.left ? t.left - e.right : t.right < e.left ? e.left - t.right : 0,
                    n = e.bottom < t.top ? t.top - e.bottom : t.bottom < e.top ? e.top - t.bottom : 0,
                    Math.max(n, r)
            }
            ,
            i.estimateMajors = function (e) {
                var t = e.screen.width
                    , n = e.screen.height
                    , r = e.viewport.xmax - e.viewport.xmin
                    , i = e.viewport.ymax - e.viewport.ymin
                    , o = e.settings.pixelsPerLabel;
                return {
                    majorStepX: o / t * r,
                    majorStepY: o / n * i
                }
            }
            ,
            i.cartesian = function (e) {
                var s, a = {}, c = Math.abs(e.settings.xAxisStep), l = Math.abs(e.settings.yAxisStep), u = e.viewport.xmax - e.viewport.xmin, d = e.viewport.ymax - e.viewport.ymin, p = r.value(c, u).string.indexOf("") >= 0, h = r.value(l, d).string.indexOf("") >= 0, f = i.countStepsInRange(e.viewport.xmin, e.viewport.xmax, c), m = i.countStepsInRange(e.viewport.ymin, e.viewport.ymax, l), g = i.estimateMajors(e), y = e.settings.labelSize;
                if (c && c !== Math.PI && f >= 3 && f < 100) {
                    var v = 0;
                    e.settings.xAxisNumbers && o(e.viewport.xmin, e.viewport.xmax, c, function (e) {
                        var t = n(r.value(e, u), y);
                        v = Math.max(t.getWidth(), v)
                    }),
                        s = v + 10,
                        e.settings.xAxisNumbers || (s = 1 === e.settings.xAxisMinorSubdivisions ? 8 : 20),
                        f * s <= e.screen.width && (a.majorStepX = c,
                            3 === c || 5 === c ? a.minorStepX = 1 : a.minorStepX = c / 4)
                }
                if (l && l !== Math.PI && m >= 3 && m < 100) {
                    var b = 0;
                    e.settings.yAxisNumbers && o(e.viewport.ymin, e.viewport.ymax, l, function (e) {
                        var t = n(r.value(e, d), y);
                        b = Math.max(t.getHeight(), b)
                    }),
                        s = b + 10,
                        e.settings.yAxisNumbers || (s = 1 === e.settings.yAxisMinorSubdivisions ? 8 : 20),
                        m * s <= e.screen.height && (a.majorStepY = l,
                            3 === l || 5 === l ? a.minorStepY = 1 : a.minorStepY = l / 4)
                }
                if (!a.majorStepX) {
                    var x;
                    x = p ? g.majorStepX >= 1 ? i.PI_STEPS : i.PI_FRAC_STEPS : t(c);
                    var w = i.bestStep(g.majorStepX, x);
                    a.majorStepX = w.major,
                        a.minorStepX = w.minor
                }
                if (!a.majorStepY) {
                    var E;
                    E = h ? g.majorStepY >= 1 ? i.PI_STEPS : i.PI_FRAC_STEPS : t(l);
                    var _ = i.bestStep(g.majorStepY, E);
                    a.majorStepY = _.major,
                        a.minorStepY = _.minor
                }
                if (c === l) {
                    var S = 2
                        , k = e.screen.width / u / (e.screen.height / d);
                    k >= 1 && k <= S ? (a.majorStepX = a.majorStepY,
                        a.minorStepX = a.minorStepY) : k <= 1 && k >= 1 / S && (a.majorStepY = a.majorStepX,
                            a.minorStepY = a.minorStepX)
                }
                return e.settings.xAxisMinorSubdivisions > 0 && (a.minorStepX = a.majorStepX / e.settings.xAxisMinorSubdivisions),
                    e.settings.yAxisMinorSubdivisions > 0 && (a.minorStepY = a.majorStepY / e.settings.yAxisMinorSubdivisions),
                    a
            }
            ,
            i.polar = function (e) {
                var t = i.estimateMajors(e)
                    , n = i.bestStep(t.majorStepX, i.RATIONAL_STEPS)
                    , r = i.bestStep(t.majorStepY, i.RATIONAL_STEPS)
                    , o = n.major > r.major ? n : r;
                return {
                    majorStepR: o.major,
                    minorStepR: o.minor
                }
            }
            ,
            i
    }),
    define("graphing/gridlayer", ["require", "pjs", "./stepnumber", "./label", "./computestepsizes", "./axisarrowmode"], function (e) {
        var t = e("pjs")
            , n = e("./stepnumber")
            , r = e("./label")
            , i = e("./computestepsizes")
            , o = e("./axisarrowmode")
            , s = t(function (e) {
                e.redrawToCtx = function (e, t, n) {
                    var r, o, s = t.settings.showGrid;
                    t.settings.polarMode && s ? (r = i.polar(t),
                        this.drawPolarGrid(e, t, r),
                        this.drawAxes(e, t, n),
                        o = this.drawPolarStepNumbers(e, t, r),
                        this.drawLabels(e, t, o)) : (r = i.cartesian(t),
                            s && this.drawCartesianGrid(e, t, r),
                            this.drawAxes(e, t, n),
                            o = this.drawCartesianStepNumbers(e, t, r),
                            this.drawLabels(e, t, o))
                }
                    ,
                    e.addTextShadow = function (e) {
                        e.strokeStyle = "white",
                            e.lineWidth = 3,
                            e.miterLimit = 2
                    }
                    ,
                    e.drawPolarGrid = function (e, t, n) {
                        e.save();
                        var r = t.settings.minorAxisOpacity
                            , i = t.settings.majorAxisOpacity
                            , o = 1 - (1 - i) / (1 - r)
                            , s = Math.round(t.mapx(0)) - .5
                            , c = Math.round(t.mapy(0)) - .5
                            , l = t.screen.height / (t.viewport.ymax - t.viewport.ymin)
                            , u = t.screen.width / (t.viewport.xmax - t.viewport.xmin)
                            , d = l / u
                            , p = u / l
                            , h = c / d
                            , f = t.viewport.smallestR()
                            , m = t.viewport.largestR()
                            , g = n.minorStepR * Math.max(1, Math.floor(f / n.minorStepR))
                            , y = n.majorStepR * Math.max(1, Math.floor(f / n.majorStepR));
                        e.lineWidth = 1,
                            e.strokeStyle = "rgba(0, 0 , 0, " + r + ")",
                            e.save(),
                            a(g, m, n.minorStepR, function (n) {
                                e.beginPath(),
                                    e.scale(1, d);
                                var r = t.mapx(n) - s;
                                e.moveTo(s + r, h),
                                    e.arc(s, h, r, 0, 2 * Math.PI),
                                    e.scale(1, p),
                                    e.stroke()
                            }),
                            e.restore();
                        var v = f > 0 ? 5 : 15;
                        a(0, 359, v, function (n) {
                            if ((0 !== n && 180 !== n || !t.settings.showXAxis) && (90 !== n && 270 !== n || !t.settings.showYAxis)) {
                                e.beginPath(),
                                    e.moveTo(s, c);
                                var r = t.mapx(m * Math.cos(n * Math.PI / 180))
                                    , i = t.mapy(m * Math.sin(n * Math.PI / 180));
                                e.lineTo(Math.round(r) - .5, Math.round(i) - .5),
                                    e.stroke()
                            }
                        }),
                            e.lineWidth = 1,
                            e.strokeStyle = "rgba(0, 0 , 0, " + o + ")",
                            e.save(),
                            a(y, m, n.majorStepR, function (n) {
                                e.beginPath(),
                                    e.scale(1, d);
                                var r = t.mapx(n) - s;
                                e.moveTo(s + r, h),
                                    e.arc(s, h, r, 0, 2 * Math.PI),
                                    e.scale(1, p),
                                    e.stroke()
                            }),
                            e.restore()
                    }
                    ,
                    e.drawCartesianGrid = function (e, t, n) {
                        e.save();
                        var r = t.viewport.xmin
                            , i = t.viewport.ymin
                            , o = t.viewport.xmax
                            , s = t.viewport.ymax
                            , c = t.screen.width
                            , l = t.screen.height
                            , u = t.settings.minorAxisOpacity
                            , d = t.settings.majorAxisOpacity;
                        e.lineWidth = 1,
                            e.strokeStyle = "rgba(0, 0 , 0, " + u + ")",
                            a(r, o, n.minorStepX, function (n) {
                                if (0 !== n || !t.settings.showYAxis) {
                                    var r = Math.round(t.mapx(n));
                                    r !== c && (e.beginPath(),
                                        e.moveTo(r - .5, 0),
                                        e.lineTo(r - .5, l),
                                        e.stroke())
                                }
                            }),
                            a(i, s, n.minorStepY, function (n) {
                                if (0 !== n || !t.settings.showXAxis) {
                                    var r = Math.round(t.mapy(n));
                                    r !== l && (e.beginPath(),
                                        e.moveTo(0, r - .5),
                                        e.lineTo(c, r - .5),
                                        e.stroke())
                                }
                            });
                        var p = 1 - (1 - d) / (1 - u);
                        e.strokeStyle = "rgba(0, 0 , 0, " + p + ")",
                            a(r, o, n.majorStepX, function (n) {
                                if (0 !== n || !t.settings.showYAxis) {
                                    var r = Math.round(t.mapx(n));
                                    r !== c && (e.beginPath(),
                                        e.moveTo(r - .5, 0),
                                        e.lineTo(r - .5, l),
                                        e.stroke())
                                }
                            }),
                            a(i, s, n.majorStepY, function (n) {
                                if (0 !== n || !t.settings.showXAxis) {
                                    var r = Math.round(t.mapy(n));
                                    r !== l && (e.beginPath(),
                                        e.moveTo(0, r - .5),
                                        e.lineTo(c, r - .5),
                                        e.stroke())
                                }
                            }),
                            e.restore()
                    }
                    ,
                    e.drawAxes = function (e, t, n) {
                        function r(t, n, r) {
                            e.save();
                            var i = Math.PI / 12
                                , o = 8 * Math.max(e.lineWidth, 1.5);
                            e.lineJoin = "round",
                                e.fillStyle = c,
                                e.strokeStyle = c,
                                e.beginPath(),
                                e.moveTo(t, n),
                                e.lineTo(t + Math.cos(r - i) * o, n + Math.sin(r - i) * o),
                                e.lineTo(t + Math.cos(r + i) * o, n + Math.sin(r + i) * o),
                                e.lineTo(t, n),
                                e.lineTo(t + Math.cos(r - i) * o, n + Math.sin(r - i) * o),
                                e.stroke(),
                                e.fill(),
                                e.restore()
                        }
                        var i = t.settings.axisLineOffset
                            , s = t.settings.axisOpacity.toString()
                            , a = "rgba(127,205,230," + s + ")"
                            , c = "rgba(0,0,0," + s + ")"
                            , l = t.settings.xAxisArrowMode
                            , u = t.settings.yAxisArrowMode
                            , d = t.settings.showXAxis
                            , p = t.settings.showYAxis
                            , h = 1
                            , f = Math.round(t.mapx(0)) - i
                            , m = Math.round(t.mapy(0)) - i
                            , g = t.screen.height
                            , y = t.screen.width;
                        p && (e.lineWidth = t.settings.axisLineWidth * ("y" === n ? h : 1),
                            e.strokeStyle = "y" === n ? a : c,
                            u === o.BOTH ? (e.beginPath(),
                                e.moveTo(f, 2 * t.settings.axisLineWidth),
                                e.lineTo(f, g - 2 * t.settings.axisLineWidth),
                                e.stroke(),
                                r(f, g - t.settings.axisLineWidth, 3 * Math.PI / 2),
                                r(f, t.settings.axisLineWidth, Math.PI / 2)) : u === o.POSITIVE ? (e.beginPath(),
                                    e.moveTo(f, 2 * t.settings.axisLineWidth),
                                    e.lineTo(f, g),
                                    e.stroke(),
                                    r(f, t.settings.axisLineWidth, Math.PI / 2)) : (e.beginPath(),
                                        e.moveTo(f, 0),
                                        e.lineTo(f, g),
                                        e.stroke())),
                            d && (e.lineWidth = t.settings.axisLineWidth * ("x" === n ? h : 1),
                                e.strokeStyle = "x" === n ? a : c,
                                l === o.BOTH ? (e.beginPath(),
                                    e.moveTo(2 * t.settings.axisLineWidth, m),
                                    e.lineTo(y - 2 * t.settings.axisLineWidth, m),
                                    e.stroke(),
                                    r(t.settings.axisLineWidth, m, 0),
                                    r(y - t.settings.axisLineWidth, m, Math.PI)) : l === o.POSITIVE ? (e.beginPath(),
                                        e.moveTo(0, m),
                                        e.lineTo(y - 2 * t.settings.axisLineWidth, m),
                                        e.stroke(),
                                        r(y - t.settings.axisLineWidth, m, Math.PI)) : (e.beginPath(),
                                            e.moveTo(0, m),
                                            e.lineTo(y, m),
                                            e.stroke()))
                    }
                    ,
                    e.drawPolarStepNumbers = function (e, t, i) {
                        function o(e, n, r) {
                            var i = Math.sqrt(e * e - n * n);
                            v <= i && i <= b && r.push({
                                x: t.mapx(n),
                                y: t.mapy(i)
                            }),
                                v <= -i && -i <= b && r.push({
                                    x: t.mapx(n),
                                    y: t.mapy(-i)
                                })
                        }
                        function s(e, n, r) {
                            var i = Math.sqrt(e * e - n * n);
                            g <= i && i <= y && r.push({
                                x: t.mapx(i),
                                y: t.mapy(n)
                            }),
                                g <= -i && -i <= y && r.push({
                                    x: t.mapx(-i),
                                    y: t.mapy(n)
                                })
                        }
                        e.save();
                        var u = t.settings.showGrid
                            , d = t.settings.xAxisNumbers && t.settings.showXAxis
                            , p = t.settings.yAxisNumbers && t.settings.showYAxis
                            , h = u && t.settings.polarNumbers
                            , f = t.viewport.largestR()
                            , m = t.viewport.smallestR()
                            , g = t.viewport.xmin
                            , y = t.viewport.xmax
                            , v = t.viewport.ymin
                            , b = t.viewport.ymax
                            , x = t.screen.width
                            , w = t.screen.height
                            , E = {
                                left: 3,
                                right: x - 3,
                                top: 3,
                                bottom: w - 3
                            }
                            , _ = t.settings.labelHangingColor
                            , S = t.settings.labelNormalColor
                            , k = t.settings.labelSize
                            , M = k;
                        e.textAlign = "center",
                            e.textBaseline = "middle",
                            this.addTextShadow(e),
                            e.font = k.toString() + "px Arial",
                            e.fillStyle = S;
                        var C = t.mapx(0)
                            , I = t.mapy(0)
                            , T = v <= 0 && 0 <= b
                            , P = g <= 0 && 0 <= y
                            , A = T && d
                            , L = P && p
                            , O = "";
                        if (!A && !L && u) {
                            var D, q, N, F, R = Math.abs(C), j = Math.abs(C - x), B = Math.abs(I), V = Math.abs(I - w);
                            R <= j ? (D = "left",
                                N = R) : (D = "right",
                                    N = j),
                                B <= V ? (q = "top",
                                    F = B) : (q = "bottom",
                                        F = V),
                                d && p ? O = N <= F ? D : q : p ? O = D : d && (O = q)
                        }
                        var U = {
                            left: 0,
                            right: x,
                            top: I - 1,
                            bottom: I + 1
                        }
                            , G = {
                                left: C - 1,
                                right: C + 1,
                                top: 0,
                                bottom: w
                            };
                        if (a(0, f, i.majorStepR, function (i) {
                            var a = []
                                , c = []
                                , u = []
                                , h = n(r.value(i, f), k)
                                , m = h.getRect();
                            switch (i > 0 ? (L && v <= i && i <= b && c.push({
                                x: C - m.right - 5,
                                y: t.mapy(i)
                            }),
                                L && v <= -i && -i <= b && c.push({
                                    x: C - m.right - 5,
                                    y: t.mapy(-i)
                                }),
                                A && g <= i && i <= y && a.push({
                                    x: t.mapx(i),
                                    y: I - m.top + 3
                                }),
                                A && g <= -i && -i <= y && a.push({
                                    x: t.mapx(-i),
                                    y: I - m.top + 3
                                })) : L && !d && v <= i && i <= b ? c.push({
                                    x: C - m.right - 5,
                                    y: t.mapy(i)
                                }) : A && !p && g <= i && i <= y && a.push({
                                    x: t.mapx(i),
                                    y: I - m.top + 3
                                }),
                            O) {
                                case "top":
                                    s(i, b, u);
                                    break;
                                case "bottom":
                                    s(i, v, u);
                                    break;
                                case "left":
                                    o(i, g, u);
                                    break;
                                case "right":
                                    o(i, y, u)
                            }
                            a.forEach(function (t) {
                                t = h.clampBoundsWithinRect(t, E),
                                    h.drawCenteredAt(e, t),
                                    l(U, h.getRectWhenCenteredAt(t))
                            }),
                                c.forEach(function (t) {
                                    t = h.clampBoundsWithinRect(t, E),
                                        h.drawCenteredAt(e, t),
                                        l(G, h.getRectWhenCenteredAt(t))
                                }),
                                u.forEach(function (t) {
                                    t = h.clampBoundsWithinRect(t, E),
                                        h.drawCenteredAt(e, t)
                                })
                        }),
                            h) {
                            var z = Math.ceil(m / i.majorStepR)
                                , H = Math.floor(f / i.majorStepR)
                                , W = Math.ceil((z + H) / 2)
                                , Y = W * i.majorStepR
                                , $ = m > 0 ? 15 : 30;
                            a(0, 359, $, function (n) {
                                var i;
                                i = t.settings.degreeMode ? n.toString() + "" : r.value(n * Math.PI / 180, 2 * Math.PI).string;
                                var o = e.measureText(i).width / 2
                                    , s = Y / 1.05
                                    , a = s * Math.cos(n * Math.PI / 180)
                                    , l = s * Math.sin(n * Math.PI / 180);
                                if (!(a < g || a > y || l < v || l > b)) {
                                    var u = t.mapx(a)
                                        , d = t.mapy(l);
                                    0 === n || 180 === n ? d -= M : 90 !== n && 270 !== n || (u += o + 3);
                                    var p = c(u, 3 + o, x - 3 - o)
                                        , h = c(d, 3 + M, w - 3 - M);
                                    e.fillStyle = _,
                                        e.strokeText(i, p, h),
                                        e.fillText(i, p, h)
                                }
                            })
                        }
                        return e.restore(),
                            {
                                x: U,
                                y: G
                            }
                    }
                    ,
                    e.drawLabels = function (e, t, n) {
                        var r = t.viewport.xmin
                            , i = t.viewport.xmax
                            , o = t.viewport.ymin
                            , s = t.viewport.ymax
                            , a = t.screen.width
                            , c = t.screen.height
                            , l = (i - r) / a
                            , d = (s - o) / c
                            , p = t.settings.labelNormalColor
                            , h = t.mapx(0)
                            , f = t.mapy(0)
                            , m = t.settings.labelSize
                            , g = 15
                            , y = t.settings.showXAxis && t.settings.xAxisLabel
                            , v = t.settings.showYAxis && t.settings.yAxisLabel
                            , b = n.x
                            , x = n.y;
                        if (y && b) {
                            e.save(),
                                e.fillStyle = p;
                            var w;
                            if (e.__xLabelOffset && t.settings.isViewportTransient && u(e.__xLabelOffset.xscale, l) && u(e.__xLabelOffset.yscale, d) && (w = {
                                x: e.__xLabelOffset.x + h,
                                y: e.__xLabelOffset.y + f
                            }),
                                this._setAxisLabelFont(e, y, m),
                                !w) {
                                var E = e.measureText(y).width
                                    , _ = a - E - g
                                    , S = m;
                                w = b.bottom + S < c ? {
                                    x: _,
                                    y: b.bottom + S
                                } : {
                                        x: _,
                                        y: b.top - S / 2
                                    },
                                    e.__xLabelOffset = {
                                        x: w.x - h,
                                        y: w.y - f,
                                        xscale: l,
                                        yscale: d
                                    }
                            }
                            e.strokeText(y, w.x, w.y),
                                e.fillText(y, w.x, w.y),
                                e.restore()
                        } else
                            e.__xLabelPosition = null;
                        if (v && x) {
                            e.save(),
                                e.fillStyle = p;
                            var k;
                            if (e.__yLabelOffset && t.settings.isViewportTransient && u(e.__yLabelOffset.xscale, l) && u(e.__yLabelOffset.yscale, d) && (k = {
                                x: e.__yLabelOffset.x + h,
                                y: e.__yLabelOffset.y + f
                            }),
                                this._setAxisLabelFont(e, v, m),
                                !k) {
                                var M = e.measureText(v).width
                                    , C = m
                                    , I = M + 5;
                                if (!this._isShortMathyLabel(v)) {
                                    var T = M;
                                    M = C,
                                        C = T,
                                        I = .5 * M
                                }
                                var P = 0 + g + C;
                                k = x.left - M > 0 ? {
                                    x: x.left - I,
                                    y: P
                                } : {
                                        x: x.right + M,
                                        y: P
                                    },
                                    e.__yLabelOffset = {
                                        x: k.x - h,
                                        y: k.y - f,
                                        xscale: l,
                                        yscale: d
                                    }
                            }
                            e.translate(k.x, k.y),
                                this._isShortMathyLabel(v) || e.rotate(-Math.PI / 2),
                                e.strokeText(v, 0, 0),
                                e.fillText(v, 0, 0),
                                e.restore()
                        } else
                            e.__yLabelPosition = null
                    }
                    ,
                    e._isShortMathyLabel = function (e) {
                        return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)
                    }
                    ,
                    e._setAxisLabelFont = function (e, t, n) {
                        this.addTextShadow(e),
                            this._isShortMathyLabel(t) ? e.font = "italic " + Math.round(1.4 * n.toString()) + "px Times" : e.font = Math.round(1.2 * n.toString()) + "px Arial"
                    }
                    ,
                    e.drawCartesianStepNumbers = function (e, t, i) {
                        e.save();
                        var o = t.settings.showXAxis
                            , s = t.settings.showYAxis
                            , c = o && t.settings.xAxisNumbers
                            , u = s && t.settings.yAxisNumbers
                            , d = t.viewport.xmin
                            , p = t.viewport.xmax
                            , h = t.viewport.ymin
                            , f = t.viewport.ymax
                            , m = t.screen.width
                            , g = t.screen.height
                            , y = {
                                left: 3,
                                top: 3,
                                right: m - 3,
                                bottom: g - 3
                            }
                            , v = t.settings.labelHangingColor
                            , b = t.settings.labelNormalColor
                            , x = t.mapx(0)
                            , w = t.mapy(0)
                            , E = t.settings.labelSize;
                        this.addTextShadow(e);
                        var _ = {
                            left: 0,
                            right: m,
                            top: w - 1,
                            bottom: w + 1
                        }
                            , S = {
                                left: x - 1,
                                right: x + 1,
                                top: 0,
                                bottom: g
                            }
                            , k = !1;
                        if (o && s && (c || u)) {
                            k = !0,
                                e.fillStyle = b;
                            var M = n(r.value(0, 1), E);
                            M.drawCenteredAt(e, {
                                x: x - M.getRect().right - 5,
                                y: w - M.getRect().top + 3
                            })
                        }
                        return c && a(d, p, i.majorStepX, function (i) {
                            var o = n(r.value(i, p - d), E)
                                , s = {
                                    x: t.mapx(o.getValue()) - .5 * o.getMinusWidth(),
                                    y: w - o.getRect().top + 5
                                }
                                , a = o.clampBoundsWithinRect(s, y);
                            e.fillStyle = s.y === a.y ? b : v,
                                "0" === o.getString() && k || (o.drawCenteredAt(e, a),
                                    l(_, o.getRectWhenCenteredAt(a)))
                        }),
                            u && a(h, f, i.majorStepY, function (i) {
                                var o = n(r.value(i, f - h), E)
                                    , s = {
                                        x: x - 5 - o.getRect().right,
                                        y: t.mapy(o.getValue())
                                    }
                                    , a = o.clampBoundsWithinRect(s, y);
                                e.fillStyle = s.x === a.x ? b : v,
                                    "0" === o.getString() && k || (o.drawCenteredAt(e, a),
                                        l(S, o.getRectWhenCenteredAt(a)))
                            }),
                            e.restore(),
                            {
                                x: _,
                                y: S
                            }
                    }
            })
            , a = function (e, t, n, r) {
                var i = Math.ceil(e / n)
                    , o = Math.floor(t / n);
                if (isFinite(o - i) && !(o - i > 1e4))
                    for (var s = i; s <= o; s++)
                        r(s * n)
            }
            , c = function (e, t, n) {
                return e < t ? t : e > n ? n : e
            }
            , l = function (e, t) {
                t.left < e.left && (e.left = t.left),
                    t.right > e.right && (e.right = t.right),
                    t.top < e.top && (e.top = t.top),
                    t.bottom > e.bottom && (e.bottom = t.bottom)
            }
            , u = function (e, t) {
                var n = Math.abs(e)
                    , r = Math.abs(t)
                    , i = 1e-4;
                return Math.abs(n - r) <= (n < r ? r : n) * i
            };
        return s
    }),
    define("graphing/graphsketch", ["require", "math/poi", "./poi", "graphing/graphmode"], function (e) {
        function t(e, t) {
            this.color = "#000000",
                this.style = "normal",
                this.visible = !0,
                this.showPOI = !1,
                this.showHighlight = !1,
                this.selected = !1,
                this.labels = [],
                this.id = e,
                this.branches = void 0 !== t ? t : [],
                this.getPOI().forEach(function (e) {
                    e.type === n.LABEL && this.labels.push(e)
                }
                    .bind(this))
        }
        var n = e("math/poi").default
            , r = e("./poi")
            , i = e("graphing/graphmode");
        return t.prototype.getPOI = function () {
            if (this.__cachedPOI)
                return this.__cachedPOI;
            var e, t;
            this.__cachedPOI = [],
                this.__cachedPOIIds = {};
            for (var r = 0; r < this.branches.length; r++) {
                e = this.branches[r],
                    t = e.graphMode;
                var o = e.poi;
                if (t === i.X || t === i.Y)
                    this._pushPOI(o.zeros, r, n.ZERO),
                        this._pushPOI(o.intercept, r, n.INTERCEPT),
                        this._pushPOI(o.extrema, r, n.EXTREMUM),
                        this._pushPOI(o.intersections, r, n.INTERSECTION);
                else if (t === i.XYPOINT || t === i.XYPOINT_MOVABLE)
                    if (e.showLabel === !0) {
                        var s = e.nakedLabel;
                        this._pushPOI(o.defined, r, n.LABEL, s)
                    } else
                        this._pushPOI(o.defined, r, n.DEFINITION)
            }
            return this.__cachedPOI
        }
            ,
            t.prototype.getMovablePoints = function () {
                if (this.__cachedMovablePoints)
                    return this.__cachedMovablePoints;
                this.__cachedMovablePoints = [];
                var e = this.branches[0];
                if (e && 1 === e.segments.length && e.graphMode === i.XYPOINT_MOVABLE)
                    for (var t = e.segments[0], n = 0; n < t.length; n++) {
                        var r;
                        e.tableId && (r = {
                            tableId: e.tableId,
                            columnId: this.id,
                            rowIndex: e.movablePointInfo[n].index,
                            dragX: e.movablePointInfo[n].dragX,
                            dragY: e.movablePointInfo[n].dragY
                        });
                        var o;
                        e.scaleFactors && (o = e.scaleFactors[0][n]);
                        var s = r ? r.rowIndex : n;
                        this.__cachedMovablePoints.push({
                            id: "movable:[" + this.id + "," + s + "]",
                            sketch: this,
                            color: this.color,
                            tableInfo: r,
                            scaleFactor: o,
                            x: t[n][0],
                            y: t[n][1],
                            isMovable: !0,
                            label: e.labels && e.labels[n]
                        })
                    }
                return this.__cachedMovablePoints
            }
            ,
            t.prototype._pushPOI = function (e, t, n, i) {
                if (e)
                    for (var o = 0, s = e.x.length; o < s; o++) {
                        var a = new r(e.x[o], e.y[o], n, this, t, o, i);
                        e.intersects && (a.intersects = e.intersects[o]),
                            this.__cachedPOI.push(a),
                            this.__cachedPOIIds[a.id] = a
                    }
            }
            ,
            t.prototype.updateIntersections = function (e) {
                for (var t = 0, r = this.branches.length; t < r; t++)
                    this.branches[t].poi.intersections = e[t];
                var o = this.__cachedPOI;
                this.__cachedPOI = [],
                    o.forEach(function (e) {
                        e.type !== n.INTERSECTION ? this.__cachedPOI.push(e) : delete this.__cachedPOIIds[e.id]
                    }
                        .bind(this));
                var s, a;
                for (t = 0; t < this.branches.length; t++) {
                    s = this.branches[t],
                        a = s.graphMode;
                    var c = s.poi;
                    a !== i.X && a !== i.Y || this._pushPOI(c.intersections, t, n.INTERSECTION)
                }
            }
            ,
            t.prototype.getPOIById = function (e) {
                return this.__cachedPOIIds[e]
            }
            ,
            t.prototype.updateFrom = function (e) {
                if (e) {
                    this.visible = !0,
                        this.showPOI = e.showPOI,
                        this.showHighlight = e.showHighlight,
                        this.selected = e.selected;
                    var t = this.branches[0].graphMode;
                    if (t === i.XYPOINT || t === i.XYPOINT_MOVABLE) {
                        var n, r, o, s = !0;
                        for (o = 0; o < this.__cachedPOI.length; o++)
                            if (n = e.__cachedPOI[o],
                                r = this.__cachedPOI[o],
                                !n || n.type !== r.type) {
                                s = !1;
                                break
                            }
                        if (s)
                            for (o = 0; o < this.__cachedPOI.length; o++)
                                n = e.__cachedPOI[o],
                                    r = this.__cachedPOI[o],
                                    delete this.__cachedPOIIds[r.id],
                                    this.__cachedPOIIds[n.id] = r,
                                    r.id = n.id
                    }
                }
            }
            ,
            t
    }),
    define("graphing/imagelayer", ["require", "pjs", "underscore", "./draw-image-to-ctx"], function (e) {
        var t = e("pjs")
            , n = e("underscore")
            , r = e("./draw-image-to-ctx").drawImageToCtx
            , i = t(function (e) {
                e.redrawToCtx = function (e, t, i, o) {
                    (void 0 === o || o.length < n.size(i)) && (o = n.keys(i));
                    for (var s = 0; s < o.length; s++) {
                        var a = i[o[s]];
                        a && a.shouldGraph && !a.foreground && r(a, e, t)
                    }
                }
            });
        return i
    }),
    define("math/recttransformation", ["require", "pjs"], function (e) {
        var t = e("pjs")
            , n = t(function (e, t, r) {
                function i(e, t) {
                    var n = e - 1;
                    return 1 + n * n * n === 1 ? t * (1 + n * (t - 1) * (.5 + 1 / 6 * n * (t - 2))) : (Math.pow(e, t) - 1) / n
                }
                e.init = function (e, t, n, r) {
                    this.tx = void 0 !== e ? e : 0,
                        this.ty = void 0 !== t ? t : 0,
                        this.sx = void 0 !== n ? n : 1,
                        this.sy = void 0 !== r ? r : this.sx
                }
                    ,
                    r.scale = function (e, t) {
                        return new n(0, 0, e, t)
                    }
                    ,
                    r.translate = function (e, t) {
                        return (new n).translate(e, t)
                    }
                    ,
                    r.scaleAtPoint = function (e, t, r) {
                        return void 0 === r && (r = t),
                            new n(e.x * (1 - t), e.y * (1 - r), t, r)
                    }
                    ,
                    e.compose = function (e) {
                        return new n(this.sx * e.tx + this.tx, this.sy * e.ty + this.ty, this.sx * e.sx, this.sy * e.sy)
                    }
                    ,
                    e.translate = function (e, t) {
                        var r = void 0 === t ? e.x : t.x - e.x
                            , i = void 0 === t ? e.y : t.y - e.y;
                        return new n(this.tx + r, this.ty + i, this.sx, this.sy)
                    }
                    ,
                    e.scale = function (e, t) {
                        return n.scale(e, t).compose(this)
                    }
                    ,
                    e.scaleAtPoint = function (e, t, r) {
                        return n.scaleAtPoint(e, t, r).compose(this)
                    }
                    ,
                    e.inverse = function () {
                        return new n(-this.tx / this.sx, -this.ty / this.sy, 1 / this.sx, 1 / this.sy)
                    }
                    ,
                    e.div = function (e) {
                        return new n((this.tx * e.sx - this.sx * e.tx) / e.sx, (this.ty * e.sy - this.sy * e.ty) / e.sy, this.sx / e.sx, this.sy / e.sy)
                    }
                    ,
                    e.conjugate = function (e) {
                        return new n(this.tx * e.sx + e.tx * (1 - this.sx), this.ty * e.sy + e.ty * (1 - this.sy), this.sx, this.sy)
                    }
                    ,
                    e.pow = function (e) {
                        return new n(this.tx * i(this.sx, e), this.ty * i(this.sy, e), Math.pow(this.sx, e), Math.pow(this.sy, e))
                    }
                    ,
                    r.fromRects = function (e, t) {
                        var r = (t.right - t.left) / (e.right - e.left)
                            , i = (t.top - t.bottom) / (e.top - e.bottom);
                        return new n(t.left - r * e.left, t.bottom - i * e.bottom, r, i)
                    }
                    ,
                    e.mapX = function (e) {
                        return this.sx * e + this.tx
                    }
                    ,
                    e.mapY = function (e) {
                        return this.sy * e + this.ty
                    }
                    ,
                    e.mapPoint = function (e) {
                        return {
                            x: this.mapX(e.x),
                            y: this.mapY(e.y)
                        }
                    }
                    ,
                    e.mapRect = function (e) {
                        return {
                            left: this.mapX(e.left),
                            right: this.mapX(e.right),
                            bottom: this.mapY(e.bottom),
                            top: this.mapY(e.top)
                        }
                    }
                    ,
                    e.toJSON = function () {
                        return {
                            tx: this.tx,
                            ty: this.ty,
                            sx: this.sx,
                            sy: this.sy
                        }
                    }
                    ,
                    e.fromJSON = function (e) {
                        return new n(e.tx, e.tj, e.sx, e.sy)
                    }
            });
        return n
    }),
    define("graphing/projection", ["require", "math/recttransformation"], function (e) {
        function t(e) {
            return {
                left: 0,
                right: e.width,
                top: 0,
                bottom: e.height
            }
        }
        function n(e) {
            return {
                left: e.xmin,
                right: e.xmax,
                bottom: e.ymin,
                top: e.ymax
            }
        }
        var r = e("math/recttransformation")
            , i = function (e, i, o) {
                this.screen = e,
                    this.viewport = i,
                    this.settings = o,
                    this.mathCoordinates = n(i),
                    this.pixelCoordinates = t(e),
                    this.mathToPixels = r.fromRects(this.mathCoordinates, this.pixelCoordinates),
                    this.pixelsToMath = r.fromRects(this.pixelCoordinates, this.mathCoordinates)
            };
        return i.prototype.mapx = function (e) {
            return this.mathToPixels.mapX(e)
        }
            ,
            i.prototype.mapy = function (e) {
                return this.mathToPixels.mapY(e)
            }
            ,
            i.prototype.map_pt = function (e) {
                return this.mathToPixels.mapPoint(e)
            }
            ,
            i.prototype.reverse_mapx = function (e) {
                return this.pixelsToMath.mapX(e)
            }
            ,
            i.prototype.reverse_mapy = function (e) {
                return this.pixelsToMath.mapY(e)
            }
            ,
            i.prototype.reverse_map_pt = function (e) {
                return this.pixelsToMath.mapPoint(e)
            }
            ,
            i.prototype.coordsAreOnscreen = function (e, t, n) {
                return n = void 0 === n ? 0 : n,
                    e > -n && t > -n && e < this.screen.width + n && t < this.screen.height + n
            }
            ,
            i.prototype.closestPointOnScreen = function (e) {
                var t = this.pixelCoordinates;
                return {
                    x: Math.min(Math.max(e.x, t.left), t.right),
                    y: Math.min(Math.max(e.y, t.top), t.bottom)
                }
            }
            ,
            i
    }),
    define("lib/aria", ["require", "jquery", "pjs"], function (e) {
        var t = e("jquery")
            , n = e("pjs")
            , r = n(function (e) {
                e.init = function () {
                    this.jQ = t([]),
                        t(document).ready(function () {
                            var e = ".dcg-aria-alert";
                            t(e).length || t("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),
                                this.jQ = t(e)
                        }
                            .bind(this)),
                        this.items = []
                }
                    ,
                    e.queue = function (e) {
                        return this.items.push(e),
                            this
                    }
                    ,
                    e.alert = function (e) {
                        return e && this.queue(e),
                            this.items.length && this.jQ.empty().text(this.items.join(" ").replace(/ +(?= )/g, "")),
                            this.clear()
                    }
                    ,
                    e.clear = function () {
                        return this.items.length = 0,
                            this
                    }
                    ,
                    e.addAria = function (e) {
                        return e.attr("aria-atomic", "true").attr("aria-live", "assertive")
                    }
                    ,
                    e.removeAria = function (e) {
                        return e.removeAttr("aria-atomic").removeAttr("aria-live")
                    }
                    ,
                    e.toggleAria = function (e) {
                        return e.hasClass("dcg-visible") ? this.addAria(e) : this.removeAria(e)
                    }
            });
        return r()
    }),
    define("graphing/movablepointslayer", ["require", "pjs", "jquery", "./domlayer", "browser", "./constants", "lib/aria", "i18n", "./label"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("./domlayer")
            , i = e("browser")
            , o = e("./constants")
            , s = e("lib/aria")
            , a = e("i18n")
            , c = e("./label")
            , l = t(r, function (e, t) {
                e.init = function (e, n) {
                    t.init.call(this, e),
                        this.graphSettings = n,
                        this.renderedMovablePoints = {},
                        this.prevLabels = {},
                        this.prevCoordinates = {},
                        this.cachedAriaLabels = {}
                }
                    ,
                    e.t = function (e, t) {
                        return a.t(e, t, this.graphSettings.language)
                    }
                    ,
                    e.redraw = function (e, t) {
                        this.resize(e.screen.width, e.screen.height);
                        var n = null
                            , r = null;
                        for (var i in this.renderedMovablePoints)
                            this.renderedMovablePoints[i].shouldGarbageCollect = !0;
                        for (i in t) {
                            var o = t[i];
                            if (o.visible)
                                for (var s = o.getMovablePoints(), a = 0; a < s.length; a++) {
                                    var c = s[a]
                                        , l = {};
                                    c.id === this.hoveredPointId && (l.hovered = !0,
                                        n = c),
                                        c.id === this.pressedPointId && (l.pressed = !0,
                                            r = c),
                                        this.drawMovablePoint(c, e, l)
                                }
                        }
                        for (i in this.renderedMovablePoints)
                            this.renderedMovablePoints[i].shouldGarbageCollect && (this.renderedMovablePoints[i].$.off(".mp_listener"),
                                this.renderedMovablePoints[i].$.remove(),
                                delete this.renderedMovablePoints[i]);
                        var u, d;
                        n ? (u = n.tableInfo && n.tableInfo.dragX,
                            d = n.tableInfo && n.tableInfo.dragY,
                            u && d || !u && !d ? this.addGlobalClass("dcg-mouse-over-movable-point") : u ? this.addGlobalClass("dcg-mouse-over-movable-point-ew") : this.addGlobalClass("dcg-mouse-over-movable-point-ns")) : (this.hoveredPointId = null,
                                this.removeGlobalClass("dcg-mouse-over-movable-point-ew"),
                                this.removeGlobalClass("dcg-mouse-over-movable-point-ns"),
                                this.removeGlobalClass("dcg-mouse-over-movable-point")),
                            r ? (u = r.tableInfo && r.tableInfo.dragX,
                                d = r.tableInfo && r.tableInfo.dragY,
                                u && d || !u && !d ? this.addGlobalClass("dcg-dragging-movable-point") : u ? this.addGlobalClass("dcg-dragging-movable-point-ew") : this.addGlobalClass("dcg-dragging-movable-point-ns")) : (this.pressedPointId = null,
                                    this.removeGlobalClass("dcg-dragging-movable-point-ew"),
                                    this.removeGlobalClass("dcg-dragging-movable-point-ns"),
                                    this.removeGlobalClass("dcg-dragging-movable-point"))
                    }
                    ,
                    e.drawMovablePoint = function (e, t, r) {
                        var s = e.id
                            , a = e.color
                            , c = e.x
                            , l = e.y
                            , u = t.mapx(c)
                            , d = t.mapy(l)
                            , p = !(s in this.renderedMovablePoints);
                        if (p) {
                            var h = e.tableInfo ? "dcg-table-movable-point" : ""
                                , f = n("<div class='dcg-movable-point " + h + "'>").append(n("<div class='dcg-background'></div>")).append(n("<div class='dcg-dot'></div></div>"));
                            this.dom_node.append(f),
                                this.renderedMovablePoints[s] = {
                                    $: f,
                                    shouldGarbageCollect: !0
                                }
                        }
                        var m = this.renderedMovablePoints[s].$
                            , g = m[0] === document.activeElement
                            , y = t.coordsAreOnscreen(u, d, o.OFFSCREEN_RENDER_MARGIN);
                        if (y || g) {
                            m.attr("aria-hidden", !this.graphSettings.config.graphpaper).attr("role", "button").attr("tabindex", this.graphSettings.config.graphpaper && this.graphSettings.enableTabindex ? 0 : -1).css({
                                transform: i.translateRule(u, d),
                                backgroundColor: a
                            }).data("movablePoint", e).data("renderedOnScreen", y);
                            var v = this.getAriaLabel(e, y, t, g);
                            "" !== v && (m.attr("aria-label", v),
                                this.speakPointCoordinates(m[0], v)),
                                m.toggleClass("dcg-simulate-hovered", !!r.hovered),
                                m.toggleClass("dcg-simulate-active", !!r.pressed),
                                p && m.on("blur.mp_listener", function (e) {
                                    setTimeout(function () {
                                        m.attr("aria-label", this.getAriaLabel(m.data("movablePoint"), m.data("renderedOnScreen"), t, !1))
                                    }
                                        .bind(this), 0)
                                }
                                    .bind(this)),
                                this.renderedMovablePoints[s].shouldGarbageCollect = !1
                        }
                    }
                    ,
                    e.getAriaLabel = function (e, t, n, r) {
                        if (!e || !n)
                            return "";
                        var i = n.viewport;
                        if (!i)
                            return "";
                        var o = this.getLabelFromMovablePoint(e)
                            , s = "X: " + c.value(e.x, i.xmax - i.xmin).ariaString + ". Y: " + c.value(e.y, i.ymax - i.ymin).ariaString + "."
                            , a = this.t(" is movable. Press Arrows or Shift+Arrows to adjust.")
                            , l = t ? "" : this.t(" not visible on screen")
                            , u = this.prevLabels[e.id]
                            , d = this.prevCoordinates[e.id]
                            , p = !u || u !== o
                            , h = !d || d.x !== e.x || d.y !== e.y;
                        return p && (this.prevLabels[e.id] = o),
                            h && (this.prevCoordinates[e.id] = {
                                x: e.x,
                                y: e.y
                            }),
                            r ? p ? o + l : h ? s + l : "" : o + ". " + s + a + l
                    }
                    ,
                    e.getLabelFromMovablePoint = function (e) {
                        return e.label || this.t("Graph point")
                    }
                    ,
                    e.speakPointCoordinates = function (e, t) {
                        document.activeElement === e && i.IS_APPLE && s.alert(t)
                    }
            });
        return l
    }),
    define("animation-frame-src", ["require"], function (e) {
        var t = 0
            , n = function (e, n) {
                var r = (new Date).getTime()
                    , i = Math.max(0, 16 - (r - t))
                    , o = window.setTimeout(function () {
                        e(r + i)
                    }, i);
                return t = r + i,
                    o
            };
        return window.requestAnimationFrame && window.cancelAnimationFrame ? {
            requestAnimationFrame: window.requestAnimationFrame.bind(window),
            cancelAnimationFrame: window.cancelAnimationFrame.bind(window)
        } : {
                requestAnimationFrame: n,
                cancelAnimationFrame: window.clearTimeout.bind(window)
            }
    }),
    define("lib/animation-frame", ["require", "exports", "animation-frame-src"], function (e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.requestAnimationFrame = n.requestAnimationFrame,
            t.cancelAnimationFrame = n.cancelAnimationFrame
    }),
    define("jquery.handleevent", ["require", "jquery"], function (e) {
        var t = e("jquery")
            , n = "_*_";
        t.Event.prototype.wasHandled = function (e) {
            e = e ? e : n;
            var r = this.originalEvent
                , i = r && r.handledBy;
            if (i && i[e])
                return !0;
            if (e !== n)
                return !1;
            var o = t(this.target).closest("[handleEvent]");
            return !(!o.length || o[0] === this.currentTarget) && "false" !== o.attr("handleEvent")
        }
            ,
            t.Event.prototype.handle = function (e) {
                e = e ? e : n;
                var t = this.originalEvent;
                if (t) {
                    var r = t.handledBy;
                    r || (r = t.handledBy = {}),
                        r[e] = !0
                }
            }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define("vendor/jquery.mousewheel", ["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
    }(function (e) {
        function t(t) {
            var s = t || window.event
                , a = c.call(arguments, 1)
                , l = 0
                , u = 0
                , d = 0
                , p = 0;
            if (t = e.event.fix(s),
                t.type = "mousewheel",
                "detail" in s && (d = s.detail * -1),
                "wheelDelta" in s && (d = s.wheelDelta),
                "wheelDeltaY" in s && (d = s.wheelDeltaY),
                "wheelDeltaX" in s && (u = s.wheelDeltaX * -1),
                "axis" in s && s.axis === s.HORIZONTAL_AXIS && (u = d * -1,
                    d = 0),
                l = 0 === d ? u : d,
                "deltaY" in s && (d = s.deltaY * -1,
                    l = d),
                "deltaX" in s && (u = s.deltaX,
                    0 === d && (l = u * -1)),
                0 !== d || 0 !== u) {
                if (1 === s.deltaMode) {
                    var h = e.data(this, "mousewheel-line-height");
                    l *= h,
                        d *= h,
                        u *= h
                } else if (2 === s.deltaMode) {
                    var f = e.data(this, "mousewheel-page-height");
                    l *= f,
                        d *= f,
                        u *= f
                }
                return p = Math.max(Math.abs(d), Math.abs(u)),
                    (!o || p < o) && (o = p,
                        r(s, p) && (o /= 40)),
                    r(s, p) && (l /= 40,
                        u /= 40,
                        d /= 40),
                    l = Math[l >= 1 ? "floor" : "ceil"](l / o),
                    u = Math[u >= 1 ? "floor" : "ceil"](u / o),
                    d = Math[d >= 1 ? "floor" : "ceil"](d / o),
                    t.deltaX = u,
                    t.deltaY = d,
                    t.deltaFactor = o,
                    t.deltaMode = 0,
                    a.unshift(t, l, u, d),
                    i && clearTimeout(i),
                    i = setTimeout(n, 200),
                    (e.event.dispatch || e.event.handle).apply(this, a)
            }
        }
        function n() {
            o = null
        }
        function r(e, t) {
            return u.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 === 0
        }
        var i, o, s = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], a = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], c = Array.prototype.slice;
        if (e.event.fixHooks)
            for (var l = s.length; l;)
                e.event.fixHooks[s[--l]] = e.event.mouseHooks;
        var u = e.event.special.mousewheel = {
            version: "3.1.9",
            setup: function () {
                if (this.addEventListener)
                    for (var n = a.length; n;)
                        this.addEventListener(a[--n], t, !1);
                else
                    this.onmousewheel = t;
                e.data(this, "mousewheel-line-height", u.getLineHeight(this)),
                    e.data(this, "mousewheel-page-height", u.getPageHeight(this))
            },
            teardown: function () {
                if (this.removeEventListener)
                    for (var e = a.length; e;)
                        this.removeEventListener(a[--e], t, !1);
                else
                    this.onmousewheel = null
            },
            getLineHeight: function (t) {
                return parseInt(e(t)["offsetParent" in e.fn ? "offsetParent" : "parent"]().css("fontSize"), 10)
            },
            getPageHeight: function (t) {
                return e(t).height()
            },
            settings: {
                adjustOldDeltas: !0
            }
        };
        e.fn.extend({
            mousewheel: function (e) {
                return e ? this.bind("mousewheel", e) : this.trigger("mousewheel")
            },
            unmousewheel: function (e) {
                return this.unbind("mousewheel", e)
            }
        })
    }),
    define("graphing/viewportcontroller", ["require", "jquery", "pjs", "lib/aria", "i18n", "math/recttransformation", "./viewport", "math/distance", "./constants", "lib/animation-frame", "./projection", "jquery.handleevent", "vendor/jquery.mousewheel"], function (e) {
        var t = e("jquery")
            , n = e("pjs")
            , r = e("lib/aria")
            , i = e("i18n")
            , o = e("math/recttransformation")
            , s = e("./viewport")
            , a = e("math/distance")
            , c = e("./constants")
            , l = e("lib/animation-frame")
            , u = e("./projection");
        e("jquery.handleevent"),
            e("vendor/jquery.mousewheel");
        var d = n(function (e) {
            function n(e, t) {
                var n = t.x - e.x
                    , r = t.y - e.y
                    , i = .5 * (e.x + t.x)
                    , o = .5 * (e.y + t.y)
                    , s = .5 * a.hypot(n, r);
                return {
                    center: p(i, o),
                    radius: s
                }
            }
            function d(e, t) {
                for (var n = [], r = 0; r < e.length; r++)
                    n.push(p(e[r].x - t.left, e[r].y - t.top));
                return n
            }
            function p(e, t) {
                return {
                    x: e,
                    y: t
                }
            }
            function h(e) {
                return p(.5 * (e.left + e.right), .5 * (e.bottom + e.top))
            }
            var f = 0;
            e.init = function (e, t) {
                this.grapher = e,
                    this.$ = this.grapher.$,
                    this.__id = f++ ,
                    this.controller = t,
                    this.addMouseWheelEventHandler(),
                    this.addTouchEventHandler()
            }
                ,
                e.remove = function () {
                    t(window).off("viewportcontroller-" + this.__id)
                }
                ,
                e.t = function (e, t) {
                    return i.t(e, t, this.grapher.settings.language)
                }
                ,
                e.getViewport = function () {
                    return this.grapher.getProjection().viewport
                }
                ,
                e.getProjection = function () {
                    return this.grapher.getProjection()
                }
                ,
                e.getDefaultViewport = function () {
                    return this.grapher.getDefaultViewport()
                }
                ,
                e._setViewportWithoutCancellingAnimation = function (e) {
                    if (e.isValid() && !e.equals(this.getViewport())) {
                        var t = this.getProjection();
                        this.grapher._setProjection(new u(t.screen, e, t.settings))
                    }
                }
                ,
                e.setViewport = function (e) {
                    this.cancelAnimation(),
                        this._setViewportWithoutCancellingAnimation(e)
                }
                ,
                e.setScreen = function (e) {
                    var t = this.getProjection()
                        , n = new u(e, this.getViewportForScreen(t.viewport, e), t.settings);
                    this.grapher._setProjection(n)
                }
                ,
                e.getTransformedViewport = function (e) {
                    var t = this.getProjection()
                        , n = t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);
                    return new s(n.left, n.right, n.bottom, n.top)
                }
                ,
                e.transformViewport = function (e) {
                    this.setViewport(this.getTransformedViewport(e))
                }
                ,
                e.animateTransformation = function (e) {
                    function t(s) {
                        r || (r = s);
                        var a = (s - r) / c.ANIMATE_ZOOM_DURATION;
                        o += a,
                            o < 1 ? (n.__animationTimeout = l.requestAnimationFrame(t),
                                n._setViewportWithoutCancellingAnimation(n.getTransformedViewport(e.pow(a))),
                                n.grapher.debounceUserRequestedViewportChange()) : (n.setViewport(i),
                                    n.grapher.debounceUserRequestedViewportChange())
                    }
                    var n = this;
                    this.cancelAnimation();
                    var r, i = this.getTransformedViewport(e), o = 0;
                    this.__animationTimeout = l.requestAnimationFrame(t)
                }
                ,
                e.cancelAnimation = function () {
                    l.cancelAnimationFrame(this.__animationTimeout)
                }
                ,
                e.addMouseWheelEventHandler = function () {
                    var e, n, r = !1;
                    t(window).on("scroll.viewportcontroller-" + this.__id, function (e) {
                        r = !0
                    }),
                        t(window).on("mousewheel.viewportcontroller-" + this.__id, function (t) {
                            e = t.originalEvent.clientX,
                                n = t.originalEvent.clientY
                        }),
                        t(window).on("mousemove.viewportcontroller-" + this.__id, function (t) {
                            if (r) {
                                var i = t.originalEvent.clientX - e
                                    , o = t.originalEvent.clientY - n
                                    , s = i * i + o * o;
                                s < 100 || (r = !1)
                            }
                        });
                    var i = 0
                        , s = function (e, t) {
                            var n = this.getProjection();
                            if (!n.settings.config.lockViewport) {
                                var s = n.mathToPixels;
                                if (!r) {
                                    e.preventDefault();
                                    var a = this.$[0].getBoundingClientRect()
                                        , u = p(e.clientX - a.left, e.clientY - a.top)
                                        , d = s.mapPoint(p(0, 0))
                                        , h = Math.abs(u.x - d.x) < 50 && Math.abs(u.y - d.y) < 50
                                        , f = h && t > 0 ? d : u;
                                    if (!(i > 0)) {
                                        i += 1,
                                            l.requestAnimationFrame(function () {
                                                i--
                                            }),
                                            t = t > 0 ? 1 : -1;
                                        var m = t > 0 ? c.ZOOM_FACTOR : 1 / c.ZOOM_FACTOR;
                                        this.transformViewport(o.scaleAtPoint(f, m)),
                                            this.grapher.debounceUserRequestedViewportChange()
                                    }
                                }
                            }
                        };
                    this.$.mousewheel(s.bind(this))
                }
                ,
                e.handleDoubleClick = function (e) {
                    var t = this.getProjection();
                    if (!t.settings.config.lockViewport && !t.settings.config.disable_dblclick_zooming && !e.wasHandled()) {
                        e.preventDefault();
                        var n = this.$[0].getBoundingClientRect()
                            , r = p(e.clientX - n.left, e.clientY - n.top);
                        this.animateTransformation(o.scaleAtPoint(r, c.DOUBLETAP_ZOOM))
                    }
                }
                ,
                e.applyPanTouchChanges = function (e, t) {
                    if (!this.getProjection().settings.config.lockViewport) {
                        var n = p(t[0].x - e[0].x, t[0].y - e[0].y);
                        this.transformViewport(o.translate(n)),
                            this.grapher.debounceUserRequestedViewportChange()
                    }
                }
                ,
                e.applyScaleTouchChanges = function (e, t) {
                    if (!this.getProjection().settings.config.lockViewport) {
                        var r = this.grapher.scaleAxis
                            , i = n(e[0], e[1])
                            , s = n(t[0], t[1])
                            , a = s.radius / i.radius
                            , c = "y" === r ? 1 : a
                            , l = "x" === r ? 1 : a
                            , u = o.scaleAtPoint(i.center, c, l).translate(i.center, s.center);
                        this.transformViewport(u),
                            this.grapher.debounceUserRequestedViewportChange()
                    }
                }
                ,
                e.addTouchEventHandler = function () {
                    var e = this
                        , n = []
                        , r = !1
                        , i = function (n) {
                            e.getProjection().settings.config.lockViewport || n.wasHandled() || r || n.touches.length === n.changedTouches.length && (r = !0,
                                e.grapher.isDragging = !0,
                                e.controller.dispatch({
                                    type: "begin-dragging-grapher"
                                }),
                                t(document).on("dcg-tapmove.graphdrag", c),
                                t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag", l))
                        }
                        , o = function (t) {
                            if (!(t.length < 2)) {
                                var n = e.grapher.getProjection()
                                    , r = n.pixelCoordinates
                                    , i = n.mathToPixels.mapX(0)
                                    , o = n.mathToPixels.mapY(0);
                                i = Math.min(Math.max(r.left, i), r.right),
                                    o = Math.min(Math.max(r.top, o), r.bottom);
                                var s = t[1].x - t[0].x
                                    , a = t[1].y - t[0].y
                                    , c = 40;
                                return Math.abs(t[0].x - i) < c && Math.abs(t[1].x - i) < c && Math.abs(a) > 3 * Math.abs(s) ? "y" : Math.abs(t[0].y - o) < c && Math.abs(t[1].y - o) < c && Math.abs(s) > 3 * Math.abs(a) ? "x" : "both"
                            }
                        }
                        , s = function (t) {
                            return e.grapher.scaleAxis || (e.grapher.scaleAxis = o(t)),
                                e.grapher.scaleAxis
                        }
                        , a = function () {
                            e.grapher.scaleAxis = void 0,
                                e.grapher.redrawAllLayers()
                        }
                        , c = function (t) {
                            if (r && !e.getProjection().settings.config.lockViewport) {
                                var i = d(t.touches, e.$.offset());
                                2 === n.length && 2 === i.length ? (s(i),
                                    e.applyScaleTouchChanges(n, i)) : a(),
                                    1 === n.length && e.applyPanTouchChanges(n, i),
                                    n = i
                            }
                        }
                        , l = function (i) {
                            r && (e.cancelAnimation(),
                                n = d(i.touches, e.$.offset()),
                                0 === i.touches.length && (r = !1,
                                    e.grapher.isDragging = !1,
                                    t(document).off(".graphdrag"),
                                    e.grapher.debounceUserRequestedViewportChange()),
                                i.touches.length < 2 && a())
                        };
                    this.$.css("touch-action", "none"),
                        this.$.on("dcg-tapstart", i),
                        this.$.on("dblclick", this.handleDoubleClick.bind(this))
                }
                ,
                e.zoom = function (e) {
                    var t = this.getProjection().pixelCoordinates;
                    "in" === e ? this.animateTransformation(o.scaleAtPoint(h(t), 2)) : "out" === e ? this.animateTransformation(o.scaleAtPoint(h(t), .5)) : "default" === e && this.animateTransformation(this.getDefaultZoomTransform());
                    var n = this.grapher.getAudioTrace();
                    n && n.recomputePoints(),
                        r.alert(this.t("Graph zoom __action__", {
                            action: e
                        }))
                }
                ,
                e.getDefaultZoomTransform = function () {
                    var e = this.getProjection().viewport
                        , t = this.getDefaultViewport()
                        , n = this.getProjection().pixelCoordinates
                        , r = this.getProjection().mathCoordinates
                        , i = (e.xmax - e.xmin) / (t.xmax - t.xmin)
                        , s = (e.ymax - e.ymin) / (t.ymax - t.ymin)
                        , a = o.fromRects(r, n)
                        , c = new o.translate({
                            x: a.mapX(0),
                            y: a.mapY(0)
                        }, {
                                x: 0,
                                y: 0
                            })
                        , l = new o.scale(i, s)
                        , u = new o.translate({
                            x: 0,
                            y: 0
                        }, {
                                x: n.right / 2,
                                y: n.bottom / 2
                            });
                    return u.compose(l.compose(c))
                }
                ,
                e.isZoomRestored = function () {
                    var e = this.getProjection()
                        , t = e.viewport
                        , n = this.getDefaultViewport()
                        , r = .05;
                    return e.settings.squareAxes && Math.abs((t.xmin - n.xmin) / t.xmin) < r && Math.abs((t.xmax - n.xmax) / t.xmax) < r && Math.abs((t.ymin - n.ymin) / t.ymin) < r && Math.abs((t.ymax - n.ymax) / t.ymax) < r
                }
                ,
                e.getViewportForScreen = function (e, t) {
                    var n = this.getProjection()
                        , r = n.settings;
                    if (!r.squareAxes)
                        return e;
                    var i = r.lastChangedAxis;
                    return "y" == i ? e.squareXAxis(t) : e.squareYAxis(t)
                }
                ,
                e.enforceSquareAxes = function () {
                    var e = this.getProjection();
                    this.setViewport(this.getViewportForScreen(e.viewport, e.screen))
                }
        });
        return d
    }),
    define("lib/conditional_blur", ["require", "exports", "touchtracking", "jquery"], function (e, t, n, r) {
        "use strict";
        function i() {
            var e = r(document.activeElement);
            n.elIsFocusable(e) && r(document.activeElement).blur()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = i
    }),
    define("graphing/poicontroller", ["require", "jquery", "math/distance", "lib/rounding", "graphing/graphmode", "lib/conditional_blur", "keys"], function (e) {
        function t(e, t) {
            this.manager = e,
                this.controller = e.controller,
                this.graphSettings = t,
                this.$ = this.manager.$,
                this.__id = c++ ,
                this.graphSettings.config.graphpaper && !this.graphSettings.config.disableMouseInteractions && (this.addTouchEventHandlers(),
                    this.addHoverEventHandler(),
                    this.addKeydownEventHandler())
        }
        var n = e("jquery")
            , r = e("math/distance")
            , i = e("lib/rounding")
            , o = e("graphing/graphmode")
            , s = e("lib/conditional_blur").default
            , a = e("keys")
            , c = 0;
        return t.prototype.remove = function () {
            this.removeAllGlobalMouseListeners()
        }
            ,
            t.prototype.addGlobalMouseListener = function (e, t) {
                for (var r = e.split(" "), i = 0; i < r.length; i++)
                    n(document).on(r[i] + ".dcg-poiController-" + this.__id, t)
            }
            ,
            t.prototype.removeAllGlobalMouseListeners = function () {
                n(document).off(".dcg-poiController-" + this.__id)
            }
            ,
            t.prototype.getToleranceByDevice = function (e) {
                return "touch" === e ? 20 : 10
            }
            ,
            t.prototype.addHoverEventHandler = function () {
                this.$.on("dcg-tapmove", function (e) {
                    if ("touch" !== e.device) {
                        var t = n(document.elementFromPoint(e.clientX, e.clientY)).closest(".dcg-grapher").length
                            , r = this.getMouseRelativeToGrapher(e)
                            , i = this.getToleranceByDevice(e.device)
                            , o = t ? this.getPOIUnderPoint(r, i) : null
                            , s = null;
                        o && o.isMovable() && (s = o.getMovablePoint().id);
                        var a = o && !o.isAttachedToPlottedPoint() ? o : null;
                        if (a !== this.manager.poiLabelsLayer.getHoveredPOI()) {
                            if (this.graphSettings.config.trace === !1)
                                return;
                            this.manager.poiLabelsLayer.setHoveredPOI(a),
                                this.manager.redrawAllLayers()
                        }
                        s !== this.manager.movablePointsLayer.hoveredPointId && (this.manager.movablePointsLayer.hoveredPointId = s,
                            this.manager.redrawAllLayers())
                    }
                }
                    .bind(this))
            }
            ,
            t.prototype.addTouchEventHandlers = function () {
                this.$.on("dblclick", function (e) {
                    var t = this.getMouseRelativeToGrapher(e)
                        , n = this.getToleranceByDevice(e.device);
                    (this.getPOIUnderPoint(t, n) || this.getBranchInfoUnderPoint(t, n)) && (e.preventDefault(),
                        e.handle())
                }
                    .bind(this)),
                    this.$.css("touch-action", "none"),
                    this.$.on("dcg-tapstart", function (e) {
                        var t = this.getMouseRelativeToGrapher(e)
                            , n = this.getToleranceByDevice(e.device);
                        s();
                        var r = this.getPOIUnderPoint(t, n);
                        if ((!r || !r.isMovable() && !r.isBareLabel()) && this.togglePOIUnderPoint(t, n))
                            return e.handle(),
                                void e.handle("do-not-clear-poi-labels");
                        if (r && (r.isMovable() && (this.controller.dispatch({
                            type: "start-moving-point",
                            pointInfo: r.getMovablePoint()
                        }),
                            this.startMovingPoint(r),
                            e.handle()),
                            !r.isBareLabel()))
                            return void e.handle("do-not-clear-poi-labels");
                        var i = this.getBranchInfoUnderPoint(t, n);
                        if (this.graphSettings.config.onlyTraceSelected) {
                            if (i && i.sketch && i.sketch.selected)
                                return this.startTracingBranch(i, t),
                                    e.handle(),
                                    void e.handle("do-not-clear-poi-labels")
                        } else if (i) {
                            if (this.controller.dispatch({
                                type: "set-selected-id",
                                id: i.id
                            }),
                                this.graphSettings.config.trace === !1)
                                return;
                            return this.startTracingBranch(i, t),
                                e.handle(),
                                void e.handle("do-not-clear-poi-labels")
                        }
                        i || this.getImgUnderMouse(t, n) || this.controller.dispatch({
                            type: "set-none-selected"
                        });
                        var o = this;
                        this.addGlobalMouseListener("dcg-tapmove", function () {
                            o.removeAllGlobalMouseListeners()
                        }),
                            this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", function (e) {
                                o.removeAllGlobalMouseListeners();
                                var r = o.getBranchInfoUnderPoint(t, n);
                                if (r && r.sketch && !r.sketch.selected)
                                    return void this.controller.dispatch({
                                        type: "set-selected-id",
                                        id: r.id
                                    });
                                var i = o.getImgUnderMouse(t, n);
                                return i ? void this.controller.dispatch({
                                    type: "set-selected-id",
                                    id: i.id
                                }) : void 0
                            }
                                .bind(this))
                    }
                        .bind(this))
            }
            ,
            t.prototype.addKeydownEventHandler = function () {
                this.$.on("keydown", function (e) {
                    if (n(document.activeElement).hasClass("dcg-movable-point")) {
                        var t = n(document.activeElement).data("movablePoint");
                        if (t) {
                            var r, i = this.getElementRelativeToGrapher(e.target), o = 0, s = 0, c = e.shiftKey ? 10 : 2, l = e.shiftKey ? "big" : "";
                            if (a.lookup(e) === a.UP ? (r = "y",
                                s -= c,
                                l += "up") : a.lookup(e) === a.DOWN ? (r = "y",
                                    s += c,
                                    l += "down") : a.lookup(e) === a.LEFT ? (r = "x",
                                        o -= c,
                                        l += "down") : a.lookup(e) === a.RIGHT && (r = "x",
                                            o += c,
                                            l += "up"),
                                0 !== o || 0 !== s) {
                                e.preventDefault(),
                                    e.stopPropagation();
                                var u, d = {
                                    x: i.x + o,
                                    y: i.y + s
                                }, p = this.manager.getProjection();
                                "x" === r ? u = [l, ""] : "y" === r && (u = ["", l]),
                                    this.controller.dispatch({
                                        type: "on-move-point",
                                        pointInfo: t,
                                        screenPt: d,
                                        projection: p,
                                        keyboardDirection: u
                                    })
                            }
                        }
                    }
                }
                    .bind(this))
            }
            ,
            t.prototype.getMouseRelativeToGrapher = function (e) {
                var t = this.$[0].getBoundingClientRect()
                    , n = e.touches ? e.touches[0] : e
                    , r = this.manager.appliedScaling
                    , i = isNaN(r.x) ? 1 : r.x
                    , o = isNaN(r.y) ? 1 : r.y
                    , s = (n.clientX - t.left) / i
                    , a = (n.clientY - t.top) / o;
                return {
                    x: s,
                    y: a
                }
            }
            ,
            t.prototype.getElementRelativeToGrapher = function (e) {
                var t = this.pageOffset || this.$.offset()
                    , n = this.manager.appliedScaling
                    , r = isNaN(n.x) ? 1 : n.x
                    , i = isNaN(n.y) ? 1 : n.y
                    , o = e.getBoundingClientRect()
                    , s = (o.left - t.left) / r
                    , a = (o.top - t.top) / i;
                return {
                    x: s,
                    y: a
                }
            }
            ,
            t.prototype._getClosestPoint = function (e, t, n) {
                for (var i = n, o = null, s = this.manager.getProjection(), a = 0; a < e.length; a++) {
                    var c = e[a]
                        , l = s.map_pt(c)
                        , u = r.hypot(l.x - t.x, l.y - t.y);
                    u < i && (i = u,
                        o = c)
                }
                return o
            }
            ,
            t.prototype.getPOIUnderPoint = function (e, t) {
                for (var n = [], r = [], i = [], o = {}, s = this.manager.__sketchOrder, a = s.length - 1; a >= 0; a--) {
                    var c = s[a];
                    o[c] = a
                }
                var l = this.getIndexOfForegroundImageUnderMouse(e, t);
                return this.manager.poiDotsLayer.getDrawnPOI().forEach(function (e) {
                    e.isMovable() ? n.push(e) : e.isAttachedToPlottedPoint() ? (e.sketch.showHighlight || o[e.sketch.id] > l) && r.push(e) : i.push(e)
                }),
                    this._getClosestPoint(n, e, t) || this._getClosestPoint(i, e, t) || this._getClosestPoint(r, e, t)
            }
            ,
            t.prototype.clearOpenedPOI = function () {
                this.manager.poiLabelsLayer.clearOpenedPOI(),
                    this.manager.redrawAllLayers()
            }
            ,
            t.prototype.togglePOIUnderPoint = function (e, t) {
                if (this.graphSettings.config.trace !== !1) {
                    var n = this.getPOIUnderPoint(e, t);
                    return !!n && (this.manager.poiLabelsLayer.isOpenPOI(n) ? (this.manager.poiLabelsLayer.closePOI(n),
                        this.manager.poiLabelsLayer.setHoveredPOI(null)) : (this.manager.poiLabelsLayer.openPOI(n),
                            this.speakPoint(n)),
                        this.manager.redrawAllLayers(),
                        !0)
                }
            }
            ,
            t.prototype.getIndexOfForegroundImageUnderMouse = function (e, t) {
                var n = this.getImgUnderMouse(e, t);
                return n && n.img && n.img.foreground ? n.index : -1
            }
            ,
            t.prototype.getImgUnderMouse = function (e, t) {
                for (var n = this.manager.getProjection(), r = n.reverse_map_pt(e), i = null, o = function (e, t, n, r) {
                    return e < t + .5 * Math.abs(n) + r && e > t - .5 * Math.abs(n) + r
                }, s = this.manager.__sketchOrder, a = s.length - 1; a >= 0; a--) {
                    var c = s[a]
                        , l = this.manager.graphImages[c];
                    if (l && l.computed_x && l.computed_y && l.computed_width && l.computed_height && !l.hidden && !this.controller.isItemSecret(l.id) && (l.foreground || !i)) {
                        for (var u = !1, d = 0; d < l.computed_x.length; d++) {
                            var p = l.computed_x[d]
                                , h = l.computed_y[d]
                                , f = l.computed_radian_angle[d]
                                , m = p + Math.cos(f) * (r.x - p) - Math.sin(f) * (r.y - h)
                                , g = h + Math.sin(f) * (r.x - p) + Math.cos(f) * (r.y - h);
                            if (o(m, l.computed_x[d], l.computed_width[d], 0) && o(g, l.computed_y[d], l.computed_height[d], 0)) {
                                u = !0;
                                break
                            }
                        }
                        if (u && (i = {
                            id: c,
                            img: l,
                            index: a
                        },
                            l.foreground))
                            return i
                    }
                }
                return i
            }
            ,
            t.prototype.getBranchInfoUnderPoint = function (e, n) {
                for (var r = null, i = n, o = this.manager.getProjection(), s = o.reverse_map_pt(e), a = this.getIndexOfForegroundImageUnderMouse(e, n), c = this.manager.__sketchOrder, l = c.length - 1; l >= 0; l--) {
                    var u = c[l]
                        , d = this.manager.graphSketches[u];
                    if (d && d.visible) {
                        var p = d.branches;
                        if (p && p.length && (d.showHighlight || !(l < a)))
                            for (var h = 0; h < p.length; h++) {
                                var f = t.calculateDistanceFromBranch(p[h], s, o);
                                f < i && (i = f,
                                    r = {
                                        id: u,
                                        branch: h,
                                        sketch: d
                                    })
                            }
                    }
                }
                return r
            }
            ,
            t.calculateDistanceFromBranch = function (e, n, r) {
                var i = t.getBranchesDistanceInfo(e, n, r);
                return i ? i.minDistance : 1 / 0
            }
            ,
            t.getBranchesDistanceInfo = function (e, t, n) {
                var i = n.screen.width / (n.viewport.xmax - n.viewport.xmin)
                    , s = n.screen.height / (n.viewport.ymax - n.viewport.ymin)
                    , a = t.x
                    , c = t.y;
                switch (e.graphMode) {
                    case o.Y:
                        break;
                    case o.X:
                        var l = a;
                        a = c,
                            c = l,
                            l = i,
                            i = s,
                            s = l;
                        break;
                    default:
                        return null
                }
                for (var u, d, p = 1 / 0, h = 1 / 0, f = 0; f < e.segments.length; f++)
                    for (var m = e.segments[f], g = 0; g < m.length - 3; g += 2) {
                        var y = m[g]
                            , v = m[g + 1]
                            , b = m[g + 2]
                            , x = m[g + 3]
                            , w = r.closestPointOnSegment(0, 0, (y - a) * i, (v - c) * s, (b - a) * i, (x - c) * s)
                            , E = r.hypot(w[0], w[1]);
                        w[0] < 0 ? E < p && (p = E,
                            u = w) : E < h && (h = E,
                                d = w)
                    }
                var _ = p < h ? u : d;
                if (!_)
                    return null;
                var S = _[0] / i + a
                    , k = _[1] / s + c;
                return {
                    closestPoint: {
                        x: e.graphMode === o.Y ? S : k,
                        y: e.graphMode === o.Y ? k : S
                    },
                    minDistance: Math.min(p, h),
                    secondDistance: Math.max(p, h)
                }
            }
            ,
            t.getBranchesTracePoint = function (e, n, r) {
                if (e && e.compiled && e.compiled.fn) {
                    var s = e.compiled.fn
                        , a = r.screen.width / (r.viewport.xmax - r.viewport.xmin)
                        , c = r.screen.height / (r.viewport.ymax - r.viewport.ymin)
                        , l = this.getBranchesDistanceInfo(e, n, r);
                    if (!l)
                        return null;
                    var u = l.minDistance / l.secondDistance;
                    u *= u;
                    var d = e.graphMode === o.Y ? "x" : "y"
                        , p = l.closestPoint[d] * (1 - u) + n[d] * u
                        , h = 1 / (2 * a)
                        , f = 1 / (2 * c)
                        , m = s(p - h)
                        , g = s(p)
                        , y = s(p + h)
                        , v = h * Math.min(1, f / Math.abs(m - g))
                        , b = h * Math.min(1, f / Math.abs(y - g));
                    isFinite(v) || (v = h),
                        isFinite(b) || (b = h),
                        p = i.shortestDecimalBetween(p - v, p + b);
                    var x = t.fillHole(s, p, a, c, n.x, n.y);
                    return {
                        x: e.graphMode === o.Y ? p : x,
                        y: e.graphMode === o.Y ? x : p
                    }
                }
            }
            ,
            t.prototype.startMovingPoint = function (e) {
                var t = !1;
                this.manager.movablePointsLayer.pressedPointId = e.isMovable() ? e.getMovablePoint().id : null,
                    this.manager.redrawAllLayers();
                var n = null
                    , r = function () {
                        if (n) {
                            t = !0;
                            var r = this.manager.getProjection()
                                , i = this.getMouseRelativeToGrapher(n);
                            n = null,
                                this.controller.dispatch({
                                    type: "on-move-point",
                                    pointInfo: e.getMovablePoint(),
                                    screenPt: i,
                                    projection: r
                                })
                        }
                    }
                        .bind(this);
                this.manager.registerMovablePointListener(r),
                    this.addGlobalMouseListener("dcg-tapmove", function (e) {
                        n = e
                    }),
                    this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", function (n) {
                        if (r(),
                            this.manager.deregisterMovablePointListener(),
                            this.removeAllGlobalMouseListeners(),
                            this.manager.movablePointsLayer.pressedPointId = null,
                            this.manager.redrawAllLayers(),
                            this.controller.dispatch({
                                type: "stop-moving-point",
                                pointInfo: e.getMovablePoint()
                            }),
                            !t) {
                            var i = this.manager.getProjection()
                                , o = this.getToleranceByDevice(n.device)
                                , s = i.map_pt(e);
                            this.togglePOIUnderPoint(s, o)
                        }
                    }
                        .bind(this))
            }
            ,
            t.prototype.startTracingBranch = function (e, n) {
                this.manager.markLabelsDirty(),
                    this.last_screen_pt = n;
                var r = this.manager.getProjection()
                    , i = r.reverse_map_pt(n)
                    , o = e.sketch
                    , s = o.branches[e.branch]
                    , a = t.getBranchesTracePoint(s, i, r);
                a && this.speakPoint(a),
                    this.manager.traceLayer.traceInfo = {
                        pt: a,
                        branchInfo: e
                    },
                    this.manager.redrawAllLayers(),
                    this.addGlobalMouseListener("dcg-tapmove", this.handleTraceUpdate.bind(this)),
                    this.addGlobalMouseListener("dcg-tapend dcg-tapcancel", this.stopTracingBranch.bind(this))
            }
            ,
            t.prototype.stopTracingBranch = function (e) {
                this.manager.markLabelsDirty();
                var t = this.manager.poiLabelsLayer.getHoveredPOI();
                t && !this.manager.poiLabelsLayer.isOpenPOI(t) && (this.manager.poiLabelsLayer.openPOI(t),
                    this.speakPoint(t),
                    this.manager.redrawAllLayers()),
                    this.last_screen_pt = null,
                    this.manager.traceLayer.traceInfo = null,
                    this.manager.redrawAllLayers(),
                    this.removeAllGlobalMouseListeners()
            }
            ,
            t.prototype.handleTraceUpdate = function (e) {
                if (this.manager.traceLayer.traceInfo) {
                    var n, r = this.manager.getProjection();
                    if (e)
                        n = this.getMouseRelativeToGrapher(e),
                            this.last_screen_pt = n,
                            this.manager.markLabelsDirty();
                    else {
                        if (!this.last_screen_pt)
                            return;
                        n = this.last_screen_pt
                    }
                    var i = r.reverse_map_pt(n)
                        , o = 1 / 0
                        , s = -1
                        , a = this.manager.traceLayer.traceInfo
                        , c = this.manager.graphSketches[a.branchInfo.sketch.id];
                    if (c) {
                        a.branchInfo.sketch = c;
                        for (var l = a.branchInfo.sketch.branches, u = 0; u < l.length; u++) {
                            var d = t.calculateDistanceFromBranch(l[u], i, r);
                            d < o && (s = u,
                                o = d)
                        }
                        var p = l[s]
                            , h = p ? t.getBranchesTracePoint(p, i, r) : null;
                        h && this.speakPoint(h),
                            this.manager.traceLayer.traceInfo.branchInfo.branch = s,
                            this.manager.traceLayer.traceInfo.pt = h,
                            this.manager.redrawAllLayers()
                    }
                }
            }
            ,
            t.prototype.speakPoint = function (e) {
                var t = this.manager.getAudioTrace();
                t && e && t.queueCoordinates(e, void 0, !0)
            }
            ,
            t.fillHole = function (e, t, n, i, o, s) {
                var a = e(t);
                if (isFinite(a))
                    return a;
                var c = t - 1e-11
                    , l = t + 1e-11
                    , u = e(c)
                    , d = e(l);
                if (isNaN(u) && isNaN(d))
                    return NaN;
                if (isNaN(u))
                    return d;
                if (isNaN(d))
                    return u;
                var p = (o - c) * n
                    , h = (o - l) * n
                    , f = (s - u) * i
                    , m = (s - d) * i;
                return r.hypot(p, f) < r.hypot(h, m) ? u : d
            }
            ,
            t
    }),
    define("graphing/audiographnavigator", ["require", "underscore", "pjs", "lib/aria", "graphing/graphmode", "./label", "i18n", "math/poi"], function (e) {
        var t = e("underscore")
            , n = e("pjs")
            , r = e("lib/aria")
            , i = e("graphing/graphmode")
            , o = e("./label")
            , s = e("i18n")
            , a = e("math/poi").default
            , c = n(function (e) {
                e.init = function (e, t, n) {
                    this.grapher = t,
                        this.controller = this.grapher.controller,
                        this.tonegen = n,
                        this.tonegen.audioPointMove = this.drawTrace.bind(this),
                        this.tonegen.audioPointReset = this.resetTracePoint.bind(this),
                        this.audiograph = e,
                        this.reset()
                }
                    ,
                    e.reset = function () {
                        this.currentPoint = null,
                            this.branch = 0,
                            this.pois = [],
                            this.independent = 0,
                            this.xmid = 0,
                            this.xstep = 0,
                            this.ymid = 0,
                            this.ystep = 0
                    }
                    ,
                    e.t = function (e, t) {
                        return s.t(e, t, this.grapher.settings.language)
                    }
                    ,
                    e.getBranchPoints = function (e) {
                        var t = [];
                        if (!isNaN(e) && e >= 0)
                            for (var n = this.getPoints(), r = 0; r < n.length; r++) {
                                var i = n[r];
                                i.hasOwnProperty("branch") && i.branch === e && t.push(i)
                            }
                        return t
                    }
                    ,
                    e.resetTracePoint = function () {
                        var e = this.getCurrentPoint();
                        this.drawTrace(e)
                    }
                    ,
                    e.drawTrace = function (e) {
                        var t = this.getCurrentSketch();
                        if (e && t) {
                            var n = {
                                x: e.x,
                                y: e.y
                            };
                            this.grapher.traceLayer.traceInfo = {
                                branchInfo: {
                                    branch: e.branch,
                                    id: t.id,
                                    sketch: t
                                },
                                pt: n
                            },
                                this.grapher.redrawAllLayers()
                        }
                    }
                    ,
                    e.moveToOrigin = function () {
                        var e = this.getCurrentSketch();
                        if (e) {
                            var t = e.branches[0].graphMode;
                            t === i.Y || t === i.POLAR ? this.setIndependent("x", 0) : t === i.X && this.setIndependent("y", 0)
                        }
                    }
                    ,
                    e.getCurrentSketch = function () {
                        var e = this.controller.getSelectedItem();
                        return e ? this.grapher.getGraphSketch(e.id) : null
                    }
                    ,
                    e.getFirstTraceableSketch = function (e) {
                        for (var t = null, n = this.controller.getItemCount(), r = 0; r < n; r++) {
                            var i = this.controller.getItemModelByIndex(r);
                            if (this.canTrace(i)) {
                                t = this.grapher.getGraphSketch(i.id),
                                    e && e.selectAssociatedExpression && this.controller.dispatch({
                                        type: "set-selected-index",
                                        index: r
                                    });
                                break
                            }
                        }
                        return t
                    }
                    ,
                    e.canTrace = function (e) {
                        if (e && !e.hidden && e.formula && !e.formula.error) {
                            var t = this.grapher.getGraphSketch(e.id);
                            if (t) {
                                var n = t.branches[0].graphMode;
                                return n === i.X || n === i.Y
                            }
                        }
                        return !1
                    }
                    ,
                    e.computeStepSizes = function () {
                        var e = this.grapher.getProjection().viewport;
                        if (e) {
                            this.viewport = e;
                            var t = e.xmin
                                , n = e.xmax;
                            this.xmid = (t + n) / 2,
                                this.xstep = Math.abs(n - t) / 100,
                                this.xscale = n - t;
                            var r = e.ymin
                                , o = e.ymax;
                            this.ymid = (r + o) / 2,
                                this.ystep = Math.abs(o - r) / 100,
                                this.yscale = o - r,
                                this.tonegen.setMinMax(t, n, r, o);
                            var s = this.getCurrentSketch();
                            if (s) {
                                var a = s.branches[0].graphMode;
                                a === i.Y || a === i.POLAR ? this.independent < t ? this.independent = t : this.independent > n && (this.independent = n) : a === i.X && (this.independent < r ? this.independent = r : this.independent > o && (this.independent = o))
                            }
                        }
                    }
                    ,
                    e.getPoint = function (e, t) {
                        var n = null
                            , r = this.getCurrentSketch();
                        if (r) {
                            var o, s, a, c, l, u = null;
                            r.branches[e].compiled && (s = r.branches[e].compiled.fn,
                                o = r.branches[e].graphMode,
                                o === i.Y ? (u = this.getInterveningPOIs(t, t + this.xstep, e, o)[0],
                                    u && u.x === t && u.branch === e ? (isNaN(u.y) || !isNaN(u.y) && (u.y < this.viewport.ymin || this.viewport.ymax < u.y)) && (u.y = void 0) : (u = null,
                                        l = s(t),
                                        (isNaN(l) || !isNaN(l) && (l < this.viewport.ymin || this.viewport.ymax < l)) && (l = void 0)),
                                    n = u ? {
                                        x: u.x,
                                        y: u.y,
                                        type: u.type,
                                        typeChain: u.typeChain,
                                        branch: u.branch,
                                        graphMode: o,
                                        intersects: u.intersects
                                    } : {
                                            x: t,
                                            y: l,
                                            branch: e,
                                            graphMode: o
                                        }) : o === i.X ? (u = this.getInterveningPOIs(t, t + this.ystep, e, o)[0],
                                            u && u.y === t && u.branch === e ? (isNaN(u.x) || !isNaN(u.x) && (u.x < this.viewport.xmin || this.viewport.xmax < u.x)) && (u.x = void 0) : (u = null,
                                                l = s(t),
                                                (isNaN(l) || !isNaN(l) && (l < this.viewport.xmin || this.viewport.xmax < l)) && (l = void 0)),
                                            n = u ? {
                                                x: u.x,
                                                y: u.y,
                                                type: u.type,
                                                typeChain: u.typeChain,
                                                branch: u.branch,
                                                graphMode: o,
                                                intersects: u.intersects
                                            } : {
                                                    y: t,
                                                    x: l,
                                                    branch: e,
                                                    graphMode: o
                                                }) : o === i.POLAR && (c = t,
                                                    a = s(t),
                                                    n = {
                                                        x: a * Math.cos(c),
                                                        y: a * Math.sin(c),
                                                        branch: e,
                                                        graphMode: o
                                                    }))
                        }
                        return n
                    }
                    ,
                    e.getPoints = function () {
                        var e = []
                            , t = this.getCurrentSketch();
                        if (t) {
                            var n, r, o, s, a, c = t.branches[0].graphMode;
                            for (c === i.Y || c === i.POLAR ? (n = this.viewport.xmin,
                                r = this.viewport.xmax,
                                o = this.xstep) : c === i.X && (n = this.viewport.ymin,
                                    r = this.viewport.ymax,
                                    o = this.ystep),
                                s = 0; s < t.branches.length; s++)
                                for (a = n; a <= r; a += o) {
                                    var l = this.getInterveningPOIs(a, a + o, s, c)[0];
                                    l ? e.push(l) : e.push(this.getPoint(s, a))
                                }
                        }
                        return e
                    }
                    ,
                    e.getCurrentPoint = function () {
                        return this.currentPoint || this.updateCurrentPoint(),
                            this.currentPoint
                    }
                    ,
                    e.updateCurrentPoint = function (e) {
                        this.currentPoint = e || this.getPoint(this.branch, this.independent)
                    }
                    ,
                    e.prevPoint = function () {
                        this.moveToPoint(-1)
                    }
                    ,
                    e.nextPoint = function () {
                        this.moveToPoint(1)
                    }
                    ,
                    e.firstPoint = function () {
                        var e = this.getCurrentSketch();
                        if (e) {
                            var t = e.branches[0].graphMode;
                            t === i.Y || t === i.POLAR ? this.independent = this.viewport.xmin : t === i.X && (this.independent = this.viewport.ymin),
                                this.branch = 0,
                                this.updateCurrentPoint()
                        }
                    }
                    ,
                    e.lastPoint = function () {
                        var e = this.getCurrentSketch();
                        if (e) {
                            var t = e.branches[0].graphMode;
                            t === i.Y || t === i.POLAR ? this.independent = this.viewport.xmax : t === i.X && (this.independent = this.viewport.ymax),
                                this.branch = e.branches.length - 1,
                                this.updateCurrentPoint()
                        }
                    }
                    ,
                    e.moveToPoint = function (e) {
                        var t = this.getCurrentSketch();
                        if (t) {
                            var n, o, s, a = t.branches.length - 1, c = t.branches[0].graphMode;
                            c === i.Y || c === i.POLAR ? (n = this.viewport.xmin,
                                o = this.viewport.xmax,
                                s = this.xstep) : c === i.X && (n = this.viewport.ymin,
                                    o = this.viewport.ymax,
                                    s = this.ystep);
                            var l, u, d, p, h, f, m = (o - n) % s, g = this.independent, y = this.branch, v = this.getCurrentPoint(), b = !1;
                            do {
                                for (l = g + e * (s - e * (g % m)),
                                    (e === -1 && l < n || 1 === e && l > o) && (a > 0 && (d = y + e,
                                        e === -1 ? (d = Math.max(d, 0),
                                            d !== y && (y = d,
                                                l = o)) : (d = Math.min(d, a),
                                                    d !== y && (y = d,
                                                        l = n))),
                                        l <= n && 0 === y ? (l = n,
                                            r.queue(this.t("First point"))) : l >= o && y === a && (l = o,
                                                r.queue(this.t("Last point")))),
                                    p = this.getInterveningPOIs(g, l, y, c),
                                    h = 0; h < p.length; h++)
                                    if (f = p[h],
                                        f && (c === i.Y && f.x !== v.x || c === i.X && f.y !== v.y || f.branch !== v.branch)) {
                                        u = f,
                                            b = !0;
                                        break
                                    }
                                b || (u = this.getPoint(y, l)),
                                    g = l
                            } while (v.x === u.x && v.y === u.y && v.type === u.type && v.branch === u.branch && l !== n && l !== o); c === i.Y || c === i.POLAR ? this.independent = u.x : c === i.X && (this.independent = u.y),
                                this.branch = y,
                                this.updateCurrentPoint()
                        }
                    }
                    ,
                    e.prevPOI = function () {
                        this.moveToPOI(-1)
                    }
                    ,
                    e.nextPOI = function () {
                        this.moveToPOI(1)
                    }
                    ,
                    e.getSortedPOI = function () {
                        return this.pois && 0 !== this.pois.length || this.updatePOI(),
                            this.pois
                    }
                    ,
                    e.updatePOI = function () {
                        var e, n = [], r = this.getCurrentSketch();
                        r && (e = r.branches[0].graphMode,
                            n = r.getPOI(),
                            e === i.Y || e === i.POLAR ? n = t.sortBy(t.sortBy(n, "x"), "branch") : e === i.X && (n = t.sortBy(t.sortBy(n, "y"), "branch"))),
                            this.pois = this.removeDuplicates(n, e)
                    }
                    ,
                    e.removeDuplicates = function (e, t) {
                        var n, r, i, s, c, l, u, d, p = 0;
                        if (e.length > 0)
                            do
                                n = o.value(e[p].x).value,
                                    r = o.value(e[p].y).value,
                                    i = e[p].type,
                                    s = e[p].branch,
                                    e[p].typeChain || (e[p].typeChain = [i]),
                                    p + 1 < e.length ? (c = o.value(e[p + 1].x).value,
                                        l = o.value(e[p + 1].y).value,
                                        u = e[p + 1].type,
                                        d = e[p + 1].branch) : c = l = u = d = void 0,
                                    n === c && r === l && s === d ? (e[p].typeChain.indexOf(u) === -1 && (e[p].typeChain.push(u),
                                        u === a.INTERSECTION && (e[p].intersects = e[p + 1].intersects)),
                                        e.splice(p + 1, 1)) : p++;
                            while (p < e.length); return e
                    }
                    ,
                    e.getInterveningPOIs = function (e, t, n, r) {
                        for (var o, s = [], a = this.getSortedPOI(), c = 0; c < a.length; c++)
                            r === i.Y || r === i.POLAR ? o = a[c].x : r === i.X && (o = a[c].y),
                                a[c].branch === n && (e <= o && o < t || t <= o && o < e) && s.push(a[c]);
                        return e > t ? s.reverse() : s
                    }
                    ,
                    e.setIndependent = function (e, t) {
                        for (var n = this.getPoints(), r = 0; r < n.length; r++) {
                            var i = n[r];
                            if (i.hasOwnProperty(e) && i[e] === t) {
                                if ("x" === e)
                                    return this.independent = i.x,
                                        void this.updateCurrentPoint();
                                if ("y" === e)
                                    return this.independent = i.y,
                                        void this.updateCurrentPoint()
                            }
                        }
                        "x" === e ? this.independent = this.xmid : "y" === e && (this.independent = this.ymid),
                            this.updateCurrentPoint(),
                            this.branch = 0
                    }
                    ,
                    e.moveToPOI = function (e) {
                        var t = this.getCurrentSketch();
                        if (t) {
                            var n, o, s, a, c, l, u, d, p, h = this.getCurrentPoint(), f = t.branches[0].graphMode, m = this.branch;
                            f === i.Y || f === i.POLAR ? (s = this.xstep,
                                n = 1 === e ? this.viewport.xmin : this.viewport.xmax,
                                o = 1 === e ? this.viewport.xmax : this.viewport.xmin,
                                a = (this.viewport.xmax - this.viewport.xmin) % this.xstep) : f === i.X && (s = this.ystep,
                                    n = 1 === e ? this.viewport.ymin : this.viewport.ymax,
                                    o = 1 === e ? this.viewport.ymax : this.viewport.ymin,
                                    a = (this.viewport.ymax - this.viewport.ymin) % this.ystep);
                            var g = !1;
                            c = this.independent;
                            do {
                                for (p = c + e * (s - e * (c % a)),
                                    u = this.getInterveningPOIs(c, p, m, f),
                                    l = 0; l < u.length; l++)
                                    if (d = u[l],
                                        d && (f === i.Y && d.x !== this.independent || f === i.X && d.y !== this.independent || d.branch !== h.branch)) {
                                        f === i.Y || f === i.POLAR ? this.independent = d.x : f === i.X && (this.independent = d.y),
                                            this.branch = d.branch,
                                            this.updateCurrentPoint(d),
                                            g = !0;
                                        break
                                    }
                                g || (c = p,
                                    (1 === e && c > o || e === -1 && c < o) && (c = n,
                                        m += e))
                            } while (!g && m >= 0 && m < t.branches.length && (1 === e && c <= o || e === -1 && c >= o)); g || r.queue(this.t("No more points of interest"))
                        }
                    }
                    ,
                    e.prevCurve = function () {
                        var e = this.controller.getSelectedItem();
                        if (e) {
                            var t = e.index
                                , n = this.controller.getItemModelByIndex(this.findPrevTraceableIndex(t));
                            n && this.controller.dispatch({
                                type: "set-selected-id",
                                id: n.id
                            }),
                                this.controller.getSelectedItem() !== e && this.audiograph.enterAudioTrace()
                        }
                    }
                    ,
                    e.nextCurve = function () {
                        var e = this.controller.getSelectedItem();
                        if (e) {
                            var t = e.index
                                , n = this.controller.getItemModelByIndex(this.findNextTraceableIndex(t));
                            n && this.controller.dispatch({
                                type: "set-selected-id",
                                id: n.id
                            }),
                                this.controller.getSelectedItem() !== e && this.audiograph.enterAudioTrace()
                        }
                    }
                    ,
                    e.findPrevTraceableIndex = function (e) {
                        var t;
                        do
                            e-- ,
                                t = this.controller.getItemModelByIndex(e);
                        while (t && !this.canTrace(t)); return t ? e : void 0
                    }
                    ,
                    e.findNextTraceableIndex = function (e) {
                        var t;
                        do
                            e++ ,
                                t = this.controller.getItemModelByIndex(e);
                        while (t && !this.canTrace(t)); return t ? e : void 0
                    }
            });
        return c
    }),
    function (e) {
        if ("object" == typeof exports && "undefined" != typeof module)
            module.exports = e();
        else if ("function" == typeof define && define.amd)
            define("vendor/bugsnag", [], e);
        else {
            var t;
            t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this,
                t.bugsnag = e()
        }
    }(function () {
        function e(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function t(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function n(e) {
            return null === e || "object" != typeof e || "function" == typeof e.toJSON && !e.toJSON.forceDecirc || i(e, "", [], null),
                JSON.stringify(e)
        }
        function r(e, t, n) {
            this.val = e,
                this.k = t,
                this.parent = n,
                this.count = 1
        }
        function i(e, t, n, o) {
            var s, a, c, l, u, d;
            if ("object" == typeof e && null !== e) {
                if (e instanceof r)
                    return void e.count++;
                if ("function" != typeof e.toJSON || e.toJSON.forceDecirc) {
                    if (o) {
                        for (l = 0,
                            u = !1,
                            d = n.length; l < d; l++)
                            if (n[l] === e) {
                                u = !0;
                                break
                            }
                        if (u)
                            return void (o[t] = new r(e, t, o))
                    }
                    n.push(e),
                        s = [];
                    for (var p in e)
                        Object.prototype.hasOwnProperty.call(e, p) && s.push(p);
                    for (a = s.length,
                        c = 0; c < a; c++)
                        t = s[c],
                            i(e[t], t, n, e);
                    n.pop()
                }
            }
        }
        function o(e) {
            switch (Object.prototype.toString.call(e)) {
                case "[object Error]":
                    return !0;
                case "[object Exception]":
                    return !0;
                case "[object DOMException]":
                    return !0;
                default:
                    return e instanceof Error
            }
        }
        function s(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function a(e) {
            var t = [e.tagName];
            if (e.id && t.push("#" + e.id),
                e.className && e.className.length && t.push("." + e.className.split(" ").join(".")),
                !document.querySelectorAll || !Array.prototype.indexOf)
                return t.join("");
            try {
                if (1 === document.querySelectorAll(t.join("")).length)
                    return t.join("")
            } catch (e) {
                return t.join("")
            }
            if (e.parentNode.childNodes.length > 1) {
                var n = Array.prototype.indexOf.call(e.parentNode.childNodes, e) + 1;
                t.push(":nth-child(" + n + ")")
            }
            return 1 === document.querySelectorAll(t.join("")).length ? t.join("") : e.parentNode ? a(e.parentNode) + " > " + t.join("") : t.join("")
        }
        function c(e, t) {
            var n = "(...)";
            return e && e.length <= t ? e : e.slice(0, t - n.length) + n
        }
        var l, u = function (e, t, n) {
            for (var r = n, i = 0, o = e.length; i < o; i++)
                r = t(r, e[i], i, e);
            return r
        }, d = function (e, t) {
            return u(e, function (e, n, r, i) {
                return t(n, r, i) ? e.concat(n) : e
            }, [])
        }, p = function (e, t) {
            return u(e, function (e, n, r, i) {
                return e.concat(t(n, r, i))
            }, [])
        }, h = function (e, t) {
            return u(e, function (e, n, r, i) {
                return e === !0 || n === t
            }, !1)
        }, f = !{
            toString: null
        }.propertyIsEnumerable("toString"), m = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"], g = function (e) {
            var t = []
                , n = void 0;
            for (n in e)
                Object.prototype.hasOwnProperty.call(e, n) && t.push(n);
            if (!f)
                return t;
            for (var r = 0, i = m.length; r < i; r++)
                Object.prototype.hasOwnProperty.call(e, m[r]) && t.push(m[r]);
            return t
        }, y = function (e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        }, v = function (e) {
            return e < 10 ? "0" + e : e
        }, b = function () {
            var e = new Date;
            return e.getUTCFullYear() + "-" + v(e.getUTCMonth() + 1) + "-" + v(e.getUTCDate()) + "T" + v(e.getUTCHours()) + ":" + v(e.getUTCMinutes()) + ":" + v(e.getUTCSeconds()) + "." + (e.getUTCMilliseconds() / 1e3).toFixed(3).slice(2, 5) + "Z"
        }, x = {
            map: p,
            reduce: u,
            filter: d,
            includes: h,
            keys: g,
            isArray: y,
            isoDate: b
        }, w = x.isoDate, E = function () {
            function t() {
                var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "[anonymous]"
                    , r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
                    , i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "manual"
                    , o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : w();
                e(this, t),
                    this.type = i,
                    this.name = n,
                    this.metaData = r,
                    this.timestamp = o
            }
            return t.prototype.toJSON = function () {
                return {
                    type: this.type,
                    name: this.name,
                    timestamp: this.timestamp,
                    metaData: this.metaData
                }
            }
                ,
                t
        }();
        E.prototype.toJSON.forceDecirc = !0;
        var _ = E
            , S = x.includes
            , k = function (e) {
                return S(["undefined", "number"], typeof e) && parseInt("" + e, 10) === e && e > 0
            }
            , M = {}
            , C = x.filter
            , I = x.reduce
            , T = x.keys
            , P = x.isArray;
        M.schema = {
            apiKey: {
                defaultValue: function () {
                    return null
                },
                message: "(string) apiKey is required",
                validate: function (e) {
                    return "string" == typeof e && e.length
                }
            },
            appVersion: {
                defaultValue: function () {
                    return null
                },
                message: "(string) appVersion should have a value if supplied",
                validate: function (e) {
                    return null === e || "string" == typeof e && e.length
                }
            },
            autoNotify: {
                defaultValue: function () {
                    return !0
                },
                message: "(boolean) autoNotify should be true or false",
                validate: function (e) {
                    return e === !0 || e === !1
                }
            },
            beforeSend: {
                defaultValue: function () {
                    return []
                },
                message: "(array[Function]) beforeSend should only contain functions",
                validate: function (e) {
                    return "function" == typeof e || P(e) && C(e, function (e) {
                        return "function" == typeof e
                    }).length === e.length
                }
            },
            endpoint: {
                defaultValue: function () {
                    return "//notify.bugsnag.com"
                },
                message: "(string) endpoint should be set",
                validate: function () {
                    return !0
                }
            },
            notifyReleaseStages: {
                defaultValue: function () {
                    return null
                },
                message: "(array[string]) notifyReleaseStages should only contain strings",
                validate: function (e) {
                    return null === e || P(e) && C(e, function (e) {
                        return "string" == typeof e
                    }).length === e.length
                }
            },
            releaseStage: {
                defaultValue: function () {
                    return "production"
                },
                message: "(string) releaseStage should be set",
                validate: function (e) {
                    return "string" == typeof e && e.length
                }
            },
            maxBreadcrumbs: {
                defaultValue: function () {
                    return 20
                },
                message: "(number) maxBreadcrumbs must be a number (40) if specified",
                validate: function (e) {
                    return 0 === e || k(e) && (void 0 === e || e <= 40)
                }
            },
            autoBreadcrumbs: {
                defaultValue: function () {
                    return !0
                },
                message: "(boolean) autoBreadcrumbs should be true or false",
                validate: function (e) {
                    return "boolean" == typeof e
                }
            }
        },
            M.mergeDefaults = function (e, t) {
                if (!e || !t)
                    throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");
                return I(T(t), function (n, r) {
                    return n[r] = void 0 !== e[r] ? e[r] : t[r].defaultValue(),
                        n
                }, {})
            }
            ,
            M.validate = function (e, t) {
                if (!e || !t)
                    throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");
                var n = I(T(t), function (n, r) {
                    return t[r].validate(e[r]) ? n : n.concat({
                        key: r,
                        message: t[r].message,
                        value: e[r]
                    })
                }, []);
                return {
                    valid: !n.length,
                    errors: n
                }
            }
            ;
        var A = function (e) {
            return !(!e || !e.stack && !e.stacktrace && !e["opera#sourceloc"])
        }
            , L = {};
        !function (e, t) {
            "use strict";
            "function" == typeof l && l.amd ? l("stackframe", [], t) : "object" == typeof L ? L = t() : e.StackFrame = t()
        }(this, function () {
            "use strict";
            function e(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            }
            function t(e) {
                return e.charAt(0).toUpperCase() + e.substring(1)
            }
            function n(e) {
                return function () {
                    return this[e]
                }
            }
            function r(e) {
                if (e instanceof Object)
                    for (var n = 0; n < c.length; n++)
                        e.hasOwnProperty(c[n]) && void 0 !== e[c[n]] && this["set" + t(c[n])](e[c[n]])
            }
            var i = ["isConstructor", "isEval", "isNative", "isToplevel"]
                , o = ["columnNumber", "lineNumber"]
                , s = ["fileName", "functionName", "source"]
                , a = ["args"]
                , c = i.concat(o, s, a);
            r.prototype = {
                getArgs: function () {
                    return this.args
                },
                setArgs: function (e) {
                    if ("[object Array]" !== Object.prototype.toString.call(e))
                        throw new TypeError("Args must be an Array");
                    this.args = e
                },
                getEvalOrigin: function () {
                    return this.evalOrigin
                },
                setEvalOrigin: function (e) {
                    if (e instanceof r)
                        this.evalOrigin = e;
                    else {
                        if (!(e instanceof Object))
                            throw new TypeError("Eval Origin must be an Object or StackFrame");
                        this.evalOrigin = new r(e)
                    }
                },
                toString: function () {
                    var t = this.getFunctionName() || "{anonymous}"
                        , n = "(" + (this.getArgs() || []).join(",") + ")"
                        , r = this.getFileName() ? "@" + this.getFileName() : ""
                        , i = e(this.getLineNumber()) ? ":" + this.getLineNumber() : ""
                        , o = e(this.getColumnNumber()) ? ":" + this.getColumnNumber() : "";
                    return t + n + r + i + o
                }
            };
            for (var l = 0; l < i.length; l++)
                r.prototype["get" + t(i[l])] = n(i[l]),
                    r.prototype["set" + t(i[l])] = function (e) {
                        return function (t) {
                            this[e] = Boolean(t)
                        }
                    }(i[l]);
            for (var u = 0; u < o.length; u++)
                r.prototype["get" + t(o[u])] = n(o[u]),
                    r.prototype["set" + t(o[u])] = function (t) {
                        return function (n) {
                            if (!e(n))
                                throw new TypeError(t + " must be a Number");
                            this[t] = Number(n)
                        }
                    }(o[u]);
            for (var d = 0; d < s.length; d++)
                r.prototype["get" + t(s[d])] = n(s[d]),
                    r.prototype["set" + t(s[d])] = function (e) {
                        return function (t) {
                            this[e] = String(t)
                        }
                    }(s[d]);
            return r
        });
        var O = {};
        !function (e, t) {
            "use strict";
            "function" == typeof l && l.amd ? l("error-stack-parser", ["stackframe"], t) : "object" == typeof O ? O = t(L) : e.ErrorStackParser = t(e.StackFrame)
        }(this, function (e) {
            "use strict";
            var t = /(^|@)\S+\:\d+/
                , n = /^\s*at .*(\S+\:\d+|\(native\))/m
                , r = /^(eval@)?(\[native code\])?$/;
            return {
                parse: function (e) {
                    if ("undefined" != typeof e.stacktrace || "undefined" != typeof e["opera#sourceloc"])
                        return this.parseOpera(e);
                    if (e.stack && e.stack.match(n))
                        return this.parseV8OrIE(e);
                    if (e.stack)
                        return this.parseFFOrSafari(e);
                    throw new Error("Cannot parse given Error object")
                },
                extractLocation: function (e) {
                    if (e.indexOf(":") === -1)
                        return [e];
                    var t = /(.+?)(?:\:(\d+))?(?:\:(\d+))?$/
                        , n = t.exec(e.replace(/[\(\)]/g, ""));
                    return [n[1], n[2] || void 0, n[3] || void 0]
                },
                parseV8OrIE: function (t) {
                    var r = t.stack.split("\n").filter(function (e) {
                        return !!e.match(n)
                    }, this);
                    return r.map(function (t) {
                        t.indexOf("(eval ") > -1 && (t = t.replace(/eval code/g, "eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g, ""));
                        var n = t.replace(/^\s+/, "").replace(/\(eval code/g, "(").split(/\s+/).slice(1)
                            , r = this.extractLocation(n.pop())
                            , i = n.join(" ") || void 0
                            , o = ["eval", "<anonymous>"].indexOf(r[0]) > -1 ? void 0 : r[0];
                        return new e({
                            functionName: i,
                            fileName: o,
                            lineNumber: r[1],
                            columnNumber: r[2],
                            source: t
                        })
                    }, this)
                },
                parseFFOrSafari: function (t) {
                    var n = t.stack.split("\n").filter(function (e) {
                        return !e.match(r)
                    }, this);
                    return n.map(function (t) {
                        if (t.indexOf(" > eval") > -1 && (t = t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g, ":$1")),
                            t.indexOf("@") === -1 && t.indexOf(":") === -1)
                            return new e({
                                functionName: t
                            });
                        var n = t.split("@")
                            , r = this.extractLocation(n.pop())
                            , i = n.join("@") || void 0;
                        return new e({
                            functionName: i,
                            fileName: r[0],
                            lineNumber: r[1],
                            columnNumber: r[2],
                            source: t
                        })
                    }, this)
                },
                parseOpera: function (e) {
                    return !e.stacktrace || e.message.indexOf("\n") > -1 && e.message.split("\n").length > e.stacktrace.split("\n").length ? this.parseOpera9(e) : e.stack ? this.parseOpera11(e) : this.parseOpera10(e)
                },
                parseOpera9: function (t) {
                    for (var n = /Line (\d+).*script (?:in )?(\S+)/i, r = t.message.split("\n"), i = [], o = 2, s = r.length; o < s; o += 2) {
                        var a = n.exec(r[o]);
                        a && i.push(new e({
                            fileName: a[2],
                            lineNumber: a[1],
                            source: r[o]
                        }))
                    }
                    return i
                },
                parseOpera10: function (t) {
                    for (var n = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i, r = t.stacktrace.split("\n"), i = [], o = 0, s = r.length; o < s; o += 2) {
                        var a = n.exec(r[o]);
                        a && i.push(new e({
                            functionName: a[3] || void 0,
                            fileName: a[2],
                            lineNumber: a[1],
                            source: r[o]
                        }))
                    }
                    return i
                },
                parseOpera11: function (n) {
                    var r = n.stack.split("\n").filter(function (e) {
                        return !!e.match(t) && !e.match(/^Error created at/)
                    }, this);
                    return r.map(function (t) {
                        var n, r = t.split("@"), i = this.extractLocation(r.pop()), o = r.shift() || "", s = o.replace(/<anonymous function(: (\w+))?>/, "$2").replace(/\([^\)]*\)/g, "") || void 0;
                        o.match(/\(([^\)]*)\)/) && (n = o.replace(/^[^\(]+\(([^\)]*)\)$/, "$1"));
                        var a = void 0 === n || "[arguments not available]" === n ? void 0 : n.split(",");
                        return new e({
                            functionName: s,
                            args: a,
                            fileName: i[0],
                            lineNumber: i[1],
                            columnNumber: i[2],
                            source: t
                        })
                    }, this)
                }
            }
        });
        var D = {};
        !function (e, t) {
            "use strict";
            "function" == typeof l && l.amd ? l("stack-generator", ["stackframe"], t) : "object" == typeof D ? D = t(L) : e.StackGenerator = t(e.StackFrame)
        }(this, function (e) {
            return {
                backtrace: function (t) {
                    var n = []
                        , r = 10;
                    "object" == typeof t && "number" == typeof t.maxStackSize && (r = t.maxStackSize);
                    for (var i = arguments.callee; i && n.length < r && i.arguments;) {
                        for (var o = new Array(i.arguments.length), s = 0; s < o.length; ++s)
                            o[s] = i.arguments[s];
                        /function(?:\s+([\w$]+))+\s*\(/.test(i.toString()) ? n.push(new e({
                            functionName: RegExp.$1 || void 0,
                            args: o
                        })) : n.push(new e({
                            args: o
                        }));
                        try {
                            i = i.caller
                        } catch (e) {
                            break
                        }
                    }
                    return n
                }
            }
        });
        var q = Object.assign || function (e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var r in n)
                    Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
            }
            return e
        }
            , N = x.reduce
            , F = x.filter
            , R = function () {
                function e(n, r) {
                    var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : []
                        , o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : V();
                    t(this, e),
                        this.__isBugsnagReport = !0,
                        this._ignored = !1,
                        this._handledState = o,
                        this.app = void 0,
                        this.apiKey = void 0,
                        this.breadcrumbs = [],
                        this.context = void 0,
                        this.device = void 0,
                        this.errorClass = U(n, "[no error class]"),
                        this.errorMessage = U(r, "[no error message]"),
                        this.groupingHash = void 0,
                        this.metaData = {},
                        this.request = void 0,
                        this.severity = this._handledState.severity,
                        this.stacktrace = N(i, function (e, t) {
                            var n = j(t);
                            try {
                                return "{}" === JSON.stringify(n) ? e : e.concat(n)
                            } catch (t) {
                                return e
                            }
                        }, []),
                        this.user = void 0
                }
                return e.prototype.ignore = function () {
                    this._ignored = !0
                }
                    ,
                    e.prototype.isIgnored = function () {
                        return this._ignored
                    }
                    ,
                    e.prototype.updateMetaData = function (e) {
                        var t;
                        if (!e)
                            return this;
                        var n = void 0;
                        return null === (arguments.length <= 1 ? void 0 : arguments[1]) ? this.removeMetaData(e) : null === (arguments.length <= 2 ? void 0 : arguments[2]) ? this.removeMetaData(e, arguments.length <= 1 ? void 0 : arguments[1], arguments.length <= 2 ? void 0 : arguments[2]) : ("object" == typeof (arguments.length <= 1 ? void 0 : arguments[1]) && (n = arguments.length <= 1 ? void 0 : arguments[1]),
                            "string" == typeof (arguments.length <= 1 ? void 0 : arguments[1]) && (t = {},
                                t[arguments.length <= 1 ? void 0 : arguments[1]] = arguments.length <= 2 ? void 0 : arguments[2],
                                n = t),
                            n ? (this.metaData[e] || (this.metaData[e] = {}),
                                this.metaData[e] = q({}, this.metaData[e], n),
                                this) : this)
                    }
                    ,
                    e.prototype.removeMetaData = function (e, t) {
                        return "string" != typeof e ? this : t ? this.metaData[e] ? (delete this.metaData[e][t],
                            this) : this : (delete this.metaData[e],
                                this)
                    }
                    ,
                    e.prototype.toJSON = function () {
                        return {
                            payloadVersion: "4",
                            exceptions: [{
                                errorClass: this.errorClass,
                                message: this.errorMessage,
                                stacktrace: this.stacktrace,
                                type: "browserjs"
                            }],
                            severity: this.severity,
                            unhandled: this._handledState.unhandled,
                            severityReason: this._handledState.severityReason,
                            app: this.app,
                            device: this.device,
                            breadcrumbs: this.breadcrumbs,
                            context: this.context,
                            user: this.user,
                            metaData: this.metaData,
                            groupingHash: this.groupingHash,
                            request: this.request
                        }
                    }
                    ,
                    e
            }();
        R.prototype.toJSON.forceDecirc = !0;
        var j = function (e) {
            var t = {
                file: e.fileName,
                method: B(e.functionName),
                lineNumber: e.lineNumber,
                columnNumber: e.columnNumber,
                code: void 0,
                inProject: void 0
            };
            return !t.lineNumber || t.file || t.method || (t.file = "global code"),
                t
        }
            , B = function (e) {
                return /^global code$/i.test(e) ? "global code" : e
            }
            , V = function () {
                return {
                    unhandled: !1,
                    severity: "warning",
                    severityReason: {
                        type: "handledException"
                    }
                }
            }
            , U = function (e, t) {
                return "string" == typeof e && e ? e : t
            };
        R.getStacktrace = function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0
                , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
            return A(e) ? O.parse(e).slice(t) : F(D.backtrace(), function (e) {
                return (e.functionName || "").indexOf("StackGenerator$$") === -1
            }).slice(1 + n)
        }
            ,
            R.ensureReport = function (e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0
                    , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                if (e.__isBugsnagReport)
                    return e;
                try {
                    var r = R.getStacktrace(e, t, 1 + n);
                    return new R(e.name, e.message, r)
                } catch (t) {
                    return new R(e.name, e.message, [])
                }
            }
            ;
        var G = R
            , z = n;
        n.default = n,
            r.prototype.toJSON = function () {
                return 0 === --this.count && (this.parent[this.k] = this.val),
                    "[Circular]"
            }
            ;
        var H = o
            , W = Object.assign || function (e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            , Y = x.map
            , $ = x.reduce
            , K = x.includes
            , X = x.isArray
            , Q = function () { }
            , Z = function () {
                function e(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : M.schema
                        , r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                    if (s(this, e),
                        !t)
                        throw new Error("new BugsnagClient(notifier, configSchema) requires `notifier` argument");
                    if (!t.name || !t.version || !t.url)
                        throw new Error("new BugsnagClient(notifier, configSchema) - `notifier` requires: `{ name, version, url }`");
                    this.notifier = t,
                        this.configSchema = n,
                        this._configured = !1,
                        this._transport = {
                            name: "NULL_TRANSPORT",
                            sendSession: Q,
                            sendReport: Q
                        },
                        this._logger = {
                            debug: Q,
                            info: Q,
                            warn: Q,
                            error: Q
                        },
                        this.plugins = [],
                        this.session = r,
                        this.breadcrumbs = [],
                        this.app = {},
                        this.context = void 0,
                        this.device = void 0,
                        this.metaData = void 0,
                        this.request = void 0,
                        this.user = {},
                        this.BugsnagReport = G,
                        this.BugsnagBreadcrumb = _
                }
                return e.prototype.configure = function () {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    this.config = M.mergeDefaults(W({}, this.config, e), this.configSchema);
                    var t = M.validate(this.config, this.configSchema);
                    if (!t.valid == !0) {
                        var n = new Error("Bugsnag configuration error");
                        throw n.errors = Y(t.errors, function (e) {
                            return e.key + " " + e.message + " \n  " + e.value
                        }),
                        n
                    }
                    return "function" == typeof this.config.beforeSend && (this.config.beforeSend = [this.config.beforeSend]),
                        null !== this.config.appVersion && (this.app.version = this.config.appVersion),
                        this._configured = !0,
                        this._logger.debug("Loaded!"),
                        this
                }
                    ,
                    e.prototype.use = function (e) {
                        return this.plugins.push(e),
                            e.init(this)
                    }
                    ,
                    e.prototype.transport = function (e) {
                        return this._transport = e,
                            this
                    }
                    ,
                    e.prototype.logger = function (e, t) {
                        return this._logger = e,
                            this
                    }
                    ,
                    e.prototype.leaveBreadcrumb = function (e, t, n, r) {
                        if (!this._configured)
                            throw new Error("Bugsnag must be configured before calling leaveBreadcrumb()");
                        if (e = e || void 0,
                            n = "string" == typeof n ? n : void 0,
                            r = "string" == typeof r ? r : void 0,
                            t = "object" == typeof t && null !== t ? t : void 0,
                            "string" == typeof e || t) {
                            var i = new _(e, t, n, r)
                                , o = z(i)
                                , s = this.breadcrumbs[this.breadcrumbs.length - 1]
                                , a = !!s && o === z(s);
                            if (!a)
                                return this.breadcrumbs.push(i),
                                    this.breadcrumbs.length > this.config.maxBreadcrumbs && (this.breadcrumbs = this.breadcrumbs.slice(this.breadcrumbs.length - this.config.maxBreadcrumbs)),
                                    this
                        }
                    }
                    ,
                    e.prototype.notify = function (e) {
                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                        if (!this._configured)
                            throw new Error("Bugsnag must be configured before calling report()");
                        var n = this.app && "string" == typeof this.app.releaseStage ? this.app.releaseStage : this.config.releaseStage
                            , r = J(e, t, this._logger)
                            , i = r.err
                            , o = r.errorFramesToSkip
                            , s = r._opts;
                        s && (t = s),
                            i || (this._logger.warn('Usage error. notify() called with no "error" parameter'),
                                i = new Error('Bugsnag usage error. notify() called with no "error" parameter')),
                            "object" == typeof t && null !== t || (t = {});
                        var a = G.ensureReport(i, o, 1);
                        if (a.app = W({
                            releaseStage: n
                        }, a.app, this.app),
                            a.context = a.context || t.context || this.context || void 0,
                            a.device = W({}, a.device, this.device, t.device),
                            a.request = W({}, a.request, this.request, t.request),
                            a.user = W({}, a.user, this.user, t.user),
                            a.metaData = W({}, a.metaData, this.metaData, t.metaData),
                            a.breadcrumbs = this.breadcrumbs.slice(0),
                            void 0 !== t.severity && (a.severity = t.severity,
                                a._handledState.severityReason = {
                                    type: "userSpecifiedSeverity"
                                }),
                            X(this.config.notifyReleaseStages) && !K(this.config.notifyReleaseStages, n))
                            return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),
                                !1;
                        var c = a.severity
                            , l = [].concat(t.beforeSend).concat(this.config.beforeSend)
                            , u = $(l, function (e, t) {
                                return e === !0 || ("function" == typeof t && t(a) === !1 || !!a.isIgnored())
                            }, !1);
                        return u ? (this._logger.debug("Report not sent due to beforeSend callback"),
                            !1) : (this.config.autoBreadcrumbs && this.leaveBreadcrumb(a.errorClass, {
                                errorClass: a.errorClass,
                                errorMessage: a.errorMessage,
                                severity: a.severity,
                                stacktrace: a.stacktrace
                            }, "error"),
                                c !== a.severity && (a._handledState.severityReason = {
                                    type: "userCallbackSetSeverity"
                                }),
                                this._transport.sendReport(this._logger, this.config, {
                                    apiKey: a.apiKey || this.config.apiKey,
                                    notifier: this.notifier,
                                    events: [a]
                                }),
                                !0)
                    }
                    ,
                    e
            }()
            , J = function (e, t, n) {
                var r = void 0
                    , i = 0
                    , o = void 0;
                switch (typeof e) {
                    case "string":
                        "string" == typeof t ? (n.warn("Usage error. notify() called with (string, string) but expected (error, object)"),
                            r = new Error("Bugsnag usage error. notify() called with (string, string) but expected (error, object)"),
                            o = {
                                metaData: {
                                    notifier: {
                                        notifyArgs: [e, t]
                                    }
                                }
                            }) : (r = new Error(String(e)),
                                i += 2);
                        break;
                    case "number":
                    case "boolean":
                        r = new Error(String(e));
                        break;
                    case "function":
                        n.warn('Usage error. notify() called with a function as "error" parameter'),
                            r = new Error('Bugsnag usage error. notify() called with a function as "error" parameter');
                        break;
                    case "object":
                        null !== e && (H(e) || e.__isBugsnagReport) ? r = e : null !== e && ee(e) ? (r = new Error(e.message || e.errorMessage),
                            r.name = e.name || e.errorClass,
                            i += 2) : (n.warn('Usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'),
                                r = new Error('Bugsnag usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'))
                }
                return {
                    err: r,
                    errorFramesToSkip: i,
                    _opts: o
                }
            }
            , ee = function (e) {
                return !("string" != typeof e.name && "string" != typeof e.errorClass || "string" != typeof e.message && "string" != typeof e.errorMessage)
            }
            , te = Z
            , ne = {
                init: function (e) {
                    var t = 0;
                    e.config.beforeSend.push(function (n) {
                        return t >= e.config.maxEvents ? n.ignore() : void t++
                    }),
                        e.refresh = function () {
                            t = 0
                        }
                },
                configSchema: {
                    maxEvents: {
                        defaultValue: function () {
                            return 10
                        },
                        message: "(number) maxEvents must be a positive integer 100",
                        validate: function (e) {
                            return k(e) && e < 100
                        }
                    }
                }
            }
            , re = {
                releaseStage: {
                    defaultValue: function () {
                        return /^localhost(:\d+)?$/.test(window.location.host) ? "development" : "production"
                    },
                    message: "(string) releaseStage should be set",
                    validate: function (e) {
                        return "string" == typeof e && e.length
                    }
                }
            }
            , ie = x.map
            , oe = x.filter
            , se = {
                init: function (e) {
                    ie(ae, function (t) {
                        var n = console[t];
                        console[t] = function () {
                            for (var r = arguments.length, i = Array(r), o = 0; o < r; o++)
                                i[o] = arguments[o];
                            e.leaveBreadcrumb("Console output", {
                                severity: /^group/.test(t) ? "log" : t,
                                message: ie(i, function (e) {
                                    var t = String(e);
                                    if ("[object Object]" !== t)
                                        return t;
                                    try {
                                        t = JSON.stringify(e, null, 2)
                                    } catch (e) { }
                                    return t
                                }).join("\n")
                            }, "log"),
                                n.apply(console, i)
                        }
                            ,
                            console[t]._restore = function () {
                                console[t] = n
                            }
                    })
                },
                destroy: function () {
                    return ae.forEach(function (e) {
                        "function" == typeof console[e]._restore && console[e]._restore()
                    })
                },
                configSchema: {
                    consoleBreadcrumbsEnabled: {
                        defaultValue: function () { },
                        validate: function (e) {
                            return e === !0 || e === !1 || void 0 === e
                        },
                        message: "(boolean) consoleBreadcrumbsEnabled should be true or false"
                    }
                }
            }
            , ae = oe(["log", "debug", "info", "warn", "error"], function (e) {
                return "undefined" != typeof console && "function" == typeof console[e]
            })
            , ce = {
                init: function (e) {
                    e.config.beforeSend.push(function (e) {
                        e.context || (e.context = window.location.pathname)
                    })
                }
            }
            , le = Object.assign || function (e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            , ue = x.isoDate
            , de = {
                init: function (e) {
                    e.config.beforeSend.push(function (e) {
                        e.device = le({
                            time: ue(),
                            locale: navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage || navigator.language,
                            userAgent: navigator.userAgent
                        }, e.device)
                    })
                }
            }
            , pe = x.reduce
            , he = {
                init: function (e) {
                    var t = ""
                        , n = !1
                        , r = function () {
                            return document.documentElement.outerHTML
                        }
                        , i = function (e) {
                            var i = e.stacktrace[0];
                            if (!i || !i.file || !i.lineNumber)
                                return i;
                            if (i.file.replace(/#.*$/) !== window.location.href.replace(/#.*$/))
                                return i;
                            n && t || (t = r());
                            var o = ["<!-- DOCUMENT START -->"].concat(t.split("\n"))
                                , s = fe(o, i.lineNumber - 1)
                                , a = s.script
                                , c = s.start
                                , l = pe(a, function (e, t, n) {
                                    return Math.abs(c + n + 1 - i.lineNumber) > 10 ? e : (e["" + (c + n + 1)] = t,
                                        e)
                                }, {});
                            i.code = l,
                                e.updateMetaData("script", {
                                    content: a.join("\n")
                                })
                        };
                    t = r(),
                        document.onreadystatechange = function () {
                            "interactive" === document.readyState && (t = r(),
                                n = !0)
                        }
                        ,
                        e.config.beforeSend.push(i)
                }
            }
            , fe = function (e, t) {
                for (var n = t; n < e.length && !/<\/script>/.test(e[n]);)
                    n++;
                for (var r = n; n > 0 && !/<script.*>/.test(e[n]);)
                    n--;
                var i = n
                    , o = e.slice(i, r + 1);
                return o[0] = o[0].replace(/^.*<script.*>/, ""),
                    o[o.length - 1] = o[o.length - 1].replace(/<\/script>.*$/, ""),
                    {
                        script: o,
                        start: i
                    }
            }
            , me = {
                init: function (e) {
                    "addEventListener" in window && window.addEventListener("click", function (t) {
                        var n = void 0
                            , r = void 0;
                        try {
                            n = ge(t.target),
                                r = a(t.target)
                        } catch (t) {
                            n = "[hidden]",
                                r = "[hidden]",
                                e._logger.log("Cross domain error when tracking click event. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors")
                        }
                        e.leaveBreadcrumb("UI click", {
                            targetText: n,
                            targetSelector: r
                        }, "user")
                    }, !0)
                },
                configSchema: {
                    interactionBreadcrumbsEnabled: {
                        defaultValue: function () { },
                        validate: function (e) {
                            return e === !0 || e === !1 || void 0 === e
                        },
                        message: "(boolean) interactionBreadcrumbsEnabled should be true or false"
                    }
                }
            }
            , ge = function (e) {
                var t = e.textContent || e.innerText || "";
                return t || "submit" !== e.type && "button" !== e.type || (t = e.value),
                    t = t.replace(/^\s+|\s+$/g, ""),
                    c(t, 140)
            }
            , ye = {
                init: function (e) {
                    if ("addEventListener" in window) {
                        var t = function (t) {
                            return function () {
                                return e.leaveBreadcrumb(t, {}, "navigation")
                            }
                        };
                        window.addEventListener("pagehide", t("Page hidden"), !0),
                            window.addEventListener("pageshow", t("Page shown"), !0),
                            window.addEventListener("load", t("Page loaded"), !0),
                            window.document.addEventListener("DOMContentLoaded", t("DOMContentLoaded"), !0),
                            window.addEventListener("load", function () {
                                return window.addEventListener("popstate", t("Navigated back"), !0)
                            }),
                            window.addEventListener("hashchange", function (t) {
                                var n = t.oldURL ? {
                                    from: ve(t.oldURL),
                                    to: ve(t.newURL),
                                    state: window.history.state
                                } : {
                                        to: ve(window.location.href)
                                    };
                                e.leaveBreadcrumb("Hash changed", n, "navigation")
                            }, !0),
                            window.history.replaceState && xe(e, window.history, "replaceState"),
                            window.history.pushState && xe(e, window.history, "pushState"),
                            e.leaveBreadcrumb("Bugsnag loaded", {}, "navigation")
                    }
                },
                destroy: function () {
                    window.history.replaceState._restore(),
                        window.history.pushState._restore()
                },
                configSchema: {
                    navigationBreadcrumbsEnabled: {
                        defaultValue: function () { },
                        validate: function (e) {
                            return e === !0 || e === !1 || void 0 === e
                        },
                        message: "(boolean) navigationBreadcrumbsEnabled should be true or false"
                    }
                }
            }
            , ve = function (e) {
                var t = document.createElement("A");
                return t.href = e,
                    "" + t.pathname + t.search + t.hash
            }
            , be = function (e, t, n) {
                var r = ve(window.location.href);
                return {
                    title: t,
                    state: e,
                    prevState: window.history.state,
                    to: n || r,
                    from: r
                }
            }
            , xe = function (e, t, n) {
                var r = t[n];
                t[n] = function (i, o, s) {
                    e.leaveBreadcrumb("History " + n, be(i, o, s), "navigation"),
                        "function" == typeof e.refresh && e.refresh(),
                        r.call(t, i, o, s)
                }
                    ,
                    t[n]._restore = function () {
                        t[n] = r
                    }
            }
            , we = Object.assign || function (e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            , Ee = {
                init: function (e) {
                    e.config.beforeSend.push(function (e) {
                        e.request && e.request.url || (e.request = we({}, e.request, {
                            url: window.location.href
                        }))
                    })
                }
            }
            , _e = {
                init: function (e) {
                    "onunhandledrejection" in window && window.addEventListener("unhandledrejection", function (t) {
                        var n = t.reason
                            , r = {
                                severity: "error",
                                unhandled: !0,
                                severityReason: {
                                    type: "unhandledPromiseRejection"
                                }
                            }
                            , i = void 0;
                        if (n && A(n))
                            i = new e.BugsnagReport(n.name, n.message, O.parse(n), r);
                        else {
                            var o = "string" == typeof n ? n : "Unhandled promise rejection"
                                , s = new Error(o);
                            s.type = "UnhandledRejection",
                                i = new e.BugsnagReport(s.type, s.message, O.parse(s), r),
                                i.updateMetaData("promise", "rejection reason", n)
                        }
                        e.notify(i)
                    })
                }
            }
            , Se = {
                init: function (e) {
                    var t = function (t, r, i, o, s) {
                        if (0 === i && /Script error\.?/.test(t))
                            return void e._logger.warn("Ignoring cross-domain or eval script error. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors");
                        var a = {
                            severity: "error",
                            unhandled: !0,
                            severityReason: {
                                type: "unhandledException"
                            }
                        }
                            , c = void 0;
                        if (s)
                            c = new e.BugsnagReport(s.name, s.message, ke(e.BugsnagReport.getStacktrace(s), r, i, o), a);
                        else if ("object" != typeof t || null === t || r || i || o || s)
                            c = new e.BugsnagReport("window.onerror", t, ke(e.BugsnagReport.getStacktrace(s, 1), r, i, o), a),
                                c.updateMetaData("window onerror", {
                                    event: t
                                });
                        else {
                            var l = t.type ? "Event: " + t.type : "window.onerror"
                                , u = t.message || t.detail || "";
                            c = new e.BugsnagReport(l, u, e.BugsnagReport.getStacktrace(new Error, 1).slice(1), a),
                                c.updateMetaData("window onerror", {
                                    event: t
                                })
                        }
                        e.notify(c),
                            "function" == typeof n && n(t, r, i, o, s)
                    }
                        , n = window.onerror;
                    window.onerror = t
                }
            }
            , ke = function (e, t, n, r) {
                var i = e[0];
                return i ? (i.fileName || i.setFileName(t),
                    i.lineNumber || i.setLineNumber(n),
                    i.columnNumber || (void 0 !== r ? i.setColumnNumber(r) : window.event && window.event.errorCharacter && i.setColumnNumber(window.event && window.event.errorCharacter)),
                    e) : e
            }
            , Me = function (e) {
                var t = z(e);
                if (t.length > 1e6 && (delete e.events[0].metaData,
                    e.events[0].metaData = {
                        notifier: "WARNING!\nThe serialized payload was " + t.length / 1e6 + "MB. The limit is 1MB.\nreport.metaData was stripped to make the payload of a deliverable size."
                    },
                    t = z(e),
                    t.length > 1e6))
                    throw new Error("payload exceeded 1MB limit");
                return t
            }
            , Ce = {
                name: "XDomainRequest",
                sendReport: function (e, t, n) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : function () { }
                        , i = t.endpoint
                        , o = new window.XDomainRequest;
                    o.onload = function () {
                        r(null, o.responseText)
                    }
                        ,
                        o.open("POST", i);
                    try {
                        o.send(Me(n))
                    } catch (t) {
                        e.error(t)
                    }
                }
            }
            , Ie = {
                name: "XMLHttpRequest",
                sendReport: function (e, t, n) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : function () { }
                        , i = t.endpoint
                        , o = new window.XMLHttpRequest;
                    o.onreadystatechange = function () {
                        o.readyState === window.XMLHttpRequest.DONE && r(null, o.responseText)
                    }
                        ,
                        o.open("POST", i),
                        o.setRequestHeader("content-type", "application/json");
                    try {
                        o.send(Me(n))
                    } catch (t) {
                        e.error(t)
                    }
                }
            }
            , Te = {}
            , Pe = Object.assign || function (e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            , Ae = "Bugsnag JavaScript"
            , Le = "4.0.3"
            , Oe = "https://github.com/bugsnag/bugsnag-js"
            , De = x.map
            , qe = x.reduce
            , Ne = x.keys
            , Fe = Pe({}, M.schema, re)
            , Re = {
                "window onerror": Se,
                "unhandled rejection": _e,
                device: de,
                context: ce,
                request: Ee,
                throttle: ne,
                "console breadcrumbs": se,
                "navigation breadcrumbs": ye,
                "interaction breadcrumbs": me,
                "inline script content": he
            }
            , je = {
                XDomainRequest: Ce,
                XMLHttpRequest: Ie
            };
        Te = function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
            "string" == typeof e && (e = {
                apiKey: e
            });
            var n = qe([].concat(De(Ne(Re), function (e) {
                return Re[e]
            })).concat(t), function (e, t) {
                return t.configSchema ? Pe({}, e, t.configSchema) : e
            }, Fe)
                , r = new te({
                    name: Ae,
                    version: Le,
                    url: Oe
                }, n);
            if (r.transport(window.XDomainRequest ? je.XDomainRequest : je.XMLHttpRequest),
                "undefined" != typeof console && "function" == typeof console.debug) {
                var i = Be();
                r.logger(i)
            }
            try {
                r.configure(e)
            } catch (e) {
                throw r._logger.warn(e),
                e.errors && De(e.errors, r._logger.warn),
                e
            }
            return r.use(Re.device),
                r.use(Re.context),
                r.use(Re.request),
                r.use(Re["inline script content"]),
                r.use(Re.throttle),
                r.config.autoNotify !== !1 && (r.use(Re["window onerror"]),
                    r.use(Re["unhandled rejection"])),
                Ve(r.config, "navigationBreadcrumbsEnabled") && r.use(Re["navigation breadcrumbs"]),
                Ve(r.config, "interactionBreadcrumbsEnabled") && r.use(Re["interaction breadcrumbs"]),
                Ve(r.config, "consoleBreadcrumbsEnabled", !1) && r.use(Re["console breadcrumbs"]),
                De(t, function (e) {
                    return r.use(e)
                }),
                r
        }
            ;
        var Be = function () {
            var e = {}
                , t = console.log;
            return De(["debug", "info", "warn", "error"], function (n) {
                var r = console[n];
                e[n] = "function" == typeof r ? r.bind(console, "[bugsnag]") : t.bind(console, "[bugsnag]")
            }),
                e
        }
            , Ve = function (e, t) {
                var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
                return "boolean" == typeof e[t] ? e[t] : e.autoBreadcrumbs && (n || !/^dev(elopment)?$/.test(e.releaseStage))
            };
        return Te.default = Te,
            Te
    });
define("bugsnag", ["require", "exports", "vendor/bugsnag", "jquery"], function (e, t, n, r) {
    "use strict";
    function i() {
        a || (a = n({
            apiKey: "7f7807097671acbc4557e64bbf5eb529",
            maxBreadcrumbs: 40,
            consoleBreadcrumbsEnabled: !1
        }))
    }
    function o(e, t) {
        a && a.notify(e, t)
    }
    function s(e, t, n, r) {
        a && a.leaveBreadcrumb(e, t, n, r)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a;
    t.init = i,
        t.notify = o,
        t.leaveBreadcrumb = s,
        r(document).ajaxError(function (e, t, n, r) {
            401 !== t.status && 0 !== t.status && o({
                name: "AjaxError",
                message: r + ": " + n.url
            }, {
                    metaData: {
                        url: n.url,
                        type: n.type,
                        status: t.status,
                        headers: t.getAllResponseHeaders(),
                        responseText: t.responseText
                    }
                })
        })
});
!function (e) {
    if ("object" == typeof exports && "undefined" != typeof module)
        module.exports = e();
    else if ("function" == typeof define && define.amd)
        define("base64", [], e);
    else {
        var t;
        t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this,
            t.base64js = e()
    }
}(function () {
    return function e(t, n, r) {
        function i(s, a) {
            if (!n[s]) {
                if (!t[s]) {
                    var c = "function" == typeof require && require;
                    if (!a && c)
                        return c(s, !0);
                    if (o)
                        return o(s, !0);
                    var l = new Error("Cannot find module '" + s + "'");
                    throw l.code = "MODULE_NOT_FOUND",
                    l
                }
                var u = n[s] = {
                    exports: {}
                };
                t[s][0].call(u.exports, function (e) {
                    var n = t[s][1][e];
                    return i(n ? n : e)
                }, u, u.exports, e, t, n, r)
            }
            return n[s].exports
        }
        for (var o = "function" == typeof require && require, s = 0; s < r.length; s++)
            i(r[s]);
        return i
    }({
        "/": [function (e, t, n) {
            "use strict";
            function r(e) {
                var t = e.length;
                if (t % 4 > 0)
                    throw new Error("Invalid string. Length must be a multiple of 4");
                return "=" === e[t - 2] ? 2 : "=" === e[t - 1] ? 1 : 0
            }
            function i(e) {
                return 3 * e.length / 4 - r(e)
            }
            function o(e) {
                var t, n, i, o, s, a, c = e.length;
                s = r(e),
                    a = new d(3 * c / 4 - s),
                    i = s > 0 ? c - 4 : c;
                var l = 0;
                for (t = 0,
                    n = 0; t < i; t += 4,
                    n += 3)
                    o = u[e.charCodeAt(t)] << 18 | u[e.charCodeAt(t + 1)] << 12 | u[e.charCodeAt(t + 2)] << 6 | u[e.charCodeAt(t + 3)],
                        a[l++] = o >> 16 & 255,
                        a[l++] = o >> 8 & 255,
                        a[l++] = 255 & o;
                return 2 === s ? (o = u[e.charCodeAt(t)] << 2 | u[e.charCodeAt(t + 1)] >> 4,
                    a[l++] = 255 & o) : 1 === s && (o = u[e.charCodeAt(t)] << 10 | u[e.charCodeAt(t + 1)] << 4 | u[e.charCodeAt(t + 2)] >> 2,
                        a[l++] = o >> 8 & 255,
                        a[l++] = 255 & o),
                    a
            }
            function s(e) {
                return l[e >> 18 & 63] + l[e >> 12 & 63] + l[e >> 6 & 63] + l[63 & e]
            }
            function a(e, t, n) {
                for (var r, i = [], o = t; o < n; o += 3)
                    r = (e[o] << 16) + (e[o + 1] << 8) + e[o + 2],
                        i.push(s(r));
                return i.join("")
            }
            function c(e) {
                for (var t, n = e.length, r = n % 3, i = "", o = [], s = 16383, c = 0, u = n - r; c < u; c += s)
                    o.push(a(e, c, c + s > u ? u : c + s));
                return 1 === r ? (t = e[n - 1],
                    i += l[t >> 2],
                    i += l[t << 4 & 63],
                    i += "==") : 2 === r && (t = (e[n - 2] << 8) + e[n - 1],
                        i += l[t >> 10],
                        i += l[t >> 4 & 63],
                        i += l[t << 2 & 63],
                        i += "="),
                    o.push(i),
                    o.join("")
            }
            n.byteLength = i,
                n.toByteArray = o,
                n.fromByteArray = c;
            for (var l = [], u = [], d = "undefined" != typeof Uint8Array ? Uint8Array : Array, p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", h = 0, f = p.length; h < f; ++h)
                l[h] = p[h],
                    u[p.charCodeAt(h)] = h;
            u["-".charCodeAt(0)] = 62,
                u["_".charCodeAt(0)] = 63
        }
            , {}]
    }, {}, [])("/")
}),
    define("bin", ["base64"], function (e) {
        var t = {};
        return {
            load: function (e, n, r, i) {
                var o = n.toUrl("assets_src/" + e);
                if (i.isBuild) {
                    var s = require.nodeRequire("fs");
                    t[e] = s.readFileSync(o).toString("base64"),
                        r()
                } else {
                    var a = new XMLHttpRequest;
                    a.open("GET", o, !0),
                        a.responseType = "arraybuffer",
                        a.onload = function () {
                            r(a.response)
                        }
                        ,
                        a.send()
                }
            },
            write: function (e, n, r, i) {
                n in t ? r("define('" + e + "!" + n + "', ['base64'], function (base64) {  return base64.toByteArray('" + t[n] + "').buffer;});") : console.log("ERROR - failed to find file " + n + " in buildMap")
            }
        }
    }),
    define("bin!audio/poi.mp3", ["base64"], function (e) {
        return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer
    }),
    define("graphing/tonegenerator", ["require", "pjs", "bugsnag", "browser", "graphing/graphmode", "math/poi", "bin!audio/poi.mp3"], function (e) {
        var t = e("pjs")
            , n = e("bugsnag")
            , r = e("browser")
            , i = e("graphing/graphmode")
            , o = e("math/poi").default
            , s = e("bin!audio/poi.mp3")
            , a = t(function (e) {
                e.init = function (e) {
                    if (this.toneType = e,
                        this.pointArray = [],
                        this.pointIndex = 0,
                        this.isPlaying = !1,
                        this.audioSpeed = 50,
                        this.freqMin = 125,
                        this.freqBase = 500,
                        this.freqMax = 2e3,
                        this.audioPointMove = function () { }
                        ,
                        this.audioPointReset = function () { }
                        ,
                        this.playbackSupported)
                        try {
                            this.createNoiseNode()
                        } catch (e) {
                            this.playbackSupported = !1
                        }
                }
                    ,
                    e.createNoiseNode = function () {
                        this.noiseNode && (this.noiseNode.stop(),
                            this.noiseNode.disconnect(),
                            this.noiseNode = null);
                        for (var e = 2 * this.audioCtx.sampleRate, t = 0, n = this.audioCtx.createBuffer(1, e, this.audioCtx.sampleRate), r = n.getChannelData(0), i = 0; i < e; i++) {
                            var o = 2 * Math.random() - 1;
                            r[i] = (t + .02 * o) / 1.02,
                                t = r[i]
                        }
                        return this.noiseNode = this.audioCtx.createBufferSource(),
                            this.noiseNode.buffer = n,
                            this.noiseNode.loop = !0,
                            this.noiseNode.start(),
                            this
                    }
                    ,
                    e.setMinMax = function (e, t, n, r) {
                        return this.xmin = e,
                            this.xmax = t,
                            this.ymin = n,
                            this.ymax = r,
                            this
                    }
                    ,
                    e.queueArray = function (e) {
                        return e && e.length && (this.pointArray = this.pointArray.concat(e),
                            this.pointIndex = 0),
                            this
                    }
                    ,
                    e.queuePoint = function (e) {
                        return e && e.hasOwnProperty("x") && e.hasOwnProperty("y") && (this.continuousPlay && (this.pointArray.length = 0),
                            this.pointArray.push(e),
                            this.pointIndex = 0),
                            this
                    }
                    ,
                    e.createOscillator = function (e, t, n, i, o) {
                        return this.playbackSupported && (this.oscillator = this.audioCtx.createOscillator(),
                            this.oscillator.type = this.toneType || "sine",
                            this.oscillatorHigh = this.audioCtx.createOscillator(),
                            this.oscillatorHigh.type = this.toneType || "sine",
                            this.gainOscillatorHigh = this.audioCtx.createGain(),
                            this.gainOscillatorHigh.gain.value = .7,
                            this.oscillatorHigh.connect(this.gainOscillatorHigh),
                            this.gainLeft = this.audioCtx.createGain(),
                            this.gainRight = this.audioCtx.createGain(),
                            this.gainMaster = this.audioCtx.createGain(),
                            this.splitter = this.audioCtx.createChannelSplitter(2),
                            this.merger = this.audioCtx.createChannelMerger(2),
                            this.oscillator.connect(this.splitter),
                            this.splitter.connect(this.gainLeft, 0),
                            this.splitter.connect(this.gainRight, 0),
                            this.gainLeft.connect(this.merger, 0, 0),
                            this.gainRight.connect(this.merger, 0, 1),
                            this.merger.connect(this.gainMaster),
                            this.gainMaster.connect(this.audioCtx.destination),
                            r.IS_APPLE ? this.masterVolume = 1 : this.masterVolume = .5,
                            this.setPan(e),
                            this.setFreq(t),
                            this.setOriginCues(n, i, o)),
                            this
                    }
                    ,
                    e.startContinuousPlay = function () {
                        return this.continuousPlay = !0,
                            this
                    }
                    ,
                    e.play = function () {
                        if (this.pointArray.length > 0 && this.pointIndex < this.pointArray.length) {
                            var e, t, n, r, s, a = 1 === this.pointArray.length, c = this.pointArray[this.pointIndex];
                            if (c.graphMode && c.graphMode !== i.Y && c.graphMode !== i.POLAR ? c.graphMode === i.X && (t = void 0 === c.x || c.x < this.xmin || c.x > this.xmax ? -1 : Math.abs((c.x - this.xmin + 1e-5) / (this.xmax - this.xmin)),
                                e = Math.abs((c.y - this.ymin + 1e-5) / (this.ymax - this.ymin)),
                                n = c.y,
                                r = c.x) : (e = Math.abs((c.x - this.xmin + 1e-5) / (this.xmax - this.xmin)),
                                    t = void 0 === c.y || c.y < this.ymin || c.y > this.ymax ? -1 : Math.abs((c.y - this.ymin + 1e-5) / (this.ymax - this.ymin)),
                                    n = c.x,
                                    r = c.y),
                                s = c.typeChain && c.typeChain.indexOf(o.INTERSECTION) !== -1 ? o.INTERSECTION : c.type,
                                this.isPlaying ? (this.setPan(e),
                                    this.setFreq(t),
                                    this.setOriginCues(n, r, s)) : (this.resume(),
                                        this.createOscillator(e, t, n, r, s),
                                        this.playbackSupported && (this.oscillator.start(),
                                            this.oscillatorHigh.start()),
                                        this.isPlaying = !0),
                                this.continuousPlay)
                                return;
                            this.audioPointMove(c),
                                a ? (this.gainMaster.gain.value = this.masterVolume,
                                    this.playTimeout = setTimeout(this.play.bind(this), 50)) : this.playTimeout = setTimeout(this.play.bind(this), this.audioSpeed),
                                this.pointIndex++
                        } else
                            this.stop();
                        return this
                    }
                    ,
                    e.setPan = function (e) {
                        return this.playbackSupported && (isFinite(e) || (e = 0),
                            e = Math.max(Math.min(e, 1), 0),
                            this.gainLeft.gain.value = Math.cos(Math.PI / 2 * e),
                            this.gainRight.gain.value = Math.sin(Math.PI / 2 * e)),
                            this
                    }
                    ,
                    e.setFreq = function (e) {
                        if (this.playbackSupported) {
                            var t;
                            void 0 === e || isNaN(e) || e <= 0 ? t = null : (t = parseInt(this.freqBase * Math.pow(2, e), 10),
                                t < this.freqMin && (t = this.freqMin),
                                t > this.freqMax && (t = this.freqMax)),
                                t ? (this.oscillator.frequency.value = t,
                                    this.noiseNode.disconnect(),
                                    this.oscillator.connect(this.splitter)) : (this.oscillator.disconnect(),
                                        this.oscillatorHigh.disconnect(),
                                        this.noiseNode.connect(this.splitter))
                        }
                        return this
                    }
                    ,
                    e.setOriginCues = function (e, t, n) {
                        return void 0 === e || isNaN(e) || void 0 === t || isNaN(t) || (e < 0 ? (this.oscillatorHigh.frequency.value = 2 * this.oscillator.frequency.value,
                            this.gainOscillatorHigh.connect(this.splitter)) : this.gainOscillatorHigh.disconnect(),
                            t < 0 ? this.noiseNode.connect(this.splitter) : this.noiseNode.disconnect(),
                            isNaN(n) || n !== o.INTERSECTION || this.playPOI()),
                            this
                    }
                    ,
                    e.stop = function () {
                        return this.playTimeout && (clearTimeout(this.playTimeout),
                            this.playTimeout = null),
                            this.pointArray.length = 0,
                            this.pointIndex = 0,
                            this.isPlaying && (this.playbackSupported && (this.oscillator && (this.oscillator.stop(),
                                this.oscillator.disconnect(),
                                this.oscillator = null),
                                this.oscillatorHigh && (this.oscillatorHigh.stop(),
                                    this.oscillatorHigh.disconnect(),
                                    this.oscillatorHigh = null),
                                this.noiseNode.disconnect()),
                                this.isPlaying = !1),
                            this.audioPointReset(),
                            this.continuousPlay = !1,
                            this
                    }
                    ,
                    e.suspend = function () {
                        return this.playbackSupported && this.audioCtx && (this.stop(),
                            this.noiseNode && (this.noiseNode.stop(),
                                this.noiseNode = null),
                            this.audioCtx.suspend()),
                            this
                    }
                    ,
                    e.resume = function () {
                        if (!this.audioCtx) {
                            var e = window.AudioContext || window.webkitAudioContext;
                            if (r.IS_IE)
                                this.playbackSupported = !1,
                                    this.audioCtx = null;
                            else
                                try {
                                    this.audioCtx = e ? new e : void 0,
                                        this.playbackSupported = !0
                                } catch (e) {
                                    n.notify(e),
                                        this.playbackSupported = !1,
                                        this.audioCtx = null
                                }
                        }
                        return this.playbackSupported && this.audioCtx && ("suspended" === this.audioCtx.state && this.audioCtx.resume(),
                            this.createNoiseNode(),
                            this.loadPOI()),
                            this
                    }
                    ,
                    e.loadPOI = function () {
                        return !this.playbackSupported || this.poiBuffer ? this : (this.audioCtx.decodeAudioData(s.slice(0), function (e) {
                            this.poiBuffer = e
                        }
                            .bind(this)),
                            this)
                    }
                    ,
                    e.playPOI = function () {
                        if (!this.playbackSupported || !this.poiBuffer)
                            return this;
                        var e = this.audioCtx.createBufferSource();
                        e.buffer = this.poiBuffer,
                            e.connect(this.splitter),
                            e.start()
                    }
            });
        return a
    }),
    define("graphing/audiograph", ["require", "exports", "lib/aria", "graphing/audiographnavigator", "browser", "keys", "graphing/tonegenerator", "graphing/graphmode", "i18n", "graphing/label", "math/poi", "graphing-calc/models/expression"], function (e, t, n, r, i, o, s, a, c, l, u, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = 0
            , h = function () {
                function e(e) {
                    var t = this;
                    this.__id = p++ ,
                        this.grapher = e,
                        this.controller = e.controller,
                        this.audioTraceActive = !1,
                        this.wasFocusInExpressionsView = !1,
                        this.sliderTraceActive = !1,
                        this.sliderIndex = 0,
                        this.sliderArray = [],
                        this.lastSpokenBranch = 0,
                        this.tonegen = s("triangle"),
                        this.tonegen.suspend(),
                        this.agNavigator = new r(this, this.grapher, this.tonegen),
                        this.grapher.$root.on("keydown.audiograph-" + this.__id, function (e) {
                            return t.handleKeydown(e)
                        })
                }
                return e.prototype.remove = function () {
                    this.grapher.$root.off(".audiograph-" + this.__id)
                }
                    ,
                    e.prototype.t = function (e, t) {
                        return c.t(e, t, this.grapher.settings.language)
                    }
                    ,
                    e.prototype.handleKeydown = function (e) {
                        var t = e.altKey || e.metaKey
                            , n = e.altKey && !e.metaKey && !e.ctrlKey && !e.shiftKey
                            , r = e.ctrlKey && !e.metaKey && !e.altKey
                            , s = i.IS_APPLE ? r : t
                            , a = s && (61 === e.which || 187 === e.which)
                            , c = s && !e.shiftKey && (173 === e.which || 189 === e.which)
                            , l = s && !e.shiftKey && "0" === o.lookupChar(e);
                        n && "S" === o.lookupChar(e) ? this.controller.getSelectedItem() && this.isFocusInExpressionsView() && (e.preventDefault(),
                            e.stopPropagation(),
                            this.describeGraph()) : n && "T" === o.lookupChar(e) ? (e.preventDefault(),
                                e.stopPropagation(),
                                this.toggleAudioTrace()) : a ? (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.zoom("in")) : c ? (e.preventDefault(),
                                        e.stopPropagation(),
                                        this.zoom("out")) : l ? (e.preventDefault(),
                                            e.stopPropagation(),
                                            this.zoom("default")) : this.audioTraceActive && (this.sliderTraceActive ? this.sliderTraceKeydown(e) : this.audioTraceKeydown(e))
                    }
                    ,
                    e.prototype.sliderTraceKeydown = function (e) {
                        var t = e.altKey || e.metaKey
                            , n = !t && !e.ctrlKey && !e.shiftKey;
                        n && o.lookup(e) === o.LEFT || "J" === o.lookupChar(e) ? (e.preventDefault(),
                            e.stopPropagation(),
                            this.decrementSliderValue()) : n && o.lookup(e) === o.RIGHT || "L" === o.lookupChar(e) ? (e.preventDefault(),
                                e.stopPropagation(),
                                this.incrementSliderValue()) : n && o.lookup(e) === o.PAGEDOWN ? (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.decrementBigSliderValue()) : n && o.lookup(e) === o.PAGEUP ? (e.preventDefault(),
                                        e.stopPropagation(),
                                        this.incrementBigSliderValue()) : t || o.lookup(e) !== o.DOWN && (e.shiftKey || o.lookup(e) !== o.TAB) && "K" !== o.lookupChar(e) ? !t && (o.lookup(e) === o.UP || e.shiftKey && o.lookup(e) === o.TAB || "I" === o.lookupChar(e)) ? (e.preventDefault(),
                                            e.stopPropagation(),
                                            this.prevSlider()) : n && o.lookup(e) === o.HOME || "U" === o.lookupChar(e) ? (e.preventDefault(),
                                                e.stopPropagation(),
                                                this.sliderMin()) : n && o.lookup(e) === o.END || "N" === o.lookupChar(e) ? (e.preventDefault(),
                                                    e.stopPropagation(),
                                                    this.sliderMax()) : n && "P" === o.lookupChar(e) ? (e.preventDefault(),
                                                        e.stopPropagation(),
                                                        this.toggleSliderAnimation()) : (this.stopAnimations(),
                                                            this.audioTraceKeydown(e)) : (e.preventDefault(),
                                                                e.stopPropagation(),
                                                                this.nextSlider())
                    }
                    ,
                    e.prototype.audioTraceKeydown = function (e) {
                        var t = this
                            , r = e.altKey || e.metaKey
                            , i = r && !e.ctrlKey && !e.shiftKey
                            , s = !r && !e.ctrlKey && !e.shiftKey;
                        if (o.lookup(e) === o.UP && i)
                            e.preventDefault(),
                                e.stopPropagation(),
                                this.agNavigator.prevCurve();
                        else if (o.lookup(e) === o.DOWN && i)
                            e.preventDefault(),
                                e.stopPropagation(),
                                this.agNavigator.nextCurve();
                        else if (s && o.lookup(e) === o.LEFT || o.lookup(e) === o.UP || "J" === o.lookupChar(e))
                            e.preventDefault(),
                                e.stopPropagation(),
                                this.agNavigator.prevPoint(),
                                this.reportAudioTrace();
                        else if (s && o.lookup(e) === o.RIGHT || o.lookup(e) === o.DOWN || "L" === o.lookupChar(e))
                            e.preventDefault(),
                                e.stopPropagation(),
                                this.agNavigator.nextPoint(),
                                this.reportAudioTrace();
                        else if (r || o.lookup(e) !== o.PAGEDOWN && (e.shiftKey || o.lookup(e) !== o.TAB) && "I" !== o.lookupChar(e))
                            if (!r && (o.lookup(e) === o.PAGEUP || e.shiftKey && o.lookup(e) === o.TAB || "K" === o.lookupChar(e)))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.agNavigator.prevPOI(),
                                    this.reportAudioTrace();
                            else if (s && o.lookup(e) === o.HOME || "U" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.agNavigator.firstPoint(),
                                    this.reportAudioTrace();
                            else if (s && o.lookup(e) === o.END || "N" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.agNavigator.lastPoint(),
                                    this.reportAudioTrace();
                            else if (s && "X" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.reportAudioTrace("x");
                            else if (s && "P" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.queuePOICount(),
                                    n.alert();
                            else if (s && "Y" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.reportAudioTrace("y");
                            else if (s && "T" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.reportAudioTrace("type");
                            else if (s && "B" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.reportAudioTrace("branch");
                            else if (s && "O" === o.lookupChar(e))
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.agNavigator.moveToOrigin(),
                                    this.reportAudioTrace();
                            else if (s && "H" === o.lookupChar(e))
                                if (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.tonegen.playbackSupported) {
                                    this.tonegen.stop();
                                    var a = this.agNavigator.getPoints();
                                    a.length > 0 ? (n.alert(this.t("Playing graph.")),
                                        this.tonegen.queueArray(a),
                                        setTimeout(function () {
                                            return t.tonegen.play()
                                        }, 500)) : n.alert(this.t("Graph is empty."))
                                } else
                                    n.alert(this.t("Unable to play audio."));
                            else if (s && o.lookupChar(e) >= "0" && o.lookupChar(e) <= "9") {
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.tonegen.stop();
                                var c = this.agNavigator.getCurrentSketch();
                                if (c) {
                                    var l = void 0;
                                    if (l = 48 === e.which ? 9 : e.which - 49,
                                        l < c.branches.length)
                                        if (this.tonegen.playbackSupported) {
                                            var u = this.agNavigator.getBranchPoints(l);
                                            0 === u.length ? n.alert(this.t("Branch __branch__ is empty.", {
                                                branch: l + 1
                                            })) : (n.alert(this.t("Branch __branch__", {
                                                branch: l + 1
                                            })),
                                                this.tonegen.queueArray(u),
                                                setTimeout(function () {
                                                    return t.tonegen.play()
                                                }, 500))
                                        } else
                                            n.alert(this.t("Unable to play audio."));
                                    else
                                        n.alert(this.t("Branch __branch__ does not exist.", {
                                            branch: l + 1
                                        }))
                                } else
                                    n.alert(this.t("No graph selected."))
                            } else
                                r && o.lookupChar(e) >= "1" && o.lookupChar(e) <= "5" ? (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.adjustPlaybackSpeed(o.lookupChar(e))) : s && "A" === o.lookupChar(e) ? (e.preventDefault(),
                                        e.stopPropagation(),
                                        this.queueAnimatingPoints(!0),
                                        n.alert()) : s && "S" === o.lookupChar(e) ? (e.preventDefault(),
                                            e.stopPropagation(),
                                            this.toggleSliderTrace()) : s && this.exitAudioTrace();
                        else
                            e.preventDefault(),
                                e.stopPropagation(),
                                this.agNavigator.nextPOI(),
                                this.reportAudioTrace()
                    }
                    ,
                    e.prototype.describeGraph = function () {
                        var e = this.agNavigator.getCurrentSketch();
                        if (e) {
                            var t = e.branches.length;
                            t > 1 && n.queue(this.t("Branches: __branches__.", {
                                branches: t
                            }));
                            var r = this.agNavigator.getSortedPOI();
                            if (n.queue(this.t("Points of interest: __poiCount__.", {
                                poiCount: r.length
                            })),
                                r.length > 0)
                                for (var i = 0; i < r.length; i++)
                                    this.queueCoordinates(r[i])
                        } else
                            n.queue(this.t("No graph information available."));
                        n.alert()
                    }
                    ,
                    e.prototype.queueCoordinates = function (e, t, r) {
                        if (void 0 === r && (r = !1),
                            e) {
                            var i = this.agNavigator.getCurrentSketch();
                            (e.hasOwnProperty("branch") && i && i.branches.length > 1 && this.lastSpokenBranch !== e.branch || "branch" === t) && n.queue(this.t("Branch __branch__.", {
                                branch: e.branch + 1
                            })),
                                this.lastSpokenBranch = e.branch,
                                e.hasOwnProperty("type") && !t ? n.queue(this.t("__type__ at", {
                                    type: this.describePOI(e)
                                })) : "type" === t && n.queue(this.describePOI(e)),
                                t && "x" !== t || n.queue(this.t("X: __x__.", {
                                    x: l.value(e.x, this.agNavigator.xscale).ariaString
                                })),
                                t && "y" !== t || n.queue(this.t("Y: __y__.", {
                                    y: l.value(e.y, this.agNavigator.yscale).ariaString
                                })),
                                r && n.alert()
                        }
                    }
                    ,
                    e.prototype.describePOI = function (e) {
                        if (e.typeChain) {
                            for (var t = [], n = 0; n < e.typeChain.length; n++)
                                t.push(this.poiTypeToText(e, n));
                            return t.join(", ")
                        }
                        return this.poiTypeToText(e)
                    }
                    ,
                    e.prototype.poiTypeToText = function (e, t) {
                        var n = t ? e.typeChain[t] : e.type;
                        switch (n) {
                            case u.default.INTERSECTION:
                                var r = this.getIntersectingCurves(e);
                                return "" !== r ? this.t("Intersection with __curves__", {
                                    curves: r
                                }) : this.t("Intersection");
                            case u.default.ZERO:
                                return this.t("Zero");
                            case u.default.INTERCEPT:
                                return this.t("Intercept");
                            case u.default.EXTREMUM:
                                return this.t("Extremum");
                            case u.default.EDGE:
                                return this.t("Edge");
                            case u.default.DEFINITION:
                                return this.t("Definition");
                            case u.default.TRACE:
                                return this.t("Trace");
                            case u.default.LABEL:
                                return this.t("Label");
                            default:
                                return this.t("Not a P O I")
                        }
                    }
                    ,
                    e.prototype.getIntersectingCurves = function (e) {
                        return e && e.intersects ? this.getExpressionAriaLabel(e.intersects) : ""
                    }
                    ,
                    e.prototype.getExpressionAriaLabel = function (e) {
                        var t = this.controller.getItemModel(e);
                        return t && "expression" === t.type ? t.label ? t.label : this.controller.isItemSecret(t.id) ? this.t("Secret expression __index__", {
                            index: t.secretIndex
                        }) : this.t("Expression __index__", {
                            index: t.displayIndex
                        }) : ""
                    }
                    ,
                    e.prototype.exitAudioTrace = function (e) {
                        if (this.audioTraceActive) {
                            if (this.audioTraceActive = !1,
                                e || (e = this.t("Audio trace off.")),
                                this.controller.dispatch({
                                    type: "toast/close"
                                }),
                                this.wasFocusInExpressionsView) {
                                var t = this.controller.getSelectedItem();
                                t && this.controller.isItemSelectable(t.id) || (t = this.controller.getFirstFullyVisibleItem()),
                                    t && this.controller.isItemSelectable(t.id) && this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: t.id,
                                        where: "end"
                                    })
                            }
                            this.wasFocusInExpressionsView = !1,
                                this.stopAnimations(),
                                this.sliderTraceActive = !1,
                                this.sliderIndex = 0,
                                this.tonegen.stop(),
                                this.tonegen.suspend(),
                                this.agNavigator.reset(),
                                this.lastSpokenBranch = 0,
                                this.grapher.traceLayer.traceInfo = null,
                                this.grapher.redrawAllLayers(),
                                n.alert(e),
                                this.resumeAnimations()
                        }
                    }
                    ,
                    e.prototype.isFocusInExpressionsView = function () {
                        return !!this.controller.getFocusedItem()
                    }
                    ,
                    e.prototype.enterAudioTrace = function () {
                        var e = this
                            , t = !1;
                        this.audioTraceActive || (this.wasFocusInExpressionsView = this.isFocusInExpressionsView(),
                            t = !this.wasFocusInExpressionsView);
                        var r;
                        if (t)
                            r = this.agNavigator.getFirstTraceableSketch({
                                selectAssociatedExpression: !0
                            });
                        else {
                            var o = this.controller.getSelectedItem();
                            if (o && "expression" === o.type && o.formula && o.formula.error)
                                return this.exitAudioTrace(),
                                    this.controller.dispatch({
                                        type: "toast/show",
                                        toast: {
                                            message: this.t("No graph to trace.")
                                        }
                                    });
                            r = this.agNavigator.getCurrentSketch()
                        }
                        if (!r)
                            return this.agNavigator.reset(),
                                this.lastSpokenBranch = 0,
                                this.exitAudioTrace(),
                                this.controller.dispatch({
                                    type: "toast/show",
                                    toast: {
                                        message: this.t("No graph to trace.")
                                    }
                                });
                        var s = r.branches[0].graphMode;
                        return s === a.IMPLICIT ? (this.exitAudioTrace(),
                            this.controller.dispatch({
                                type: "toast/show",
                                toast: {
                                    message: this.t("Sorry, but I can't trace implicit curves yet.")
                                }
                            })) : s === a.PARAMETRIC ? (this.exitAudioTrace(),
                                this.controller.dispatch({
                                    type: "toast/show",
                                    toast: {
                                        message: this.t("Sorry, but I can't trace parametric curves yet.")
                                    }
                                })) : (this.agNavigator.reset(),
                                    this.agNavigator.computeStepSizes(),
                                    this.lastSpokenBranch = 0,
                                    this.audioTraceActive || (this.grapher.poiLabelsLayer.clearOpenedPOI(),
                                        this.grapher.redrawAllLayers(),
                                        this.wasFocusInExpressionsView && this.grapher.$root.find(".dcg-audio-trace-placeholder").focus(),
                                        this.controller.dispatch({
                                            type: "toast/show",
                                            toast: {
                                                message: this.t("Audio trace on."),
                                                noAria: !0,
                                                onHide: function () {
                                                    return e.exitAudioTrace()
                                                },
                                                hideAfter: 0
                                            }
                                        }),
                                        n.queue(this.t("Audio trace on.")),
                                        this.pauseAnimations(),
                                        this.queueAnimatingPoints(!1),
                                        n.queue(this.t("Use Arrow keys to navigate.")),
                                        this.tonegen.resume(),
                                        this.tonegen.playbackSupported && n.queue(this.t("To hear the graph, press H.")),
                                        i.IS_APPLE ? n.queue(this.t("For a summary of points, press OPTION+S. To disable audio trace, press OPTION+T.")) : n.queue(this.t("For a summary of points, press ALT+S. To disable audio trace, press ALT+T.")),
                                        this.agNavigator.moveToOrigin(),
                                        this.reportAudioTrace(),
                                        n.alert()),
                                    void (this.audioTraceActive = !0))
                    }
                    ,
                    e.prototype.checkIfSelectedItemChanged = function (e) {
                        this.lastSelectedId !== e && (this.lastSelectedId = e,
                            this.audioTraceActive && (e ? (n.queue(this.getExpressionAriaLabel(e)),
                                this.exitSliderTrace(),
                                this.agNavigator.updatePOI(),
                                this.agNavigator.moveToOrigin(),
                                this.reportAudioTrace(),
                                n.alert()) : this.exitAudioTrace()))
                    }
                    ,
                    e.prototype.pauseAnimations = function () {
                        var e = this;
                        this.sliderArray.length = 0;
                        var t = this.controller.getAllModelsWithSliders();
                        t.forEach(function (t) {
                            t.slider.isPlaying && (e.controller.dispatch({
                                type: "set-slider-isplaying",
                                id: t.id,
                                isPlaying: !1
                            }),
                                e.sliderArray.push(t))
                        })
                    }
                    ,
                    e.prototype.resumeAnimations = function () {
                        if (0 !== this.sliderArray.length) {
                            for (var e = 0; e < this.sliderArray.length; e++) {
                                var t = this.sliderArray[e];
                                t.slider.isPlaying !== !0 && this.controller.dispatch({
                                    type: "set-slider-isplaying",
                                    id: t.id,
                                    isPlaying: !0
                                })
                            }
                            this.sliderArray.length = 0
                        }
                    }
                    ,
                    e.prototype.stopAnimations = function () {
                        var e = this
                            , t = this.controller.getAllModelsWithSliders();
                        t.forEach(function (t) {
                            t.slider.isPlaying && e.controller.dispatch({
                                type: "set-slider-isplaying",
                                id: t.id,
                                isPlaying: !1
                            })
                        })
                    }
                    ,
                    e.prototype.getAnimatingVars = function () {
                        for (var e = [], t = 0; t < this.sliderArray.length; t++)
                            e.push('"' + this.sliderArray[t].dependent + '"');
                        return e
                    }
                    ,
                    e.prototype.hasActiveSliders = function () {
                        for (var e = this.controller.getAllModelsWithSliders(), t = 0; t < e.length; t++)
                            if (e[t].slider.isPlaying)
                                return !0;
                        return !1
                    }
                    ,
                    e.prototype.queueAnimatingPoints = function (e) {
                        var t = this.getAnimatingVars();
                        0 !== t.length ? n.queue(this.t("Animating __vars__.", {
                            vars: t.join(", ")
                        })) : e && n.queue(this.t("No animations."))
                    }
                    ,
                    e.prototype.queueSliderValue = function () {
                        this.hasActiveSliders() || this.tonegen.stop();
                        var e = this.getSelectedSlider();
                        if (e) {
                            var t = '"' + e.dependent + '"'
                                , r = e.sliderValue;
                            n.queue(this.t("__label__: __value__.", {
                                label: t,
                                value: r
                            }))
                        } else
                            n.queue(this.t("Unable to determine slider value"))
                    }
                    ,
                    e.prototype.getSelectedSlider = function () {
                        var e = this.controller.getAllModelsWithSliders();
                        return this.sliderIndex <= e.length - 1 ? e[this.sliderIndex] : null
                    }
                    ,
                    e.prototype.incrementSliderValue = function () {
                        this.adjustSlider("up")
                    }
                    ,
                    e.prototype.decrementSliderValue = function () {
                        this.adjustSlider("down")
                    }
                    ,
                    e.prototype.incrementBigSliderValue = function () {
                        this.adjustSlider("bigup")
                    }
                    ,
                    e.prototype.decrementBigSliderValue = function () {
                        this.adjustSlider("bigdown")
                    }
                    ,
                    e.prototype.nextSlider = function () {
                        this.adjustSlider("next")
                    }
                    ,
                    e.prototype.prevSlider = function () {
                        this.adjustSlider("prev")
                    }
                    ,
                    e.prototype.sliderMin = function () {
                        this.adjustSlider("min")
                    }
                    ,
                    e.prototype.sliderMax = function () {
                        this.adjustSlider("max")
                    }
                    ,
                    e.prototype.toggleSliderAnimation = function () {
                        this.adjustSlider("animation")
                    }
                    ,
                    e.prototype.adjustSlider = function (e) {
                        var t = this.getSelectedSlider();
                        if (!t)
                            return void n.queue(this.t("Unable to adjust slider"));
                        var r = t.sliderValue
                            , i = this.controller.getAllModelsWithSliders().length;
                        switch (e) {
                            case "up":
                            case "down":
                            case "bigup":
                            case "bigdown":
                            case "min":
                            case "max":
                                var o = d.computeSliderAdjustment(t, e)
                                    , s = d.computeNewSliderLatex(t.latex, o);
                                this.controller.dispatch({
                                    type: "set-item-latex",
                                    id: t.id,
                                    latex: s
                                });
                                break;
                            case "next":
                                return this.sliderIndex++ ,
                                    this.sliderIndex >= i && (n.queue(this.t("Last slider.")),
                                        this.sliderIndex = i - 1),
                                    this.queueSliderValue(),
                                    void n.alert();
                            case "prev":
                                return this.sliderIndex-- ,
                                    this.sliderIndex < 0 && (n.queue(this.t("First slider.")),
                                        this.sliderIndex = 0),
                                    this.queueSliderValue(),
                                    void n.alert();
                            case "animation":
                                return this.controller.dispatch({
                                    type: "set-slider-isplaying",
                                    id: t.id,
                                    isPlaying: !t.slider.isPlaying
                                }),
                                    t.slider.isPlaying ? n.queue(this.t("__variable__ playing.", {
                                        variable: t.dependent
                                    })) : (n.queue(this.t("__variable__ paused.", {
                                        variable: t.dependent
                                    })),
                                        this.queueSliderValue()),
                                    void n.alert()
                        }
                        t.slider.isPlaying || r === t.sliderValue || (this.queueSliderValue(),
                            n.alert())
                    }
                    ,
                    e.prototype.toggleAudioTrace = function () {
                        this.audioTraceActive ? this.exitAudioTrace() : this.enterAudioTrace()
                    }
                    ,
                    e.prototype.toggleSliderTrace = function () {
                        this.sliderTraceActive ? this.exitSliderTrace() : this.enterSliderTrace()
                    }
                    ,
                    e.prototype.enterSliderTrace = function () {
                        if (!this.sliderTraceActive) {
                            this.sliderIndex = 0;
                            var e = this.controller.getAllModelsWithSliders().length;
                            0 !== e ? (n.queue(this.t("Slider trace on.")),
                                this.queueSliderValue(),
                                this.sliderTraceActive = !0) : (n.queue(this.t("No sliders to trace.")),
                                    this.sliderTraceActive = !1),
                                n.alert()
                        }
                    }
                    ,
                    e.prototype.exitSliderTrace = function () {
                        this.sliderTraceActive && (n.queue(this.t("Slider trace off.")),
                            this.sliderTraceActive = !1,
                            this.sliderIndex = 0,
                            n.alert())
                    }
                    ,
                    e.prototype.recomputePoints = function () {
                        if (this.audioTraceActive && (!this.sliderTraceActive || this.hasActiveSliders())) {
                            this.agNavigator.updatePOI(),
                                this.agNavigator.updateCurrentPoint(),
                                this.agNavigator.resetTracePoint();
                            var e = this.hasActiveSliders();
                            if (e) {
                                var t = this.agNavigator.getCurrentPoint();
                                this.tonegen.startContinuousPlay().queuePoint(t).play()
                            } else
                                this.agNavigator.resetTracePoint(),
                                    this.agNavigator.computeStepSizes()
                        }
                    }
                    ,
                    e.prototype.queuePOICount = function () {
                        var e = this.agNavigator.getCurrentSketch()
                            , t = null !== e ? e.getPOI().length : 0;
                        n.queue(this.t("Points of interest, __x__.", {
                            x: t
                        }))
                    }
                    ,
                    e.prototype.reportAudioTrace = function (e, t) {
                        var r = this.agNavigator.getCurrentPoint();
                        if (e || (t || this.tonegen.stop(),
                            this.tonegen.queuePoint(r).play()),
                            !t) {
                            this.queueCoordinates(r, e);
                            var i = e ? 0 : 100;
                            setTimeout(function () {
                                n.alert()
                            }, i)
                        }
                    }
                    ,
                    e.prototype.adjustPlaybackSpeed = function (e) {
                        switch (e) {
                            case "1":
                                return this.tonegen.audioSpeed = 150,
                                    n.alert(this.t("Graph playback very slow"));
                            case "2":
                                return this.tonegen.audioSpeed = 100,
                                    n.alert(this.t("Graph playback slow"));
                            case "3":
                                return this.tonegen.audioSpeed = 50,
                                    n.alert(this.t("Graph playback normal"));
                            case "4":
                                return this.tonegen.audioSpeed = 30,
                                    n.alert(this.t("Graph playback fast"));
                            case "5":
                                return this.tonegen.audioSpeed = 16,
                                    n.alert(this.t("Graph playback very fast"));
                            default:
                                return this.tonegen.audioSpeed = 50,
                                    n.alert(this.t("Graph playback normal"))
                        }
                    }
                    ,
                    e.prototype.zoom = function (e) {
                        var t = this.grapher.viewportController;
                        t.zoom(e)
                    }
                    ,
                    e
            }();
        t.default = h
    }),
    define("graphing/grapher", ["require", "jquery", "underscore", "./viewport", "./screen", "main/graph_settings", "./canvaslayer", "./poidotslayer", "./poilabelslayer", "./gridlayer", "./graphsketch", "./graphslayer", "./imagelayer", "./projection", "./movablepointslayer", "./viewportcontroller", "./poicontroller", "lib/animation-frame", "underscore_model", "./graph-defaults", "lib/default-spec", "./audiograph", "lib/deepCopy"], function (e) {
        function t() {
            return new a(1024, 768)
        }
        function n() {
            return new s(-10, 10, -10, 10)
        }
        function r(e, r, s, a, c) {
            this.container = e,
                this.$ = i(e),
                this.$root = s,
                this.evaluator = c,
                this.controller = a,
                this.settings = r,
                this.appliedScaling = {};
            var h = t()
                , x = n().squareYAxis(h);
            this.setUserRequestedViewport(x),
                this.__projection = new g(h, x, r),
                this.triggerProjectionChanged = function () { }
                ;
            var E = this;
            this.markLabelsDirty = o.debounce(function () {
                E.evaluator.notifyWhenSynced(function () {
                    E.__isRedrawingSlowly ? E.notifyAfterRedraw(function () {
                        E.poiLabelsLayer.markLabelsDirty(),
                            E.redrawAllLayers()
                    }) : (E.poiLabelsLayer.markLabelsDirty(),
                        E.redrawAllLayers())
                })
            }, 300),
                this.poiController = new b(this, r),
                this.viewportController = v(this, this.controller),
                this.showPOIDots = !0,
                this.$.css("overflow", "hidden"),
                this.graphSketches = {},
                this.graphImages = {},
                this.canvasLayer = l(this),
                this.$.append(this.canvasLayer.$),
                this.imageLayer = m(),
                this.gridLayer = p(),
                this.poiDotsLayer = u(),
                this.graphsLayer = f(this.settings),
                this.movablePointsLayer = y(this.$root, this.settings),
                this.movablePointsLayer.$.css("z-index", "0"),
                this.$.append(this.movablePointsLayer.$),
                this.poiLabelsLayer = d(this.$root, this.settings),
                this.traceLayer = this.poiLabelsLayer,
                this.traceLayer.$.css("z-index", "0"),
                this.$.append(this.traceLayer.$),
                this.scaleAxis = void 0,
                this.__transient = !1,
                this.__sketchOrder = [],
                this.selectedId = null,
                this.__redrawRequested = !1,
                this.__redrawSlowlyIndex = 0,
                this.__isRedrawingSlowly = !1,
                this.domObstructions = [],
                this.events = w(),
                this.audioGraph = new S(this)
        }
        var i = e("jquery")
            , o = e("underscore")
            , s = e("./viewport")
            , a = e("./screen")
            , c = e("main/graph_settings")
            , l = e("./canvaslayer")
            , u = e("./poidotslayer")
            , d = e("./poilabelslayer")
            , p = e("./gridlayer")
            , h = e("./graphsketch")
            , f = e("./graphslayer")
            , m = e("./imagelayer")
            , g = e("./projection")
            , y = e("./movablepointslayer")
            , v = e("./viewportcontroller")
            , b = e("./poicontroller")
            , x = e("lib/animation-frame")
            , w = e("underscore_model")
            , E = e("./graph-defaults")
            , _ = e("lib/default-spec")
            , S = e("./audiograph").default
            , k = e("lib/deepCopy").default;
        return r.prototype.remove = function () {
            this.$.remove(),
                this.poiController.remove(),
                this.viewportController.remove(),
                this.audioGraph.remove()
        }
            ,
            r.prototype.tick = function (e) {
                this.__isRedrawingSlowly ? this._redrawSlowly() : this.__redrawRequested && this._redrawAllLayers(),
                    this.__movablePointListener && this.__movablePointListener()
            }
            ,
            r.prototype.registerMovablePointListener = function (e) {
                this.__movablePointListener = e
            }
            ,
            r.prototype.deregisterMovablePointListener = function () {
                this.__movablePointListener = null
            }
            ,
            r.prototype.setSketchOrder = function (e) {
                o.isEqual(this.__sketchOrder, e) || (this.__sketchOrder = e,
                    this.redrawAllLayers())
            }
            ,
            r.prototype.clear = function () {
                this.graphSketches = {},
                    this.graphImages = {}
            }
            ,
            r.prototype.getGraphSketch = function (e) {
                return e in this.graphSketches ? this.graphSketches[e] : null
            }
            ,
            r.prototype.addGraphSketch = function (e) {
                this.graphSketches[e.id] = e
            }
            ,
            r.prototype.removeGraphSketch = function (e) {
                delete this.graphSketches[e]
            }
            ,
            r.prototype.addGraphImage = function (e) {
                e.imageObj.width && e.imageObj.height ? (this.graphImages[e.id] = e,
                    this.redrawAllLayers()) : i(e.imageObj).on("load.calc_load", function () {
                        this.addGraphImage(e)
                    }
                        .bind(this))
            }
            ,
            r.prototype.removeGraphImage = function (e) {
                var t = this.graphImages[e];
                t && i(t.imageObj).off("load.calc_load"),
                    delete this.graphImages[e],
                    this.redrawAllLayers()
            }
            ,
            r.prototype.getProjection = function () {
                return this.__projection
            }
            ,
            r.prototype._setProjection = function (e) {
                this.__projection = e,
                    this.redrawAllLayers(),
                    this.triggerProjectionChanged()
            }
            ,
            r.prototype.getAudioTrace = function () {
                return this.audioGraph
            }
            ,
            r.prototype.getDefaultViewport = function () {
                var e = this.getProjection();
                return n().squareYAxis(e.screen)
            }
            ,
            r.prototype.updateScreenSize = function (e, t) {
                if (!(e <= 0 || t <= 0)) {
                    var n = this.getProjection()
                        , r = n.screen;
                    if (r.width !== e || r.height !== t) {
                        this.$.width(e);
                        var i = new a(e, t);
                        this.viewportController.setScreen(i)
                    }
                }
            }
            ,
            r.prototype.syncSquareAxes = function () {
                var e = this.getProjection();
                this.settings.setProperty("squareAxes", e.viewport.isSquare(e.screen))
            }
            ,
            r.prototype.setIsVisible = function (e) {
                e !== this.isVisible && (this.isVisible = e,
                    e ? this.redrawAllLayers() : this.canvasLayer.resize(0, 0))
            }
            ,
            r.prototype.hide = function (e) {
                var t = this.getGraphSketch(e);
                t && (t.visible = !1)
            }
            ,
            r.prototype.select = function (e) {
                var t = this.getGraphSketch(this.selectedId);
                t && (t.selected = t.showPOI = t.showHighlight = !1);
                var n = this.getGraphSketch(e);
                n && (n.selected = n.showPOI = n.showHighlight = !0),
                    this.selectedId = e
            }
            ,
            r.prototype.updateSketch = function (e, t) {
                var n = this.getGraphSketch(e);
                if (!t.length)
                    return this.hide(e);
                var r = new h(e, t);
                r.color = t[0].color,
                    r.style = t[0].style,
                    r.updateFrom(n),
                    r.selected = r.showPOI = r.showHighlight = String(e) === String(this.selectedId),
                    this.addGraphSketch(r)
            }
            ,
            r.prototype.updateIntersections = function (e, t) {
                var n = this.getGraphSketch(e);
                n && n.updateIntersections(t)
            }
            ,
            r.prototype.redrawAllLayers = function () {
                this.cancelRedrawSlowly(),
                    this.__redrawRequested = !0
            }
            ,
            r.prototype._clear = function () {
                var e = this.getProjection()
                    , t = e.screen;
                this.canvasLayer.resize(e.screen.width, e.screen.height),
                    this.canvasLayer.ctx.clearRect(0, 0, t.width, t.height)
            }
            ,
            r.prototype._redrawAllLayers = function () {
                this.isVisible && (this._clear(),
                    this._redrawImageLayer(),
                    this._redrawGridLayer(),
                    this._redrawGraphsLayer(),
                    this._redrawPointsAndLabels(),
                    this._updateCanvasLayerAria(),
                    this.audioGraph.recomputePoints(),
                    this.__redrawRequested = !1,
                    this.events.triggerEvent("redraw"))
            }
            ,
            r.prototype.cancelRedrawSlowly = function () {
                this.__isRedrawingSlowly && (this.__redrawSlowlyIndex = 0,
                    this.__isRedrawingSlowly = !1,
                    this.redrawAllLayers())
            }
            ,
            r.prototype.redrawSlowly = function () {
                this.__isRedrawingSlowly || (this.__redrawSlowlyIndex = 0,
                    this.__isRedrawingSlowly = !0,
                    this.audioGraph.recomputePoints())
            }
            ,
            r.prototype._redrawSlowly = function () {
                var e = this.__redrawSlowlyIndex;
                if (0 === e && (this._clear(),
                    this._redrawGridLayer()),
                    e >= this.__sketchOrder.length)
                    return void this.cancelRedrawSlowly();
                var t = this.__sketchOrder[e]
                    , n = {}
                    , r = {};
                n[t] = this.graphSketches[t],
                    r[t] = this.graphImages[t],
                    (r[t] || n[t]) && this.graphsLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), n, r, [t]),
                    this.__redrawSlowlyIndex += 1
            }
            ,
            r.prototype._redrawGridLayer = function () {
                this.gridLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.scaleAxis)
            }
            ,
            r.prototype._redrawGraphsLayer = function () {
                this.graphsLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.graphSketches, this.graphImages, this.__sketchOrder)
            }
            ,
            r.prototype._updateCanvasLayerAria = function () {
                this.canvasLayer.updateAria(this.isVisible, Object.keys(this.graphSketches).length)
            }
            ,
            r.prototype.addDomObstruction = function (e) {
                this.domObstructions.push(e)
            }
            ,
            r.prototype._redrawPointsAndLabels = function () {
                this.movablePointsLayer.redraw(this.getProjection(), this.graphSketches),
                    this.showPOIDots && this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.graphSketches);
                var e, t = [], n = this.poiLabelsLayer.$[0].getBoundingClientRect(), r = this.movablePointsLayer.renderedMovablePoints;
                for (var i in r) {
                    var s = r[i].$.find(".dcg-background")[0];
                    e = s.getBoundingClientRect(),
                        t.push({
                            left: e.left - n.left,
                            top: e.top - n.top,
                            right: e.right - n.left,
                            bottom: e.bottom - n.top
                        })
                }
                o.each(this.domObstructions, function (r) {
                    e = r.getBoundingClientRect(),
                        t.push({
                            left: e.left - n.left,
                            top: e.top - n.top,
                            right: e.right - n.left,
                            bottom: e.bottom - n.top
                        })
                }),
                    this.poiLabelsLayer.redraw(this.getProjection(), this.graphSketches, this.canvasLayer.ctx, t)
            }
            ,
            r.prototype._redrawImageLayer = function () {
                this.imageLayer.redrawToCtx(this.canvasLayer.ctx, this.getProjection(), this.graphImages, this.__sketchOrder)
            }
            ,
            r.prototype._parseScreenshotOpts = function (e) {
                var t, n, r, i, o, s = this.getProjection();
                return e ? (t = e.width || e.height || s.screen.width,
                    n = e.height || e.width || s.screen.height,
                    r = e.targetPixelRatio || 1,
                    i = (e.width < 256 || e.height < 256) && !e.preserveAxisNumbers,
                    o = c.fromObject(this.settings || this.settings)) : (t = s.screen.width,
                        n = s.screen.height,
                        r = 1,
                        i = !1,
                        o = c.fromObject(this.settings)),
                    i && (o.setProperty("xAxisNumbers", !1),
                        o.setProperty("yAxisNumbers", !1),
                        o.setProperty("polarNumbers", !1)),
                    {
                        width: t,
                        height: n,
                        targetPixelRatio: r,
                        settings: o
                    }
            }
            ,
            r.prototype.screenshot = function (e) {
                var t = this._parseScreenshotOpts(e)
                    , n = document.createElement("canvas");
                return n.width = t.width * t.targetPixelRatio,
                    n.height = t.height * t.targetPixelRatio,
                    this.screenshotToCanvas(n, e),
                    n.toDataURL("image/png")
            }
            ,
            r.prototype.getImageData = function (e, t, n, r) {
                return this.canvasLayer.ctx.getImageData(e, t, n, r)
            }
            ,
            r.prototype.screenshotToCanvas = function (e, t) {
                t = this._parseScreenshotOpts(t);
                var n = t.width
                    , r = t.height
                    , i = t.targetPixelRatio
                    , o = t.settings;
                o.takingScreenshot = !0;
                var s = e.getContext("2d");
                s.scale(i, i);
                var c = new a(n, r)
                    , l = this.getProjection().viewport;
                this.getSetting("squareAxes") && (l = l.squareCrop(c));
                var u = new g(c, l, o);
                s.fillStyle = "white",
                    s.fillRect(0, 0, c.width, c.height),
                    this.imageLayer.redrawToCtx(s, u, this.graphImages, this.__sketchOrder),
                    this.gridLayer.redrawToCtx(s, u),
                    this.graphsLayer.redrawToCtx(s, u, this.graphSketches, this.graphImages, this.__sketchOrder)
            }
            ,
            r.prototype.thumbnail = r.prototype.screenshot,
            r.prototype.getSetting = function (e, t) {
                var n = this.settings.getProperty(e);
                return void 0 !== n ? n : t
            }
            ,
            r.prototype.getState = function (e) {
                var t = {}
                    , n = this;
                return this.settings.stateProperties.forEach(function (e) {
                    t[e] = n.getSetting(e)
                }),
                    t.viewport = this.getCurrentViewport(),
                    e.stripDefaults && (t = _.stripDefaults(E, t)),
                    t
            }
            ,
            r.prototype.getUndoRedoState = function () {
                var e = {}
                    , t = this;
                return this.settings.stateProperties.forEach(function (n) {
                    e[n] = t.getSetting(n)
                }),
                    e.viewport = this.getUserRequestedViewport(),
                    e
            }
            ,
            r.prototype.notifyAfterRedraw = function (e) {
                if (this.__isRedrawingSlowly)
                    x.requestAnimationFrame(this.notifyAfterRedraw.bind(this, e));
                else if (this.__redrawRequested) {
                    this.notifyAfterRedraw_i ? this.notifyAfterRedraw_i++ : this.notifyAfterRedraw_i = 1;
                    var t = "redraw.notifyAfterRedraw" + this.notifyAfterRedraw_i;
                    this.events.observeEvent(t, function () {
                        this.events.unobserveEvent(t),
                            e()
                    }
                        .bind(this))
                } else
                    e()
            }
            ,
            r.prototype.getUserRequestedViewport = function () {
                return this._lastUserRequestedViewport
            }
            ,
            r.prototype.getCurrentViewport = function () {
                return this.viewportController.getViewport().toObject()
            }
            ,
            r.prototype.setUserRequestedViewport = function (e) {
                this._lastUserRequestedViewportUpdateToken || (this._lastUserRequestedViewportUpdateToken = 0),
                    this._lastUserRequestedViewportUpdateToken += 1,
                    this._lastUserRequestedViewport = k(e)
            }
            ,
            r.prototype.debounceUserRequestedViewportChange = function () {
                if (!this.__debouncedViewportCommit) {
                    var e = 1e3;
                    this.__debouncedViewportCommit = o.debounce(function (e, t) {
                        this.isDragging || this._lastUserRequestedViewportUpdateToken === t && this.controller.dispatch({
                            type: "commit-user-requested-viewport",
                            viewport: e
                        })
                    }
                        .bind(this), e)
                }
                var t = this.getCurrentViewport();
                this.__debouncedViewportCommit(t, this._lastUserRequestedViewportUpdateToken)
            }
            ,
            r.prototype.setGrapherState = function (e, t) {
                e = _.populateDefaults(E, e),
                    t && t.doNotClear || this.clear();
                for (var n in E)
                    E.hasOwnProperty(n) && this.settings.setProperty(n, e[n]);
                if ("viewport" in e) {
                    var r = s.fromObject(e.viewport);
                    this.setUserRequestedViewport(r);
                    var i = this.getProjection().screen;
                    this.getSetting("squareAxes") && !r.isSquare(i) && (r = r.squareYAxis(i)),
                        this.viewportController.setViewport(r)
                }
                this.redrawAllLayers()
            }
            ,
            r
    }),
    define("loadcss!keypad", function () { }),
    define("template", {
        load: function (e) {
            throw new Error("Dynamic load not allowed: " + e)
        }
    }),
    define("template!keypad", ["underscore"], function (_) {
        return function (obj) {
            var __t, __p = "", __j = Array.prototype.join, print = function () {
                __p += __j.call(arguments, "")
            };
            with (obj || {})
            __p += "<div class='dcg-keypad' role='complementary' aria-label='Keypad'>\n  <div class='dcg-keys-container dcg-retracted'>\n    <div class='dcg-keys-background dcg-do-not-blur'>\n      <div class='dcg-keys'>\n\n        <div class='dcg-functions-popover dcg-popover dcg-top' style=\"display: none;\">\n          <div class='dcg-popover-interior'>\n            <div class='dcg-popover-header'>\n              <table><tr>\n              ",
                _.each(popups.functionsPopup, function (e, t) {
                    __p += '\n                <td>\n                  <span role="button" key="' + (null == (__t = e.tab.id) ? "" : _.escape(__t)) + '" class="dcg-heading dcg-tappable dcg-btn-medium-gray' + (null == (__t = "trig" == t ? " dcg-selected" : "") ? "" : _.escape(__t)) + '">\n                    ' + (null == (__t = e.tab.html) ? "" : __t) + "\n                  </span>\n                </td>\n              "
                }),
                __p += "\n              </tr></table>\n            </div>\n\n            ",
                _.each(popups.functionsPopup, function (e, t) {
                    __p += "\n              <table class='dcg-interior-buttons' section='" + (null == (__t = t) ? "" : _.escape(__t)) + "'>\n                ",
                        "trig" == t && (__p += "\n                  <tr class='dcg-section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                "),
                        __p += "\n                <tr>\n\n                ";
                    var n = 0;
                    _.each(e.funcs, function (e) {
                        __p += "\n                  " + (null == (__t = n % 3 == 0 ? "</tr><tr>" : "") ? "" : __t) + "\n                  ",
                            n++ ,
                            __p += '\n                  <td>\n                    <span\n                      role="button"\n                      aria-label="' + (null == (__t = e.ariaLabel) ? "" : _.escape(__t)) + '"\n                      class="dcg-option dcg-tappable ' + (null == (__t = e.aClass) ? "" : _.escape(__t)) + " dcg-" + (null == (__t = e.id) ? "" : _.escape(__t)) + '-key"\n                      key="' + (null == (__t = e.id) ? "" : _.escape(__t)) + '"\n                    >\n                      ' + (null == (__t = e.html) ? "" : __t) + "\n                    </span>\n                  </td>\n              "
                    }),
                        __p += "\n              </tr></table>\n            "
                }),
                __p += "\n          </div>\n          <div class='dcg-arrow'></div>\n        </div>\n\n        ",
                _.each(buttons, function (e, t) {
                    __p += '\n         <div class="dcg-' + (null == (__t = t) ? "" : _.escape(__t)) + ' dcg-main-keypad-section">\n           ',
                        _.each(e, function (e) {
                            __p += '\n             <div class="dcg-row">\n               ',
                                _.each(e.keys, function (e) {
                                    __p += '<div\n                   class="dcg-cell ' + (null == (__t = e.cellClass ? e.cellClass : "") ? "" : _.escape(__t)) + '"\n                 >\n                   ',
                                        e.html && (__p += '\n                     <span\n                       aria-label="' + (null == (__t = e.ariaLabel) ? "" : _.escape(__t)) + '"\n                       role="button" class="' + (null == (__t = e.aClass) ? "" : _.escape(__t)) + " dcg-" + (null == (__t = e.id) ? "" : _.escape(__t)) + '-key"\n                       key="' + (null == (__t = e.id) ? "" : _.escape(__t)) + '"\n                     >\n                       ' + (null == (__t = e.html) ? "" : __t) + "\n                     </a>\n                   "),
                                        __p += "\n                 </div>"
                                }),
                                __p += "\n               <div style='clear:both'></div>\n             </div>\n           "
                        }),
                        __p += "\n         </div>\n        "
                }),
                __p += '\n        <div style=\'clear:both\'></div>\n      </div>\n\n      <div role="button" aria-label="' + (null == (__t = t("Hide Keypad")) ? "" : _.escape(__t)) + "\" class='dcg-minimize-keypad dcg-tooltip' tooltip=\"" + (null == (__t = t("Hide Keypad").split(" ").map(_.escape).join("&nbsp;")) ? "" : __t) + "\">\n        <i class='dcg-icon-keyboard'></i>\n        <i class='dcg-icon-caret-down'></i>\n      </div>\n    </div>\n  </div>\n\n  <div role=\"button\" aria-label=\"" + (null == (__t = t("Show Keypad")) ? "" : _.escape(__t)) + '" class="dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur dcg-tooltip" tooltip="' + (null == (__t = t("Show Keypad").split(" ").map(_.escape).join("&nbsp;")) ? "" : __t) + '">\n    <i class=\'dcg-icon-keyboard\'></i>\n    <i class="dcg-icon-caret-up dcg-do-not-blur"></i>\n  </div>\n</div>\n';
            return __p
        }
    }),
    define("underscore_view", ["require", "jquery", "underscore", "./underscore_model", "pjs", "i18n"], function (e) {
        var t = e("jquery")
            , n = e("underscore")
            , r = e("./underscore_model")
            , i = e("pjs")
            , o = e("i18n")
            , s = []
            , a = i(r, function (e, r, i) {
                i.staticTemplate = function (e) {
                    var n = t(e)[0];
                    return function () {
                        return n.cloneNode(!0)
                    }
                }
                    ,
                    e.$ = function (e) {
                        var n = t(this.__domNode);
                        return e ? n.filter(e).add(n.find(e)) : n
                    }
                    ;
                var a = function (e) {
                    return function (n) {
                        var r = 0 === s.length;
                        if (s.push(this),
                            this.__domNode || c.call(this),
                            t(n)[e](this.$()),
                            r)
                            for (; s.length;)
                                s.pop().didInsertElement();
                        return this.$()
                    }
                };
                e.appendTo = a("append"),
                    e.replace = a("replaceWith"),
                    e.prependTo = a("prepend"),
                    e.insertAfter = a("after"),
                    e.insertBefore = a("before"),
                    e.remove = function () {
                        this.$().remove(),
                            this.destruct()
                    }
                    ,
                    e.destruct = function () { }
                    ,
                    e.didCreateElement = function () { }
                    ,
                    e.didInsertElement = function () { }
                    ,
                    e.getTemplateParams = function () {
                        return {}
                    }
                    ,
                    e.beforeRerender = function () { }
                    ,
                    e.afterRerender = function () { }
                    ,
                    e.rerender = function () {
                        var e = this.getTemplateParams();
                        if (!n.isEqual(e, this.__lastRenderParams)) {
                            var t = this.__domNode;
                            this.beforeRerender(),
                                c.call(this),
                                this.replace(t),
                                this.afterRerender()
                        }
                    }
                    ,
                    e.setDomNode = function (e) {
                        this.__domNode = e[0] ? e[0] : e,
                            this.didInsertElement()
                    }
                    ;
                var c = function () {
                    var e = this.getTemplateParams()
                        , r = n.extend({}, e);
                    r.t || (r.t = o.t.bind(o));
                    var i, s = this.template(r);
                    if (i = t("string" == typeof s ? t.parseHTML(s.trim()) : s),
                        1 !== i.length)
                        throw new Error("Template Error: template must return exactly one DOM node.");
                    this.__domNode = i[0],
                        this.__lastRenderParams = e,
                        this.didCreateElement()
                }
            });
        return a
    }),
    define("submodules/dcgview/src/attr-event-handler", [], function () {
        function e(e, t) {
            if (null !== t && void 0 !== t) {
                if ("string" != typeof e)
                    throw new Error("Must pass a string for an EventHandler name");
                if ("function" != typeof t)
                    throw new Error("Must pass a function for an EventHandler callback");
                return {
                    bindings: {
                        onMount: function (n) {
                            n[e.toLowerCase()] = t
                        }
                    }
                }
            }
        }
        return e
    }),
    define("submodules/dcgview/src/const", ["require"], function (e) {
        function t(e) {
            var t = function () {
                return e
            };
            return t.isDCGViewConst = !0,
                t
        }
        function n(e) {
            return !("function" != typeof e || !e.isDCGViewConst)
        }
        return {
            isConst: n,
            makeConst: t
        }
    }),
    define("submodules/dcgview/src/attr", ["require"], function (e) {
        function t(e, t, n) {
            void 0 === n ? e.removeAttribute(t) : e.setAttribute(t, n + "")
        }
        return {
            update: t
        }
    }),
    define("submodules/dcgview/src/attr-generic", ["require", "./const", "./attr"], function (e) {
        function t(e, t) {
            var i, o = t();
            return n.isConst(t) || (i = {
                onUpdate: function (n) {
                    var i = t();
                    i !== o && (o = i,
                        r.update(n, e, i))
                }
            }),
                {
                    value: o,
                    bindings: i
                }
        }
        var n = e("./const")
            , r = e("./attr");
        return t
    }),
    define("submodules/dcgview/src/is-event-handler", [], function () {
        function e(e) {
            return "o" === e[0] && "n" === e[1] && e[2].toUpperCase() === e[2]
        }
        return e
    }),
    define("submodules/dcgview/src/custom-attributes", ["require"], function (e) {
        function t(e, t) {
            i[e] = t
        }
        function n(e) {
            return i.hasOwnProperty(e)
        }
        function r(e, t) {
            var n = i[e];
            return n(t)
        }
        var i = {};
        return {
            isCustomAttribute: n,
            add: t,
            parse: r
        }
    }),
    define("submodules/dcgview/src/bindings", ["require"], function (e) {
        function t(e, t, n) {
            var r = e._bindings[t];
            r ? r.push(n) : e._bindings[t] = [n]
        }
        function n(e, t) {
            var n = e._bindings[t];
            if (n)
                for (var r = n.length, i = 0; i < r; i++)
                    n[i]()
        }
        return {
            add: t,
            invoke: n
        }
    }),
    define("submodules/dcgview/src/bind-attrs", ["require", "./attr-event-handler", "./attr-generic", "./is-event-handler", "./custom-attributes", "./bindings"], function (e) {
        function t(e, t, n) {
            var r = n.bindings;
            if (r)
                for (var i in r) {
                    var o = r[i];
                    i in l && (o = o.bind(null, t)),
                        c.add(e, i, o)
                }
        }
        function n(e, t) {
            if ("function" != typeof t)
                throw new Error('The "' + e + '" attr must be a function. It is: ' + JSON.stringify(t));
            return a.isCustomAttribute(e) ? a.parse(e, t) : s(e) ? i(e, t) : o(e, t)
        }
        function r(e, r, i) {
            if (r)
                for (var o in r) {
                    var s = n(o, r[o]);
                    if (s) {
                        var a = s.value;
                        void 0 !== a && i.setAttribute(o, a),
                            s.bindings && t(e, i, s)
                    }
                }
        }
        var i = e("./attr-event-handler")
            , o = e("./attr-generic")
            , s = e("./is-event-handler")
            , a = e("./custom-attributes")
            , c = e("./bindings")
            , l = {
                onMount: !0,
                didMount: !0,
                willUnmount: !0,
                willUpdate: !0,
                onUpdate: !0,
                didUpdate: !0
            };
        return r
    }),
    define("submodules/dcgview/src/bind-text", ["require", "./bindings"], function (e) {
        function t() {
            i = !0
        }
        function n(e, t, n) {
            if ("function" != typeof n)
                throw new Error("bindText expects a function");
            var o = n();
            void 0 !== o && null !== o || (o = "");
            var s = document.createTextNode(o);
            if (i) {
                var a = document.createElement("span");
                a.appendChild(s),
                    t.appendChild(a)
            } else
                t.appendChild(s);
            r.add(e, "onUpdate", function () {
                var e = n();
                void 0 !== e && null !== e || (e = ""),
                    o !== e && (s.nodeValue = e,
                        o = e)
            })
        }
        var r = e("./bindings")
            , i = !1;
        return {
            bindText: n,
            enableSpanWrapping: t
        }
    }),
    define("submodules/dcgview/src/warnings", ["require"], function (e) {
        function t(e) {
            i.push(e)
        }
        function n(e) {
            var t = i;
            i = [];
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r !== e && i.push(r)
            }
        }
        function r(e) {
            try {
                throw new Error(e)
            } catch (e) {
                console.warn(e);
                for (var t = 0; t < i.length; t++)
                    i[t](e)
            }
        }
        var i = [];
        return {
            warn: r,
            addWarningHandler: t,
            removeWarningHandler: n
        }
    }),
    define("submodules/dcgview/src/dcg-element", ["require", "./bind-attrs", "./bind-text", "./const", "./warnings"], function (e) {
        function t(e, t) {
            var n = document.createTextNode(t);
            e.appendChild(n)
        }
        function n(e, t, n) {
            this.tagName = e,
                this.attrs = t,
                this.children = n
        }
        var r = e("./bind-attrs")
            , i = e("./bind-text").bindText
            , o = e("./const")
            , s = e("./warnings");
        return n.prototype._isDCGElement = !0,
            n.prototype.renderToDocFrag = function (e, n) {
                if (this._domNode)
                    throw new Error("Cannot remount a DCGElement");
                var a = this.children
                    , c = document.createElement(this.tagName);
                this._domNode = c,
                    r(n, this.attrs, c),
                    e.appendChild(c);
                for (var l = a.length, u = 0; u < l; u++) {
                    var d = a[u];
                    d._isDCGElement ? d.renderToDocFrag(c, n) : o.isConst(d) ? t(c, d()) : "function" == typeof d ? i(n, c, d) : (s.warn("Text should be a const or a getter: " + JSON.stringify(d)),
                        t(c, d))
                }
            }
            ,
            n
    }),
    define("submodules/dcgview/src/create-element", ["require", "./dcg-element"], function (e) {
        function t(e, n) {
            if (null !== e && void 0 !== e)
                if (Array.isArray(e))
                    for (var r = 0; r < e.length; r++)
                        t(e[r], n);
                else
                    n.push(e)
        }
        function n(e, n) {
            for (var i = [], o = arguments.length - 1, s = 2; s <= o; s++)
                t(arguments[s], i);
            if ("string" == typeof e)
                return new r(e, n, i);
            if (e && e._isDCGViewClass)
                return new e(n, i);
            throw new Error("createElement expects a String or DCGViewClass")
        }
        var r = e("./dcg-element");
        return n
    }),
    define("submodules/dcgview/src/mounting", ["require", "./bindings"], function (e) {
        function t() {
            for (var e = this._element; e._isDCGView;)
                e = e._element;
            return e._domNode
        }
        function n(e, t) {
            if (t && t._childViews.push(this),
                this.__generatedHTMLBefore)
                throw new Error("Cannot remount a DCGView");
            this.__generatedHTMLBefore = !0,
                this._element.renderToDocFrag(e, this)
        }
        function r(e, t, n) {
            if (!e || !e._isDCGViewClass)
                throw new Error("Must pass a DCGView class to be mounted");
            if (!t || 1 !== t.nodeType)
                throw new Error("Must pass an HTMLElement for the node");
            if (t._mountedDCGView)
                throw new Error("This node is already mounted by a view");
            var r = new e(n)
                , i = document.createDocumentFragment();
            return r.renderToDocFrag(i),
                t.innerHTML = "",
                o(r),
                t._mountedDCGView = r,
                t.appendChild(i),
                s(r),
                a(r),
                r
        }
        function i(e) {
            var t = e._mountedDCGView;
            if (!t)
                throw new Error("This node is not mounted by a DCGView");
            c(t),
                e.innerHTML = "",
                delete e._mountedDCGView,
                l(t),
                u(t)
        }
        function o(e) {
            e.willMount && e.willMount(),
                p.invoke(e, "willMount"),
                e._childViews.forEach(o)
        }
        function s(e) {
            e._isMounted = !0,
                e.onMount && e.onMount(),
                p.invoke(e, "onMount"),
                e._childViews.forEach(s)
        }
        function a(e) {
            e.didMount && e.didMount(),
                p.invoke(e, "didMount"),
                e._childViews.forEach(a)
        }
        function c(e) {
            e.willUnmount && e.willUnmount(),
                p.invoke(e, "willUnmount"),
                e._childViews.forEach(c)
        }
        function l(e) {
            e._isMounted = !1,
                e._childViews.forEach(l),
                p.invoke(e, "onUnmount"),
                e.onUnmount && e.onUnmount()
        }
        function u(e) {
            e._childViews.forEach(u),
                p.invoke(e, "didUnmount"),
                e.didUnmount && e.didUnmount()
        }
        function d(e, t) {
            var n = document.createDocumentFragment();
            return e.renderToDocFrag(n, t),
                n.firstChild
        }
        var p = e("./bindings");
        return {
            renderToDocFrag: n,
            findRootNode: t,
            createNodeForView: d,
            willMount: o,
            onMount: s,
            didMount: a,
            willUnmount: c,
            onUnmount: l,
            didUnmount: u,
            mountToNode: r,
            unmountFromNode: i
        }
    }),
    define("submodules/dcgview/src/update", ["require", "./bindings", "./warnings"], function (e) {
        function t() {
            if (!this._isMounted)
                return r.warn("Trying to update view that is not mounted. Ignoring update.");
            if (!this.shouldUpdate || this.shouldUpdate()) {
                if (this.willUpdate && this.willUpdate(),
                    n.invoke(this, "willUpdate"),
                    n.invoke(this, "onUpdate"),
                    this.onUpdate && this.onUpdate(),
                    this.overrideChildUpdates)
                    this.overrideChildUpdates();
                else
                    for (var e = this._childViews, t = e.length, i = 0; i < t; i++)
                        e[i].update();
                n.invoke(this, "didUpdate"),
                    this.didUpdate && this.didUpdate()
            }
        }
        var n = e("./bindings")
            , r = e("./warnings");
        return {
            update: t
        }
    }),
    define("submodules/dcgview/src/spread", ["require"], function (e) {
        function t(e) {
            var t = arguments.length;
            if (t < 2)
                return e;
            for (var n = 1; n < t; n++)
                for (var r = arguments[n], i = Object.keys(r), o = i.length, s = 0; s < o; s++) {
                    var a = i[s];
                    e[a] = r[a]
                }
            return e
        }
        return t
    }),
    define("submodules/dcgview/src/create-class", ["require", "./create-element", "./mounting", "./update", "./const", "./spread"], function (e) {
        function t(e) {
            if (!e)
                throw new Error("must pass a spec to DCGView.createClass");
            if ("function" != typeof e.template)
                throw new Error("must pass a template function to DCGView.createClass");
            var t = function (e, t) {
                this._setupProps(e, t),
                    this.init && this.init(),
                    this._callTemplate()
            };
            t.prototype._setupProps = function (e, t) {
                if (this.p = {},
                    e) {
                    for (var n in e) {
                        var r = e[n];
                        if ("function" != typeof r)
                            throw new Error('The "' + n + '" prop must be a function. It is: ' + JSON.stringify(r));
                        Object.defineProperty(this.p, n, {
                            get: r
                        })
                    }
                    this.props = e
                } else
                    this.props = {};
                this.children = t,
                    this._childViews = [],
                    this._bindings = {}
            }
                ,
                t.prototype._callTemplate = function () {
                    if (this._element = this.template(),
                        !this._element || !this._element._isDCGElement)
                        throw new Error("template() must return a DCGElement")
                }
                ,
                t.prototype.bindFn = function (e) {
                    return e.bind(this)
                }
                ,
                t.prototype.findRootNode = r.findRootNode,
                t.prototype.renderToDocFrag = r.renderToDocFrag,
                t.prototype.const = o.makeConst,
                t.prototype.spread = s,
                t.prototype.createElement = n,
                t.prototype.update = i.update;
            for (var a in e)
                if (e.hasOwnProperty(a)) {
                    if (t.prototype.hasOwnProperty(a))
                        throw new Error("Cannot override the " + a + "() method");
                    t.prototype[a] = e[a]
                }
            return t._isDCGViewClass = !0,
                t.prototype._isDCGView = !0,
                t.prototype._isDCGElement = !0,
                t
        }
        var n = e("./create-element")
            , r = e("./mounting")
            , i = e("./update")
            , o = e("./const")
            , s = e("./spread");
        return t
    }),
    define("submodules/dcgview/src/attr-style", ["require", "./const", "./attr"], function (e) {
        function t(e) {
            var t = e()
                , n = typeof t;
            if ("string" === n)
                return t;
            if (!n || "object" !== n)
                throw new Error("Unsupported type returned from style getter: " + n);
            var r = "";
            for (var i in t) {
                var o = t[i];
                t.hasOwnProperty(i) && null !== o && void 0 !== o && (r ? r += ";" + i + ":" + o : r = i + ":" + o)
            }
            return r
        }
        function n(e) {
            var n, o = t(e);
            return r.isConst(e) || (n = {
                onUpdate: function (n) {
                    var r = t(e);
                    o !== r && (i.update(n, "style", r),
                        o = r)
                }
            }),
                {
                    value: o,
                    bindings: n
                }
        }
        var r = e("./const")
            , i = e("./attr");
        return n
    }),
    define("submodules/dcgview/src/attr-class", ["require", "./const"], function (e) {
        function t(e) {
            var t = e()
                , n = typeof t;
            if ("string" === n)
                return t;
            if (!n || "object" !== n)
                throw new Error("Unsupported type returned from class getter: " + n);
            var r = "";
            for (var i in t)
                if (t.hasOwnProperty(i)) {
                    var o = t[i];
                    o && (r ? r += " " + i : r = i)
                }
            return r
        }
        function n(e, t, n) {
            for (var r = [], i = e.className.replace(o, "").split(s), a = t.replace(o, "").split(s), c = {}, l = a.length - 1; l >= 0; l--)
                c[a[l]] = !0;
            var u = i.length;
            for (l = 0; l < u; l++) {
                var d = i[l];
                c.hasOwnProperty(d) || r.push(d)
            }
            return n ? r.length ? n + " " + r.join(" ") : n : r.join(" ")
        }
        function r(e) {
            var r, o = t(e);
            return i.isConst(e) || (r = {
                onUpdate: function (r) {
                    var i = t(e);
                    o !== i && (r.className === o ? (r.className = i,
                        o = i) : (r.className = n(r, o, i),
                            o = i))
                }
            }),
                {
                    value: o,
                    bindings: r
                }
        }
        var i = e("./const")
            , o = /^\s+|\s+$/g
            , s = /\s+/;
        return r
    }),
    define("submodules/dcgview/src/attr-lifecycle", ["require", "./const"], function (e) {
        function t(e) {
            return function (t) {
                if ("function" != typeof t)
                    throw new Error("The " + e + " attribute expects a function for the value");
                if (n.isConst(t))
                    throw new Error("The " + e + " attribute does not expect a const for the value");
                var r = {
                    bindings: {}
                };
                return r.bindings[e] = t,
                    r
            }
        }
        var n = e("./const");
        return t
    }),
    define("submodules/dcgview/src/longest-subsequence", ["require"], function (e) {
        return function (e) {
            var t, n, r = e.length, i = new Array(r), o = new Array(r + 1), s = 0;
            for (n = 0; n < r; n++) {
                if (e[o[s]] < e[n])
                    t = s + 1;
                else {
                    for (var a = 1, c = s - 1; a <= c;) {
                        var l = Math.ceil((a + c) / 2);
                        e[o[l]] < e[n] ? a = l + 1 : c = l - 1
                    }
                    t = a
                }
                i[n] = o[t - 1],
                    o[t] = n,
                    t > s && (s = t)
            }
            var u = new Array(s)
                , d = o[s];
            for (n = s - 1; n >= 0; n--)
                u[n] = e[d],
                    d = i[d];
            return u
        }
    }),
    define("submodules/dcgview/src/compute-key-mutations", ["require", "./longest-subsequence"], function (e) {
        function t(e, t) {
            var r, i, o = {}, s = [], a = [];
            for (r = 0; r < t.length; r++)
                i = t[r],
                    o[i] = r;
            for (r = 0; r < e.length; r++)
                i = e[r],
                    void 0 === o[i] && s.push(i);
            var c = [];
            for (r = 0; r < e.length; r++) {
                i = e[r];
                var l = o[i];
                void 0 !== l && c.push(l)
            }
            var u = n(c)
                , d = {};
            for (r = 0; r < u.length; r++)
                i = t[u[r]],
                    d[i] = !0;
            for (r = t.length - 1; r >= 0; r--)
                i = t[r],
                    d[i] || a.push({
                        key: i,
                        beforeKey: t[r + 1]
                    });
            return {
                removes: s,
                inserts: a
            }
        }
        var n = e("./longest-subsequence");
        return t
    }),
    define("submodules/dcgview/src/for", ["require", "./create-class", "./compute-key-mutations", "./const", "./mounting"], function (e) {
        var t = e("./create-class")
            , n = e("./compute-key-mutations")
            , r = e("./const")
            , i = e("./mounting")
            , o = t({
                template: function () {
                    return this.children[0]
                }
            })
            , s = t({
                _isDCGFor: !0,
                getKeys: function () {
                    this._keyToItem = {};
                    var e = this.props.each();
                    if (!Array.isArray(e))
                        throw new Error("<For each={}> must return an array");
                    var t = this.props.key ? e.map(this.props.key) : e.slice(0);
                    if (!this._chosenKeyType && t.length && (this._chosenKeyType = typeof t[0],
                        "string" !== this._chosenKeyType && "number" !== this._chosenKeyType))
                        throw new Error("The key: " + JSON.stringify(t[0]) + " is not a string or number");
                    for (var n = 0; n < t.length; n++) {
                        var r = t[n];
                        if (typeof r !== this._chosenKeyType)
                            throw new Error("Keys must be the same type. " + JSON.stringify(r) + " is not a " + this._chosenKeyType);
                        if (r in this._keyToItem)
                            throw new Error("The key: " + JSON.stringify(r) + " is not unique");
                        this._keyToItem[r] = e[n]
                    }
                    return t
                },
                createViewForKey: function (e) {
                    var t = this._keyToItem[e]
                        , n = this._viewFunction.call(this, t, e)
                        , r = n;
                    return r._isDCGView || (r = this.createElement(o, null, n)),
                        this._keyToView[e] = r,
                        r
                },
                template: function () {
                    if (this._keyToView = {},
                        "function" != typeof this.props.each)
                        throw new Error("<For each={}> must be a function");
                    if (1 !== this.children.length)
                        throw new Error("<For> expects a single child. You passed " + this.children.length);
                    var e = this.children[0];
                    if (!e || !e._isDCGElement)
                        throw new Error("<For> expects the root node to be a DCGElement. You passed " + JSON.stringify(e));
                    if (e._isDCGView)
                        throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");
                    if (1 !== e.children.length)
                        throw new Error("<For> expects a root node with a single child. You passed " + e.children.length);
                    if (this._viewFunction = e.children[0],
                        this._viewFunction && this._viewFunction._isDCGElement)
                        throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                    if ("function" != typeof this._viewFunction) {
                        var t = JSON.stringify(this._viewFunction);
                        throw new Error("<For> expects a function that constructs a DCGElement. You passed " + t)
                    }
                    if (r.isConst(this._viewFunction))
                        throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");
                    this._keys = this.getKeys();
                    for (var n = [], i = 0; i < this._keys.length; i++) {
                        var o = this._keys[i];
                        n.push(this.createViewForKey(o))
                    }
                    return e.children = n,
                        e
                },
                detachAllRemovedViews: function () {
                    for (var e, t = this._childViews, n = 0, r = t.length, i = 0; i < r; i++)
                        e = t[i],
                            e._will_be_unmounted_ ? n++ : t[i - n] = e;
                    t.splice(r - n, n)
                },
                overrideChildUpdates: function () {
                    var e = this._keys
                        , t = this.getKeys();
                    this._keys = t;
                    var r, o, s, a, c, l, u = this.findRootNode(), d = n(e, t), p = [];
                    for (r = d.removes.length - 1; r >= 0; r--)
                        l = d.removes[r],
                            p.push(this._keyToView[l]);
                    for (p.forEach(i.willUnmount),
                        r = 0; r < d.removes.length; r++)
                        l = d.removes[r],
                            o = this._keyToView[l],
                            delete this._keyToView[l],
                            o._will_be_unmounted_ = !0,
                            u.removeChild(o.findRootNode());
                    p.length > 0 && this.detachAllRemovedViews(),
                        p.forEach(i.onUnmount),
                        p.forEach(i.didUnmount);
                    var h = [];
                    for (r = d.inserts.length - 1; r >= 0; r--)
                        l = d.inserts[r].key,
                            l in this._keyToView || (o = this.createViewForKey(l),
                                h.push(o),
                                i.createNodeForView(o, this));
                    for (h.forEach(i.willMount),
                        r = 0; r < d.inserts.length; r++)
                        c = d.inserts[r],
                            s = this._keyToView[c.key].findRootNode(),
                            a = void 0 !== c.beforeKey ? this._keyToView[c.beforeKey].findRootNode() : null,
                            u.insertBefore(s, a);
                    h.forEach(i.onMount),
                        h.forEach(i.didMount);
                    var f = this._childViews
                        , m = f.length - h.length;
                    for (r = 0; r < m; r++)
                        f[r].update()
                }
            });
        return s
    }),
    define("submodules/dcgview/src/switch", ["require", "./create-class", "./const", "./mounting"], function (e) {
        var t = e("./create-class")
            , n = e("./const")
            , r = e("./mounting")
            , i = t({
                template: function () {
                    return this.children[0]
                }
            })
            , o = t({
                _isDCGSwitch: !0,
                updateKey: function () {
                    this._key = this.props.key()
                },
                createView: function () {
                    var e = this._viewFunction(this._key);
                    return null !== e && void 0 !== e || (e = this.createElement("div", {
                        style: this.const("display: none")
                    })),
                        this.createElement(i, null, e)
                },
                template: function () {
                    if (this._key = void 0,
                        "function" != typeof this.props.key)
                        throw new Error("<Switch key={}> must be a function");
                    if (1 !== this.children.length)
                        throw new Error("<Switch> expects a single child. You passed " + this.children.length);
                    if (this._viewFunction = this.children[0],
                        this._viewFunction && this._viewFunction._isDCGElement)
                        throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                    if ("function" != typeof this._viewFunction) {
                        var e = JSON.stringify(this._viewFunction);
                        throw new Error("<Switch> expects a function that constructs a DCGElement. You passed " + e)
                    }
                    if (n.isConst(this._viewFunction))
                        throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");
                    return this.updateKey(),
                        this.createView()
                },
                overrideChildUpdates: function () {
                    var e = this._key;
                    this.updateKey();
                    var t = this._key;
                    if (e === t)
                        this._element.update();
                    else {
                        var n = this.findRootNode()
                            , i = document.createTextNode("");
                        n.parentNode.insertBefore(i, n),
                            r.willUnmount(this._element),
                            this._childViews = [],
                            n.parentNode.removeChild(n),
                            r.onUnmount(this._element),
                            r.didUnmount(this._element),
                            this._element = this.createView();
                        var o = r.createNodeForView(this._element, this);
                        r.willMount(this._element),
                            i.parentNode.insertBefore(o, i),
                            i.parentNode.removeChild(i),
                            r.onMount(this._element),
                            r.didMount(this._element)
                    }
                }
            });
        return o
    }),
    define("submodules/dcgview/src/if", ["require", "./create-class", "./const", "./switch"], function (e) {
        var t = e("./create-class")
            , n = e("./const")
            , r = e("./switch")
            , i = t({
                _isDCGIf: !0,
                template: function () {
                    if ("function" != typeof this.props.predicate)
                        throw new Error("<If predicate={}> must be a function");
                    if (1 !== this.children.length)
                        throw new Error("<If> expects a single child. You passed " + this.children.length);
                    if (this._viewFunction = this.children[0],
                        this._viewFunction && this._viewFunction._isDCGElement)
                        throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");
                    if ("function" != typeof this._viewFunction) {
                        var e = JSON.stringify(this._viewFunction);
                        throw new Error("<If> expects a function that constructs a DCGElement. You passed " + e)
                    }
                    if (n.isConst(this._viewFunction))
                        throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");
                    var t = function () {
                        return !!this.props.predicate()
                    }
                        .bind(this)
                        , i = function (e) {
                            if (e)
                                return this._viewFunction()
                        }
                            .bind(this);
                    return this.createElement(r, {
                        key: t
                    }, i)
                }
            });
        return i
    }),
    define("submodules/dcgview/src/textarea", ["require", "./create-class", "./spread"], function (e) {
        var t = e("./create-class")
            , n = e("./spread");
        return t({
            computeValue: function () {
                var e = this.props.value();
                return null === e || void 0 === e ? "" : e + ""
            },
            template: function () {
                if (!this.props.value)
                    throw new Error('<Textarea> expects a "value={}" prop');
                if (!this.props.onInput)
                    throw new Error('<Textarea> expects an "onInput={}" prop');
                var e = n({}, this.props, {
                    onInput: function (e) {
                        this.props.onInput(e.target.value),
                            this.update()
                    }
                        .bind(this)
                });
                return delete e.value,
                    this.createElement("textarea", e, this.const(this.computeValue()))
            },
            didUpdate: function () {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeValue();
                this.rootDOM.value !== e && (this.rootDOM.value = e)
            }
        })
    }),
    define("submodules/dcgview/src/input", ["require", "./create-class", "./spread"], function (e) {
        var t = e("./create-class")
            , n = e("./spread");
        return t({
            computeValue: function () {
                var e = this.props.value();
                return null === e || void 0 === e ? "" : e + ""
            },
            template: function () {
                if (!this.props.value)
                    throw new Error('<Input> expects a "value={}" prop');
                if (!this.props.onInput)
                    throw new Error('<Input> expects an "onInput={}" prop');
                var e = n({}, this.props, {
                    value: this.const(this.computeValue()),
                    onInput: function (e) {
                        this.props.onInput(e.target.value),
                            this._isMounted && this.update()
                    }
                        .bind(this)
                });
                return this.createElement("input", e)
            },
            didUpdate: function () {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeValue();
                this.rootDOM.value !== e && (this.rootDOM.value = e)
            }
        })
    }),
    define("submodules/dcgview/src/checkbox", ["require", "./create-class", "./spread"], function (e) {
        var t = e("./create-class")
            , n = e("./spread");
        return t({
            computeChecked: function () {
                return !!this.props.checked()
            },
            template: function () {
                if (!this.props.checked)
                    throw new Error('<Checkbox> expects a "checked={}" prop');
                if (!this.props.onChange)
                    throw new Error('<Checkbox> expects an "onChange={}" prop');
                var e = n({}, this.props, {
                    type: this.const("checkbox"),
                    checked: this.const(this.computeChecked() ? "checked" : void 0),
                    onChange: function (e) {
                        this.props.onChange(e.target.checked),
                            this.update()
                    }
                        .bind(this)
                });
                return this.createElement("input", e)
            },
            didUpdate: function () {
                this.rootDOM || (this.rootDOM = this.findRootNode());
                var e = this.computeChecked();
                this.rootDOM.checked !== e && (this.rootDOM.checked = e)
            }
        })
    }),
    define("submodules/dcgview/src/components", ["require", "./for", "./switch", "./if", "./textarea", "./input", "./checkbox"], function (e) {
        var t = e("./for")
            , n = e("./switch")
            , r = e("./if")
            , i = e("./textarea")
            , o = e("./input")
            , s = e("./checkbox");
        return {
            For: t,
            Switch: n,
            If: r,
            Textarea: i,
            Input: o,
            Checkbox: s
        }
    }),
    define("submodules/dcgview/src/class", ["require", "./create-class"], function (e) {
        var t = e("./create-class");
        return t({
            template: function () { }
        })
    }),
    define("submodules/dcgview/src/dcg-view", ["require", "./create-element", "./create-class", "./mounting", "./spread", "./const", "./custom-attributes", "./attr-style", "./attr-class", "./attr-lifecycle", "./components", "./warnings", "./bind-text", "./class"], function (e) {
        var t = e("./create-element")
            , n = e("./create-class")
            , r = e("./mounting")
            , i = e("./spread")
            , o = e("./const")
            , s = e("./custom-attributes")
            , a = e("./attr-style")
            , c = e("./attr-class")
            , l = e("./attr-lifecycle")
            , u = e("./components")
            , d = e("./warnings")
            , p = e("./bind-text").enableSpanWrapping
            , h = e("./class")
            , f = {
                createElement: t,
                createClass: n,
                mountToNode: r.mountToNode,
                unmountFromNode: r.unmountFromNode,
                spread: i,
                const: o.makeConst,
                addCustomAttribute: s.add,
                Components: u,
                addWarningHandler: d.addWarningHandler,
                removeWarningHandler: d.removeWarningHandler,
                enableSpanWrapping: p,
                Class: h
            };
        return f.addCustomAttribute("style", a),
            f.addCustomAttribute("class", c),
            f.addCustomAttribute("willMount", l("willMount")),
            f.addCustomAttribute("onMount", l("onMount")),
            f.addCustomAttribute("didMount", l("didMount")),
            f.addCustomAttribute("willUnmount", l("willUnmount")),
            f.addCustomAttribute("onUnmount", l("onUnmount")),
            f.addCustomAttribute("didUnmount", l("didUnmount")),
            f.addCustomAttribute("willUpdate", l("willUpdate")),
            f.addCustomAttribute("onUpdate", l("onUpdate")),
            f.addCustomAttribute("didUpdate", l("didUpdate")),
            f
    }),
    define("submodules/dcgview/dcgview", ["require", "./src/dcg-view"], function (e) {
        return e("./src/dcg-view")
    }),
    define("loadcss!dcgview-shim", function () { }),
    function () {
        define("dcgview", ["require", "jquery", "underscore", "submodules/dcgview/dcgview", "submodules/dcgview/src/const", "bugsnag", "loadcss!dcgview-shim"], function (e) {
            var t, n, r, i, o, s;
            return t = e("jquery"),
                o = e("underscore"),
                i = e("submodules/dcgview/dcgview"),
                r = e("submodules/dcgview/src/const"),
                n = e("bugsnag"),
                e("loadcss!dcgview-shim"),
                i.addWarningHandler(function (e) {
                    return n.notify(e)
                }),
                s = [],
                i.onUrlChange = function (e) {
                    return s.push(e)
                }
                ,
                i.addCustomAttribute("href", function (e) {
                    var n;
                    return n = {
                        value: "" + e(),
                        bindings: {
                            onMount: function (n) {
                                var r;
                                if (!t(n).is("a") && !t(n).is("use"))
                                    throw new Error("Cannot have an href on a non-link element.");
                                return r = !1,
                                    t(n).on("dcg-tap", function (t) {
                                        var n, i;
                                        if (!t.metaKey && (r = !1,
                                            n = e(),
                                            i = o.any(s.map(function (e) {
                                                return e(n, t)
                                            }))))
                                            return r = !0
                                    }),
                                    t(n).on("click", function (e) {
                                        if (r)
                                            return r = !1,
                                                e.preventDefault()
                                    })
                            }
                        }
                    },
                        r.isConst(e) || (n.bindings.onUpdate = function (t) {
                            return t.setAttribute("href", e())
                        }
                        ),
                        n
                }),
                i.addCustomAttribute("onTap", function (e) {
                    return {
                        value: "",
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("dcg-tap", e)
                            }
                        }
                    }
                }),
                i.addCustomAttribute("ignoreRealClick", function (e) {
                    return {
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("click", function (t) {
                                    if (e())
                                        return t.preventDefault()
                                })
                            }
                        }
                    }
                }),
                i.addCustomAttribute("onTapStart", function (e) {
                    return {
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("dcg-tapstart", e)
                            }
                        }
                    }
                }),
                i.addCustomAttribute("onTapMove", function (e) {
                    return {
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("dcg-tapmove", e)
                            }
                        }
                    }
                }),
                i.addCustomAttribute("onTapEnd", function (e) {
                    return {
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("dcg-tapend", e)
                            }
                        }
                    }
                }),
                i.addCustomAttribute("onLongHold", function (e) {
                    return {
                        bindings: {
                            onMount: function (n) {
                                return t(n).on("dcg-longhold", e)
                            }
                        }
                    }
                }),
                i.addCustomAttribute("manageFocus", function (e) {
                    return {
                        bindings: {
                            onMount: function (t) {
                                return e().shouldBeFocused() && t.focus(),
                                    t.onfocus = function () {
                                        if (!e().shouldBeFocused())
                                            return e().onFocusedChanged(!0)
                                    }
                                    ,
                                    t.onblur = function () {
                                        if (e().shouldBeFocused())
                                            return e().onFocusedChanged(!1)
                                    }
                            },
                            onUpdate: function (t) {
                                var n, r;
                                return r = e().shouldBeFocused(),
                                    n = document.activeElement === t,
                                    r && !n ? t.focus() : n && !r ? t.blur() : void 0
                            },
                            willUnmount: function (e) {
                                return delete e.onfocus,
                                    delete e.onblur
                            }
                        }
                    }
                }),
                i
        })
    }
        .call(this),
    define("vendor/mathquill", ["require", "exports", "toplevel/mathquill", "mathquill"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.MQ = n.getInterface(1).config(r)
    }),
    define("loadcss!dcgview-helpers/mathquill-view", function () { }),
    define("dcgview-helpers/mathquill-view", ["require", "exports", "browser", "lib/aria", "keys", "tslib", "dcgview", "vendor/mathquill", "jquery", "loadcss!./mathquill-view"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function (e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.lastLatexProp = "",
                    t.wasFocusedLastUpdate = !1,
                    t
            }
            return o.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return 1 === this.children.length ? this.children[0] : s.createElement("div", {
                        class: s.const("dcg-mq-container")
                    }, s.createElement("span", {
                        class: s.const("dcg-mq-placeholder")
                    }, function () {
                        return e.getPlaceholder()
                    }), s.createElement("div", {
                        didMount: function (t) {
                            return e.didMountMathquill(t)
                        }
                    }))
                }
                ,
                t.prototype.didMount = function () {
                    1 === this.children.length && this.didMountMathquill(this.findRootNode())
                }
                ,
                t.prototype.willUnmount = function () {
                    this.$mathField.off(".view"),
                        this.mathField = void 0
                }
                ,
                t.prototype.getPlaceholder = function () {
                    return this.props.placeholder ? this.props.isFocused() ? "" : this.props.latex() ? "" : this.props.placeholder() : ""
                }
                ,
                t.prototype.didMountMathquill = function (e) {
                    var t = this
                        , r = o.__assign({}, this.props.config(), {
                            handlers: {
                                reflow: function (e) {
                                    t.props.onReflow && t.mathField && t.props.onReflow(e)
                                }
                            },
                            onCut: function () {
                                t.mathField && t.props.onUserChangedLatex(t.mathField.latex())
                            },
                            onPaste: function () {
                                t.mathField && t.props.onUserChangedLatex(t.mathField.latex())
                            },
                            overrideTypedText: function (e) {
                                t.mathField && (t.props.onUserTypedText ? t.props.onUserTypedText(e) : (t.mathField.typedText(e),
                                    t.props.onUserChangedLatex(t.mathField.latex())))
                            },
                            overrideKeystroke: function (e, n) {
                                if ("Backspace" === e && n.preventDefault(),
                                    t.mathField) {
                                    if ("Spacebar" === e && t.props.disableSpace && t.props.disableSpace())
                                        return n.preventDefault();
                                    if (n.originalEvent) {
                                        var r = i.lookup(n.originalEvent);
                                        if ("Up" === r || "Down" === r || "Left" === r || "Right" === r || "Esc" === r) {
                                            var o = [];
                                            n.ctrlKey && o.push("Ctrl"),
                                                n.metaKey && o.push("Meta"),
                                                n.altKey && o.push("Alt"),
                                                n.shiftKey && o.push("Shift"),
                                                o.length ? (o.push(r),
                                                    e = o.join("-")) : e = r
                                        }
                                    }
                                    t.props.onUserPressedKey ? t.props.onUserPressedKey(e, n) : (t.mathField.keystroke(e, n),
                                        t.props.onUserChangedLatex(t.mathField.latex()))
                                }
                            }
                        });
                    this.$mathField = c(e),
                        this.mathField = a.MQ.MathField(e, r),
                        e._mqMathFieldInstance = this.mathField,
                        e._mqViewInstance = this,
                        this.$mathField.on("focusin.view focusout.view", function () {
                            return t.onFocusEvent()
                        }),
                        (n.IS_IOS || n.IS_ANDROID) && (this.$mathField.find(".dcg-mathquill-input-span").off("keypress.globalConfig"),
                            this.$mathField.on("keypress.view", function (e) {
                                return t.onKeypressEvent(e)
                            })),
                        this.hookupMQTapTouch(),
                        this.updateMathquill()
                }
                ,
                t.prototype.didUpdate = function () {
                    this.updateMathquill()
                }
                ,
                t.prototype.updateMathquill = function () {
                    this.updateMathquillAria(),
                        this.updateMathquillLatex(),
                        this.updateMathquillFocused(),
                        this.updateMathquillPostLabel()
                }
                ,
                t.prototype.onFocusEvent = function () {
                    var e = this.isFocused();
                    e !== this.shouldBeFocused() && this.props.onFocusedChanged(e)
                }
                ,
                t.prototype.onKeypressEvent = function (e) {
                    if (e.stopPropagation(),
                        e.preventDefault(),
                        this.mathField) {
                        var t = i.lookupChar(e.originalEvent);
                        this.props.onUserTypedText ? this.props.onUserTypedText(t) : (this.mathField.typedText(t),
                            this.props.onUserChangedLatex(this.mathField.latex()))
                    }
                }
                ,
                t.prototype.hookupMQTapTouch = function () {
                    var e = this;
                    this.$mathField.on("dcg-tap.view", function (t) {
                        if ("touch" === t.device && e.mathField) {
                            var n = t.originalEvent.changedTouches[0];
                            e.mathField.clickAt(n.clientX, n.clientY, n.target),
                                e.mathField.focus();
                            var r = void 0;
                            setTimeout(function () {
                                r = Date.now()
                            }, 0),
                                e.mathField.ignoreNextMousedown(function () {
                                    return void 0 === r || Date.now() - r < 500
                                })
                        }
                    })
                }
                ,
                t.prototype.updateMathquillAria = function () {
                    if (this.mathField) {
                        var e = this.props.getAriaLabel();
                        e !== this.mathField.getAriaLabel() && this.mathField.setAriaLabel(e)
                    }
                }
                ,
                t.prototype.updateMathquillPostLabel = function () {
                    var e = this;
                    if (this.mathField) {
                        var t = this.props.getAriaPostLabel();
                        if (t !== this.mathField.getAriaPostLabel() && this.mathField.setAriaPostLabel(t),
                            this.cachedAriaAlert !== t) {
                            var n = this.mathField.mathspeak();
                            this.cachedAriaAlert = t,
                                clearTimeout(this.ariaAlertTimeout);
                            var i = this.props.hasError() ? 5e3 : 1e3;
                            this.ariaAlertTimeout = setTimeout(function () {
                                e.isFocused() && r.alert(n.trim() + " " + t.trim())
                            }, i)
                        }
                    }
                }
                ,
                t.prototype.updateMathquillLatex = function () {
                    var e = this.props.latex();
                    this.mathField && this.lastLatexProp !== e && (this.lastLatexProp = e,
                        this.mathField.latex() !== e && this.mathField.latex(e))
                }
                ,
                t.prototype.updateMathquillFocused = function () {
                    if (this.mathField) {
                        var e = this.isFocused()
                            , t = this.shouldBeFocused();
                        t && t !== this.wasFocusedLastUpdate && this.props.selectOnFocus && this.props.selectOnFocus() && this.mathField.select(),
                            this.wasFocusedLastUpdate = t,
                            e !== t && (t ? this.mathField.focus() : this.mathField.blur())
                    }
                }
                ,
                t.prototype.isFocused = function () {
                    return !!c(document.activeElement).closest(this.$mathField).length
                }
                ,
                t.prototype.shouldBeFocused = function () {
                    return this.props.isFocused()
                }
                ,
                t.getFocusedMathquill = function () {
                    var e = c(document.activeElement).closest(".dcg-mq-editable-field")[0];
                    return e ? e._mqMathFieldInstance : void 0
                }
                ,
                t.getMQViewInstance = function (e) {
                    var t = e.el();
                    return t ? t._mqViewInstance : void 0
                }
                ,
                t.applyArrowKeyAndReturnIfWasAtBounds = function (e, t, n) {
                    var r = c(e.el())
                        , i = r.find(".dcg-mq-selection")
                        , o = 1 === i.length && i.parent().parent()[0] === r[0] && 1 === i.parent().children().length;
                    if (("Up" === t || "Down" === t) && o)
                        return e.keystroke(t, n),
                            !0;
                    var s = r.find(".dcg-mq-cursor")[0];
                    if (!s)
                        return e.keystroke(t, n),
                            !1;
                    var a = s.previousSibling || s.parentElement;
                    e.keystroke(t, n);
                    var l = s.previousSibling || s.parentElement;
                    return a === l
                }
                ,
                t.simulateKeypress = function (e, n) {
                    var r = t.getMQViewInstance(e);
                    r ? r.props.onUserPressedKey ? r.props.onUserPressedKey(n) : (e.keystroke(n),
                        r.props.onUserChangedLatex(e.latex())) : "Enter" === n ? e.typedText("\n") : e.keystroke(n)
                }
                ,
                t.simulateUserChangedLatex = function (e) {
                    var n = t.getMQViewInstance(e);
                    n && n.mathField && n.props.onUserChangedLatex(n.mathField.latex())
                }
                ,
                t.handleKeystrokeAndDecideIfSpecialEvent = function (e, n, r) {
                    return "Enter" === n || ("Delete" === n && "" === e.latex() || ("Backspace" === n && "" === e.latex() || ("Up" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Down" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Left" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : "Right" === n ? t.applyArrowKeyAndReturnIfWasAtBounds(e, n, r) : (e.keystroke(n, r),
                        !1))))
                }
                ,
                t
        }(s.Class);
        t.default = l
    }),
    define("loadcss!tipsycss", function () { }),
    define("tipsy", ["require", "loadcss!tipsycss", "jquery"], function (e) {
        function t(e, t) {
            return "function" == typeof e ? e.call(t) : e
        }
        function n(e, t) {
            this.$element = s(e),
                this.options = t,
                this.fixTitle()
        }
        function r() {
            return 0 !== u
        }
        function i() {
            u--
        }
        function o() {
            u++
        }
        e("loadcss!tipsycss");
        var s = e("jquery")
            , a = null
            , c = !1
            , l = 0;
        s(document).on("dcg-tap", ".tipsy-sticky", function (e) {
            if (c)
                return void (c = !1);
            var t = e.currentTarget
                , r = s(t);
            if (r.attr("tooltip") || (r = r.find("[tooltip]").filter(':not([tooltip=""])')),
                1 === r.length && "none" !== r.css("display") && !r.parents().filter(function () {
                    return "none" === s(this).css("display")
                }).length) {
                var i = s.extend({}, s.fn.tipsy.defaults);
                i.title = "tooltip",
                    r.attr("tipsy-dir") ? i.gravity = r.attr("tipsy-dir") : i.gravity = "nw",
                    a = new n(r[0], i),
                    a.show(),
                    a.opener = t
            }
        }),
            s(document).on("dcg-tapstart keydown", function (e) {
                if (a) {
                    a.hide();
                    var t = a.opener;
                    "dcg-tapstart" === e.type && s(e.target).closest(t).length && s(document).one("dcg-tapend", function (e) {
                        s(e.target).closest(t).length && (c = !0)
                    }),
                        a = null
                }
            }),
            n.prototype = {
                show: function () {
                    var e = this.getTitle();
                    if (e && !r()) {
                        var n = this.tip()
                            , i = n.find(".tipsy-arrow");
                        this.uuid = l,
                            l++ ,
                            s(document).on("scroll.tipsy" + this.uuid, this.hide.bind(this)),
                            n.find(".tipsy-inner")[this.options.html ? "html" : "text"](e),
                            n[0].className = "tipsy",
                            n.remove().css({
                                top: 0,
                                left: 0,
                                visibility: "hidden",
                                display: "block"
                            }).prependTo(document.body);
                        var o, a = this.$element[0], c = this.$tip[0], u = a.getBoundingClientRect(), d = c.getBoundingClientRect(), p = d.width, h = d.height, f = t(this.options.gravity, this.$element[0]);
                        switch (f.charAt(0)) {
                            case "n":
                                o = {
                                    top: u.top + u.height + this.options.offset,
                                    left: u.left + u.width / 2 - p / 2
                                };
                                break;
                            case "s":
                                o = {
                                    top: u.top - h - this.options.offset,
                                    left: u.left + u.width / 2 - p / 2
                                };
                                break;
                            case "e":
                                o = {
                                    top: u.top + u.height / 2 - h / 2,
                                    left: u.left - p - this.options.offset
                                };
                                break;
                            case "w":
                                o = {
                                    top: u.top + u.height / 2 - h / 2,
                                    left: u.left + u.width + this.options.offset
                                }
                        }
                        2 == f.length && ("w" == f.charAt(1) ? o.left = u.left + u.width / 2 - 15 : o.left = u.left + u.width / 2 - p + 15);
                        var m = 0;
                        o.left < 0 ? (m = o.left,
                            o.left = 0) : o.left + p > window.innerWidth && (m = o.left + p - window.innerWidth,
                                o.left = window.innerWidth - p),
                            "n" !== f && "s" !== f || (m -= 5);
                        var g = u.width / a.offsetWidth
                            , y = u.height / a.offsetHeight;
                        o.top /= y,
                            o.left /= g,
                            m /= g,
                            i.css("marginLeft", m),
                            n.css(o).addClass("tipsy-" + f),
                            i[0].className = "tipsy-arrow tipsy-arrow-" + f.charAt(0),
                            this.options.className && n.addClass(t(this.options.className, this.$element[0])),
                            this.options.fadeIn ? n.stop().css({
                                opacity: 0,
                                display: "block",
                                visibility: "visible"
                            }).animate({
                                opacity: this.options.opacity
                            }, this.options.fadeIn) : n.css({
                                visibility: "visible",
                                opacity: this.options.opacity
                            }),
                            this.options.sticky && n.addClass("tipsy-sticky");
                        var v = this
                            , b = function () {
                                v.validate(),
                                    v.validateTimeout = setTimeout(b, 100)
                            };
                        b()
                    }
                },
                hide: function () {
                    clearTimeout(this.validateTimeout),
                        s(document).off("scroll.tipsy" + this.uuid),
                        this.options.fadeOut ? this.tip().stop().fadeOut(this.options.fadeOut, function () {
                            s(this).remove()
                        }) : this.tip().remove()
                },
                fixTitle: function () {
                    var e = this.$element;
                    (e.attr("title") || "string" != typeof e.attr("original-title")) && e.attr("original-title", e.attr("title") || "").removeAttr("title")
                },
                getTitle: function () {
                    var e, t = this.$element, n = this.options;
                    return this.fixTitle(),
                        n = this.options,
                        "string" == typeof n.title ? e = t.attr("title" == n.title ? "original-title" : n.title) : "function" == typeof n.title && (e = n.title.call(t[0])),
                        e && (e = ("" + e).replace(/(^\s*|\s*$)/, "")),
                        e || n.fallback
                },
                tip: function () {
                    return this.$tip || (this.$tip = s('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>')),
                        this.$tip
                },
                validate: function () {
                    var e = !!this.getTitle()
                        , t = !1;
                    if (e)
                        try {
                            for (var n = this.$element[0]; n;) {
                                if (n === document) {
                                    t = !0;
                                    break
                                }
                                n = n.parentNode
                            }
                        } catch (e) { }
                    t || this.hide()
                }
            },
            s.fn.tipsy = function (e) {
                function t(t) {
                    var r = s.data(t, "tipsy");
                    return r || (r = new n(t, s.fn.tipsy.elementOptions(t, e)),
                        s.data(t, "tipsy", r)),
                        r
                }
                function r(n) {
                    if (("tipsyshow" !== n.type || n.target === this) && a !== this) {
                        var r = t(this);
                        r.hoverState = "in",
                            0 === e.delayIn ? r.show() : (r.fixTitle(),
                                setTimeout(function () {
                                    "in" == r.hoverState && r.show()
                                }, e.delayIn))
                    }
                }
                function i(n) {
                    if ("tipsyhide" !== n.type || n.target === this) {
                        var r = t(this);
                        "dcg-tapstart" === n.type && r.options.sticky || (r.hoverState = "out",
                            0 === e.delayOut ? r.hide() : setTimeout(function () {
                                "out" == r.hoverState && r.hide()
                            }, e.delayOut))
                    }
                }
                if (e === !0)
                    return this.data("tipsy");
                if ("string" == typeof e) {
                    var o = this.data("tipsy");
                    return o && o[e](),
                        this
                }
                if (e = s.extend({}, s.fn.tipsy.defaults, e),
                    e.fadeIn = e.fadeIn || e.fade,
                    e.fadeOut = e.fadeOut || e.fade,
                    e.live || this.each(function () {
                        t(this)
                    }),
                    "manual" != e.trigger) {
                    var c = "hover" == e.trigger ? "tipsyshow" : "focus"
                        , l = "hover" == e.trigger ? "tipsyhide dcg-tapstart dcg-tapend dcg-tapcancel" : "blur";
                    if (e.live && e.delegate)
                        this.on(c, e.delegate, r).on(l, e.delegate, i);
                    else {
                        var u = e.live ? "on" : "bind";
                        this[u](c, r)[u](l, i)
                    }
                }
                return this
            }
            ,
            s.fn.tipsy.defaults = {
                className: null,
                delayIn: 0,
                delayOut: 0,
                fade: !1,
                fadeIn: !1,
                fadeOut: !1,
                fallback: "",
                gravity: "n",
                html: !1,
                live: !0,
                offset: 0,
                opacity: 1,
                title: "title",
                trigger: "hover"
            },
            s.fn.tipsy.elementOptions = function (e, t) {
                t = s.extend({}, t);
                var n = s(e).attr("tipsy-gravity");
                n && (t.gravity = n);
                var r = parseInt(s(e).attr("tipsy-offset"), 10);
                return isNaN(r) || (t.offset = r),
                    t
            }
            ,
            s.fn.tipsy.autoNS = function () {
                return s(this).offset().top > s(document).scrollTop() + s(window).height() / 2 ? "s" : "n"
            }
            ,
            s.fn.tipsy.autoWE = function () {
                return s(this).offset().left > s(document).scrollLeft() + s(window).width() / 2 ? "e" : "w"
            }
            ,
            s.fn.tipsy.autoBounds = function (e, t) {
                return function () {
                    var n = {
                        ns: t[0],
                        ew: t.length > 1 && t[1]
                    }
                        , r = s(document).scrollTop() + e
                        , i = s(document).scrollLeft() + e
                        , o = s(this);
                    return o.offset().top < r && (n.ns = "n"),
                        o.offset().left < i && (n.ew = "w"),
                        s(window).width() + s(document).scrollLeft() - o.offset().left < e && (n.ew = "e"),
                        s(window).height() + s(document).scrollTop() - o.offset().top < e && (n.ns = "s"),
                        n.ns + (n.ew ? n.ew : "")
                }
            }
            ,
            s(document).tipsy({
                title: "tooltip",
                wait: 0,
                live: !0,
                delegate: ".tipsy-sticky",
                gravity: "nw",
                sticky: !0,
                fade: !1
            });
        var u = 0;
        return {
            isDisabled: r,
            removeDisableLock: i,
            addDisableLock: o
        }
    }),
    define("text!data/keypad_keys.json", [], function () {
        return '{\n  "trigFuncs": [\n    { "name": "sin", "ariaLabel": "sine" },\n    { "name": "cos", "ariaLabel": "cosine" },\n    { "name": "tan", "ariaLabel": "tangent" },\n    { "name": "csc", "ariaLabel": "co secant" },\n    { "name": "sec", "ariaLabel": "secant" },\n    { "name": "cot", "ariaLabel": "co tangent" }\n  ],\n\n  "oneArgFuncs": [\n    { "name": "ceil", "ariaLabel": "ceiling" },\n    { "name": "floor" },\n    { "name": "round" },\n    { "name": "abs", "ariaLabel": "absolute value" },\n    { "name": "sign" },\n    { "name": "ln", "ariaLabel": "natural log" },\n    { "name": "log" },\n    { "name": "exp", "ariaLabel": "exponent" },\n    { "name": "total" },\n    { "name": "length" },\n    { "name": "mean" },\n    { "name": "median" },\n    { "name": "stdev", "ariaLabel": "standard deviation" },\n    { "name": "stdevp", "ariaLabel": "standard deviation of population" },\n    { "name": "var", "ariaLabel": "variance" },\n    { "name": "varp", "ariaLabel": "variance of population" },\n    { "name": "mad" }\n  ],\n\n  "twoArgFuncs": [\n    { "name": "min" },\n    { "name": "max" },\n    { "name": "lcm" },\n    { "name": "gcd" },\n    { "name": "mod" },\n    { "name": "nCr" },\n    { "name": "nPr" },\n    { "name": "cov", "ariaLabel": "co variance" },\n    { "name": "corr", "ariaLabel": "correlation" },\n    { "name": "quantile" },\n    { "name": "quartile" }\n  ],\n\n  "tabs": ["trig", "stats", "misc"],\n\n  "staticKeys": {\n    "unknown": {\n      "display": { "html": "?", "ariaLabel": "unknown" },\n      "action": { "cmd": "?" }\n    },\n    "pi": {\n      "display": { "html": "", "ariaLabel": "pi" },\n      "action": { "cmd": "\\\\pi" }\n    },\n    "tau": {\n      "display": { "html": "", "ariaLabel": "tau" },\n      "action": { "cmd": "\\\\tau" }\n    },\n    "leftparen": {\n      "display": { "html": "(", "ariaLabel": "left parenthesis" },\n      "action": { "cmd": "(" }\n    },\n    "rightparen": {\n      "display": { "html": ")", "ariaLabel": "right parenthesis" },\n      "action": { "cmd": ")" }\n    },\n    "sqrt": {\n      "display": { "html": "", "ariaLabel": "square root" },\n      "action": { "cmd": "\\\\sqrt" }\n    },\n    "nthroot": {\n      "display": { "html": "n&radic;", "ariaLabel": "nth root" },\n      "action": { "custom": "nthroot" }\n    },\n    "lt": {\n      "display": { "html": "&lt;", "ariaLabel": "less than" },\n      "action": { "cmd": "<" }\n    },\n    "gt": {\n      "display": { "html": "&gt;", "ariaLabel": "greater than" },\n      "action": { "cmd": ">" }\n    },\n    "le": {\n      "display": { "html": "", "ariaLabel": "less than or equal to" },\n      "action": { "cmd": "\\\\le" }\n    },\n    "ge": {\n      "display": { "html": "", "ariaLabel": "greater than or equal to" },\n      "action": { "cmd": "\\\\ge" }\n    },\n\n    "squared": {\n      "display": {\n        "aClass": "dcg-exponent",\n        "html": "a^2",\n        "ariaLabel": "squared"\n      },\n      "action": { "custom": "squared" }\n    },\n\n    "exponent": {\n      "display": {\n        "aClass": "dcg-exponent",\n        "html": "a^b",\n        "ariaLabel": "exponent"\n      },\n      "action": { "cmd": "^" }\n    },\n    "subscript": {\n      "display": { "html": "a_b", "ariaLabel": "subscript" },\n      "action": { "cmd": "_" }\n    },\n    "fact": {\n      "display": { "html": "n!", "ariaLabel": "factorial" },\n      "action": { "cmd": "!" }\n    },\n    "theta": {\n      "display": { "html": "", "ariaLabel": "theta" },\n      "action": { "cmd": "\\\\theta" }\n    },\n\n    "openbracket": {\n      "display": {\n        "html": "{ <span class=\'dcg-ghost-bracket\'>}</span>",\n        "ariaLabel": "left brace",\n        "noMQ": true\n      },\n      "action": { "cmd": "{" }\n    },\n    "closebracket": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>{</span> }",\n        "ariaLabel": "right brace",\n        "noMQ": true\n      },\n      "action": { "cmd": "}" }\n    },\n    "opensquare": {\n      "display": {\n        "html": "[ <span class=\'dcg-ghost-bracket\'>]</span>",\n        "ariaLabel": "left bracket",\n        "noMQ": true\n      },\n      "action": { "cmd": "[" }\n    },\n    "closesquare": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>[</span> ]",\n        "ariaLabel": "right bracket",\n        "noMQ": true\n      },\n      "action": { "cmd": "]" }\n    },\n    "leftparenghost": {\n      "display": {\n        "html": "( <span class=\'dcg-ghost-bracket\'>)</span>",\n        "ariaLabel": "left parenthesis",\n        "noMQ": true\n      },\n      "action": { "cmd": "(" }\n    },\n    "rightparenghost": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>(</span> )",\n        "ariaLabel": "right parenthesis",\n        "noMQ": true\n      },\n      "action": { "cmd": ")" }\n    },\n    "colon": {\n      "display": { "html": ":", "ariaLabel": "colon" },\n      "action": { "cmd": ":" }\n    },\n    "pipes": {\n      "display": { "html": "|a|", "ariaLabel": "pipes" },\n      "action": { "cmd": "|" }\n    },\n    "comma": {\n      "display": { "html": ",", "ariaLabel": "comma" },\n      "action": { "cmd": "," }\n    },\n    "commaghost": {\n      "display": {\n        "html": ",\\\\ \\\\textcolor{#B5B5B5}{\'}",\n        "ariaLabel": "comma"\n      },\n      "action": { "cmd": "," }\n    },\n    "percent": {\n      "display": { "html": "%", "ariaLabel": "percent" },\n      "action": { "cmd": "%" }\n    },\n    "prime": {\n      "display": { "html": "\'", "ariaLabel": "prime" },\n      "action": { "cmd": "\'" }\n    },\n    "primeghost": {\n      "display": {\n        "html": "\\\\textcolor{#B5B5B5}{,}\\\\ \'",\n        "ariaLabel": "prime"\n      },\n      "action": { "cmd": "\'" }\n    },\n    "times": {\n      "display": { "html": "", "ariaLabel": "times" },\n      "action": { "cmd": "*" }\n    },\n    "plus": {\n      "display": { "html": "+", "ariaLabel": "plus" },\n      "action": { "cmd": "+" }\n    },\n    "divide": {\n      "display": { "html": "", "ariaLabel": "divide by" },\n      "action": { "cmd": "/" }\n    },\n    "minus": {\n      "display": { "html": "", "ariaLabel": "minus" },\n      "action": { "cmd": "-" }\n    },\n    "equals": {\n      "display": { "html": "=", "ariaLabel": "equals" },\n      "action": { "cmd": "=" }\n    },\n    "twiddle": {\n      "display": { "html": "~", "ariaLabel": "tilde" },\n      "action": { "cmd": "~" }\n    },\n    "decimal": {\n      "display": { "html": ".", "ariaLabel": "decimal" },\n      "action": { "cmd": "." }\n    },\n\n    "backspace": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-delete\\"></i>",\n        "ariaLabel": "backspace",\n        "colspan": 1.5\n      },\n      "action": { "key": "Backspace" }\n    },\n    "enter": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-arrow-enter\\"></i>",\n        "ariaLabel": "enter",\n        "colspan": 2,\n        "noMQ": true\n      },\n      "action": {\n        "cmd": "\\n",\n        "custom": "enter"\n      }\n    },\n    "toggleLetters": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "A B C",\n        "ariaLabel": "show letters",\n        "colspan": 2\n      },\n      "action": { "changeLayout": "letters" }\n    },\n    "toggleNumbers": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "1 2 3",\n        "ariaLabel": "show numbers",\n        "colspan": 2\n      },\n      "action": { "changeLayout": "mainNumbers" }\n    },\n\n    "popupFunctions": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "func<span class=\'dcg-hide-on-narrow\'>tion</span>s",\n        "ariaLabel": "functions",\n        "colspan": 2\n      },\n      "action": { "popup": "functions" }\n    },\n\n    "blank": {\n      "display": {},\n      "action": {}\n    },\n\n    "halfBlank": {\n      "display": { "colspan": 0.5 },\n      "action": {}\n    },\n\n    "left": {\n      "display": {\n        "html": "<i class=\\"dcg-icon-arrow-left\\"></i>",\n        "ariaLabel": "left arrow"\n      },\n      "action": { "key": "Left" }\n    },\n    "up": {\n      "display": { "html": "&uarr;", "ariaLabel": "up arrow" },\n      "action": { "key": "Up" }\n    },\n    "right": {\n      "display": {\n        "html": "<i class=\\"dcg-icon-arrow-right\\"></i>",\n        "ariaLabel": "right arrow"\n      },\n      "action": { "key": "Right" }\n    },\n    "down": {\n      "display": { "html": "&darr;", "ariaLabel": "down arrow" },\n      "action": { "key": "Down" }\n    },\n\n    "toggleCapital": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-shift\\"></i>",\n        "ariaLabel": "show uppercase letters",\n        "colspan": 1.5\n      },\n      "action": { "changeLayout": "capitalLetters" }\n    },\n    "toggleLowercase": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray dcg-active",\n        "html": "<i class=\\"dcg-icon-shift\\"></i>",\n        "ariaLabel": "show lowercase letters",\n        "colspan": 1.5\n      },\n      "action": { "changeLayout": "letters" }\n    },\n    "loga": {\n      "display": { "html": "log_a", "ariaLabel": "log sub a" },\n      "action": { "custom": "loga" }\n    },\n    "ddx": {\n      "display": { "html": "d/dx", "ariaLabel": "d over dx" },\n      "action": { "custom": "d/dx" }\n    },\n    "sum": {\n      "display": { "html": "\\\\sum", "ariaLabel": "sum" },\n      "action": { "cmd": "\\\\sum" }\n    },\n    "prod": {\n      "display": { "html": "\\\\prod", "ariaLabel": "product" },\n      "action": { "cmd": "\\\\prod" }\n    },\n    "integral": {\n      "display": { "html": "\\\\int", "ariaLabel": "integral" },\n      "action": { "cmd": "\\\\int" }\n    },\n    "highlightedX": {\n      "display": { "html": "x", "aClass": "dcg-highlighted" },\n      "action": { "cmd": "x" }\n    },\n    "highlightedY": {\n      "display": { "html": "y", "aClass": "dcg-highlighted" },\n      "action": { "cmd": "y" }\n    }\n  }\n}\n'
    }),
    define("main/keypad_keys", ["require", "jquery", "underscore", "i18n", "mathquill", "text!data/keypad_keys.json"], function (e) {
        var t, n = e("jquery"), r = e("underscore"), i = e("i18n"), o = e("mathquill"), s = JSON.parse(e("text!data/keypad_keys.json")), a = s.staticKeys;
        i.t("functions"),
            i.t("A B C"),
            i.t("more"),
            i.t("enter"),
            r.each(s.tabs, function (e) {
                a[e + "Tab"] = {
                    display: {
                        html: e
                    },
                    action: {
                        tab: e
                    }
                }
            }),
            r.each(s.oneArgFuncs, function (e) {
                a[e.name] = {
                    display: {
                        html: '<var class="dcg-mq-operator-name">' + e.name + "</var>",
                        ariaLabel: e.ariaLabel || e.name,
                        aClass: "dcg-mq-math-mode",
                        noMQ: !0
                    },
                    action: {
                        func: e.name
                    }
                }
            }),
            r.each(s.twoArgFuncs, function (e) {
                a[e.name] = {
                    display: {
                        html: '<var class="dcg-mq-operator-name">' + e.name + "</var>",
                        ariaLabel: e.ariaLabel || e.name,
                        aClass: "dcg-mq-math-mode",
                        noMQ: !0
                    },
                    action: {
                        func: e.name,
                        args: 2
                    }
                }
            }),
            r.each(s.trigFuncs, function (e) {
                var t = e.ariaLabel || e.name;
                r.each([e.name, e.name + "h"], function (e) {
                    var n = "h" === e[e.length - 1];
                    a[e] = {
                        display: {
                            html: '<var class="dcg-mq-operator-name">' + e + "</var>",
                            ariaLabel: n ? "hyperbolic " + t : t,
                            aClass: "dcg-mq-math-mode",
                            noMQ: !0
                        },
                        action: {
                            func: e
                        }
                    }
                }),
                    a["arc" + e.name] = {
                        display: {
                            html: e.name + "^{-1}",
                            aClass: "dcg-inverse-trig",
                            ariaLabel: "arc " + t
                        },
                        action: {
                            custom: "inverse",
                            fn: e.name
                        }
                    }
            });
        var c;
        for (t = 0; t < 26; t++)
            c = String.fromCharCode(65 + t),
                a[c] = {
                    display: {
                        html: c,
                        ariaLabel: c
                    },
                    action: {
                        cmd: c
                    }
                };
        for (t = 0; t < 26; t++)
            c = String.fromCharCode(97 + t),
                a[c] = {
                    display: {
                        html: c,
                        ariaLabel: c
                    },
                    action: {
                        cmd: c
                    }
                };
        for (t = 0; t < 10; t++) {
            var l = String.fromCharCode(48 + t);
            a[l] = {
                display: {
                    html: l,
                    ariaLabel: l
                },
                action: {
                    cmd: l
                }
            }
        }
        var u = function (e, t) {
            var r = e.display
                , i = e.action;
            if (r.id = t,
                "cellClass" in r || (r.cellClass = ""),
                "aClass" in r || (r.aClass = ""),
                r.colspan)
                switch (r.cellClass && (r.cellClass += " "),
                r.colspan) {
                    case .5:
                        r.cellClass += "dcg-halfwide";
                        break;
                    case 2:
                        r.cellClass += "dcg-twowide";
                        break;
                    case 1.5:
                        r.cellClass += "dcg-onepointfivewide"
                }
            r.aClass.indexOf("dcg-btn-") === -1 && (r.aClass = r.aClass ? r.aClass + " dcg-btn-light-gray" : "dcg-btn-light-gray"),
                r.html && (r.aClass = r.aClass ? r.aClass + " dcg-key" : "dcg-key",
                    r.aClass += " dcg-tappable"),
                i.tab || i.key || i.popup || i.changeLayout || r.noMQ || !r.html || (r.mathquill = !0,
                    /^[%]$/.test(r.html) && (r.aClass += " dcg-mq-nonSymbola"),
                    /^([0-9?:,'~().=+\%]|&lt;|&gt;)$/.test(r.html) ? r.html = "<span>" + r.html + "</span>" : /^[a-zA-Z]$/.test(r.html) ? r.html = "<var>" + r.html + "</var>" : r.html = o.StaticMath(n("<span>" + r.html + "</span>")[0]).html(),
                    r.aClass += " dcg-mq-math-mode")
        };
        return r.each(a, u),
            a
    }),
    define("main/keypad_view", ["require", "loadcss!keypad", "jquery", "mathquill", "underscore", "main/cookie", "template!keypad", "underscore_view", "pjs", "dcgview-helpers/mathquill-view", "tipsy", "main/keypad_keys"], function (e) {
        e("loadcss!keypad");
        var t = e("jquery")
            , n = e("mathquill")
            , r = e("underscore")
            , i = e("main/cookie")
            , o = e("template!keypad")
            , s = e("underscore_view")
            , a = e("pjs")
            , c = e("dcgview-helpers/mathquill-view").default;
        e("tipsy");
        var l = e("main/keypad_keys")
            , u = a(s, function (e, s) {
                e.template = o,
                    e.init = function (e) {
                        s.init.call(this),
                            this.keys = l,
                            this.controller = e,
                            this.setupKeypad(),
                            this.setLayout("mainNumbers"),
                            this.setProperty("functionsOpen", !1),
                            this.setProperty("isOpen", !1),
                            this.userMinimized = !1,
                            this.unsubscribeFromController = this.controller.subToChanges(this.onControllerUpdate.bind(this))
                    }
                    ,
                    this.destruct = function () {
                        this.unsubscribeFromController()
                    }
                    ,
                    e.onControllerUpdate = function () {
                        this.onNeedsFakeKeypad()
                    }
                    ,
                    e.getActiveMathquill = function () {
                        return n(t(document.activeElement).closest(".dcg-mq-editable-field")[0])
                    }
                    ,
                    e.onNeedsFakeKeypad = function () {
                        this.requestSetIsOpen(!this.userMinimized && this.controller.needsFakeKeypad())
                    }
                    ,
                    e.onLanguageChange = function () {
                        this.rerender()
                    }
                    ,
                    e.didCreateElement = function () {
                        var e = this;
                        e.setLayout(e.layout),
                            e.$hideBtn = e.$(".dcg-minimize-keypad"),
                            e.$showBtn = e.$(".dcg-show-keypad"),
                            e.$funcPopover = e.$(".dcg-functions-popover"),
                            e.$container = e.$(".dcg-keys-container"),
                            e.$keys = e.$(".dcg-keys"),
                            e.$funcBtn = e.$(".dcg-popupFunctions-key"),
                            e.setTab("trig"),
                            this.observeAndSync("isOpen", function () {
                                e.$showBtn.toggle(!e.isOpen)
                            }),
                            this.observe("functionsOpen", this.renderFunctionsOpen.bind(this)),
                            this.observe("graphpaperHeight", this.positionFunctionsPopup.bind(this)),
                            this.$().tipsy({
                                fade: "fast",
                                title: "tooltip",
                                wait: 500,
                                delegate: ".dcg-tooltip",
                                gravity: "s",
                                offset: 2
                            }),
                            e.$().on("dcg-tap", ".dcg-tappable", function (n) {
                                var r = t(n.target).closest(".dcg-tappable");
                                e.buttonClicked(r)
                            }),
                            e.$hideBtn.on("dcg-tap", function () {
                                e.$hideBtn.attr("aria-hidden", !0),
                                    e.$showBtn.attr("aria-hidden", !1),
                                    e.userMinimized = !0,
                                    i.setCookie("keypadMinimized", "true"),
                                    e._hideKeypad()
                            }),
                            e.$showBtn.on("dcg-tap", function () {
                                e.$hideBtn.attr("aria-hidden", !1),
                                    e.$showBtn.attr("aria-hidden", !0),
                                    e.userMinimized = !1,
                                    i.setCookie("keypadMinimized", "false"),
                                    e._showKeypad(),
                                    e.getActiveMathquill() || e.controller.dispatch({
                                        type: "show-keypad"
                                    })
                            }),
                            e.userMinimized = "true" === i.getCookie("keypadMinimized")
                    }
                    ,
                    e._hideKeypad = function () {
                        clearTimeout(this.__showHideTimeout);
                        var e = this;
                        this.__showHideTimeout = setTimeout(function () {
                            e.__showHideTimeout = null,
                                e.setProperty("isOpen", !1),
                                e.setProperty("functionsOpen", !1),
                                e.$container.addClass("dcg-retracted").attr("aria-hidden", !0)
                        })
                    }
                    ,
                    e._showKeypad = function () {
                        clearTimeout(this.__showHideTimeout);
                        var e = this;
                        this.__showHideTimeout = setTimeout(function () {
                            e.__showHideTimeout = null,
                                e.setLayout("mainNumbers"),
                                e.setProperty("isOpen", !0),
                                e.$container.removeClass("dcg-retracted").removeAttr("aria-hidden")
                        })
                    }
                    ,
                    e.requestSetIsOpen = function (e) {
                        this.userMinimized && !this.isOpen || (e !== this.isOpen || this.__showHideTimeout) && (e ? this._showKeypad() : this._hideKeypad())
                    }
                    ,
                    e.getButton = function (e) {
                        return this.keys[e] || (e = "unknown"),
                            this.keys[e].display
                    }
                    ,
                    e.buttonArray = function (e) {
                        var t = function () {
                            return !0
                        };
                        return this.controller.areFunctionsRestricted() && (t = function (e) {
                            return ["csc", "sec", "cot", "arccsc", "arcsec", "arccot", "csch", "sech", "coth", "arccsch", "arcsech", "arccoth", "mad", "cov"].indexOf(e) === -1
                        }
                        ),
                            r.map(r.filter(e.split(" "), t), this.getButton, this)
                    }
                    ,
                    e.setupKeypad = function () {
                        this.buttons = {
                            mainNumbersLeft: [{
                                keys: this.buttonArray("highlightedX highlightedY squared exponent")
                            }, {
                                keys: this.buttonArray("leftparen rightparen lt gt")
                            }, {
                                keys: this.buttonArray("pipes comma le ge")
                            }, {
                                keys: this.buttonArray("toggleLetters sqrt pi")
                            }],
                            numbersMiddle: [{
                                keys: this.buttonArray("7 8 9 divide")
                            }, {
                                keys: this.buttonArray("4 5 6 times")
                            }, {
                                keys: this.buttonArray("1 2 3 minus")
                            }, {
                                keys: this.buttonArray("0 decimal equals plus")
                            }],
                            numbersRight: [{
                                keys: this.buttonArray("popupFunctions")
                            }, {
                                keys: this.buttonArray("left right")
                            }, {
                                keys: this.buttonArray("halfBlank backspace")
                            }, {
                                keys: this.buttonArray("enter")
                            }],
                            letters: [{
                                keys: this.buttonArray("q w e r t y u i o p")
                            }, {
                                keys: this.buttonArray("a s d f g h j k l theta")
                            }, {
                                keys: this.buttonArray("toggleCapital z x c v b n m backspace")
                            }, {
                                keys: this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")
                            }],
                            capitalLetters: [{
                                keys: this.buttonArray("Q W E R T Y U I O P")
                            }, {
                                keys: this.buttonArray("A S D F G H J K L tau")
                            }, {
                                keys: this.buttonArray("toggleLowercase Z X C V B N M backspace")
                            }, {
                                keys: this.buttonArray("toggleNumbers exponent rightparenghost closebracket closesquare colon primeghost enter")
                            }],
                            noQwertyLetters: [{
                                keys: this.buttonArray("a b c d e f g h i")
                            }, {
                                keys: this.buttonArray("j k l m n o p q r")
                            }, {
                                keys: this.buttonArray("s t u v w x y z backspace")
                            }, {
                                keys: this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")
                            }]
                        },
                            this.popups = {
                                functionsPopup: {
                                    trig: {
                                        tab: this.getButton("trigTab"),
                                        funcs: this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")
                                    },
                                    stats: {
                                        tab: this.getButton("statsTab"),
                                        funcs: this.buttonArray("total length mean median min max quartile quantile twiddle stdev stdevp mad var cov corr nCr nPr fact")
                                    },
                                    misc: {
                                        tab: this.getButton("miscTab"),
                                        funcs: this.buttonArray("lcm gcd mod ceil floor round abs sign percent exp ln nthroot log loga ddx integral sum prod")
                                    }
                                }
                            }
                    }
                    ,
                    e.getTemplateParams = function () {
                        var e = this;
                        return {
                            buttons: this.buttons,
                            popups: this.popups,
                            t: function (t, n) {
                                return e.controller.t(t, n)
                            }
                        }
                    }
                    ,
                    e.height = function () {
                        return this.isOpen ? this.$container.height() : 0
                    }
                    ,
                    e.setLayout = function (e) {
                        this.layout = e,
                            this.$().removeClass("dcg-layout-letters dcg-layout-capitalLetters dcg-layout-mainNumbers dcg-layout-noQwertyLetters").addClass("dcg-layout-" + e)
                    }
                    ,
                    e.setTab = function (e) {
                        var t = ["trig", "stats", "misc"]
                            , n = this;
                        r.each(t, function (e) {
                            n.$("[key=" + e + "Tab]").removeClass("dcg-selected"),
                                n.$("[section=" + e + "]").attr("aria-hidden", !0).hide()
                        }),
                            this.$("[key=" + e + "Tab]").addClass("dcg-selected"),
                            this.$("[section=" + e + "]").attr("aria-hidden", !1).show()
                    }
                    ,
                    e.renderFunctionsOpen = function () {
                        this.$funcBtn.toggleClass("dcg-active", this.functionsOpen).attr("aria-hidden", !this.functionsOpen),
                            this.$funcPopover.toggle(this.functionsOpen).attr("aria-hidden", !this.functionsOpen),
                            this.positionFunctionsPopup()
                    }
                    ,
                    e.positionFunctionsPopup = function () {
                        if (this.functionsOpen) {
                            var e = this.$funcPopover.find(".dcg-arrow");
                            if (this.graphpaperHeight < 525) {
                                this.$funcPopover.removeClass("dcg-top").addClass("dcg-left");
                                var t = this.$container.outerHeight() - (this.$funcBtn.offset().top - this.$container.offset().top)
                                    , n = t - this.$funcBtn.outerHeight() / 2 - 2 - 10;
                                e.css({
                                    left: "auto",
                                    bottom: n
                                })
                            } else
                                this.$funcPopover.removeClass("dcg-left").addClass("dcg-top"),
                                    e.css({
                                        left: this.$funcPopover.width() - this.$funcBtn.width() / 2,
                                        bottom: "auto"
                                    })
                        }
                    }
                    ,
                    e.buttonClicked = function (e) {
                        var t = this.$(e).attr("key")
                            , n = this.keys[t].action;
                        if (n.changeLayout)
                            return this.setProperty("functionsOpen", !1),
                                void (this.controller.isQwertyKeyboardEnabled() || "letters" != n.changeLayout ? this.setLayout(n.changeLayout) : this.setLayout("noQwertyLetters"));
                        if (n.tab)
                            return this.setTab(n.tab);
                        if ("functions" === n.popup)
                            return this.setProperty("functionsOpen", !this.functionsOpen);
                        this.setProperty("functionsOpen", !1);
                        var r = this.getActiveMathquill();
                        if (r) {
                            if (n.custom)
                                switch (n.custom) {
                                    case "enter":
                                        c.simulateKeypress(r, "Enter");
                                        break;
                                    case "loga":
                                        r.write("\\log_{}"),
                                            r.typedText("("),
                                            r.keystroke("Left"),
                                            r.keystroke("Down");
                                        break;
                                    case "nthroot":
                                        r.write("\\sqrt[]{}"),
                                            r.keystroke("Left"),
                                            r.keystroke("Left");
                                        break;
                                    case "squared":
                                        r.cmd("^"),
                                            r.cmd("2"),
                                            r.keystroke("Right");
                                        break;
                                    case "cubed":
                                        r.write("^{3}");
                                        break;
                                    case "inverse":
                                        r.write(n.fn),
                                            r.write("^{-1}"),
                                            r.typedText("(");
                                        break;
                                    case "d/dx":
                                        r.write("\\frac{d}{dx}")
                                }
                            else if (n.key)
                                c.simulateKeypress(r, n.key);
                            else if (n.cmd)
                                r.cmd(n.cmd);
                            else if (n.func) {
                                var i = "(";
                                2 === n.args && (i = "(,"),
                                    r.typedText(n.func + i),
                                    2 === n.args && r.keystroke("Left")
                            }
                            c.simulateUserChangedLatex(r)
                        }
                    }
            });
        return u
    }),
    define("main/layout_controller", ["require", "console", "pjs", "jquery"], function (e) {
        var t = e("console")
            , n = e("pjs")
            , r = e("jquery");
        return n(function (e) {
            e.init = function (e, t, n) {
                this.views = e,
                    this.$root = t,
                    this.currentScreen = {},
                    this.controller = n,
                    this.triggerGraphpaperRectChanged = null,
                    this.isAnimating = !1,
                    this.$grapher = this.views.grapher.$,
                    this.appliedScale = {
                        x: 1,
                        y: 1
                    },
                    this.resize(),
                    this.views.keypadView && this.views.keypadView.observe("isOpen", this.resize.bind(this))
            }
                ,
                e.getSmartDefaultWidth = function () {
                    var e = this.currentScreen.width;
                    if (!e)
                        return 356;
                    var t = .2 * e + 160;
                    return Math.min(500, Math.max(280, t))
                }
                ,
                e.getExpListWidth = function () {
                    var e;
                    e = void 0 !== this.userSpecifiedExpListWidth ? Math.max(280, Math.min(this.currentScreen.width - 200, this.userSpecifiedExpListWidth)) : this.getSmartDefaultWidth();
                    var t = this.currentScreen.width - this.currentScreen.height;
                    return Math.abs(t - e) <= 10 ? t : e
                }
                ,
                e.setExpListWidth = function (e) {
                    this.userSpecifiedExpListWidth !== e && (this.userSpecifiedExpListWidth = e,
                        this.forceRecompute = !0)
                }
                ,
                e.keypadOpen = function () {
                    return !!this.views.keypadView && this.views.keypadView.isOpen
                }
                ,
                e.didViewportChange = function (e) {
                    return e.width !== this.currentScreen.width || e.height !== this.currentScreen.height || this.keypadOpen() !== this.currentScreen.keypadOpen || this.controller.isListVisible() !== this.currentScreen.expressionsVisible
                }
                ,
                e.resize = function () {
                    if (!this.isAnimating && this.triggerGraphpaperRectChanged) {
                        var e = this.$root[0].getBoundingClientRect();
                        if (this.didViewportChange(e) || this.forceRecompute) {
                            this.forceRecompute = !1,
                                this.currentScreen.width = e.width,
                                this.currentScreen.height = e.height,
                                this.currentScreen.expressionsVisible = this.controller.isListVisible(),
                                this.currentScreen.keypadOpen = this.keypadOpen(),
                                this.views.keypadView && this.$root.toggleClass("dcg-keypad-open", !!this.views.keypadView.isOpen),
                                this.$root.toggleClass("dcg-narrow", this.isNarrow(e.width)),
                                this.$root.toggleClass("dcg-short", this.isShort(e.height));
                            var t = e.width
                                , n = this.$grapher[0].getBoundingClientRect().height;
                            if (0 === n || 0 === t)
                                return void this.views.grapher.setIsVisible(!1);
                            var r, i = !this.controller.isListVisible();
                            this.views.keypadView && this.views.keypadView.height && (r = this.views.keypadView.height());
                            var o = this.isNarrow(t) ? t : this.getExpListWidth();
                            this.isNarrow(t) || (o = 2 * Math.floor(.5 * o)),
                                this.views.keypadView && this.views.keypadView.setProperty("graphpaperHeight", n);
                            var s = this.isNarrow(t) || i ? 0 : o;
                            this.views.grapher.$.css({
                                left: s + "px",
                                transform: null
                            }),
                                this.views.grapher.setIsVisible(t - s > 0 && n > 0),
                                this.views.grapher.updateScreenSize(t - s, n);
                            var a = {
                                top: 0,
                                bottom: n,
                                left: s,
                                right: t,
                                height: n,
                                width: t - s
                            };
                            this.controller.dispatch({
                                type: "computed-layout",
                                measurements: {
                                    isNarrow: this.isNarrow(t),
                                    keypadHeight: r
                                }
                            }),
                                this.triggerGraphpaperRectChanged(a)
                        }
                    }
                }
                ,
                e.isNarrow = function (e) {
                    return e < 450
                }
                ,
                e.isShort = function (e) {
                    return e <= 480
                }
                ,
                e.animateSlidingInterior = function () {
                    this.isAnimating || (this.isAnimating = !0,
                        setTimeout(function () {
                            this.isAnimating = !1,
                                this.resize()
                        }
                            .bind(this), this.parseTransitionDuration(".dcg-sliding-interior")))
                }
                ,
                e.parseTransitionDuration = function (e) {
                    var n = r(e)
                        , i = n.css("transition-duration");
                    return "s" !== i[i.length - 1] ? (t.warn("Unexpected transition-duration format. Expected a number followed by 's' but saw " + i),
                        0) : 1e3 * parseFloat(i.slice(0, -1))
                }
                ,
                e.defocusMobile = function () {
                    var e = r(document.activeElement);
                    0 !== e.filter("input, textarea").length && r("<input />").prependTo("body").focus().attr({
                        readonly: "readonly",
                        disabled: "true"
                    }).blur().remove()
                }
        })
    }),
    define("math/conics", ["require", "numeric", "math/distance"], function (e) {
        var t = e("numeric")
            , n = e("math/distance")
            , r = {
                isLine: function (e, r, i, o, s, a) {
                    var c = t.svd([[e, r, 1], [i, o, 1], [s, a, 1]]).S;
                    return n.approx(c[c.length - 1] / c[0], 0)
                },
                isCircle: function (e, r, i, o, s, a, c, l) {
                    var u = t.svd([[e * e + r * r, e, r, 1], [i * i + o * o, i, o, 1], [s * s + a * a, s, a, 1], [c * c + l * l, c, l, 1]]).S;
                    return n.approx(u[u.length - 1] / u[0], 0)
                },
                isConic: function (e, r, i, o, s, a, c, l, u, d, p, h) {
                    var f = t.svd([[e * e, r * r, 2 * e * r, e, r, 1], [i * i, o * o, 2 * i * o, i, o, 1], [s * s, a * a, 2 * s * a, s, a, 1], [c * c, l * l, 2 * c * l, c, l, 1], [u * u, d * d, 2 * u * d, u, d, 1], [p * p, h * h, 2 * p * h, p, h, 1]]).S;
                    return n.approx(f[f.length - 1] / f[0], 0)
                },
                conicQuadraticParameters: function (e, n, r, i, o, s, a, c, l, u) {
                    return {
                        a: t.det([[n * n, 2 * e * n, e, n, 1], [i * i, 2 * r * i, r, i, 1], [s * s, 2 * o * s, o, s, 1], [c * c, 2 * a * c, a, c, 1], [u * u, 2 * l * u, l, u, 1]]),
                        b: t.det([[e * e, n * n, e, n, 1], [r * r, i * i, r, i, 1], [o * o, s * s, o, s, 1], [a * a, c * c, a, c, 1], [l * l, u * u, l, u, 1]]),
                        c: -t.det([[e * e, 2 * e * n, e, n, 1], [r * r, 2 * r * i, r, i, 1], [o * o, 2 * o * s, o, s, 1], [a * a, 2 * a * c, a, c, 1], [l * l, 2 * l * u, l, u, 1]])
                    }
                },
                classifyConic: function (e, i, o, s, a, c, l, u, d, p, h, f) {
                    if (r.isLine(e, i, a, c, h, f))
                        return "line";
                    if (r.isCircle(e, i, o, s, d, p, h, f))
                        return "circle";
                    if (!r.isConic(e, i, o, s, a, c, l, u, d, p, h, f))
                        return "none";
                    var m = r.conicQuadraticParameters(e, i, o, s, a, c, l, u, d, p)
                        , g = t.svd([[m.a, m.b], [m.b, m.c]]).S;
                    return n.approx(g[g.length - 1] / g[0], 0, 20) ? "parabola" : m.b * m.b > m.a * m.c ? "hyperbola" : "ellipse"
                },
                classifyBranchConic: function (e) {
                    var t, n;
                    if (1 === e.length && 4 === e[0].length)
                        return "line";
                    for (var i = 0; i < e.length; i++) {
                        var o = e[i]
                            , s = o.length;
                        if (s < 12)
                            return "unknown";
                        try {
                            n = r.classifyConic(o[0], o[1], o[2 * Math.floor(1 * s / 12)], o[2 * Math.floor(1 * s / 12) + 1], o[2 * Math.floor(2 * s / 12)], o[2 * Math.floor(2 * s / 12) + 1], o[2 * Math.floor(3 * s / 12)], o[2 * Math.floor(3 * s / 12) + 1], o[2 * Math.floor(4 * s / 12)], o[2 * Math.floor(4 * s / 12) + 1], o[s - 2], o[s - 1])
                        } catch (e) {
                            return "unknown"
                        }
                        if ("none" === n)
                            return "none";
                        if (t && n !== t)
                            return "none";
                        t = n
                    }
                    return t
                }
            };
        return r
    }),
    define("predicates/common", ["require", "parser", "math/conics", "graphing-calc/models/expression", "graphing-calc/models/list"], function (e) {
        var t = e("parser")
            , n = e("math/conics")
            , r = e("graphing-calc/models/expression")
            , i = e("graphing-calc/models/list");
        return {
            FOCUSED_EXP: function (e, t) {
                return i.isItemSelected(e) && "expression" === e.type
            },
            FOCUSED_OR_EMPTY_EXP: function (e, t) {
                return !(!i.isItemSelected(e) || "expression" !== e.type) || "expression" === e.type && r.isEmpty(e)
            },
            COMPLEX_EXP: function (e, t) {
                return e.isGraphable && "expression" === e.type && t && t.branches[0] && "line" !== n.classifyBranchConic(t.branches[0].segments)
            },
            TABLEABLE_EXP: function (e, t) {
                return e.isGraphable && e.isTableable
            },
            EXP: function (e, t) {
                return "expression" === e.type
            },
            GRAPHABLE_EXP: function (e, t) {
                return e.isGraphable
            },
            HAS_ERROR: function (e, t) {
                return e.error && ("expression" !== e.type || !r.isEmpty(e))
            },
            DEPENDS_ON: function (e) {
                return function (n, r) {
                    if (!n.latex)
                        return !1;
                    var i = t.parse(n.latex);
                    return i.getDependencies().indexOf(e) >= 0
                }
            },
            DEFINES: function (e) {
                return function (n, r) {
                    if (!n.latex)
                        return !1;
                    var i = t.parse(n.latex);
                    return i.getExports().indexOf(e) >= 0
                }
            },
            HAS_N_DEPENDENCIES: function (e) {
                return function (t, n) {
                    return "expression" === t.type && t.formula && t.formula.variables && t.formula.variables.length >= e
                }
            },
            NONCONSTANT_LINE: function (e, t) {
                return t && "line" === n.classifyBranchConic(t.branches[0].segments) && !isFinite(e.formula.constant_value)
            },
            RESTRICTED_LINE: function (e, t) {
                return this.NONCONSTANT_LINE(e, t) && this.RESTRICTED(e, t)
            },
            EXP_NOT_RESTRICTED_LINE: function (e, t) {
                return this.EXP(e, t) && !this.RESTRICTED_LINE(e, t)
            },
            PARABOLA: function (e, t) {
                return t && t.branches && t.branches.some(function (e) {
                    return "parabola" === n.classifyBranchConic(e.segments)
                })
            },
            RESTRICTED: function (e, t) {
                return !(!e || !e.latex) && !!e.latex.match(/\\left\\{(.+)\\right\\}/)
            },
            SHIFTED_PARABOLA: function (e, t) {
                if (!this.PARABOLA(e, t))
                    return !1;
                var n = t.branches[0].compiled.fn;
                return 0 !== n(0) || 1 !== n(1)
            },
            EVALUATION: function (e, t) {
                return e.formula && e.formula.is_evaluable && isFinite(e.formula.constant_value)
            },
            HAS_DEPENDENT_Y: function (e, t) {
                return "y" === e.formula.assignment
            },
            SLIDER: function (e, t) {
                return !!e.sliderExists && !e.isGraphable
            },
            ANIMATING_SLIDER: function (e, t) {
                return e.sliderExists && e.slider.isPlaying
            },
            SLID_SLIDER: function (e, t) {
                return e.sliderExists && !e.isGraphable && 1 !== e.sliderValue
            },
            TABLE: function (e, t) {
                return "table" === e.type
            },
            REGRESSION: function (e, t) {
                return e.formula && e.formula.regression
            },
            HAS_DATA_COLUMN: function (e, t) {
                if (!this.TABLE(e, t))
                    return !1;
                for (var n = 1; n < e.columnModels.length; n++)
                    if (e.columnModels[n].discrete)
                        return !0;
                return !1
            },
            HAS_FUNCTION_COLUMN: function (e, t) {
                if (!this.TABLE(e, t))
                    return !1;
                for (var n = 1; n < e.columnModels.length; n++)
                    if (e.columnModels[n].discrete === !1)
                        return !0;
                return !1
            }
        }
    }),
    define("tours/base_tour", ["require", "pjs", "jquery", "underscore", "../predicates/common"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("underscore")
            , i = e("../predicates/common");
        return t(function (e) {
            e.init = function (e) {
                this.Calc = e,
                    this.controller = this.Calc.controller
            }
                ,
                e.expressionsVisible = function () {
                    return this.controller.isListVisible()
                }
                ,
                e.t = function (e, t) {
                    return this.controller.t(e, t)
                }
                ,
                e.requireExpressionsVisible = function () {
                    return {
                        position: "e",
                        content: this.t("Click to show the list of expressions."),
                        sel: n(".dcg-action-showexpressions"),
                        delayBeforeEnter: 400,
                        delayBeforeExit: 400
                    }
                }
                ,
                e.resourcesOpen = function () {
                    return n("body").hasClass("resources-open")
                }
                ,
                e.requireResourcesNotOpen = function () {
                    return {
                        position: "e",
                        content: this.t("Click to return to this graph."),
                        sel: n(".dcg-action-opendrawer"),
                        delayBeforeEnter: 400,
                        delayBeforeExit: 400
                    }
                }
                ,
                e.editListMode = function () {
                    return this.controller.isInEditListMode()
                }
                ,
                e.requireNotEditListMode = function () {
                    return {
                        position: "s",
                        content: this.t("Click to return to your expressions."),
                        sel: n(".dcg-action-toggle-edit")
                    }
                }
                ,
                e.expressionCount = function () {
                    return this.controller.getItemCount()
                }
                ,
                e.getExpSketch = function (e) {
                    var t = this.Calc.grapher.graphSketches[e.id];
                    if (!t || t.visible)
                        return t
                }
                ,
                e.getAvailableExp = function (e) {
                    var t = this.getMatchingExpSelector(i.FOCUSED_OR_EMPTY_EXP, e);
                    return t ? t : ".dcg-new-math-div"
                }
                ,
                e.expList = function () {
                    return n(this.Calc.rootElt).find(".dcg-exppanel")
                }
                ,
                e.getSelectorById = function (e) {
                    return this.controller.getItemSelectorById(e)
                }
                ,
                e.getModelById = function (e) {
                    return this.controller.getItemModel(e)
                }
                ,
                e.expMatches = function (e, t) {
                    if (!e)
                        return !1;
                    if ("function" == typeof t)
                        return t.call(i, e, this.getExpSketch(e));
                    for (var n = 0; n < t.length; n++)
                        if (!t[n].call(i, e, this.getExpSketch(e)))
                            return !1;
                    return !0
                }
                ,
                e.getMatchingExpId = function (e, t) {
                    var n = this.controller.getSelectedItem();
                    if (t = r.filter(t, function (e) {
                        return "string" == typeof e || "number" == typeof e
                    }),
                        this.expMatches(n, e) && t.indexOf(n.id) === -1)
                        return n.id;
                    var i = this.controller.getAllItemModels();
                    i = r.filter(i, function (e) {
                        var n = e.folderId && this.getModelById(e.folderId);
                        return !(n && n.collapsed || t.indexOf(e.id) !== -1)
                    }
                        .bind(this));
                    for (var o = 0; o < i.length; o++)
                        if (n = i[o],
                            this.expMatches(n, e))
                            return n.id;
                    return null
                }
                ,
                e.getMatchingExpSelector = function (e, t) {
                    var n = this.getMatchingExpId(e, t);
                    return n ? this.getSelectorById(n) : n
                }
                ,
                e.getMatchingExpModel = function (e, t) {
                    var n = this.getMatchingExpId(e, t);
                    return n ? this.getModelById(n) : n
                }
        })
    }),
    define("tours/mathart", ["require", "underscore", "jquery", "pjs", "./base_tour", "predicates/common"], function (e) {
        var t = e("underscore")
            , n = e("jquery")
            , r = e("pjs")
            , i = e("./base_tour")
            , o = e("predicates/common");
        return {
            mathart_intro: r(i, function (e) {
                e.restrictedLineTour = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    var e = this.getMatchingExpSelector(o.RESTRICTED_LINE)
                        , t = this.getMatchingExpSelector(o.EXP_NOT_RESTRICTED_LINE);
                    if (e)
                        return t ? (this.phaseOn++ ,
                            this.update()) : {
                                position: "e",
                                content: "<b>Brilliant!</b><br>Click here to create a new expression",
                                sel: ".dcg-new-math-div"
                            };
                    var n = this.getMatchingExpId(o.EXP)
                        , r = this.getSelectorById(n)
                        , i = this.getModelById(n);
                    if (r) {
                        var s = this.expMatches(i, o.NONCONSTANT_LINE)
                            , a = this.expMatches(i, o.HAS_ERROR);
                        return a ? {
                            doNotUpdate: !0
                        } : s ? {
                            position: "e",
                            content: ["<b>Awesome!</b><br>", "Restrict the domain of this line by making it!<br>", '<span class="trip-math">y=2x\\left\\{1 < x < 2\\right\\}</span><br>', "<i>Hint: press the 'A B C' button on the keypad to find the { } buttons</i>"].join(""),
                            sel: r
                        } : {
                                    position: "e",
                                    content: ["<b>Let's get started!</b><br>", 'Try graphing a straight line, like <span class="trip-math">y=2x</span>'].join(""),
                                    sel: r
                                }
                    }
                    return {
                        position: "e",
                        content: "Click here to make a new blank expression",
                        sel: ".dcg-new-math-div"
                    }
                }
                    ,
                    e.restrictedParabolaTour = function () {
                        if (this.resourcesOpen())
                            return this.requireResourcesNotOpen();
                        if (!this.expressionsVisible())
                            return this.requireExpressionsVisible();
                        var e = this.getMatchingExpSelector([o.RESTRICTED, o.PARABOLA]);
                        if (e)
                            return this.phaseOn++ ,
                                this.update();
                        var t = this.getMatchingExpId(o.EXP_NOT_RESTRICTED_LINE)
                            , n = this.getSelectorById(t)
                            , r = this.getModelById(t);
                        if (n) {
                            var i = this.expMatches(r, [o.PARABOLA, o.HAS_DEPENDENT_Y])
                                , s = this.expMatches(r, o.SHIFTED_PARABOLA)
                                , a = this.expMatches(r, o.PARABOLA)
                                , c = this.expMatches(r, o.HAS_ERROR);
                            return c ? {
                                doNotUpdate: !0
                            } : a ? i ? s ? {
                                position: "e",
                                content: ["<b>Nice!</b><br>Now let's restrict the range. Change this to:<br>", '<span class="trip-math">y=x^2-2\\left\\{y<4\\right\\}</span>'].join(""),
                                sel: n
                            } : {
                                    position: "e",
                                    content: ["<b>Move the parabola.</b><br>", 'Change this equation to <span class="trip-math">y=x^2-2</span>'].join(""),
                                    sel: n
                                } : {
                                    position: "e",
                                    content: ['<b>Don\'t forget the "y="!</b><br>', 'Try typing all of <span class="trip-math">y=x^2</span>'].join(""),
                                    sel: n
                                } : {
                                        position: "e",
                                        content: ['Now graph: <span class="trip-math">y=x^2</span><br>', "<i>Hint: you can type y=x^2,", " or use the a<sup>2</sup> button on the keypad below</i>"].join(""),
                                        sel: n
                                    }
                        }
                        return {
                            position: "e",
                            content: "Click here to make a new blank expression",
                            sel: ".dcg-new-math-div"
                        }
                    }
                    ,
                    e.colorWasChanged = !1,
                    e.changeColorTour = function () {
                        if (this.resourcesOpen())
                            return this.requireResourcesNotOpen();
                        if (!this.expressionsVisible())
                            return this.requireExpressionsVisible();
                        var e = this;
                        if (t.each(this.controller.getAllItemModels(), function (t) {
                            t.unobserve("color.tour"),
                                t.observe("color.tour", function () {
                                    e.colorWasChanged = !0
                                })
                        }),
                            this.colorWasChanged)
                            return n(".dcg-options-menu").length ? {
                                position: "e",
                                content: "... and click anywhere to close the color menu.",
                                sel: ".dcg-exppanel"
                            } : {
                                    final: !0,
                                    position: "e",
                                    endingMsg: "Great job! Now to complete your mission: make a face. Good luck!",
                                    sel: ".dcg-exppanel"
                                };
                        if (n(".dcg-options-menu").length)
                            return {
                                position: "e",
                                content: "<b>Last step...</b><br>Change the color!",
                                sel: ".dcg-options-menu"
                            };
                        var r = this.getMatchingExpSelector(o.GRAPHABLE_EXP)
                            , i = this.getMatchingExpSelector(o.EXP);
                        return r ? {
                            position: "e",
                            content: "<b>Great!</b><br>Click and hold to open the secret drawing menu.",
                            sel: r.find(".dcg-graph-icon")
                        } : {
                                position: "e",
                                content: '<b>Oops...</b><br>Make this graphable by typing <span class="trip-math">y=x</span>',
                                sel: i
                            }
                    }
                    ,
                    e.phaseOn = 0,
                    e.phases = [e.restrictedLineTour, e.restrictedParabolaTour, e.changeColorTour],
                    e.update = function () {
                        return this.phases[this.phaseOn].call(this)
                    }
            })
        }
    }),
    define("analytics/google_analytics", ["require"], function (e) {
        var t = !1;
        return {
            init: function (e) {
                if (!t) {
                    window._gaq = window._gaq || [],
                        _gaq.push(["_setAccount", e]),
                        _gaq.push(["_trackPageview"]),
                        t = !0;
                    var n = document.createElement("script");
                    n.type = "text/javascript",
                        n.async = !0,
                        n.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
                    var r = document.getElementsByTagName("script")[0];
                    r.parentNode.insertBefore(n, r)
                }
            },
            send: function (e) {
                t && _gaq.push(e)
            }
        }
    }),
    define("scroll_helpers", ["require"], function (e) {
        var t = function (e, t, n) {
            var r, i = t.height(), o = e.height(), s = t[0].scrollTop, a = e.offset().top + s - t.offset().top, c = a - n, l = o + a + n - i;
            return r = c >= l ? Math.min(Math.max(s, l), c) : .5 * (c + l),
                r !== s && (t[0].scrollTop = r,
                    t[0].scrollTop != s)
        };
        return {
            scrollVisible: t
        }
    }),
    define("tours/trip", ["require", "jquery", "pjs", "mathquill", "scroll_helpers"], function (e) {
        var t = e("jquery")
            , n = e("pjs")
            , r = e("mathquill")
            , i = e("scroll_helpers")
            , o = n({
                init: function (e) {
                    this.settings = e,
                        this.__cachedStepName = null
                },
                ensureTripBlock: function () {
                    if (!this.$tripBlock) {
                        var e = ['<div class="trip-block">', '<div class="trip-interior">', '<a class="trip-close">&times;</a>', '<div class="trip-content"></div>', "</div>", '<div class="trip-arrow"></div>', "</div>"].join("")
                            , n = this
                            , r = this.$tripBlock = t(e);
                        r.css({
                            top: "-100px"
                        }),
                            t("body").append(r),
                            r.find(".trip-close").on("dcg-tap", function (e) {
                                e.preventDefault(),
                                    n.stop()
                            }),
                            this.bindKeyEvents()
                    }
                },
                cleanup: function () {
                    return this.unbindKeyEvents(),
                        this.hideTripBlock(),
                        !1
                },
                bindKeyEvents: function () {
                    var e = this;
                    t(document).on({
                        "keydown.Trip": function (t) {
                            e.keyEvent.call(e, t)
                        }
                    })
                },
                unbindKeyEvents: function () {
                    t(document).off("keydown.Trip")
                },
                keyEvent: function (e) {
                    27 === e.which && this.stop()
                },
                stop: function () {
                    this.hideTripBlock(),
                        this.settings.onTripStop(),
                        this.__cachedContent = null,
                        this.__cachedSel = null
                },
                showTripBlock: function (e) {
                    if (this.ensureTripBlock(),
                        "string" == typeof e.sel && (e.sel = t(e.sel)),
                        e.sel = e.sel.filter(":visible"),
                        e.content !== this.__cachedContent || e.sel[0] !== this.__cachedSel) {
                        this.__cachedContent = e.content,
                            this.__cachedSel = e.sel[0],
                            e.scrollContainer && i.scrollVisible(e.sel, e.scrollContainer, 0);
                        var n = this.$tripBlock;
                        n.find(".trip-content").html(e.content),
                            n.toggleClass("trip-hidden", !!e.hidden);
                        var o = e.sel
                            , s = o.outerWidth()
                            , a = o.outerHeight()
                            , c = n.outerWidth()
                            , l = n.outerHeight()
                            , u = 10
                            , d = 10;
                        n.removeClass("trip-e trip-s trip-w trip-n");
                        var p = 0;
                        switch (e.position) {
                            case "e":
                                n.addClass("trip-e"),
                                    n.css({
                                        left: o.offset().left + s + d,
                                        top: o.offset().top - (l - a) / 2
                                    });
                                break;
                            case "s":
                                n.addClass("trip-s");
                                var h = o.offset().left + (s - c) / 2;
                                n.css({
                                    left: h,
                                    top: o.offset().top + a + u
                                }),
                                    h + c > t(window).width() - 1 && (p = t(window).width() - 1 - h - c),
                                    h < 1 && (p = 1 - h);
                                break;
                            case "w":
                                n.addClass("trip-w"),
                                    n.css({
                                        left: o.offset().left - (d + c),
                                        top: o.offset().top - (l - a) / 2
                                    });
                                break;
                            default:
                                n.addClass("trip-n"),
                                    n.css({
                                        left: o.offset().left + (s - c) / 2,
                                        top: o.offset().top - u - l
                                    })
                        }
                        n.find(".trip-interior").css("transform", "translate(" + p + "px, 0)"),
                            n.css({
                                display: "inline-block"
                            }),
                            n.find(".trip-math:not(.dcg-mq-math-mode)").each(function () {
                                r.StaticMath(this)
                            })
                    }
                },
                fadeInTripBlock: function () {
                    this.ensureTripBlock();
                    var e = this.$tripBlock;
                    setTimeout(function () {
                        e.addClass("trip-is-loaded")
                    }, 0)
                },
                hideTripBlock: function () {
                    this.$tripBlock && this.$tripBlock.removeClass("trip-is-loaded")
                }
            });
        return o
    }),
    define("tours/tour_manager", ["require", "pjs", "analytics/google_analytics", "./trip"], function (e) {
        var t = e("pjs")
            , n = e("analytics/google_analytics")
            , r = e("./trip")
            , i = t(function (e, t) {
                e.init = function () {
                    this.tripManager = new r({
                        onTripStop: this.stopTour.bind(this)
                    }),
                        this.currentStep = void 0,
                        this.currentTour = void 0
                }
                    ,
                    e._tripLoop = function () {
                        if (clearTimeout(this.__tripLoopTimeout),
                            this.running) {
                            var e = this;
                            e._advanceTrip(),
                                e.__tripLoopTimeout = setTimeout(e._tripLoop.bind(e), 200)
                        }
                    }
                    ,
                    e._advanceTrip = function () {
                        var e = this.currentTour.update()
                            , t = (new Date).getTime();
                        if (e && this.currentStep && e.content !== this.currentStep.content) {
                            if (this.currentStep.delayBeforeExit) {
                                if (this.throttleTimer && t - this.throttleTimer < this.currentStep.delayBeforeExit)
                                    return;
                                if (!this.throttleTimer)
                                    return void (this.throttleTimer = t)
                            }
                            e.delayBeforeEnter && (this.currentStep = e,
                                this.throttleTimer = t)
                        }
                        if (!(e && this.currentStep && e.content === this.currentStep.content && this.throttleTimer && t - this.throttleTimer < this.currentStep.delayBeforeEnter) && (this.throttleTimer = null,
                            e && !e.doNotUpdate)) {
                            if (this.currentStep = e,
                                e.final)
                                return this.finishTour(e, 5),
                                    void n.send(["_trackEvent", "Completed tour", e.endingMsg]);
                            this.tripManager.showTripBlock(e)
                        }
                    }
                    ,
                    e.updateNow = e._advanceTrip,
                    e.startTour = function (e) {
                        this.running || (this.currentTour = e,
                            this.running = !0,
                            this._tripLoop(),
                            this.tripManager.fadeInTripBlock())
                    }
                    ,
                    e.closingMsg = "<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...",
                    e.finishTour = function (e, t) {
                        clearTimeout(this.__tripLoopTimeout),
                            this.running = !1;
                        var n = this;
                        return t < 0 ? void n.tripManager.stop() : (e.endingMsg && (e.content = n.closingMsg.replace("__endingMessage__", e.endingMsg).replace("__seconds__", t)),
                            n.tripManager.showTripBlock(e),
                            void setTimeout(function () {
                                n.finishTour(e, t - 1)
                            }, 1e3))
                    }
                    ,
                    e.stopTour = function () {
                        this.running = !1,
                            this.currentStep = void 0,
                            this.currentTour = void 0
                    }
            });
        return i
    }),
    define("ipad.scrollfix", ["require", "jquery"], function (e) {
        var t = e("jquery")
            , n = 0
            , r = 1
            , i = 2
            , o = !1
            , s = function () {
                a(document),
                    o = !0
            }
            , a = function (e) {
                o || t(e).bind("touchstart", function (e) {
                    var o = t(e.target)
                        , s = n
                        , a = null;
                    if (!o.closest("[disablescroll]").length)
                        for (; s === n && o.length && void 0 !== o[0].tagName;) {
                            var c = o.css("overflow")
                                , l = o.css("overflow-y");
                            if ("hidden" !== c && "visible" !== c && "hidden" !== l && "hidden" !== l) {
                                var u = o.scrollTop();
                                0 !== u && (s = i),
                                    o.scrollTop(u + 1),
                                    o.scrollTop() !== u && (s |= r,
                                        o.scrollTop(u))
                            }
                            o = o.parent()
                        }
                    if (s !== n) {
                        a = [];
                        for (var d = e.originalEvent.touches, p = 0; p < d.length; p++) {
                            var h = {};
                            for (var f in d[p])
                                d[p].hasOwnProperty(f) && (h[f] = d[p][f]);
                            a.push(h)
                        }
                    }
                    t(document).on("touchmove.scrollfix", function (e) {
                        if (a) {
                            var t = a[0]
                                , o = e.originalEvent.touches[0]
                                , c = o.screenY - t.screenY;
                            c > 0 && !(s & i) ? s = n : c < 0 && !(s & r) && (s = n),
                                c && (a = null)
                        }
                        s === n && e.preventDefault()
                    }),
                        t(document).on("touchend.scrollfix", function () {
                            t(document).off(".scrollfix")
                        })
                })
            };
        return {
            limitScrollOnElement: a,
            limitScrollOnDocument: s
        }
    }),
    define("migrations/0", ["require", "graphing/axisarrowmode"], function (e) {
        function t(e) {
            if (e.type) {
                if (c.hasOwnProperty(e.type))
                    return e.type;
                throw new Error("Invalid item type: '" + e.type + "'.")
            }
            return void 0 !== e.text ? "text" : void 0 !== e.columns || void 0 !== e.headings ? "table" : "expression"
        }
        function n(e) {
            return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g, "\\operatorname{$1}")
        }
        function r(e) {
            var t = {};
            for (var r in e)
                e.hasOwnProperty(r) && ("latex" === r ? t[r] = n(e[r]) : "values" === r ? t[r] = e[r].map(n) : t[r] = e[r]);
            return t
        }
        function i(e) {
            var i, o = t(e), s = {};
            switch (o) {
                case "expression":
                    for (i in e)
                        e.hasOwnProperty(i) && ("latex" === i ? s[i] = n(e[i]) : s[i] = e[i]);
                    return s.type = o,
                        s;
                case "table":
                    for (i in e)
                        e.hasOwnProperty(i) && ("columns" === i ? s[i] = e[i].map(r) : s[i] = e[i]);
                    return s.type = o,
                        s;
                case "image":
                    for (i in e)
                        e.hasOwnProperty(i) && ("width" === i || "height" === i || "x" === i || "y" === i ? s[i] = n(e[i]) : s[i] = e[i]);
                    return s.type = o,
                        s;
                case "text":
                case "folder":
                    for (i in e)
                        e.hasOwnProperty(i) && (s[i] = e[i]);
                    return s.type = o,
                        s
            }
        }
        function o(e) {
            var t = {};
            for (var n in e)
                e.hasOwnProperty(n) && "xAxisArrows" !== n && "yAxisArrows" !== n && (t[n] = e[n]);
            return t.xAxisArrowMode = l[e.xAxisArrows || "none"],
                t.yAxisArrowMode = l[e.yAxisArrows || "none"],
                t
        }
        function s(e) {
            if (e.version)
                throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = o(e.graph),
                t.expressions = {
                    list: e.expressions.list.map(i)
                },
                t.version = 0,
                t
        }
        var a = e("graphing/axisarrowmode")
            , c = {
                expression: !0,
                table: !0,
                image: !0,
                folder: !0,
                text: !0
            }
            , l = {
                none: a.NONE,
                both: a.BOTH,
                positive: a.POSITIVE
            };
        return s
    }),
    define("migrations/1", ["require"], function (e) {
        function t(e) {
            return e.replace(/\\(sech|csch)/g, "\\operatorname{$1}")
        }
        function n(e) {
            var n = {};
            for (var r in e)
                e.hasOwnProperty(r) && ("latex" === r ? n[r] = t(e[r]) : "values" === r ? n[r] = e[r].map(t) : n[r] = e[r]);
            return n
        }
        function r(e) {
            var r, i = e.type, o = {};
            switch (i) {
                case "expression":
                    for (r in e)
                        e.hasOwnProperty(r) && ("latex" === r ? o[r] = t(e[r]) : o[r] = e[r]);
                    return o;
                case "table":
                    for (r in e)
                        e.hasOwnProperty(r) && ("columns" === r ? o[r] = e[r].map(n) : o[r] = e[r]);
                    return o;
                case "image":
                    for (r in e)
                        e.hasOwnProperty(r) && ("width" === r || "height" === r || "x" === r || "y" === r ? o[r] = t(e[r]) : o[r] = e[r]);
                    return o;
                case "text":
                case "folder":
                    for (r in e)
                        e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }
        function i(e) {
            if (e.version)
                throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph,
                t.expressions = {
                    list: e.expressions.list.map(r)
                },
                t.version = o,
                t
        }
        var o = 1;
        return i
    }),
    define("migrations/2", ["require", "expressions/colors"], function (e) {
        function t(e) {
            switch (e) {
                case a:
                    return s.RED;
                case c:
                    return s.BLUE;
                case l:
                    return s.GREEN;
                case u:
                    return s.PURPLE;
                case d:
                    return s.ORANGE;
                case p:
                    return s.BLACK;
                default:
                    return e
            }
        }
        function n(e) {
            var n = {};
            for (var r in e)
                e.hasOwnProperty(r) && ("color" === r ? n[r] = t(e[r]) : n[r] = e[r]);
            return n
        }
        function r(e) {
            var r, i = e.type, o = {};
            switch (i) {
                case "expression":
                    for (r in e)
                        e.hasOwnProperty(r) && ("color" === r ? o[r] = t(e[r]) : o[r] = e[r]);
                    return o;
                case "table":
                    for (r in e)
                        e.hasOwnProperty(r) && ("columns" === r ? o[r] = e[r].map(n) : o[r] = e[r]);
                    return o;
                case "image":
                case "text":
                case "folder":
                    for (r in e)
                        e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }
        function i(e) {
            if (e.version > 1)
                throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph,
                t.expressions = {
                    list: e.expressions.list.map(r)
                },
                t.version = o,
                t
        }
        var o = 2
            , s = e("expressions/colors")
            , a = "#C0504D"
            , c = "#4F81BD"
            , l = "#9BBB59"
            , u = "#8064A2"
            , d = "#F79646"
            , p = "#000000";
        return i
    }),
    define("migrations/3", ["require", "lib/number-to-latex"], function (e) {
        function t(e) {
            var t, n = e.type, r = {};
            switch (n) {
                case "expression":
                    for (t in e)
                        e.hasOwnProperty(t) && ("sliderMax" === t || "sliderMin" === t || "sliderInterval" === t ? r[t] = i(e[t]) : "domain" === t ? r[t] = {
                            max: i(e[t].max),
                            min: i(e[t].min)
                        } : r[t] = e[t]);
                    return r.hasOwnProperty("sliderMin") && void 0 === r.sliderInterval && (r.sliderInterval = ""),
                        r;
                case "image":
                case "table":
                case "text":
                case "folder":
                    for (t in e)
                        e.hasOwnProperty(t) && (r[t] = e[t]);
                    return r;
                default:
                    throw new Error("Unexpected expression type: " + n)
            }
        }
        function n(e) {
            if (e.version > 2)
                throw new Error("Unexpected version: " + e.version);
            var n = {};
            return n.graph = e.graph,
                n.expressions = {
                    list: e.expressions.list.map(t)
                },
                n.version = r,
                n
        }
        var r = 3
            , i = e("lib/number-to-latex").default;
        return n
    }),
    define("migrations/4", ["require", "expressions/styles"], function (e) {
        function t(e) {
            switch (e) {
                case a:
                    return s.POINT;
                case c:
                    return s.CROSS;
                case l:
                    return s.OPEN;
                case u:
                    return s.SOLID;
                case d:
                    return s.DASHED;
                case p:
                    return s.DOTTED;
                default:
                    return e
            }
        }
        function n(e) {
            var n = {};
            for (var r in e)
                e.hasOwnProperty(r) && ("style" === r ? n[r] = t(e[r]) : n[r] = e[r]);
            return n
        }
        function r(e) {
            var r, i = e.type, o = {};
            switch (i) {
                case "expression":
                    for (r in e)
                        e.hasOwnProperty(r) && ("style" === r ? o[r] = t(e[r]) : o[r] = e[r]);
                    return o;
                case "table":
                    for (r in e)
                        e.hasOwnProperty(r) && ("columns" === r ? o[r] = e[r].map(n) : o[r] = e[r]);
                    return o;
                case "image":
                case "text":
                case "folder":
                    for (r in e)
                        e.hasOwnProperty(r) && (o[r] = e[r]);
                    return o;
                default:
                    throw new Error("Unexpected expression type: " + i)
            }
        }
        function i(e) {
            if (3 !== e.version)
                throw new Error("Unexpected version: " + e.version);
            var t = {};
            return t.graph = e.graph,
                t.expressions = {
                    list: e.expressions.list.map(r)
                },
                t.version = o,
                t
        }
        var o = 4
            , s = e("expressions/styles")
            , a = "point"
            , c = "cross"
            , l = "open"
            , u = "normal"
            , d = "dashed"
            , p = "dotted";
        return i
    }),
    define("graphing/columnmode", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.POINTS = "POINTS",
            t.LINES = "LINES",
            t.POINTS_AND_LINES = "POINTS_AND_LINES"
    }),
    define("migrations/5", ["require", "graphing/columnmode"], function (e) {
        function t(e) {
            var t, n = {};
            for (var r in e)
                if (e.hasOwnProperty(r))
                    switch (t = e[r],
                    r) {
                        case "showAxes":
                            n.showXAxis = t,
                                n.showYAxis = t;
                            break;
                        case "showLabels":
                            n.xAxisNumbers = t,
                                n.yAxisNumbers = t,
                                n.polarNumbers = t;
                            break;
                        case "labelXMode":
                            n.xAxisStep = "pi" === t ? Math.PI : 0;
                            break;
                        case "labelYMode":
                            n.yAxisStep = "pi" === t ? Math.PI : 0;
                            break;
                        default:
                            n[r] = t
                    }
            return n
        }
        function n(e) {
            var t = {};
            for (var n in e)
                e.hasOwnProperty(n) && "showPoints" !== n && "showLine" !== n && (t[n] = e[n]);
            return void 0 === e.showPoints && void 0 === e.showLine || (e.showPoints && e.showLine ? t.columnMode = o.POINTS_AND_LINES : e.showPoints ? t.columnMode = o.POINTS : e.showLine ? t.columnMode = o.LINES : (t.hidden = !0,
                t.columnMode = o.POINTS)),
                t
        }
        function r(e) {
            var t, r = e.type, i = {};
            switch (r) {
                case "expression":
                    void 0 === e.hidden ? e.hasOwnProperty("graphed") ? i.hidden = !e.graphed : e.hasOwnProperty("userRequestedGraphing") ? i.hidden = "never" === e.userRequestedGraphing : i.hidden = !1 : i.hidden = e.hidden;
                    for (t in e)
                        e.hasOwnProperty(t) && "graphed" !== t && "userRequestedGraphing" !== t && "hidden" !== t && "slider" !== t && ("color" !== t ? "style" !== t ? "sliderInterval" !== t ? i[t] = e[t] : i.sliderInterval = "undefined" === e.sliderInterval ? "" : e.sliderInterval : i.style = "normal" === e.style ? "SOLID" : e.style : "object" == typeof e.color ? i.color = e.color.value : i.color = e.color);
                    return i;
                case "table":
                    if (e.headings || e.columns) {
                        var o = e.headings ? e.headings : e.columns;
                        if (i.columns = o.map(n),
                            e.rows)
                            for (var s = 0; s < i.columns.length; s++) {
                                var a = i.columns[s];
                                a.values = [];
                                for (var c = 0; c < e.rows.length; c++)
                                    a.values.push(e.rows[c][s])
                            }
                    }
                    for (t in e)
                        e.hasOwnProperty(t) && "rows" !== t && "headings" !== t && "columns" !== t && (i[t] = e[t]);
                    return i;
                case "image":
                case "text":
                case "folder":
                    for (t in e)
                        e.hasOwnProperty(t) && (i[t] = e[t]);
                    return i;
                default:
                    throw new Error("Unexpected expression type: " + r)
            }
        }
        function i(e) {
            if (4 !== e.version)
                throw new Error("Unexpected version: " + e.version);
            var n = {};
            return n.graph = t(e.graph),
                n.expressions = {
                    list: e.expressions.list.map(r)
                },
                n.version = s,
                n
        }
        var o = e("graphing/columnmode")
            , s = 5;
        return i
    }),
    define("migrations/legacy-interpolated-label-parser", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            return !(e.length < 2) && ("`" === e[0] && "`" === e[e.length - 1])
        }
        function r(e) {
            if (n(e))
                return {
                    raw: e,
                    parts: [e]
                };
            for (var t, r = ["[a-zA-Z][0-9]*", "[a-zA-Z]_[a-zA-Z0-9]+", "[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"], i = "({" + r.join("})|({") + "})", o = new RegExp(i, "g"), s = [], a = 0, c = 0; t = o.exec(e);) {
                c = t.index,
                    c > a && s.push(e.substr(a, c - a));
                var l = t[0]
                    , u = l.replace(/[{}\$]/g, "").replace(/^([a-zA-Z])([0-9]+)$/, "$1_$2");
                s.push({
                    symbol: u,
                    str: l
                }),
                    a = t.index + l.length
            }
            return a < e.length && s.push(e.substr(a)),
                {
                    raw: e,
                    parts: s
                }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.isMathLabel = n,
            t.parse = r
    }),
    define("migrations/6", ["require", "lib/deepCopy", "graphing/columnmode", "expressions/styles", "expressions/opacity", "./legacy-interpolated-label-parser", "underscore"], function (e) {
        function t(e) {
            var t = {};
            for (var n in e)
                if (e.hasOwnProperty(n) && "style" !== n)
                    if ("values" === n && (t[n] = e[n].map(function (e) {
                        return e ? "" + e : ""
                    })),
                        "columnMode" !== n || e.hasOwnProperty("points") || e.hasOwnProperty("lines"))
                        t[n] = e[n];
                    else
                        switch (e[n]) {
                            case a.LINES:
                                t.points = !1,
                                    t.lines = !0;
                                break;
                            case a.POINTS_AND_LINES:
                                t.points = !0,
                                    t.lines = !0;
                                break;
                            default:
                                t.points = !0,
                                    t.lines = !1
                        }
            return t.hasOwnProperty("pointStyle") || (t.pointStyle = c.POINT),
                t.hasOwnProperty("lineStyle") || (t.lineStyle = c.SOLID),
                t.id = "" + t.id,
                t
        }
        function n(e) {
            var t = u.parse(e)
                , n = "";
            return d.each(t.parts, function (e) {
                n += "object" == typeof e && e.str ? "$" + e.str : e
            }),
                n
        }
        function r(e, r, i) {
            var o, s = e.type, a = {};
            switch (s) {
                case "folder":
                    for (o in e)
                        e.hasOwnProperty(o) && ("memberIds" === o || (a[o] = e[o]));
                    break;
                case "expression":
                    for (o in e)
                        if (e.hasOwnProperty(o))
                            if ("style" !== o || e.hasOwnProperty("pointStyle") || e.hasOwnProperty("lineStyle"))
                                h.hasOwnProperty(o) ? (a.slider = a.slider || {},
                                    a.slider[h[o]] = e[o]) : a[o] = e[o],
                                    e.label && (a.label = n(e.label));
                            else {
                                var u = e[o];
                                d.contains([c.POINT, c.OPEN, c.CROSS], u) ? (a.pointStyle = u,
                                    a.lineStyle = c.SOLID) : d.contains([c.SOLID, c.DASHED, c.DOTTED], u) ? (a.pointStyle = c.POINT,
                                        a.lineStyle = u) : (a.pointStyle = c.POINT,
                                            a.lineStyle = c.SOLID)
                            }
                    a.hasOwnProperty("fillOpacity") || (a.fillOpacity = l.DEFAULT),
                        a.label === !1 && (a.label = ""),
                        a.labelSize || (a.labelSize = "medium");
                    break;
                case "image":
                    for (o in e)
                        e.hasOwnProperty(o) && "x" !== o && "y" !== o && (a[o] = e[o]);
                    a.center = "\\left(" + (e.x || "0") + "," + (e.y || "0") + "\\right)",
                        a.angle = e.angle || "0",
                        a.foreground = !!a.foreground;
                    break;
                case "text":
                    for (o in e)
                        e.hasOwnProperty(o) && (a[o] = e[o]);
                    break;
                case "table":
                    for (o in e)
                        e.hasOwnProperty(o) && ("columns" === o ? a[o] = e[o].map(t) : a[o] = e[o]);
                    break;
                default:
                    throw new Error("Unexpected expression type: " + s)
            }
            if (a.id = "" + a.id,
                "folder" === e.type)
                r.folderId = a.id,
                    r.memberIds = e.memberIds,
                    a.folderId = "";
            else {
                var p = i[a.id];
                r.memberIds && r.memberIds[p] ? a.folderId = r.folderId : (a.folderId = "",
                    r.folderId = void 0,
                    r.memberIds = void 0)
            }
            return a
        }
        function i(e) {
            for (var t = 0, n = /^[0-9]+$/, r = e.length - 1; r >= 0; r--) {
                var i, o = e[r], s = o.id;
                if (n.test(s) && (i = parseInt(s, 10),
                    i > t && (t = i)),
                    "table" === o.type && o.columns)
                    for (var a = o.columns.length - 1; a >= 0; a--)
                        s = o.columns[a].id,
                            n.test(s) && (i = parseInt(s, 10),
                                i > t && (t = i))
            }
            return t + 1
        }
        function o(e) {
            if (5 !== e.version)
                throw new Error("Unexpected version: " + e.version);
            var t = e.expressions.list
                , n = -1
                , o = {}
                , a = {}
                , c = {}
                , l = {};
            return l.graph = e.graph,
                l.expressions = {
                    list: t.map(function (e) {
                        return o[e.id] ? (n === -1 && (n = i(t)),
                            a[n] = e.id,
                            e = s(e),
                            e.id = n + "",
                            n += 1) : a[e.id] = e.id,
                            o[e.id] = !0,
                            r(e, c, a)
                    })
                },
                l.version = p,
                l
        }
        var s = e("lib/deepCopy").default
            , a = e("graphing/columnmode")
            , c = e("expressions/styles")
            , l = e("expressions/opacity")
            , u = e("./legacy-interpolated-label-parser")
            , d = e("underscore")
            , p = 6
            , h = {
                sliderMin: "min",
                sliderMax: "max",
                sliderInterval: "step",
                sliderHardMin: "hardMin",
                sliderHardMax: "hardMax",
                sliderAnimationPeriod: "animationPeriod",
                sliderLoopMode: "loopMode",
                sliderPlayDirection: "playDirection",
                sliderIsPlaying: "isPlaying"
            };
        return o
    }),
    define("main/migrate_state", ["require", "console", "migrations/0", "migrations/1", "migrations/2", "migrations/3", "migrations/4", "migrations/5", "migrations/6"], function (e) {
        function t(e) {
            if (e.version > i)
                return n.warn("Loading saved state with version " + e.version + " but last known version is " + i + ". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),
                    e;
            if (e.hasOwnProperty("version") && !r[e.version])
                return n.warn("State has invalid version " + e.version + ". If a version is present, it should be a non-negative integer less than or equal to " + i + "."),
                    e;
            for (e.hasOwnProperty("version") || (e = r[0](e)); e.version < i;)
                e = r[e.version + 1](e);
            return e
        }
        var n = e("console")
            , r = [e("migrations/0"), e("migrations/1"), e("migrations/2"), e("migrations/3"), e("migrations/4"), e("migrations/5"), e("migrations/6")]
            , i = 6;
        return {
            migrations: r,
            currentVersion: i,
            migrateToLatest: t
        }
    }),
    define("vendor/papaparse", ["require", "jquery"], function (e) {
        "use strict";
        function t(e, t) {
            var n = a(t);
            if ("string" == typeof e) {
                if (!n.download) {
                    var s = new o(n)
                        , c = s.parse(e);
                    return c
                }
                var u = new r(n);
                u.stream(e)
            } else if (e instanceof File)
                if (n.step || n.chunk) {
                    var u = new i(n);
                    u.stream(e)
                } else {
                    var s = new o(n);
                    reader = new FileReader,
                        reader.onload = function (e) {
                            var t = new o(n);
                            t.parse(e.target.result)
                        }
                        ,
                        reader.onerror = function () {
                            l(n.error) && n.error(reader.error, e)
                        }
                        ,
                        reader.readAsText(e, n.encoding)
                }
        }
        function n(e, t) {
            function n() {
                "object" == typeof t && ("string" == typeof t.delimiter && 1 == t.delimiter.length && p.BAD_DELIMITERS.indexOf(t.delimiter) == -1 && (c = t.delimiter),
                    ("boolean" == typeof t.quotes || t.quotes instanceof Array) && (a = t.quotes),
                    "string" == typeof t.newline && (l = t.newline))
            }
            function r(e) {
                if ("object" != typeof e)
                    return [];
                var t = [];
                for (var n in e)
                    t.push(n);
                return t
            }
            function i(e, t) {
                var n = "";
                "string" == typeof e && (e = JSON.parse(e)),
                    "string" == typeof t && (t = JSON.parse(t));
                var r = e instanceof Array && e.length > 0
                    , i = !(t[0] instanceof Array);
                if (r) {
                    for (var s = 0; s < e.length; s++)
                        s > 0 && (n += c),
                            n += o(e[s], s);
                    t.length > 0 && (n += l)
                }
                for (var a = 0; a < t.length; a++) {
                    for (var u = r ? e.length : t[a].length, d = 0; d < u; d++) {
                        d > 0 && (n += c);
                        var p = r && i ? e[d] : d;
                        n += o(t[a][p], d)
                    }
                    a < t.length - 1 && (n += l)
                }
                return n
            }
            function o(e, t) {
                if ("undefined" == typeof e || null === e)
                    return "";
                e = e.toString().replace(/"/g, '""');
                var n = "boolean" == typeof a && a || a instanceof Array && a[t] || s(e, p.BAD_DELIMITERS) || e.indexOf(c) > -1 || " " == e.charAt(0) || " " == e.charAt(e.length - 1);
                return n ? '"' + e + '"' : e
            }
            function s(e, t) {
                for (var n = 0; n < t.length; n++)
                    if (e.indexOf(t[n]) > -1)
                        return !0;
                return !1
            }
            var a = !1
                , c = ","
                , l = "\r\n";
            if (n(),
                "string" == typeof e && (e = JSON.parse(e)),
                e instanceof Array) {
                if (!e.length || e[0] instanceof Array)
                    return i(null, e);
                if ("object" == typeof e[0])
                    return i(r(e[0]), e)
            } else if ("object" == typeof e)
                return "string" == typeof e.data && (e.data = JSON.parse(e.data)),
                    e.data instanceof Array && (e.fields || (e.fields = e.data[0] instanceof Array ? e.fields : r(e.data[0])),
                        e.data[0] instanceof Array || "object" == typeof e.data[0] || (e.data = [e.data])),
                    i(e.fields || [], e.data || []);
            throw "exception: Unable to serialize unrecognized input"
        }
        function r(e) {
            e = e || {},
                e.chunkSize || (e.chunkSize = p.RemoteChunkSize);
            var t, n, r = 0, i = 0, s = "", a = "", u = new o(c(e));
            this.stream = function (o) {
                function c() {
                    if (t = new XMLHttpRequest,
                        t.onload = d,
                        t.onerror = p,
                        t.open("GET", o, !0),
                        e.step) {
                        var n = r + e.chunkSize - 1;
                        i && n > i && (n = i),
                            t.setRequestHeader("Range", "bytes=" + r + "-" + n)
                    }
                    t.send(),
                        r += e.chunkSize
                }
                function d() {
                    if (4 == t.readyState) {
                        if (t.status < 200 || t.status >= 400)
                            return void p();
                        s += a + t.responseText,
                            a = "";
                        var i = !e.step || r > h(t);
                        if (!i) {
                            var o = s.lastIndexOf("\n");
                            if (o < 0 && (o = s.lastIndexOf("\r")),
                                !(o > -1))
                                return void n();
                            a = s.substring(o + 1),
                                s = s.substring(0, o)
                        }
                        var c = u.parse(s);
                        s = "",
                            l(e.chunk) && (e.chunk(c),
                                c = void 0),
                            i || c.meta.paused || n()
                    }
                }
                function p() {
                    l(e.error) && e.error(t.statusText)
                }
                function h(e) {
                    var t = e.getResponseHeader("Content-Range");
                    return parseInt(t.substr(t.lastIndexOf("/") + 1))
                }
                (n = function () {
                    c()
                }
                )()
            }
        }
        function i(e) {
            e = e || {},
                e.chunkSize || (e.chunkSize = p.LocalChunkSize);
            var t, n = 0, r = "", i = "", s = new o(c(e)), a = "function" == typeof FileReader;
            this.stream = function (o) {
                function c() {
                    n < o.size && u()
                }
                function u() {
                    var r = Math.min(n + e.chunkSize, o.size)
                        , i = t.readAsText(h.call(o, n, r), e.encoding);
                    a || d({
                        target: {
                            result: i
                        }
                    })
                }
                function d(t) {
                    n += e.chunkSize,
                        r += i + t.target.result,
                        i = "";
                    var a = n >= o.size;
                    if (!a) {
                        var u = r.lastIndexOf("\n");
                        if (u < 0 && (u = r.lastIndexOf("\r")),
                            !(u > -1))
                            return void c();
                        i = r.substring(u + 1),
                            r = r.substring(0, u)
                    }
                    var d = s.parse(r);
                    r = "",
                        l(e.chunk) && (e.chunk(d, o),
                            d = void 0),
                        a || d.meta.paused || c()
                }
                function p() {
                    l(e.error) && e.error(t.error, o)
                }
                var h = o.slice || o.webkitSlice || o.mozSlice;
                a ? (t = new FileReader,
                    t.onload = d,
                    t.onerror = p) : t = new FileReaderSync,
                    c()
            }
        }
        function o(e) {
            function t() {
                return b && f && (u("Delimiter", "UndetectableDelimiter", "Unable to auto-detect delimiting character; defaulted to '" + p.DefaultDelimiter + "'"),
                    f = !1),
                    n() && r(),
                    i()
            }
            function n() {
                return e.header && 0 == v.length
            }
            function r() {
                if (b) {
                    for (var e = 0; n() && e < b.data.length; e++)
                        for (var t = 0; t < b.data[e].length; t++)
                            v.push(b.data[e][t]);
                    b.data.splice(0, 1)
                }
            }
            function i() {
                if (!b || !e.header && !e.dynamicTyping)
                    return b;
                for (var t = 0; t < b.data.length; t++) {
                    for (var n = {}, r = 0; r < b.data[t].length; r++) {
                        if (e.dynamicTyping) {
                            var i = b.data[t][r];
                            "true" == i ? b.data[t][r] = !0 : "false" == i ? b.data[t][r] = !1 : b.data[t][r] = a(i)
                        }
                        e.header && (r >= v.length ? (n.__parsed_extra || (n.__parsed_extra = []),
                            n.__parsed_extra.push(b.data[t][r])) : n[v[r]] = b.data[t][r])
                    }
                    e.header && (b.data[t] = n,
                        r > v.length ? u("FieldMismatch", "TooManyFields", "Too many fields: expected " + v.length + " fields but parsed " + r, t) : r < v.length && u("FieldMismatch", "TooFewFields", "Too few fields: expected " + v.length + " fields but parsed " + r, t))
                }
                return e.header && b.meta && (b.meta.fields = v),
                    b
            }
            function o(t) {
                for (var n, r, i, o = [",", "\t", "|", ";", p.RECORD_SEP, p.UNIT_SEP], a = 0; a < o.length; a++) {
                    var c = o[a]
                        , l = 0
                        , u = 0;
                    i = void 0;
                    for (var d = new s({
                        delimiter: c,
                        preview: 10
                    }).parse(t), h = 0; h < d.data.length; h++) {
                        var f = d.data[h].length;
                        u += f,
                            "undefined" != typeof i ? f > 1 && (l += Math.abs(f - i),
                                i = f) : i = f
                    }
                    u /= d.data.length,
                        ("undefined" == typeof r || l < r) && u > 1.99 && (r = l,
                            n = c)
                }
                return e.delimiter = n,
                    {
                        successful: !!n,
                        bestDelimiter: n
                    }
            }
            function a(e) {
                var t = m.test(e);
                return t ? parseFloat(e) : e
            }
            function u(e, t, n, r) {
                b.errors.push({
                    type: e,
                    code: t,
                    message: n,
                    row: r
                })
            }
            var d, h, f, m = /^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i, g = this, y = !1, v = [], b = {
                data: [],
                errors: [],
                meta: {}
            };
            e = c(e),
                this.parse = function (r) {
                    if (f = !1,
                        !e.delimiter) {
                        var i = o(r);
                        i.successful ? e.delimiter = i.bestDelimiter : (f = !0,
                            e.delimiter = p.DefaultDelimiter),
                            b.meta.delimiter = e.delimiter
                    }
                    if (l(e.step)) {
                        var a = e.step;
                        e.step = function (e) {
                            b = e,
                                n() ? t() : a(t(), g)
                        }
                    }
                    return e.preview && e.header && e.preview++ ,
                        d = r,
                        h = new s(e),
                        b = h.parse(d),
                        t(),
                        l(e.complete) && !y && e.complete(b),
                        y ? {
                            meta: {
                                paused: !0
                            }
                        } : b
                }
                ,
                this.pause = function () {
                    y = !0,
                        h.abort(),
                        d = d.substr(h.getCharIndex())
                }
                ,
                this.resume = function () {
                    y = !1,
                        h = new s(e),
                        h.parse(d),
                        l(e.complete) && !y && e.complete(b)
                }
                ,
                this.abort = function () {
                    h.abort(),
                        l(e.complete) && e.complete(b),
                        d = ""
                }
        }
        function s(e) {
            function t() {
                for (; A < k.length && !B && !(T > 0 && R >= T);)
                    '"' == P ? i() : L ? o() : s(),
                        n();
                return r()
            }
            function n() {
                A++ ,
                    P = k[A]
            }
            function r() {
                if (B && w("Abort", "ParseAbort", "Parsing was aborted by the user's step function"),
                    L && w("Quotes", "MissingQuotes", "Unescaped or mismatched quotes"),
                    f(),
                    !l(I))
                    return S()
            }
            function i() {
                b() && !v() ? L = !L : (u(),
                    L && v() ? A++ : w("Quotes", "UnexpectedQuotes", "Unexpected quotes"))
            }
            function o() {
                (g(A) || y(A)) && O++ ,
                    u()
            }
            function s() {
                P == M ? d() : g(A) ? (h(),
                    n()) : y(A) ? h() : a() ? c() : u()
            }
            function a() {
                if (!C)
                    return !1;
                var e = 0 == A || y(A - 1) || g(A - 2);
                return e && k[A] === C
            }
            function c() {
                for (; !g(A) && !y(A) && A < k.length;)
                    n()
            }
            function u() {
                D[N][F] += P
            }
            function d() {
                D[N].push(""),
                    F = D[N].length - 1
            }
            function h() {
                f(),
                    O++ ,
                    R++ ,
                    D.push([]),
                    N = D.length - 1,
                    d()
            }
            function f() {
                m(),
                    l(I) && (D[N] && I(S()),
                        _())
            }
            function m() {
                1 == D[N].length && j.test(D[N][0]) && (e.keepEmptyRows ? D[N].splice(0, 1) : D.splice(N, 1),
                    N = D.length - 1)
            }
            function g(e) {
                return e < k.length - 1 && ("\r" == k[e] && "\n" == k[e + 1] || "\n" == k[e] && "\r" == k[e + 1])
            }
            function y(e) {
                return "\r" == k[e] || "\n" == k[e]
            }
            function v() {
                return !b() && A < k.length - 1 && '"' == k[A + 1]
            }
            function b() {
                return !L && x(A - 1) || x(A + 1)
            }
            function x(e) {
                "number" != typeof e && (e = A);
                var t = k[e];
                return e <= -1 || e >= k.length || t == M || "\r" == t || "\n" == t
            }
            function w(e, t, n) {
                q.push({
                    type: e,
                    code: t,
                    message: n,
                    line: O,
                    row: N,
                    index: A
                })
            }
            function E(e) {
                k = e,
                    L = !1,
                    A = 0,
                    R = 0,
                    O = 1,
                    _(),
                    D = [[""]],
                    P = k[A]
            }
            function _() {
                D = [],
                    q = [],
                    N = 0,
                    F = 0
            }
            function S() {
                return {
                    data: D,
                    errors: q,
                    meta: {
                        lines: O,
                        delimiter: M,
                        aborted: B,
                        truncated: T > 0 && A < k.length
                    }
                }
            }
            var k, M, C, I, T, P, A, L, O, D, q, N, F, R, j = /^\s*$/, B = !1;
            e = e || {},
                M = e.delimiter,
                C = e.comments,
                I = e.step,
                T = e.preview,
                ("string" != typeof M || 1 != M.length || p.BAD_DELIMITERS.indexOf(M) > -1) && (M = ","),
                C === !0 ? C = "#" : ("string" != typeof C || 1 != C.length || p.BAD_DELIMITERS.indexOf(C) > -1 || C == M) && (C = !1),
                this.parse = function (e) {
                    if ("string" != typeof e)
                        throw "Input must be a string";
                    return E(e),
                        t()
                }
                ,
                this.abort = function () {
                    B = !0
                }
                ,
                this.getCharIndex = function () {
                    return A
                }
        }
        function a(e) {
            "object" != typeof e && (e = {});
            var t = c(e);
            return ("string" != typeof t.delimiter || 1 != t.delimiter.length || p.BAD_DELIMITERS.indexOf(t.delimiter) > -1) && (t.delimiter = d.delimiter),
                "boolean" != typeof t.header && (t.header = d.header),
                "boolean" != typeof t.dynamicTyping && (t.dynamicTyping = d.dynamicTyping),
                "number" != typeof t.preview && (t.preview = d.preview),
                "function" != typeof t.step && (t.step = d.step),
                "function" != typeof t.complete && (t.complete = d.complete),
                "function" != typeof t.error && (t.error = d.error),
                "string" != typeof t.encoding && (t.encoding = d.encoding),
                "boolean" != typeof t.download && (t.download = d.download),
                "boolean" != typeof t.keepEmptyRows && (t.keepEmptyRows = d.keepEmptyRows),
                t
        }
        function c(e) {
            if ("object" != typeof e)
                return e;
            var t = e instanceof Array ? [] : {};
            for (var n in e)
                t[n] = c(e[n]);
            return t
        }
        function l(e) {
            return "function" == typeof e
        }
        var u = e("jquery")
            , d = {
                delimiter: "",
                header: !1,
                dynamicTyping: !1,
                preview: 0,
                step: void 0,
                encoding: "",
                comments: !1,
                complete: void 0,
                error: void 0,
                download: !1,
                chunk: void 0,
                keepEmptyRows: !1
            }
            , p = {};
        return p.parse = t,
            p.unparse = n,
            p.RECORD_SEP = String.fromCharCode(30),
            p.UNIT_SEP = String.fromCharCode(31),
            p.BYTE_ORDER_MARK = "\ufeff",
            p.BAD_DELIMITERS = ["\r", "\n", '"', p.BYTE_ORDER_MARK],
            p.LocalChunkSize = 10485760,
            p.RemoteChunkSize = 5242880,
            p.DefaultDelimiter = ",",
            p.Parser = s,
            p.ParserHandle = o,
            p.NetworkStreamer = r,
            p.FileStreamer = i,
            u.fn.parse = function (e) {
                function t() {
                    if (0 != o.length) {
                        var t = o[0];
                        if (l(e.before)) {
                            var i = e.before(t.file, t.inputElem);
                            if ("object" == typeof i) {
                                if ("abort" == i.action)
                                    return void n("AbortError", t.file, t.inputElem, i.reason);
                                if ("skip" == i.action)
                                    return void r();
                                "object" == typeof i.config && (t.instanceConfig = u.extend(t.instanceConfig, i.config))
                            } else if ("skip" == i)
                                return void r()
                        }
                        var s = t.instanceConfig.complete;
                        t.instanceConfig.complete = function (e) {
                            l(s) && s(e, t.file, t.inputElem),
                                r()
                        }
                            ,
                            p.parse(t.file, t.instanceConfig)
                    }
                }
                function n(t, n, r, i) {
                    l(e.error) && e.error({
                        name: t
                    }, n, r, i)
                }
                function r() {
                    o.splice(0, 1),
                        t()
                }
                var i = e.config || {}
                    , o = [];
                return this.each(function (e) {
                    var t = "INPUT" == u(this).prop("tagName").toUpperCase() && "file" == u(this).attr("type").toLowerCase() && window.FileReader;
                    if (!t || !this.files || 0 == this.files.length)
                        return !0;
                    for (var n = 0; n < this.files.length; n++)
                        o.push({
                            file: this.files[n],
                            inputElem: this,
                            instanceConfig: u.extend({}, i)
                        })
                }),
                    t(),
                    this
            }
            ,
            p
    }),
    define("main/data_helpers", ["require", "vendor/papaparse", "underscore", "i18n", "bugsnag"], function (e) {
        var t = e("vendor/papaparse")
            , n = e("underscore")
            , r = e("i18n")
            , i = e("bugsnag")
            , o = function (e) {
                if (/^\s*$/.test(e))
                    return null;
                var n, o, s, a = t.parse(e, {
                    preview: 50
                }), c = [];
                if (a.errors.length && !a.data.length && i.notify("PapaParse.parse returned errors.", {
                    metaData: {
                        input: e,
                        output: a.errors
                    }
                }),
                    !a.data.length || a.data.length < 2)
                    return null;
                var l = a.data[0].length;
                for (s = 0; s < l; s++)
                    c.push([]);
                for (o = 0; o < a.data.length; o++)
                    if (0 !== o || !isNaN(parseFloat(a.data[o][0]))) {
                        if (a.data[o].length < 2)
                            return null;
                        if (a.data[o][0] || a.data[o][1])
                            for (s = 0; s < l; s++) {
                                if (n = (a.data[o][s] || "").replace(/,/g, ""),
                                    n && isNaN(parseFloat(n)))
                                    return {
                                        error: r.t("Error: Row __rowNum__, Column __colNum__ isn't a number.", {
                                            rowNum: o + 1,
                                            colNum: s + 1
                                        })
                                    };
                                c[s].push(n)
                            }
                    }
                return c[0].length < 2 ? null : {
                    data: c
                }
            }
            , s = function (e, t, r) {
                var i = n.map(e, function (e) {
                    return parseFloat(e)
                });
                i = n.filter(i, function (e) {
                    return isFinite(e)
                }),
                    i.push(0);
                var o = n.max(i)
                    , s = n.min(i)
                    , a = Math.max(o, r) - Math.min(s, t)
                    , c = r
                    , l = t;
                return o + .1 * a > r && (c = o + .2 * a),
                    s - .1 * a < t && (l = s - .2 * a),
                    [l, c]
            }
            , a = function (e, t) {
                var n = s(t[0], e.xmin, e.xmax)
                    , r = s(t[1], e.ymin, e.ymax);
                return {
                    xmin: n[0],
                    xmax: n[1],
                    ymin: r[0],
                    ymax: r[1]
                }
            };
        return {
            parse: o,
            computeNewViewport: a
        }
    }),
    define("main/propagate_selection", ["require", "graphing-calc/models/table"], function (e) {
        function t(e) {
            var t = e && e.id;
            if (e && "table" === e.type) {
                var r = n.getSelectedCell(e);
                if (r) {
                    var i = e.columnModels[r.column];
                    t = i ? i.id : void 0
                } else
                    t = void 0
            }
            if (e && "folder" === e.type) {
                var o = e.selectedHiddenChild;
                t = o ? o.id : void 0
            }
            return t
        }
        var n = e("graphing-calc/models/table");
        return function (e, n, r, i) {
            var o = e.getSelectedItem()
                , s = t(o)
                , a = s !== i;
            if (a) {
                n.select(s);
                var c = {};
                "undefined" != typeof s && (c[s] = !0),
                    r.setIntersectIds(c),
                    r.updateIntersections(s)
            }
            return s
        }
    }),
    function (e) {
        if ("object" == typeof exports && "undefined" != typeof module)
            module.exports = e();
        else if ("function" == typeof define && define.amd)
            define("flux", [], e);
        else {
            var t;
            t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this,
                t.Flux = e()
        }
    }(function () {
        return function e(t, n, r) {
            function i(s, a) {
                if (!n[s]) {
                    if (!t[s]) {
                        var c = "function" == typeof require && require;
                        if (!a && c)
                            return c(s, !0);
                        if (o)
                            return o(s, !0);
                        var l = new Error("Cannot find module '" + s + "'");
                        throw l.code = "MODULE_NOT_FOUND",
                        l
                    }
                    var u = n[s] = {
                        exports: {}
                    };
                    t[s][0].call(u.exports, function (e) {
                        var n = t[s][1][e];
                        return i(n ? n : e)
                    }, u, u.exports, e, t, n, r)
                }
                return n[s].exports
            }
            for (var o = "function" == typeof require && require, s = 0; s < r.length; s++)
                i(r[s]);
            return i
        }({
            1: [function (e, t, n) {
                t.exports.Dispatcher = e("./lib/Dispatcher")
            }
                , {
                "./lib/Dispatcher": 2
            }],
            2: [function (e, t, n) {
                function r(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                var i = e("./invariant")
                    , o = "ID_"
                    , s = function () {
                        function e() {
                            r(this, e),
                                this._lastID = 1,
                                this._callbacks = {},
                                this._isPending = {},
                                this._isHandled = {},
                                this._isDispatching = !1,
                                this._pendingPayload = null
                        }
                        return e.prototype.register = function (e) {
                            var t = o + this._lastID++;
                            return this._callbacks[t] = e,
                                t
                        }
                            ,
                            e.prototype.unregister = function (e) {
                                i(this._callbacks[e], "Dispatcher.unregister(...): `%s` does not map to a registered callback.", e),
                                    delete this._callbacks[e]
                            }
                            ,
                            e.prototype.waitFor = function (e) {
                                i(this._isDispatching, "Dispatcher.waitFor(...): Must be invoked while dispatching.");
                                for (var t = 0; t < e.length; t++) {
                                    var n = e[t];
                                    this._isPending[n] ? i(this._isHandled[n], "Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.", n) : (i(this._callbacks[n], "Dispatcher.waitFor(...): `%s` does not map to a registered callback.", n),
                                        this._invokeCallback(n))
                                }
                            }
                            ,
                            e.prototype.dispatch = function (e) {
                                i(!this._isDispatching, "Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),
                                    this._startDispatching(e);
                                try {
                                    for (var t in this._callbacks)
                                        this._isPending[t] || this._invokeCallback(t)
                                } finally {
                                    this._stopDispatching()
                                }
                            }
                            ,
                            e.prototype.isDispatching = function () {
                                return this._isDispatching
                            }
                            ,
                            e.prototype._invokeCallback = function (e) {
                                this._isPending[e] = !0,
                                    this._callbacks[e](this._pendingPayload),
                                    this._isHandled[e] = !0
                            }
                            ,
                            e.prototype._startDispatching = function (e) {
                                for (var t in this._callbacks)
                                    this._isPending[t] = !1,
                                        this._isHandled[t] = !1;
                                this._pendingPayload = e,
                                    this._isDispatching = !0
                            }
                            ,
                            e.prototype._stopDispatching = function () {
                                this._pendingPayload = null,
                                    this._isDispatching = !1
                            }
                            ,
                            e
                    }();
                t.exports = s
            }
                , {
                "./invariant": 3
            }],
            3: [function (e, t, n) {
                var r = function (e, t, n, r, i, o, s, a) {
                    if (!e) {
                        var c;
                        if (void 0 === t)
                            c = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                        else {
                            var l = [n, r, i, o, s, a]
                                , u = 0;
                            c = new Error("Invariant Violation: " + t.replace(/%s/g, function () {
                                return l[u++]
                            }))
                        }
                        throw c.framesToPop = 1,
                        c
                    }
                };
                t.exports = r
            }
                , {}]
        }, {}, [1])(1)
    }),
    define("lib/state-stack", ["require", "exports"], function (e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function () {
            function e(e) {
                void 0 === e && (e = 100),
                    this.clear(),
                    this._sizeLimit = e
            }
            return e.prototype.clear = function () {
                this._stack = [],
                    this._stackPointer = -1
            }
                ,
                e.prototype.getState = function () {
                    return this._stack[this._stackPointer]
                }
                ,
                e.prototype.addState = function (e) {
                    this.canRedo() && this._stack.splice(this._stackPointer + 1),
                        this._stack.push(e),
                        this._stack.length > this._sizeLimit && this._stack.shift(),
                        this._stackPointer = this._stack.length - 1
                }
                ,
                e.prototype.replaceState = function (e) {
                    this.canRedo() && this._stack.splice(this._stackPointer + 1),
                        0 === this._stack.length ? (this._stack.push(e),
                            this._stackPointer = 0) : this._stack[this._stackPointer] = e
                }
                ,
                e.prototype.canUndo = function () {
                    return this._stackPointer > 0
                }
                ,
                e.prototype.canRedo = function () {
                    return this._stackPointer < this._stack.length - 1
                }
                ,
                e.prototype.undo = function () {
                    this.canUndo() && (this._stackPointer -= 1)
                }
                ,
                e.prototype.redo = function () {
                    this.canRedo() && (this._stackPointer += 1)
                }
                ,
                e
        }();
        t.default = n
    }),
    define("graphing-calc/models/focus", ["require", "exports", "./expression", "./list"], function (e, t, n, r) {
        "use strict";
        function i(e, t, n) {
            var r = s(e, t, n);
            o(e, r)
        }
        function o(e, t) {
            if (e.focusLocation = t,
                t && "settings" !== t.type) {
                var i = e.getItemModel(t.id);
                r.setSelected(e.getListModel(), i),
                    i && "expression" === i.type && n.setSliderIsPlaying(i, !1)
            }
        }
        function s(e, t, n) {
            var r = e.getItemModel(t);
            if (r)
                switch (r.type) {
                    case "expression":
                        return {
                            type: r.type,
                            id: t
                        };
                    case "folder":
                        return {
                            type: r.type,
                            id: t
                        };
                    case "text":
                        return {
                            type: r.type,
                            id: t
                        };
                    case "table":
                        var i = {
                            row: 1,
                            column: 0
                        };
                        return n && ("cell" === n.location ? i = {
                            row: n.row,
                            column: n.column
                        } : "end" === n ? i = {
                            row: r.columnModels[0].cells.length,
                            column: 0
                        } : "start" === n && (i = {
                            row: 0,
                            column: 0
                        })),
                            {
                                type: r.type,
                                id: t,
                                location: i
                            };
                    case "image":
                        return {
                            type: r.type,
                            id: t,
                            location: "name"
                        };
                    default:
                        var o = r;
                        return o
                }
        }
        function a(e) {
            var t = e.getSelectedItem();
            if (t && "expression" === t.type)
                return void i(e, t.id);
            if (!t || "table" !== t.type || !e.focusLocation) {
                for (var n = e.getFirstFullyVisibleItem(); n && "expression" !== n.type;)
                    n = e.getItemModelByIndex(n.index + 1);
                if (n)
                    return void i(e, n.id);
                var o = e.createItemModel({
                    type: "expression",
                    id: e.generateId(),
                    color: e.getNextColor()
                });
                r.insertItemAtEnd(e.getListModel(), o),
                    i(e, o.id)
            }
        }
        function c(e) {
            var t = e.focusLocation;
            if (t && "settings" !== t.type)
                return e.getItemModel(t.id)
        }
        function l(e, t, n) {
            o(e, {
                type: "table",
                id: t,
                location: n
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.moveFocusToItem = i,
            t.setFocusLocation = o,
            t.computeFocusLocationForItem = s,
            t.addFocusForKeypad = a,
            t.getFocusedItem = c,
            t.focusTableCell = l
    }),
    define("graphing-calc/actions/keyboard", ["require", "exports", "browser", "lib/conditional_blur", "../models/table", "../models/focus", "../models/list", "../models/abstract-item"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        function c(e, t, n) {
            var r = e.getItemModel(t);
            if (r && "table" === r.type) {
                var s = r
                    , a = i.getSelectedCell(s)
                    , c = a ? a.row : -1
                    , f = a ? a.column : -1
                    , m = s.columnModels
                    , g = m[0].cells.length
                    , y = m.length
                    , v = function (n, r) {
                        n === -1 ? l(e) : n > g ? u(e) : (r === -1 ? (r = y - 1,
                            n--) : r === y && (n++ ,
                                r = 0),
                            o.focusTableCell(e, t, {
                                row: n,
                                column: r
                            }))
                    }
                    , b = function (n) {
                        g > 2 && i.removeRow(s, c - 1),
                            o.focusTableCell(e, t, {
                                row: n,
                                column: f
                            })
                    }
                    , x = function (n) {
                        0 === f || y <= 2 || (i.removeColumn(s, f),
                            o.focusTableCell(e, t, {
                                row: c,
                                column: n
                            }))
                    };
                switch (n) {
                    case "Left":
                        v(c, f - 1);
                        break;
                    case "Right":
                        v(c, f + 1);
                        break;
                    case "Up":
                        v(c - 1, f);
                        break;
                    case "Down":
                        v(c + 1, f);
                        break;
                    case "Enter":
                        if (c >= g)
                            return h(e);
                        if (f > 0)
                            return v(c + 1, f);
                        if (c === g - 1) {
                            var w = i.getRowAutoFillValues(s, c);
                            i.insertBlankRow(s, c);
                            for (var E = 0; E < w.length; E++)
                                i.setCellLatex(s, {
                                    row: c + 1,
                                    column: E
                                }, w[E]);
                            return void o.focusTableCell(e, t, {
                                row: c + 1,
                                column: f
                            })
                        }
                        i.insertBlankRow(s, c),
                            o.focusTableCell(e, t, {
                                row: c + 1,
                                column: f
                            });
                        break;
                    case "Backspace":
                        0 === c ? 0 === f ? d(e) : f === y - 1 || 1 === f && 3 === y ? v(0, f - 1) : x(f - 1) : 0 !== f ? v(c, f - 1) : c === g ? v(c - 1, f) : b(c - 1);
                        break;
                    case "Delete":
                        0 === c ? 0 === f ? p(e) : f < y - 1 && x(f) : c >= g || b(c)
                }
            }
        }
        function l(e) {
            var t = e.getSelectedItem();
            t && (e.inAudioTraceMode() || 0 !== t.index && (s.selectPrevItem(e.getListModel()),
                t = e.getSelectedItem(),
                t && o.moveFocusToItem(e, t.id, "end")))
        }
        function u(e) {
            if (!e.inAudioTraceMode()) {
                if (!s.selectNextItem(e.getListModel())) {
                    var t = e.createItemModel({
                        type: "expression",
                        id: e.generateId(),
                        color: e.getNextColor()
                    });
                    s.insertItemAtEnd(e.getListModel(), t),
                        s.setSelected(e.getListModel(), t)
                }
                var n = e.getSelectedItem();
                n && o.moveFocusToItem(e, n.id, "start")
            }
        }
        function d(e) {
            var t = e.getSelectedItem();
            if (t && (1 !== e.getItemCount() || "expression" !== t.type)) {
                var r = "text" === t.type
                    , i = s.getParentFolderModel(t);
                if (i) {
                    var c = e.getNumberOfItemsInFolder(i.id);
                    if (t.index === i.index + c)
                        return void a.setFolderId(t, "")
                }
                if (f(e),
                    r && n.IS_IPAD && n.IS_IN_IFRAME)
                    return void s.setSelected(e.getListModel(), void 0);
                t = e.getSelectedItem(),
                    t && o.moveFocusToItem(e, t.id, "end")
            }
        }
        function p(e) {
            var t = e.getSelectedItem();
            t && (1 === e.getItemCount() && "expression" === t.type || (m(e),
                t = e.getSelectedItem(),
                t && o.moveFocusToItem(e, t.id, "start")))
        }
        function h(e) {
            var t = e.getSelectedItem();
            if (t) {
                if ("text" === t.type && n.IS_IPAD && n.IS_IN_IFRAME)
                    return r.default(),
                        void s.setSelected(e.getListModel(), void 0);
                var i = e.createItemModel({
                    type: "expression",
                    id: e.generateId(),
                    color: e.getNextColor()
                })
                    , c = t.index + 1;
                "folder" === t.type && t.collapsed && (c += e.getNumberOfItemsInFolder(t.id)),
                    s.insertItemAtIndex(e.getListModel(), i, c),
                    s.setSelected(e.getListModel(), i),
                    "folder" !== t.type || t.collapsed ? t.folderId && a.setFolderId(i, t.folderId) : a.setFolderId(i, t.id),
                    t = e.getSelectedItem(),
                    t && o.moveFocusToItem(e, t.id)
            }
        }
        function f(e) {
            var t = e.getSelectedItem()
                , n = e.getListModel();
            if (t) {
                var r = s.findPrevSelectableItem(n, t.index);
                if (e._removeExpressionSynchronously(t),
                    !r) {
                    var i = s.getFirstSelectableItem(n);
                    i && (r = i)
                }
                s.setSelected(n, r)
            }
        }
        function m(e) {
            var t = e.getSelectedItem()
                , n = e.getListModel();
            if (t) {
                var r = s.findNextSelectableItem(n, t.index);
                if (e._removeExpressionSynchronously(t),
                    !r) {
                    var i = s.getLastSelectableItem(n);
                    i && (r = i)
                }
                s.setSelected(n, r)
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.navigateTableByKey = c,
            t.onUpPressed = l,
            t.onDownPressed = u,
            t.onBackspacePressed = d,
            t.onDeletePressed = p,
            t.onEnterPressed = h,
            t.upwardDeleteSelectedExpression = f,
            t.downwardDeleteSelectedExpression = m
    }),
    define("migrations/6to5", ["require", "exports", "math/baseparser", "lib/deepCopy", "expressions/styles", "graphing/columnmode", "math/interpolatedlabel", "./legacy-interpolated-label-parser", "underscore"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        function l(e) {
            if (6 !== e.version)
                throw new Error("Unexpected version: " + e.version);
            var t = {
                version: 5,
                graph: e.graph,
                expressions: r.default(e.expressions)
            }
                , l = {};
            return t.expressions.list.forEach(function (e) {
                if ("folder" === e.type)
                    l[e.id] = e,
                        e.memberIds = {};
                else if ("expression" === e.type) {
                    if (e.slider)
                        for (var t in e.slider)
                            e.slider.hasOwnProperty(t) && u.hasOwnProperty(t) && (e[u[t]] = e.slider[t]);
                    if (e.label && !a.isMathLabel(e.label)) {
                        var r = s.parse(e.label)
                            , d = "";
                        c.each(r.parts, function (e) {
                            d += "object" == typeof e && e.str ? e.str.substr(1) : e
                        }),
                            e.label = d
                    }
                    delete e.slider,
                        e.hasOwnProperty("style") || (e.pointStyle === i.POINT && e.lineStyle !== i.SOLID ? e.style = e.lineStyle : e.lineStyle === i.SOLID && e.pointStyle !== i.POINT ? e.style = e.pointStyle : e.style = i.SOLID)
                } else if ("image" === e.type) {
                    if (e.center) {
                        var p = n.parse(e.center);
                        "OrderedPair" === p.type && (e.x = p.args[0]._inputString,
                            e.y = p.args[1]._inputString),
                            delete e.center
                    }
                } else
                    "table" === e.type && e.columns.forEach(function (e) {
                        e.hasOwnProperty("style") || (e.style = i.SOLID),
                            e.points && e.lines ? e.columnMode = o.POINTS_AND_LINES : e.lines ? e.columnMode = o.LINES : e.columnMode = o.POINTS
                    });
                e.folderId && (l[e.folderId].memberIds[e.id] = !0),
                    delete e.folderId
            }),
                t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = {
            min: "sliderMin",
            max: "sliderMax",
            step: "sliderInterval",
            hardMin: "sliderHardMin",
            hardMax: "sliderHardMax",
            animationPeriod: "sliderAnimationPeriod",
            loopMode: "sliderLoopMode",
            playDirection: "sliderPlayDirection",
            isPlaying: "sliderIsPlaying"
        };
        t.default = l
    }),
    define("main/layout-model", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            return {
                graphSettingsOpen: !1,
                addExpressionOpen: !1,
                expressionsVisible: !!e.expressions,
                inEditListMode: !1
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.defaultLayoutModel = n
    }),
    define("main/settings-view-model", ["require", "exports", "tslib", "graphing/label"], function (e, t, n, r) {
        "use strict";
        function i(e, t) {
            var n = r.value(e, t)
                , i = "";
            if (n.mantissa)
                i = n.mantissa.split("").join("\\cdot") + "^{" + n.superscript + "}";
            else {
                var o = n.string.split("/");
                i = 2 === o.length ? "-" === o[0][0] ? "-\\frac{" + o[0].slice(1) + "}{" + o[1] + "}" : "\\frac{" + o[0] + "}{" + o[1] + "}" : n.string
            }
            return i = i.replace(//, "\\pi")
        }
        function o(e) {
            return {
                xmin: i(e.xmin, e.xmax - e.xmin),
                xmax: i(e.xmax, e.xmax - e.xmin),
                ymin: i(e.ymin, e.ymax - e.ymin),
                ymax: i(e.ymax, e.ymax - e.ymin)
            }
        }
        function s(e, t) {
            return 0 === e ? "" : i(e, t)
        }
        function a(e, t, r) {
            var i = o(e);
            return n.__assign({}, i, {
                xstep: s(t, e.xmax - e.xmin),
                ystep: s(r, e.ymax - e.ymin)
            })
        }
        function c() {
            return {
                limitLatex: {
                    xmin: "",
                    xmax: "",
                    xstep: "",
                    ymin: "",
                    ymax: "",
                    ystep: ""
                },
                focusOnOpen: !1
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.formatLatex = i,
            t.formatViewport = o,
            t.formatStep = s,
            t.limitLatex = a,
            t.defaultSettingsViewModel = c
    }),
    define("expressions/list_move_controller", ["require", "exports", "graphing/dragmode", "lib/number-to-latex", "graphing/label", "lib/rounding", "graphing-calc/models/expression", "graphing-calc/models/table", "graphing-calc/models/list", "graphing-calc/models/image"], function (e, t, n, r, i, o, s, a, c, l) {
        "use strict";
        function u(e, t, r) {
            if (r.tableInfo) {
                c.setSelected(t, void 0);
                var i = e.getItemModel(r.tableInfo.tableId);
                if (!i || "table" !== i.type)
                    return;
                a.setIsDraggingOnGrapher(i, !0)
            } else {
                var o = e.getItemModel(r.sketch.id);
                if (!o || "expression" !== o.type && "image" !== o.type)
                    return;
                if ("image" !== o.type && c.setSelected(t, void 0),
                    !o.formula || !o.formula.move_strategy)
                    return;
                for (var u = o.formula.move_strategy, d = 0; d < u.length; d++)
                    if ("updateCoordinate" === u[d].type)
                        "image" === o.type ? l.setIsDraggingOnGrapher(o, !0) : "expression" === o.type && s.setIsDraggingOnGrapher(o, !0);
                    else if ("updateSlider" === u[d].type) {
                        var p = e.getItemModel(u[d].id);
                        if (!p || "expression" !== p.type)
                            continue;
                        var h;
                        if (h = "expression" === o.type ? o.reconciledDragMode : void 0,
                            h === n.NONE || 0 === d && h === n.Y || 1 === d && h === n.X)
                            continue;
                        s.setSliderDragging(p, !0)
                    }
            }
        }
        function d(e, t) {
            if (t.tableInfo) {
                var n = e.getItemModel(t.tableInfo.tableId);
                if (!n || "table" !== n.type)
                    return;
                return void a.setIsDraggingOnGrapher(n, !1)
            }
            var r = e.getItemModel(t.sketch.id);
            if (r && ("expression" === r.type || "image" === r.type) && r.formula && r.formula.move_strategy)
                for (var i = r.formula.move_strategy, o = 0; o < i.length; o++)
                    if ("image" === r.type ? l.setIsDraggingOnGrapher(r, !1) : "expression" === r.type && s.setIsDraggingOnGrapher(r, !1),
                        "updateSlider" === i[o].type) {
                        var c = e.getItemModel(i[o].id);
                        c && "expression" === c.type && s.setSliderDragging(c, !1)
                    }
        }
        function p(e, t, n, i) {
            var s = t.tableInfo.tableId
                , c = t.tableInfo.rowIndex
                , l = t.tableInfo.columnId
                , u = t.tableInfo.dragX
                , d = t.tableInfo.dragY
                , p = e.getItemModel(s);
            if (p && "table" === p.type && a.getColumnModel(p, l)) {
                var f = i.closestPointOnScreen(n)
                    , m = i.pixelsToMath.mapRect(h(f, .5))
                    , g = {
                        x: r.default(o.shortestDecimalBetween(m.left, m.right)),
                        y: r.default(o.shortestDecimalBetween(m.top, m.bottom))
                    };
                if (u && a.setCellLatex(p, {
                    row: c + 1,
                    column: 0
                }, g.x),
                    d) {
                    var y = a.getColumnModel(p, l).index;
                    a.setCellLatex(p, {
                        row: c + 1,
                        column: y
                    }, g.y)
                }
            }
        }
        function h(e, t) {
            return {
                left: e.x - t,
                right: e.x + t,
                top: e.y + t,
                bottom: e.y - t
            }
        }
        function f(e, t, n) {
            var s;
            s = e.assignment ? i.identifierToLatex(e.assignment) + "=" : "";
            var a = o.shortestDecimalBetween(t[0].min, t[0].max)
                , c = o.shortestDecimalBetween(t[1].min, t[1].max)
                , l = "updateCoordinate" === e.move_strategy[0].type && m(0, n)
                , u = "updateCoordinate" === e.move_strategy[1].type && m(1, n)
                , d = l ? r.default(a) : e.move_strategy[0].inputString
                , p = u ? r.default(c) : e.move_strategy[1].inputString;
            return s + "\\left(" + d + "," + p + "\\right)"
        }
        function m(e, t) {
            switch (t) {
                case n.X:
                    return 0 === e;
                case n.Y:
                    return 1 === e;
                case n.XY:
                    return !0;
                default:
                    return !1
            }
        }
        function g(e, t, n) {
            if (0 === n[0] && 0 === n[1])
                return {
                    x: t.x,
                    y: t.y,
                    width: e.width,
                    height: e.height
                };
            var r = Math.cos(e.radianAngle)
                , i = Math.sin(e.radianAngle)
                , o = t.x - e.x
                , s = t.y - e.y;
            if (0 === n[0])
                return {
                    x: e.x,
                    y: e.y,
                    width: e.width,
                    height: 2 * n[1] * (r * s + i * o)
                };
            if (0 === n[1])
                return {
                    x: e.x,
                    y: e.y,
                    width: 2 * n[0] * (r * o - i * s),
                    height: e.height
                };
            var a = 2 * (e.width * n[0] * (r * o - i * s) + e.height * n[1] * (i * o + r * s)) / (e.width * e.width + e.height * e.height);
            return {
                x: e.x,
                y: e.y,
                width: a * e.width,
                height: a * e.height
            }
        }
        function y(e, t, n) {
            for (var r = [{
                x: t.left,
                y: t.bottom
            }, {
                x: t.left,
                y: t.top
            }, {
                x: t.right,
                y: t.top
            }, {
                x: t.right,
                y: t.bottom
            }], i = ["x", "y", "width", "height"], o = {
                x: 1 / 0,
                y: 1 / 0,
                width: 1 / 0,
                height: 1 / 0
            }, s = {
                x: -(1 / 0),
                y: -(1 / 0),
                width: -(1 / 0),
                height: -(1 / 0)
            }, a = 0; a < r.length; a++)
                for (var c = g(e, r[a], n), l = 0; l < i.length; l++) {
                    var u = i[l];
                    o[u] = Math.min(o[u], c[u]),
                        s[u] = Math.max(s[u], c[u])
                }
            return {
                min: o,
                max: s
            }
        }
        function v(e, t, n, i, s) {
            var a = t.formula;
            if (!a || !a.move_strategy)
                return !1;
            var c = a.dimensions
                , u = n.scaleFactor
                , d = 0 !== u[0] && 0 !== u[1]
                , p = s.closestPointOnScreen(i)
                , f = s.pixelsToMath.mapRect(h(p, d ? .05 : .5))
                , m = y(c, f, u)
                , g = s.mathToPixels.mapRect({
                    left: c.x - .5 * c.width,
                    right: c.x + .5 * c.width,
                    top: c.y - .5 * c.height,
                    bottom: c.y + .5 * c.height
                })
                , v = Math.abs(g.right - g.left)
                , b = Math.abs(g.bottom - g.top)
                , w = s.mathToPixels.mapRect({
                    left: m.min.x - .5 * m.min.width,
                    right: m.min.x + .5 * m.min.width,
                    top: m.min.y - .5 * m.min.height,
                    bottom: m.min.y + .5 * m.min.height
                })
                , E = Math.abs(w.right - w.left)
                , _ = Math.abs(w.bottom - w.top);
            if (E < v && E < 1 || _ < b && _ < 1)
                return !1;
            for (var S = ["width", "height", "x", "y"], k = !1, M = 0; M < S.length; M++) {
                var C = S[M]
                    , I = a.move_strategy[M];
                switch (I.type) {
                    case "updateCoordinate":
                        var T = o.shortestDecimalBetween(m.min[C], m.max[C])
                            , P = r.default(T);
                        switch (C) {
                            case "width":
                            case "height":
                                l.setMQAttribute(t, C, P);
                                break;
                            case "x":
                                if ("updateCoordinate" === a.move_strategy[3].type) {
                                    var A = o.shortestDecimalBetween(m.min.y, m.max.y)
                                        , L = r.default(A)
                                        , O = "\\left(" + P + "," + L + "\\right)";
                                    l.setMQAttribute(t, "center", O)
                                } else {
                                    var O = "\\left(" + P + "," + a.move_strategy[3].inputString + "\\right)";
                                    l.setMQAttribute(t, "center", O)
                                }
                                break;
                            case "y":
                                if ("updateCoordinate" !== a.move_strategy[2].type) {
                                    var O = "\\left(" + a.move_strategy[2].inputString + "," + P + "\\right)";
                                    l.setMQAttribute(t, "center", O)
                                }
                                break;
                            default:
                                var D = C;
                                return D
                        }
                        k = !0;
                        break;
                    case "updateSlider":
                        var q = e.getItemModel(I.id);
                        if (!q || "expression" !== q.type || !q.sliderExists)
                            continue;
                        var N = I.coefficients[0]
                            , F = I.coefficients[1]
                            , R = F * m.min[C] + N
                            , j = F * m.max[C] + N
                            , B = o.shortestDecimalBetween(R, j);
                        x(q, B) && (k = !0)
                }
            }
            return k
        }
        function b(e, t, n, r, i) {
            var a = t.formula;
            if (!a || !a.move_strategy)
                return !1;
            var c = t.reconciledDragMode
                , l = !1
                , u = r.closestPointOnScreen(n)
                , d = r.pixelsToMath.mapRect(h(u, .5))
                , p = [{
                    min: d.left,
                    max: d.right
                }, {
                    min: d.top,
                    max: d.bottom
                }];
            "updateCoordinate" !== a.move_strategy[0].type && "updateCoordinate" !== a.move_strategy[1].type || (s.setLatex(t, f(a, p, c)),
                l = !0);
            for (var g = 0; g < 2; g++) {
                var y = a.move_strategy[g];
                if ("updateSlider" === y.type && m(g, c)) {
                    var v = e.getItemModel(y.id);
                    if (v && "expression" === v.type && v.sliderExists) {
                        var b = y.coefficients[0]
                            , w = y.coefficients[1]
                            , E = o.shortestDecimalBetween(w * p[g].min + b, w * p[g].max + b)
                            , _ = i ? i[g] : "";
                        x(v, E, _) && (l = !0)
                    }
                }
            }
            return l
        }
        function x(e, t, n) {
            var r = e.formula.constant_value
                , i = n ? s.computeSliderAdjustment(e, n) : s.computeSliderSnappedValue(e, t);
            return i !== r && (s.setSliderValue(e, i),
                !0)
        }
        function w(e, t, n, r, i) {
            if (t.tableInfo)
                return p(e, t, n, r),
                    !0;
            var o = e.getItemModel(t.sketch.id);
            return !!o && ("image" === o.type ? v(e, o, t, n, r) : "expression" === o.type && b(e, o, n, r, i))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.onStartMovingPoint = u,
            t.onStopMovingPoint = d,
            t.onMovePoint = w
    }),
    define("main/blank_state", ["require", "exports", "main/migrate_state"], function (e, t, n) {
        "use strict";
        if (Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.BLANK_STATE = {
                version: 6,
                graph: {
                    viewport: {
                        xmin: -10,
                        ymin: -13.25,
                        xmax: 10,
                        ymax: 13.25
                    }
                },
                expressions: {
                    list: [{
                        id: "1",
                        type: "expression"
                    }]
                }
            },
            t.BLANK_STATE.version !== n.currentVersion)
            throw new Error("Blank state version is " + t.BLANK_STATE.version + ", but latest migration version is " + n.currentVersion + ". The blank state should be migrated to the latest version.");
        t.default = t.BLANK_STATE
    }),
    define("expressions/measure-expressions", ["require", "exports", "jquery"], function (e, t, n) {
        "use strict";
        function r(e) {
            for (var t = [], n = e.getAllItemModels(), r = 0, i = n; r < i.length; r++) {
                var o = i[r]
                    , s = e.getItemRootNodeById(o.id);
                s && t.push(s)
            }
            return t
        }
        function i(e) {
            for (var t = e.getAllItemModels(), n = t.length - 1; n >= 0; n--) {
                var r = t[n];
                if (r.dcgView)
                    return r.id
            }
        }
        function o(e, t) {
            for (var n = r(e), i = 0, o = n.length - 1; i <= o;) {
                var s = i + Math.floor((o - i) / 2)
                    , a = n[s]
                    , c = a.getBoundingClientRect();
                if (c.top > t)
                    o = s - 1;
                else {
                    if (!(c.bottom < t))
                        return a;
                    i = s + 1
                }
            }
        }
        function s(e, t) {
            for (var n, i = r(e), o = 0, s = i.length - 1; o <= s;) {
                var a = o + Math.floor((s - o) / 2)
                    , c = i[a]
                    , l = c.getBoundingClientRect();
                l.top > t ? (s = a - 1,
                    n = c) : o = a + 1
            }
            return n
        }
        function a(e, t) {
            var r = e.getRootElt();
            if (r) {
                var i = d(r);
                if (i) {
                    var s = i.getBoundingClientRect();
                    if (t) {
                        var a = e.getItemRootNodeById(t);
                        if (a) {
                            var c = a.getBoundingClientRect();
                            if (c.height > 0 && c.top <= s.top && c.bottom >= s.top)
                                return t;
                        }
                    }
                    var l = o(e, s.top);
                    if (l)
                        return n(l).attr("expr-id")
                }
            }
        }
        function c(e, t) {
            var r = e.getRootElt();
            if (r) {
                var s = d(r);
                if (s) {
                    var a = s.getBoundingClientRect()
                        , c = i(e);
                    if (c) {
                        if (t) {
                            var l = e.getItemRootNodeById(t);
                            if (l) {
                                var u = l.getBoundingClientRect();
                                if (u.height > 0 && u.top <= a.bottom && u.bottom >= a.bottom)
                                    return t;
                                if (t === c && u.bottom <= a.bottom)
                                    return t
                            }
                        }
                        var p = o(e, a.bottom);
                        return p && n(p).attr("expr-id") || c
                    }
                }
            }
        }
        function l(e) {
            var t = e.getRootElt();
            if (t) {
                var r = d(t);
                if (r) {
                    var i = r.getBoundingClientRect()
                        , o = s(e, i.top - 2);
                    if (o)
                        return n(o).attr("expr-id")
                }
            }
        }
        function u(e, t) {
            var n = e.getRootElt();
            if (!n)
                return !1;
            var r = d(n);
            if (!r)
                return !1;
            var i = e.getItemRootNodeById(t);
            if (!i)
                return !1;
            var o = r.getBoundingClientRect()
                , s = i.getBoundingClientRect();
            return s.bottom > o.top && s.top < o.bottom
        }
        function d(e) {
            return n(e).find(".dcg-exppanel")[0]
        }
        function p(e) {
            var t = d(e);
            if (t)
                return n(t)
        }
        function h(e) {
            var t = e.getRootElt();
            if (t) {
                var r = n(t).find(".dcg-exppanel-outer")[0];
                if (r)
                    return r.getBoundingClientRect()
            }
        }
        function f(e) {
            var t = e.getRootElt();
            if (t) {
                var n = d(t);
                if (n)
                    return n.getBoundingClientRect()
            }
        }
        function m(e) {
            var t = e.getRootElt();
            if (t) {
                var n = d(t);
                if (n) {
                    var r = n.getBoundingClientRect()
                        , i = n.scrollTop;
                    return r.top - i
                }
            }
        }
        function g(e) {
            var t = e.getRootElt();
            if (t)
                return n(t).find(".dcg-expressionlist").height()
        }
        function y(e) {
            var t = e.getRootElt();
            if (!t)
                return 0;
            var n = p(t);
            return n ? n.find(".dcg-drag-container").height() : 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.getFirstPartiallyVisibleItemId = a,
            t.getLastPartiallyVisibleItemId = c,
            t.getFirstFullyVisibleItemId = l,
            t.isItemPartiallyVisible = u,
            t.getExppanelElt = d,
            t.getExppanelSelector = p,
            t.getOuterExppanelRect = h,
            t.getExppanelRect = f,
            t.getExppanelScrolledTop = m,
            t.getExpListHeight = g,
            t.getDragContainerHeight = y
    }),
    define("expressions/dragdrop_expressions", ["require", "exports", "tipsy", "tslib", "jquery", "expressions/measure-expressions", "lib/animation-frame", "jquery.handleevent"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function () {
            function e(e) {
                this.active = !1,
                    this.controller = e;
                var t = e.getRootElt();
                if (t) {
                    var n = o.getExppanelSelector(t);
                    n && (this.$exppanel = n)
                }
            }
            return e.prototype.startDragging = function (e) {
                this.active = !0,
                    this.mouseY = e,
                    this.setupEventListeners(),
                    n.addDisableLock()
            }
                ,
                e.prototype.applyDrag = function () {
                    var e = this.controller.getListModel()
                        , t = e.dragState;
                    if (t) {
                        this.scheduleUpdateScroll();
                        var n = this.measureDOM(t);
                        if (n) {
                            var i = n.floatingPreviewRect
                                , o = this.controller.getItemModel(t.firstItemId);
                            if (o) {
                                for (var s = o.index, a = 0, c = n.visibleRects; a < c.length; a++) {
                                    var l = c[a]
                                        , u = l.id
                                        , d = l.rect;
                                    if (u !== o.id) {
                                        var p = this.controller.getItemModel(u);
                                        if (!p)
                                            return;
                                        var h = p.index < o.index;
                                        if (h) {
                                            if (i.top < d.top + d.height / 2) {
                                                s = p.index;
                                                break
                                            }
                                        } else
                                            i.bottom > d.top + d.height / 2 && (s = p.index,
                                                "folder" === p.type && p.collapsed && (s += this.controller.getNumberOfItemsInFolder(p.id)))
                                    }
                                }
                                var f, m;
                                s > o.index ? (f = s,
                                    m = s + 1) : s < o.index ? (f = s - 1,
                                        m = s) : (f = s - 1,
                                            m = s + 1);
                                var g = this.controller.getItemModelByIndex(f)
                                    , y = this.controller.getItemModelByIndex(m)
                                    , v = ""
                                    , b = "";
                                g && (v = "folder" === g.type ? g.id : g.folderId),
                                    y && (b = "folder" === y.type ? y.id : y.folderId);
                                var x = "";
                                return v && (b === v ? "folder" === o.type ? s = o.index : x = v : "folder" !== o.type && this.isPreviewTopContainedInFolder(n, v) && (x = v)),
                                    {
                                        dragState: r.__assign({}, n.dragState),
                                        newIndex: s,
                                        folderId: x
                                    }
                            }
                        }
                    }
                }
                ,
                e.prototype.measureDOM = function (e) {
                    var t = o.getExppanelScrolledTop(this.controller)
                        , n = o.getExpListHeight(this.controller);
                    if (void 0 !== t && void 0 !== n) {
                        var i = o.getDragContainerHeight(this.controller)
                            , s = e.mouseY - e.grabOffset + 2
                            , a = s - t;
                        a = Math.max(a, -i / 2),
                            a = Math.min(a, n - i);
                        var c = {
                            top: s,
                            bottom: s + i,
                            height: i
                        }
                            , l = this.controller.findFirstPartiallyVisibleItem()
                            , u = this.controller.findLastPartiallyVisibleItem();
                        if (l && u) {
                            for (var d = [], p = l.index; p <= u.index; p++) {
                                var h = this.controller.getItemModelByIndex(p);
                                if (h) {
                                    var f = this.controller.getItemRootNodeById(h.id);
                                    if (f && h.id !== e.firstItemId) {
                                        var m = f.getBoundingClientRect();
                                        d.push({
                                            id: h.id,
                                            rect: m
                                        })
                                    }
                                }
                            }
                            if (0 !== d.length)
                                return {
                                    dragState: r.__assign({}, e, {
                                        itemTop: a
                                    }),
                                    floatingPreviewRect: c,
                                    visibleRects: d
                                }
                        }
                    }
                }
                ,
                e.prototype.isPreviewTopContainedInFolder = function (e, t) {
                    for (var n = e.visibleRects, r = e.floatingPreviewRect, i = 0, o = n; i < o.length; i++) {
                        var s = o[i]
                            , a = s.id
                            , c = s.rect;
                        if (c.top <= r.top && c.bottom >= r.top) {
                            var l = this.controller.getItemModel(a);
                            if (!l)
                                return !1;
                            if ("folder" === l.type && l.id === t)
                                return !0;
                            if (l.folderId === t)
                                return !0
                        }
                    }
                    return !1
                }
                ,
                e.prototype.scheduleUpdateScroll = function () {
                    var e = this;
                    this.updateScrollScheduled || (this.updateScrollScheduled = !0,
                        s.requestAnimationFrame(function () {
                            e.updateScroll(),
                                e.updateScrollScheduled = !1
                        }))
                }
                ,
                e.prototype.stop = function () {
                    this.active = !1,
                        this.tearDownEventListeners(),
                        n.removeDisableLock(),
                        this.controller.dispatch({
                            type: "stop-dragdrop"
                        })
                }
                ,
                e.prototype.setupEventListeners = function () {
                    var e = this;
                    i(document).on("dcg-tapmove.dragdrop", function (t) {
                        e.mouseY = t.changedTouches[0].clientY,
                            e.controller.dispatch({
                                type: "update-dragdrop",
                                mouseY: e.mouseY
                            })
                    }),
                        i(document).on("dcg-tapend.dragdrop", function (t) {
                            e.stop(),
                                t.handle("dragdrop")
                        })
                }
                ,
                e.prototype.tearDownEventListeners = function () {
                    i(document).off(".dragdrop")
                }
                ,
                e.prototype.updateScroll = function () {
                    if (this.active) {
                        var e = this.$exppanel[0].getBoundingClientRect()
                            , t = 0;
                        t = Math.min(t, this.mouseY - e.top),
                            t = Math.max(t, this.mouseY - e.bottom + 30),
                            t = t * e.height / 900,
                            t && this.$exppanel.scrollTop(this.$exppanel.scrollTop() + t)
                    }
                }
                ,
                e
        }();
        t.default = a
    }),
    define("main/controller", ["require", "exports", "browser", "graphing/viewport", "main/migrate_state", "main/data_helpers", "scroll_helpers", "main/propagate_selection", "tslib", "graphing/label", "underscore", "i18n", "flux", "graphing/dragmode", "expressions/styles", "expressions/opacity", "lib/conditional_blur", "lib/deepCopy", "lib/number-to-latex", "lib/state-stack", "graphing-calc/models/expression", "graphing-calc/models/table", "graphing-calc/models/image", "graphing-calc/models/folder", "graphing-calc/models/text", "graphing-calc/models/list", "graphing-calc/models/abstract-item", "graphing-calc/models/focus", "graphing-calc/actions/keyboard", "migrations/6to5", "lib/evaluate-single-expression", "./layout-model", "./settings-view-model", "jquery", "bugsnag", "expressions/list_move_controller", "./blank_state", "dcgview-helpers/mathquill-view", "expressions/measure-expressions", "expressions/dragdrop_expressions"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w, E, _, S, k, M, C, I, T, P, A, L, O, D, q, N, F, R, j) {
        "use strict";
        function B(e) {
            return e ? c.__assign({}, e, {
                wasCompleteSetState: void 0,
                layoutModel: void 0,
                settingsViewModel: void 0
            }) : e
        }
        function V(e, t) {
            return u.isEqual(B(e), B(t))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var U = function () {
            function e(e) {
                var t = this;
                this.__nextItemId = 0,
                    this.__pendingImageUploads = {},
                    this.nextSubscription = 0,
                    this.subscriptions = {},
                    this._queuedCallbacks = [],
                    this._hasUnsavedChanges = !1,
                    this.shouldScrollSelectedItemIntoViewAfterDispatch = !1,
                    this.lastParsableObjects = {},
                    this.toastData = {},
                    this.t = function (e, n) {
                        var r = t.graphSettings.language;
                        return d.t(e, n, r)
                    }
                    ,
                    this.unpack = function (e) {
                        var n = t.graphSettings.language;
                        return d.unpack(e, n)
                    }
                    ,
                    this.dispatch = function (e) {
                        if ("blur-focus-location" === e.type && t.dispatcher.isDispatching())
                            return void t.runAfterDispatch(function () {
                                t.dispatch(e)
                            });
                        D.leaveBreadcrumb("dispatch::" + t.bugsnagContext, {
                            type: e.type
                        }),
                            t.dispatcher.dispatch(e),
                            t.onEventsEmitted && t.onEventsEmitted(t.enqueuedEvents);
                        for (var n; n = t._queuedCallbacks.shift();)
                            n()
                    }
                    ,
                    this.emitUpdateRequests = function () {
                        for (var e in t.subscriptions)
                            t.subscriptions[e]();
                        if (t.layoutController) {
                            var n = t.layoutController.$root
                                , r = !n.hasClass("dcg-fullscreen")
                                , i = t.layoutModel.expressionsVisible;
                            r !== i && n.toggleClass("dcg-fullscreen", !i)
                        }
                    }
                    ,
                    this.bugsnagContext = "",
                    this.inPrintMode = !1,
                    this.stateStack = new b.default,
                    this.isCurrentlyDoingSetState = !1,
                    this.graphSettings = e,
                    this.listModel = k.init(this),
                    this.layoutModel = A.defaultLayoutModel(this.graphSettings.config),
                    this.layoutMeasurements = {
                        isNarrow: !1,
                        keypadHeight: void 0
                    },
                    this.settingsViewModel = L.defaultSettingsViewModel(),
                    this.addExpressionViewModel = {
                        focusOnOpen: !1
                    },
                    this.imageRetryState = {
                        lastAttemptTime: 0,
                        attempts: 0
                    },
                    this.setupDispatcher()
            }
            return e.prototype.hasUnsavedChanges = function () {
                return this._hasUnsavedChanges
            }
                ,
                e.prototype.hasVisibleAndUndoableToast = function () {
                    return "function" == typeof this.toastData.undoCallback
                }
                ,
                e.prototype.getToastData = function () {
                    return this.toastData
                }
                ,
                e.prototype.toastUndo = function () {
                    "function" == typeof this.toastData.undoCallback && (this.toastData.undoCallback(),
                        this.dispatch({
                            type: "toast/close"
                        }))
                }
                ,
                e.prototype.runAfterDispatch = function (e) {
                    this.dispatcher.isDispatching() ? this._queuedCallbacks.push(e) : e()
                }
                ,
                e.prototype.enqueueEvent = function (e) {
                    this.enqueuedEvents[e] = !0
                }
                ,
                e.prototype.setupDispatcher = function () {
                    var e = this;
                    this.dispatcher = new p.Dispatcher,
                        this.dispatcher.register(function (t) {
                            var n = e.getSelectedItem()
                                , r = e.getFocusLocation();
                            e.shouldScrollSelectedItemIntoViewAfterDispatch = !1,
                                e.enqueuedEvents = {
                                    change: !1,
                                    graphReset: !1,
                                    clearUnsavedChanges: !1,
                                    openDrawer: !1,
                                    userMovedPoint: !1
                                },
                                e.isCurrentlyDoingSetState = !1,
                                e.handleDispatchedAction(t),
                                e.updateTheComputedWorld(),
                                e.updateRenderShellsBeforePaint(),
                                e.retryLoadingFailedImage(),
                                "undo" === t.type || "redo" === t.type || e.isDragDropActive() || e.commitUndoRedoSynchronously(t.type),
                                e.requestParseForAllItems(),
                                e.isCurrentlyDoingSetState = !1,
                                e.emitUpdateRequests(),
                                e.enqueuedEvents.change && e.grapher && e.grapher.markLabelsDirty(),
                                e.enqueuedEvents.clearUnsavedChanges ? e._hasUnsavedChanges = !1 : e.enqueuedEvents.change && (e._hasUnsavedChanges = !0);
                            var i = e.getSelectedItem();
                            i ? n && n.guid === i.guid || (e.shouldScrollSelectedItemIntoViewAfterDispatch = !0) : e.shouldScrollSelectedItemIntoViewAfterDispatch = !1;
                            var o = e.getFocusLocation();
                            if (o && !u.isEqual(o, r)) {
                                var s = e.getFocusedItem();
                                s == i && (e.shouldScrollSelectedItemIntoViewAfterDispatch = !0)
                            }
                            e.shouldScrollSelectedItemIntoViewAfterDispatch && e.scrollSelectedItemIntoView(),
                                e.updateRenderShellsAfterPaint(),
                                e.updateDragDrop()
                        })
                }
                ,
                e.prototype.handleDispatchedAction = function (e) {
                    var t = this;
                    switch (e.type) {
                        case "api-method-called":
                            break;
                        case "undo":
                            this.undo();
                            break;
                        case "redo":
                            this.redo();
                            break;
                        case "clear-undoredo-history":
                            this.clearUndoRedoHistory();
                            break;
                        case "on-special-key-pressed":
                            "Enter" === e.key ? I.onEnterPressed(this) : "Up" === e.key ? I.onUpPressed(this) : "Down" === e.key ? I.onDownPressed(this) : "Backspace" === e.key ? I.onBackspacePressed(this) : "Delete" === e.key && I.onDeletePressed(this);
                            break;
                        case "select-previous-expression":
                            k.selectPrevItem(this.listModel);
                            break;
                        case "select-next-expression":
                            k.selectNextItem(this.listModel);
                            break;
                        case "upward-delete-selected-expression":
                            I.upwardDeleteSelectedExpression(this);
                            break;
                        case "downward-delete-selected-expression":
                            I.downwardDeleteSelectedExpression(this);
                            break;
                        case "navigate-table-by-key":
                            I.navigateTableByKey(this, e.id, e.key);
                            break;
                        case "delete-item-and-animate-out":
                            this._deleteItemAndAnimateOut(e.id);
                            break;
                        case "finish-deleting-item-after-animation":
                            this._finishDeletingItemAfterAnimation(e.id);
                            break;
                        case "set-expression-properties-from-api":
                            this._setExpressionPropertiesFromAPI(e.id, e.properties);
                            break;
                        case "add-item-to-end-from-api":
                            this._addItemToEndFromAPI(this.createItemModel(e.state));
                            break;
                        case "duplicate-expression":
                            var n = this.getItemModel(e.id);
                            if (!n || "expression" !== n.type)
                                return;
                            var r = x.getState(n, {
                                stripDefaults: !1
                            })
                                , i = this.createItemModel(c.__assign({}, r, {
                                    id: this.generateId()
                                }));
                            this._toplevelInsertItemAt(n.index + 1, i, !1, n.folderId);
                            break;
                        case "insert-item-at-index":
                            var o = this.createItemModel(e.state);
                            this._toplevelInsertItemAt(e.index, o, e.focus, e.folderId);
                            break;
                        case "new-expression-at-end":
                            var o = this.createItemModel({
                                type: "expression",
                                id: this.generateId(),
                                color: this.getNextColor()
                            });
                            k.insertItemAtEnd(this.listModel, o),
                                C.moveFocusToItem(this, o.id);
                            break;
                        case "new-expression":
                            var o = this.createItemModel({
                                type: "expression",
                                id: this.generateId(),
                                color: this.getNextColor()
                            });
                            this._toplevelNewItemAtSelection(o, !0),
                                this._closeAddExpression();
                            break;
                        case "new-text":
                            var o = this.createItemModel({
                                id: this.generateId(),
                                type: "text"
                            });
                            this._toplevelNewItemAtSelection(o, !0),
                                this._closeAddExpression();
                            break;
                        case "new-folder":
                            var o = this.createItemModel({
                                type: "folder",
                                id: this.generateId()
                            });
                            this._toplevelNewItemAtSelection(o, !0),
                                this._closeAddExpression();
                            break;
                        case "new-images":
                            this._uploadImagesAndWaitForThemToLoad(e.files),
                                this._closeAddExpression();
                            break;
                        case "new-table":
                            var s = k.findAvailableColumnSubscript(this.listModel)
                                , a = w.makeTableState(s, [[""], [""]], this)
                                , o = this.createItemModel(a);
                            this._toplevelNewItemAtSelection(o, !0),
                                this._closeAddExpression();
                            break;
                        case "paste-table":
                            this._pasteTable(e.data);
                            break;
                        case "remove-item-by-id":
                            k.removeItemById(this.listModel, e.id);
                            break;
                        case "replace-item-at-index":
                            var o = this.createItemModel(e.state);
                            this._toplevelReplaceItemAt(e.index, o, e.focus);
                            break;
                        case "create-sliders-for-item":
                            this._createSlidersForItem(e.id, e.variables);
                            break;
                        case "start-dragdrop":
                            var u = this.getItemModel(e.id);
                            if (!u)
                                return;
                            var d = this.getItemRootNodeById(u.id);
                            if (!d)
                                return;
                            var p = d.getBoundingClientRect();
                            k.setSelected(this.listModel, void 0);
                            var f = e.grabY - p.top
                                , m = !1
                                , g = 1;
                            "folder" === u.type && (g += this.getNumberOfItemsInFolder(u.id),
                                u.collapsed || (m = !0,
                                    _.setCollapsed(u, !0))),
                                k.setDragState(this.listModel, {
                                    firstItemId: u.id,
                                    numberOfItems: g,
                                    expandFolder: m,
                                    grabOffset: f,
                                    mouseY: e.mouseY,
                                    itemTop: 0
                                }),
                                this.dragdrop_expressions.startDragging(e.mouseY);
                            break;
                        case "update-dragdrop":
                            var y = this.listModel.dragState;
                            if (!y)
                                return;
                            k.setDragState(this.listModel, c.__assign({}, y, {
                                mouseY: e.mouseY
                            }));
                            break;
                        case "stop-dragdrop":
                            var y = this.listModel.dragState;
                            if (!y)
                                return;
                            var v = this.getItemModel(y.firstItemId);
                            if (!v)
                                return;
                            k.setSelected(this.listModel, v),
                                "folder" === v.type && y.expandFolder && _.setCollapsed(v, !1),
                                k.setDragState(this.listModel, void 0);
                            break;
                        case "set-selected-id":
                            var o = this.getItemModel(e.id);
                            k.setSelected(this.listModel, o);
                            break;
                        case "set-selected-index":
                            var o = this.getItemModelByIndex(e.index);
                            k.setSelected(this.listModel, o);
                            break;
                        case "set-none-selected":
                            k.setSelected(this.listModel, void 0);
                            break;
                        case "set-focus-location":
                            var b = e.location ? e.location.type : "";
                            "expression" !== b && "text" !== b && "folder" !== b || (this.layoutModel = c.__assign({}, this.layoutModel, {
                                inEditListMode: !1
                            })),
                                C.setFocusLocation(this, e.location);
                            break;
                        case "move-focus-to-item":
                            C.moveFocusToItem(this, e.id, e.where);
                            break;
                        case "blur-focus-location":
                            this.isFocusLocationFocused(e.location) && C.setFocusLocation(this, void 0);
                            break;
                        case "set-folder-collapsed":
                            var u = this.getItemModel(e.id);
                            if (!u || "folder" !== u.type)
                                return;
                            _.setCollapsed(u, e.isCollapsed);
                            break;
                        case "set-item-secret":
                            var o = this.getItemModel(e.id);
                            if (!o)
                                return;
                            M.setSecret(o, e.isSecret);
                            break;
                        case "set-tablecolumn-color":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnColor(u, e.columnId, e.color);
                            break;
                        case "toggle-item-hidden":
                            this._toggleItemHidden(e.id);
                            break;
                        case "toggle-tablecolumn-hidden":
                            this._toggleTableColumnHidden(e.tableId, e.columnId);
                            break;
                        case "set-item-label":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setLabel(u, e.label);
                            break;
                        case "set-item-showlabel":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setShowLabel(u, e.showLabel);
                            break;
                        case "set-item-color":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setColor(u, e.color);
                            break;
                        case "set-item-fill":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setFill(u, e.fill),
                                this._setItemHidden(u.id, x.shouldHide(u));
                            break;
                        case "set-image-opacity":
                            var u = this.getItemModel(e.id);
                            if (!u || "image" !== u.type)
                                return;
                            E.setOpacity(u, e.opacity),
                                this._setItemHidden(u.id, !1);
                            break;
                        case "set-image-in-foreground":
                            var u = this.getItemModel(e.id);
                            if (!u || "image" !== u.type)
                                return;
                            E.setForeground(u, e.foreground);
                            break;
                        case "image-upload-error":
                            this.__pendingImageUploads[e.token] && (delete this.__pendingImageUploads[e.token],
                                this._showToast({
                                    message: this.t("Image upload failed.")
                                }));
                            break;
                        case "image-upload-success":
                            if (this.__pendingImageUploads[e.token]) {
                                delete this.__pendingImageUploads[e.token];
                                var T = this.createItemModel({
                                    type: "image",
                                    id: this.generateId(),
                                    width: e.width,
                                    height: e.height,
                                    image_url: e.url,
                                    name: e.name
                                });
                                this._toplevelNewItemAtSelection(T, !1)
                            }
                            this.isUploadingImages() || (this.toastData = {});
                            break;
                        case "image-load-success":
                            var T = this.getItemModel(e.id);
                            if (!T || "image" !== T.type)
                                return;
                            E.setLoadStatus(T, "loaded"),
                                this.imageRetryState = {
                                    lastAttemptTime: 0,
                                    attempts: 0
                                };
                            break;
                        case "image-load-error":
                            var T = this.getItemModel(e.id);
                            if (!T || "image" !== T.type)
                                return;
                            E.setLoadStatus(T, "failed");
                            break;
                        case "image-retry-loading":
                            var T = this.getItemModel(e.id);
                            if (!T || "image" !== T.type)
                                return;
                            E.retryLoading(T);
                            break;
                        case "set-item-dragmode":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setDragMode(u, e.dragMode),
                                e.dragMode !== h.NONE && this._setItemHidden(e.id, !1);
                            break;
                        case "set-tablecolumn-dragmode":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnDragMode(u, e.columnId, e.dragMode),
                                e.dragMode !== h.NONE && this._setTableColumnHidden(e.tableId, e.columnId, !1);
                            break;
                        case "set-tablecolumn-points":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnPoints(u, e.columnId, e.bool),
                                this._setTableColumnHidden(e.tableId, e.columnId, w.shouldHideColumn(u, e.columnId));
                            break;
                        case "set-tablecolumn-lines":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnLines(u, e.columnId, e.bool),
                                this._setTableColumnHidden(e.tableId, e.columnId, w.shouldHideColumn(u, e.columnId));
                            break;
                        case "set-tablecolumn-linestyle":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnLineStyle(u, e.columnId, e.lineStyle),
                                this._setTableColumnHidden(e.tableId, e.columnId, !1);
                            break;
                        case "set-tablecolumn-pointstyle":
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setColumnPointStyle(u, e.columnId, e.pointStyle),
                                this._setTableColumnHidden(e.tableId, e.columnId, !1);
                            break;
                        case "set-item-points":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setPoints(u, e.points),
                                this._setItemHidden(e.id, x.shouldHide(u)),
                                e.points || u.dragMode === h.NONE || x.setDragMode(u, h.NONE);
                            break;
                        case "set-item-pointstyle":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setPointStyle(u, e.pointStyle),
                                this._setItemHidden(e.id, !1);
                            break;
                        case "set-item-lines":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setLines(u, e.lines),
                                this._setItemHidden(e.id, x.shouldHide(u));
                            break;
                        case "set-item-linestyle":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setLineStyle(u, e.lineStyle),
                                this._setItemHidden(e.id, !1);
                            break;
                        case "set-item-fillopacity":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setFillOpacity(u, e.fillOpacity),
                                this._setItemHidden(e.id, !1);
                            break;
                        case "set-item-labelSize":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setLabelSize(u, e.labelSize);
                            break;
                        case "plot-residuals":
                            var o = this.getItemModel(e.id);
                            if (!o || "expression" !== o.type)
                                return;
                            var P = o.formula.regression
                                , A = P.residualSuggestionId;
                            if (!A)
                                return;
                            var L = this.getItemModel(A);
                            if (!L)
                                return;
                            w.insertBlankColumn(L, L.columnModels.length - 1, {
                                id: this.generateId(),
                                latex: l.identifierToLatex(P.residualVariable),
                                color: this.getNextColor()
                            });
                            break;
                        case "toggle-logmode":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            var O = u.isLogModeRegression;
                            x.setLogMode(u, !O);
                            break;
                        case "set-item-latex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var o = this.getItemModel(e.id);
                            if (!o || "expression" !== o.type)
                                return;
                            var D = e.latex;
                            if ('"' === D && this.areNotesEnabled()) {
                                var F = this.createItemModel({
                                    id: this.generateId(),
                                    type: "text"
                                });
                                this._toplevelReplaceItemAt(o.index, F, !0)
                            } else
                                "" === D ? x.blankOutExpressionAfterClearingLatex(o) : "betchacant" === D ? this.runAfterDispatch(function () {
                                    t.triggerBetchacant && t.triggerBetchacant()
                                }) : x.setLatex(o, D);
                            break;
                        case "set-folder-title":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "folder" !== u.type)
                                return;
                            _.setTitle(u, e.title);
                            break;
                        case "set-image-mq-attribute":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "image" !== u.type)
                                return;
                            E.setMQAttribute(u, e.attribute, e.latex);
                            break;
                        case "set-image-name":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "image" !== u.type)
                                return;
                            E.setName(u, e.name);
                            break;
                        case "set-graph-settings":
                            for (var R in e)
                                "type" !== R && this.graphSettings.setProperty(R, e[R]);
                            break;
                        case "set-domain-minlatex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setDomainMin(u, e.latex);
                            break;
                        case "set-domain-maxlatex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setDomainMax(u, e.latex);
                            break;
                        case "set-last-valid-domain":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.revertToLastValidDomain(u);
                            break;
                        case "set-note-text":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "text" !== u.type)
                                return;
                            S.setText(u, e.text);
                            break;
                        case "set-edit-list-mode":
                            this.layoutModel = c.__assign({}, this.layoutModel, {
                                inEditListMode: e.isEditListMode
                            }),
                                k.setSelected(this.listModel, void 0);
                            break;
                        case "set-tablecell-latex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.tableId);
                            if (!u || "table" !== u.type)
                                return;
                            w.setCellLatex(u, e.cell, e.latex);
                            break;
                        case "set-state":
                            this.externalSetState(e.state, e.opts);
                            break;
                        case "set-blank":
                            this.externalSetState(N.default, e.opts);
                            break;
                        case "clear-unsaved-changes":
                            this.enqueueEvent("clearUnsavedChanges");
                            break;
                        case "reset-graph":
                            var j = this.getState();
                            this.externalSetState(this.graphSettings.defaultState, {}),
                                this._showToast({
                                    message: this.t("Graph reset."),
                                    undoCallback: function () {
                                        return t.dispatch({
                                            type: "set-state",
                                            state: j,
                                            opts: {}
                                        })
                                    }
                                }),
                                this.enqueueEvent("graphReset");
                            break;
                        case "clear-graph":
                            if (this.triggerClearGraph)
                                return void this.runAfterDispatch(function () {
                                    return t.triggerClearGraph()
                                });
                            var B = this.getState();
                            this.externalSetState(N.default, {}),
                                this._showToast({
                                    message: this.t("Graph cleared."),
                                    undoCallback: function () {
                                        return t.dispatch({
                                            type: "set-state",
                                            state: B,
                                            opts: {}
                                        })
                                    }
                                }),
                                this.enqueueEvent("graphReset");
                            break;
                        case "on-evaluator-changes":
                            k.onEvaluatorFormulaUpdates(this.listModel, e.changes);
                            break;
                        case "process-graph-data":
                            var V;
                            for (V in e.graphData.addedGraphs) {
                                var U = e.graphData.addedGraphs[V];
                                this.grapher && this.grapher.updateSketch(V, U),
                                    k.onGraphComputed(this.listModel, V, U)
                            }
                            for (V in e.graphData.removedGraphs)
                                this.grapher && this.grapher.hide(V);
                            for (V in e.graphData.intersections)
                                this.grapher && this.grapher.updateIntersections(V, e.graphData.intersections[V]);
                            this.grapher && this.grapher.poiController.handleTraceUpdate();
                            break;
                        case "add-helper-expression":
                            k.addHelperExpression(this.listModel, e.state);
                            break;
                        case "tick":
                            this._tick(e.time);
                            break;
                        case "drag-slider-value":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderValue(u, e.value);
                            break;
                        case "set-slider-minlatex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderMin(u, e.isHard, e.latex);
                            break;
                        case "set-slider-maxlatex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderMax(u, e.isHard, e.latex);
                            break;
                        case "set-slider-steplatex":
                            this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderStep(u, e.latex);
                            break;
                        case "set-slider-dragging":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderDragging(u, e.dragging);
                            break;
                        case "set-slider-isplaying":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderIsPlaying(u, e.isPlaying);
                            break;
                        case "set-slider-loopmode":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderLoopMode(u, e.loopMode);
                            break;
                        case "set-slider-animationperiod":
                            var u = this.getItemModel(e.id);
                            if (!u || "expression" !== u.type)
                                return;
                            x.setSliderAnimationPeriod(u, e.animationPeriod);
                            break;
                        case "show-expressions-list":
                            this._showExpressions();
                            break;
                        case "hide-expressions-list":
                            this._hideExpressions();
                            break;
                        case "show-keypad":
                            this.focusLocation || C.addFocusForKeypad(this);
                            break;
                        case "open-drawer":
                            this.enqueueEvent("openDrawer");
                            break;
                        case "resize-exp-list":
                            this.layoutController.setExpListWidth(e.expListWidth),
                                this.runAfterDispatch(function () {
                                    t.layoutController && t.layoutController.resize()
                                });
                            break;
                        case "toast/show":
                            this._showToast(e.toast);
                            break;
                        case "toast/close":
                            var G = this.toastData.onHide;
                            G && this.runAfterDispatch(G),
                                this.toastData = {};
                            break;
                        case "toast/undo":
                            var z = this.toastData.undoCallback;
                            z && this.runAfterDispatch(z),
                                this.toastData = {};
                            break;
                        case "toast/learn-more":
                            var H = this.toastData.undoCallback;
                            H && this.runAfterDispatch(H),
                                this.toastData = {};
                            break;
                        case "start-moving-point":
                            q.onStartMovingPoint(this, this.listModel, e.pointInfo);
                            break;
                        case "stop-moving-point":
                            q.onStopMovingPoint(this, e.pointInfo);
                            break;
                        case "on-move-point":
                            var W = q.onMovePoint(this, e.pointInfo, e.screenPt, e.projection, e.keyboardDirection);
                            W && this.enqueueEvent("userMovedPoint");
                            break;
                        case "commit-user-requested-viewport":
                            this._commitUserRequestedViewport(e.viewport);
                            break;
                        case "set-axis-limit-latex":
                            this._setAxisLimitLatex(e.limit, e.latex);
                            break;
                        case "toggle-graph-settings":
                            this.layoutModel = c.__assign({}, this.layoutModel, {
                                graphSettingsOpen: !this.layoutModel.graphSettingsOpen
                            }),
                                this.settingsViewModel = c.__assign({}, this.settingsViewModel, {
                                    focusOnOpen: e.focusOnOpen
                                }),
                                e.focusOnOpen && C.setFocusLocation(this, void 0);
                            break;
                        case "close-graph-settings":
                            this.layoutModel = c.__assign({}, this.layoutModel, {
                                graphSettingsOpen: !1
                            });
                            break;
                        case "toggle-add-expression":
                            this.layoutModel = c.__assign({}, this.layoutModel, {
                                addExpressionOpen: !this.layoutModel.addExpressionOpen
                            }),
                                this.addExpressionViewModel = c.__assign({}, this.addExpressionViewModel, {
                                    focusOnOpen: e.focusOnOpen
                                }),
                                e.focusOnOpen && C.setFocusLocation(this, void 0);
                            break;
                        case "close-add-expression":
                            this._closeAddExpression();
                            break;
                        case "computed-layout":
                            this.layoutMeasurements = e.measurements,
                                this.shouldScrollSelectedItemIntoViewAfterDispatch = !0;
                            break;
                        case "enter-printmode":
                            this.inPrintMode = !0;
                            break;
                        case "exit-printmode":
                            this.inPrintMode = !1;
                            break;
                        default:
                            var Y = e;
                            return Y
                    }
                }
                ,
                e.prototype._populateSettingsViewLimitLatex = function () {
                    this.grapher && (this.settingsViewModel = c.__assign({}, this.settingsViewModel, {
                        limitLatex: L.limitLatex(this.grapher.getCurrentViewport(), this.getGraphSettings().xAxisStep, this.getGraphSettings().yAxisStep)
                    }))
                }
                ,
                e.prototype.getSettingsViewModel = function () {
                    return this.settingsViewModel
                }
                ,
                e.prototype.getListModel = function () {
                    return this.listModel
                }
                ,
                e.prototype.getAddExpressionViewModel = function () {
                    return this.addExpressionViewModel
                }
                ,
                e.prototype.subToChanges = function (e) {
                    var t = this
                        , n = this.nextSubscription;
                    return this.nextSubscription += 1,
                        this.subscriptions[n] = e,
                        function () {
                            delete t.subscriptions[n]
                        }
                }
                ,
                e.prototype.updateTheComputedWorld = function () {
                    var e = this;
                    k.reindex(this.listModel),
                        k.updateDrawOrder(this.listModel),
                        this.grapher && this.grapher.setSketchOrder(this.listModel.drawOrder);
                    for (var t = 0, n = this.getAllItemModels(); t < n.length; t++) {
                        var r = n[t];
                        switch (r.type) {
                            case "expression":
                                x.onControllerUpdate(r);
                                break;
                            case "image":
                                E.onControllerUpdate(r);
                                break;
                            case "table":
                                w.onControllerUpdate(r);
                                break;
                            case "folder":
                                _.onControllerUpdate(r);
                                break;
                            case "text":
                                S.onControllerUpdate(r);
                                break;
                            default:
                                var i = r;
                                return i
                        }
                    }
                    this.isCurrentFocusLocationValid() || C.setFocusLocation(this, void 0);
                    var o = this.getSelectedItem();
                    this.layoutModel.graphSettingsOpen || this._populateSettingsViewLimitLatex(),
                        this.propagateSelection(),
                        this.runAfterDispatch(function () {
                            e.grapher && e.grapher.audioGraph.checkIfSelectedItemChanged(o ? o.id : void 0),
                                e.grapher && e.focusLocation && e.grapher.audioGraph.exitAudioTrace()
                        })
                }
                ,
                e.prototype.propagateSelection = function () {
                    this.grapher && this.evaluator && (this.__lastSelectedId = a(this, this.grapher, this.evaluator, this.__lastSelectedId))
                }
                ,
                e.prototype.areParsableObjectsEqual = function (e, t) {
                    return e === t || u.isEqual(c.__assign({}, e, {
                        regressionParameters: void 0
                    }), c.__assign({}, t, {
                        regressionParameters: void 0
                    }))
                }
                ,
                e.prototype.requestParseForAllItems = function () {
                    this.isCurrentlyDoingSetState && this.evaluator.clearStatementsAndStartCompleteState();
                    for (var e = {}, t = this.lastParsableObjects, n = 0, r = this.getAllItemModels(); n < r.length; n++) {
                        var i = r[n];
                        switch (i.type) {
                            case "expression":
                            case "image":
                            case "table":
                                e[i.id] = i.cachedParsableState;
                                break;
                            case "folder":
                            case "text":
                                break;
                            default:
                                var o = i;
                                return o
                        }
                    }
                    for (var s = 0, a = k.getAllHelperItemModels(this.listModel); s < a.length; s++) {
                        var i = a[s];
                        e[i.id] = i.cachedParsableState
                    }
                    for (var c in e) {
                        var l = e[c]
                            , u = t[c];
                        "image" !== l.type || u && l.type === u.type && l.guid === u.guid || this.grapher && this.grapher.addGraphImage(this.getItemModel(c)),
                            this.areParsableObjectsEqual(l, u) || (this.grapher && "statement" === l.type && "" === l.latex && this.grapher.removeGraphSketch(l.id),
                                this.evaluator.addStatement(l))
                    }
                    for (var c in t) {
                        var u = t[c]
                            , l = e[c];
                        if ("image" !== u.type || l && l.type === u.type && l.guid === u.guid || this.grapher && this.grapher.removeGraphImage(c),
                            !l && (this.evaluator.removeStatement(c),
                                "table" === u.type))
                            for (var d = 0, p = u.columns; d < p.length; d++) {
                                var h = p[d];
                                this.evaluator.removeStatement(h.id)
                            }
                    }
                    this.evaluator.tick(),
                        this.lastParsableObjects = e
                }
                ,
                e.prototype.setEvaluator = function (e) {
                    this.evaluator = e
                }
                ,
                e.prototype.setGrapher = function (e) {
                    this.grapher = e
                }
                ,
                e.prototype.setBugsnagContext = function (e) {
                    this.bugsnagContext = e
                }
                ,
                e.prototype.getItemRootNodeById = function (e) {
                    var t = this.getItemModel(e);
                    return t && t.dcgView ? t.dcgView.findRootNode() : void 0
                }
                ,
                e.prototype.getItemSelectorById = function (e) {
                    var t = this.getItemRootNodeById(e);
                    return t ? O(t) : void 0
                }
                ,
                e.prototype.generateId = function () {
                    var e = this.__nextItemId;
                    return this.__nextItemId += 1,
                        e + ""
                }
                ,
                e.prototype.getNextColor = function () {
                    return k.getNextColor(this.listModel)
                }
                ,
                e.prototype.getNextDisplayIndex = function () {
                    return this.listModel.nextDisplayIndex
                }
                ,
                e.prototype._clearPendingImageUploads = function () {
                    this.__pendingImageUploads = {}
                }
                ,
                e.prototype.isUploadingImages = function () {
                    return Object.keys(this.__pendingImageUploads).length > 0
                }
                ,
                e.prototype.getExpressionAnalysis = function () {
                    return this.listModel.expressionAnalysis
                }
                ,
                e.prototype.createItemModel = function (e) {
                    return k.modelFromSpec(this.listModel, e)
                }
                ,
                e.prototype.getItemModel = function (e) {
                    return k.getItemById(this.listModel, e)
                }
                ,
                e.prototype.getItemModelByIndex = function (e) {
                    return k.getItemByIndex(this.listModel, e)
                }
                ,
                e.prototype.getItemCount = function () {
                    return k.getItemCount(this.listModel)
                }
                ,
                e.prototype.isItemSecret = function (e) {
                    var t = this.getItemModel(e);
                    return !!t && k.isItemSecret(t)
                }
                ,
                e.prototype.isItemSelected = function (e) {
                    var t = this.getItemModel(e);
                    return !!t && k.isItemSelected(t)
                }
                ,
                e.prototype.isItemSelectable = function (e) {
                    var t = this.getItemModel(e);
                    return !!t && k.isItemSelectable(t)
                }
                ,
                e.prototype.getAllItemModels = function () {
                    return k.getAllItemModels(this.listModel)
                }
                ,
                e.prototype.getAllModelsWithSliders = function () {
                    return k.getAllModelsWithSliders(this.listModel)
                }
                ,
                e.prototype.getGraphSettings = function () {
                    return this.graphSettings
                }
                ,
                e.prototype.inAudioTraceMode = function () {
                    return !(!this.grapher || !this.grapher.audioGraph.audioTraceActive)
                }
                ,
                e.prototype.getLayoutMeasurements = function () {
                    return this.layoutMeasurements
                }
                ,
                e.prototype.expressionsAreFullWidth = function () {
                    return this.layoutMeasurements.isNarrow || this.graphSettings.config.graphpaper === !1
                }
                ,
                e.prototype.getExpListWidthString = function () {
                    return this.expressionsAreFullWidth() ? "100%" : this.layoutController ? this.layoutController.getExpListWidth() + "px" : "0"
                }
                ,
                e.prototype.getExpListWidth = function () {
                    return this.layoutController ? this.layoutController.getExpListWidth() : 0
                }
                ,
                e.prototype.findFirstPartiallyVisibleItem = function () {
                    var e = R.getFirstPartiallyVisibleItemId(this, this._previousFirstPartiallyVisibleId);
                    return this._previousFirstPartiallyVisibleId = e,
                        e ? this.getItemModel(e) : void 0
                }
                ,
                e.prototype.findLastPartiallyVisibleItem = function () {
                    var e = R.getLastPartiallyVisibleItemId(this, this._previousLastPartiallyVisibleId);
                    return this._previousLastPartiallyVisibleId = e,
                        e ? this.getItemModel(e) : void 0
                }
                ,
                e.prototype.updateRenderShellsBeforePaint = function () {
                    if (this.inPrintMode)
                        for (var e = 0, t = this.getAllItemModels(); e < t.length; e++) {
                            var n = t[e];
                            n.renderShell = !1
                        }
                    else {
                        for (var r = 0, i = this.getAllItemModels(); r < i.length; r++) {
                            var n = i[r];
                            n.isHiddenFromUI && (n.renderShell = !0)
                        }
                        var o = this.getSelectedItem();
                        o && (o.renderShell = !1)
                    }
                }
                ,
                e.prototype.updateRenderShellsAfterPaint = function () {
                    if (this.inPrintMode)
                        for (var e = 0, t = this.getAllItemModels(); e < t.length; e++) {
                            var n = t[e];
                            n.renderShell = !1
                        }
                    else if (this.layoutController && this.isListVisible()) {
                        for (var r = void 0, i = void 0, o = 0, s = this.getAllItemModels(); o < s.length; o++) {
                            var n = s[o];
                            n.renderShell || (r || (r = n),
                                i = n)
                        }
                        var a = this.findFirstPartiallyVisibleItem()
                            , c = this.findLastPartiallyVisibleItem();
                        if (a && c)
                            for (var l = a.index; l <= c.index; l++) {
                                var u = this.getItemModelByIndex(l);
                                u && !u.isHiddenFromUI && u.renderShell && (u.renderShell = !1)
                            }
                        if (a && c && r && i)
                            for (var l = r.index; l <= i.index; l++)
                                if (l < a.index || l > c.index) {
                                    var u = this.getItemModelByIndex(l);
                                    if (u && !u.isHiddenFromUI && !u.renderShell) {
                                        u.renderShell = !0;
                                        var d = this.getItemRootNodeById(u.id);
                                        if (d) {
                                            var p = d.getBoundingClientRect().height;
                                            p > 0 && (u.cachedRenderHeight = p)
                                        }
                                    }
                                }
                        var h = this.getSelectedItem();
                        h && (h.renderShell = !1)
                    }
                }
                ,
                e.prototype.updateDragDrop = function () {
                    var e = this.listModel.dragState;
                    if (e) {
                        var t = this.getItemModel(e.firstItemId);
                        if (t) {
                            var n = this.dragdrop_expressions.applyDrag();
                            n && (k.setDragState(this.listModel, n.dragState),
                                M.setFolderId(t, n.folderId),
                                t.index !== n.newIndex && k.moveItemsTo(this.listModel, t.index, n.newIndex, e.numberOfItems),
                                k.verifyFolderIntegrity(this.listModel))
                        }
                    }
                }
                ,
                e.prototype.isSelectedItemPartiallyVisible = function () {
                    var e = this.getSelectedItem();
                    return !(!e || !R.isItemPartiallyVisible(this, e.id))
                }
                ,
                e.prototype._tick = function (e) {
                    var t = this;
                    if (void 0 !== this._lastTickTime) {
                        var n = e - this._lastTickTime;
                        this.getAllItemModels().forEach(function (e) {
                            "expression" === e.type && e.sliderExists && e.slider.isPlaying && x.tickSliderStep(e, n)
                        })
                    }
                    this.runAfterDispatch(function () {
                        t.grapher && t.grapher.tick(e)
                    }),
                        this._lastTickTime = e
                }
                ,
                e.prototype.areAnyImagesLoading = function () {
                    return k.areAnyImagesLoading(this.listModel)
                }
                ,
                e.prototype._commitUserRequestedViewport = function (e) {
                    this.grapher && this.grapher.setUserRequestedViewport(e)
                }
                ,
                e.prototype._setAxisLimitLatex = function (e, t) {
                    this.settingsViewModel = c.__assign({}, this.settingsViewModel, {
                        limitLatex: c.__assign({}, this.settingsViewModel.limitLatex, (d = {},
                            d[e] = t,
                            d))
                    });
                    var n = "" === t && ("xstep" === e || "ystep" === e)
                        , i = n ? 0 : P.default(t, this.graphSettings.degreeMode);
                    switch (e) {
                        case "xstep":
                            if (i < 0 || !isFinite(i))
                                return;
                            this.graphSettings.setProperty("xAxisStep", i);
                            break;
                        case "ystep":
                            if (i < 0 || !isFinite(i))
                                return;
                            this.graphSettings.setProperty("yAxisStep", i);
                            break;
                        case "xmin":
                        case "xmax":
                        case "ymin":
                        case "ymax":
                            if (!this.grapher)
                                return;
                            var o = this.grapher.viewportController.getViewport()
                                , s = r.fromObject(c.__assign({}, o.toObject(), (p = {},
                                    p[e] = i,
                                    p)));
                            if (!s.isValid())
                                return;
                            this.grapher.viewportController.setViewport(s);
                            var a = "xmin" === e || "xmax" === e ? "x" : "y";
                            this.graphSettings.setProperty("lastChangedAxis", a);
                            var l = s.isSquare(this.grapher.getProjection().screen);
                            this.graphSettings.setProperty("squareAxes", l)
                    }
                    var u = this.grapher.viewportController.getViewport().toObject();
                    this._commitUserRequestedViewport(u);
                    var d, p
                }
                ,
                e.prototype.canUserAddExpressions = function () {
                    return !!this.graphSettings.config.expressions
                }
                ,
                e.prototype.areNotesEnabled = function () {
                    return !!this.graphSettings.config.notes
                }
                ,
                e.prototype.areLinksEnabled = function () {
                    return !!this.graphSettings.config.links
                }
                ,
                e.prototype.areImagesEnabled = function () {
                    var e = window.FileReader
                        , t = n.IS_IPAD && n.IOS_VERSION && 8 === n.IOS_VERSION[0] && 0 === n.IOS_VERSION[1] && 0 === n.IOS_VERSION[2];
                    return !(!this.graphSettings.config.images || !e || t)
                }
                ,
                e.prototype.areFoldersEnabled = function () {
                    return !!this.graphSettings.config.folders
                }
                ,
                e.prototype.areFunctionsRestricted = function () {
                    return !!this.graphSettings.config.restrictedFunctions
                }
                ,
                e.prototype.isQwertyKeyboardEnabled = function () {
                    return !!this.graphSettings.config.qwertyKeyboard
                }
                ,
                e.prototype.canEditOnWeb = function () {
                    return !!this.graphSettings.config.editOnWeb
                }
                ,
                e.prototype.hasDefaultState = function () {
                    return !!this.graphSettings.defaultState
                }
                ,
                e.prototype.getColors = function () {
                    return this.graphSettings.config.colors
                }
                ,
                e.prototype.getImageOpacities = function () {
                    return [.2, .4, .6, .8, 1]
                }
                ,
                e.prototype.getUIDragModes = function () {
                    return [h.X, h.Y, h.XY]
                }
                ,
                e.prototype.getUIDragModesForItem = function (e) {
                    var t = this.getItemModel(e);
                    if (!t || "expression" !== t.type)
                        return [];
                    var n = t.formula;
                    return n.move_strategy ? [h.X, h.Y, h.XY] : []
                }
                ,
                e.prototype.getNumberOfItemsInFolder = function (e) {
                    return k.getNumberOfItemsInFolder(this.listModel, e)
                }
                ,
                e.prototype.getEnabledDragModesForItem = function (e) {
                    var t = this.getItemModel(e);
                    if (!t || "expression" !== t.type)
                        return [];
                    var n = t.formula
                        , r = [];
                    if (!n.move_strategy)
                        return r;
                    var i = "none" !== n.move_strategy[0].type
                        , o = "none" !== n.move_strategy[1].type
                        , s = i && o;
                    return i && r.push(h.X),
                        o && r.push(h.Y),
                        s && r.push(h.XY),
                        r
                }
                ,
                e.prototype.getPointStyles = function () {
                    return [f.POINT, f.OPEN, f.CROSS]
                }
                ,
                e.prototype.getLineStyles = function () {
                    return [f.SOLID, f.DASHED, f.DOTTED]
                }
                ,
                e.prototype.getValidPointStylesForItem = function (e) {
                    var t = this.getItemModel(e);
                    return t && "expression" === t.type && x.isPointOrPointList(t) ? [f.POINT, f.OPEN, f.CROSS] : []
                }
                ,
                e.prototype.getValidLineStylesForItem = function (e) {
                    var t = this.getItemModel(e);
                    if (!t || "expression" !== t.type)
                        return [];
                    var n = !t.formula.is_inequality;
                    return n && !x.isSinglePoint(t) ? [f.SOLID, f.DASHED, f.DOTTED] : []
                }
                ,
                e.prototype.getOpacities = function () {
                    return [m.LOW, m.DEFAULT, m.HIGH]
                }
                ,
                e.prototype.isInEditListMode = function () {
                    return this.layoutModel.inEditListMode
                }
                ,
                e.prototype.canAdministerSecretFolders = function () {
                    return this.graphSettings.config.administerSecretFolders
                }
                ,
                e.prototype.isDegreeMode = function () {
                    return this.graphSettings.degreeMode
                }
                ,
                e.prototype.isGraphSettingsOpen = function () {
                    return this.layoutModel.graphSettingsOpen
                }
                ,
                e.prototype.isAddExpressionOpen = function () {
                    return this.layoutModel.addExpressionOpen
                }
                ,
                e.prototype.isListVisible = function () {
                    return this.layoutModel.expressionsVisible
                }
                ,
                e.prototype.needsFakeKeypad = function () {
                    return !(!this.layoutController || !this.layoutController.$root) && (!!this.layoutController.$root.find(document.activeElement).length && !!F.default.getFocusedMathquill())
                }
                ,
                e.prototype.getBrandingMode = function () {
                    return this.getEditLink() ? "static-edit-link" : this.getGraphSettings().config.editOnWeb ? "edit-link" : "powered-by"
                }
                ,
                e.prototype.getEditLink = function () {
                    return window.iframeEmbedBrandingLink
                }
                ,
                e.prototype._deleteItemAndAnimateOut = function (e) {
                    var t = this
                        , n = .2
                        , r = this.getItemSelectorById(e);
                    r && (r.css({
                        transition: n + "s",
                        opacity: "0",
                        transform: "scale(.1, .1)"
                    }),
                        setTimeout(function () {
                            t.dispatch({
                                type: "finish-deleting-item-after-animation",
                                id: e
                            })
                        }, 1e3 * n))
                }
                ,
                e.prototype._finishDeletingItemAfterAnimation = function (e) {
                    var t = this.getItemModel(e);
                    if (t) {
                        var n = this.getItemSelectorById(e)
                            , r = n && O(document.activeElement).closest(n).length > 0
                            , i = k.findPrevSelectableItem(this.listModel, t.index);
                        if (this._removeExpressionSynchronously(t),
                            r) {
                            if (!i) {
                                var o = k.getFirstSelectableItem(this.listModel);
                                o && (i = o)
                            }
                            i && C.moveFocusToItem(this, i.id, "end")
                        }
                    }
                }
                ,
                e.prototype._removeExpressionSynchronously = function (e) {
                    if (k.removeItemAtIndex(this.listModel, e.index),
                        k.hasNoVisibleExpressions(this.listModel)) {
                        var t = this.createItemModel({
                            type: "expression",
                            id: this.generateId(),
                            color: this.getNextColor()
                        });
                        k.insertItemAtEnd(this.listModel, t)
                    }
                }
                ,
                e.prototype.setLayoutController = function (e) {
                    this.layoutController = e,
                        this.dragdrop_expressions = new j.default(this)
                }
                ,
                e.prototype._hideExpressions = function () {
                    var e = this;
                    this.graphSettings.config.expressions && (k.setSelected(this.listModel, void 0),
                        this.layoutModel = c.__assign({}, this.layoutModel, {
                            expressionsVisible: !1
                        }),
                        this.layoutController && this.runAfterDispatch(function () {
                            e.layoutController && e.layoutController.resize()
                        }),
                        g.default())
                }
                ,
                e.prototype._showExpressions = function () {
                    var e = this;
                    this.graphSettings.config.expressions && (this.layoutModel = c.__assign({}, this.layoutModel, {
                        expressionsVisible: !0
                    }),
                        this.layoutController && this.runAfterDispatch(function () {
                            e.layoutController && e.layoutController.resize()
                        }),
                        g.default())
                }
                ,
                e.prototype._showToast = function (e) {
                    var t = this;
                    if (this.toastData = e,
                        this.toastData.hasOwnProperty("undoCallback")) {
                        var r = n.IS_APPLE ? " Press CMD+Z to undo." : " Press CTRL+Z to undo.";
                        this.toastData.message += r
                    }
                    clearTimeout(this._hideToastTimeout);
                    var i = "number" == typeof e.hideAfter ? e.hideAfter : 6e3;
                    i > 0 && (this._hideToastTimeout = setTimeout(function () {
                        t.dispatch({
                            type: "toast/close",
                            onHide: t.toastData.onHide
                        })
                    }, i))
                }
                ,
                e.prototype._setExpressionPropertiesFromAPI = function (e, t) {
                    var n = this.getItemModel(e);
                    if (n)
                        if ("table" === n.type && t.columns) {
                            t = y.default(t);
                            var r = w.cloneTableAndExtendWithProperties(n, t)
                                , i = k.modelFromSpec(this.listModel, r);
                            this._toplevelReplaceItemAt(n.index, i, !1)
                        } else {
                            var o = this.getItemModel(e);
                            if (!o)
                                return;
                            for (var s in t)
                                if (t.hasOwnProperty(s))
                                    switch (s) {
                                        case "slider":
                                            if ("expression" !== o.type)
                                                continue;
                                            var a = t[s];
                                            a.hasOwnProperty("min") && x.setSliderMin(o, !1, a.min),
                                                a.hasOwnProperty("max") && x.setSliderMax(o, !1, a.max),
                                                a.hasOwnProperty("step") && x.setSliderStep(o, a.step);
                                            break;
                                        case "domain":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setDomainMin(o, v.default(t.domain.min)),
                                                x.setDomainMax(o, v.default(t.domain.max));
                                            break;
                                        case "hidden":
                                            this._setItemHidden(e, t.hidden);
                                            break;
                                        case "secret":
                                            M.setSecret(o, t.secret);
                                            break;
                                        case "color":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setColor(o, t.color);
                                            break;
                                        case "dragMode":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setDragMode(o, t.dragMode);
                                            break;
                                        case "label":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setLabel(o, t.label);
                                            break;
                                        case "showLabel":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setShowLabel(o, t.showLabel);
                                            break;
                                        case "latex":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setLatex(o, t.latex);
                                            break;
                                        case "points":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setPoints(o, !!t.points);
                                            break;
                                        case "lines":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setLines(o, !!t.lines);
                                            break;
                                        case "pointStyle":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setPointStyle(o, t.pointStyle);
                                            break;
                                        case "lineStyle":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setLineStyle(o, t.lineStyle);
                                            break;
                                        case "fill":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setFill(o, t.fill);
                                            break;
                                        case "fillOpacity":
                                            if ("expression" !== o.type)
                                                continue;
                                            x.setFillOpacity(o, t.fillOpacity);
                                            break;
                                        case "id":
                                        case "type":
                                            break;
                                        default:
                                            throw new Error("trying to call setProperty for: " + s)
                                    }
                        }
                }
                ,
                e.prototype._isParentFolderHidden = function (e) {
                    var t = this.getItemModel(e);
                    if (!t)
                        return !1;
                    var n = k.getParentFolderModel(t);
                    return !!n && n.hidden
                }
                ,
                e.prototype._toggleItemHidden = function (e) {
                    if (this._isParentFolderHidden(e))
                        this._setItemHidden(e, !1);
                    else {
                        var t = this.getItemModel(e);
                        if (!t)
                            return;
                        switch (t.type) {
                            case "expression":
                            case "image":
                            case "folder":
                                this._setItemHidden(e, !t.hidden);
                                break;
                            case "table":
                            case "text":
                                break;
                            default:
                                var n = t;
                                return n
                        }
                    }
                }
                ,
                e.prototype._toggleTableColumnHidden = function (e, t) {
                    if (this._isParentFolderHidden(e))
                        this._setTableColumnHidden(e, t, !1);
                    else {
                        var n = this.getItemModel(e);
                        if (!n || "table" !== n.type)
                            return;
                        var r = w.getColumnModel(n, t);
                        this._setTableColumnHidden(e, t, !r.hidden)
                    }
                }
                ,
                e.prototype._setTableColumnHidden = function (e, t, n) {
                    var r = this.getItemModel(e);
                    if (r && "table" === r.type) {
                        var i = w.shouldHideColumn(r, t);
                        !n && this._isParentFolderHidden(e) && this._setItemHidden(r.folderId, !1),
                            w.setColumnHidden(r, t, n),
                            !n && i && w.setColumnPoints(r, t, !0)
                    }
                }
                ,
                e.prototype._setItemHidden = function (e, t) {
                    var n = this.getItemModel(e);
                    if (n)
                        switch (!t && this._isParentFolderHidden(n.id) && this._setItemHidden(n.folderId, !1),
                        n.type) {
                            case "expression":
                                x.setHidden(n, t);
                                break;
                            case "folder":
                                _.setHidden(n, t);
                                break;
                            case "image":
                                E.setHidden(n, t);
                                break;
                            case "table":
                            case "text":
                                break;
                            default:
                                var r = n;
                                return r
                        }
                }
                ,
                e.prototype._addItemToEndFromAPI = function (e) {
                    var t = k.getLastSelectableItem(this.listModel);
                    !e.secret && t && "expression" === t.type && "" === t.latex && k.removeItemAtIndex(this.listModel, t.index),
                        k.insertItemAtEnd(this.listModel, e)
                }
                ,
                e.prototype._toplevelInsertItemAt = function (e, t, n, r) {
                    var i = t;
                    k.insertItemAtIndex(this.listModel, i, e),
                        r && M.setFolderId(i, r),
                        n && C.moveFocusToItem(this, i.id)
                }
                ,
                e.prototype._toplevelNewItemAtSelection = function (e, t) {
                    var n = this.getSelectedItem();
                    if (n) {
                        var r = "expression" === n.type && !n.latex;
                        if (r && !n.folderId && "expression" !== e.type)
                            return this._toplevelReplaceItemAt(n.index, e, t);
                        if (r && n.folderId && "expression" !== e.type && "folder" !== e.type)
                            return this._toplevelReplaceItemAt(n.index, e, t);
                        if (!n.folderId && "folder" !== n.type) {
                            var i = void 0;
                            return this._toplevelInsertItemAt(n.index + 1, e, t, i)
                        }
                        if (n.folderId && "folder" !== e.type)
                            return this._toplevelInsertItemAt(n.index + 1, e, t, n.folderId);
                        if ("folder" === n.type && !n.collapsed && "folder" !== e.type)
                            return this._toplevelInsertItemAt(n.index + 1, e, t, n.id)
                    }
                    var o = this.getFirstFullyVisibleItem();
                    for (o && "folder" === o.type && (o = this.getItemModelByIndex(o.index + 1)); o && o.folderId;)
                        o = this.getItemModelByIndex(o.index + 1);
                    var s = o ? o.index : this.getItemCount()
                        , a = void 0;
                    return this._toplevelInsertItemAt(s, e, t, a)
                }
                ,
                e.prototype.getFirstFullyVisibleItem = function () {
                    var e = R.getFirstFullyVisibleItemId(this);
                    if (e)
                        return k.getItemById(this.listModel, e)
                }
                ,
                e.prototype.getRootElt = function () {
                    if (this.layoutController)
                        return this.layoutController.$root[0]
                }
                ,
                e.prototype.getExppanelSelectorOrThrow = function () {
                    var e = this.getRootElt();
                    if (e) {
                        var t = R.getExppanelElt(e);
                        if (t)
                            return O(t)
                    }
                    throw new Error("expected to find $exppanel but could not")
                }
                ,
                e.prototype.scrollSelectedItemIntoView = function () {
                    if (this.layoutController && this.isListVisible()) {
                        var e = this.getSelectedItem();
                        if (e) {
                            var t = this.layoutController.$root[0]
                                , n = this.getItemSelectorById(e.id)
                                , r = R.getExppanelSelector(t);
                            if (n && r) {
                                if ("table" === e.type) {
                                    var i = n.find(".dcg-row .dcg-selected");
                                    if (1 === i.length)
                                        return void s.scrollVisible(i, r, 60)
                                }
                                s.scrollVisible(n, r, 90)
                            }
                        }
                    }
                }
                ,
                e.prototype._pasteTable = function (e) {
                    var t = this
                        , n = k.findAvailableColumnSubscript(this.listModel)
                        , i = w.makeTableState(n, e, this)
                        , s = this.createItemModel(i);
                    this._toplevelNewItemAtSelection(s, !1),
                        this._closeAddExpression();
                    var a = this.grapher.viewportController.getViewport()
                        , c = o.computeNewViewport(a, e);
                    (c.xmax > a.xmax || c.xmin < a.xmin || c.ymax > a.ymax || c.ymin < a.ymin) && (this.grapher.viewportController.setViewport(new r(c.xmin, c.xmax, c.ymin, c.ymax)),
                        this._showToast({
                            message: this.t("We zoomed to fit your data."),
                            undoCallback: function () {
                                t.dispatch({
                                    type: "undo"
                                })
                            }
                        }))
                }
                ,
                e.prototype._toplevelReplaceItemAt = function (e, t, n) {
                    var r = t
                        , i = this.getItemModelByIndex(e)
                        , o = i.folderId;
                    k.removeItemAtIndex(this.listModel, e),
                        k.insertItemAtIndex(this.listModel, r, e),
                        o && M.setFolderId(r, o),
                        n && C.moveFocusToItem(this, r.id)
                }
                ,
                e.prototype._createSlidersForItem = function (e, t) {
                    var n = this
                        , r = this.getItemModel(e);
                    if (r) {
                        for (var i = r.folderId, o = r.index + 1, s = t.map(function (e) {
                            var t = e ? l.identifierToLatex(e) + "=1" : ""
                                , r = {
                                    type: "expression",
                                    id: n.generateId(),
                                    latex: t,
                                    color: n.getNextColor(),
                                    hidden: !!t
                                };
                            return r
                        }), a = s.length - 1; a >= 0; a--) {
                            var c = this.createItemModel(s[a]);
                            k.insertItemAtIndex(this.listModel, c, o),
                                i && M.setFolderId(c, i)
                        }
                        var u = s[s.length - 1];
                        "" === u.latex ? C.moveFocusToItem(this, u.id) : C.setFocusLocation(this, void 0)
                    }
                }
                ,
                e.prototype._uploadImagesAndWaitForThemToLoad = function (e) {
                    var t = this;
                    if (!e || 0 === e.length)
                        return void this._showToast({
                            message: this.t("You did not select a file")
                        });
                    var n = E.uploadImages(this, e)
                        , r = n.errors[0];
                    r && this._showToast({
                        message: r
                    });
                    for (var i = 0, o = n.tokens; i < o.length; i++) {
                        var s = o[i];
                        this.__pendingImageUploads[s] = !0
                    }
                    this.isUploadingImages() && this._showToast({
                        message: this.t("Uploading images..."),
                        onHide: function () {
                            t._clearPendingImageUploads()
                        }
                    })
                }
                ,
                e.prototype.getImageToRetry = function () {
                    for (var e, t = 0, n = this.getAllItemModels(); t < n.length; t++) {
                        var r = n[t];
                        "image" === r.type && "failed" === r.loadStatus && (!e || e.failures > r.failures) && (e = r)
                    }
                    return e
                }
                ,
                e.prototype.retryLoadingFailedImage = function () {
                    var e = Date.now()
                        , t = e - this.imageRetryState.lastAttemptTime
                        , n = 1e3 * Math.pow(2, this.imageRetryState.attempts);
                    if (!(this.imageRetryState.attempts > 0 && t < n)) {
                        var r = this.getImageToRetry();
                        r && (E.retryLoading(r),
                            this.imageRetryState = {
                                lastAttemptTime: e,
                                attempts: this.imageRetryState.attempts + 1
                            })
                    }
                }
                ,
                e.prototype.getSelectedItem = function () {
                    return k.getSelected(this.listModel)
                }
                ,
                e.prototype.getFocusedItem = function () {
                    return C.getFocusedItem(this)
                }
                ,
                e.prototype.getFocusLocation = function () {
                    return this.focusLocation
                }
                ,
                e.prototype.isFocusLocationFocused = function (e) {
                    var t = this.focusLocation
                        , n = e;
                    return !(!t || !n) && u.isEqual(t, n)
                }
                ,
                e.prototype.isCurrentFocusLocationValid = function () {
                    var e = this.focusLocation;
                    if (!e)
                        return !0;
                    if ("settings" === e.type)
                        return this.isGraphSettingsOpen();
                    var t = this.getItemModel(e.id);
                    if (!t)
                        return !1;
                    if (!this.isItemSelected(e.id))
                        return !1;
                    switch (e.type) {
                        case "domain-limit":
                            return "expression" === t.type && !!x.hasDomain(t);
                        case "slider-limit":
                            return "expression" === t.type && !!x.hasSlider(t);
                        case "image":
                            return "image" === t.type;
                        case "folder":
                            return "folder" === t.type;
                        case "text":
                            return "text" === t.type;
                        case "expression":
                            return "expression" === t.type;
                        case "table":
                            return "table" === t.type && !!w.doesCellExist(t, e.location);
                        default:
                            var n = e;
                            return n
                    }
                }
                ,
                e.prototype.isDragDropActive = function () {
                    return !!this.listModel.dragState
                }
                ,
                e.prototype.isItemBeingDragged = function (e) {
                    var t = this.listModel.dragState;
                    return !(!t || t.firstItemId !== e)
                }
                ,
                e.prototype.getDraggedItemId = function () {
                    var e = this.listModel.dragState;
                    return e && e.firstItemId
                }
                ,
                e.prototype.getRawDragState = function () {
                    return this.listModel.dragState
                }
                ,
                e.prototype.initStateStack = function () {
                    this.stateStack = new b.default,
                        this.stateStack.addState(this.getUndoRedoState())
                }
                ,
                e.prototype.getUndoRedoState = function () {
                    return {
                        layoutModel: this.layoutModel,
                        settingsViewModel: this.settingsViewModel,
                        graph: this.grapher ? this.grapher.getUndoRedoState() : void 0,
                        expressions: k.getUndoRedoState(this.listModel),
                        wasCompleteSetState: this.isCurrentlyDoingSetState
                    }
                }
                ,
                e.prototype.getState = function (e) {
                    var t = {
                        stripDefaults: !0
                    };
                    e && e.hasOwnProperty("stripDefaults") && (t.stripDefaults = !!e.stripDefaults);
                    var n = {
                        version: i.currentVersion,
                        graph: this.grapher.getState(t),
                        expressions: k.getState(this.listModel, t)
                    };
                    return e && e.keepV6 ? n : T.default(n)
                }
                ,
                e.prototype.externalSetState = function (e, t) {
                    this._clearPendingImageUploads(),
                        t || (t = {}),
                        e || (e = N.default),
                        "string" == typeof e && (e = JSON.parse(e)),
                        e && (e = i.migrateToLatest(e)),
                        this.setState(e, t),
                        this.layoutModel = A.defaultLayoutModel(this.graphSettings.config),
                        this.settingsViewModel = L.defaultSettingsViewModel(),
                        C.setFocusLocation(this, void 0),
                        this.enqueueEvent("clearUnsavedChanges")
                }
                ,
                e.prototype.setState = function (e, t) {
                    if (this.lastParsableObjects = {},
                        this.isCurrentlyDoingSetState = !0,
                        "graph" in e && this.grapher && this.grapher.setGrapherState(e.graph),
                        "expressions" in e) {
                        k.setSelected(this.listModel, void 0);
                        var n = k.getLargestIntegerId(e.expressions);
                        n >= this.__nextItemId && (this.__nextItemId = n + 1),
                            k.setListState(this.listModel, e.expressions, t)
                    }
                    e.layoutModel && (this.layoutModel = e.layoutModel),
                        e.settingsViewModel && (this.settingsViewModel = e.settingsViewModel),
                        t && t.allowUndo || this.clearUndoRedoHistory()
                }
                ,
                e.prototype.updateToState = function (e) {
                    "graph" in e && this.grapher && this.grapher.setGrapherState(e.graph, {
                        doNotClear: !0
                    }),
                        "expressions" in e && k.restoreListState(this.listModel, e.expressions),
                        e.layoutModel && (this.layoutModel = e.layoutModel),
                        e.settingsViewModel && (this.settingsViewModel = e.settingsViewModel)
                }
                ,
                e.prototype.commitUndoRedoSynchronously = function (e) {
                    var t = this.getUndoRedoState()
                        , n = this.stateStack.getState();
                    V(n, t) || (this.stateStack.addState(t),
                        this.enqueueEvent("change"))
                }
                ,
                e.prototype.undo = function () {
                    if (this.canUndo()) {
                        this.stateStack.undo();
                        var e = this.stateStack.getState();
                        e.wasCompleteSetState ? this.setState(e, {
                            allowUndo: !0
                        }) : this.updateToState(e),
                            this.enqueueEvent("change")
                    }
                }
                ,
                e.prototype.redo = function () {
                    if (this.canRedo()) {
                        this.stateStack.redo();
                        var e = this.stateStack.getState();
                        e.wasCompleteSetState ? this.setState(e, {
                            allowUndo: !0
                        }) : this.updateToState(e),
                            this.enqueueEvent("change")
                    }
                }
                ,
                e.prototype.clearUndoRedoHistory = function () {
                    this.stateStack.clear()
                }
                ,
                e.prototype.canUndo = function () {
                    return this.stateStack.canUndo()
                }
                ,
                e.prototype.canRedo = function () {
                    return this.stateStack.canRedo()
                }
                ,
                e.prototype._closeAddExpression = function () {
                    this.layoutModel = c.__assign({}, this.layoutModel, {
                        addExpressionOpen: !1
                    })
                }
                ,
                e
        }();
        t.default = U
    }),
    define("expressions/abstract-item-view", ["require", "exports", "tslib", "dcgview", "jquery.handleevent"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    this.controller = this.props.controller(),
                        this.model = this.props.model(),
                        this.id = this.model.id,
                        this._isFirstRender = !0,
                        this._isDragCopy = this.props.isDragCopy()
                }
                ,
                t.prototype.onItemViewMounted = function () {
                    this._isDragCopy || (this.model.dcgView = this),
                        this._isFirstRender = !1
                }
                ,
                t.prototype.onItemViewUnmounted = function () {
                    this._isDragCopy || (this.model.dcgView = void 0)
                }
                ,
                t.prototype.isFirstRender = function () {
                    return this._isFirstRender
                }
                ,
                t.prototype.onMouseSelect = function (e) {
                    "dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || e.wasHandled() || (e.handle(),
                        this.controller.dispatch({
                            type: "set-selected-id",
                            id: this.id
                        }))
                }
                ,
                t.prototype.onDelete = function () {
                    this.controller.dispatch({
                        type: "delete-item-and-animate-out",
                        id: this.id
                    })
                }
                ,
                t.prototype.onDragPending = function (e) {
                    this.props.onDragPending(e)
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("expressions/abstract_icon_view", ["require", "exports", "keys", "tslib", "jquery", "dcgview"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = 0
            , a = 500
            , c = function (e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t._lastErrorState = !1,
                        t._errorStateIsStable = !1,
                        t
                }
                return r.__extends(t, e),
                    t.prototype.init = function () {
                        this.guid = "options-menu-view" + ++s,
                            this.controller = this.props.controller()
                    }
                    ,
                    t.prototype.positionOptionsMenu = function () {
                        var e = this.controller.getExppanelSelectorOrThrow()
                            , t = i(this.rootElt)
                            , n = t.offset()
                            , r = i(this.optionsMenu.findRootNode())
                            , o = {
                                top: n.top - e.closest(".dcg-container").offset().top,
                                left: n.left - e.closest(".dcg-container").offset().left
                            };
                        r.css({
                            position: "absolute",
                            top: o.top + "px",
                            left: o.left + "px",
                            display: "block"
                        })
                    }
                    ,
                    t.prototype.toggleOptions = function () {
                        var e = this;
                        return this.hasError() ? void this.hideOptions() : this.optionsShown ? void this.hideOptions() : (this.optionsShown = !0,
                            this.optionsMenu = this.createOptionsMenuView(),
                            this.positionOptionsMenu(),
                            setTimeout(function () {
                                if (e.optionsShown) {
                                    var t = e.controller.getExppanelSelectorOrThrow();
                                    t.on("scroll." + e.guid, function () {
                                        e.hideOptions()
                                    })
                                }
                            }, 0),
                            i(document).on("keydown." + this.guid, function (t) {
                                n.lookup(t) === n.ESCAPE && e.hideOptions()
                            }),
                            void i(document).on("dcg-tapstart." + this.guid, function (t) {
                                i(t.target).closest(".dcg-options-menu").length || i(t.target).closest(e.rootElt).length || e.hideOptions()
                            }))
                    }
                    ,
                    t.prototype.hideOptions = function () {
                        if (this.optionsShown || this.optionsMenu) {
                            this.optionsShown = !1,
                                i(document).off("dcg-tapstart." + this.guid),
                                i(document).off("keydown." + this.guid);
                            var e = this.controller.getExppanelSelectorOrThrow();
                            if (e.off("scroll." + this.guid),
                                this.optionsMenu) {
                                try {
                                    o.unmountFromNode(this.getOptionsMenuContainerSelector()[0])
                                } catch (e) { }
                                this.optionsMenu = null
                            }
                        }
                    }
                    ,
                    t.prototype.getOptionsMenuContainerSelector = function () {
                        var e = this.controller.getExppanelSelectorOrThrow();
                        return e.closest(".dcg-container").find(".dcg-options-menu-container")
                    }
                    ,
                    t.prototype.hasStableError = function () {
                        return this.hasError() && this.isErrorStateStable()
                    }
                    ,
                    t.prototype.isErrorStateStable = function () {
                        return this._errorStateIsStable
                    }
                    ,
                    t.prototype.willUpdate = function () {
                        var e = this
                            , t = this.hasError();
                        t !== this._lastErrorState ? (this._lastErrorStateChangeTime = Date.now(),
                            this._lastErrorState = t,
                            this._errorStateIsStable = !1,
                            clearTimeout(this.errTimeout),
                            this.errTimeout = setTimeout(function () {
                                e.update()
                            }, a)) : !this._errorStateIsStable && Date.now() - this._lastErrorStateChangeTime >= a && (this._errorStateIsStable = !0)
                    }
                    ,
                    t.prototype.didUnmount = function () {
                        this.hideOptions(),
                            clearTimeout(this.errTimeout),
                            delete this.errTimeout
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        this.optionsMenu && this.optionsMenu.update()
                    }
                    ,
                    t
            }(o.Class);
        t.default = c
    }),
    define("loadcss!color_menu", function () { }),
    define("expressions/color_menu_view", ["require", "exports", "tslib", "dcgview", "underscore", "loadcss!color_menu"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.For
            , s = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            r.createElement(o, {
                                each: function () {
                                    return i.values(e.controller.getColors())
                                }
                            }, r.createElement("div", {
                                class: r.const("dcg-color-menu dcg-do-not-blur"),
                                role: r.const("complementary"),
                                "aria-label": function () {
                                    return e.controller.t("Color Menu")
                                }
                            }, function (t) {
                                return r.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-color-option": !0,
                                            "dcg-selected": e.props.selectedColor() === t
                                        }
                                    },
                                    color: e.const(t),
                                    style: function () {
                                        return {
                                            background: t,
                                            "border-color": t
                                        }
                                    },
                                    handleevent: r.const("true"),
                                    role: r.const("button"),
                                    tabindex: r.const(0),
                                    "aria-label": e.const(t),
                                    onTap: function () {
                                        return e.props.onColorSelected(t)
                                    }
                                }, r.createElement("i", {
                                    class: r.const("dcg-icon-check")
                                }))
                            }))
                    }
                    ,
                    t
            }(r.Class);
        t.default = s
    }),
    define("loadcss!expressions/toggle-view", function () { }),
    define("expressions/toggle-view", ["require", "exports", "tslib", "dcgview", "loadcss!./toggle-view"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: function () {
                            return {
                                "dcg-toggle-view": !0,
                                "dcg-toggled": e.props.toggled()
                            }
                        },
                        role: r.const("checkbox"),
                        tabindex: r.const("0"),
                        toggled: function () {
                            return e.props.toggled()
                        },
                        onTap: this.bindFn(this.props.onChange)
                    }, r.createElement("div", {
                        class: r.const("dcg-toggle-switch")
                    }))
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!dcgview-helpers/checkbox", function () { }),
    define("dcgview-helpers/checkbox", ["require", "exports", "tslib", "dcgview", "loadcss!./checkbox"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: function () {
                            return {
                                "dcg-component-checkbox": !0,
                                "dcg-checked": e.props.checked(),
                                "dcg-disabled": e.props.disabled()
                            }
                        },
                        onTap: function () {
                            return e.onChange()
                        }
                    }, r.createElement("span", {
                        tabindex: r.const(0),
                        class: r.const("dcg-checkbox"),
                        role: r.const("checkbox"),
                        "aria-label": this.props.ariaLabel,
                        "aria-disabled": this.props.disabled,
                        "aria-checked": this.props.checked
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-check"),
                        "aria-hidden": r.const("true")
                    })), r.createElement("span", {
                        class: r.const("dcg-checkbox-children")
                    }, this.children))
                }
                ,
                t.prototype.onChange = function () {
                    this.props.disabled() || this.props.onChange(!this.props.checked())
                }
                ,
                t
        }(r.Class);
        t.Checkbox = i
    }),
    define("expressions/expression_options_view", ["require", "exports", "tslib", "dcgview", "underscore", "graphing/dragmode", "./color_menu_view", "math/expression-types", "graphing-calc/models/expression", "expressions/toggle-view", "dcgview-helpers/checkbox"], function (e, t, n, r, i, o, s, a, c, l, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var d = r.Components
            , p = d.For
            , h = d.If
            , f = "#bbb"
            , m = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.id = this.model.id;
                        var t = this.controller.getValidPointStylesForItem(this.id)
                            , n = this.controller.getValidLineStylesForItem(this.id)
                            , i = c.isPolygon(this.model) || c.isParametric(this.model);
                        return r.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-exp-options-menu": !0,
                                    "dcg-options-menu": !0,
                                    "dcg-colors-only": 0 === t.length && 0 === n.length,
                                    "dcg-with-drag": 0 !== e.controller.getUIDragModesForItem(e.id).length
                                }
                            }
                        }, r.createElement("div", {
                            class: r.const("dcg-triangle")
                        }), r.createElement("div", {
                            class: r.const("dcg-options-menu-column-left")
                        }, r.createElement(h, {
                            predicate: function () {
                                return t.length > 0
                            }
                        }, function () {
                            return r.createElement("div", {
                                class: r.const("dcg-styles-div dcg-options-menu-section")
                            }, r.createElement("div", {
                                class: r.const("dcg-styles-menu dcg-dividing-line-after")
                            }, r.createElement("span", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return c.isSinglePoint(e.model) ? e.controller.t("Style") : e.controller.t("Points")
                            }), r.createElement(h, {
                                predicate: function () {
                                    return !c.isSinglePoint(e.model)
                                }
                            }, function () {
                                return r.createElement(l.default, {
                                    toggled: function () {
                                        return e.getDisplayProps().points
                                    },
                                    onChange: e.bindFn(e.onTogglePoints)
                                })
                            }), r.createElement(h, {
                                predicate: function () {
                                    return e.getDisplayProps().points
                                }
                            }, function () {
                                return r.createElement(p, {
                                    each: function () {
                                        return t
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-style-icons")
                                }, function (t) {
                                    return r.createElement("span", {
                                        class: function () {
                                            return n = {
                                                "dcg-style-option": !0,
                                                "dcg-variable-colorcss": !0,
                                                "dcg-graph-icon": !0
                                            },
                                                n[e.getStyleClass(t)] = !0,
                                                n["dcg-selected"] = e.model.pointStyle === t,
                                                n;
                                            var n
                                        },
                                        style: function () {
                                            return {
                                                background: e.model.color,
                                                "border-color": e.model.color
                                            }
                                        },
                                        "draw-style": e.const(t),
                                        handleevent: r.const("true"),
                                        onTap: function () {
                                            return e.onPointStyleSelected(t)
                                        }
                                    })
                                }))
                            })))
                        }), r.createElement(h, {
                            predicate: function () {
                                return n.length > 0 && !c.isSinglePoint(e.model)
                            }
                        }, function () {
                            return r.createElement("div", {
                                class: r.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")
                            }, r.createElement("div", {
                                class: function () {
                                    return {
                                        "dcg-styles-menu": !0,
                                        "dcg-dividing-line-after": e.controller.getUIDragModesForItem(e.id).length || i
                                    }
                                }
                            }, r.createElement("span", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return e.shouldShowLinesToggle() ? e.controller.t("Lines") : e.controller.t("Style")
                            }), r.createElement(h, {
                                predicate: function () {
                                    return e.shouldShowLinesToggle()
                                }
                            }, function () {
                                return r.createElement(l.default, {
                                    toggled: function () {
                                        return e.getDisplayProps().lines
                                    },
                                    onChange: e.bindFn(e.onToggleLines)
                                })
                            }), r.createElement(h, {
                                predicate: function () {
                                    return e.shouldShowLineStyles()
                                }
                            }, function () {
                                return r.createElement(p, {
                                    each: function () {
                                        return n
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-style-icons")
                                }, function (t) {
                                    return r.createElement("span", {
                                        class: function () {
                                            return n = {
                                                "dcg-style-option": !0,
                                                "dcg-variable-colorcss": !0,
                                                "dcg-graph-icon": !0
                                            },
                                                n[e.getStyleClass(t)] = !0,
                                                n["dcg-selected"] = e.model.lineStyle === t,
                                                n;
                                            var n
                                        },
                                        style: function () {
                                            return {
                                                background: e.model.color,
                                                "border-color": e.model.color
                                            }
                                        },
                                        "draw-style": e.const(t),
                                        handleevent: r.const("true"),
                                        onTap: function () {
                                            return e.onLineStyleSelected(t)
                                        }
                                    })
                                }))
                            })))
                        }), r.createElement(h, {
                            predicate: function () {
                                return e.controller.getUIDragModesForItem(e.id).length > 0
                            }
                        }, function () {
                            return r.createElement("div", {
                                class: r.const("dcg-drag-div dcg-options-menu-section")
                            }, r.createElement("div", {
                                class: r.const("dcg-drag-menu")
                            }, r.createElement("span", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return e.controller.t("Drag")
                            }), r.createElement(l.default, {
                                toggled: function () {
                                    return e.model.reconciledDragMode !== o.NONE
                                },
                                onChange: e.bindFn(e.onToggleDrag)
                            }), r.createElement(h, {
                                predicate: function () {
                                    return e.model.reconciledDragMode !== o.NONE
                                }
                            }, function () {
                                return r.createElement(p, {
                                    each: function () {
                                        return e.controller.getUIDragModesForItem(e.id)
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-style-icons")
                                }, function (t) {
                                    return r.createElement("span", {
                                        class: function () {
                                            return {
                                                "dcg-dragmode-option": !0,
                                                "dcg-graph-icon": !0,
                                                "dcg-variable-colorcss": !0,
                                                "dcg-disabled": e.isDisabled(t),
                                                "dcg-selected": e.getDragMode() === t
                                            }
                                        },
                                        style: function () {
                                            return {
                                                background: e.isDisabled(t) ? f : e.model.color,
                                                "border-color": e.isDisabled(t) ? f : e.model.color
                                            }
                                        },
                                        mode: e.const(t),
                                        onTap: function () {
                                            return e.onDragModeSelected(t)
                                        }
                                    })
                                }))
                            })))
                        }), r.createElement(h, {
                            predicate: function () {
                                return i
                            }
                        }, function () {
                            return r.createElement("div", {
                                class: r.const("dcg-styles-div dcg-options-menu-section")
                            }, r.createElement("div", {
                                class: r.const("dcg-styles-menu")
                            }, r.createElement(u.Checkbox, {
                                checked: function () {
                                    return e.getDisplayProps().fill
                                },
                                onChange: e.bindFn(e.onToggleFill),
                                disabled: e.const(!1),
                                ariaLabel: function () {
                                    return e.controller.t("Fill")
                                }
                            }, function () {
                                return e.controller.t("Fill")
                            })))
                        })), r.createElement("div", {
                            class: r.const("dcg-options-menu-column-right")
                        }, r.createElement("div", {
                            class: r.const("dcg-colors-div dcg-options-menu-section")
                        }, r.createElement("div", {
                            class: r.const("dcg-title")
                        }, function () {
                            return e.controller.t("Color")
                        }), r.createElement(s.default, {
                            controller: function () {
                                return e.props.controller()
                            },
                            selectedColor: function () {
                                return e.model.color
                            },
                            onColorSelected: this.bindFn(this.onColorSelected)
                        }))))
                    }
                    ,
                    t.prototype.onToggleFill = function () {
                        this.controller.dispatch({
                            type: "set-item-fill",
                            id: this.id,
                            fill: !this.getDisplayProps().fill
                        })
                    }
                    ,
                    t.prototype.getStyleClass = function (e) {
                        return "dcg-graph-" + e
                    }
                    ,
                    t.prototype.onColorSelected = function (e) {
                        this.controller.dispatch({
                            type: "set-item-color",
                            id: this.id,
                            color: e
                        })
                    }
                    ,
                    t.prototype.shouldShowLinesToggle = function () {
                        return c.isPointOrPointList(this.model) || c.isParametric(this.model) || c.isPolygon(this.model)
                    }
                    ,
                    t.prototype.shouldShowLineStyles = function () {
                        return this.getDisplayProps().lines || !this.shouldShowLinesToggle()
                    }
                    ,
                    t.prototype.onTogglePoints = function () {
                        this.controller.dispatch({
                            type: "set-item-points",
                            id: this.id,
                            points: !this.getDisplayProps().points
                        })
                    }
                    ,
                    t.prototype.onPointStyleSelected = function (e) {
                        this.model.pointStyle !== e && this.controller.dispatch({
                            type: "set-item-pointstyle",
                            id: this.id,
                            pointStyle: e
                        })
                    }
                    ,
                    t.prototype.onToggleLines = function () {
                        this.controller.dispatch({
                            type: "set-item-lines",
                            id: this.id,
                            lines: !this.getDisplayProps().lines
                        })
                    }
                    ,
                    t.prototype.onLineStyleSelected = function (e) {
                        this.model.lineStyle !== e && this.controller.dispatch({
                            type: "set-item-linestyle",
                            id: this.id,
                            lineStyle: e
                        })
                    }
                    ,
                    t.prototype.isDisabled = function (e) {
                        var t = this.controller.getEnabledDragModesForItem(this.id);
                        return !i.contains(t, e)
                    }
                    ,
                    t.prototype.getDragMode = function () {
                        return this.model.reconciledDragMode || this.model.dragMode
                    }
                    ,
                    t.prototype.getDisplayProps = function () {
                        return a.getReconciledExpressionProps(this.model.formula.expression_type, {
                            points: this.model.points,
                            lines: this.model.lines,
                            fill: this.model.fill
                        })
                    }
                    ,
                    t.prototype.onToggleDrag = function () {
                        var e = this.model.reconciledDragMode !== o.NONE ? o.NONE : o.XY;
                        this.controller.dispatch({
                            type: "set-item-dragmode",
                            id: this.id,
                            dragMode: e
                        })
                    }
                    ,
                    t.prototype.onDragModeSelected = function (e) {
                        this.isDisabled(e) || this.controller.dispatch({
                            type: "set-item-dragmode",
                            id: this.id,
                            dragMode: e
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = m
    }),
    define("expressions/expression_icon_view", ["require", "exports", "lib/aria", "tslib", "dcgview", "./abstract_icon_view", "graphing/dragmode", "expressions/styles", "math/comparators", "jquery", "./expression_options_view", "math/expression-types", "graphing-calc/models/expression", "jquery.handleevent"], function (e, t, n, r, i, o, s, a, c, l, u, d, p) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = i.Components.If
            , f = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e),
                    t.prototype.init = function () {
                        e.prototype.init.call(this),
                            this.model = this.props.model()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return i.createElement("span", {
                            class: function () {
                                return t = {
                                    "dcg-icon": !0,
                                    "dcg-graph-icon": !0,
                                    "tipsy-sticky": !0
                                },
                                    t[e.getIconClass()] = !0,
                                    t;
                                var t
                            },
                            role: i.const("button"),
                            "aria-label": this.bindFn(this.getAriaLabel),
                            tabindex: function () {
                                return e.hasSlider() ? 0 : -1
                            },
                            "aria-hidden": function () {
                                return !e.hasSlider()
                            },
                            tooltip: function () {
                                return e.model.error ? e.controller.unpack(e.model.error) : ""
                            },
                            style: function () {
                                return {
                                    "border-color": e.model.color,
                                    background: e.model.color
                                }
                            },
                            mode: function () {
                                return e.model.reconciledDragMode
                            },
                            didMount: this.bindFn(this.didMountRoot)
                        }, i.createElement(h, {
                            predicate: function () {
                                return e.hasLayeredIcons() && e.model.shouldGraph
                            }
                        }, function () {
                            return i.createElement("div", {
                                class: i.const("dcg-layered-icons-container")
                            }, i.createElement("i", {
                                class: function () {
                                    return t = {},
                                        t[e.getLayeredIconFillClass()] = !0,
                                        t;
                                    var t
                                }
                            }), i.createElement("i", {
                                class: function () {
                                    return t = {},
                                        t[e.getLayeredIconLineClass()] = !0,
                                        t;
                                    var t
                                }
                            }))
                        }), i.createElement("i", {
                            class: i.const("dcg-icon-play")
                        }), i.createElement("i", {
                            class: i.const("dcg-icon-pause")
                        }), i.createElement("i", {
                            class: i.const("dcg-icon-hidden")
                        }))
                    }
                    ,
                    t.prototype.didMountRoot = function (e) {
                        var t = this;
                        this.rootElt = e,
                            l(e).closest(".dcg-action-icon-mouse").on("dcg-tap", function (e) {
                                t.handleIconTapped(e, "mouse")
                            }),
                            l(e).closest(".dcg-action-icon-touch").on("dcg-tap", function (e) {
                                t.handleIconTapped(e, "touch")
                            }),
                            l(e).on("dcg-tap", function (e) {
                                t.handleIconTapped(e, "keyboard")
                            }),
                            l(e).closest(".dcg-action-icon-mouse").on("dcg-longhold", function (e) {
                                t.handleIconLongHold(e, "mouse")
                            }),
                            l(e).closest(".dcg-action-icon-touch").on("dcg-longhold", function (e) {
                                t.handleIconLongHold(e, "touch")
                            })
                    }
                    ,
                    t.prototype.createOptionsMenuView = function () {
                        var e = this.getOptionsMenuContainerSelector()
                            , t = i.mountToNode(u.default, e[0], {
                                controller: this.props.controller,
                                model: this.props.model
                            });
                        return t
                    }
                    ,
                    t.prototype.handleIconTapped = function (e, t) {
                        if (e.device === t) {
                            if ("keyboard" !== t) {
                                if (e.wasHandled("dragdrop"))
                                    return;
                                if (e.wasLongheld())
                                    return
                            }
                            return this.optionsShown ? (this.toggleOptions(),
                                !1) : (this.controller.isInEditListMode() ? this.model.isGraphable && this.toggleOptions() : this.model.formula.is_animatable ? this.toggleSliderIsPlaying() : this.toggleGraphShown(),
                                    !0)
                        }
                    }
                    ,
                    t.prototype.handleIconLongHold = function (e, t) {
                        e.device === t && this.model.isGraphable && (e.handle("dcg-longhold"),
                            this.toggleOptions())
                    }
                    ,
                    t.prototype.toggleSliderIsPlaying = function () {
                        if (this.model.sliderExists) {
                            this.controller.dispatch({
                                type: "set-slider-isplaying",
                                id: this.model.id,
                                isPlaying: !this.model.slider.isPlaying
                            });
                            var e = ""
                                , t = this.model.dependent;
                            e = this.model.slider.isPlaying ? this.controller.t("__variable__ playing", {
                                variable: t
                            }) : this.controller.t("__variable__ paused", {
                                variable: t
                            }),
                                n.alert(e)
                        }
                    }
                    ,
                    t.prototype.toggleGraphShown = function () {
                        this.model.isGraphable && (this.hasError() || this.controller.dispatch({
                            type: "toggle-item-hidden",
                            id: this.model.id
                        }))
                    }
                    ,
                    t.prototype.getAriaLabel = function () {
                        if (!this.model.sliderExists)
                            return "";
                        var e = this.model.dependent;
                        return e ? this.model.slider.isPlaying ? this.controller.t("Pause __variable__ Animation", {
                            variable: e
                        }) : this.controller.t("Play __variable__ Animation", {
                            variable: e
                        }) : ""
                    }
                    ,
                    t.prototype.hasError = function () {
                        return !!this.model.error && !p.isEmpty(this.model)
                    }
                    ,
                    t.prototype.hasSlider = function () {
                        return !!this.model.sliderExists
                    }
                    ,
                    t.prototype.getDisplayProps = function () {
                        return d.getReconciledExpressionProps(this.model.formula.expression_type, {
                            points: this.model.points,
                            lines: this.model.lines,
                            fill: this.model.fill
                        })
                    }
                    ,
                    t.prototype.getIconClass = function () {
                        if (this.model.loading)
                            return "dcg-loading";
                        if (this.hasStableError())
                            return "dcg-error";
                        var e = this.model.formula;
                        if (e.is_animatable && this.model.sliderExists)
                            return this.model.slider.isPlaying ? "dcg-animate-pause" : "dcg-animate-play";
                        if (!e.is_graphable)
                            return "dcg-ungraphable";
                        if (!this.model.shouldGraph)
                            return "dcg-graph-hidden";
                        if (this.model.reconciledDragMode !== s.NONE)
                            return "dcg-graph-movable-point";
                        if (this.hasLayeredIcons())
                            return "";
                        var t = this.model.pointStyle
                            , n = this.model.lineStyle
                            , r = this.getDisplayProps();
                        if (p.isPointOrPointList(this.model))
                            return p.isSinglePoint(this.model) ? t === a.OPEN ? "dcg-graph-OPEN" : t === a.CROSS ? "dcg-graph-CROSS" : "dcg-graph-POINT" : r.lines && r.points ? "dcg-table-points-and-lines" : r.lines ? "dcg-table-lines" : "dcg-table-points";
                        if (e.is_shade_between)
                            return "dcg-graph-shaded-inequality";
                        var i = e.operator
                            , o = 0 !== c.table[i].direction
                            , l = c.table[i].inclusive === !1;
                        return l || o ? !l && o ? "dcg-graph-shaded-inequality" : l && !o ? "graph-inequality" : l && o ? "dcg-graph-shaded-inequality" : "" : n === a.DASHED ? "dcg-graph-DASHED" : n === a.DOTTED ? "dcg-graph-DOTTED" : "dcg-graph-SOLID"
                    }
                    ,
                    t.prototype.hasLayeredIcons = function () {
                        return p.isPolygon(this.model) || p.isParametric(this.model)
                    }
                    ,
                    t.prototype.getLayeredIconLineClass = function () {
                        var e = this.model.lineStyle
                            , t = this.getDisplayProps();
                        if (!t.lines)
                            return "";
                        var n;
                        if (p.isPolygon(this.model))
                            n = "polygon";
                        else {
                            if (!p.isParametric(this.model))
                                return "";
                            n = "parametric"
                        }
                        return e === a.DASHED ? "dcg-icon-" + n + "-dashed" : e === a.DOTTED ? "dcg-icon-" + n + "-dotted" : "dcg-icon-" + n + "-solid"
                    }
                    ,
                    t.prototype.getLayeredIconFillClass = function () {
                        return this.getDisplayProps().fill ? p.isPolygon(this.model) ? "dcg-icon-polygon-filled" : p.isParametric(this.model) ? "dcg-icon-parametric-filled" : "" : ""
                    }
                    ,
                    t
            }(o.default);
        t.default = f
    }),
    define("dcgview-helpers/number-view", ["require", "exports", "tslib", "dcgview"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.Switch
            , o = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement(i, {
                            key: function () {
                                return e.props.numberLabel().type
                            }
                        }, function (t) {
                            switch (t) {
                                case "undefined":
                                    return r.createElement("span", null, r.const("undefined"));
                                case "decimal":
                                    return r.createElement("span", null, function () {
                                        return e.props.numberLabel().value
                                    });
                                case "scientific":
                                    return r.createElement("span", null, function () {
                                        return e.props.numberLabel().mantissa
                                    }, r.createElement("span", {
                                        class: r.const("dcg-cross")
                                    }, r.const("")), r.const("10"), r.createElement("sup", null, function () {
                                        return e.props.numberLabel().exponent
                                    }));
                                default:
                                    var n = t;
                                    return n
                            }
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = o
    }),
    define("dcgview-helpers/static-mathquill-view", ["require", "exports", "tslib", "dcgview", "vendor/mathquill"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return 1 === this.children.length ? this.children[0] : r.createElement("div", {
                        didMount: function (t) {
                            return e.didMountMathquill(t)
                        }
                    })
                }
                ,
                t.prototype.didMount = function () {
                    1 === this.children.length && this.didMountMathquill(this.findRootNode())
                }
                ,
                t.prototype.didMountMathquill = function (e) {
                    this.staticMath = i.MQ.StaticMath(e),
                        this.updateMathquill()
                }
                ,
                t.prototype.didUpdate = function () {
                    this.updateMathquill()
                }
                ,
                t.prototype.updateMathquill = function () {
                    this.updateMathquillAria(),
                        this.updateMathquillLatex()
                }
                ,
                t.prototype.updateMathquillLatex = function () {
                    if (this.staticMath) {
                        var e = this.props.latex();
                        this.lastLatex !== e && (this.staticMath.latex(e),
                            this.lastLatex = e,
                            this.props.onReflow && this.props.onReflow())
                    }
                }
                ,
                t.prototype.updateMathquillAria = function () {
                    if (this.staticMath && this.props.getAriaLabel) {
                        var e = this.props.getAriaLabel();
                        e !== this.staticMath.getAriaLabel() && this.staticMath.setAriaLabel(e)
                    }
                }
                ,
                t
        }(r.Class);
        t.default = o
    }),
    define("expressions/evaluation_view", ["require", "exports", "tslib", "dcgview", "graphing/label", "dcgview-helpers/number-view", "dcgview-helpers/static-mathquill-view"], function (e, t, n, r, i, o, s) {
        "use strict";
        function a(e, t) {
            return i.numericLabel(e, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components.Switch
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement("div", null, r.createElement("div", {
                            class: r.const("dcg-evaluation dcg-do-blur"),
                            handleEvent: r.const("true")
                        }, r.createElement("div", {
                            class: r.const("dcg-evaluation-label-container"),
                            onTap: this.bindFn(this.onSelectEvaluation)
                        }, r.createElement(s.default, {
                            latex: function () {
                                return i.identifierToLatex(e.props.dependent())
                            }
                        }, r.createElement("span", null)), r.createElement("span", {
                            class: r.const("dcg-equals")
                        }, r.const("="))), r.createElement("span", {
                            class: r.const("dcg-text-selectable dcg-evaluation-html"),
                            didMount: this.bindFn(this.didMountEvaluation)
                        }, r.createElement(c, {
                            key: function () {
                                return Array.isArray(e.props.val())
                            }
                        }, function (t) {
                            return t ? r.createElement("span", null, function () {
                                return e.props.val().length
                            }, r.const(" element list")) : r.createElement(o.default, {
                                numberLabel: function () {
                                    return a(e.props.val(), e.props.labelOptions())
                                }
                            })
                        }))), r.createElement("div", {
                            class: r.const("dcg-clear")
                        }))
                    }
                    ,
                    t.prototype.didMountEvaluation = function (e) {
                        this.evaluationNode = e
                    }
                    ,
                    t.prototype.onSelectEvaluation = function () {
                        var e = document.createRange();
                        e.selectNodeContents(this.evaluationNode),
                            window.getSelection().removeAllRanges(),
                            window.getSelection().addRange(e)
                    }
                    ,
                    t
            }(r.Class);
        t.default = l
    }),
    define("expressions/unresolved_view", ["require", "exports", "tslib", "dcgview"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return this.controller = this.props.controller(),
                        r.createElement("div", {
                            class: r.const("dcg-unresolved")
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-error")
                        }), r.const(""), function () {
                            return e.controller.t("This equation contains fine detail that has not been fully resolved.")
                        }, r.createElement("a", {
                            href: r.const("http://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),
                            target: r.const("_blank")
                        }, function () {
                            return e.controller.t("Learn more.")
                        }))
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!domain", function () { }),
    define("expressions/domain_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "loadcss!domain"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    this.controller = this.props.controller(),
                        this.model = this.props.model(),
                        this.id = this.model.id
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-domain dcg-do-blur"),
                        handleEvent: r.const("true")
                    }, r.createElement("div", {
                        class: r.const("dcg-display-domain dcg-do-blur dcg-desmos-input-container"),
                        handleEvent: r.const("true")
                    }, r.createElement("div", {
                        class: r.const("dcg-editable-mathquill-container")
                    }, r.createElement(o.default, {
                        latex: function () {
                            return e.getMinLatex()
                        },
                        isFocused: function () {
                            return "min" === e.getFocusedInput()
                        },
                        selectOnFocus: this.const(!0),
                        config: this.const({}),
                        getAriaLabel: function () {
                            return e.controller.t("domain Minimum: ")
                        },
                        getAriaPostLabel: this.const(""),
                        hasError: this.const(!1),
                        onUserChangedLatex: function (t) {
                            return e.dispatchMinLatexIfChanged(t)
                        },
                        onFocusedChanged: function (t) {
                            return e.handleFocusedChanged("min", t)
                        }
                    }, r.createElement("span", {
                        "data-dcg-limit": r.const("min"),
                        class: function () {
                            return {
                                "dcg-math-field": !0,
                                "dcg-focus": "min" === e.getFocusedInput(),
                                "dcg-invalid": !e.model.isDomainMinValid
                            }
                        }
                    })), r.createElement("span", {
                        class: r.const("dcg-interval-interior")
                    }, r.createElement(i.default, {
                        latex: this.const(" \\le t \\le ")
                    }, r.createElement("span", null))), r.createElement(o.default, {
                        latex: function () {
                            return e.getMaxLatex()
                        },
                        isFocused: function () {
                            return "max" === e.getFocusedInput()
                        },
                        selectOnFocus: this.const(!0),
                        config: this.const({}),
                        getAriaLabel: function () {
                            return e.controller.t("domain Maximum: ")
                        },
                        getAriaPostLabel: this.const(""),
                        hasError: this.const(!1),
                        onUserChangedLatex: function (t) {
                            return e.dispatchMaxLatexIfChanged(t)
                        },
                        onFocusedChanged: function (t) {
                            return e.handleFocusedChanged("max", t)
                        }
                    }, r.createElement("span", {
                        class: function () {
                            return {
                                "dcg-math-field": !0,
                                "dcg-focus": "max" === e.getFocusedInput(),
                                "dcg-invalid": !e.model.isDomainMaxValid
                            }
                        },
                        "data-dcg-limit": r.const("max")
                    })))))
                }
                ,
                t.prototype.handleFocusedChanged = function (e, t) {
                    t ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "domain-limit",
                            id: this.id,
                            location: e
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "domain-limit",
                            id: this.id,
                            location: e
                        }
                    }),
                        clearTimeout(this.focusedOutRecentlyTimeout);
                    var n = this;
                    this.focusedOutRecentlyTimeout = setTimeout(function () {
                        void 0 === n.getFocusedInput() && n.controller.dispatch({
                            type: "set-last-valid-domain",
                            id: n.id
                        })
                    })
                }
                ,
                t.prototype.dispatchMinLatexIfChanged = function (e) {
                    this.getMinLatex() !== e && this.controller.dispatch({
                        type: "set-domain-minlatex",
                        id: this.id,
                        latex: e
                    })
                }
                ,
                t.prototype.dispatchMaxLatexIfChanged = function (e) {
                    this.getMaxLatex() !== e && this.controller.dispatch({
                        type: "set-domain-maxlatex",
                        id: this.id,
                        latex: e
                    })
                }
                ,
                t.prototype.getFocusedInput = function () {
                    var e = this.controller.getFocusLocation();
                    if (e && "domain-limit" === e.type && e.id === this.id)
                        return e.location
                }
                ,
                t.prototype.getMinLatex = function () {
                    return this.model.domain.min
                }
                ,
                t.prototype.getMaxLatex = function () {
                    return this.model.domain.max
                }
                ,
                t
        }(r.Class);
        t.default = s
    }),
    define("loadcss!regression", function () { }),
    define("expressions/regression_view", ["require", "exports", "tslib", "dcgview", "graphing/label", "dcgview-helpers/static-mathquill-view", "loadcss!regression"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components
            , a = s.If
            , c = s.For
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.id = this.model.id,
                            r.createElement(a, {
                                predicate: this.bindFn(this.getRegression)
                            }, function () {
                                return r.createElement("div", {
                                    class: r.const("dcg-regression-container")
                                }, r.createElement("div", {
                                    class: r.const("dcg-handle-event"),
                                    handleEvent: r.const("true")
                                }, r.createElement(a, {
                                    predicate: e.bindFn(e.getShouldSuggestLogMode)
                                }, function () {
                                    return r.createElement("div", {
                                        class: r.const("dcg-log-mode-toggle")
                                    }, r.createElement("div", {
                                        class: function () {
                                            return {
                                                "dcg-action-log-mode-toggle": !0,
                                                "dcg-toggled-on": e.getIsLogModeRegression()
                                            }
                                        },
                                        onTap: e.bindFn(e.onTapLogMode)
                                    }, r.createElement("span", {
                                        class: r.const("dcg-log-mode-checkbox"),
                                        role: r.const("checkbox"),
                                        "aria-checked": function () {
                                            return e.getIsLogModeRegression()
                                        },
                                        tabindex: r.const("0"),
                                        "aria-label": function () {
                                            return e.controller.t("Log Mode")
                                        }
                                    }, r.createElement("i", {
                                        class: r.const("dcg-icon-check")
                                    })), function () {
                                        return e.controller.t("Log Mode")
                                    }), r.createElement("a", {
                                        "aria-label": function () {
                                            return e.controller.t("Log Mode Help")
                                        },
                                        class: r.const("dcg-log-mode-toggle-help"),
                                        target: r.const("_blank"),
                                        href: r.const("http://support.desmos.com/hc/en-us/articles/204349605")
                                    }, r.createElement("i", {
                                        class: r.const("dcg-icon-question-sign")
                                    })))
                                }), r.createElement("div", {
                                    class: r.const("dcg-statistics"),
                                    role: r.const("group"),
                                    "aria-label": function () {
                                        return e.controller.t("Statistics")
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-regression-title dcg-residuals-title")
                                }, function () {
                                    return e.controller.t("Statistics")
                                }, r.const(""), r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.hasOwnProperty("RMSE")
                                    }
                                }, function () {
                                    return r.createElement("a", {
                                        class: r.const("dcg-regression-about-link"),
                                        target: r.const("_blank"),
                                        href: r.const("http://support.desmos.com/entries/60176149-What-is-RMSE-"),
                                        "aria-label": function () {
                                            return e.controller.t("What is RMSE?")
                                        }
                                    }, r.createElement("i", {
                                        class: r.const("dcg-icon-question-sign")
                                    }))
                                }), r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.Rsquared < 0
                                    }
                                }, function () {
                                    return r.createElement("a", {
                                        "aria-label": function () {
                                            return e.controller.t("Why am I seeing a negative R Squared value?")
                                        },
                                        class: r.const("dcg-regression-about-link"),
                                        target: r.const("_blank"),
                                        href: r.const("http://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")
                                    }, r.createElement("i", {
                                        class: r.const("dcg-icon-question-sign")
                                    }))
                                })), r.createElement("div", {
                                    class: r.const("dcg-statistics-values")
                                }, r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.hasOwnProperty("Rsquared")
                                    }
                                }, function () {
                                    return r.createElement("div", null, r.createElement(o.default, {
                                        latex: function () {
                                            return "R^2=" + e.getRoundedStat("Rsquared")
                                        }
                                    }, r.createElement("span", {
                                        tabindex: r.const("0")
                                    })))
                                }), r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.hasOwnProperty("rsquared")
                                    }
                                }, function () {
                                    return r.createElement("div", null, r.createElement(o.default, {
                                        latex: function () {
                                            return "r^2=" + e.getRoundedStat("rsquared")
                                        }
                                    }, r.createElement("span", {
                                        tabindex: r.const("0")
                                    })))
                                }), r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.hasOwnProperty("r")
                                    }
                                }, function () {
                                    return r.createElement("div", null, r.createElement(o.default, {
                                        latex: function () {
                                            return "r=" + e.getRoundedStat("r")
                                        }
                                    }, r.createElement("span", {
                                        class: r.const("dcg-r-value"),
                                        tabindex: r.const("0")
                                    })))
                                }), r.createElement(a, {
                                    predicate: function () {
                                        return e.getRegression().statistics.hasOwnProperty("RMSE")
                                    }
                                }, function () {
                                    return r.createElement("div", null, r.createElement(o.default, {
                                        latex: function () {
                                            return "\\operatorname{RMSE}=" + e.getRoundedStat("RMSE")
                                        }
                                    }, r.createElement("span", {
                                        tabindex: r.const("0")
                                    })))
                                }))), r.createElement("div", {
                                    role: r.const("group"),
                                    "aria-label": function () {
                                        return e.controller.t("Residuals")
                                    },
                                    class: r.const("dcg-residuals")
                                }, r.createElement("div", {
                                    class: r.const("dcg-regression-title dcg-residuals-title")
                                }, function () {
                                    return e.controller.t("Residuals")
                                }), r.createElement(o.default, {
                                    latex: e.bindFn(e.getResidualVariable)
                                }, r.createElement("span", {
                                    class: r.const("dcg-residuals-variable"),
                                    tabindex: r.const("0")
                                })), r.createElement("div", {
                                    class: function () {
                                        return {
                                            "dcg-residual-suggestion": !0,
                                            "dcg-action-plot-residual": !0,
                                            "dcg-btn": !0,
                                            "dcg-btn-light-gray": !0,
                                            "dcg-visible": e.getResidualSuggestionVisible()
                                        }
                                    },
                                    "aria-hidden": function () {
                                        return !e.getResidualSuggestionVisible()
                                    },
                                    role: r.const("button"),
                                    tabindex: function () {
                                        return e.getResidualSuggestionVisible() ? "0" : void 0
                                    },
                                    onTap: e.bindFn(e.onTapResidualsSuggestion)
                                }, function () {
                                    return e.controller.t("plot")
                                })), r.createElement(a, {
                                    predicate: function () {
                                        return Object.keys(e.getRegression().parameters).length > 0
                                    }
                                }, function () {
                                    return r.createElement("div", {
                                        class: r.const("dcg-parameters-container")
                                    }, r.createElement("div", {
                                        class: r.const("dcg-regression-title dcg-parameters-title")
                                    }, function () {
                                        return e.controller.t("Parameters")
                                    }), r.createElement(c, {
                                        each: function () {
                                            return Object.keys(e.getRegression().parameters)
                                        }
                                    }, r.createElement("div", {
                                        role: r.const("group"),
                                        "aria-label": function () {
                                            return e.controller.t("Parameters")
                                        },
                                        class: r.const("dcg-parameters")
                                    }, function (t) {
                                        return r.createElement(o.default, {
                                            latex: function () {
                                                return t + "=" + e.getRoundedParam(t)
                                            }
                                        }, r.createElement("span", {
                                            class: r.const("dcg-parameter"),
                                            tabindex: r.const("0")
                                        }))
                                    })))
                                }), r.createElement("div", {
                                    class: r.const("dcg-clear")
                                })))
                            })
                    }
                    ,
                    t.prototype.onTapResidualsSuggestion = function () {
                        this.controller.dispatch({
                            type: "plot-residuals",
                            id: this.id
                        })
                    }
                    ,
                    t.prototype.onTapLogMode = function () {
                        this.controller.dispatch({
                            type: "toggle-logmode",
                            id: this.id
                        })
                    }
                    ,
                    t.prototype.getRegression = function () {
                        return this.model.formula.regression
                    }
                    ,
                    t.prototype.getResidualVariable = function () {
                        return this.getRegression().residualVariable || ""
                    }
                    ,
                    t.prototype.getResidualSuggestionVisible = function () {
                        return void 0 !== this.getRegression().residualSuggestionId
                    }
                    ,
                    t.prototype.getShouldSuggestLogMode = function () {
                        return !!this.getRegression().shouldSuggestLogMode
                    }
                    ,
                    t.prototype.getIsLogModeRegression = function () {
                        return !!this.model.isLogModeRegression
                    }
                    ,
                    t.prototype.getRoundedParam = function (e) {
                        return i.truncatedLatexLabel(this.getRegression().parameters[e], {
                            zeroCutoff: 1e-15,
                            digits: 6,
                            smallCutoff: 1e-6,
                            bigCutoff: 1e9
                        })
                    }
                    ,
                    t.prototype.getRoundedStat = function (e) {
                        return i.truncatedLatexLabel(this.getRegression().statistics[e], {
                            zeroCutoff: 1e-15,
                            digits: 4,
                            smallCutoff: 1e-6,
                            bigCutoff: 1e9
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = l
    }),
    function () {
        define("dcgview-helpers/dragdrop", ["require", "underscore", "underscore_model", "jquery", "pjs", "lib/animation-frame"], function (e) {
            var t, n, r, i, o;
            return o = e("underscore"),
                i = e("underscore_model"),
                t = e("jquery"),
                r = e("pjs"),
                n = e("lib/animation-frame"),
                r(i, function (e, r) {
                    return {
                        init: function (e) {
                            return this.options = null != e ? e : {},
                                r.init.call(this),
                                this.dragging = !1
                        },
                        _evt2pt: function (e) {
                            return {
                                x: e.changedTouches[0].pageX - this._offsetPt.x,
                                y: e.changedTouches[0].pageY - this._offsetPt.y
                            }
                        },
                        _dispatch: function (e, t) {
                            var n;
                            if (!this._destroyed)
                                return n = this._evt2pt(t),
                                    this.triggerEvent(e, {
                                        x: n.x,
                                        y: n.y,
                                        dx: n.x - this._startPt.x,
                                        dy: n.y - this._startPt.y,
                                        evt: t
                                    })
                        },
                        destroy: function () {
                            return t(document).off("." + this.guid),
                                this._destroyed = !0
                        },
                        startDrag: function (e, r) {
                            if (null == r && (r = {}),
                                !this.dragging)
                                return t(document).on("dcg-tapmove." + this.guid, function (e) {
                                    return function (t) {
                                        return t.originalEvent.preventDefault(),
                                            e.options.doNotThrottle ? void e.doDrag(t) : (n.cancelAnimationFrame(e.frameThrottle),
                                                e.frameThrottle = n.requestAnimationFrame(function () {
                                                    return e.doDrag(t)
                                                }))
                                    }
                                }(this)),
                                    t(document).on("dcg-tapend." + this.guid + " dcg-tapcancel." + this.guid, function (e) {
                                        return function (t) {
                                            return e.endDrag(t)
                                        }
                                    }(this)),
                                    this._offsetPt = {
                                        x: 0,
                                        y: 0
                                    },
                                    null != r.origin && (this._offsetPt = {
                                        x: this._evt2pt(e).x - r.origin.x,
                                        y: this._evt2pt(e).y - r.origin.y
                                    }),
                                    this._startPt = this._evt2pt(e),
                                    this.setProperty("dragging", !0),
                                    this._dispatch("onGrab", e)
                        },
                        doDrag: function (e) {
                            if (this.dragging)
                                return this._dispatch("onDrag", e)
                        },
                        endDrag: function (e) {
                            if (this.dragging)
                                return t(document).off("." + this.guid),
                                    this.doDrag(e),
                                    this.setProperty("dragging", !1),
                                    this._dispatch("onDrop", e)
                        }
                    }
                })
        })
    }
        .call(this),
    define("dcgview-helpers/slider", ["require", "exports", "./dragdrop", "keys", "lib/rounding", "tslib", "dcgview", "jquery", "lib/conditional_blur"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        function l(e, t, n) {
            return Math.min(Math.max(e, t), n)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = s.Components.If
            , d = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return o.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            class: s.const("dcg-slider-interior"),
                            didMount: this.bindFn(this.didMountRoot),
                            onTapStart: this.bindFn(this.onStartDrag),
                            style: s.const({
                                "touch-action": "none"
                            })
                        }, s.createElement("div", {
                            class: s.const("dcg-track")
                        }, s.createElement("div", {
                            class: s.const("dcg-ticks"),
                            onMount: this.bindFn(this.didMountTickMarks)
                        }), s.createElement("div", {
                            class: s.const("dcg-graphic")
                        })), s.createElement(u, {
                            predicate: this.bindFn(this.shouldShowZeroMarker)
                        }, function () {
                            return s.createElement("div", {
                                class: s.const("dcg-zeroMarker"),
                                style: function () {
                                    return {
                                        left: e.getZeroMarkerPercent() + "%"
                                    }
                                }
                            })
                        }), s.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-thumb": !0,
                                    "dcg-down": e.isDragging
                                }
                            },
                            role: s.const("slider"),
                            tabindex: s.const("0"),
                            disablescroll: s.const("true"),
                            style: function () {
                                return {
                                    left: e.getThumbPercent() + "%"
                                }
                            },
                            onKeyDown: this.bindFn(this.onKeyDown),
                            "aria-label": this.props.ariaLabel,
                            "aria-minvalue": this.props.min,
                            "aria-maxvalue": this.props.max,
                            "aria-valuenow": this.props.value
                        }, s.createElement("div", {
                            class: s.const("dcg-graphic")
                        }), s.createElement("div", {
                            class: s.const("dcg-center")
                        })))
                    }
                    ,
                    t.prototype.willUnmount = function () {
                        this.dragDrop.destroy()
                    }
                    ,
                    t.prototype.didMountRoot = function (e) {
                        var t = this;
                        this.rootNode = e,
                            this.dragDrop = n(),
                            this.isMounted = !0,
                            this.dragDrop.observeEvent("onDrop", function () {
                                t.isDragging = !1,
                                    t.props.onDrop()
                            }),
                            this.dragDrop.observeEvent("onGrab", function () {
                                t.isDragging = !0,
                                    t.props.onGrab()
                            }),
                            this.dragDrop.observeEvent("onDrag", function (e, n) {
                                t.props.onDragUpdate(t.valueFromPixels(n.x))
                            })
                    }
                    ,
                    t.prototype.didMountTickMarks = function (e) {
                        this.tickMarksNode = e,
                            this.renderTickMarks()
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        this.renderTickMarks()
                    }
                    ,
                    t.prototype.renderTickMarks = function () {
                        if (this.tickMarksNode) {
                            var e, t = this.props.step(), n = this.props.min(), r = this.props.max();
                            if (e = void 0 === t ? 0 : 100 * t / (r - n),
                                e < 3 && (e = 0),
                                e > 100 && (e = 0),
                                isNaN(e) && (e = 0),
                                this.lastTickMarksPercent !== e) {
                                this.lastTickMarksPercent = e;
                                var i = "";
                                if (e > 0 && e < 100)
                                    for (var o = e; o < 100; o += e)
                                        i += '<div class="dcg-tick" style="left:' + o + '%"></div>';
                                this.tickMarksNode.innerHTML = i
                            }
                        }
                    }
                    ,
                    t.prototype.shouldShowZeroMarker = function () {
                        return this.props.min() <= 0 && this.props.max() >= 0
                    }
                    ,
                    t.prototype.getZeroMarkerPercent = function () {
                        var e = this.props.min()
                            , t = this.props.max();
                        return 100 * (0 - e) / (t - e)
                    }
                    ,
                    t.prototype.getThumbPercent = function () {
                        return 100 * this.percentFromValue(this.props.value())
                    }
                    ,
                    t.prototype.valueFromPixels = function (e) {
                        if (!this.isMounted)
                            return 0;
                        var t = this.props.min()
                            , n = this.props.max()
                            , r = this.rootNode.getBoundingClientRect().width
                            , o = l(e / r, 0, 1)
                            , s = t + (n - t) * o
                            , a = (n - t) / r;
                        return i.shortestDecimalBetween(s - a, s + a)
                    }
                    ,
                    t.prototype.percentFromValue = function (e) {
                        var t = this.props.min()
                            , n = this.props.max();
                        return l((e - t) / (n - t), 0, 1)
                    }
                    ,
                    t.prototype.pixelsFromValue = function (e) {
                        if (!this.isMounted)
                            return 0;
                        var t = this.percentFromValue(e);
                        return this.rootNode.getBoundingClientRect().width * t
                    }
                    ,
                    t.prototype.onKeyDown = function (e) {
                        switch (r.lookup(e)) {
                            case r.ENTER:
                            case r.ESCAPE:
                                c.default();
                                break;
                            case r.LEFT:
                            case r.DOWN:
                                this.props.onKeyboardUpdate("down"),
                                    e.preventDefault();
                                break;
                            case r.RIGHT:
                            case r.UP:
                                this.props.onKeyboardUpdate("up"),
                                    e.preventDefault();
                                break;
                            case r.PAGEDOWN:
                                this.props.onKeyboardUpdate("bigdown"),
                                    e.preventDefault();
                                break;
                            case r.PAGEUP:
                                this.props.onKeyboardUpdate("bigup"),
                                    e.preventDefault();
                                break;
                            case r.HOME:
                                this.props.onKeyboardUpdate("min"),
                                    e.preventDefault();
                                break;
                            case r.END:
                                this.props.onKeyboardUpdate("max"),
                                    e.preventDefault()
                        }
                    }
                    ,
                    t.prototype.onStartDrag = function (e) {
                        if ("keyboard" !== e.device) {
                            e.preventDefault(),
                                c.default();
                            var t = {
                                x: 0,
                                y: 0
                            };
                            1 === a(e.target).closest(".dcg-thumb").length ? t.x = this.pixelsFromValue(this.props.value()) : t.x = e.changedTouches[0].clientX - this.rootNode.getBoundingClientRect().left,
                                this.dragDrop.startDrag(e, {
                                    origin: t
                                })
                        }
                    }
                    ,
                    t
            }(s.Class);
        t.default = d
    }),
    define("expressions/slider_limits_view", ["require", "exports", "tslib", "lib/conditional_blur", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "graphing-calc/models/expression", "graphing/label"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return this.controller = this.props.controller(),
                        this.model = this.props.model(),
                        this.id = this.model.id,
                        this.proposedLatex = {
                            min: this.model.slider.hardMin ? this.model.slider.min : "",
                            max: this.model.slider.hardMax ? this.model.slider.max : "",
                            step: this.model.slider.step
                        },
                        i.createElement("div", {
                            class: i.const("dcg-slider_menu dcg-do-blur dcg-desmos-input-container"),
                            handleEvent: i.const("true")
                        }, i.createElement("div", {
                            class: i.const("dcg-editable-mathquill-container")
                        }, i.createElement(s.default, {
                            latex: function () {
                                return e.proposedLatex.min
                            },
                            isFocused: function () {
                                return "min" === e.getFocusedInput()
                            },
                            selectOnFocus: this.const(!0),
                            config: this.const({}),
                            getAriaLabel: function () {
                                return e.controller.t("Slider Minimum: ")
                            },
                            getAriaPostLabel: this.const(""),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey("min", t, n)
                            },
                            onUserChangedLatex: function (t) {
                                return e.handleLatexChanged("min", t)
                            },
                            onFocusedChanged: function (t) {
                                return e.handleFocusedChanged("min", t)
                            }
                        }, i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-math-field": !0,
                                    "dcg-focus": "min" === e.getFocusedInput(),
                                    "dcg-invalid": !e.isLimitValid("min")
                                }
                            },
                            "data-dcg-limit": i.const("slidermin")
                        })), i.createElement("span", {
                            class: i.const("dcg-interval-interior")
                        }, i.createElement(o.default, {
                            latex: this.bindFn(this.getDependentLatex)
                        }, i.createElement("span", null))), i.createElement(s.default, {
                            latex: function () {
                                return e.proposedLatex.max
                            },
                            isFocused: function () {
                                return "max" === e.getFocusedInput()
                            },
                            selectOnFocus: this.const(!0),
                            config: this.const({}),
                            getAriaLabel: function () {
                                return e.controller.t("Slider Maximum: ")
                            },
                            getAriaPostLabel: this.const(""),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey("max", t, n)
                            },
                            onUserChangedLatex: function (t) {
                                return e.handleLatexChanged("max", t)
                            },
                            onFocusedChanged: function (t) {
                                return e.handleFocusedChanged("max", t)
                            }
                        }, i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-math-field": !0,
                                    "dcg-focus": "max" === e.getFocusedInput(),
                                    "dcg-invalid": !e.isLimitValid("max")
                                }
                            },
                            "data-dcg-limit": i.const("slidermax")
                        })), i.createElement("span", {
                            class: i.const("dcg-slider-step-container")
                        }, i.createElement("span", {
                            class: i.const("dcg-slider-step-label"),
                            "aria-hidden": i.const("true")
                        }, function () {
                            return e.controller.t("step:")
                        }), i.createElement(s.default, {
                            latex: function () {
                                return e.proposedLatex.step
                            },
                            isFocused: function () {
                                return "step" === e.getFocusedInput()
                            },
                            selectOnFocus: this.const(!0),
                            config: this.const({}),
                            getAriaLabel: function () {
                                return e.controller.t("Slider Step Size: ")
                            },
                            getAriaPostLabel: this.const(""),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey("step", t, n)
                            },
                            onUserChangedLatex: function (t) {
                                return e.handleLatexChanged("step", t)
                            },
                            onFocusedChanged: function (t) {
                                return e.handleFocusedChanged("step", t)
                            }
                        }, i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-math-field": !0,
                                    "dcg-focus": "step" === e.getFocusedInput(),
                                    "dcg-invalid": !e.isLimitValid("step")
                                }
                            },
                            "data-dcg-limit": i.const("sliderstep")
                        })))))
                }
                ,
                t.prototype.handlePressedKey = function (e, t, n) {
                    if ("Enter" === t)
                        return void r.default();
                    var i = s.default.getFocusedMathquill();
                    i && (i.keystroke(t, n),
                        this.handleLatexChanged(e, i.latex()))
                }
                ,
                t.prototype.handleLatexChanged = function (e, t) {
                    this.proposedLatex[e] = t,
                        this.update()
                }
                ,
                t.prototype.handleFocusedChanged = function (e, t) {
                    var n = this;
                    t && this.getFocusedInput() !== e && this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "slider-limit",
                            id: this.id,
                            location: e
                        }
                    }),
                        t ? clearTimeout(this.saveAfterBlurTimeout) : (this.saveAfterBlurTimeout = setTimeout(function () {
                            clearTimeout(n.saveAfterBlurTimeout),
                                n.getFocusedInput() === e && n.controller.dispatch({
                                    type: "blur-focus-location",
                                    location: {
                                        type: "slider-limit",
                                        id: n.id,
                                        location: e
                                    }
                                }),
                                n.onClose()
                        }, 1),
                            setTimeout(function () {
                                n.commitInput(e)
                            }, 1))
                }
                ,
                t.prototype.commitInput = function (e) {
                    this.areAllLimitsValid() && ("min" === e ? this.dispatchMinLatexIfChanged(this.proposedLatex.min) : "max" === e ? this.dispatchMaxLatexIfChanged(this.proposedLatex.max) : "step" === e && this.dispatchStepLatexIfChanged(this.proposedLatex.step))
                }
                ,
                t.prototype.onClose = function () {
                    this.commitInput("min"),
                        this.commitInput("max"),
                        this.commitInput("step")
                }
                ,
                t.prototype.dispatchMinLatexIfChanged = function (e) {
                    var t = !0;
                    "" === e && (t = !1,
                        e = this.model.slider.min),
                        this.model.slider.min === e && this.model.slider.hardMin === t || this.controller.dispatch({
                            type: "set-slider-minlatex",
                            id: this.id,
                            isHard: t,
                            latex: e
                        })
                }
                ,
                t.prototype.dispatchMaxLatexIfChanged = function (e) {
                    var t = !0;
                    "" === e && (t = !1,
                        e = this.model.slider.max),
                        this.model.slider.max === e && this.model.slider.hardMax === t || this.controller.dispatch({
                            type: "set-slider-maxlatex",
                            id: this.id,
                            isHard: t,
                            latex: e
                        })
                }
                ,
                t.prototype.dispatchStepLatexIfChanged = function (e) {
                    this.model.slider.step !== e && this.controller.dispatch({
                        type: "set-slider-steplatex",
                        id: this.id,
                        latex: e
                    })
                }
                ,
                t.prototype.getDependentLatex = function () {
                    var e = this.model.dependent || "";
                    return " \\le " + c.identifierToLatex(e) + " \\le "
                }
                ,
                t.prototype.areAllLimitsValid = function () {
                    var e = a.checkSliderLimits(this.model, this.proposedLatex.min || this.model.slider.min, this.proposedLatex.max || this.model.slider.max, this.proposedLatex.step);
                    return e.min && e.max && e.step
                }
                ,
                t.prototype.isLimitValid = function (e) {
                    var t = a.checkSliderLimits(this.model, this.proposedLatex.min || this.model.slider.min, this.proposedLatex.max || this.model.slider.max, this.proposedLatex.step);
                    return t[e]
                }
                ,
                t.prototype.getFocusedInput = function () {
                    var e = this.controller.getFocusLocation();
                    if (e && "slider-limit" === e.type && e.id === this.id)
                        return e.location
                }
                ,
                t
        }(i.Class);
        t.default = l
    }),
    define("loadcss!slider", function () { }),
    define("expressions/slider_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/slider", "./slider_limits_view", "dcgview-helpers/static-mathquill-view", "graphing-calc/models/expression", "loadcss!slider"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components.If
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.id = this.model.id,
                            r.createElement("span", {
                                class: function () {
                                    return {
                                        "dcg-slider-container": !0,
                                        "dcg-editing-limits": e.isEditingSliderLimit()
                                    }
                                },
                                tapboundary: r.const("true")
                            }, r.createElement("div", {
                                class: r.const("dcg-do-blur dcg-slider"),
                                handleEvent: r.const("true")
                            }, r.createElement("div", {
                                class: r.const("dcg-minLabel dcg-template-minlabelhtml"),
                                role: r.const("button"),
                                tabindex: r.const("0"),
                                "aria-label": function () {
                                    return e.controller.t("Edit __variable__ Limits", {
                                        variable: e.model.dependent
                                    })
                                },
                                onTap: function () {
                                    return e.onEditLimit("min")
                                }
                            }, r.createElement(s.default, {
                                latex: function () {
                                    return e.model.slider.min
                                }
                            })), r.createElement(i.default, {
                                min: function () {
                                    return e.model.sliderMinNumber
                                },
                                max: function () {
                                    return e.model.sliderMaxNumber
                                },
                                step: function () {
                                    return e.model.sliderStepNumber
                                },
                                value: function () {
                                    return e.model.sliderValue
                                },
                                ariaLabel: function () {
                                    return '"' + e.model.dependent + '"'
                                },
                                onGrab: this.bindFn(this.onGrab),
                                onDrop: this.bindFn(this.onDrop),
                                onDragUpdate: this.bindFn(this.onDragUpdate),
                                onKeyboardUpdate: this.bindFn(this.onKeyboardUpdate)
                            }), r.createElement("div", {
                                class: r.const("dcg-maxLabel dcg-template-maxlabelhtml"),
                                onTap: function () {
                                    return e.onEditLimit("max")
                                }
                            }, r.createElement(s.default, {
                                latex: function () {
                                    return e.model.slider.max
                                }
                            }))), r.createElement(c, {
                                predicate: function () {
                                    return e.isEditingSliderLimit()
                                }
                            }, function () {
                                return r.createElement(o.default, {
                                    model: e.props.model,
                                    controller: e.props.controller
                                })
                            }))
                    }
                    ,
                    t.prototype.onGrab = function () {
                        this.dispatchIsDraggingIfChanged(!0)
                    }
                    ,
                    t.prototype.onDrop = function () {
                        this.controller.dispatch({
                            type: "set-none-selected"
                        }),
                            this.dispatchIsPlayingIfChanged(!1),
                            this.dispatchIsDraggingIfChanged(!1)
                    }
                    ,
                    t.prototype.onKeyboardUpdate = function (e) {
                        this.controller.dispatch({
                            type: "drag-slider-value",
                            id: this.id,
                            value: a.computeSliderAdjustment(this.model, e)
                        })
                    }
                    ,
                    t.prototype.onDragUpdate = function (e) {
                        e = a.computeSliderSnappedValue(this.model, e),
                            e = Math.max(this.model.sliderMinNumber, Math.min(this.model.sliderMaxNumber, e)),
                            e !== this.model.sliderValue && this.controller.dispatch({
                                type: "drag-slider-value",
                                id: this.model.id,
                                value: e
                            })
                    }
                    ,
                    t.prototype.onEditLimit = function (e) {
                        this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "slider-limit",
                                id: this.id,
                                location: e
                            }
                        })
                    }
                    ,
                    t.prototype.dispatchMinLatexIfChanged = function (e) {
                        var t = !0;
                        "" === e && (t = !1,
                            e = this.model.slider.min),
                            this.model.slider.min === e && this.model.slider.hardMin === t || this.controller.dispatch({
                                type: "set-slider-minlatex",
                                id: this.id,
                                isHard: t,
                                latex: e
                            })
                    }
                    ,
                    t.prototype.dispatchMaxLatexIfChanged = function (e) {
                        var t = !0;
                        "" === e && (t = !1,
                            e = this.model.slider.max),
                            this.model.slider.max === e && this.model.slider.hardMax === t || this.controller.dispatch({
                                type: "set-slider-maxlatex",
                                id: this.id,
                                isHard: t,
                                latex: e
                            })
                    }
                    ,
                    t.prototype.dispatchStepLatexIfChanged = function (e) {
                        this.model.slider.step !== e && this.controller.dispatch({
                            type: "set-slider-steplatex",
                            id: this.id,
                            latex: e
                        })
                    }
                    ,
                    t.prototype.dispatchIsPlayingIfChanged = function (e) {
                        this.model.slider.isPlaying !== e && this.controller.dispatch({
                            type: "set-slider-isplaying",
                            id: this.id,
                            isPlaying: e
                        })
                    }
                    ,
                    t.prototype.dispatchIsDraggingIfChanged = function (e) {
                        this.model.sliderDragging !== e && this.controller.dispatch({
                            type: "set-slider-dragging",
                            id: this.id,
                            dragging: e
                        })
                    }
                    ,
                    t.prototype.isEditingSliderLimit = function () {
                        if (this.controller.isInEditListMode())
                            return !0;
                        var e = this.controller.getFocusLocation();
                        return !(!e || "slider-limit" !== e.type || e.id !== this.id)
                    }
                    ,
                    t
            }(r.Class);
        t.default = l
    }),
    define("expressions/slider_speed_view", ["require", "exports", "lib/aria", "expressions/slider_loop_modes", "tslib", "underscore", "dcgview", "graphing-calc/models/expression", "loadcss!slider"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = [.05, .1, .15, .2, .35, .5, .75, 1, 1.5, 2, 3.5, 5, 7.5, 10, 15, 20]
            , l = o.min(c)
            , u = o.max(c)
            , d = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e),
                    t.prototype.init = function () {
                        this.controller = this.props.controller(),
                            this.model = this.props.model()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            class: s.const("dcg-slider-speed-container dcg-do-not-blur"),
                            handleEvent: s.const("true")
                        }, s.createElement("span", {
                            class: s.const("dcg-action-toggle-slider-loop-mode"),
                            onTap: function () {
                                return e.toggleLoopMode()
                            },
                            role: s.const("button"),
                            "aria-label": function () {
                                return e.getLoopModeAriaLabel()
                            },
                            "aria-hidden": function () {
                                return e.isHidden()
                            },
                            tabindex: function () {
                                return e.isHidden() ? -1 : 0
                            },
                            loopMode: function () {
                                return e.model.slider.loopMode
                            }
                        }, s.createElement("span", {
                            class: s.const("dcg-toggle-loop-mode-top")
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-bottom-arrow")
                        })), s.createElement("span", {
                            class: s.const("dcg-toggle-loop-mode-bottom")
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-bottom-arrow")
                        }))), s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-slower": !0,
                                    "dcg-disabled": e.isSlowerDisabled()
                                }
                            },
                            onTap: function () {
                                return e.animateSlower()
                            },
                            role: s.const("button"),
                            "aria-label": function () {
                                return e.getSlowerAriaLabel()
                            },
                            "aria-hidden": function () {
                                return e.isHidden()
                            },
                            tabindex: function () {
                                return e.isHidden() ? -1 : 0
                            },
                            "aria-disabled": function () {
                                return e.isSlowerDisabled()
                            }
                        }, s.const("")), s.createElement("span", {
                            class: s.const("dcg-variable-speed")
                        }, this.bindFn(this.computeSpeed), s.const("x")), s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-faster": !0,
                                    "dcg-disabled": e.isFasterDisabled()
                                }
                            },
                            onTap: function () {
                                return e.animateFaster()
                            },
                            role: s.const("button"),
                            "aria-label": function () {
                                return e.getFasterAriaLabel()
                            },
                            "aria-hidden": function () {
                                return e.isHidden()
                            },
                            tabindex: function () {
                                return e.isHidden() ? -1 : 0
                            },
                            "aria-disabled": function () {
                                return e.isFasterDisabled()
                            }
                        }, s.const("")))
                    }
                    ,
                    t.prototype.computeSpeed = function () {
                        var e = a.DEFAULT_SLIDER_PERIOD / this.model.slider.animationPeriod;
                        return e = Number(e.toFixed(3))
                    }
                    ,
                    t.prototype.isSlowerDisabled = function () {
                        return l >= this.computeSpeed()
                    }
                    ,
                    t.prototype.isFasterDisabled = function () {
                        return u <= this.computeSpeed()
                    }
                    ,
                    t.prototype.animateSlower = function () {
                        var e = this.computeSpeed()
                            , t = o.filter(c, function (t) {
                                return t < e
                            });
                        0 !== t.length && this.setPeriodFromSpeed(o.max(t))
                    }
                    ,
                    t.prototype.animateFaster = function () {
                        var e = this.computeSpeed()
                            , t = o.filter(c, function (t) {
                                return t > e
                            });
                        0 !== t.length && this.setPeriodFromSpeed(o.min(t))
                    }
                    ,
                    t.prototype.toggleLoopMode = function () {
                        var e;
                        e = this.model.slider.loopMode === r.LOOP_FORWARD_REVERSE ? r.LOOP_FORWARD : r.LOOP_FORWARD_REVERSE,
                            this.controller.dispatch({
                                type: "set-slider-loopmode",
                                id: this.model.id,
                                loopMode: e
                            })
                    }
                    ,
                    t.prototype.setPeriodFromSpeed = function (e) {
                        var t = a.DEFAULT_SLIDER_PERIOD / e;
                        this.controller.dispatch({
                            type: "set-slider-animationperiod",
                            id: this.model.id,
                            animationPeriod: t
                        }),
                            n.alert(this.controller.t("Animating at __speed__x", {
                                speed: e + ""
                            }))
                    }
                    ,
                    t.prototype.isHidden = function () {
                        return !this.model.slider.isPlaying
                    }
                    ,
                    t.prototype.getSlowerAriaLabel = function () {
                        this.controller.t("Animate __variable__ Slower", {
                            variable: this.model.dependent
                        })
                    }
                    ,
                    t.prototype.getFasterAriaLabel = function () {
                        this.controller.t("Animate __variable__ Faster", {
                            variable: this.model.dependent
                        })
                    }
                    ,
                    t.prototype.getLoopModeAriaLabel = function () {
                        return this.model.slider.loopMode === r.LOOP_FORWARD_REVERSE ? this.controller.t("Loop __variable__ Forward and Reverse", {
                            variable: this.model.dependent
                        }) : this.controller.t("Loop __variable__ Forward", {
                            variable: this.model.dependent
                        })
                    }
                    ,
                    t
            }(s.Class);
        t.default = d
    }),
    define("loadcss!prompt-sliders", function () { }),
    define("expressions/promptslider_view", ["require", "exports", "lib/aria", "tslib", "graphing/label", "jquery", "dcgview", "loadcss!prompt-sliders"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = s.Components
            , c = a.For
            , l = a.If
            , u = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e),
                    t.prototype.init = function () {
                        this.controller = this.props.controller(),
                            this.model = this.props.model()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            class: s.const("dcg-create-sliders dcg-action-createslider"),
                            handleEvent: s.const("true"),
                            onTap: this.bindFn(this.onCreateSlider)
                        }, s.createElement("span", {
                            class: s.const("dcg-msg")
                        }, function () {
                            return e.controller.t("add slider:")
                        }), s.createElement("span", {
                            class: s.const("btns")
                        }, s.createElement(c, {
                            each: this.props.variables
                        }, s.createElement("span", null, function (t) {
                            return s.createElement("div", {
                                class: s.const("dcg-slider-btn-container"),
                                var_name: e.const(t)
                            }, s.createElement("div", {
                                role: s.const("button"),
                                tabindex: s.const("0"),
                                class: function () {
                                    return {
                                        "dcg-btn-slider": !0,
                                        "dcg-btn-blue": 1 === e.props.variables().length,
                                        "dcg-btn-light-gray": 1 !== e.props.variables().length
                                    }
                                },
                                didMount: function (e) {
                                    e.innerHTML = i.identifierToHTML(t)
                                }
                            }))
                        })), s.createElement(l, {
                            predicate: function () {
                                return e.props.variables().length > 1
                            }
                        }, function () {
                            return s.createElement("div", {
                                class: s.const("dcg-slider-btn-container dcg-all")
                            }, s.createElement("div", {
                                role: s.const("button"),
                                tabindex: s.const("0"),
                                class: s.const("dcg-btn-slider dcg-btn-blue")
                            }, function () {
                                return e.controller.t("all")
                            }))
                        })))
                    }
                    ,
                    t.prototype.onCreateSlider = function (e) {
                        this.controller.dispatch({
                            type: "set-none-selected"
                        });
                        var t = o(e.target).closest(".dcg-slider-btn-container");
                        if (t.length) {
                            var n = !1;
                            if (t.hasClass("dcg-all"))
                                this.props.onCreateSliders(this.props.variables()),
                                    n = !0;
                            else {
                                var r = [t.attr("var_name")];
                                this.props.onCreateSliders(r),
                                    n = 1 == this.props.variables().length
                            }
                            if ("keyboard" === e.device) {
                                var i = this.model.id
                                    , s = this.props.controller().getItemSelectorById(i);
                                if (!s)
                                    return;
                                n ? this.controller.dispatch({
                                    type: "move-focus-to-item",
                                    id: i
                                }) : s.find(".dcg-btn-blue").focus()
                            }
                        }
                    }
                    ,
                    t.prototype.didMount = function () {
                        var e = this;
                        this.promptAlertTimeout && clearTimeout(this.promptAlertTimeout),
                            this.promptAlertTimeout = setTimeout(function () {
                                for (var t = [], r = e.props.variables(), i = 0; i < r.length; i++)
                                    t.push('"' + r[i] + '"');
                                n.alert(e.controller.t("Add slider for __vars__", {
                                    vars: t.join(",")
                                })),
                                    e.promptAlertTimeout = 0
                            }, 2e3)
                    }
                    ,
                    t.prototype.didUnmount = function () {
                        this.promptAlertTimeout && clearTimeout(this.promptAlertTimeout)
                    }
                    ,
                    t
            }(s.Class);
        t.default = u
    }),
    define("loadcss!expressions/label_view", function () { }),
    define("expressions/label_view", ["require", "exports", "tslib", "dcgview", "loadcss!./label_view"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components
            , o = i.Input
            , s = i.If
            , a = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.id = this.model.id,
                            r.createElement("div", {
                                class: function () {
                                    return {
                                        "dcg-label-visible": e.getShowLabel(),
                                        "dcg-label-container": !0,
                                        "dcg-do-blur": !0
                                    }
                                },
                                tapboundary: r.const("true"),
                                handleEvent: r.const("true")
                            }, r.createElement("span", {
                                role: r.const("checkbox"),
                                "aria-checked": this.bindFn(this.getShowLabel),
                                tabindex: r.const("0"),
                                class: function () {
                                    return {
                                        "dcg-checkbox": !0,
                                        "dcg-checkbox-checked": e.getShowLabel()
                                    }
                                },
                                "aria-label": function () {
                                    return e.controller.t("Label")
                                },
                                onTap: this.bindFn(this.onCheckboxInput)
                            }, r.createElement("span", {
                                class: function () {
                                    return {
                                        "dcg-checkbox-box": !0,
                                        "dcg-checked": e.getShowLabel()
                                    }
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-check")
                            })), r.const(""), r.createElement("span", {
                                class: r.const("dcg-checkbox-label"),
                                "aria-hidden": r.const("true")
                            }, function () {
                                return e.controller.t("Label")
                            })), r.createElement(o, {
                                class: function () {
                                    return {
                                        "dcg-label-input": !0,
                                        "dcg-disabled-input": e.getIsDisabled()
                                    }
                                },
                                "aria-label": function () {
                                    return e.controller.t("Label Text")
                                },
                                "aria-disabled": this.bindFn(this.getIsDisabled),
                                value: this.bindFn(this.getLabel),
                                onInput: this.bindFn(this.onLabelInput)
                            }), r.createElement(s, {
                                predicate: function () {
                                    return e.oldInterpolation().length > 0
                                }
                            }, function () {
                                return r.createElement("div", {
                                    class: r.const("dcg-warning-wrapper tipsy-sticky"),
                                    tooltip: function () {
                                        return "Interpolate now requires $. For example, try $" + e.oldInterpolation()
                                    }
                                }, r.createElement("i", {
                                    class: r.const("dcg-icon-error")
                                }))
                            }), r.createElement("div", {
                                role: r.const("group"),
                                "aria-label": function () {
                                    return e.controller.t("Font Size")
                                },
                                class: function () {
                                    return {
                                        "dcg-label-font-size-options": !0,
                                        "dcg-no-label": !e.getShowLabel()
                                    }
                                }
                            }, r.createElement("span", {
                                role: r.const("button"),
                                tabindex: r.const(0),
                                "aria-label": function () {
                                    return e.controller.t("Small Font Size")
                                },
                                "aria-pressed": function () {
                                    return e.isSmallFontSelected()
                                },
                                class: function () {
                                    return {
                                        "dcg-label-size-option": !0,
                                        "dcg-label-size-selected": e.isSmallFontSelected(),
                                        "dcg-small-label": !0
                                    }
                                },
                                onTap: function () {
                                    return e.setLabelSize("small")
                                }
                            }, r.const("A")), r.createElement("span", {
                                role: r.const("button"),
                                tabindex: r.const(0),
                                "aria-label": function () {
                                    return e.controller.t("Medium Font Size")
                                },
                                "aria-pressed": function () {
                                    return e.isMediumFontSelected()
                                },
                                class: function () {
                                    return {
                                        "dcg-label-size-option": !0,
                                        "dcg-label-size-selected": e.isMediumFontSelected(),
                                        "dcg-medium-label": !0
                                    }
                                },
                                onTap: function () {
                                    return e.setLabelSize("medium")
                                }
                            }, r.const("A")), r.createElement("span", {
                                role: r.const("button"),
                                tabindex: r.const(0),
                                "aria-label": function () {
                                    return e.controller.t("Large Font Size")
                                },
                                "aria-pressed": function () {
                                    return e.isLargeFontSelected()
                                },
                                class: function () {
                                    return {
                                        "dcg-label-size-option": !0,
                                        "dcg-label-size-selected": e.isLargeFontSelected(),
                                        "dcg-large-label": !0
                                    }
                                },
                                onTap: function () {
                                    return e.setLabelSize("large")
                                }
                            }, r.const("A"))))
                    }
                    ,
                    t.prototype.setLabelSize = function (e) {
                        this.controller.dispatch({
                            type: "set-item-labelSize",
                            id: this.id,
                            labelSize: e
                        })
                    }
                    ,
                    t.prototype.isSmallFontSelected = function () {
                        return "small" === this.getLabelSize()
                    }
                    ,
                    t.prototype.isMediumFontSelected = function () {
                        return "medium" === this.getLabelSize()
                    }
                    ,
                    t.prototype.isLargeFontSelected = function () {
                        return "large" === this.getLabelSize()
                    }
                    ,
                    t.prototype.getLabelSize = function () {
                        return this.model.labelSize
                    }
                    ,
                    t.prototype.getLabel = function () {
                        return this.model.label || ""
                    }
                    ,
                    t.prototype.getShowLabel = function () {
                        return !!this.model.showLabel
                    }
                    ,
                    t.prototype.getIsDisabled = function () {
                        return 0 === this.getLabel().length && !this.getShowLabel()
                    }
                    ,
                    t.prototype.onLabelInput = function (e) {
                        var t = e;
                        this.controller.dispatch({
                            type: "set-item-label",
                            id: this.id,
                            label: t
                        }),
                            this.controller.dispatch({
                                type: "set-item-showlabel",
                                id: this.id,
                                showLabel: !!t
                            })
                    }
                    ,
                    t.prototype.oldInterpolation = function () {
                        var e = this.getLabel()
                            , t = ["[a-zA-Z][0-9]*", "[a-zA-Z]_[a-zA-Z0-9]+", "[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"]
                            , n = "({" + t.join("})|({") + "})"
                            , r = "\\$({" + t.join("})|\\$({") + "})"
                            , i = e.replace(new RegExp(r, "g"), "")
                            , o = i.match(new RegExp(n, ""));
                        return o ? o[0] : ""
                    }
                    ,
                    t.prototype.onCheckboxInput = function () {
                        this.controller.dispatch({
                            type: "set-item-showlabel",
                            id: this.id,
                            showLabel: !this.getShowLabel()
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = a
    }),
    define("loadcss!expressions.image", function () { }),
    define("expressions/expression_view", ["require", "exports", "config", "browser", "tslib", "./abstract-item-view", "dcgview-helpers/mathquill-view", "lib/conditional_blur", "./expression_icon_view", "expressions/evaluation_view", "expressions/unresolved_view", "expressions/domain_view", "expressions/regression_view", "expressions/slider_view", "expressions/slider_speed_view", "expressions/promptslider_view", "expressions/label_view", "graphing-calc/models/expression", "graphing/label", "graphing/dragmode", "expressions/styles", "dcgview", "jquery.handleevent", "loadcss!expressions.image"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w) {
        "use strict";
        function E(e) {
            return e && e.is_evaluable && e.zero_values && e.zero_values.length > 0 && "boolean" != typeof e.zero_values[0].val
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var _ = w.Components
            , S = _.If
            , k = _.Switch
            , M = {
                zeroCutoff: 1e-15,
                smallCutoff: 1e-6,
                bigCutoff: 1e9,
                digits: 12
            }
            , C = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e),
                    t.prototype.didMount = function () {
                        this.onItemViewMounted()
                    }
                    ,
                    t.prototype.willUnmount = function () {
                        this.onItemViewUnmounted()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return w.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-do-not-blur": !0,
                                    "dcg-expressionitem": !0,
                                    "dcg-mathitem": !0,
                                    "dcg-inFolder": !!e.model.folderId,
                                    "dcg-selected": e.controller.isItemSelected(e.id),
                                    "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                    "dcg-isPlaying": e.isSliderPlaying(),
                                    "dcg-hasSlider": e.hasSlider(),
                                    "dcg-hasEvaluation": e.hasEvaluation(),
                                    "dcg-hasRegression": e.hasRegression(),
                                    "dcg-hasDomain": e.hasDomain()
                                }
                            },
                            "expr-id": function () {
                                return e.model.id
                            },
                            onTapStart: this.bindFn(this.onMouseSelect),
                            onTap: this.bindFn(this.onMouseSelect)
                        }, w.createElement("div", {
                            class: w.const("dcg-fade-container")
                        }, w.createElement("div", {
                            class: w.const("dcg-main")
                        }, w.createElement(s.default, {
                            latex: function () {
                                return e.model.latex
                            },
                            getAriaLabel: this.bindFn(this.getAriaLabel),
                            getAriaPostLabel: this.bindFn(this.getFormulaAria),
                            isFocused: function () {
                                return e.isFocused()
                            },
                            config: this.const({}),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: function (t) {
                                return e.handleLatexChanged(t)
                            },
                            onFocusedChanged: function (t) {
                                return e.handleMQFocusedChanged(t)
                            }
                        }, w.createElement("div", {
                            class: w.const("dcg-expression-mathquill")
                        }))), w.createElement("i", {
                            class: w.const("dcg-icon-remove dcg-top-level-delete"),
                            handleEvent: w.const("true"),
                            onTap: this.bindFn(this.onDelete)
                        }), w.createElement(S, {
                            predicate: this.bindFn(this.hasSlider)
                        }, function () {
                            return w.createElement(f.default, {
                                model: e.props.model,
                                controller: e.props.controller
                            })
                        }), w.createElement(S, {
                            predicate: function () {
                                return void 0 !== e.getFooterType()
                            }
                        }, function () {
                            return w.createElement("div", {
                                class: e.getFooterClass()
                            }, w.createElement(k, {
                                key: e.bindFn(e.getFooterType)
                            }, function (t) {
                                switch (t) {
                                    case "slider":
                                        return w.createElement(h.default, {
                                            model: e.props.model,
                                            controller: e.props.controller
                                        });
                                    case "regression":
                                        return w.createElement(p.default, {
                                            model: e.props.model,
                                            controller: e.props.controller
                                        });
                                    case "label":
                                        return w.createElement(g.default, {
                                            model: e.props.model,
                                            controller: e.props.controller
                                        });
                                    case "domain":
                                        return w.createElement(d.default, {
                                            model: e.props.model,
                                            controller: e.props.controller
                                        });
                                    case "promptSlider":
                                        return w.createElement(m.default, {
                                            model: e.props.model,
                                            controller: e.props.controller,
                                            variables: e.bindFn(e.getVariables),
                                            onCreateSliders: e.bindFn(e.onCreateSliders)
                                        });
                                    case "evaluation":
                                        return w.createElement(l.default, {
                                            labelOptions: e.const(M),
                                            dependent: function () {
                                                return e.model.dependent || ""
                                            },
                                            val: e.bindFn(e.getEvaluationValue)
                                        });
                                    case "unresolved":
                                        return w.createElement(u.default, {
                                            controller: e.props.controller
                                        });
                                    default:
                                        return w.createElement("span", null)
                                }
                            }))
                        })), w.createElement("span", {
                            class: w.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),
                            handleevent: w.const("true"),
                            tapboundary: w.const("true"),
                            disablescroll: w.const("true"),
                            style: w.const("touch-action:none"),
                            onTapStart: this.bindFn(this.onDragPending)
                        }, w.createElement("span", {
                            class: w.const("dcg-num")
                        }, function () {
                            return e.model.displayIndex
                        }), w.createElement("div", {
                            class: w.const("dcg-tab-interior dcg-action-icon-mouse")
                        }, w.createElement(c.default, {
                            model: this.props.model,
                            controller: this.props.controller
                        }))), w.createElement("span", {
                            class: w.const("dcg-exp-actions")
                        }, w.createElement("span", {
                            class: w.const("dcg-graphic"),
                            handleEvent: w.const("true ")
                        }), w.createElement("span", {
                            class: w.const("dcg-delete-btn dcg-tooltip"),
                            handleEvent: w.const("true"),
                            tooltip: function () {
                                return e.controller.t("Delete")
                            },
                            onTap: this.bindFn(this.onDelete)
                        }, w.createElement("i", {
                            class: w.const("dcg-icon-remove")
                        })), w.createElement("span", {
                            class: w.const("dcg-action-duplicate dcg-duplicate-btn dcg-tooltip"),
                            handleEvent: w.const("true"),
                            tooltip: function () {
                                return e.controller.t("Duplicate")
                            },
                            onTap: this.bindFn(this.onDuplicateWithoutFocus)
                        }, w.createElement("i", {
                            class: w.const("dcg-icon-duplicate")
                        })), w.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-createtable": !0,
                                    "dcg-tooltip": !0,
                                    "dcg-disabled": !e.model.isTableable
                                }
                            },
                            tooltip: function () {
                                return e.controller.t("Convert to Table")
                            },
                            handleEvent: w.const("true"),
                            onTap: this.bindFn(this.onCreateTable)
                        }, w.createElement("i", {
                            class: w.const("dcg-icon-table")
                        }))))
                    }
                    ,
                    t.prototype.getFooterType = function () {
                        return this.hasSlider() ? "slider" : this.hasRegression() ? "regression" : this.shouldShowLabelView() ? "label" : this.hasDomain() ? "domain" : this.shouldShowSliderPrompt() ? "promptSlider" : this.hasEvaluation() ? "evaluation" : this.model.unresolved ? "unresolved" : void 0
                    }
                    ,
                    t.prototype.getFooterClass = function () {
                        return this.isFirstRender() ? this.const("dcg-expression-bottom") : this.const("dcg-expression-bottom dcg-fadein-bottom")
                    }
                    ,
                    t.prototype.onDuplicateWithoutFocus = function () {
                        this.controller.dispatch({
                            type: "duplicate-expression",
                            id: this.model.id
                        })
                    }
                    ,
                    t.prototype.onCreateSliders = function (e) {
                        this.controller.dispatch({
                            type: "create-sliders-for-item",
                            id: this.id,
                            variables: e
                        })
                    }
                    ,
                    t.prototype.onCreateTable = function () {
                        var e = this.model.formula;
                        if (this.model.isTableable) {
                            var t, n = e.table_info, r = this.model.index, i = [], o = [];
                            if (n.values)
                                for (t = 0; t < n.values.length; t++) {
                                    var s = n.values[t][0];
                                    i.push(s ? s + "" : "");
                                    var a = n.values[t][1];
                                    o.push(a ? a + "" : "")
                                }
                            else
                                for (t = -2; t <= 2; t++)
                                    i.push(t + ""),
                                        o.push("");
                            var c = {
                                id: this.controller.generateId(),
                                type: "table",
                                columns: [{
                                    id: this.controller.generateId(),
                                    latex: n.independent_variable,
                                    color: this.controller.getNextColor(),
                                    hidden: !1,
                                    values: i,
                                    points: !0,
                                    lines: !1,
                                    dragMode: b.NONE,
                                    pointStyle: x.POINT,
                                    lineStyle: x.SOLID
                                }, {
                                    id: this.controller.generateId(),
                                    latex: n.dependent_column,
                                    color: this.model.color,
                                    hidden: !1,
                                    values: o,
                                    points: !0,
                                    lines: !(y.isPointOrPointList(this.model) || this.model.hidden),
                                    dragMode: b.NONE,
                                    pointStyle: x.POINT,
                                    lineStyle: x.SOLID
                                }]
                            }
                                , l = this.controller;
                            this.controller.dispatch({
                                type: "set-edit-list-mode",
                                isEditListMode: !1
                            }),
                                n.by_reference ? this.controller.dispatch({
                                    type: "insert-item-at-index",
                                    index: r + 1,
                                    state: c,
                                    folderId: this.model.folderId,
                                    focus: !0
                                }) : this.controller.dispatch({
                                    type: "replace-item-at-index",
                                    index: r,
                                    state: c,
                                    focus: !0
                                });
                            var u = function () {
                                l.dispatch({
                                    type: "undo"
                                }),
                                    l.dispatch({
                                        type: "set-edit-list-mode",
                                        isEditListMode: !0
                                    })
                            };
                            this.controller.dispatch({
                                type: "toast/show",
                                toast: {
                                    message: this.controller.t("Table created."),
                                    undoCallback: u
                                }
                            })
                        }
                    }
                    ,
                    t.prototype.shouldShowLabelView = function () {
                        return n.get("labels") && y.isPointOrPointList(this.model)
                    }
                    ,
                    t.prototype.shouldShowSliderPrompt = function () {
                        return this.getVariables().length > 0
                    }
                    ,
                    t.prototype.getVariables = function () {
                        return this.model.formula ? this.model.formula.is_single_identifier ? [] : this.model.formula.variables || [] : []
                    }
                    ,
                    t.prototype.hasEvaluation = function () {
                        return E(this.model.formula)
                    }
                    ,
                    t.prototype.getEvaluationValue = function () {
                        return this.hasEvaluation() ? this.model.formula.zero_values[0].val : NaN
                    }
                    ,
                    t.prototype.hasRegression = function () {
                        return !(!this.model.formula || !this.model.formula.is_regression)
                    }
                    ,
                    t.prototype.hasDomain = function () {
                        return !(!this.model.formula || !y.isParametric(this.model))
                    }
                    ,
                    t.prototype.hasSlider = function () {
                        return !!this.model.sliderExists
                    }
                    ,
                    t.prototype.isSliderPlaying = function () {
                        return !(!this.model.sliderExists || !this.model.slider.isPlaying)
                    }
                    ,
                    t.prototype.getAriaLabel = function () {
                        if (this.shouldShowLabelView()) {
                            var e;
                            e = this.model.label && "" !== this.model.label ? this.model.label : this.controller.t("Label");
                            var t;
                            return t = this.model.showLabel ? e : this.controller.t("Hidden __label__", {
                                label: e
                            })
                        }
                        return this.controller.t("Expression __index__", {
                            index: this.model.displayIndex
                        })
                    }
                    ,
                    t.prototype.getFormulaAria = function () {
                        var e = this.model.formula
                            , t = "";
                        if (!e)
                            return t;
                        if (y.isEmpty(this.model))
                            return t;
                        if (E(e)) {
                            t = "equals ";
                            var n = e.zero_values[0].val;
                            t += Array.isArray(n) ? n.length + " element list." : v.truncatedAriaLabel(n, M)
                        } else
                            e.error && !this.shouldShowSliderPrompt() ? t = this.controller.unpack(e.error) : (e.is_graphable || e.is_regression) && (t = e.is_graphable && e.is_regression ? this.controller.t("Has graph and regression. To access statistics, press Tab.") : e.is_regression ? this.controller.t("Has regression. To access statistics, press Tab.") : this.controller.t("Has graph."),
                                e.is_graphable && (t += r.IS_APPLE ? this.controller.t(" To audio trace, press OPTION+T.") : this.controller.t(" To audio trace, press ALT+T.")));
                        return t
                    }
                    ,
                    t.prototype.handlePressedKey = function (e, t) {
                        var n = s.default.getFocusedMathquill();
                        if (n) {
                            if ("Esc" === e)
                                return a.default();
                            if ("Up" === e || "Down" === e) {
                                var r = s.default.applyArrowKeyAndReturnIfWasAtBounds(n, e, t);
                                if (r)
                                    return this.controller.dispatch({
                                        type: "on-special-key-pressed",
                                        key: e
                                    })
                            } else if ("Delete" === e || "Backspace" === e) {
                                if (y.isEmpty(this.model))
                                    return this.controller.dispatch({
                                        type: "on-special-key-pressed",
                                        key: e
                                    })
                            } else if ("Enter" === e) {
                                var i = this.getVariables();
                                return i.length ? void this.onCreateSliders(i.concat("")) : this.controller.dispatch({
                                    type: "on-special-key-pressed",
                                    key: "Enter"
                                })
                            }
                            n.keystroke(e, t),
                                this.handleLatexChanged(n.latex())
                        }
                    }
                    ,
                    t.prototype.handleLatexChanged = function (e) {
                        e !== this.model.latex && this.controller.dispatch({
                            type: "set-item-latex",
                            id: this.id,
                            latex: e
                        })
                    }
                    ,
                    t.prototype.handleMQFocusedChanged = function (e) {
                        e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "expression",
                                id: this.id
                            }
                        }) : this.controller.dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "expression",
                                id: this.id
                            }
                        })
                    }
                    ,
                    t.prototype.onMouseSelect = function (e) {
                        "keyboard" !== e.device && ("dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || this.controller.isInEditListMode() || e.wasHandled() || (e.handle(),
                            this.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "expression",
                                    id: this.id
                                }
                            })))
                    }
                    ,
                    t.prototype.isFocused = function () {
                        var e = this.controller.getFocusLocation();
                        return !!e && ("expression" === e.type && e.id === this.id)
                    }
                    ,
                    t
            }(o.default);
        t.default = C
    }),
    define("loadcss!smart_textarea", function () { }),
    define("expressions/smart_textarea", ["require", "exports", "browser", "keys", "tslib", "dcgview", "jquery", "lib/conditional_blur", "loadcss!smart_textarea", "jquery.handleevent"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = o.Components.Textarea
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return o.createElement("div", {
                            class: o.const("dcg-smart-textarea-container")
                        }, o.createElement("div", {
                            class: o.const("dcg-displayTextarea dcg-fixed-width-element"),
                            didMount: this.bindFn(this.didMountDisplay)
                        }), o.createElement(c, {
                            class: function () {
                                return {
                                    "dcg-do-blur": !0,
                                    "dcg-fixed-width-element": !0,
                                    "dcg-smart-textarea": !0,
                                    "dcg-empty": !e.props.text()
                                }
                            },
                            "aria-label": function () {
                                return e.props.ariaLabel ? e.props.ariaLabel() : void 0
                            },
                            placeholder: this.props.placeholder,
                            value: this.props.text,
                            onInput: this.props.onInput,
                            didMount: this.bindFn(this.didMountTextarea),
                            onKeydown: this.bindFn(this.onKeydownEvent)
                        }))
                    }
                    ,
                    t.prototype.getDisplayTextHTML = function () {
                        var e = this.props.text() || "";
                        if (e = e.replace(/</g, "&lt;").replace(/>/g, "&gt;"),
                            !this.props.showLinks())
                            return e;
                        var t = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;
                        return e = e.replace(t, "<a href='$1' target ='_blank'>$1</a>")
                    }
                    ,
                    t.prototype.willUnmount = function () {
                        this.textareaNode = void 0
                    }
                    ,
                    t.prototype.didMountDisplay = function (e) {
                        this.displayNode = e,
                            s(e).on("touchend", function (e) {
                                e.preventDefault()
                            }),
                            s(e).on("dcg-tap dcg-tapstart", "a", function (e) {
                                e.handle()
                            }),
                            this.renderDisplayText()
                    }
                    ,
                    t.prototype.didMountTextarea = function (e) {
                        var t = this;
                        this.textareaNode = e,
                            s(e).on("dcg-tapstart", function (e) {
                                e.handle()
                            }),
                            s(e).on("focusin focusout", function () {
                                return t.onFocusEvent()
                            }),
                            this.updateFocused()
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        this.updateFocused(),
                            this.renderDisplayText()
                    }
                    ,
                    t.prototype.onFocusEvent = function () {
                        if (this.textareaNode) {
                            var e = document.activeElement === this.textareaNode;
                            this.shouldBeFocused() !== e && this.props.onFocusChange(e)
                        }
                    }
                    ,
                    t.prototype.renderDisplayText = function () {
                        if (this.displayNode) {
                            var e = this.getDisplayTextHTML();
                            this.lastDisplayTextHTML !== e && (this.lastDisplayTextHTML = e,
                                this.displayNode.innerHTML = e)
                        }
                    }
                    ,
                    t.prototype.isFocused = function () {
                        return document.activeElement === this.textareaNode
                    }
                    ,
                    t.prototype.shouldBeFocused = function () {
                        return this.props.shouldFocus()
                    }
                    ,
                    t.prototype.updateFocused = function () {
                        if (this.textareaNode) {
                            var e = this.isFocused()
                                , t = this.shouldBeFocused();
                            if (e !== t)
                                if (t) {
                                    if (n.IS_IPAD && n.IS_IN_IFRAME)
                                        return;
                                    this.textareaNode.focus(),
                                        this.textareaNode.selectionStart = this.textareaNode.selectionEnd = this.textareaNode.value.length
                                } else
                                    this.textareaNode.blur()
                        }
                    }
                    ,
                    t.prototype.onKeydownEvent = function (e) {
                        var t = this.textareaNode;
                        if (t) {
                            var n = r.lookup(e);
                            n !== r.ENTER || e.metaKey ? n === r.ESCAPE ? a.default() : n === r.UP ? 0 === t.selectionStart && 0 === t.selectionEnd && (e.preventDefault(),
                                this.props.onSpecialKey("Up")) : n === r.DOWN ? t.selectionStart === t.value.length && t.selectionEnd === t.value.length && (e.preventDefault(),
                                    this.props.onSpecialKey("Down")) : n === r.BACKSPACE ? 0 === t.value.length && (e.preventDefault(),
                                        this.props.onSpecialKey("Backspace")) : n === r.DELETE && 0 === t.value.length && (e.preventDefault(),
                                            this.props.onSpecialKey("Delete")) : (e.preventDefault(),
                                                this.props.onSpecialKey("Enter")),
                                this.props.onKeydown && this.props.onKeydown(e)
                        }
                    }
                    ,
                    t
            }(o.Class);
        t.default = l
    }),
    define("expressions/text_view", ["require", "exports", "tslib", "./abstract-item-view", "./smart_textarea", "dcgview", "jquery.handleevent"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.didMount = function () {
                    this.onItemViewMounted()
                }
                ,
                t.prototype.willUnmount = function () {
                    this.onItemViewUnmounted()
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return o.createElement("div", {
                        class: function () {
                            return {
                                "dcg-do-not-blur": !0,
                                "dcg-expressionitem": !0,
                                "dcg-expressiontext": !0,
                                "dcg-inFolder": !!e.model.folderId,
                                "dcg-selected": !!e.controller.isItemSelected(e.id),
                                "dcg-dragging": !!e.controller.isItemBeingDragged(e.id)
                            }
                        },
                        "expr-id": function () {
                            return e.model.id
                        },
                        onTapStart: this.bindFn(this.onMouseSelect),
                        onTap: this.bindFn(this.onMouseSelect)
                    }, o.createElement("div", {
                        class: o.const("dcg-fade-container")
                    }, o.createElement("div", {
                        class: o.const("dcg-main")
                    }, o.createElement(i.default, {
                        shouldFocus: this.bindFn(this.isFocused),
                        text: function () {
                            return e.model.text
                        },
                        placeholder: function () {
                            return e.controller.t("Enter a note...")
                        },
                        showLinks: function () {
                            return e.controller.areLinksEnabled()
                        },
                        onInput: this.bindFn(this.onInput),
                        onFocusChange: this.bindFn(this.onFocusChange),
                        onSpecialKey: this.bindFn(this.onSpecialKey)
                    })), o.createElement("i", {
                        class: o.const("dcg-icon-remove dcg-top-level-delete"),
                        handleEvent: o.const("true"),
                        onTap: this.bindFn(this.onDelete)
                    })), o.createElement("span", {
                        class: o.const("dcg-tab dcg-action-drag"),
                        handleevent: o.const("true"),
                        tapboundary: o.const("true"),
                        disablescroll: o.const("true"),
                        style: o.const("touch-action:none"),
                        onTapStart: this.bindFn(this.onDragPending)
                    }, o.createElement("span", {
                        class: o.const("dcg-num")
                    }, function () {
                        return e.model.displayIndex
                    }), o.createElement("div", {
                        class: o.const("dcg-tab-interior")
                    }), o.createElement("i", {
                        class: o.const("dcg-icon-text")
                    })), o.createElement("span", {
                        class: o.const("dcg-exp-actions")
                    }, o.createElement("span", {
                        class: o.const("dcg-graphic"),
                        handleEvent: o.const("true ")
                    }), o.createElement("span", {
                        class: o.const("dcg-delete-btn dcg-tooltip"),
                        handleEvent: o.const("true"),
                        tooltip: function () {
                            return e.controller.t("Delete")
                        },
                        onTap: this.bindFn(this.onDelete)
                    }, o.createElement("i", {
                        class: o.const("dcg-icon-remove")
                    }))))
                }
                ,
                t.prototype.onInput = function (e) {
                    this.controller.dispatch({
                        type: "set-note-text",
                        id: this.id,
                        text: e
                    })
                }
                ,
                t.prototype.onFocusChange = function (e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "text",
                            id: this.id
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "text",
                            id: this.id
                        }
                    })
                }
                ,
                t.prototype.onSpecialKey = function (e) {
                    return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: e
                    })
                }
                ,
                t.prototype.isFocused = function () {
                    var e = this.controller.getFocusLocation();
                    return !(!e || "text" !== e.type || e.id !== this.id)
                }
                ,
                t
        }(r.default);
        t.default = s
    }),
    define("expressions/tables/table_column_menu_view", ["require", "exports", "tslib", "dcgview", "expressions/color_menu_view", "graphing/dragmode", "expressions/styles", "expressions/toggle-view"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components
            , l = c.For
            , u = c.If
            , d = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.columnId = this.model.id,
                            this.tableModel = this.model.table,
                            this.tableId = this.tableModel.id,
                            r.createElement("div", {
                                class: r.const("dcg-table-column-menu dcg-options-menu")
                            }, r.createElement("div", {
                                class: r.const("dcg-triangle")
                            }), r.createElement("div", {
                                class: r.const("dcg-options-menu-column-left")
                            }, r.createElement("div", {
                                class: r.const("dcg-options-menu-section")
                            }, r.createElement("span", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return e.controller.t("Points")
                            }), r.createElement(a.default, {
                                toggled: function () {
                                    return e.model.points
                                },
                                onChange: function () {
                                    return e.onTogglePoints(!e.model.points)
                                }
                            }), r.createElement(u, {
                                predicate: function () {
                                    return e.model.points
                                }
                            }, function () {
                                return r.createElement(l, {
                                    each: function () {
                                        return e.controller.getPointStyles()
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-style-icons")
                                }, function (t) {
                                    return r.createElement("span", {
                                        class: function () {
                                            return n = {},
                                                n[e.getPointStyleClass(t)] = !0,
                                                n["dcg-table-option"] = !0,
                                                n["dcg-graph-icon"] = !0,
                                                n["dcg-variable-colorcss"] = !0,
                                                n["dcg-selected"] = e.model.pointStyle === t,
                                                n;
                                            var n
                                        },
                                        style: function () {
                                            return {
                                                background: e.model.color,
                                                "border-color": e.model.color
                                            }
                                        },
                                        onTap: function () {
                                            return e.onPointStyleSelected(t)
                                        }
                                    })
                                }))
                            })), r.createElement("div", {
                                class: r.const("dcg-options-menu-section")
                            }, r.createElement("span", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return e.controller.t("Lines")
                            }), r.createElement(a.default, {
                                toggled: function () {
                                    return e.model.lines
                                },
                                onChange: function () {
                                    return e.onToggleLines(!e.model.lines)
                                }
                            }), r.createElement(u, {
                                predicate: function () {
                                    return e.model.lines
                                }
                            }, function () {
                                return r.createElement("div", {
                                    class: r.const("dcg-line-options")
                                }, r.createElement(l, {
                                    each: function () {
                                        return e.controller.getLineStyles()
                                    }
                                }, r.createElement("div", {
                                    class: r.const("dcg-style-icons")
                                }, function (t) {
                                    return r.createElement("span", {
                                        class: function () {
                                            return n = {},
                                                n[e.getLineStyleClass(t)] = !0,
                                                n["dcg-table-option"] = !0,
                                                n["dcg-graph-icon"] = !0,
                                                n["dcg-variable-colorcss"] = !0,
                                                n["dcg-selected"] = e.model.lineStyle === t,
                                                n;
                                            var n
                                        },
                                        style: function () {
                                            return {
                                                background: e.model.color,
                                                "border-color": e.model.color
                                            }
                                        },
                                        onTap: function () {
                                            return e.onLineStyleSelected(t)
                                        }
                                    })
                                })))
                            })), r.createElement(u, {
                                predicate: function () {
                                    return e.model.draggable
                                }
                            }, function () {
                                return r.createElement("div", {
                                    class: r.const("dcg-drag-div dcg-options-menu-section")
                                }, r.createElement("span", {
                                    class: r.const("dcg-toggle-title")
                                }, function () {
                                    return e.controller.t("Drag")
                                }), r.createElement(a.default, {
                                    toggled: function () {
                                        return e.model.dragMode !== o.NONE
                                    },
                                    onChange: function () {
                                        return e.onToggleDrag()
                                    }
                                }), r.createElement(u, {
                                    predicate: function () {
                                        return e.model.dragMode !== o.NONE
                                    }
                                }, function () {
                                    return r.createElement(l, {
                                        each: function () {
                                            return e.controller.getUIDragModes()
                                        }
                                    }, r.createElement("div", {
                                        class: r.const("dcg-style-icons")
                                    }, function (t) {
                                        return r.createElement("span", {
                                            class: function () {
                                                return {
                                                    "dcg-dragmode-option": !0,
                                                    "dcg-graph-icon": !0,
                                                    "dcg-variable-colorcss": !0,
                                                    "dcg-selected": e.model.dragMode === t
                                                }
                                            },
                                            style: function () {
                                                return {
                                                    background: e.model.color,
                                                    "border-color": e.model.color
                                                }
                                            },
                                            mode: e.const(t),
                                            onTap: function () {
                                                return e.onDragModeSelected(t)
                                            }
                                        })
                                    }))
                                }))
                            })), r.createElement("div", {
                                class: r.const("dcg-options-menu-column-right")
                            }, r.createElement("div", {
                                class: r.const("dcg-colors-div dcg-options-menu-section")
                            }, r.createElement("div", {
                                class: r.const("dcg-toggle-title")
                            }, function () {
                                return e.controller.t("Color")
                            }), r.createElement(i.default, {
                                controller: function () {
                                    return e.props.controller()
                                },
                                selectedColor: function () {
                                    return e.model.color
                                },
                                onColorSelected: this.bindFn(this.onColorSelected)
                            }))))
                    }
                    ,
                    t.prototype.getPointStyleClass = function (e) {
                        switch (e) {
                            case s.CROSS:
                                return "dcg-graph-CROSS";
                            case s.OPEN:
                                return "dcg-graph-OPEN";
                            default:
                                return "dcg-graph-POINT"
                        }
                    }
                    ,
                    t.prototype.getLineStyleClass = function (e) {
                        switch (e) {
                            case s.DASHED:
                                return "dcg-graph-DASHED";
                            case s.DOTTED:
                                return "dcg-graph-DOTTED";
                            default:
                                return "dcg-graph-SOLID"
                        }
                    }
                    ,
                    t.prototype.onColorSelected = function (e) {
                        this.controller.dispatch({
                            type: "set-tablecolumn-color",
                            tableId: this.tableId,
                            columnId: this.columnId,
                            color: e
                        })
                    }
                    ,
                    t.prototype.onTogglePoints = function (e) {
                        this.controller.dispatch({
                            type: "set-tablecolumn-points",
                            tableId: this.tableId,
                            columnId: this.columnId,
                            bool: e
                        })
                    }
                    ,
                    t.prototype.onPointStyleSelected = function (e) {
                        this.controller.dispatch({
                            type: "set-tablecolumn-pointstyle",
                            tableId: this.tableId,
                            columnId: this.columnId,
                            pointStyle: e
                        })
                    }
                    ,
                    t.prototype.onToggleLines = function (e) {
                        this.controller.dispatch({
                            type: "set-tablecolumn-lines",
                            tableId: this.tableId,
                            columnId: this.columnId,
                            bool: e
                        })
                    }
                    ,
                    t.prototype.onLineStyleSelected = function (e) {
                        this.controller.dispatch({
                            type: "set-tablecolumn-linestyle",
                            tableId: this.tableId,
                            columnId: this.columnId,
                            lineStyle: e
                        })
                    }
                    ,
                    t.prototype.onToggleDrag = function () {
                        var e = this.columnId
                            , t = this.tableId
                            , n = this.model.dragMode === o.NONE ? o.XY : o.NONE;
                        this.controller.dispatch({
                            type: "set-tablecolumn-dragmode",
                            tableId: t,
                            columnId: e,
                            dragMode: n
                        })
                    }
                    ,
                    t.prototype.onDragModeSelected = function (e) {
                        var t = this.columnId
                            , n = this.tableId;
                        this.model.dragMode !== e && this.controller.dispatch({
                            type: "set-tablecolumn-dragmode",
                            tableId: n,
                            columnId: t,
                            dragMode: e
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = d
    }),
    define("expressions/tables/table_icon_view", ["require", "exports", "tslib", "dcgview", "expressions/abstract_icon_view", "./table_column_menu_view", "lib/conditional_blur", "jquery", "jquery.handleevent"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    e.prototype.init.call(this),
                        this.model = this.props.model()
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("span", {
                        class: r.const("dcg-icon-box tipsy-sticky dcg-do-not-blur"),
                        handleevent: r.const("true"),
                        disablescroll: r.const("true"),
                        tooltip: function () {
                            return e.model.error ? e.controller.unpack(e.model.error) : ""
                        },
                        onTapStart: this.bindFn(this.handleIconTapStart),
                        onTap: this.bindFn(this.handleIconTap),
                        onLongHold: this.bindFn(this.handleIconLongHold),
                        didMount: this.bindFn(this.didMountRoot)
                    }, r.createElement("span", {
                        class: function () {
                            return t = {
                                "dcg-icon": !0,
                                "dcg-graph-icon": !0
                            },
                                t[e.getIconClass()] = !0,
                                t;
                            var t
                        },
                        style: function () {
                            return {
                                "border-color": e.model.color,
                                background: e.model.color
                            }
                        }
                    }, r.createElement("i", {
                        class: r.const("dcg-icon-hidden")
                    })))
                }
                ,
                t.prototype.didUpdate = function () {
                    this.__renderCellError(),
                        this.optionsMenu && this.optionsMenu.update()
                }
                ,
                t.prototype.didMountRoot = function (e) {
                    this.rootElt = e,
                        this.__renderCellError()
                }
                ,
                t.prototype.__renderCellError = function () {
                    this.rootElt && a(this.rootElt).closest(".dcg-cell").toggleClass("dcg-error", this.hasStableError())
                }
                ,
                t.prototype.createOptionsMenuView = function () {
                    var e = this.getOptionsMenuContainerSelector()
                        , t = r.mountToNode(o.default, e[0], {
                            controller: this.props.controller,
                            model: this.props.model
                        });
                    return t
                }
                ,
                t.prototype.handleIconTap = function (e) {
                    if (!e.wasLongheld())
                        return this.optionsShown ? void this.hideOptions() : void (this.controller.isInEditListMode() ? this.toggleOptions() : this.toggleGraphShown())
                }
                ,
                t.prototype.handleIconLongHold = function () {
                    this.optionsShown || this.toggleOptions()
                }
                ,
                t.prototype.handleIconTapStart = function (e) {
                    this.optionsShown || 1 === e.touches.length && s.default()
                }
                ,
                t.prototype.toggleGraphShown = function () {
                    this.hasError() || this.controller.dispatch({
                        type: "toggle-tablecolumn-hidden",
                        tableId: this.model.table.id,
                        columnId: this.model.id
                    })
                }
                ,
                t.prototype.hasError = function () {
                    return !!this.model.error
                }
                ,
                t.prototype.getIconClass = function () {
                    return this.hasStableError() ? "dcg-error" : this.model.error ? "" : this.model.shouldGraph ? this.model.points && this.model.lines ? "dcg-table-points-and-lines" : this.model.points ? "dcg-table-points" : this.model.lines ? "dcg-table-lines" : "" : "dcg-graph-hidden"
                }
                ,
                t
        }(i.default);
        t.default = c
    }),
    define("expressions/tables/header-view", ["require", "exports", "tslib", "dcgview", "./table_icon_view", "dcgview-helpers/mathquill-view", "underscore", "graphing-calc/models/table"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components.If
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.init = function () {
                        this.model = this.props.model(),
                            this.controller = this.props.controller(),
                            this.table = this.model.table
                    }
                    ,
                    t.prototype.isRightSide = function () {
                        var e = this.lookupCellPosition();
                        return e.column >= this.table.columnModels.length - 1
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement("div", {
                            role: r.const("columnheader"),
                            class: function () {
                                return {
                                    "dcg-cell": !0,
                                    "dcg-table-header": !0,
                                    "dcg-do-not-blur": !0,
                                    "dcg-left": 0 === e.model.index,
                                    "dcg-right": e.isRightSide(),
                                    "dcg-selected": e.shouldFocus()
                                }
                            },
                            index: function () {
                                return e.model.index
                            },
                            onTapStart: this.bindFn(this.focusThisCell)
                        }, r.createElement("div", {
                            class: r.const("dcg-inner-border")
                        }), r.createElement(i.default, {
                            model: this.props.model,
                            controller: this.props.controller
                        }), r.createElement(o.default, {
                            latex: function () {
                                return e.model.latex || ""
                            },
                            isFocused: this.bindFn(this.shouldFocus),
                            config: this.const({}),
                            getAriaLabel: this.bindFn(this.getAriaLabel),
                            getAriaPostLabel: this.const(""),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: function (t) {
                                return e.handleLatexChanged(t)
                            },
                            onFocusedChanged: function (t) {
                                return e.handleMQFocusedChanged(t)
                            },
                            selectOnFocus: this.const(!0)
                        }, r.createElement("span", {
                            class: r.const("dcg-math-field dcg-cell-math-content")
                        })), r.createElement("span", {
                            class: r.const("dcg-drag-icon"),
                            "dcg-drag-mode": function () {
                                return e.model.dragMode
                            },
                            style: function () {
                                return {
                                    color: e.model.color
                                }
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-move")
                        }), r.createElement("i", {
                            class: r.const("dcg-icon-move-horizontal")
                        }), r.createElement("i", {
                            class: r.const("dcg-icon-move-vertical")
                        })), r.createElement("div", {
                            class: r.const("dcg-empty-line")
                        }), r.createElement(c, {
                            predicate: function () {
                                return e.isRightSide()
                            }
                        }, function () {
                            return r.createElement("span", {
                                class: r.const("dcg-fade-right")
                            })
                        }))
                    }
                    ,
                    t.prototype.focusThisCell = function (e) {
                        e.wasHandled() || (e.handle(),
                            this.shouldFocus() || this.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "table",
                                    id: this.table.id,
                                    location: this.lookupCellPosition()
                                }
                            }))
                    }
                    ,
                    t.prototype.lookupCellPosition = function () {
                        return {
                            row: 0,
                            column: this.model.index
                        }
                    }
                    ,
                    t.prototype.getAriaLabel = function () {
                        var e = this.lookupCellPosition();
                        return this.controller.t("Column header __column__", {
                            column: e.column + 1
                        })
                    }
                    ,
                    t.prototype.handlePressedKey = function (e, t) {
                        var n = o.default.getFocusedMathquill();
                        if (n) {
                            var r = o.default.handleKeystrokeAndDecideIfSpecialEvent(n, e, t);
                            r ? this.controller.dispatch({
                                type: "navigate-table-by-key",
                                id: this.table.id,
                                key: e
                            }) : this.handleLatexChanged(n.latex())
                        }
                    }
                    ,
                    t.prototype.handleLatexChanged = function (e) {
                        var t = this.model.latex;
                        t !== e && this.controller.dispatch({
                            type: "set-tablecell-latex",
                            tableId: this.table.id,
                            cell: this.lookupCellPosition(),
                            latex: e
                        })
                    }
                    ,
                    t.prototype.shouldFocus = function () {
                        return s.isEqual(this.lookupCellPosition(), a.getSelectedCell(this.table))
                    }
                    ,
                    t.prototype.handleMQFocusedChanged = function (e) {
                        e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.table.id,
                                location: this.lookupCellPosition()
                            }
                        }) : this.controller.dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "table",
                                id: this.table.id,
                                location: this.lookupCellPosition()
                            }
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = l
    }),
    define("expressions/tables/cell-view", ["require", "exports", "keys", "tslib", "dcgview", "dcgview-helpers/mathquill-view", "dcgview-helpers/static-mathquill-view", "underscore", "graphing-calc/models/table"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = i.Components.If
            , u = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e),
                    t.prototype.init = function () {
                        this.model = this.props.model(),
                            this.controller = this.props.controller(),
                            this.table = this.model.column.table
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return i.createElement("div", {
                            role: i.const("gridcell"),
                            class: function () {
                                return {
                                    "dcg-cell": !0,
                                    "dcg-do-not-blur": !0,
                                    "dcg-empty": e.isEmpty(),
                                    "dcg-non-editable": !!e.model.column.disabled,
                                    "dcg-error": !!e.hasError(),
                                    "dcg-selected": e.shouldFocus()
                                }
                            },
                            onTapStart: this.bindFn(this.focusThisCell)
                        }, i.createElement("div", {
                            class: i.const("dcg-inner-border")
                        }), i.createElement("span", {
                            class: i.const("dcg-error-indicator dcg-do-not-blur tipsy-sticky"),
                            handleevent: i.const("true"),
                            tooltip: this.bindFn(this.getErrorMessage)
                        }), i.createElement(l, {
                            predicate: function () {
                                return !!e.model.column.disabled
                            }
                        }, function () {
                            return i.createElement(s.default, {
                                getAriaLabel: e.bindFn(e.getAriaLabel),
                                latex: function () {
                                    return e.getValue()
                                }
                            }, i.createElement("span", {
                                class: i.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),
                                tabindex: function () {
                                    return e.isEmpty() ? -1 : 0
                                },
                                onKeyDown: e.bindFn(e.handleKeydownOnReadonlyCell),
                                manageFocus: e.const({
                                    shouldBeFocused: e.bindFn(e.shouldFocusReadonlyCell),
                                    onFocusedChanged: e.bindFn(e.handleFocusedChanged)
                                })
                            }))
                        }), i.createElement(l, {
                            predicate: function () {
                                return !e.model.column.disabled
                            }
                        }, function () {
                            return i.createElement(o.default, {
                                latex: function () {
                                    return e.getValue()
                                },
                                isFocused: e.bindFn(e.shouldFocusEditableCell),
                                config: e.const({}),
                                getAriaLabel: e.bindFn(e.getAriaLabel),
                                getAriaPostLabel: e.bindFn(e.getErrorMessage),
                                hasError: e.const(!1),
                                onUserPressedKey: function (t, n) {
                                    return e.handlePressedKey(t, n)
                                },
                                onUserChangedLatex: function (t) {
                                    return e.handleLatexChanged(t)
                                },
                                onFocusedChanged: function (t) {
                                    return e.handleFocusedChanged(t)
                                },
                                selectOnFocus: e.const(!0)
                            }, i.createElement("span", {
                                class: i.const("dcg-math-field dcg-cell-math-content")
                            }))
                        }), i.createElement("div", {
                            class: i.const("dcg-empty-line")
                        }))
                    }
                    ,
                    t.prototype.focusThisCell = function (e) {
                        e.wasHandled() || (e.handle(),
                            this.shouldFocus() || this.controller.dispatch({
                                type: "set-focus-location",
                                location: {
                                    type: "table",
                                    id: this.table.id,
                                    location: this.lookupCellPosition()
                                }
                            }))
                    }
                    ,
                    t.prototype.handlePressedKey = function (e, t) {
                        var n = o.default.getFocusedMathquill();
                        if (n) {
                            var r = o.default.handleKeystrokeAndDecideIfSpecialEvent(n, e, t);
                            r ? this.controller.dispatch({
                                type: "navigate-table-by-key",
                                id: this.table.id,
                                key: e
                            }) : this.handleLatexChanged(n.latex())
                        }
                    }
                    ,
                    t.prototype.handleKeydownOnReadonlyCell = function (e) {
                        var t = n.lookup(e);
                        "Tab" !== t && (e.preventDefault(),
                            t && this.controller.dispatch({
                                type: "navigate-table-by-key",
                                id: this.table.id,
                                key: t
                            }))
                    }
                    ,
                    t.prototype.handleLatexChanged = function (e) {
                        var t = this.getValue();
                        t !== e && this.controller.dispatch({
                            type: "set-tablecell-latex",
                            tableId: this.table.id,
                            cell: this.lookupCellPosition(),
                            latex: e
                        })
                    }
                    ,
                    t.prototype.shouldFocus = function () {
                        return a.isEqual(this.lookupCellPosition(), c.getSelectedCell(this.table))
                    }
                    ,
                    t.prototype.shouldFocusReadonlyCell = function () {
                        return !!this.model.column.disabled && this.shouldFocus()
                    }
                    ,
                    t.prototype.shouldFocusEditableCell = function () {
                        return !this.model.column.disabled && this.shouldFocus()
                    }
                    ,
                    t.prototype.handleFocusedChanged = function (e) {
                        e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.table.id,
                                location: this.lookupCellPosition()
                            }
                        }) : this.controller.dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "table",
                                id: this.table.id,
                                location: this.lookupCellPosition()
                            }
                        })
                    }
                    ,
                    t.prototype.lookupCellPosition = function () {
                        return {
                            row: this.model.row.index,
                            column: this.model.column.index
                        }
                    }
                    ,
                    t.prototype.getPackedError = function () {
                        return this.model.column.packedErrors[this.model.row.index - 1]
                    }
                    ,
                    t.prototype.hasError = function () {
                        return !!this.getPackedError()
                    }
                    ,
                    t.prototype.getErrorMessage = function () {
                        var e = this.getPackedError();
                        return e ? this.controller.unpack(e) : ""
                    }
                    ,
                    t.prototype.getValue = function () {
                        var e = this.model.column.index
                            , t = this.model.row.index - 1
                            , n = this.model.column.disabled;
                        return n ? this.model.column.computedValues[t] || "" : this.table.columns[e].values[t] || ""
                    }
                    ,
                    t.prototype.isEmpty = function () {
                        return "" === this.getValue()
                    }
                    ,
                    t.prototype.getAriaLabel = function () {
                        var e = this.lookupCellPosition()
                            , t = e.row
                            , n = e.column + 1;
                        return this.controller.t("Row __row__ Col __column__", {
                            row: t.toString(),
                            column: n.toString()
                        })
                    }
                    ,
                    t
            }(i.Class);
        t.default = u
    }),
    define("loadcss!expressions.table", function () { }),
    define("expressions/table_view", ["require", "exports", "lib/aria", "keys", "tslib", "./abstract-item-view", "dcgview", "./tables/header-view", "./tables/cell-view", "lib/conditional_blur", "graphing-calc/models/table", "vendor/mathquill", "jquery", "loadcss!expressions.table", "jquery.handleevent"], function (e, t, n, r, i, o, s, a, c, l, u, d, p) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = s.Components.For
            , f = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e),
                    t.prototype.didMount = function () {
                        this.onItemViewMounted()
                    }
                    ,
                    t.prototype.willUnmount = function () {
                        this.onItemViewUnmounted()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-expressionitem": !0,
                                    "dcg-expressiontable": !0,
                                    "dcg-inFolder": !!e.model.folderId,
                                    "dcg-selected": !!e.controller.isItemSelected(e.id),
                                    "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                    "dcg-no-faded-h": e.isRightFocused(),
                                    "dcg-no-faded-v": e.isBottomFocused()
                                }
                            },
                            "expr-id": function () {
                                return e.model.id
                            },
                            onTapStart: this.bindFn(this.onMouseSelect),
                            didMount: this.bindFn(this.didMountContainer),
                            onKeydown: this.bindFn(this.onKeydown)
                        }, s.createElement("div", {
                            class: s.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")
                        }, s.createElement("div", {
                            class: s.const("dcg-main")
                        }, s.createElement("div", {
                            class: s.const("dcg-table-container"),
                            didMount: this.bindFn(this.didMountContainer)
                        }, s.createElement("div", {
                            class: s.const("dcg-table-sliding-container"),
                            style: function () {
                                return {
                                    transform: "translateX(" + e.computeScrolledX() + "px)"
                                }
                            }
                        }, s.createElement(h, {
                            each: function () {
                                return e.model.rowModels
                            },
                            key: function (e) {
                                return e.guid
                            }
                        }, s.createElement("div", {
                            role: s.const("grid"),
                            class: function () {
                                return {
                                    "dcg-tabledata": !0,
                                    "dcg-focus-in-bottom-row": e.isBottomFocused(),
                                    "dcg-focus-in-right-column": e.isRightFocused()
                                }
                            }
                        }, function (t) {
                            return s.createElement(h, {
                                each: function () {
                                    return t.cells
                                },
                                key: function (e) {
                                    return e.guid
                                }
                            }, s.createElement("tr", {
                                role: s.const("row"),
                                "aria-rowindex": function () {
                                    return t.index
                                },
                                class: s.const("dcg-row")
                            }, function (t) {
                                return "header" === t.type ? s.createElement(a.default, {
                                    controller: e.props.controller,
                                    model: e.const(t)
                                }) : s.createElement(c.default, {
                                    controller: e.props.controller,
                                    model: e.const(t)
                                })
                            }))
                        }))))), s.createElement("i", {
                            class: s.const("dcg-icon-remove dcg-top-level-delete"),
                            handleEvent: s.const("true"),
                            onTap: this.bindFn(this.onDelete)
                        })), s.createElement("span", {
                            class: s.const("dcg-tab dcg-action-drag"),
                            handleevent: s.const("true"),
                            tapboundary: s.const("true"),
                            disablescroll: s.const("true"),
                            style: s.const("touch-action:none"),
                            onTapStart: this.bindFn(this.onDragPending)
                        }, s.createElement("span", {
                            class: s.const("dcg-num")
                        }, function () {
                            return e.model.displayIndex
                        }), s.createElement("div", {
                            class: s.const("dcg-tab-interior")
                        })), s.createElement("span", {
                            class: s.const("dcg-exp-actions")
                        }, s.createElement("span", {
                            class: s.const("dcg-delete-btn dcg-tooltip"),
                            handleEvent: s.const("true"),
                            tooltip: function () {
                                return e.controller.t("Delete")
                            },
                            onTap: this.bindFn(this.onDelete)
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-remove")
                        }))))
                    }
                    ,
                    t.prototype.didMountContainer = function (e) {
                        this.node = e,
                            p(e).on("scroll", function () {
                                return e.scrollLeft = 0
                            })
                    }
                    ,
                    t.prototype.getSelectedCell = function () {
                        return u.getSelectedCell(this.model)
                    }
                    ,
                    t.prototype.computeScrolledX = function () {
                        if (!this.getSelectedCell() || !this.node)
                            return 0;
                        var e = this.node.children[0]
                            , t = this.node.querySelector(".dcg-selected");
                        if (null === e || null === t)
                            return 0;
                        var n = this.node.getBoundingClientRect()
                            , r = t.getBoundingClientRect()
                            , i = r.left - e.getBoundingClientRect().left
                            , o = n.width - i - r.width - 80
                            , s = Math.min(0, n.width - e.scrollWidth - 30);
                        return o = Math.max(o, s),
                            Math.min(0, o)
                    }
                    ,
                    t.prototype.onMouseSelect = function (e) {
                        "dcg-tap" === e.type && "mouse" === e.device || "dcg-tapstart" === e.type && "touch" === e.device || e.wasHandled() || (e.handle(),
                            l.default(),
                            this.controller.dispatch({
                                type: "set-selected-id",
                                id: this.id
                            }))
                    }
                    ,
                    t.prototype.isBottomFocused = function () {
                        var e = this.getSelectedCell();
                        return !!e && e.row === this.model.columnModels[0].cells.length
                    }
                    ,
                    t.prototype.isRightFocused = function () {
                        var e = this.getSelectedCell();
                        return !!e && e.column === this.model.columnModels.length - 1
                    }
                    ,
                    t.prototype.isFocused = function () {
                        return !!this.getSelectedCell()
                    }
                    ,
                    t.prototype.onKeydown = function (e) {
                        !e.ctrlKey || e.shiftKey || e.altKey || e.metaKey || ("Up" === r.lookup(e) ? (e.preventDefault(),
                            e.stopPropagation(),
                            this.moveToFirstCellInColumn()) : "Down" === r.lookup(e) ? (e.preventDefault(),
                                e.stopPropagation(),
                                this.moveToLastCellInColumn()) : "Left" === r.lookup(e) ? (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.moveToFirstCellInRow()) : "Right" === r.lookup(e) ? (e.preventDefault(),
                                        e.stopPropagation(),
                                        this.moveToLastCellInRow()) : "H" === r.lookupChar(e) && (e.preventDefault(),
                                            e.stopPropagation(),
                                            this.speakColumnHeader()))
                    }
                    ,
                    t.prototype.moveToFirstCellInColumn = function () {
                        var e = this.getSelectedCell();
                        e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.id,
                                location: {
                                    row: 0,
                                    column: e.column
                                }
                            }
                        })
                    }
                    ,
                    t.prototype.moveToLastCellInColumn = function () {
                        var e = this.getSelectedCell();
                        e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.id,
                                location: {
                                    row: this.model.rowModels.length - 1,
                                    column: e.column
                                }
                            }
                        })
                    }
                    ,
                    t.prototype.moveToFirstCellInRow = function () {
                        var e = this.getSelectedCell();
                        e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.id,
                                location: {
                                    row: e.row,
                                    column: 0
                                }
                            }
                        })
                    }
                    ,
                    t.prototype.moveToLastCellInRow = function () {
                        var e = this.getSelectedCell();
                        e && this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "table",
                                id: this.id,
                                location: {
                                    row: e.row,
                                    column: this.model.columnModels[0].cells.length - 1
                                }
                            }
                        })
                    }
                    ,
                    t.prototype.speakColumnHeader = function () {
                        var e = this.controller.t("No column header")
                            , t = this.getSelectedCell();
                        if (t) {
                            var r = this.model.rowModels[0].cells[t.column];
                            if (r && "header" === r.type && r.latex && "" !== r.latex) {
                                var i = d.MQ.StaticMath(p("<span>" + r.latex + "</span>")[0]);
                                e = i.mathspeak()
                            }
                        }
                        n.alert(e)
                    }
                    ,
                    t
            }(o.default);
        t.default = f
    }),
    define("loadcss!folder", function () { }),
    define("expressions/folder_view", ["require", "exports", "lib/aria", "keys", "browser", "tslib", "./abstract-item-view", "./smart_textarea", "dcgview", "jquery.handleevent", "loadcss!folder"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return o.__extends(t, e),
                t.prototype.didMount = function () {
                    this.onItemViewMounted()
                }
                ,
                t.prototype.willUnmount = function () {
                    this.onItemViewUnmounted()
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return c.createElement("div", {
                        class: function () {
                            return {
                                "dcg-do-not-blur": !0,
                                "dcg-expressionitem": !0,
                                "dcg-expressionfolder": !0,
                                "dcg-inFolder": !!e.model.folderId,
                                "dcg-selected": e.controller.isItemSelected(e.id),
                                "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                "dcg-collapsed": !!e.model.collapsed,
                                "dcg-hidden": !!e.model.hidden,
                                "dcg-has-items": e.controller.getNumberOfItemsInFolder(e.id) > 0,
                                "dcg-secretFolder": e.model.secret && !e.controller.canAdministerSecretFolders()
                            }
                        },
                        "expr-id": function () {
                            return e.model.id
                        },
                        onTapStart: this.bindFn(this.onMouseSelect),
                        onTap: this.bindFn(this.onMouseSelect)
                    }, c.createElement("div", {
                        class: c.const("dcg-fade-container")
                    }, c.createElement("div", {
                        class: c.const("dcg-main")
                    }, c.createElement("div", {
                        role: c.const("button"),
                        tabindex: c.const("0"),
                        "aria-pressed": function () {
                            return e.model.collapsed
                        },
                        "aria-label": function () {
                            return e.controller.t("Collapse Folder")
                        },
                        class: c.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),
                        handleEvent: c.const("true"),
                        onTap: this.bindFn(this.toggleCollapsed)
                    }, c.createElement("i", {
                        class: c.const("dcg-icon-caret-down")
                    })), c.createElement(a.default, {
                        shouldFocus: this.bindFn(this.isFocused),
                        text: function () {
                            return e.model.title
                        },
                        placeholder: function () {
                            return e.controller.t("Enter a note...")
                        },
                        showLinks: function () {
                            return e.controller.areLinksEnabled()
                        },
                        onInput: this.bindFn(this.onInput),
                        onFocusChange: this.bindFn(this.onFocusChange),
                        onSpecialKey: this.bindFn(this.onSpecialKey),
                        ariaLabel: this.bindFn(this.getAriaLabel)
                    }), c.createElement("div", {
                        role: c.const("checkbox"),
                        "aria-checked": function () {
                            return e.model.secret
                        },
                        "aria-label": function () {
                            return e.controller.t("Hide this folder from students")
                        },
                        class: function () {
                            return {
                                "dcg-action-toggle-secret-folder": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-checked": e.model.secret
                            }
                        },
                        style: function () {
                            return {
                                display: e.controller.canAdministerSecretFolders() ? void 0 : "none"
                            }
                        },
                        handleEvent: c.const("true"),
                        onTap: this.bindFn(this.toggleSecret)
                    }, c.createElement("span", {
                        class: c.const("dcg-checkbox-box")
                    }, c.createElement("i", {
                        class: c.const("dcg-icon-check")
                    })), c.createElement("span", {
                        class: c.const("dcg-checkbox-label")
                    }, function () {
                        return e.controller.t("Hide this folder from students.")
                    }))), c.createElement("i", {
                        class: c.const("dcg-icon-remove dcg-top-level-delete"),
                        handleEvent: c.const("true"),
                        onTap: this.bindFn(this.onDelete)
                    })), c.createElement("span", {
                        class: c.const("dcg-tab dcg-action-drag"),
                        handleevent: c.const("true"),
                        tapboundary: c.const("true"),
                        disablescroll: c.const("true"),
                        style: c.const("touch-action:none"),
                        onTapStart: this.bindFn(this.onDragPending)
                    }, c.createElement("span", {
                        class: c.const("dcg-num")
                    }, function () {
                        return e.model.displayIndex
                    }), c.createElement("div", {
                        class: c.const("dcg-tab-interior")
                    }), c.createElement("div", {
                        class: c.const("dcg-tab-interior")
                    }, c.createElement("span", {
                        role: c.const("button"),
                        tabindex: c.const("0"),
                        "aria-pressed": function () {
                            return !!e.model.hidden
                        },
                        "aria-label": function () {
                            return e.controller.t("Hide Folder")
                        },
                        class: c.const("dcg-action-toggle-folder-hidden dcg-graph-icon dcg-folder dcg-icon"),
                        onTap: this.bindFn(this.toggleHidden)
                    }, c.createElement("i", {
                        class: c.const("dcg-icon-hidden")
                    }), c.createElement("i", {
                        class: c.const("dcg-icon-folder")
                    })))), c.createElement("span", {
                        class: c.const("dcg-exp-actions")
                    }, c.createElement("span", {
                        class: c.const("dcg-graphic"),
                        handleEvent: c.const("true ")
                    }), c.createElement("span", {
                        class: c.const("dcg-delete-btn dcg-tooltip"),
                        onTap: this.bindFn(this.onDelete),
                        handleEvent: c.const("true"),
                        tooltip: function () {
                            return e.controller.t("Delete")
                        }
                    }, c.createElement("i", {
                        class: c.const("dcg-icon-remove")
                    }))))
                }
                ,
                t.prototype.toggleHidden = function () {
                    this.controller.dispatch({
                        type: "toggle-item-hidden",
                        id: this.id
                    })
                }
                ,
                t.prototype.toggleSecret = function () {
                    this.controller.dispatch({
                        type: "set-item-secret",
                        id: this.id,
                        isSecret: !this.model.secret
                    })
                }
                ,
                t.prototype.toggleCollapsed = function () {
                    this.controller.dispatch({
                        type: "set-folder-collapsed",
                        id: this.id,
                        isCollapsed: !this.model.collapsed
                    })
                }
                ,
                t.prototype.onInput = function (e) {
                    this.controller.dispatch({
                        type: "set-folder-title",
                        id: this.id,
                        title: e
                    })
                }
                ,
                t.prototype.onFocusChange = function (e) {
                    e ? this.controller.dispatch({
                        type: "set-focus-location",
                        location: {
                            type: "folder",
                            id: this.id
                        }
                    }) : this.controller.dispatch({
                        type: "blur-focus-location",
                        location: {
                            type: "folder",
                            id: this.id
                        }
                    })
                }
                ,
                t.prototype.onSpecialKey = function (e) {
                    return this.controller.dispatch({
                        type: "on-special-key-pressed",
                        key: e
                    })
                }
                ,
                t.prototype.onKeydown = function (e) {
                    var t = e.altKey && !e.metaKey && !e.ctrlKey && !e.shiftKey
                        , o = e.metaKey && !e.altKey && !e.shiftKey && !e.ctrlKey
                        , s = i.IS_APPLE ? o : t;
                    s && r.lookup(e) === r.UP && (e.preventDefault(),
                        e.stopPropagation(),
                        this.controller.dispatch({
                            type: "set-folder-collapsed",
                            id: this.id,
                            isCollapsed: !this.model.collapsed
                        }),
                        this.model.collapsed ? n.alert(this.controller.t("folder collapsed")) : n.alert(this.controller.t("folder expanded")))
                }
                ,
                t.prototype.isFocused = function () {
                    var e = this.controller.getFocusLocation();
                    return !(!e || "folder" !== e.type || e.id !== this.id)
                }
                ,
                t.prototype.getAriaLabel = function () {
                    var e = ""
                        , t = "";
                    this.model.hidden || this.model.collapsed || this.model.secret ? !this.model.hidden || this.model.collapsed || this.model.secret ? this.model.hidden || !this.model.collapsed || this.model.secret ? this.model.hidden || this.model.collapsed || !this.model.secret ? this.model.hidden && this.model.collapsed && !this.model.secret ? t = this.controller.t("Hidden Collapsed Folder") : this.model.hidden && !this.model.collapsed && this.model.secret ? t = this.controller.t("Hidden Secret Folder") : !this.model.hidden && this.model.collapsed && this.model.secret ? t = this.controller.t("Collapsed Secret Folder") : this.model.hidden && this.model.collapsed && this.model.secret && (t = this.controller.t("Hidden Collapsed Secret Folder")) : t = this.controller.t("Secret Folder") : t = this.controller.t("Collapsed Folder") : t = this.controller.t("Hidden Folder") : t = this.controller.t("Folder");
                    var n = this.controller.getNumberOfItemsInFolder(this.id);
                    return e = n > 0 ? this.controller.t("__folder__ has __count__ items", {
                        folder: t,
                        count: n
                    }) : t
                }
                ,
                t
        }(s.default);
        t.default = l
    }),
    define("loadcss!image_opacity_menu", function () { }),
    define("expressions/image_options_view", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/checkbox", "loadcss!image_opacity_menu"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.For
            , s = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            this.model = this.props.model(),
                            this.id = this.model.id,
                            r.createElement("div", {
                                class: r.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")
                            }, r.createElement("div", {
                                class: r.const("dcg-triangle")
                            }), r.createElement("div", {
                                class: r.const("dcg-opacities-menu dcg-dividing-line-after")
                            }, r.createElement("div", {
                                class: r.const("dcg-title")
                            }, function () {
                                return e.controller.t("Opacity")
                            }), r.createElement(o, {
                                each: function () {
                                    return e.controller.getImageOpacities()
                                }
                            }, r.createElement("div", {
                                class: r.const("dcg-opacities-menu")
                            }, function (t) {
                                return r.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-opacity-option": !0,
                                            "dcg-graph-icon": !0,
                                            "dcg-selected": e.model.opacity === t
                                        }
                                    },
                                    "image-opacity": e.const(t),
                                    handleevent: r.const("true")
                                }, r.createElement("span", {
                                    class: r.const("dcg-image-thumb"),
                                    style: function () {
                                        return {
                                            "background-image": "url(" + encodeURI(e.model.image_url) + ")",
                                            opacity: t
                                        }
                                    },
                                    onTap: function () {
                                        return e.onSelectOpacity(t)
                                    }
                                }), r.createElement("i", {
                                    class: r.const("dcg-icon-check")
                                }))
                            }))), r.createElement("div", {
                                class: r.const("dcg-styles-div dcg-options-menu-section")
                            }, r.createElement("div", {
                                class: r.const("dcg-styles-menu")
                            }, r.createElement(i.Checkbox, {
                                checked: function () {
                                    return !e.model.foreground
                                },
                                onChange: this.bindFn(this.onToggleForeground),
                                disabled: this.const(!1),
                                ariaLabel: function () {
                                    return e.controller.t("Place behind graphs")
                                }
                            }, function () {
                                return e.controller.t("Place behind graphs")
                            }))))
                    }
                    ,
                    t.prototype.onToggleForeground = function (e) {
                        this.controller.dispatch({
                            type: "set-image-in-foreground",
                            id: this.id,
                            foreground: !e
                        })
                    }
                    ,
                    t.prototype.onSelectOpacity = function (e) {
                        this.controller.dispatch({
                            type: "set-image-opacity",
                            id: this.id,
                            opacity: e
                        })
                    }
                    ,
                    t
            }(r.Class);
        t.default = s
    }),
    define("expressions/image_icon_view", ["require", "exports", "tslib", "dcgview", "./abstract_icon_view", "./image_options_view", "jquery", "jquery.handleevent"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    e.prototype.init.call(this),
                        this.model = this.props.model()
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("span", {
                        class: function () {
                            return t = {
                                "dcg-icon": !0,
                                "dcg-graph-icon": !0,
                                "tipsy-sticky": !0
                            },
                                t[e.getIconClass()] = !0,
                                t;
                            var t
                        },
                        tooltip: function () {
                            return e.model.error ? e.controller.unpack(e.model.error) : ""
                        },
                        didMount: this.bindFn(this.didMountRoot)
                    }, r.createElement("span", {
                        class: r.const("dcg-image-thumb"),
                        style: function () {
                            return {
                                "background-image": e.getBackgroundImage(),
                                opacity: e.model.opacity
                            }
                        }
                    }), r.createElement("i", {
                        class: r.const("dcg-icon-hidden")
                    }))
                }
                ,
                t.prototype.didMountRoot = function (e) {
                    var t = this;
                    this.rootElt = e,
                        s(e).closest(".dcg-action-icon-mouse").on("dcg-tap", function (e) {
                            t.handleIconTapped(e, "mouse")
                        }),
                        s(e).closest(".dcg-action-icon-touch").on("dcg-tap", function (e) {
                            t.handleIconTapped(e, "touch")
                        }),
                        s(e).closest(".dcg-action-icon-mouse").on("dcg-longhold", function (e) {
                            t.handleIconLongHold(e, "mouse")
                        }),
                        s(e).closest(".dcg-action-icon-touch").on("dcg-longhold", function (e) {
                            t.handleIconLongHold(e, "touch")
                        })
                }
                ,
                t.prototype.createOptionsMenuView = function () {
                    var e = this.getOptionsMenuContainerSelector()
                        , t = r.mountToNode(o.default, e[0], {
                            controller: this.props.controller,
                            model: this.props.model
                        });
                    return t
                }
                ,
                t.prototype.hasError = function () {
                    return !!this.model.error
                }
                ,
                t.prototype.getBackgroundImage = function () {
                    return "failed" === this.model.loadStatus ? "none" : this.model.image_url === this.lastURL ? this.lastEncodedURL : (this.lastURL = this.model.image_url,
                        this.lastEncodedURL = "url(" + encodeURI(this.model.image_url) + ")",
                        this.lastEncodedURL)
                }
                ,
                t.prototype.handleIconLongHold = function (e, t) {
                    e.device === t && (e.handle("dcg-longhold"),
                        this.toggleOptions())
                }
                ,
                t.prototype.handleIconTapped = function (e, t) {
                    if (!e.wasHandled("dragdrop") && !e.wasLongheld() && e.device === t) {
                        if (this.optionsShown)
                            return this.toggleOptions(),
                                !1;
                        if (this.controller.isInEditListMode())
                            this.toggleOptions();
                        else {
                            if (this.hasStableError())
                                return;
                            this.controller.dispatch({
                                type: "toggle-item-hidden",
                                id: this.model.id
                            })
                        }
                        return !0
                    }
                }
                ,
                t.prototype.getIconClass = function () {
                    return "loading" === this.model.loadStatus ? "dcg-loading-image" : "failed" === this.model.loadStatus ? "dcg-failed-image" : this.hasStableError() ? "dcg-error" : this.model.shouldGraph ? "" : "dcg-hidden"
                }
                ,
                t
        }(i.default);
        t.default = a
    }),
    define("expressions/image_view", ["require", "exports", "tslib", "./abstract-item-view", "./smart_textarea", "dcgview", "dcgview-helpers/mathquill-view", "lib/conditional_blur", "expressions/promptslider_view", "./image_icon_view", "graphing-calc/models/image", "jquery.handleevent", "loadcss!expressions.image"], function (e, t, n, r, i, o, s, a, c, l, u) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var d = o.Components
            , p = d.If
            , h = d.Switch
            , f = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return o.createElement("div", {
                            class: o.const("dcg-image-input-mathquill")
                        }, o.createElement(s.default, {
                            latex: function () {
                                return e.props.model()[e.props.name()]
                            },
                            isFocused: function () {
                                return e.props.focusedInput() === e.props.name()
                            },
                            selectOnFocus: this.const(!0),
                            config: this.const({}),
                            getAriaLabel: function () {
                                return e.props.controller().t(e.props.name())
                            },
                            getAriaPostLabel: this.const(""),
                            hasError: this.const(!1),
                            onUserPressedKey: function (t, n) {
                                return e.handlePressedKey(t, n)
                            },
                            onUserChangedLatex: this.bindFn(this.handleLatexChanged),
                            onFocusedChanged: this.bindFn(this.handleMQFocusedChanged)
                        }, o.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-focus": e.props.focusedInput() === e.props.name(),
                                    "dcg-invalid": u.hasInputError(e.props.model(), e.props.name())
                                }
                            }
                        })))
                    }
                    ,
                    t.prototype.handlePressedKey = function (e, t) {
                        var n = this.props.name()
                            , r = s.default.getFocusedMathquill()
                            , i = ["center", "angle", "width", "height"]
                            , o = i.indexOf(n);
                        if (r) {
                            if ("Esc" === e)
                                return void a.default();
                            var c = -1;
                            "Up" === e && (c = o - 1),
                                "Down" === e && (c = o + 1),
                                "Left" === e && (c = o - 2),
                                "Right" === e && (c = o + 2);
                            var l = e;
                            if (c >= 0 && c < i.length)
                                return void (s.default.applyArrowKeyAndReturnIfWasAtBounds(r, l, t) && this.focusInput(i[c]));
                            r.keystroke(e, t),
                                this.handleLatexChanged(r.latex())
                        }
                    }
                    ,
                    t.prototype.focusInput = function (e) {
                        this.props.controller().dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "image",
                                id: this.props.model().id,
                                location: e
                            }
                        })
                    }
                    ,
                    t.prototype.handleLatexChanged = function (e) {
                        var t = this.props.name();
                        this.props.model().draggingOnGraphpaper || u.getMQAttribute(this.props.model(), t) !== e && this.props.controller().dispatch({
                            type: "set-image-mq-attribute",
                            id: this.props.model().id,
                            attribute: t,
                            latex: e
                        })
                    }
                    ,
                    t.prototype.handleMQFocusedChanged = function (e) {
                        var t = this.props.name();
                        e ? this.props.focusedInput() !== t && this.props.controller().dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "image",
                                id: this.props.model().id,
                                location: t
                            }
                        }) : this.props.controller().dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "image",
                                id: this.props.model().id,
                                location: t
                            }
                        })
                    }
                    ,
                    t
            }(o.Class)
            , m = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.didMount = function () {
                        this.onItemViewMounted()
                    }
                    ,
                    t.prototype.willUnmount = function () {
                        this.onItemViewUnmounted()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return o.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-do-not-blur": !0,
                                    "dcg-expressionitem": !0,
                                    "dcg-expressionimage": !0,
                                    "dcg-inFolder": !!e.model.folderId,
                                    "dcg-selected": e.controller.isItemSelected(e.id),
                                    "dcg-dragging": !!e.controller.isItemBeingDragged(e.id),
                                    "dcg-input-focused": e.getFocusedInput() && "name" !== e.getFocusedInput()
                                }
                            },
                            "expr-id": function () {
                                return e.model.id
                            },
                            onTapStart: this.bindFn(this.onMouseSelect),
                            onTap: this.bindFn(this.onMouseSelect)
                        }, o.createElement("div", {
                            class: o.const("dcg-fade-container")
                        }, o.createElement("div", {
                            class: o.const("dcg-main")
                        }, o.createElement(h, {
                            key: function () {
                                return e.model.loadStatus
                            }
                        }, function (t) {
                            switch (t) {
                                case "failed":
                                    return o.createElement("div", null, o.createElement("div", {
                                        class: o.const("dcg-image-failed")
                                    }, function () {
                                        return e.controller.t("Failed to load image.")
                                    }), o.createElement("div", {
                                        role: o.const("button"),
                                        tabindex: o.const(0),
                                        class: o.const("dcg-retry-loading-image"),
                                        onTap: e.bindFn(e.onRetryLoad)
                                    }, function () {
                                        return e.controller.t("Retry.")
                                    }));
                                case "loading":
                                    return o.createElement("div", null, o.createElement("div", {
                                        class: o.const("dcg-image-loading")
                                    }, function () {
                                        return e.controller.t("Loading image...")
                                    }), o.createElement("div", {
                                        role: o.const("button"),
                                        tabindex: o.const(0),
                                        class: o.const("dcg-retry-loading-image"),
                                        onTap: e.bindFn(e.onRetryLoad)
                                    }, function () {
                                        return e.controller.t("Retry.")
                                    }));
                                case "loaded":
                                    return o.createElement("div", {
                                        class: o.const("dcg-image-loaded")
                                    }, o.createElement(i.default, {
                                        shouldFocus: function () {
                                            return "name" === e.getFocusedInput()
                                        },
                                        text: function () {
                                            return e.model.name
                                        },
                                        placeholder: function () {
                                            return e.controller.t("Enter a note...")
                                        },
                                        showLinks: function () {
                                            return e.controller.areLinksEnabled()
                                        },
                                        onInput: e.bindFn(e.onNameInput),
                                        onFocusChange: e.bindFn(e.onNameFocusChange),
                                        onSpecialKey: e.bindFn(e.onNameSpecialKey)
                                    }), o.createElement("div", {
                                        class: o.const("dcg-do-blur dcg-image-input-grid"),
                                        handleEvent: o.const("true")
                                    }, o.createElement("div", {
                                        class: o.const("dcg-image-input-name")
                                    }, function () {
                                        return e.controller.t("Center:")
                                    }), o.createElement(f, {
                                        name: e.const("center"),
                                        controller: function () {
                                            return e.controller
                                        },
                                        model: function () {
                                            return e.model
                                        },
                                        focusedInput: e.bindFn(e.getFocusedInput)
                                    }), o.createElement("div", {
                                        class: o.const("dcg-image-input-name")
                                    }, function () {
                                        return e.controller.t("Width:")
                                    }), o.createElement(f, {
                                        name: e.const("width"),
                                        controller: function () {
                                            return e.controller
                                        },
                                        model: function () {
                                            return e.model
                                        },
                                        focusedInput: e.bindFn(e.getFocusedInput)
                                    }), o.createElement("div", {
                                        class: o.const("dcg-image-input-name")
                                    }, function () {
                                        return e.controller.t("Angle:")
                                    }), o.createElement(f, {
                                        name: e.const("angle"),
                                        controller: function () {
                                            return e.controller
                                        },
                                        model: function () {
                                            return e.model
                                        },
                                        focusedInput: e.bindFn(e.getFocusedInput)
                                    }), o.createElement("div", {
                                        class: o.const("dcg-image-input-name")
                                    }, function () {
                                        return e.controller.t("Height:")
                                    }), o.createElement(f, {
                                        name: e.const("height"),
                                        controller: function () {
                                            return e.controller
                                        },
                                        model: function () {
                                            return e.model
                                        },
                                        focusedInput: e.bindFn(e.getFocusedInput)
                                    })));
                                default:
                                    var n = t;
                                    return n
                            }
                        })), o.createElement("span", {
                            class: o.const("dcg-fadeout")
                        }), o.createElement("i", {
                            class: o.const("dcg-icon-remove dcg-top-level-delete"),
                            handleEvent: o.const("true"),
                            onTap: this.bindFn(this.onDelete)
                        }), o.createElement(p, {
                            predicate: function () {
                                return e.getVariables().length > 0
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: e.getFooterClass()
                            }, o.createElement(c.default, {
                                model: e.props.model,
                                controller: e.props.controller,
                                variables: e.bindFn(e.getVariables),
                                onCreateSliders: e.bindFn(e.onCreateSliders)
                            }))
                        })), o.createElement("span", {
                            class: o.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),
                            handleevent: o.const("true"),
                            tapboundary: o.const("true"),
                            disablescroll: o.const("true"),
                            style: o.const("touch-action:none"),
                            onTapStart: this.bindFn(this.onDragPending)
                        }, o.createElement("span", {
                            class: o.const("dcg-num")
                        }, function () {
                            return e.model.displayIndex
                        }), o.createElement("div", {
                            class: o.const("dcg-tab-interior dcg-action-icon-mouse")
                        }, o.createElement(l.default, {
                            model: this.props.model,
                            controller: this.props.controller
                        }))), o.createElement("span", {
                            class: o.const("dcg-exp-actions")
                        }, o.createElement("span", {
                            class: o.const("dcg-graphic"),
                            handleEvent: o.const("true ")
                        }), o.createElement("span", {
                            role: o.const("button"),
                            tabindex: o.const(0),
                            "aria-label": function () {
                                return e.controller.t("Delete")
                            },
                            class: o.const("dcg-delete-btn dcg-tooltip"),
                            handleEvent: o.const("true"),
                            tooltip: function () {
                                return e.controller.t("Delete")
                            },
                            onTap: this.bindFn(this.onDelete)
                        }, o.createElement("i", {
                            class: o.const("dcg-icon-remove")
                        }))))
                    }
                    ,
                    t.prototype.getFooterClass = function () {
                        return this.isFirstRender() ? this.const("dcg-expression-bottom") : this.const("dcg-expression-bottom dcg-fadein-bottom")
                    }
                    ,
                    t.prototype.getVariables = function () {
                        return this.model.formula && this.model.formula.variables || []
                    }
                    ,
                    t.prototype.onCreateSliders = function (e) {
                        this.controller.dispatch({
                            type: "create-sliders-for-item",
                            id: this.id,
                            variables: e
                        })
                    }
                    ,
                    t.prototype.onNameInput = function (e) {
                        this.controller.dispatch({
                            type: "set-image-name",
                            id: this.id,
                            name: e
                        })
                    }
                    ,
                    t.prototype.onNameFocusChange = function (e) {
                        e ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "image",
                                id: this.id,
                                location: "name"
                            }
                        }) : "name" === this.getFocusedInput() && this.controller.dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "image",
                                id: this.id,
                                location: "name"
                            }
                        })
                    }
                    ,
                    t.prototype.onNameSpecialKey = function (e) {
                        return this.controller.dispatch({
                            type: "on-special-key-pressed",
                            key: e
                        })
                    }
                    ,
                    t.prototype.getFocusedInput = function () {
                        var e = this.controller.getFocusLocation();
                        if (e && "image" === e.type && e.id === this.model.id)
                            return e.location
                    }
                    ,
                    t.prototype.onRetryLoad = function () {
                        this.controller.dispatch({
                            type: "image-retry-loading",
                            id: this.id
                        })
                    }
                    ,
                    t
            }(r.default);
        t.default = m
    }),
    define("expressions/shell_view", ["require", "exports", "tslib", "dcgview", "./abstract-item-view"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.didMount = function () {
                    this.onItemViewMounted()
                }
                ,
                t.prototype.willUnmount = function () {
                    this.onItemViewUnmounted()
                }
                ,
                t.prototype.template = function () {
                    var e = "";
                    return this.model.cachedRenderHeight && (e = "height:" + this.model.cachedRenderHeight + "px"),
                        r.createElement("div", {
                            class: r.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),
                            "expr-id": this.const(this.model.id),
                            onTap: this.bindFn(this.onMouseSelect),
                            style: r.const(e)
                        })
                }
                ,
                t
        }(i.default);
        t.default = o
    }),
    define("expressions/drag_container_view", ["require", "exports", "tslib", "dcgview"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    this.controller = this.props.controller()
                }
                ,
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-drag-container"),
                        style: function () {
                            return {
                                top: e.getTopPx()
                            }
                        }
                    }, this.children)
                }
                ,
                t.prototype.getTopPx = function () {
                    var e = this.controller.getRawDragState();
                    if (e)
                        return e.itemTop + "px"
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!new_expression", function () { }),
    define("expressions/new_expression_view", ["require", "exports", "tslib", "dcgview", "loadcss!new_expression"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return this.controller = this.props.controller(),
                        r.createElement("div", {
                            class: r.const("dcg-expressionitem dcg-new-expression dcg-opened")
                        }, r.createElement("div", {
                            class: r.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),
                            onTap: this.bindFn(this.newMath)
                        }, r.createElement("div", {
                            class: r.const("dcg-new-expression-fade")
                        })), r.createElement("span", {
                            class: r.const("dcg-tab")
                        }, r.createElement("span", {
                            class: r.const("dcg-num dcg-variable-index")
                        }, this.bindFn(this.getIndex)), r.createElement("div", {
                            class: r.const("dcg-tab-interior")
                        })))
                }
                ,
                t.prototype.getIndex = function () {
                    return this.controller.getNextDisplayIndex()
                }
                ,
                t.prototype.newMath = function () {
                    this.controller.dispatch({
                        type: "new-expression-at-end"
                    })
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!add_expression", function () { }),
    define("expressions/add_expression_view", ["require", "exports", "keys", "browser", "tslib", "dcgview", "jquery", "loadcss!add_expression"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = o.Components.If
            , c = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return i.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            o.createElement("div", {
                                class: o.const("dcg-add-expression-container dcg-pull-left")
                            }, o.createElement("span", {
                                class: function () {
                                    return {
                                        "dcg-btn": !0,
                                        "dcg-btn-light-gray": !0,
                                        "dcg-hide-in-edit": !0,
                                        "dcg-add-expression-btn": !0,
                                        "dcg-action-add-expression": !0,
                                        "dcg-tooltip": !0,
                                        "dcg-do-blur": !0,
                                        "dcg-active": e.controller.isAddExpressionOpen(),
                                        "dcg-uploading-images": e.controller.isUploadingImages()
                                    }
                                },
                                handleEvent: o.const("true"),
                                tooltip: function () {
                                    return e.controller.t("Add Item")
                                },
                                role: o.const("button"),
                                tabindex: o.const("0"),
                                "aria-haspopup": o.const("true"),
                                "aria-expanded": function () {
                                    return e.controller.isAddExpressionOpen()
                                },
                                "aria-label": function () {
                                    return e.controller.t("Add Item")
                                },
                                onTap: this.bindFn(this.toggleAddExpression),
                                didMount: this.bindFn(this.didMountToggleButton)
                            }, o.createElement("i", {
                                class: o.const("dcg-icon-plus")
                            }), o.createElement("i", {
                                class: o.const("dcg-icon-caret-down")
                            })), o.createElement(a, {
                                predicate: function () {
                                    return e.controller.isAddExpressionOpen()
                                }
                            }, function () {
                                return o.createElement("div", {
                                    class: function () {
                                        return {
                                            "dcg-add-expression-dropdown": !0,
                                            "dcg-popover": !0,
                                            "dcg-bottom": !e.controller.getLayoutMeasurements().isNarrow,
                                            "dcg-right": e.controller.getLayoutMeasurements().isNarrow
                                        }
                                    },
                                    role: o.const("complementary"),
                                    "aria-label": o.const("Add Item Menu"),
                                    didMount: e.bindFn(e.didMountPopover),
                                    didUnmount: e.bindFn(e.didUnmountPopover)
                                }, o.createElement("div", {
                                    class: o.const("dcg-popover-interior")
                                }, o.createElement("div", {
                                    class: o.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),
                                    role: o.const("button"),
                                    tabindex: o.const(0),
                                    "aria-label": function () {
                                        return e.controller.t("Add Expression")
                                    },
                                    didMount: e.bindFn(e.didMountNewExpression),
                                    onTap: e.bindFn(e.newExpression),
                                    handleEvent: o.const("true")
                                }, o.createElement("i", {
                                    class: o.const("dcg-icon-new-expression dcg-expression-icon")
                                }), function () {
                                    return e.controller.t("expression")
                                }), o.createElement(a, {
                                    predicate: function () {
                                        return e.controller.areNotesEnabled()
                                    }
                                }, function () {
                                    return o.createElement("div", {
                                        class: o.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),
                                        role: o.const("button"),
                                        tabindex: o.const(0),
                                        "aria-label": function () {
                                            return e.controller.t("Add Note")
                                        },
                                        onTap: e.bindFn(e.newText),
                                        handleEvent: o.const("true")
                                    }, o.createElement("i", {
                                        class: o.const("dcg-icon-new-text dcg-expression-icon")
                                    }), function () {
                                        return e.controller.t("note")
                                    })
                                }), o.createElement("div", {
                                    class: o.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),
                                    role: o.const("button"),
                                    tabindex: o.const(0),
                                    "aria-label": function () {
                                        return e.controller.t("Add Table")
                                    },
                                    onTap: e.bindFn(e.newTable),
                                    handleEvent: o.const("true")
                                }, o.createElement("i", {
                                    class: o.const("dcg-icon-new-table dcg-expression-icon")
                                }), function () {
                                    return e.controller.t("table")
                                }), o.createElement(a, {
                                    predicate: function () {
                                        return e.controller.areFoldersEnabled()
                                    }
                                }, function () {
                                    return o.createElement("div", {
                                        class: o.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),
                                        role: o.const("button"),
                                        tabindex: o.const(0),
                                        "aria-label": function () {
                                            return e.controller.t("Add Folder")
                                        },
                                        onTap: e.bindFn(e.newFolder),
                                        handleEvent: o.const("true")
                                    }, o.createElement("i", {
                                        class: o.const("dcg-icon-new-folder dcg-expression-icon")
                                    }), function () {
                                        return e.controller.t("folder")
                                    })
                                }), o.createElement(a, {
                                    predicate: function () {
                                        return e.controller.areImagesEnabled()
                                    }
                                }, function () {
                                    return o.createElement("div", {
                                        class: o.const("dcg-new-item dcg-do-not-blur dcg-action-newimage"),
                                        role: o.const("button"),
                                        tabindex: o.const(0),
                                        "aria-label": function () {
                                            return e.controller.t("Add Image")
                                        },
                                        onTap: e.bindFn(e.newImage),
                                        handleEvent: o.const("true")
                                    }, o.createElement("i", {
                                        class: o.const("dcg-icon-new-image dcg-expression-icon")
                                    }), function () {
                                        return e.controller.t("image")
                                    }, o.createElement("input", {
                                        type: o.const("file"),
                                        accept: o.const("image/*"),
                                        style: o.const("display: none"),
                                        didMount: e.bindFn(e.didMountFileInput)
                                    }))
                                })), o.createElement("span", {
                                    class: o.const("dcg-arrow")
                                }))
                            }))
                    }
                    ,
                    t.prototype.didMountPopover = function (e) {
                        var t = this;
                        this.popoverNode = e,
                            s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view", function (e) {
                                t.eventShouldClosePopover(e) && t.controller.dispatch({
                                    type: "close-add-expression"
                                })
                            }),
                            s(document).on("keydown.add-expression-view", function (e) {
                                if ("Esc" === n.lookup(e) && t.controller.dispatch({
                                    type: "close-add-expression"
                                }),
                                    "Tab" === n.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                                    var r = document.activeElement
                                        , i = s(t.toggleButtonNode)
                                        , o = s(t.popoverNode).find(".dcg-new-item:last");
                                    e.shiftKey || r !== o[0] ? e.shiftKey && r === i[0] && (o.focus(),
                                        e.preventDefault(),
                                        e.stopPropagation()) : (i.focus(),
                                            e.preventDefault(),
                                            e.stopPropagation())
                                }
                            }),
                            r.IS_IPAD && r.IS_IN_IFRAME && s(e).on("dcg-tapstart", function (e) {
                                return e.preventDefault()
                            }),
                            s(e).find(".dcg-new-item").on("touchstart", function (e) {
                                return e.preventDefault()
                            })
                    }
                    ,
                    t.prototype.didMountFileInput = function (e) {
                        var t = this;
                        this.fileInputNode = e,
                            s(e).on("change", function () {
                                t.insertFiles(e.files),
                                    s(e).val("")
                            })
                    }
                    ,
                    t.prototype.didMountToggleButton = function (e) {
                        this.toggleButtonNode = e
                    }
                    ,
                    t.prototype.didMountNewExpression = function (e) {
                        this.controller.getAddExpressionViewModel().focusOnOpen && s(e).focus()
                    }
                    ,
                    t.prototype.didUnmountPopover = function () {
                        s(document).off(".add-expression-view")
                    }
                    ,
                    t.prototype.toggleAddExpression = function (e) {
                        this.controller.dispatch({
                            type: "toggle-add-expression",
                            focusOnOpen: "keyboard" === e.device
                        })
                    }
                    ,
                    t.prototype.newExpression = function () {
                        this.controller.dispatch({
                            type: "new-expression"
                        })
                    }
                    ,
                    t.prototype.newText = function () {
                        this.controller.dispatch({
                            type: "new-text"
                        })
                    }
                    ,
                    t.prototype.newFolder = function () {
                        this.controller.dispatch({
                            type: "new-folder"
                        })
                    }
                    ,
                    t.prototype.newTable = function () {
                        this.controller.dispatch({
                            type: "new-table"
                        })
                    }
                    ,
                    t.prototype.newImage = function () {
                        this.fileInputNode.click()
                    }
                    ,
                    t.prototype.insertFiles = function (e) {
                        this.controller.dispatch({
                            type: "new-images",
                            files: e
                        })
                    }
                    ,
                    t.prototype.eventShouldClosePopover = function (e) {
                        var t = !!s(e.target).closest(this.popoverNode).length
                            , n = !!s(e.target).closest(this.toggleButtonNode).length;
                        return !(t || n)
                    }
                    ,
                    t
            }(o.Class);
        t.default = c
    }),
    define("main/load-graph-from-link", ["require", "exports", "jquery"], function (e, t, n) {
        "use strict";
        function r(e, t, r) {
            var i = !1;
            e.dispatch({
                type: "toast/show",
                toast: {
                    message: e.t("Importing graph..."),
                    hideAfter: 0,
                    toastStyle: "cover",
                    onHide: function () {
                        i = !0
                    }
                }
            });
            var o = e.getState()
                , s = function () {
                    i || e.dispatch({
                        type: "toast/show",
                        toast: {
                            message: e.t("Error importing graph. Check the URL?"),
                            toastStyle: "error",
                            hideAfter: 12e3
                        }
                    })
                }
                , a = function (t) {
                    i || (e.dispatch({
                        type: "set-state",
                        state: t
                    }),
                        e.dispatch({
                            type: "toast/show",
                            toast: {
                                message: e.t("Graph imported!"),
                                undoCallback: function () {
                                    e.dispatch({
                                        type: "set-state",
                                        state: o
                                    })
                                }
                            }
                        }))
                };
            n.getJSON(t).done(function (e) {
                r(e.state, function (e, t) {
                    e || !t ? s() : a(t)
                })
            }).fail(s)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = r
    }),
    define("lib/get-clipboard-data", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e) {
            return window.clipboardData && window.clipboardData.getData ? window.clipboardData.getData("Text") : e.clipboardData && e.clipboardData.getData ? e.clipboardData.getData("text/plain") : void 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = n
    }),
    define("loadcss!expressions/exp-list-resizer", function () { }),
    define("expressions/exp-list-resizer", ["require", "exports", "tslib", "dcgview", "jquery", "underscore", "loadcss!./exp-list-resizer"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.If
            , a = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.init = function () {
                        this.guid = o.uniqueId("dcg-exp-list-resize")
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement(s, {
                            predicate: this.bindFn(this.isVisible)
                        }, function () {
                            return r.createElement("div", {
                                class: r.const("dcg-exp-list-resizer"),
                                onTapStart: e.bindFn(e.onTapStart)
                            })
                        })
                    }
                    ,
                    t.prototype.isVisible = function () {
                        return !this.props.controller().expressionsAreFullWidth() && this.props.controller().isListVisible()
                    }
                    ,
                    t.prototype.onTapStart = function (e) {
                        var t = this;
                        this.initialWidth = this.props.controller().getExpListWidth(),
                            this.initialLeft = e.changedTouches[0].clientX,
                            i(document).on("dcg-tapmove." + this.guid, function (e) {
                                if (void 0 !== t.initialLeft && void 0 !== t.initialWidth) {
                                    var n = e.changedTouches[0].clientX - t.initialLeft + t.initialWidth;
                                    t.props.controller().dispatch({
                                        type: "resize-exp-list",
                                        expListWidth: n
                                    })
                                }
                            }),
                            i(document).on("dcg-tapend." + this.guid, this.bindFn(this.onTapEnd)),
                            i(document).on("dcg-tapcancel." + this.guid, this.bindFn(this.onTapEnd))
                    }
                    ,
                    t.prototype.onTapEnd = function () {
                        i(document).off("." + this.guid),
                            this.initialLeft = void 0,
                            this.initialWidth = void 0
                    }
                    ,
                    t
            }(r.Class);
        t.ExpListResizer = a
    }),
    define("main/disable-dragdrop-events", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            var n = "drag dragend dragenter dragover dragleave drop";
            t && (n = n.split(" ").map(function (e) {
                return e + "." + t
            }).join(" ")),
                e.on(n, function (e) {
                    e.preventDefault(),
                        e.stopPropagation()
                })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
            t.default = n
    }),
    define("loadcss!expression_top_bar", function () { }),
    define("loadcss!expressions", function () { }),
    define("loadcss!expressions.icon", function () { }),
    define("loadcss!expressions.dropdown", function () { }),
    define("expressions/list_view", ["require", "exports", "touchtracking", "keys", "main/data_helpers", "tslib", "dcgview", "jquery", "underscore", "lib/conditional_blur", "./expression_view", "./text_view", "./table_view", "./folder_view", "./image_view", "./shell_view", "./drag_container_view", "./new_expression_view", "./add_expression_view", "main/load-graph-from-link", "lib/get-clipboard-data", "graphing-calc/models/abstract-item", "lib/animation-frame", "./exp-list-resizer", "main/disable-dragdrop-events", "loadcss!expression_top_bar", "loadcss!expressions", "loadcss!expressions.icon", "loadcss!expressions.dropdown", "tipsy", "jquery.handleevent"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w, E, _, S) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var k = s.Components
            , M = k.If
            , C = k.For
            , I = k.Switch
            , T = function (e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.guid = c.uniqueId("listView"),
                        t.__onScrollScheduled = !1,
                        t
                }
                return o.__extends(t, e),
                    t.prototype.init = function () {
                        this.controller = this.props.controller(),
                            this.$root = this.props.$root()
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            didMount: this.bindFn(this.didMountContainer)
                        }, s.createElement("div", {
                            class: s.const("dcg-exppanel-outer"),
                            didMount: this.bindFn(this.didMountExppanelOuter),
                            onDrop: this.bindFn(this.onDrop),
                            style: function () {
                                return {
                                    bottom: e.getListBottomAndUpdateLastExpressionPadding() + "px"
                                }
                            }
                        }, s.createElement("div", {
                            class: s.const("dcg-exppanel-container dcg-do-animate"),
                            style: function () {
                                return {
                                    width: e.controller.getExpListWidthString()
                                }
                            }
                        }, s.createElement("div", {
                            class: s.const("dcg-drop-image")
                        }, s.createElement("span", null, function () {
                            return e.controller.t("Drop Image Here")
                        })), s.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-exppanel": !0,
                                    "dcg-disable-horizontal-scroll-to-cursor": !0,
                                    "dcg-isDragging": e.controller.isDragDropActive()
                                }
                            },
                            onScroll: this.bindFn(this.onScroll),
                            onPaste: this.bindFn(this.onPaste),
                            onTapStart: this.bindFn(this.onExppanelTapstart),
                            didMount: this.bindFn(this.didMountExppanel)
                        }, s.createElement(_.ExpListResizer, {
                            controller: this.props.controller
                        }), s.createElement("div", {
                            class: s.const("dcg-expressionlist"),
                            role: s.const("complementary"),
                            "aria-label": s.const("Expression List")
                        }, s.createElement("span", {
                            class: s.const("dcg-audio-trace-placeholder dcg-offscreen-element"),
                            "aria-hidden": s.const("true"),
                            role: s.const("button"),
                            tabindex: s.const("-1")
                        }), s.createElement(C, {
                            each: function () {
                                return e.controller.getAllItemModels()
                            },
                            key: function (e) {
                                return e.guid
                            }
                        }, s.createElement("span", {
                            class: s.const("dcg-template-expressioneach")
                        }, function (t) {
                            return s.createElement(I, {
                                key: function () {
                                    return w.getDisplayState(t)
                                }
                            }, function (n) {
                                switch (n) {
                                    case "shell":
                                        return e.makeShellViewForModel(t);
                                    case "render":
                                        return e.makeViewForModel(t);
                                    default:
                                        return
                                }
                            })
                        })), s.createElement(y.default, {
                            controller: function () {
                                return e.props.controller()
                            }
                        }), s.createElement(I, {
                            key: function () {
                                return e.controller.getDraggedItemId()
                            }
                        }, function (t) {
                            if (t) {
                                var n = e.controller.getItemModel(t);
                                return s.createElement(g.default, {
                                    controller: e.props.controller
                                }, e.makeDragCopyViewForModel(n))
                            }
                        }), s.createElement(M, {
                            predicate: function () {
                                return e.controller.canEditOnWeb()
                            }
                        }, function () {
                            return s.createElement("div", {
                                class: s.const("dcg-expressions-branding")
                            }, s.createElement("span", {
                                class: s.const("dcg-edit-branding")
                            }, s.createElement("div", {
                                class: s.const("dcg-powered-by"),
                                "aria-label": function () {
                                    return e.controller.t("Edit graph on Desmos")
                                }
                            }, function () {
                                return e.controller.t("edit graph on")
                            }), s.createElement("i", {
                                class: s.const("dcg-icon-desmos")
                            })))
                        }), s.createElement(M, {
                            predicate: function () {
                                return !e.controller.canEditOnWeb()
                            }
                        }, function () {
                            return s.createElement("div", {
                                class: s.const("dcg-expressions-branding")
                            }, s.createElement("div", {
                                class: s.const("dcg-powered-by"),
                                "aria-label": function () {
                                    return e.controller.t("powered by Desmos")
                                }
                            }, function () {
                                return e.controller.t("powered by")
                            }), s.createElement("i", {
                                class: s.const("dcg-icon-desmos")
                            }))
                        }))), s.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-expression-top-bar": !0,
                                    "dcg-has-reset-state": e.controller.hasDefaultState()
                                }
                            },
                            role: s.const("toolbar"),
                            "aria-label": function () {
                                return e.controller.t("Expression Bar")
                            },
                            onTapStart: this.bindFn(this.clearSelectionOnMobile),
                            didMount: this.bindFn(this.didMountExpressionTopBar)
                        }, s.createElement("span", {
                            class: s.const("dcg-action-opendrawer dcg-hide-in-edit dcg-tooltip"),
                            handleEvent: s.const("true"),
                            tooltip: function () {
                                return e.controller.t("Open Graph (ctrl+o)")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Open Graph")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "open-drawer"
                                })
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-hamburger")
                        })), s.createElement(v.default, {
                            controller: function () {
                                return e.props.controller()
                            }
                        }), s.createElement("span", {
                            class: s.const("dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-clearall"),
                            role: s.const("button"),
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "clear-graph"
                                })
                            }
                        }, function () {
                            return e.controller.t("Delete All")
                        }), s.createElement("span", {
                            class: s.const("dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-reset"),
                            role: s.const("button"),
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "reset-graph"
                                })
                            }
                        }, function () {
                            return e.controller.t("Reset")
                        }), s.createElement("span", {
                            class: s.const("dcg-center-aligned dcg-show-in-edit")
                        }, s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-undo": !0,
                                    "dcg-tooltip": e.controller.canUndo(),
                                    "dcg-enabled": e.controller.canUndo()
                                }
                            },
                            tooltip: function () {
                                return e.controller.t("Undo (ctrl+z)")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Undo")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "undo"
                                })
                            },
                            "aria-disabled": function () {
                                return !e.controller.canUndo()
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-undo")
                        })), s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-redo": !0,
                                    "dcg-tooltip": e.controller.canRedo(),
                                    "dcg-enabled": e.controller.canRedo()
                                }
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            tooltip: function () {
                                return e.controller.t("Redo (ctrl+y)")
                            },
                            "aria-label": function () {
                                return e.controller.t("Redo")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "redo"
                                })
                            },
                            "aria-disabled": function () {
                                return !e.controller.canRedo()
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-redo")
                        }))), s.createElement("span", {
                            class: s.const("dcg-offcenter-aligned dcg-hide-in-edit dcg-hide-in-edit")
                        }, s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-undo": !0,
                                    "dcg-tooltip": e.controller.canUndo(),
                                    "dcg-enabled": e.controller.canUndo()
                                }
                            },
                            tooltip: function () {
                                return e.controller.t("Undo (ctrl+z)")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Undo")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "undo"
                                })
                            },
                            "aria-disabled": function () {
                                return !e.controller.canUndo()
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-undo")
                        })), s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-action-redo": !0,
                                    "dcg-tooltip": e.controller.canRedo(),
                                    "dcg-enabled": e.controller.canRedo()
                                }
                            },
                            tooltip: function () {
                                return e.controller.t("Redo (ctrl+y)")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Redo")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "redo"
                                })
                            },
                            "aria-disabled": function () {
                                return !e.controller.canRedo()
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-redo")
                        }))), s.createElement("span", {
                            class: s.const("dcg-resize-list-btn dcg-hide-in-edit dcg-action-hideexpressions dcg-tooltip"),
                            tooltip: function () {
                                return e.controller.t("Hide List")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Hide Expression List")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "hide-expressions-list"
                                })
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-hide")
                        })), s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-btn": !0,
                                    "dcg-btn-light-gray": !0,
                                    "dcg-pull-right": !0,
                                    "dcg-action-toggle-edit": !0,
                                    "dcg-hide-in-edit": !0,
                                    "dcg-tooltip": !0,
                                    "dcg-do-not-blur": !0
                                }
                            },
                            handleEvent: s.const("true"),
                            tooltip: function () {
                                return e.controller.t("Edit List")
                            },
                            role: s.const("button"),
                            "aria-label": function () {
                                return e.controller.t("Edit Expression List")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "set-edit-list-mode",
                                    isEditListMode: !0
                                })
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-settings")
                        })), s.createElement("span", {
                            class: s.const("dcg-btn dcg-btn-blue dcg-pull-right dcg-action-toggle-edit dcg-show-in-edit dcg-do-not-blur"),
                            handleEvent: s.const("true"),
                            role: s.const("button"),
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "set-edit-list-mode",
                                    isEditListMode: !1
                                })
                            }
                        }, function () {
                            return e.controller.t("Done")
                        })))), s.createElement("div", {
                            class: s.const("dcg-show-expressions-tab"),
                            role: s.const("complementary"),
                            "aria-label": s.const("Show Expressions Tab"),
                            "aria-hidden": s.const("true")
                        }, s.createElement("span", {
                            class: s.const("dcg-resize-list-btn dcg-action-showexpressions dcg-tooltip"),
                            tooltip: function () {
                                return e.controller.t("Show List")
                            },
                            role: s.const("button"),
                            tabindex: s.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Show List")
                            },
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "show-expressions-list"
                                })
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-show")
                        }))), s.createElement("div", {
                            role: s.const("button"),
                            "aria-label": function () {
                                return e.controller.t("Open Graph")
                            },
                            class: s.const("dcg-graphpaper-opendrawer dcg-action-opendrawer"),
                            onTap: function () {
                                return e.controller.dispatch({
                                    type: "open-drawer"
                                })
                            }
                        }, s.createElement("i", {
                            class: s.const("dcg-icon-hamburger")
                        })), s.createElement("div", {
                            class: s.const("dcg-options-menu-container")
                        }))
                    }
                    ,
                    t.prototype.makeShellViewForModel = function (e) {
                        return s.createElement(m.default, {
                            controller: this.props.controller,
                            model: function () {
                                return e
                            },
                            onDragPending: function () { },
                            isDragCopy: function () {
                                return !1
                            }
                        })
                    }
                    ,
                    t.prototype.makeDragCopyViewForModel = function (e) {
                        return this.makeViewForModel(e, !0)
                    }
                    ,
                    t.prototype.makeViewForModel = function (e, t) {
                        var n = this;
                        void 0 === t && (t = !1);
                        var r;
                        if ("table" === e.type)
                            r = s.createElement(p.default, {
                                controller: this.props.controller,
                                model: function () {
                                    return e
                                },
                                onDragPending: function (t) {
                                    return n.onDragPending(t, e.id)
                                },
                                isDragCopy: function () {
                                    return t
                                }
                            });
                        else if ("folder" === e.type)
                            r = s.createElement(h.default, {
                                controller: this.props.controller,
                                model: function () {
                                    return e
                                },
                                onDragPending: function (t) {
                                    return n.onDragPending(t, e.id)
                                },
                                isDragCopy: function () {
                                    return t
                                }
                            });
                        else if ("text" === e.type)
                            r = s.createElement(d.default, {
                                controller: this.props.controller,
                                model: function () {
                                    return e
                                },
                                onDragPending: function (t) {
                                    return n.onDragPending(t, e.id)
                                },
                                isDragCopy: function () {
                                    return t
                                }
                            });
                        else if ("image" === e.type)
                            r = s.createElement(f.default, {
                                controller: this.props.controller,
                                model: function () {
                                    return e
                                },
                                onDragPending: function (t) {
                                    return n.onDragPending(t, e.id)
                                },
                                isDragCopy: function () {
                                    return t
                                }
                            });
                        else {
                            if ("expression" !== e.type)
                                return;
                            r = s.createElement(u.default, {
                                controller: this.props.controller,
                                model: function () {
                                    return e
                                },
                                onDragPending: function (t) {
                                    return n.onDragPending(t, e.id)
                                },
                                isDragCopy: function () {
                                    return t
                                }
                            })
                        }
                        return r
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        this.renderEditListMode()
                    }
                    ,
                    t.prototype.didUnmount = function () {
                        this.$root.off("." + this.guid),
                            a(document.documentElement).off("." + this.guid)
                    }
                    ,
                    t.prototype._onScroll = function () {
                        var e = a(this.exppanel).scrollTop() > 0;
                        a(this.expressionTopBar).toggleClass("dcg-expressions-scrolled", e)
                    }
                    ,
                    t.prototype.onScroll = function () {
                        var e = this;
                        this.__onScrollScheduled || (this.__onScrollScheduled = !0,
                            E.requestAnimationFrame(function () {
                                e._onScroll(),
                                    e.__onScrollScheduled = !1
                            }))
                    }
                    ,
                    t.prototype.didMountContainer = function (e) {
                        this.node = e,
                            a(document.documentElement).on("keydown." + this.guid, this.bindFn(this.handleKeyDown)),
                            this.setupDragDrop()
                    }
                    ,
                    t.prototype.didMountExppanelOuter = function (e) {
                        a(e).tipsy({
                            fade: "fast",
                            title: "tooltip",
                            wait: 500,
                            delegate: ".dcg-tooltip"
                        })
                    }
                    ,
                    t.prototype.didMountExppanel = function (e) {
                        this.exppanel = e
                    }
                    ,
                    t.prototype.didMountExpressionTopBar = function (e) {
                        this.expressionTopBar = e
                    }
                    ,
                    t.prototype.setupDragDrop = function () {
                        function e() {
                            n.removeClass("dcg-filedraggedover"),
                                r = a(),
                                n.off(".filedraggedover")
                        }
                        var t = this
                            , n = this.$root;
                        S.default(n, this.guid);
                        var r = a();
                        n.on("dragenter." + this.guid, function (i) {
                            t.controller.areImagesEnabled() && (0 === r.length && (n.addClass("dcg-filedraggedover"),
                                n.on("dcg-tapstart.filedraggedover", e)),
                                r = r.add(i.target))
                        }).on("dragleave." + this.guid, function (t) {
                            r = r.not(t.target),
                                0 === r.length && e()
                        }).on("drop." + this.guid, e)
                    }
                    ,
                    t.prototype.clearSelectionOnMobile = function (e) {
                        e.wasHandled() || this.controller.dispatch({
                            type: "set-none-selected"
                        })
                    }
                    ,
                    t.prototype.getListBottomAndUpdateLastExpressionPadding = function () {
                        var e = this.controller.getLayoutMeasurements().keypadHeight || 0
                            , t = this.__listBottom || 0;
                        return this.__listBottom = e,
                            0 === e && 0 !== t && n.isTapActive() && this.padLastExpressionUntilTapEnd(t),
                            e
                    }
                    ,
                    t.prototype.padLastExpression = function (e) {
                        var t = a(this.node).find(".dcg-expressionitem.dcg-new-expression");
                        t.css("margin-bottom", e + "px")
                    }
                    ,
                    t.prototype.unpadLastExpression = function () {
                        var e = a(this.node).find(".dcg-expressionitem.dcg-new-expression");
                        e.css("margin-bottom", "0")
                    }
                    ,
                    t.prototype.padLastExpressionUntilTapEnd = function (e) {
                        var t = this;
                        this.padLastExpression(e),
                            a(document).on("dcg-tap.animating-bottom", function () {
                                t.unpadLastExpression(),
                                    a(document).off("dcg-tap.animating-bottom")
                            })
                    }
                    ,
                    t.prototype.handleKeyDown = function (e) {
                        if (!this.controller.inAudioTraceMode() && !a.contains(document.body, document.activeElement) && !a(e.target).closest(this.exppanel).length && a.contains(document.documentElement, e.target)) {
                            var t = this.controller.getSelectedItem();
                            if (t) {
                                var n = r.lookup(e);
                                switch (n) {
                                    case r.UP:
                                        e.preventDefault(),
                                            this.controller.dispatch({
                                                type: "select-previous-expression"
                                            });
                                        break;
                                    case r.DOWN:
                                        e.preventDefault(),
                                            this.controller.dispatch({
                                                type: "select-next-expression"
                                            });
                                        break;
                                    case r.ESCAPE:
                                        e.preventDefault(),
                                            this.controller.dispatch({
                                                type: "set-none-selected"
                                            });
                                        break;
                                    case r.RIGHT:
                                    case r.TAB:
                                        e.preventDefault(),
                                            t && this.controller.dispatch({
                                                type: "move-focus-to-item",
                                                id: t.id,
                                                where: "start"
                                            });
                                        break;
                                    case r.LEFT:
                                        e.preventDefault(),
                                            t && this.controller.dispatch({
                                                type: "move-focus-to-item",
                                                id: t.id,
                                                where: "end"
                                            });
                                        break;
                                    case r.BACKSPACE:
                                        e.preventDefault(),
                                            t && this.controller.dispatch({
                                                type: "upward-delete-selected-expression"
                                            });
                                        break;
                                    case r.DELETE:
                                        e.preventDefault(),
                                            t && this.controller.dispatch({
                                                type: "downward-delete-selected-expression"
                                            });
                                        break;
                                    case r.ENTER:
                                        e.preventDefault(),
                                            t && this.controller.dispatch({
                                                type: "on-special-key-pressed",
                                                key: "Enter"
                                            });
                                        break;
                                    default:
                                        if (e.metaKey || e.ctrlKey || n === r.SHIFT || n === r.SPACEBAR)
                                            return;
                                        t && ("table" === t.type || this.controller.dispatch({
                                            type: "move-focus-to-item",
                                            id: t.id,
                                            where: "end"
                                        }))
                                }
                            }
                        }
                    }
                    ,
                    t.prototype.renderEditListMode = function () {
                        var e = this
                            , t = this.$root
                            , n = this;
                        t.hasClass("dcg-EDIT-LIST-MODE") !== this.controller.isInEditListMode() && (this.controller.isInEditListMode() ? (t.addClass("dcg-EDIT-LIST-MODE"),
                            a(document).on("dcg-tapstart.edit-list-mode", function (t) {
                                0 === a(t.target).closest(e.exppanel).length && 0 === a(t.target).closest(".dcg-options-menu").length && 0 === a(t.target).closest(e.expressionTopBar).length && 0 === a(t.target).closest(".dcg-keypad").length && n.controller.dispatch({
                                    type: "set-edit-list-mode",
                                    isEditListMode: !1
                                })
                            })) : (t.removeClass("dcg-EDIT-LIST-MODE"),
                                a(document).off(".edit-list-mode")))
                    }
                    ,
                    t.prototype.onDragPending = function (e, t) {
                        var n = this;
                        e.preventDefault(),
                            l.default();
                        var r = e.touches[0].clientY
                            , i = r
                            , o = setTimeout(function () {
                                a(document).off(".dragpending"),
                                    n.onDragStart(e, t, r, i)
                            }, 500);
                        a(document).on("dcg-tapmove.dragpending", function (s) {
                            i = s.touches[0].clientY,
                                Math.abs(i - r) > 3 && (clearTimeout(o),
                                    a(document).off(".dragpending"),
                                    n.onDragStart(e, t, r, i))
                        }),
                            a(document).on("dcg-tapend.dragpending", function () {
                                clearTimeout(o),
                                    a(document).off(".dragpending")
                            })
                    }
                    ,
                    t.prototype.onDragStart = function (e, t, n, r) {
                        1 === e.touches.length && (e.wasHandled("dcg-longhold") || this.controller.dispatch({
                            type: "start-dragdrop",
                            id: t,
                            grabY: n,
                            mouseY: r
                        }))
                    }
                    ,
                    t.prototype.onExppanelTapstart = function (e) {
                        "mouse" !== e.device && 0 === a(e.target).closest(".dcg-expressionitem").length && l.default()
                    }
                    ,
                    t.prototype.onPaste = function (e) {
                        var t = this.controller.getGraphSettings().config;
                        if (t.pasteGraphLink || t.pasteTableData) {
                            var n = this.controller.getSelectedItem();
                            if (!n || "text" !== n.type && "folder" !== n.type) {
                                var r = x.default(e);
                                if (r) {
                                    var o = /^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r);
                                    if (t.pasteGraphLink && o) {
                                        e.stopPropagation(),
                                            e.preventDefault();
                                        var s = t.pasteGraphLinkCallback ? t.pasteGraphLinkCallback : function (e, t) {
                                            return t(null, e)
                                        }
                                            ;
                                        b.default(this.controller, r, s)
                                    } else if (t.pasteTableData) {
                                        var a = i.parse(r);
                                        a && (e.stopPropagation(),
                                            e.preventDefault(),
                                            a.error ? this.controller.dispatch({
                                                type: "toast/show",
                                                toast: {
                                                    message: a.error,
                                                    toastStyle: "error",
                                                    hideAfter: 12e3
                                                }
                                            }) : this.controller.dispatch({
                                                type: "paste-table",
                                                data: a.data
                                            }))
                                    }
                                }
                            }
                        }
                    }
                    ,
                    t.prototype.onDrop = function (e) {
                        if (this.controller.areImagesEnabled()) {
                            var t = e.dataTransfer && e.dataTransfer.files;
                            t && this.controller.dispatch({
                                type: "new-images",
                                files: t
                            })
                        }
                    }
                    ,
                    t
            }(s.Class);
        t.default = T
    }),
    define("loadcss!main/toast-view", function () { }),
    define("main/toast-view", ["require", "exports", "tslib", "dcgview", "loadcss!./toast-view"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.If
            , o = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement("span", {
                            class: r.const("dcg-toast")
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-error")
                        }), r.createElement(i, {
                            predicate: function () {
                                return !e.props.showUndo() && (!e.props.showClose || e.props.showClose())
                            }
                        }, function () {
                            return r.createElement("i", {
                                class: r.const("dcg-icon-remove"),
                                onTap: function () {
                                    return e.props.onClose && e.props.onClose()
                                },
                                role: r.const("link"),
                                tabindex: r.const(0),
                                "aria-label": r.const("Dismiss Notice")
                            })
                        }), r.createElement("span", {
                            class: r.const("dcg-msg"),
                            "aria-atomic": function () {
                                return !e.props.noAria()
                            },
                            "aria-live": function () {
                                return e.props.noAria() ? "" : "assertive"
                            }
                        }, function () {
                            return e.props.t(e.props.message())
                        }), r.createElement(i, {
                            predicate: this.props.showUndo
                        }, function () {
                            return r.createElement("a", {
                                role: r.const("link"),
                                tabindex: r.const(0),
                                class: r.const("dcg-undo"),
                                onTap: function () {
                                    return e.props.onUndo && e.props.onUndo()
                                }
                            }, function () {
                                return e.props.t("Undo")
                            })
                        }), r.createElement(i, {
                            predicate: this.props.showLearnMore
                        }, function () {
                            return r.createElement("a", {
                                role: r.const("link"),
                                tabindex: r.const(0),
                                class: r.const("dcg-learn-more-link"),
                                target: r.const("_blank"),
                                onTap: function () {
                                    return e.props.onLearnMore && e.props.onLearnMore()
                                }
                            }, function () {
                                return e.props.t("Learn more")
                            })
                        }))
                    }
                    ,
                    t.prototype.shouldUpdate = function () {
                        return !!this.props.message()
                    }
                    ,
                    t
            }(r.Class)
            , s = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-toast-view": !0,
                                    "dcg-visible": !!e.props.message()
                                }
                            },
                            "toast-style": function () {
                                return e.props.toastStyle && e.props.toastStyle()
                            }
                        }, r.createElement(i, {
                            predicate: function () {
                                return !!e.props.message()
                            }
                        }, function () {
                            return r.createElement("div", null, r.createElement("div", {
                                class: r.const("dcg-toast-cover")
                            }), r.createElement(o, n.__assign({}, e.props)))
                        }))
                    }
                    ,
                    t
            }(r.Class);
        t.ToastView = s
    }),
    define("main/instancehotkeys", ["require", "exports", "lib/aria", "keys", "jquery"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = 0
            , s = function () {
                function e(e, t) {
                    this.__id = o++ ,
                        this.$root = e || i("body"),
                        this.controller = t,
                        this.startListening()
                }
                return e.prototype.remove = function () {
                    this.stopListening()
                }
                    ,
                    e.prototype.startListening = function () {
                        var e = this;
                        this.isListening || (this.$root.on("keydown.dcg-instance-keyboard-listener-" + this.__id, function (t) {
                            return e.handleInstanceKeydown(t)
                        }),
                            this.isListening = !0)
                    }
                    ,
                    e.prototype.stopListening = function () {
                        this.isListening && (this.$root.off("keydown.dcg-instance-keyboard-listener-" + this.__id),
                            this.isListening = !1)
                    }
                    ,
                    e.prototype.handleInstanceKeydown = function (e) {
                        if (r.isUndo(e))
                            e.stopPropagation(),
                                e.preventDefault(),
                                this.controller.hasVisibleAndUndoableToast() ? this.controller.toastUndo() : this.controller.dispatch({
                                    type: "undo"
                                });
                        else if (r.isRedo(e))
                            e.stopPropagation(),
                                e.preventDefault(),
                                this.controller.dispatch({
                                    type: "redo"
                                });
                        else if (e.ctrlKey && (e.altKey || e.metaKey) && !e.shiftKey)
                            if ("E" === r.lookupChar(e)) {
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    this.controller.getSelectedItem() || this.controller.dispatch({
                                        type: "set-selected-index",
                                        index: 0
                                    });
                                var t = this.controller.getSelectedItem();
                                t ? (n.alert(this.controller.t("Expression list")),
                                    this.controller.dispatch({
                                        type: "move-focus-to-item",
                                        id: t.id
                                    })) : n.alert(this.controller.t("Unable to focus expression list"))
                            } else
                                "X" === r.lookupChar(e) ? (e.preventDefault(),
                                    e.stopPropagation(),
                                    this.controller.canUserAddExpressions() ? (n.alert(this.controller.t("Add expression")),
                                        this.controller.dispatch({
                                            type: "new-expression"
                                        })) : n.alert(this.controller.t("Unable to add expression"))) : "O" === r.lookupChar(e) ? (e.preventDefault(),
                                            e.stopPropagation(),
                                            this.controller.canUserAddExpressions() && this.controller.areNotesEnabled() ? (n.alert(this.controller.t("Add note")),
                                                this.controller.dispatch({
                                                    type: "new-text"
                                                })) : n.alert(this.controller.t("Unable to add note"))) : "F" === r.lookupChar(e) ? (e.preventDefault(),
                                                    e.stopPropagation(),
                                                    this.controller.canUserAddExpressions() && this.controller.areFoldersEnabled() ? (n.alert(this.controller.t("Add folder")),
                                                        this.controller.dispatch({
                                                            type: "new-folder"
                                                        })) : n.alert(this.controller.t("Unable to add folder"))) : "I" === r.lookupChar(e) ? (e.preventDefault(),
                                                            e.stopPropagation(),
                                                            this.controller.canUserAddExpressions() && this.controller.areImagesEnabled() ? (n.alert(this.controller.t("Add image")),
                                                                this.controller.dispatch({
                                                                    type: "toggle-add-expression",
                                                                    focusOnOpen: !1
                                                                }),
                                                                this.$root.find(".dcg-action-newimage input[type=file]").click()) : n.alert(this.controller.t("Unable to add image"))) : "T" === r.lookupChar(e) ? (e.preventDefault(),
                                                                    e.stopPropagation(),
                                                                    this.controller.canUserAddExpressions() ? (n.alert(this.controller.t("Add table")),
                                                                        this.controller.dispatch({
                                                                            type: "new-table"
                                                                        })) : n.alert(this.controller.t("Unable to add table"))) : "G" === r.lookupChar(e) ? (e.preventDefault(),
                                                                            e.stopPropagation(),
                                                                            this.controller.dispatch({
                                                                                type: "toggle-graph-settings",
                                                                                focusOnOpen: !0
                                                                            })) : "P" === r.lookupChar(e) && (e.preventDefault(),
                                                                                e.stopPropagation(),
                                                                                this.focusElement(this.$root.find(".dcg-movable-point:first:visible"), this.controller.t("No movable points on screen")));
                        else
                            e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || r.lookup(e) !== r.BACKSPACE || i(document.activeElement).is('input, textarea, [role="textbox"]') || e.preventDefault()
                    }
                    ,
                    e.prototype.focusElement = function (e, t) {
                        e.length ? e.focus() : t && n.alert(t)
                    }
                    ,
                    e
            }();
        t.default = s
    }),
    define("loadcss!pillboxes", function () { }),
    define("main/graphpaper-branding-view", ["require", "exports", "tslib", "dcgview", "loadcss!pillboxes"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.Components.Switch
            , o = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            r.createElement(i, {
                                key: function () {
                                    return e.controller.getBrandingMode()
                                }
                            }, function (t) {
                                switch (t) {
                                    case "static-edit-link":
                                        return r.createElement("div", {
                                            class: r.const("dcg-graphpaper-branding")
                                        }, r.createElement("a", {
                                            href: function () {
                                                return e.controller.getEditLink()
                                            },
                                            target: r.const("_blank")
                                        }, r.createElement("span", {
                                            class: r.const("dcg-powered-by"),
                                            "aria-label": function () {
                                                return e.controller.t("Edit graph on Desmos")
                                            }
                                        }, function () {
                                            return e.controller.t("edit graph on")
                                        }), r.createElement("i", {
                                            class: r.const("dcg-icon-desmos")
                                        })));
                                    case "edit-link":
                                        return r.createElement("div", {
                                            class: r.const("dcg-graphpaper-branding")
                                        }, r.createElement("span", {
                                            class: r.const("dcg-edit-branding")
                                        }, r.createElement("span", {
                                            class: r.const("dcg-powered-by"),
                                            "aria-label": function () {
                                                return e.controller.t("Edit graph on Desmos")
                                            }
                                        }, function () {
                                            return e.controller.t("edit graph on")
                                        }), r.createElement("i", {
                                            class: r.const("dcg-icon-desmos")
                                        })));
                                    case "powered-by":
                                        return r.createElement("div", {
                                            class: r.const("dcg-graphpaper-branding dcg-unclickable")
                                        }, r.createElement("span", {
                                            class: r.const("dcg-powered-by"),
                                            "aria-label": function () {
                                                return e.controller.t("Powered by Desmos")
                                            }
                                        }, function () {
                                            return e.controller.t("powered by")
                                        }), r.createElement("i", {
                                            class: r.const("dcg-icon-desmos")
                                        }));
                                    default:
                                        var n = t;
                                        return n
                                }
                            })
                    }
                    ,
                    t
            }(r.Class);
        t.default = o
    }),
    define("loadcss!settings", function () { }),
    define("main/settings-view", ["require", "exports", "keys", "graphing/viewport", "scroll_helpers", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "jquery", "graphing/axisarrowmode", "lib/evaluate-single-expression", "loadcss!settings"], function (e, t, n, r, i, o, s, a, c, l, u, d) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = s.Components
            , h = p.Input
            , f = p.If
            , m = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return o.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement(c.default, {
                            isFocused: function () {
                                return e.props.parent().getFocusedLimit() === e.props.limit()
                            },
                            latex: function () {
                                return e.props.parent().getLimitLatex(e.props.limit())
                            },
                            config: this.const({}),
                            getAriaLabel: function () {
                                return e.props.ariaLabel()
                            },
                            getAriaPostLabel: this.const(""),
                            onUserChangedLatex: function (t) {
                                return e.props.parent().setLimitLatex(e.props.limit(), t)
                            },
                            onFocusedChanged: function (t) {
                                return e.props.parent().onFocusedChanged(e.props.limit(), t)
                            },
                            hasError: this.const(!1),
                            selectOnFocus: this.const(!0)
                        }, s.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-math-field": !0,
                                    "dcg-math-input": !0,
                                    "dcg-invalid": e.props.parent().isLimitInvalid(e.props.limit()),
                                    "dcg-focus": e.props.parent().getFocusedLimit() === e.props.limit()
                                }
                            },
                            "data-dcg-limit": function () {
                                return e.props.limit()
                            }
                        }))
                    }
                    ,
                    t
            }(s.Class)
            , g = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return o.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return this.controller = this.props.controller(),
                            s.createElement("div", null, s.createElement("div", {
                                class: s.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-tooltip-e dcg-action-settings"),
                                tooltip: function () {
                                    return e.controller.t("Graph Settings")
                                },
                                role: s.const("button"),
                                tabindex: s.const("0"),
                                "aria-haspopup": s.const("true"),
                                "aria-expanded": function () {
                                    return e.controller.isGraphSettingsOpen()
                                },
                                "aria-label": function () {
                                    return e.controller.t("Graph Settings")
                                },
                                didMount: this.bindFn(this.didMountSettingsButton),
                                onTap: this.bindFn(this.onTapSettingsButton)
                            }, s.createElement("i", {
                                class: s.const("dcg-icon-wrench"),
                                "aria-hidden": s.const("true")
                            })), s.createElement(f, {
                                predicate: function () {
                                    return e.controller.isGraphSettingsOpen()
                                }
                            }, function () {
                                return s.createElement("div", {
                                    class: s.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),
                                    style: e.bindFn(e.getContainerStyle),
                                    didMount: e.bindFn(e.didMountContainer)
                                }, s.createElement("div", {
                                    class: s.const("dcg-popover-interior"),
                                    role: s.const("complementary"),
                                    "aria-label": s.const("Graph Settings")
                                }, s.createElement("div", {
                                    class: function () {
                                        return {
                                            "dcg-modern-btn": !0,
                                            "dcg-action-projectormode": !0,
                                            "dcg-active": e.getProjectorMode()
                                        }
                                    },
                                    role: s.const("button"),
                                    tabindex: s.const("0"),
                                    "aria-label": function () {
                                        return e.controller.t("Projector Mode")
                                    },
                                    "aria-pressed": e.bindFn(e.getProjectorMode),
                                    onTap: e.bindFn(e.toggleProjectorMode),
                                    didMount: e.bindFn(e.didMountProjectorMode)
                                }, function () {
                                    return e.controller.t("Projector Mode")
                                }), s.createElement("div", {
                                    class: s.const("dcg-top-checkboxes-container")
                                }, s.createElement("span", {
                                    role: s.const("checkbox"),
                                    "aria-checked": e.bindFn(e.getAxisNumbers),
                                    tabindex: s.const("0"),
                                    class: s.const("dcg-checkbox dcg-minor-checkbox dcg-action-toggle-axis-numbers"),
                                    "aria-label": function () {
                                        return e.controller.t("Axis Numbers")
                                    },
                                    onTap: e.bindFn(e.toggleAxisNumbers)
                                }, s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-checkbox-box": !0,
                                            "dcg-checked": e.getAxisNumbers()
                                        }
                                    }
                                }, s.createElement("i", {
                                    class: s.const("dcg-icon-check")
                                })), s.const(""), s.createElement("span", {
                                    class: s.const("dcg-checkbox-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Axis Numbers")
                                })), s.createElement(f, {
                                    predicate: function () {
                                        return e.getShowGrid() && !e.getPolarMode()
                                    }
                                }, function () {
                                    return s.createElement("span", {
                                        role: s.const("checkbox"),
                                        "aria-checked": e.bindFn(e.getMinorGridlines),
                                        tabindex: s.const("0"),
                                        class: s.const("dcg-checkbox dcg-minor-checkbox dcg-action-toggle-minor-gridlines"),
                                        "aria-label": function () {
                                            return e.controller.t("Minor Gridlines")
                                        },
                                        onTap: e.bindFn(e.toggleMinorGridlines)
                                    }, s.createElement("span", {
                                        class: function () {
                                            return {
                                                "dcg-checkbox-box": !0,
                                                "dcg-checked": e.getMinorGridlines()
                                            }
                                        }
                                    }, s.createElement("i", {
                                        class: s.const("dcg-icon-check")
                                    })), s.const(""), s.createElement("span", {
                                        class: s.const("dcg-checkbox-label"),
                                        "aria-hidden": s.const("true")
                                    }, function () {
                                        return e.controller.t("Minor Gridlines")
                                    }))
                                }), s.createElement(f, {
                                    predicate: function () {
                                        return !e.getSquareAxes()
                                    }
                                }, function () {
                                    return s.createElement("div", {
                                        role: s.const("button"),
                                        tabindex: s.const("0"),
                                        class: s.const("dcg-action-zoom-square dcg-btn-light-gray"),
                                        onTap: e.bindFn(e.zoomSquare)
                                    }, function () {
                                        return e.controller.t("Zoom Square")
                                    })
                                })), s.createElement("div", {
                                    class: s.const("dcg-checkbox-title")
                                }, s.createElement("span", {
                                    role: s.const("checkbox"),
                                    "aria-checked": e.bindFn(e.getShowGrid),
                                    tabindex: s.const("0"),
                                    class: s.const("dcg-checkbox dcg-action-toggle-grid"),
                                    "aria-label": function () {
                                        return e.controller.t("Grid")
                                    },
                                    onTap: e.bindFn(e.toggleGrid)
                                }, s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-checkbox-box": !0,
                                            "dcg-checked": e.getShowGrid()
                                        }
                                    }
                                }, s.createElement("i", {
                                    class: s.const("dcg-icon-check")
                                })), s.const(""), s.createElement("span", {
                                    class: s.const("dcg-checkbox-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Grid")
                                }))), s.createElement(f, {
                                    predicate: e.bindFn(e.getShowGrid)
                                }, function () {
                                    return s.createElement("div", {
                                        class: s.const("dcg-circle-icon-group dcg-grid-group")
                                    }, s.createElement("div", {
                                        class: function () {
                                            return {
                                                "dcg-circle-icon": !0,
                                                "dcg-action-cartesian": !0,
                                                "dcg-active": !e.getPolarMode()
                                            }
                                        },
                                        role: s.const("button"),
                                        tabindex: s.const("0"),
                                        ariaPressed: function () {
                                            return !e.getPolarMode()
                                        },
                                        "aria-label": function () {
                                            return e.controller.t("Cartesian Grid")
                                        },
                                        onTap: e.bindFn(e.setCartesianMode)
                                    }), s.const(""), s.createElement("div", {
                                        class: function () {
                                            return {
                                                "dcg-circle-icon": !0,
                                                "dcg-action-polar": !0,
                                                "dcg-active": e.getPolarMode()
                                            }
                                        },
                                        role: s.const("button"),
                                        tabindex: s.const("0"),
                                        ariaPressed: function () {
                                            return e.getPolarMode()
                                        },
                                        "aria-label": function () {
                                            return e.controller.t("Polar Grid")
                                        },
                                        onTap: e.bindFn(e.setPolarMode)
                                    }))
                                }), s.createElement("div", {
                                    class: s.const("dcg-checkbox-title")
                                }, s.createElement("span", {
                                    role: s.const("checkbox"),
                                    "aria-checked": function () {
                                        return e.getAxisArrowMode() !== u.NONE
                                    },
                                    tabindex: s.const("0"),
                                    class: s.const("dcg-checkbox dcg-action-toggle-arrows"),
                                    "aria-label": function () {
                                        return e.controller.t("Arrows")
                                    },
                                    onTap: e.bindFn(e.toggleArrows)
                                }, s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-checkbox-box": !0,
                                            "dcg-checked": e.getAxisArrowMode() !== u.NONE
                                        }
                                    }
                                }, s.createElement("i", {
                                    class: s.const("dcg-icon-check")
                                })), s.const(""), s.createElement("span", {
                                    class: s.const("dcg-checkbox-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Arrows")
                                }))), s.createElement(f, {
                                    predicate: function () {
                                        return e.getAxisArrowMode() !== u.NONE
                                    }
                                }, function () {
                                    return s.createElement("div", {
                                        class: s.const("dcg-circle-icon-group dcg-arrow-group")
                                    }, s.createElement("div", {
                                        role: s.const("button"),
                                        tabindex: s.const("0"),
                                        class: function () {
                                            return {
                                                "dcg-circle-icon": !0,
                                                "dcg-arrows": !0,
                                                "dcg-active": e.getAxisArrowMode() === u.BOTH
                                            }
                                        },
                                        "dcg-arrows": s.const("BOTH"),
                                        "aria-label": function () {
                                            return e.controller.t("Show Both")
                                        },
                                        "aria-pressed": function () {
                                            return e.getAxisArrowMode() === u.BOTH
                                        },
                                        onTap: function () {
                                            return e.setAxisArrowMode(u.BOTH)
                                        }
                                    }, s.createElement("i", {
                                        class: s.const("dcg-icon-arrows-two")
                                    })), s.const(""), s.createElement("div", {
                                        role: s.const("button"),
                                        tabindex: s.const("0"),
                                        class: function () {
                                            return {
                                                "dcg-circle-icon": !0,
                                                "dcg-arrows": !0,
                                                "dcg-active": e.getAxisArrowMode() === u.POSITIVE
                                            }
                                        },
                                        "dcg-arrows": s.const("POSITIVE"),
                                        "aria-label": function () {
                                            return e.controller.t("Show Positive")
                                        },
                                        "aria-pressed": function () {
                                            return e.getAxisArrowMode() === u.POSITIVE
                                        },
                                        onTap: function () {
                                            return e.setAxisArrowMode(u.POSITIVE)
                                        }
                                    }, s.createElement("i", {
                                        class: s.const("dcg-icon-arrows-one")
                                    })))
                                }), s.createElement("div", {
                                    class: s.const("dcg-section-divider"),
                                    "aria-hidden": s.const("true")
                                }), s.createElement("div", {
                                    class: s.const("dcg-checkbox-title dcg-x-axis-title")
                                }, s.createElement("span", {
                                    role: s.const("checkbox"),
                                    "aria-checked": e.bindFn(e.getShowXAxis),
                                    tabindex: s.const("0"),
                                    class: s.const("dcg-checkbox dcg-action-toggle-x-axis"),
                                    "aria-label": function () {
                                        return e.controller.t("X-Axis")
                                    },
                                    onTap: e.bindFn(e.toggleXAxis)
                                }, s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-checkbox-box": !0,
                                            "dcg-checked": e.getShowXAxis()
                                        }
                                    }
                                }, s.createElement("i", {
                                    class: s.const("dcg-icon-check")
                                })), s.const(""), s.createElement("span", {
                                    class: s.const("dcg-checkbox-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("X-Axis")
                                })), s.createElement(h, {
                                    class: e.const("dcg-axis-label dcg-x-axis-label"),
                                    placeholder: function () {
                                        return e.controller.t("add a label")
                                    },
                                    "aria-label": function () {
                                        return e.controller.t("add x-axis label")
                                    },
                                    disabled: function () {
                                        return !e.getShowXAxis() || void 0
                                    },
                                    "aria-disabled": function () {
                                        return !e.getShowXAxis() || void 0
                                    },
                                    onInput: e.bindFn(e.onXAxisLabelInput),
                                    value: e.bindFn(e.getXAxisLabel)
                                })), s.createElement("div", {
                                    class: s.const("dcg-editable-mathquill-container dcg-x-axis-options")
                                }, s.createElement(m, {
                                    limit: e.const("xmin"),
                                    ariaLabel: function () {
                                        return e.controller.t("X Axis Minimum: ")
                                    },
                                    parent: e.const(e)
                                }), s.createElement(a.default, {
                                    latex: e.const("\\le x\\le")
                                }, s.createElement("span", {
                                    class: s.const("dcg-interval-interior")
                                })), s.createElement(m, {
                                    limit: e.const("xmax"),
                                    ariaLabel: function () {
                                        return e.controller.t("X Axis Maximum: ")
                                    },
                                    parent: e.const(e)
                                }), s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-step-container": !0,
                                            "dcg-disabled-input": e.getPolarMode()
                                        }
                                    }
                                }, s.createElement("span", {
                                    class: s.const("dcg-step-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Step:")
                                }), s.createElement(m, {
                                    limit: e.const("xstep"),
                                    ariaLabel: function () {
                                        return e.controller.t("X Axis Step Size: ")
                                    },
                                    parent: e.const(e)
                                }))), s.createElement("div", {
                                    class: s.const("dcg-checkbox-title dcg-y-axis-title")
                                }, s.createElement("span", {
                                    role: s.const("checkbox"),
                                    "aria-checked": e.bindFn(e.getShowYAxis),
                                    tabindex: s.const("0"),
                                    class: s.const("dcg-checkbox dcg-action-toggle-y-axis"),
                                    "aria-label": function () {
                                        return e.controller.t("Y-Axis")
                                    },
                                    onTap: e.bindFn(e.toggleYAxis)
                                }, s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-checkbox-box": !0,
                                            "dcg-checked": e.getShowYAxis()
                                        }
                                    }
                                }, s.createElement("i", {
                                    class: s.const("dcg-icon-check")
                                })), s.const(""), s.createElement("span", {
                                    class: s.const("dcg-checkbox-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Y-Axis")
                                })), s.createElement(h, {
                                    class: e.const("dcg-axis-label dcg-y-axis-label"),
                                    placeholder: function () {
                                        return e.controller.t("add a label")
                                    },
                                    "aria-label": function () {
                                        return e.controller.t("add y-axis label")
                                    },
                                    disabled: function () {
                                        return !e.getShowYAxis() || void 0
                                    },
                                    "aria-disabled": function () {
                                        return !e.getShowYAxis() || void 0
                                    },
                                    onInput: e.bindFn(e.onYAxisLabelInput),
                                    value: e.bindFn(e.getYAxisLabel)
                                })), s.createElement("div", {
                                    class: s.const("dcg-editable-mathquill-container dcg-y-axis-options")
                                }, s.createElement(m, {
                                    limit: e.const("ymin"),
                                    ariaLabel: function () {
                                        return e.controller.t("Y Axis Minimum: ")
                                    },
                                    parent: e.const(e)
                                }), s.createElement(a.default, {
                                    latex: e.const("\\le y\\le")
                                }, s.createElement("span", {
                                    class: s.const("dcg-interval-interior")
                                })), s.createElement(m, {
                                    limit: e.const("ymax"),
                                    ariaLabel: function () {
                                        return e.controller.t("Y Axis Maximum: ")
                                    },
                                    parent: e.const(e)
                                }), s.createElement("span", {
                                    class: function () {
                                        return {
                                            "dcg-step-container": !0,
                                            "dcg-disabled-input": e.getPolarMode()
                                        }
                                    }
                                }, s.createElement("span", {
                                    class: s.const("dcg-step-label"),
                                    "aria-hidden": s.const("true")
                                }, function () {
                                    return e.controller.t("Step:")
                                }), s.createElement(m, {
                                    limit: e.const("ystep"),
                                    ariaLabel: function () {
                                        return e.controller.t("Y Axis Step Size: ")
                                    },
                                    parent: e.const(e)
                                }))), s.createElement("div", {
                                    class: s.const("dcg-section-divider"),
                                    "aria-hidden": s.const("true")
                                }), s.createElement("div", {
                                    class: s.const("dcg-radiangroup"),
                                    role: s.const("group"),
                                    "aria-label": function () {
                                        return e.controller.t("Angle Settings")
                                    }
                                }, s.createElement("div", {
                                    class: function () {
                                        return {
                                            "dcg-action-radianmode": !0,
                                            "dcg-modern-btn": !0,
                                            "dcg-active": !e.getDegreeMode()
                                        }
                                    },
                                    "aria-pressed": function () {
                                        return !e.getDegreeMode()
                                    },
                                    role: s.const("button"),
                                    tabindex: s.const("0"),
                                    "aria-label": function () {
                                        return e.controller.t("Radians")
                                    },
                                    onTap: e.bindFn(e.setRadianMode)
                                }, function () {
                                    return e.controller.t("Radians")
                                }), s.createElement("div", {
                                    class: function () {
                                        return {
                                            "dcg-action-degreemode": !0,
                                            "dcg-modern-btn": !0,
                                            "dcg-active": e.getDegreeMode()
                                        }
                                    },
                                    "aria-pressed": e.bindFn(e.getDegreeMode),
                                    role: s.const("button"),
                                    tabindex: s.const("0"),
                                    "aria-label": function () {
                                        return e.controller.t("Degrees")
                                    },
                                    onTap: e.bindFn(e.setDegreeMode)
                                }, function () {
                                    return e.controller.t("Degrees")
                                })), s.createElement("div", {
                                    class: s.const("dcg-arrow")
                                })))
                            }))
                    }
                    ,
                    t.prototype.didMountSettingsButton = function (e) {
                        this.settingsButtonNode = e
                    }
                    ,
                    t.prototype.didMountContainer = function (e) {
                        var t = this;
                        this.node = e,
                            l(document).on("dcg-tapstart.settings-view wheel.settings-view", function (e) {
                                t.eventShouldClosePopover(e) && t.controller.dispatch({
                                    type: "close-graph-settings"
                                })
                            }),
                            l(document).on("keydown.settings-view", function (e) {
                                if ("Esc" === n.lookup(e) && t.controller.dispatch({
                                    type: "close-graph-settings"
                                }),
                                    "Tab" === n.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                                    var r = document.activeElement
                                        , i = l(t.settingsButtonNode)
                                        , o = l(t.node).find(".dcg-action-degreemode");
                                    e.shiftKey || r !== o[0] ? e.shiftKey && r === i[0] && (o.focus(),
                                        e.preventDefault(),
                                        e.stopPropagation()) : (i.focus(),
                                            e.preventDefault(),
                                            e.stopPropagation())
                                }
                            })
                    }
                    ,
                    t.prototype.didMountProjectorMode = function (e) {
                        this.controller.getSettingsViewModel().focusOnOpen && l(e).focus()
                    }
                    ,
                    t.prototype.didUnmount = function () {
                        l(document).off(".settings-view")
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        if (this.controller.isGraphSettingsOpen()) {
                            var e = this.controller.getLayoutMeasurements().keypadHeight;
                            e !== this.cachedKeypadHeight && l(document.activeElement).closest(this.node).length && i.scrollVisible(l(document.activeElement), l(this.node).find(".dcg-popover-interior"), 50),
                                this.cachedKeypadHeight = e
                        }
                    }
                    ,
                    t.prototype.eventShouldClosePopover = function (e) {
                        var t = !!l(e.target).closest(this.node).length
                            , n = !!l(e.target).closest(".dcg-action-settings").length
                            , r = this.isMathquillFocused() && l(e.target).closest(".dcg-keypad").length;
                        return !(t || n || r)
                    }
                    ,
                    t.prototype.onTapSettingsButton = function (e) {
                        this.controller.dispatch({
                            type: "toggle-graph-settings",
                            focusOnOpen: "keyboard" === e.device
                        })
                    }
                    ,
                    t.prototype.isMathquillFocused = function () {
                        return void 0 !== this.getFocusedLimit()
                    }
                    ,
                    t.prototype.getLimitLatex = function (e) {
                        return this.controller.getSettingsViewModel().limitLatex[e]
                    }
                    ,
                    t.prototype.setLimitLatex = function (e, t) {
                        t !== this.controller.getSettingsViewModel().limitLatex[e] && this.controller.dispatch({
                            type: "set-axis-limit-latex",
                            limit: e,
                            latex: t
                        })
                    }
                    ,
                    t.prototype.getFocusedLimit = function () {
                        var e = this.controller.getFocusLocation();
                        if (e && "settings" === e.type)
                            return e.location
                    }
                    ,
                    t.prototype.getInvalidLimits = function () {
                        var e = !!this.controller.getGraphSettings().degreeMode
                            , t = d.default(this.getLimitLatex("xmin"), e)
                            , n = d.default(this.getLimitLatex("xmax"), e)
                            , i = d.default(this.getLimitLatex("ymin"), e)
                            , o = d.default(this.getLimitLatex("ymax"), e)
                            , s = "" === this.getLimitLatex("xstep") ? 0 : d.default(this.getLimitLatex("xstep"), e)
                            , a = "" === this.getLimitLatex("ystep") ? 0 : d.default(this.getLimitLatex("ystep"), e)
                            , c = {}
                            , l = new r(t, n, i, o);
                        return isFinite(t) && isFinite(n) ? (c.xmin = !l.isXValid(),
                            c.xmax = c.xmin) : (c.xmin = !isFinite(t),
                                c.xmax = !isFinite(n)),
                            isFinite(i) && isFinite(o) ? (c.ymin = !l.isYValid(),
                                c.ymax = c.ymin) : (c.ymin = !isFinite(i),
                                    c.ymax = !isFinite(o)),
                            c.xstep = !isFinite(s) || s < 0,
                            c.ystep = !isFinite(a) || a < 0,
                            c
                    }
                    ,
                    t.prototype.isLimitInvalid = function (e) {
                        return this.getInvalidLimits()[e];
                    }
                    ,
                    t.prototype.onFocusedChanged = function (e, t) {
                        t ? this.controller.dispatch({
                            type: "set-focus-location",
                            location: {
                                type: "settings",
                                location: e
                            }
                        }) : this.controller.dispatch({
                            type: "blur-focus-location",
                            location: {
                                type: "settings",
                                location: e
                            }
                        })
                    }
                    ,
                    t.prototype.onXAxisLabelInput = function (e) {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            xAxisLabel: e
                        })
                    }
                    ,
                    t.prototype.onYAxisLabelInput = function (e) {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            yAxisLabel: e
                        })
                    }
                    ,
                    t.prototype.getXAxisLabel = function () {
                        return this.controller.getGraphSettings().xAxisLabel
                    }
                    ,
                    t.prototype.getYAxisLabel = function () {
                        return this.controller.getGraphSettings().yAxisLabel
                    }
                    ,
                    t.prototype.getShowXAxis = function () {
                        return !!this.controller.getGraphSettings().showXAxis
                    }
                    ,
                    t.prototype.toggleXAxis = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            showXAxis: !this.getShowXAxis()
                        })
                    }
                    ,
                    t.prototype.getShowYAxis = function () {
                        return !!this.controller.getGraphSettings().showYAxis
                    }
                    ,
                    t.prototype.toggleYAxis = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            showYAxis: !this.getShowYAxis()
                        })
                    }
                    ,
                    t.prototype.getAxisNumbers = function () {
                        return !!this.controller.getGraphSettings().xAxisNumbers
                    }
                    ,
                    t.prototype.toggleAxisNumbers = function () {
                        var e = this.getAxisNumbers();
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            xAxisNumbers: !e,
                            yAxisNumbers: !e,
                            polarNumbers: !e
                        })
                    }
                    ,
                    t.prototype.getMinorGridlines = function () {
                        return 0 === this.controller.getGraphSettings().xAxisMinorSubdivisions
                    }
                    ,
                    t.prototype.toggleMinorGridlines = function () {
                        var e = this.getMinorGridlines() ? 1 : 0;
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            yAxisMinorSubdivisions: e,
                            xAxisMinorSubdivisions: e
                        })
                    }
                    ,
                    t.prototype.getPolarMode = function () {
                        return !!this.controller.getGraphSettings().polarMode
                    }
                    ,
                    t.prototype.setPolarMode = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            polarMode: !0
                        })
                    }
                    ,
                    t.prototype.setCartesianMode = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            polarMode: !1
                        })
                    }
                    ,
                    t.prototype.getDegreeMode = function () {
                        return !!this.controller.getGraphSettings().degreeMode
                    }
                    ,
                    t.prototype.setRadianMode = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            degreeMode: !1
                        })
                    }
                    ,
                    t.prototype.setDegreeMode = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            degreeMode: !0
                        })
                    }
                    ,
                    t.prototype.getProjectorMode = function () {
                        return !!this.controller.getGraphSettings().projectorMode
                    }
                    ,
                    t.prototype.toggleProjectorMode = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            projectorMode: !this.getProjectorMode()
                        })
                    }
                    ,
                    t.prototype.getAxisArrowMode = function () {
                        return this.controller.getGraphSettings().xAxisArrowMode
                    }
                    ,
                    t.prototype.setAxisArrowMode = function (e) {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            xAxisArrowMode: e,
                            yAxisArrowMode: e
                        })
                    }
                    ,
                    t.prototype.getShowGrid = function () {
                        return this.controller.getGraphSettings().showGrid
                    }
                    ,
                    t.prototype.toggleGrid = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            showGrid: !this.getShowGrid()
                        })
                    }
                    ,
                    t.prototype.toggleArrows = function () {
                        var e = this.getAxisArrowMode() === u.NONE ? u.BOTH : u.NONE;
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            xAxisArrowMode: e,
                            yAxisArrowMode: e
                        })
                    }
                    ,
                    t.prototype.getSquareAxes = function () {
                        return !!this.controller.getGraphSettings().squareAxes
                    }
                    ,
                    t.prototype.getContainerStyle = function () {
                        var e = this.controller.getLayoutMeasurements().keypadHeight;
                        return e ? "bottom: 0" : ""
                    }
                    ,
                    t.prototype.zoomSquare = function () {
                        this.controller.dispatch({
                            type: "set-graph-settings",
                            squareAxes: !0
                        })
                    }
                    ,
                    t
            }(s.Class);
        t.default = g
    }),
    define("main/pillbox-view", ["require", "exports", "tslib", "dcgview", "./graphpaper-branding-view", "jquery", "./settings-view", "loadcss!pillboxes", "tipsy"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return this.controller = this.props.controller(),
                        this.viewportController = this.props.viewportController(),
                        r.createElement("div", {
                            class: r.const("dcg-pillbox-container"),
                            role: r.const("group"),
                            "aria-label": function () {
                                return e.controller.t("Graph Settings Controls")
                            },
                            didMount: this.bindFn(this.didMountPillbox)
                        }, r.createElement("div", {
                            class: r.const("dcg-overgraph-pillbox-elements"),
                            style: this.bindFn(this.getContainerStyle)
                        }, r.createElement(s.default, {
                            controller: this.props.controller
                        }), r.createElement("div", {
                            class: r.const("dcg-zoom-container")
                        }, r.createElement("div", {
                            class: r.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group")
                        }, r.createElement("div", {
                            class: r.const("dcg-action-zoomin dcg-tooltip-e"),
                            tooltip: function () {
                                return e.controller.t("Zoom In")
                            },
                            role: r.const("button"),
                            tabindex: r.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Zoom In")
                            },
                            onTap: this.bindFn(this.zoomIn)
                        }, r.createElement("i", {
                            class: r.const("dcg-icon dcg-icon-plus"),
                            "aria-hidden": r.const("true")
                        })), r.createElement("div", {
                            class: r.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),
                            tooltip: function () {
                                return e.controller.t("Zoom Out")
                            },
                            role: r.const("button"),
                            tabindex: r.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Zoom Out")
                            },
                            onTap: this.bindFn(this.zoomOut)
                        }, r.createElement("i", {
                            class: r.const("dcg-icon dcg-icon-minus"),
                            "aria-hidden": r.const("true")
                        }))), r.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-btn-flat-gray": !0,
                                    "dcg-option": !0,
                                    "dcg-action-zoomrestore": !0,
                                    "dcg-tooltip-e": !0,
                                    "dcg-disabled": e.getZoomedDefault()
                                }
                            },
                            "aria-disabled": this.bindFn(this.getZoomedDefault),
                            tooltip: function () {
                                return e.controller.t("Default Zoom")
                            },
                            role: r.const("button"),
                            tabindex: r.const("0"),
                            "aria-label": function () {
                                return e.controller.t("Restore Default Zoom")
                            },
                            onTap: this.bindFn(this.zoomRestore)
                        }, r.createElement("i", {
                            class: r.const("dcg-icon dcg-icon-home"),
                            "aria-hidden": r.const("true")
                        })))), r.createElement(i.default, {
                            controller: function () {
                                return e.props.controller()
                            }
                        }))
                }
                ,
                t.prototype.didMountPillbox = function (e) {
                    this.node = e;
                    var t = o(e);
                    t.tipsy({
                        fade: "fast",
                        title: "tooltip",
                        wait: 500,
                        delegate: ".dcg-tooltip-e",
                        gravity: "e"
                    })
                }
                ,
                t.prototype.zoomIn = function () {
                    this.viewportController.zoom("in")
                }
                ,
                t.prototype.zoomOut = function () {
                    this.viewportController.zoom("out")
                }
                ,
                t.prototype.zoomRestore = function () {
                    this.viewportController.zoom("default")
                }
                ,
                t.prototype.getZoomedDefault = function () {
                    return this.controller.getGraphSettings().zoomedDefault
                }
                ,
                t.prototype.getContainerStyle = function () {
                    var e = this.controller.getLayoutMeasurements().keypadHeight
                        , t = this.controller.isGraphSettingsOpen();
                    return t && e ? "bottom: " + e + "px;" : ""
                }
                ,
                t
        }(r.Class);
        t.default = a
    }),
    define("loadcss!tour", function () { }),
    define("loadcss!calculator_embed", function () { }),
    define("loadcss!inputs", function () { }),
    define("loadcss!dcg-normalize", function () { }),
    define("loadcss!projector_mode", function () { }),
    define("loadcss!smallscreen", function () { }),
    define("loadcss!desmos-icons", function () { }),
    define("loadcss!popovers", function () { }),
    define("main/calc_embed", ["require", "exports", "touchtracking", "main/evaluator", "graphing/grapher", "main/graph_settings", "graphing/viewport", "main/keypad_view", "main/layout_controller", "tours/mathart", "tours/tour_manager", "underscore_model", "ipad.scrollfix", "i18n", "jquery", "main/controller", "dcgview", "expressions/list_view", "main/toast-view", "main/instancehotkeys", "main/pillbox-view", "lib/console", "loadcss!tour", "loadcss!calculator_embed", "loadcss!inputs", "loadcss!dcg-normalize", "loadcss!projector_mode", "loadcss!smallscreen", "loadcss!desmos-icons", "loadcss!popovers"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var E = 0
            , _ = function () {
                function e(e, t, s) {
                    function w(e, t) {
                        return h.t(e, t, S.language)
                    }
                    var _ = this;
                    this.__id = E++;
                    var S = new o;
                    for (var k in s)
                        S.config.setProperty(k, s[k]);
                    var M = new m.default(S);
                    this.controller = M,
                        S.config.keypad && S.config.expressions && !S.config.nativeOnscreenKeypad && (window.overrideNativeOnscreenKeypad = !0);
                    var C = ["dcg-container"];
                    S.config.settingsMenu || C.push("dcg-no-settings-menu"),
                        S.config.expressionsTopbar || C.push("dcg-no-expression-topbar"),
                        S.config.zoomButtons || C.push("dcg-no-zoom"),
                        S.config.branding || C.push("dcg-no-branding"),
                        S.config.links || C.push("dcg-no-hyperlinks"),
                        S.config.border && C.push("dcg-default-border"),
                        S.config.invertedColors && C.push("dcg-inverted-colors");
                    var I = f('<div class="' + C.join(" ") + '" role="application" x-ms-format-detection="none">');
                    this.embedElt = I[0],
                        this.rootElt = e,
                        n.monitor(I[0]);
                    var T = f('<div class="dcg-grapher">');
                    S.config.disableScrollFix || p.limitScrollOnElement(I);
                    var P = r(t);
                    this.controller.setEvaluator(P);
                    var A;
                    S.config.expressions && !S.config.expressionsCollapsed || I.addClass("dcg-fullscreen"),
                        S.config.expressions && (this.expressionsContainer = document.createElement("div"),
                            I[0].appendChild(this.expressionsContainer),
                            this.expressionsView = g.mountToNode(y.default, this.expressionsContainer, {
                                controller: function () {
                                    return _.controller
                                },
                                $root: function () {
                                    return I
                                }
                            }),
                            I.find(".dcg-expressions-branding .dcg-edit-branding").on("dcg-tap", function () {
                                return _._openOnWeb()
                            })),
                        T.appendTo(I),
                        S.config.keypad && (this.keypadView = A = a(this.controller),
                            A.appendTo(I)),
                        S.config.graphpaper || I.addClass("dcg-no-graphpaper"),
                        I.appendTo(e);
                    var L = new i(T, S, I, this.controller, P);
                    this.controller.setGrapher(L),
                        S.registerCallbacks(L, I, P),
                        this.controller.initStateStack(),
                        S.config.redrawSlowly || (L.redrawSlowly = L.redrawAllLayers),
                        P.triggerStatusChange = function (e) {
                            _.controller.dispatch({
                                type: "on-evaluator-changes",
                                changes: e
                            })
                        }
                        ,
                        P.triggerGraphData = function (e) {
                            M.dispatch({
                                type: "process-graph-data",
                                graphData: e
                            })
                        }
                        ,
                        P.triggerRender = function () {
                            L.redrawAllLayers()
                        }
                        ,
                        P.triggerRenderSlowly = function () {
                            L.redrawSlowly()
                        }
                        ;
                    var O = document.createElement("div");
                    I[0].appendChild(O);
                    var D = g.mountToNode(x.default, O, {
                        controller: g.const(this.controller),
                        viewportController: g.const(L.viewportController)
                    })
                        , q = document.createElement("div");
                    I[0].appendChild(q);
                    var N = g.mountToNode(v.ToastView, q, {
                        message: function () {
                            var e = _.controller.getToastData().message;
                            return e ? e : ""
                        },
                        showUndo: function () {
                            return !!_.controller.getToastData().undoCallback
                        },
                        showLearnMore: function () {
                            return !!_.controller.getToastData().learnMoreCallback
                        },
                        noAria: function () {
                            return !!_.controller.getToastData().noAria
                        },
                        toastStyle: function () {
                            return _.controller.getToastData().toastStyle
                        },
                        t: this.controller.t,
                        onUndo: function () {
                            return _.controller.dispatch({
                                type: "toast/undo"
                            })
                        },
                        onLearnMore: function () {
                            return _.controller.dispatch({
                                type: "toast/learn-more"
                            })
                        },
                        onClose: function () {
                            return _.controller.dispatch({
                                type: "toast/close"
                            })
                        }
                    });
                    this.unsubFunc = this.controller.subToChanges(function () {
                        var e = _.layoutController.currentScreen.width > 0 && _.layoutController.currentScreen.height > 0;
                        e && (D.update(),
                            N.update(),
                            _.expressionsView && _.expressionsView.update())
                    }),
                        L.addDomObstruction(I.find(".dcg-overgraph-pillbox-elements")[0]),
                        L.addDomObstruction(I.find(".dcg-graphpaper-branding")[0]),
                        I.find(".dcg-graphpaper-branding .dcg-edit-branding").on("dcg-tap", function () {
                            return _._openOnWeb()
                        }),
                        this.pillboxContainer = O,
                        this.pillboxView = D,
                        this.toastContainer = q,
                        this.toastView = N;
                    var F = c({
                        keypadView: A,
                        grapher: L
                    }, I, this.controller);
                    this.layoutController = F,
                        this.controller.setLayoutController(F);
                    var R = d();
                    R.setProperties({
                        pixelCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        },
                        mathCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        }
                    }),
                        this.graphpaperBounds = R,
                        F.triggerGraphpaperRectChanged = function (e) {
                            R.setProperty("pixelCoordinates", {
                                top: e.top,
                                bottom: e.bottom,
                                left: e.left,
                                right: e.right,
                                width: e.width,
                                height: e.height
                            }),
                                L.triggerProjectionChanged()
                        }
                        ,
                        L.triggerProjectionChanged = function () {
                            var e = L.getProjection();
                            L.settings.setProperty("zoomedDefault", L.viewportController.isZoomRestored()),
                                L.syncSquareAxes(),
                                P.setViewState({
                                    viewport: e.viewport.toObject(),
                                    screen: e.screen
                                }),
                                R.setProperty("mathCoordinates", {
                                    top: e.viewport.ymax,
                                    bottom: e.viewport.ymin,
                                    left: e.viewport.xmin,
                                    right: e.viewport.xmax,
                                    width: e.viewport.xmax - e.viewport.xmin,
                                    height: e.viewport.ymax - e.viewport.ymin
                                })
                        }
                        ,
                        L.triggerProjectionChanged(),
                        f(window).on("dcg-tapstart.calculator-" + this.__id, function (e) {
                            var t = f(e.target);
                            t.closest(I).length || t.hasClass("dcg-shell") || M.dispatch({
                                type: "set-none-selected"
                            }),
                                e.wasHandled("do-not-clear-poi-labels") || L.poiController.clearOpenedPOI()
                        }),
                        this.grapher = L,
                        this.evaluator = P,
                        this.tourManager = u({
                            evaluator: P
                        }),
                        this.tourManager.TOURS = l,
                        F.resize(),
                        this.controller.dispatch({
                            type: "set-blank"
                        });
                    var j = ["degreeMode", "invertedColors"]
                        , B = {};
                    j.forEach(function (e) {
                        void 0 !== s[e] && (B[e] = s[e])
                    }),
                        S.setGraphSettings(B),
                        S.config.expressionsCollapsed && this.setOptions({
                            expressionsCollapsed: !0
                        }),
                        S.config.hasOwnProperty("pointsOfInterest") && this.setOptions({
                            pointsOfInterest: S.config.pointsOfInterest
                        }),
                        S.observe("language", function () {
                            var e = _.controller.getState();
                            A && A.onLanguageChange(),
                                _.controller.dispatch({
                                    type: "set-state",
                                    state: e
                                }),
                                _.tourManager && (_.tourManager.closingMsg = ["<b>__endingMessage__</b><br>", w("This message will self-destruct in __seconds__...")].join(""))
                        }),
                        this.instanceHotkeys = new b.default(I, M)
                }
                return e.prototype.getState = function (e) {
                    return this.controller.getState(e)
                }
                    ,
                    e.prototype.setState = function (e, t) {
                        this.controller.dispatch({
                            type: "set-state",
                            state: e,
                            opts: t
                        })
                    }
                    ,
                    e.prototype.setBlank = function (e) {
                        this.controller.dispatch({
                            type: "set-blank",
                            opts: e
                        })
                    }
                    ,
                    e.prototype.setOptions = function (e) {
                        var t = f(this.embedElt)
                            , n = !1;
                        e.hasOwnProperty("solutions") && (w.warn("Deprecated option: solutions. Use pointsOfInterest instead."),
                            e.pointsOfInterest = e.solutions),
                            e.hasOwnProperty("pointsOfInterest") && this.controller.getGraphSettings().config.setProperty("pointsOfInterest", e.pointsOfInterest),
                            e.hasOwnProperty("settingsMenu") && t.toggleClass("dcg-no-settings-menu", !e.settingsMenu),
                            e.hasOwnProperty("border") && t.toggleClass("dcg-default-border", !!e.border),
                            e.hasOwnProperty("branding") && t.toggleClass("dcg-no-branding", !e.branding),
                            e.hasOwnProperty("expressionsTopbar") && (t.toggleClass("dcg-no-expression-topbar", !e.expressionsTopbar),
                                n = !0),
                            e.hasOwnProperty("graphpaper") && (t.toggleClass("dcg-no-graphpaper", !e.graphpaper),
                                n = !0),
                            e.hasOwnProperty("zoomButtons") && t.toggleClass("dcg-no-zoom", !e.zoomButtons),
                            e.hasOwnProperty("expressionsCollapsed") && (e.expressionsCollapsed ? this.controller.dispatch({
                                type: "hide-expressions-list"
                            }) : this.controller.dispatch({
                                type: "show-expressions-list"
                            })),
                            e.hasOwnProperty("keypad") && w.warn("Bad option {keypad: " + e.keypad + "}. The keypad can only be added or removed at load time, not at runtime."),
                            e.hasOwnProperty("expressions") && w.warn("Bad option {expressions: " + e.expressions + "}. The expressions can only be added or removed at load time, not at runtime."),
                            e.hasOwnProperty("lockViewport") && this.controller.getGraphSettings().config.setProperty("lockViewport", e.lockViewport),
                            n && this.layoutController.resize()
                    }
                    ,
                    e.prototype.setViewport = function (e) {
                        this.grapher.viewportController.setViewport(new s(e[0], e[1], e[2], e[3]))
                    }
                    ,
                    e.prototype.resize = function () {
                        this.layoutController.resize()
                    }
                    ,
                    e.prototype.interceptTouch = function () {
                        var e = this
                            , t = this.grapher.$
                            , n = f(this.embedElt);
                        t = t.add(n.find(".dcg-expression-top-bar")),
                            this.keypadView && (t = t.add(this.keypadView.$())),
                            t.on("touchstart", function (e) {
                                e.preventDefault()
                            }),
                            t.on("touchend", function (t) {
                                f(t.target).closest(".dcg-do-not-blur") || e.layoutController.defocusMobile()
                            })
                    }
                    ,
                    e.prototype._openOnWeb = function () {
                        var e = JSON.stringify(this.getState())
                            , t = this.grapher.screenshot({
                                width: 100,
                                height: 100
                            })
                            , n = this.controller.getGraphSettings().config.crossOriginSaveTest
                            , r = n ? "/" : "https://www.desmos.com/"
                            , i = r + "api/v1/calculator/cross_origin_save"
                            , o = f('<input type="text" name="calc_state" />').val(e)
                            , s = f('<input type="text" name="thumb_data" />').val(t)
                            , a = f('<form target="_blank" method="POST" style="display:none;"></form>').attr("action", i).append(f('<input type="text" name="is_open_on_web" value="true" />')).append(f('<input type="text" name="my_graphs" value="false" />')).append(f('<input type="text" name="is_update" value="false" />')).append(o).append(s);
                        f(this.embedElt).append(a),
                            a.submit().remove()
                    }
                    ,
                    e.prototype.destroy = function () {
                        f(window).off(".calculator-" + this.__id),
                            this.unsubFunc(),
                            this.grapher.settings.unobserveAll(),
                            this.evaluator && this.evaluator.destroy(),
                            this.grapher && this.grapher.remove(),
                            this.pillboxView && g.unmountFromNode(this.pillboxContainer),
                            this.toastView && g.unmountFromNode(this.toastContainer),
                            this.expressionsView && g.unmountFromNode(this.expressionsContainer),
                            this.keypadView && this.keypadView.remove(),
                            this.instanceHotkeys && this.instanceHotkeys.remove(),
                            this.rootElt.contains(this.embedElt) && this.rootElt.removeChild(this.embedElt)
                    }
                    ,
                    e.prototype.tick = function (e) {
                        this.controller.dispatch({
                            type: "tick",
                            time: e
                        })
                    }
                    ,
                    e
            }();
        t.default = _
    }),
    define("main/calc_headless", ["require", "pjs", "main/evaluator", "main/graph_settings", "underscore_model", "main/controller"], function (e) {
        var t = e("pjs")
            , n = e("main/evaluator")
            , r = e("main/graph_settings")
            , i = e("underscore_model")
            , o = e("main/controller").default
            , s = t(function (e) {
                e.init = function (e, t) {
                    var s = new r;
                    for (var a in t)
                        s.config.setProperty(a, t[a]);
                    this.controller = new o(s);
                    var c = n(e);
                    this.controller.setEvaluator(c),
                        c.triggerStatusChange = function (e) {
                            this.controller.dispatch({
                                type: "on-evaluator-changes",
                                changes: e
                            })
                        }
                            .bind(this);
                    var l = i();
                    l.setProperties({
                        pixelCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        },
                        mathCoordinates: {
                            top: 0,
                            bottom: 0,
                            left: 0,
                            right: 0,
                            width: 0,
                            height: 0
                        }
                    }),
                        this.graphpaperBounds = l,
                        this.evaluator = c,
                        this.getState = this.controller.getState.bind(this.controller),
                        this.setState = function (e, t) {
                            this.controller.dispatch({
                                type: "set-state",
                                state: e,
                                opts: t
                            })
                        }
                        ,
                        this.setBlank = function (e) {
                            this.controller.dispatch({
                                type: "set-blank",
                                opts: e
                            })
                        }
                        ,
                        this.setViewport = function (e) { }
                        ,
                        this.resize = function () { }
                        ,
                        this.setOptions = function (e) { }
                        ,
                        this.setBlank()
                }
                    ,
                    e.tick = function (e) {
                        this.evaluator.tick(e)
                    }
            });
        return s
    }),
    define("main/raf-loop", ["require", "lib/animation-frame"], function (e) {
        function t(e) {
            function t(r) {
                n.requestAnimationFrame(t),
                    e(r)
            }
            n.requestAnimationFrame(t)
        }
        var n = e("lib/animation-frame");
        return t
    }),
    define("main/shared-clock-bus", ["require", "exports", "main/raf-loop", "underscore_model"], function (e, t, n, r) {
        "use strict";
        function i(e) {
            return a += 1,
                s.observeEvent("tick." + a, function (t, n) {
                    e(n)
                }),
                a
        }
        function o(e) {
            s.unobserveEvent("tick." + e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r();
        n(function (e) {
            s.triggerEvent("tick", e)
        });
        var a = 0;
        t.subscribe = i,
            t.unsubscribe = o
    }),
    define("main/shared-worker-pool", ["require", "exports", "worker/workerpool", "lib/urlparser"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r.getParameter("nworkers")
            , o = 4;
        i && (o = parseInt(i, 10)),
            t.default = new n(o)
    }),
    function (e) {
        "use strict";
        var t = function (e, n, r) {
            var i, o, s = document.createElement("img");
            if (s.onerror = n,
                s.onload = function () {
                    !o || r && r.noRevoke || t.revokeObjectURL(o),
                        n && n(t.scale(s, r))
                }
                ,
                t.isInstanceOf("Blob", e) || t.isInstanceOf("File", e))
                i = o = t.createObjectURL(e),
                    s._type = e.type;
            else {
                if ("string" != typeof e)
                    return !1;
                i = e,
                    r && r.crossOrigin && (s.crossOrigin = r.crossOrigin)
            }
            return i ? (s.src = i,
                s) : t.readFile(e, function (e) {
                    var t = e.target;
                    t && t.result ? s.src = t.result : n && n(e)
                })
        }
            , n = window.createObjectURL && window || window.URL && URL.revokeObjectURL && URL || window.webkitURL && webkitURL;
        t.isInstanceOf = function (e, t) {
            return Object.prototype.toString.call(t) === "[object " + e + "]"
        }
            ,
            t.transformCoordinates = function () { }
            ,
            t.getTransformedOptions = function (e) {
                return e
            }
            ,
            t.renderImageToCanvas = function (e, t, n, r, i, o, s, a, c, l) {
                return e.getContext("2d").drawImage(t, n, r, i, o, s, a, c, l),
                    e
            }
            ,
            t.hasCanvasOption = function (e) {
                return e.canvas || e.crop
            }
            ,
            t.scale = function (e, n) {
                n = n || {};
                var r, i, o, s, a, c, l, u, d, p = document.createElement("canvas"), h = e.getContext || t.hasCanvasOption(n) && p.getContext, f = e.naturalWidth || e.width, m = e.naturalHeight || e.height, g = f, y = m, v = function () {
                    var e = Math.max((o || g) / g, (s || y) / y);
                    e > 1 && (g = Math.ceil(g * e),
                        y = Math.ceil(y * e))
                }, b = function () {
                    var e = Math.min((r || g) / g, (i || y) / y);
                    e < 1 && (g = Math.ceil(g * e),
                        y = Math.ceil(y * e))
                };
                return h && (n = t.getTransformedOptions(n),
                    l = n.left || 0,
                    u = n.top || 0,
                    n.sourceWidth ? (a = n.sourceWidth,
                        void 0 !== n.right && void 0 === n.left && (l = f - a - n.right)) : a = f - l - (n.right || 0),
                    n.sourceHeight ? (c = n.sourceHeight,
                        void 0 !== n.bottom && void 0 === n.top && (u = m - c - n.bottom)) : c = m - u - (n.bottom || 0),
                    g = a,
                    y = c),
                    r = n.maxWidth,
                    i = n.maxHeight,
                    o = n.minWidth,
                    s = n.minHeight,
                    h && r && i && n.crop ? (g = r,
                        y = i,
                        d = a / c - r / i,
                        d < 0 ? (c = i * a / r,
                            void 0 === n.top && void 0 === n.bottom && (u = (m - c) / 2)) : d > 0 && (a = r * c / i,
                                void 0 === n.left && void 0 === n.right && (l = (f - a) / 2))) : ((n.contain || n.cover) && (o = r = r || o,
                                    s = i = i || s),
                                    n.cover ? (b(),
                                        v()) : (v(),
                                            b())),
                    h ? (p.width = g,
                        p.height = y,
                        t.transformCoordinates(p, n),
                        t.renderImageToCanvas(p, e, l, u, a, c, 0, 0, g, y)) : (e.width = g,
                            e.height = y,
                            e)
            }
            ,
            t.createObjectURL = function (e) {
                return !!n && n.createObjectURL(e)
            }
            ,
            t.revokeObjectURL = function (e) {
                return !!n && n.revokeObjectURL(e)
            }
            ,
            t.readFile = function (e, t, n) {
                if (window.FileReader) {
                    var r = new FileReader;
                    if (r.onload = r.onerror = t,
                        n = n || "readAsDataURL",
                        r[n])
                        return r[n](e),
                            r
                }
                return !1
            }
            ,
            "function" == typeof define && define.amd ? define("vendor/load-image/load-image", [], function () {
                return t
            }) : e.loadImage = t
    }(this),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-orientation", ["./load-image"], e) : e(window.loadImage)
    }(function (e) {
        "use strict";
        var t = e.hasCanvasOption;
        e.hasCanvasOption = function (e) {
            return t(e) || e.orientation
        }
            ,
            e.transformCoordinates = function (e, t) {
                var n = e.getContext("2d")
                    , r = e.width
                    , i = e.height
                    , o = t.orientation;
                if (o)
                    switch (o > 4 && (e.width = i,
                        e.height = r),
                    o) {
                        case 2:
                            n.translate(r, 0),
                                n.scale(-1, 1);
                            break;
                        case 3:
                            n.translate(r, i),
                                n.rotate(Math.PI);
                            break;
                        case 4:
                            n.translate(0, i),
                                n.scale(1, -1);
                            break;
                        case 5:
                            n.rotate(.5 * Math.PI),
                                n.scale(1, -1);
                            break;
                        case 6:
                            n.rotate(.5 * Math.PI),
                                n.translate(0, -i);
                            break;
                        case 7:
                            n.rotate(.5 * Math.PI),
                                n.translate(r, -i),
                                n.scale(-1, 1);
                            break;
                        case 8:
                            n.rotate(-.5 * Math.PI),
                                n.translate(-r, 0)
                    }
            }
            ,
            e.getTransformedOptions = function (e) {
                if (!e.orientation || 1 === e.orientation)
                    return e;
                var t, n = {};
                for (t in e)
                    e.hasOwnProperty(t) && (n[t] = e[t]);
                switch (e.orientation) {
                    case 2:
                        n.left = e.right,
                            n.right = e.left;
                        break;
                    case 3:
                        n.left = e.right,
                            n.top = e.bottom,
                            n.right = e.left,
                            n.bottom = e.top;
                        break;
                    case 4:
                        n.top = e.bottom,
                            n.bottom = e.top;
                        break;
                    case 5:
                        n.left = e.top,
                            n.top = e.left,
                            n.right = e.bottom,
                            n.bottom = e.right;
                        break;
                    case 6:
                        n.left = e.top,
                            n.top = e.right,
                            n.right = e.bottom,
                            n.bottom = e.left;
                        break;
                    case 7:
                        n.left = e.bottom,
                            n.top = e.right,
                            n.right = e.top,
                            n.bottom = e.left;
                        break;
                    case 8:
                        n.left = e.bottom,
                            n.top = e.left,
                            n.right = e.top,
                            n.bottom = e.right
                }
                return e.orientation > 4 && (n.maxWidth = e.maxHeight,
                    n.maxHeight = e.maxWidth,
                    n.minWidth = e.minHeight,
                    n.minHeight = e.minWidth,
                    n.sourceWidth = e.sourceHeight,
                    n.sourceHeight = e.sourceWidth),
                    n
            }
    }),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-meta", ["./load-image"], e) : e(window.loadImage)
    }(function (e) {
        "use strict";
        var t = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
        e.blobSlice = t && function () {
            var e = this.slice || this.webkitSlice || this.mozSlice;
            return e.apply(this, arguments)
        }
            ,
            e.metaDataParsers = {
                jpeg: {
                    65505: []
                }
            },
            e.parseMetaData = function (t, n, r) {
                r = r || {};
                var i = this
                    , o = r.maxMetaDataSize || 262144
                    , s = {}
                    , a = !(window.DataView && t && t.size >= 12 && "image/jpeg" === t.type && e.blobSlice);
                !a && e.readFile(e.blobSlice.call(t, 0, o), function (t) {
                    var o, a, c, l, u = t.target.result, d = new DataView(u), p = 2, h = d.byteLength - 4, f = p;
                    if (65496 === d.getUint16(0)) {
                        for (; p < h && (o = d.getUint16(p),
                            o >= 65504 && o <= 65519 || 65534 === o);) {
                            if (a = d.getUint16(p + 2) + 2,
                                p + a > d.byteLength) {
                                console.log("Invalid meta data: Invalid segment size.");
                                break
                            }
                            if (c = e.metaDataParsers.jpeg[o])
                                for (l = 0; l < c.length; l += 1)
                                    c[l].call(i, d, p, a, s, r);
                            p += a,
                                f = p
                        }
                        !r.disableImageHead && f > 6 && (u.slice ? s.imageHead = u.slice(0, f) : s.imageHead = new Uint8Array(u).subarray(0, f))
                    } else
                        console.log("Invalid JPEG file: Missing JPEG marker.");
                    n(s)
                }, "readAsArrayBuffer") || n(s)
            }
    }),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-ios", ["./load-image"], e) : e(window.loadImage)
    }(function (e) {
        "use strict";
        if (window.navigator && window.navigator.platform && /iP(hone|od|ad)/.test(window.navigator.platform)) {
            var t = e.renderImageToCanvas;
            e.detectSubsampling = function (e) {
                var t, n;
                return e.width * e.height > 1048576 && (t = document.createElement("canvas"),
                    t.width = t.height = 1,
                    n = t.getContext("2d"),
                    n.drawImage(e, -e.width + 1, 0),
                    0 === n.getImageData(0, 0, 1, 1).data[3])
            }
                ,
                e.detectVerticalSquash = function (e, t) {
                    var n, r, i, o, s, a = e.naturalHeight || e.height, c = document.createElement("canvas"), l = c.getContext("2d");
                    for (t && (a /= 2),
                        c.width = 1,
                        c.height = a,
                        l.drawImage(e, 0, 0),
                        n = l.getImageData(0, 0, 1, a).data,
                        r = 0,
                        i = a,
                        o = a; o > r;)
                        s = n[4 * (o - 1) + 3],
                            0 === s ? i = o : r = o,
                            o = i + r >> 1;
                    return o / a || 1
                }
                ,
                e.renderImageToCanvas = function (n, r, i, o, s, a, c, l, u, d) {
                    if ("image/jpeg" === r._type) {
                        var p, h, f, m, g = n.getContext("2d"), y = document.createElement("canvas"), v = 1024, b = y.getContext("2d");
                        if (y.width = v,
                            y.height = v,
                            g.save(),
                            p = e.detectSubsampling(r),
                            p && (i /= 2,
                                o /= 2,
                                s /= 2,
                                a /= 2),
                            h = e.detectVerticalSquash(r, p),
                            p || 1 !== h) {
                            for (o *= h,
                                u = Math.ceil(v * u / s),
                                d = Math.ceil(v * d / a / h),
                                l = 0,
                                m = 0; m < a;) {
                                for (c = 0,
                                    f = 0; f < s;)
                                    b.clearRect(0, 0, v, v),
                                        b.drawImage(r, i, o, s, a, -f, -m, s, a),
                                        g.drawImage(y, 0, 0, v, v, c, l, u, d),
                                        f += v,
                                        c += u;
                                m += v,
                                    l += d
                            }
                            return g.restore(),
                                n
                        }
                    }
                    return t(n, r, i, o, s, a, c, l, u, d)
                }
        }
    }),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-exif", ["./load-image", "./load-image-meta"], e) : e(window.loadImage)
    }(function (e) {
        "use strict";
        e.ExifMap = function () {
            return this
        }
            ,
            e.ExifMap.prototype.map = {
                Orientation: 274
            },
            e.ExifMap.prototype.get = function (e) {
                return this[e] || this[this.map[e]]
            }
            ,
            e.getExifThumbnail = function (e, t, n) {
                var r, i, o;
                if (!n || t + n > e.byteLength)
                    return void console.log("Invalid Exif data: Invalid thumbnail data.");
                for (r = [],
                    i = 0; i < n; i += 1)
                    o = e.getUint8(t + i),
                        r.push((o < 16 ? "0" : "") + o.toString(16));
                return "data:image/jpeg,%" + r.join("%")
            }
            ,
            e.exifTagTypes = {
                1: {
                    getValue: function (e, t) {
                        return e.getUint8(t)
                    },
                    size: 1
                },
                2: {
                    getValue: function (e, t) {
                        return String.fromCharCode(e.getUint8(t))
                    },
                    size: 1,
                    ascii: !0
                },
                3: {
                    getValue: function (e, t, n) {
                        return e.getUint16(t, n)
                    },
                    size: 2
                },
                4: {
                    getValue: function (e, t, n) {
                        return e.getUint32(t, n)
                    },
                    size: 4
                },
                5: {
                    getValue: function (e, t, n) {
                        return e.getUint32(t, n) / e.getUint32(t + 4, n)
                    },
                    size: 8
                },
                9: {
                    getValue: function (e, t, n) {
                        return e.getInt32(t, n)
                    },
                    size: 4
                },
                10: {
                    getValue: function (e, t, n) {
                        return e.getInt32(t, n) / e.getInt32(t + 4, n)
                    },
                    size: 8
                }
            },
            e.exifTagTypes[7] = e.exifTagTypes[1],
            e.getExifValue = function (t, n, r, i, o, s) {
                var a, c, l, u, d, p, h = e.exifTagTypes[i];
                if (!h)
                    return void console.log("Invalid Exif data: Invalid tag type.");
                if (a = h.size * o,
                    c = a > 4 ? n + t.getUint32(r + 8, s) : r + 8,
                    c + a > t.byteLength)
                    return void console.log("Invalid Exif data: Invalid data offset.");
                if (1 === o)
                    return h.getValue(t, c, s);
                for (l = [],
                    u = 0; u < o; u += 1)
                    l[u] = h.getValue(t, c + u * h.size, s);
                if (h.ascii) {
                    for (d = "",
                        u = 0; u < l.length && (p = l[u],
                            "\0" !== p); u += 1)
                        d += p;
                    return d
                }
                return l
            }
            ,
            e.parseExifTag = function (t, n, r, i, o) {
                var s = t.getUint16(r, i);
                o.exif[s] = e.getExifValue(t, n, r, t.getUint16(r + 2, i), t.getUint32(r + 4, i), i)
            }
            ,
            e.parseExifTags = function (e, t, n, r, i) {
                var o, s, a;
                if (n + 6 > e.byteLength)
                    return void console.log("Invalid Exif data: Invalid directory offset.");
                if (o = e.getUint16(n, r),
                    s = n + 2 + 12 * o,
                    s + 4 > e.byteLength)
                    return void console.log("Invalid Exif data: Invalid directory size.");
                for (a = 0; a < o; a += 1)
                    this.parseExifTag(e, t, n + 2 + 12 * a, r, i);
                return e.getUint32(s, r)
            }
            ,
            e.parseExifData = function (t, n, r, i, o) {
                if (!o.disableExif) {
                    var s, a, c, l = n + 10;
                    if (1165519206 === t.getUint32(n + 4)) {
                        if (l + 8 > t.byteLength)
                            return void console.log("Invalid Exif data: Invalid segment size.");
                        if (0 !== t.getUint16(n + 8))
                            return void console.log("Invalid Exif data: Missing byte alignment offset.");
                        switch (t.getUint16(l)) {
                            case 18761:
                                s = !0;
                                break;
                            case 19789:
                                s = !1;
                                break;
                            default:
                                return void console.log("Invalid Exif data: Invalid byte alignment marker.")
                        }
                        if (42 !== t.getUint16(l + 2, s))
                            return void console.log("Invalid Exif data: Missing TIFF marker.");
                        a = t.getUint32(l + 4, s),
                            i.exif = new e.ExifMap,
                            a = e.parseExifTags(t, l, l + a, s, i),
                            a && !o.disableExifThumbnail && (c = {
                                exif: {}
                            },
                                a = e.parseExifTags(t, l, l + a, s, c),
                                c.exif[513] && (i.exif.Thumbnail = e.getExifThumbnail(t, l + c.exif[513], c.exif[514]))),
                            i.exif[34665] && !o.disableExifSub && e.parseExifTags(t, l, l + i.exif[34665], s, i),
                            i.exif[34853] && !o.disableExifGps && e.parseExifTags(t, l, l + i.exif[34853], s, i)
                    }
                }
            }
            ,
            e.metaDataParsers.jpeg[65505].push(e.parseExifData)
    }),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define("vendor/load-image/load-image-exif-map", ["./load-image", "./load-image-exif"], e) : e(window.loadImage)
    }(function (e) {
        "use strict";
        e.ExifMap.prototype.tags = {
            256: "ImageWidth",
            257: "ImageHeight",
            34665: "ExifIFDPointer",
            34853: "GPSInfoIFDPointer",
            40965: "InteroperabilityIFDPointer",
            258: "BitsPerSample",
            259: "Compression",
            262: "PhotometricInterpretation",
            274: "Orientation",
            277: "SamplesPerPixel",
            284: "PlanarConfiguration",
            530: "YCbCrSubSampling",
            531: "YCbCrPositioning",
            282: "XResolution",
            283: "YResolution",
            296: "ResolutionUnit",
            273: "StripOffsets",
            278: "RowsPerStrip",
            279: "StripByteCounts",
            513: "JPEGInterchangeFormat",
            514: "JPEGInterchangeFormatLength",
            301: "TransferFunction",
            318: "WhitePoint",
            319: "PrimaryChromaticities",
            529: "YCbCrCoefficients",
            532: "ReferenceBlackWhite",
            306: "DateTime",
            270: "ImageDescription",
            271: "Make",
            272: "Model",
            305: "Software",
            315: "Artist",
            33432: "Copyright",
            36864: "ExifVersion",
            40960: "FlashpixVersion",
            40961: "ColorSpace",
            40962: "PixelXDimension",
            40963: "PixelYDimension",
            42240: "Gamma",
            37121: "ComponentsConfiguration",
            37122: "CompressedBitsPerPixel",
            37500: "MakerNote",
            37510: "UserComment",
            40964: "RelatedSoundFile",
            36867: "DateTimeOriginal",
            36868: "DateTimeDigitized",
            37520: "SubSecTime",
            37521: "SubSecTimeOriginal",
            37522: "SubSecTimeDigitized",
            33434: "ExposureTime",
            33437: "FNumber",
            34850: "ExposureProgram",
            34852: "SpectralSensitivity",
            34855: "PhotographicSensitivity",
            34856: "OECF",
            34864: "SensitivityType",
            34865: "StandardOutputSensitivity",
            34866: "RecommendedExposureIndex",
            34867: "ISOSpeed",
            34868: "ISOSpeedLatitudeyyy",
            34869: "ISOSpeedLatitudezzz",
            37377: "ShutterSpeedValue",
            37378: "ApertureValue",
            37379: "BrightnessValue",
            37380: "ExposureBias",
            37381: "MaxApertureValue",
            37382: "SubjectDistance",
            37383: "MeteringMode",
            37384: "LightSource",
            37385: "Flash",
            37396: "SubjectArea",
            37386: "FocalLength",
            41483: "FlashEnergy",
            41484: "SpatialFrequencyResponse",
            41486: "FocalPlaneXResolution",
            41487: "FocalPlaneYResolution",
            41488: "FocalPlaneResolutionUnit",
            41492: "SubjectLocation",
            41493: "ExposureIndex",
            41495: "SensingMethod",
            41728: "FileSource",
            41729: "SceneType",
            41730: "CFAPattern",
            41985: "CustomRendered",
            41986: "ExposureMode",
            41987: "WhiteBalance",
            41988: "DigitalZoomRatio",
            41989: "FocalLengthIn35mmFilm",
            41990: "SceneCaptureType",
            41991: "GainControl",
            41992: "Contrast",
            41993: "Saturation",
            41994: "Sharpness",
            41995: "DeviceSettingDescription",
            41996: "SubjectDistanceRange",
            42016: "ImageUniqueID",
            42032: "CameraOwnerName",
            42033: "BodySerialNumber",
            42034: "LensSpecification",
            42035: "LensMake",
            42036: "LensModel",
            42037: "LensSerialNumber",
            0: "GPSVersionID",
            1: "GPSLatitudeRef",
            2: "GPSLatitude",
            3: "GPSLongitudeRef",
            4: "GPSLongitude",
            5: "GPSAltitudeRef",
            6: "GPSAltitude",
            7: "GPSTimeStamp",
            8: "GPSSatellites",
            9: "GPSStatus",
            10: "GPSMeasureMode",
            11: "GPSDOP",
            12: "GPSSpeedRef",
            13: "GPSSpeed",
            14: "GPSTrackRef",
            15: "GPSTrack",
            16: "GPSImgDirectionRef",
            17: "GPSImgDirection",
            18: "GPSMapDatum",
            19: "GPSDestLatitudeRef",
            20: "GPSDestLatitude",
            21: "GPSDestLongitudeRef",
            22: "GPSDestLongitude",
            23: "GPSDestBearingRef",
            24: "GPSDestBearing",
            25: "GPSDestDistanceRef",
            26: "GPSDestDistance",
            27: "GPSProcessingMethod",
            28: "GPSAreaInformation",
            29: "GPSDateStamp",
            30: "GPSDifferential",
            31: "GPSHPositioningError"
        },
            e.ExifMap.prototype.stringValues = {
                ExposureProgram: {
                    0: "Undefined",
                    1: "Manual",
                    2: "Normal program",
                    3: "Aperture priority",
                    4: "Shutter priority",
                    5: "Creative program",
                    6: "Action program",
                    7: "Portrait mode",
                    8: "Landscape mode"
                },
                MeteringMode: {
                    0: "Unknown",
                    1: "Average",
                    2: "CenterWeightedAverage",
                    3: "Spot",
                    4: "MultiSpot",
                    5: "Pattern",
                    6: "Partial",
                    255: "Other"
                },
                LightSource: {
                    0: "Unknown",
                    1: "Daylight",
                    2: "Fluorescent",
                    3: "Tungsten (incandescent light)",
                    4: "Flash",
                    9: "Fine weather",
                    10: "Cloudy weather",
                    11: "Shade",
                    12: "Daylight fluorescent (D 5700 - 7100K)",
                    13: "Day white fluorescent (N 4600 - 5400K)",
                    14: "Cool white fluorescent (W 3900 - 4500K)",
                    15: "White fluorescent (WW 3200 - 3700K)",
                    17: "Standard light A",
                    18: "Standard light B",
                    19: "Standard light C",
                    20: "D55",
                    21: "D65",
                    22: "D75",
                    23: "D50",
                    24: "ISO studio tungsten",
                    255: "Other"
                },
                Flash: {
                    0: "Flash did not fire",
                    1: "Flash fired",
                    5: "Strobe return light not detected",
                    7: "Strobe return light detected",
                    9: "Flash fired, compulsory flash mode",
                    13: "Flash fired, compulsory flash mode, return light not detected",
                    15: "Flash fired, compulsory flash mode, return light detected",
                    16: "Flash did not fire, compulsory flash mode",
                    24: "Flash did not fire, auto mode",
                    25: "Flash fired, auto mode",
                    29: "Flash fired, auto mode, return light not detected",
                    31: "Flash fired, auto mode, return light detected",
                    32: "No flash function",
                    65: "Flash fired, red-eye reduction mode",
                    69: "Flash fired, red-eye reduction mode, return light not detected",
                    71: "Flash fired, red-eye reduction mode, return light detected",
                    73: "Flash fired, compulsory flash mode, red-eye reduction mode",
                    77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
                    79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",
                    89: "Flash fired, auto mode, red-eye reduction mode",
                    93: "Flash fired, auto mode, return light not detected, red-eye reduction mode",
                    95: "Flash fired, auto mode, return light detected, red-eye reduction mode"
                },
                SensingMethod: {
                    1: "Undefined",
                    2: "One-chip color area sensor",
                    3: "Two-chip color area sensor",
                    4: "Three-chip color area sensor",
                    5: "Color sequential area sensor",
                    7: "Trilinear sensor",
                    8: "Color sequential linear sensor"
                },
                SceneCaptureType: {
                    0: "Standard",
                    1: "Landscape",
                    2: "Portrait",
                    3: "Night scene"
                },
                SceneType: {
                    1: "Directly photographed"
                },
                CustomRendered: {
                    0: "Normal process",
                    1: "Custom process"
                },
                WhiteBalance: {
                    0: "Auto white balance",
                    1: "Manual white balance"
                },
                GainControl: {
                    0: "None",
                    1: "Low gain up",
                    2: "High gain up",
                    3: "Low gain down",
                    4: "High gain down"
                },
                Contrast: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                Saturation: {
                    0: "Normal",
                    1: "Low saturation",
                    2: "High saturation"
                },
                Sharpness: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                SubjectDistanceRange: {
                    0: "Unknown",
                    1: "Macro",
                    2: "Close view",
                    3: "Distant view"
                },
                FileSource: {
                    3: "DSC"
                },
                ComponentsConfiguration: {
                    0: "",
                    1: "Y",
                    2: "Cb",
                    3: "Cr",
                    4: "R",
                    5: "G",
                    6: "B"
                },
                Orientation: {
                    1: "top-left",
                    2: "top-right",
                    3: "bottom-right",
                    4: "bottom-left",
                    5: "left-top",
                    6: "right-top",
                    7: "right-bottom",
                    8: "left-bottom"
                }
            },
            e.ExifMap.prototype.getText = function (e) {
                var t = this.get(e);
                switch (e) {
                    case "LightSource":
                    case "Flash":
                    case "MeteringMode":
                    case "ExposureProgram":
                    case "SensingMethod":
                    case "SceneCaptureType":
                    case "SceneType":
                    case "CustomRendered":
                    case "WhiteBalance":
                    case "GainControl":
                    case "Contrast":
                    case "Saturation":
                    case "Sharpness":
                    case "SubjectDistanceRange":
                    case "FileSource":
                    case "Orientation":
                        return this.stringValues[e][t];
                    case "ExifVersion":
                    case "FlashpixVersion":
                        return String.fromCharCode(t[0], t[1], t[2], t[3]);
                    case "ComponentsConfiguration":
                        return this.stringValues[e][t[0]] + this.stringValues[e][t[1]] + this.stringValues[e][t[2]] + this.stringValues[e][t[3]];
                    case "GPSVersionID":
                        return t[0] + "." + t[1] + "." + t[2] + "." + t[3]
                }
                return String(t)
            }
            ,
            function (e) {
                var t, n = e.tags, r = e.map;
                for (t in n)
                    n.hasOwnProperty(t) && (r[n[t]] = t)
            }(e.ExifMap.prototype),
            e.ExifMap.prototype.getAll = function () {
                var e, t, n = {};
                for (e in this)
                    this.hasOwnProperty(e) && (t = this.tags[e],
                        t && (n[t] = this.getText(t)));
                return n
            }
    }),
    define("loadImage", ["require", "vendor/load-image/load-image-orientation", "vendor/load-image/load-image-meta", "vendor/load-image/load-image-ios", "vendor/load-image/load-image-exif", "vendor/load-image/load-image-exif-map", "vendor/load-image/load-image"], function (e) {
        e("vendor/load-image/load-image-orientation"),
            e("vendor/load-image/load-image-meta"),
            e("vendor/load-image/load-image-ios"),
            e("vendor/load-image/load-image-exif"),
            e("vendor/load-image/load-image-exif-map");
        var t = e("vendor/load-image/load-image");
        return t
    }),
    define("expressions/image_file_to_data_url", ["require", "loadImage"], function (e) {
        function t(e, t) {
            for (var n, r = [.92, .86, .8, .7, .6, .5, .4, .3, .2, .1], i = 0; i < r.length; i++)
                if (n = e.toDataURL("image/jpeg", r[i]),
                    n.length < t)
                    return n;
            return n
        }
        function n(e, t) {
            for (var n, r = e.toDataURL().length, i = e.width, o = e.height, s = document.createElement("canvas"), a = 0; a < 2; a++) {
                var c = Math.sqrt(t / r);
                i = Math.round(c * i),
                    o = Math.round(c * o),
                    s.height = o,
                    s.width = i;
                var l = s.getContext("2d");
                if (l.drawImage(e, 0, 0, i, o),
                    n = s.toDataURL(),
                    r = n.length,
                    r < t)
                    return n
            }
            return n
        }
        function r(e, r) {
            var o = {
                orientation: !0,
                canvas: !0,
                maxWidth: 1600,
                maxHeight: 1600
            };
            i(e, function (i) {
                if (!i.toDataURL)
                    return void r(!0);
                var o, s = 2e5;
                "image/jpeg" === e.type ? o = t(i, s) : (o = i.toDataURL(),
                    o.length > s && (o = o.length > .75 * i.width * i.height ? t(i, s) : n(i, s))),
                    r(null, o)
            }, o)
        }
        var i = e("loadImage");
        return r
    }),
    define("lib/dom-change-detector", ["require", "exports", "tslib", "lib/animation-frame", "jquery"], function (e, t, n, r, i) {
        "use strict";
        function o() {
            l = !0,
                r.requestAnimationFrame(s)
        }
        function s() {
            t.testFixture.rafSPY && t.testFixture.rafSPY(),
                l = !1;
            for (var e in c)
                c[e].detectAndEnqueueEvent(),
                    l = !0;
            if (l) {
                o();
                for (var e in c)
                    c[e].dispatchQueuedEvent()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = 1
            , c = {}
            , l = !1;
        t.testFixture = {},
            t.checkAllWatchingDetectors = s;
        var u = function () {
            function e(e, t) {
                this.elt = e,
                    this.cb = t,
                    this.destroyed = !1,
                    this.id = a.toString(),
                    this.appliedScale = {
                        x: 1,
                        y: 1
                    },
                    a++
            }
            return e.prototype.stopWatching = function () {
                delete c[this.id]
            }
                ,
                e.prototype.startWatching = function () {
                    this.checkForChanges(),
                        c[this.id] = this,
                        l || o()
                }
                ,
                e.prototype.resetAppliedScalingAndGetBoundingClientRect = function () {
                    var e = this.elt.getBoundingClientRect()
                        , t = {
                            x: e.width / this.elt.offsetWidth,
                            y: e.height / this.elt.offsetHeight
                        };
                    if (t.x === this.appliedScale.x && t.y === this.appliedScale.y)
                        return e;
                    this.appliedScale = t;
                    var n = {
                        transform: "scale(" + 1 / this.appliedScale.x + "," + 1 / this.appliedScale.y + ")",
                        width: 100 * this.appliedScale.x + "%",
                        height: 100 * this.appliedScale.y + "%"
                    };
                    return i(this.elt).children(".dcg-container:eq(0)").css(n),
                        this.elt.getBoundingClientRect()
                }
                ,
                e.prototype.detectAndEnqueueEvent = function () {
                    if (!this.destroyed) {
                        var e = document.body.contains(this.elt);
                        if (e) {
                            var t = this.resetAppliedScalingAndGetBoundingClientRect();
                            this.lastSize ? t.width === this.lastSize.width && t.height === this.lastSize.height || (this.lastSize.width = t.width,
                                this.lastSize.height = t.height,
                                this.queuedEvent = {
                                    type: "resized",
                                    target: this.elt,
                                    size: n.__assign({}, this.lastSize)
                                }) : (this.lastSize = {
                                    width: t.width,
                                    height: t.height
                                },
                                    this.queuedEvent = {
                                        type: "added",
                                        target: this.elt,
                                        size: n.__assign({}, this.lastSize)
                                    })
                        } else
                            this.lastSize && (this.lastSize = void 0,
                                this.queuedEvent = {
                                    type: "removed",
                                    target: this.elt
                                })
                    }
                }
                ,
                e.prototype.dispatchQueuedEvent = function () {
                    var e = this.queuedEvent;
                    e && (this.queuedEvent = void 0,
                        this.cb(e))
                }
                ,
                e.prototype.checkForChanges = function () {
                    this.detectAndEnqueueEvent(),
                        this.dispatchQueuedEvent()
                }
                ,
                e.prototype.destroy = function () {
                    this.stopWatching();
                    for (var e in this)
                        this.hasOwnProperty(e) && delete this[e];
                    this.destroyed = !0
                }
                ,
                e
        }();
        t.default = u
    }),
    define("graphing/compute-async-screenshot-bounds", ["require", "console"], function (e) {
        function t(e) {
            var t = e.mode
                , r = e.width
                , i = e.height
                , o = e.currentBounds
                , s = e.graphpaperAspectRatio
                , a = e.mathAspectRatio
                , c = e.mathBounds
                , l = r / i
                , u = {
                    x: o.left + o.width / 2,
                    y: o.bottom + o.height / 2
                };
            if (void 0 === c.left != (void 0 === c.right) || void 0 === c.bottom != (void 0 === c.top))
                return n.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: ' + c),
                    o;
            var d, p, h, f, m, g, y, v, b, x, w = void 0 !== c.left && void 0 !== c.right, E = void 0 !== c.bottom && void 0 !== c.top, _ = w && E;
            switch (t) {
                case "stretch":
                    return _ ? c : w ? {
                        left: c.left,
                        right: c.right,
                        bottom: o.bottom,
                        top: o.top
                    } : E ? {
                        left: o.left,
                        right: o.right,
                        bottom: c.bottom,
                        top: c.top
                    } : o;
                case "contain":
                    return _ ? (f = c.right - c.left,
                        m = c.top - c.bottom,
                        g = {
                            x: c.left + f / 2,
                            y: c.bottom + m / 2
                        },
                        h = f / m,
                        l > h ? (p = m / i,
                            d = p * a,
                            {
                                left: g.x - d * r / 2,
                                right: g.x + d * r / 2,
                                bottom: c.bottom,
                                top: c.top
                            }) : (d = f / r,
                                p = d / a,
                                {
                                    left: c.left,
                                    right: c.right,
                                    bottom: g.y - p * i / 2,
                                    top: g.y + p * i / 2
                                })) : w ? (y = c.right - c.left,
                                    v = c.left + y / 2,
                                    h = y / o.height,
                                    l > h ? (p = o.height / i,
                                        d = p * a,
                                        {
                                            left: v - d * r / 2,
                                            right: v + d * r / 2,
                                            bottom: o.bottom,
                                            top: o.top
                                        }) : (d = y / r,
                                            p = d / a,
                                            {
                                                left: c.left,
                                                right: c.right,
                                                bottom: u.y - p * i / 2,
                                                top: u.y + p * i / 2
                                            })) : E ? (b = c.top - c.bottom,
                                                x = c.bottom + b / 2,
                                                h = o.width / b,
                                                l > h ? (p = b / i,
                                                    d = p * a,
                                                    {
                                                        left: u.x - d * r / 2,
                                                        right: u.x + d * r / 2,
                                                        bottom: c.bottom,
                                                        top: c.top
                                                    }) : (d = o.width / r,
                                                        p = d / a,
                                                        {
                                                            left: o.left,
                                                            right: o.right,
                                                            bottom: x - p * i / 2,
                                                            top: x + p * i / 2
                                                        })) : l > s ? (p = o.height / i,
                                                            d = p * a,
                                                            {
                                                                left: u.x - d * r / 2,
                                                                right: u.x + d * r / 2,
                                                                bottom: o.bottom,
                                                                top: o.top
                                                            }) : (d = o.width / r,
                                                                p = d / a,
                                                                {
                                                                    left: o.left,
                                                                    right: o.right,
                                                                    bottom: u.y - p * i / 2,
                                                                    top: u.y + p * i / 2
                                                                });
                case "preserveX":
                    return _ ? (f = c.right - c.left,
                        m = c.top - c.bottom,
                        g = {
                            x: c.left + f / 2,
                            y: c.bottom + m / 2
                        },
                        h = f / m,
                        d = f / r,
                        p = d / a,
                        {
                            left: c.left,
                            right: c.right,
                            bottom: g.y - p * i / 2,
                            top: g.y + p * i / 2
                        }) : E ? (b = c.top - c.bottom,
                            x = c.bottom + b / 2,
                            h = o.width / b,
                            d = o.width / r,
                            p = d / a,
                            {
                                left: o.left,
                                right: o.right,
                                bottom: x - p * i / 2,
                                top: x + p * i / 2
                            }) : w ? (y = c.right - c.left,
                                d = y / r,
                                p = d / a,
                                {
                                    left: c.left,
                                    right: c.right,
                                    bottom: u.y - p * i / 2,
                                    top: u.y + p * i / 2
                                }) : (y = o.right - o.left,
                                    d = y / r,
                                    p = d / a,
                                    {
                                        left: o.left,
                                        right: o.right,
                                        bottom: u.y - p * i / 2,
                                        top: u.y + p * i / 2
                                    });
                case "preserveY":
                    return _ ? (f = c.right - c.left,
                        m = c.top - c.bottom,
                        g = {
                            x: c.left + f / 2,
                            y: c.bottom + m / 2
                        },
                        h = f / m,
                        p = m / i,
                        d = p * a,
                        {
                            left: g.x - d * r / 2,
                            right: g.x + d * r / 2,
                            bottom: c.bottom,
                            top: c.top
                        }) : w ? (y = c.right - c.left,
                            v = c.left + y / 2,
                            h = y / o.height,
                            p = o.height / i,
                            d = p * a,
                            {
                                left: v - d * r / 2,
                                right: v + d * r / 2,
                                bottom: o.bottom,
                                top: o.top
                            }) : E ? (b = c.top - c.bottom,
                                p = b / i,
                                d = p * a,
                                {
                                    left: u.x - d * r / 2,
                                    right: u.x + d * r / 2,
                                    bottom: c.bottom,
                                    top: c.top
                                }) : (b = o.top - o.bottom,
                                    p = b / i,
                                    d = p * a,
                                    {
                                        left: u.x - d * r / 2,
                                        right: u.x + d * r / 2,
                                        bottom: o.bottom,
                                        top: o.top
                                    });
                default:
                    return o
            }
        }
        var n = e("console");
        return t
    }),
    define("expressions/sanitize_expression", ["require"], function (e) {
        function t(e, t) {
            var n = {};
            return e.forEach(function (e) {
                t.hasOwnProperty(e) && (n[e] = t[e])
            }),
                n
        }
        function n(e) {
            return {
                min: e.domain.min,
                max: e.domain.max
            }
        }
        function r(e) {
            return {
                min: e.sliderMin,
                max: e.sliderMax,
                step: e.sliderInterval
            }
        }
        function i(e) {
            var n = t(c, e);
            return n.columns = e.columns.map(o),
                n
        }
        function o(e) {
            var n = t(l, e);
            return e.values && "function" == typeof e.values.slice && (n.values = e.values.slice()),
                n
        }
        function s(e) {
            if ("table" === e.type)
                return i(e);
            var o = t(a, e);
            return e.hasOwnProperty("domain") && (o.domain = n(e)),
                e.hasOwnProperty("sliderMin") && (o.sliderBounds = r(e)),
                o
        }
        var a = ["type", "latex", "color", "style", "hidden", "secret", "id", "dragMode", "label", "showLabel"]
            , c = ["type", "id"]
            , l = ["id", "latex", "color", "hidden", "columnMode", "dragMode"];
        return s
    }),
    define("api/abstract", ["require", "exports", "underscore_model", "ipad.scrollfix", "touchtracking", "lib/console", "lib/dom-change-detector"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function () {
            function e(e) {
                if (this.rootElt = e,
                    this.eventModel = new n,
                    !e)
                    throw new Error("must pass an HTMLElement to the API")
            }
            return e.prototype.setupDomChangeDetector = function (e) {
                var t = this;
                this.autoSize = e,
                    i.monitor(this.rootElt),
                    r.limitScrollOnElement(this.rootElt),
                    this.domChangeDetector = new s.default(this.rootElt, function (e) {
                        switch (e.type) {
                            case "added":
                                t.view = t.onCreateView(),
                                    t.onResizeView(e.size);
                                break;
                            case "removed":
                                t.onDestroyView(),
                                    t.view = void 0;
                                break;
                            case "resized":
                                t.onResizeView(e.size)
                        }
                    }
                    ),
                    this.autoSize !== !1 ? this.domChangeDetector.startWatching() : this.domChangeDetector.checkForChanges()
            }
                ,
                e.prototype.detach = function () {
                    o.warn(".detach() is deprecated. It should no longer be necessary")
                }
                ,
                e.prototype.destroy = function () {
                    function e(e) {
                        o.warn("You've destroyed this API instance. You can no longer call ." + e + "()")
                    }
                    this.view && this.onDestroyView(),
                        this.domChangeDetector.destroy();
                    for (var t in this)
                        "function" == typeof this[t] ? this[t] = e.bind(this, t) : this.hasOwnProperty(t) && delete this[t];
                    this.destroy = function () { }
                }
                ,
                e.prototype.resize = function () {
                    this.domChangeDetector.checkForChanges()
                }
                ,
                e.prototype.updateView = function () {
                    this.view && document.body.contains(this.rootElt) && this.view.update()
                }
                ,
                e.prototype.triggerEvent = function (e) {
                    this.eventModel.triggerEvent(e)
                }
                ,
                e.prototype.observeEvent = function (e, t) {
                    this.eventModel.observeEvent(e, t)
                }
                ,
                e.prototype.unobserveEvent = function (e) {
                    this.eventModel.unobserveEvent(e)
                }
                ,
                e
        }();
        t.default = a
    }),
    define("immutable-store", ["require", "underscore", "lib/deepCopy"], function (e) {
        function t(e) {
            return r.clone(e)
        }
        function n(e) {
            this.setState(e)
        }
        var r = e("underscore")
            , i = e("lib/deepCopy").default;
        return n.prototype.setState = function (e) {
            this.state = e
        }
            ,
            n.prototype.getState = function () {
                return this.state
            }
            ,
            n.prototype.set = function (e, n) {
                if (1 === arguments.length)
                    return void (this.state = e);
                if ("string" == typeof e)
                    return this.state = t(this.state),
                        void (this.state[e] = n);
                var r, i = e.length - 2, o = e[i + 1];
                this.state = r = t(this.state);
                for (var s = 0; s <= i; s++) {
                    var a = e[s];
                    r = r[a] = t(r[a])
                }
                r[o] = n
            }
            ,
            n.prototype.deepMutate = function (e, n) {
                if (1 === arguments.length)
                    return n = e,
                        this.state = i(this.state),
                        void n(this.state);
                if ("string" == typeof e)
                    return this.state = t(this.state),
                        this.state[e] = i(this.state[e]),
                        void n(this.state[e]);
                for (var r = e.length - 2, o = e[r + 1], s = this.state = t(this.state), a = 0; a <= r; a++) {
                    var c = e[a];
                    s = s[c] = t(s[c])
                }
                s = s[o] = i(s[o]),
                    n(s)
            }
            ,
            n.prototype.shallowMutate = function (e, n) {
                if (1 === arguments.length)
                    return n = e,
                        this.state = t(this.state),
                        void n(this.state);
                if ("string" == typeof e)
                    return this.state = t(this.state),
                        this.state[e] = t(this.state[e]),
                        void n(this.state[e]);
                for (var r = e.length - 1, i = this.state = t(this.state), o = 0; o <= r; o++) {
                    var s = e[o];
                    i = i[s] = t(i[s])
                }
                n(i)
            }
            ,
            n.areShallowEqual = function (e, t) { }
            ,
            n.areDeepEqual = function (e, t) { }
            ,
            {
                default: n
            }
    }),
    define("basic/model", ["require", "exports", "main/evaluator", "tslib", "immutable-store", "main/shared-clock-bus", "graphing/label"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function () {
            function e(e) {
                var t = e.evaluationMode
                    , n = e.additionalFunctions
                    , r = e.functionDefinition
                    , s = e.workerPool
                    , a = this;
                this._evaluations = {},
                    this._nextObjectId = 0,
                    this.store = new i.default({
                        expressions: {
                            1: {
                                id: "1",
                                latex: "",
                                braille: "",
                                type: "latex"
                            }
                        },
                        order: ["1"],
                        settings: {
                            degreeMode: !1
                        },
                        ui: {
                            focus: void 0
                        }
                    }),
                    this.evaluationMode = t,
                    this.additionalFunctions = n,
                    this.functionDefinition = r,
                    this.workerPool = s,
                    this._setupEvaluator(),
                    this.clear(),
                    this._sharedClockBusToken = o.subscribe(function (e) {
                        a._evaluator.tick(e)
                    })
            }
            return e.prototype.isSingleExpression = function () {
                return "singleExpressionScientific" === this.evaluationMode
            }
                ,
                e.prototype.destroy = function () {
                    o.unsubscribe(this._sharedClockBusToken)
                }
                ,
                e.prototype.generateObjectId = function () {
                    return (this._nextObjectId++).toString()
                }
                ,
                e.prototype.updateNextObjectId = function () {
                    var e = this.store.getState().order;
                    this._nextObjectId = 0;
                    for (var t = /^[0-9]+$/, n = 0, r = e; n < r.length; n++) {
                        var i = r[n];
                        if (t.test(i)) {
                            var o = parseInt(i, 10);
                            o >= this._nextObjectId && (this._nextObjectId = o + 1)
                        }
                    }
                }
                ,
                e.prototype.clearShouldDebounceUndoRedo = function () {
                    this._shouldDebounceUndoRedo = !1
                }
                ,
                e.prototype.markShouldDebounceUndoRedo = function () {
                    this._shouldDebounceUndoRedo = !0
                }
                ,
                e.prototype.getShouldDebounceUndoRedo = function () {
                    return this._shouldDebounceUndoRedo
                }
                ,
                e.prototype.clearCachedBrailleValues = function () {
                    for (var e = 0, t = this.getExpressionOrder(); e < t.length; e++) {
                        var n = t[e];
                        this.store.set(["expressions", n, "braille"], "")
                    }
                }
                ,
                e.prototype.getState = function () {
                    return this.store.getState()
                }
                ,
                e.prototype.getPersistedState = function () {
                    var e = this.getState()
                        , t = e.expressions
                        , n = e.order
                        , r = e.settings;
                    return {
                        expressions: {
                            list: n.map(function (e) {
                                var n = t[e];
                                return {
                                    id: n.id,
                                    latex: n.latex
                                }
                            })
                        },
                        settings: r
                    }
                }
                ,
                e.prototype.setState = function (e) {
                    this.store.set(e),
                        this._updateIndexes(),
                        this.updateNextObjectId()
                }
                ,
                e.prototype.setStateFromAPI = function (e) {
                    var t = []
                        , n = {};
                    e.expressions.list.forEach(function (e) {
                        t.push(e.id),
                            n[e.id] = {
                                id: e.id,
                                latex: e.latex,
                                braille: "",
                                type: "latex"
                            }
                    }),
                        this.setState({
                            expressions: n,
                            order: t,
                            settings: e.settings,
                            ui: {
                                focus: void 0
                            }
                        })
                }
                ,
                e.prototype.canClear = function () {
                    if (this.getNumberOfExpressions() > 1)
                        return !0;
                    var e = this.getExpressionOrder()[0];
                    return "" !== this.getExpressionLatex(e)
                }
                ,
                e.prototype.clear = function () {
                    this.setState({
                        expressions: {
                            1: {
                                id: "1",
                                type: "latex",
                                latex: "",
                                braille: ""
                            }
                        },
                        ui: {
                            focus: void 0
                        },
                        order: ["1"],
                        settings: this.getState().settings
                    })
                }
                ,
                e.prototype.getExpressionOrder = function () {
                    return this.store.getState().order
                }
                ,
                e.prototype.getNumberOfExpressions = function () {
                    return this.getExpressionOrder().length
                }
                ,
                e.prototype.getExpressionById = function (e) {
                    return this.getState().expressions[e]
                }
                ,
                e.prototype.getExpressionIndex = function (e) {
                    return this._indexes[e]
                }
                ,
                e.prototype._getExpressionByIndex = function (e) {
                    var t = this.getExpressionOrder()[e];
                    return this.getExpressionById(t)
                }
                ,
                e.prototype._updateIndexes = function () {
                    this._indexes = {};
                    for (var e = 0, t = 0, n = this.getExpressionOrder(); t < n.length; t++) {
                        var r = n[t];
                        this._indexes[r] = e,
                            e += 1
                    }
                    this._evaluate()
                }
                ,
                e.prototype._usesAnsById = function (e) {
                    return this.getExpressionById(e).latex.indexOf("\\operatorname{ans}") !== -1
                }
                ,
                e.prototype._getPreviousExpById = function (e) {
                    var t = this.getExpressionIndex(e);
                    return this._getExpressionByIndex(t - 1)
                }
                ,
                e.prototype.createBlankAfterId = function (e) {
                    if (this.getExpressionById(e).latex) {
                        var t = this.getExpressionIndex(e)
                            , n = this.generateObjectId();
                        this.store.shallowMutate("order", function (e) {
                            e.splice(t + 1, 0, n)
                        }),
                            this.store.shallowMutate("expressions", function (e) {
                                e[n] = {
                                    id: n,
                                    latex: "",
                                    braille: "",
                                    type: "latex"
                                }
                            }),
                            this._updateIndexes(),
                            this.setFocusedById(n, !0)
                    }
                }
                ,
                e.prototype.conditionallyCopyPrevious = function (e) {
                    var t = this._getPreviousExpById(e)
                        , n = this.getExpressionById(e);
                    null != t && "" === n.latex && this._usesAnsById(t.id) && this.setLatexById(e, t.latex)
                }
                ,
                e.prototype.backspaceAtFrontOfId = function (e) {
                    var t = this.getExpressionById(e);
                    if ("" === t.latex && 1 !== this.getNumberOfExpressions()) {
                        var n = this.getExpressionIndex(e);
                        this.store.shallowMutate("order", function (e) {
                            e.splice(n, 1)
                        }),
                            this.store.shallowMutate("expressions", function (t) {
                                delete t[e]
                            }),
                            this._updateIndexes(),
                            this._setFocusedByIndex(Math.max(n - 1, 0), !0)
                    }
                }
                ,
                e.prototype.setLatexById = function (e, t) {
                    this.store.set(["expressions", e, "latex"], t),
                        this.store.set(["expressions", e, "braille"], ""),
                        this._evaluate()
                }
                ,
                e.prototype.setLatexAndBrailleById = function (e, t, n) {
                    this.store.set(["expressions", e, "latex"], t),
                        this.store.set(["expressions", e, "braille"], n),
                        this._evaluate()
                }
                ,
                e.prototype.setLatexOfFocusedExpression = function (e) {
                    var t = this.getFocusedExpressionId();
                    t && this.setLatexById(t, e)
                }
                ,
                e.prototype.isExpressionFocused = function (e) {
                    return this.getFocusedExpressionId() === e
                }
                ,
                e.prototype.getExpressionLatex = function (e) {
                    return this.getExpressionById(e).latex
                }
                ,
                e.prototype.getExpressionError = function (e) {
                    var t = this._evaluations[e];
                    return t ? t.error : ""
                }
                ,
                e.prototype.getExpressionValue = function (e) {
                    var t = this._evaluations[e];
                    if (t)
                        return t.value
                }
                ,
                e.prototype.getExpressionAns = function (e) {
                    var t = this._evaluations[e];
                    if (t)
                        return t.ans
                }
                ,
                e.prototype.shouldShowEvaluationForExpression = function (e) {
                    var t = this._evaluations[e];
                    return !!t && t.showEvaluation
                }
                ,
                e.prototype._setFocusedByIndex = function (e, t) {
                    var n, i = this._getExpressionByIndex(e), o = r.__assign({}, this.store.getState()), s = !1;
                    t ? (n = {
                        type: "latex-expression",
                        id: i.id
                    },
                        s = !0) : this.getFocusedExpressionId() === i.id ? (n = void 0,
                            s = !0) : o.expressions[i.id] = r.__assign({}, i, {
                                braille: ""
                            }),
                        s && (o.ui = {
                            focus: n
                        }),
                        this.store.set(o)
                }
                ,
                e.prototype.setFocusedById = function (e, t) {
                    var n = this.getExpressionIndex(e);
                    this._setFocusedByIndex(n, t)
                }
                ,
                e.prototype.focusPrevById = function (e) {
                    var t = this.getExpressionIndex(e) - 1;
                    t >= 0 && this._setFocusedByIndex(t, !0)
                }
                ,
                e.prototype.focusNextById = function (e) {
                    var t = this.getExpressionIndex(e) + 1;
                    t < this.getNumberOfExpressions() ? this._setFocusedByIndex(t, !0) : this.createAtEnd()
                }
                ,
                e.prototype.getFocusedExpression = function () {
                    var e = this.getFocusedExpressionId();
                    return e ? this.getExpressionById(e) : void 0
                }
                ,
                e.prototype.getFocusedExpressionId = function () {
                    var e = this.getState().ui.focus;
                    return e && e.id
                }
                ,
                e.prototype.clearFocusedExpression = function () {
                    var e = this.getFocusedExpression();
                    e && this.setLatexById(e.id, "")
                }
                ,
                e.prototype.shouldShowClear = function () {
                    if (1 === this.getNumberOfExpressions())
                        return !1;
                    var e = this.getFocusedExpression();
                    return !!e && !!e.latex
                }
                ,
                e.prototype.getLastExpression = function () {
                    return this._getExpressionByIndex(this.getNumberOfExpressions() - 1)
                }
                ,
                e.prototype.isLastExpressionEmpty = function () {
                    return !!this.getLastExpression().latex
                }
                ,
                e.prototype.createAtEnd = function () {
                    this.createBlankAfterId(this.getLastExpression().id)
                }
                ,
                e.prototype.focusLastExpression = function () {
                    this._setFocusedByIndex(this.getNumberOfExpressions() - 1, !0)
                }
                ,
                e.prototype.focusFirstExpression = function () {
                    this._setFocusedByIndex(0, !0)
                }
                ,
                e.prototype.getDegreeMode = function () {
                    return this.getState().settings.degreeMode
                }
                ,
                e.prototype.setDegreeMode = function (e) {
                    this.store.set(["settings", "degreeMode"], !!e),
                        this._evaluate()
                }
                ,
                e.prototype._cleanupLatex = function (e) {
                    return e = s.trimLatex(e),
                        "=" === e.substr(e.length - 1) && (e = e.substr(0, e.length - 1)),
                        e
                }
                ,
                e.prototype._evaluate = function () {
                    var e = this;
                    this._evaluator.clearStatementsAndStartCompleteState(),
                        this.getExpressionOrder().forEach(function (t) {
                            return e._evaluator.addStatement({
                                id: t,
                                index: e.getExpressionIndex(t),
                                latex: e._cleanupLatex(e.getExpressionLatex(t)),
                                shouldGraph: !1,
                                type: "statement"
                            })
                        }),
                        this._evaluator.setDegreeMode(this.getDegreeMode())
                }
                ,
                e.prototype._setupEvaluator = function () {
                    var e = this;
                    this._evaluator = n(this.workerPool),
                        this._evaluator.setEvaluationMode(this.evaluationMode),
                        this._evaluator.setAdditionalFunctions(this.additionalFunctions),
                        this._evaluator.setFunctionDefinition(this.functionDefinition),
                        this._evaluator.triggerStatusChange = function (t) {
                            e._evaluations = {};
                            for (var n in t) {
                                var r = t[n]
                                    , i = e.getExpressionById(n);
                                i && (e._evaluations[n] = {
                                    value: r.constant_value,
                                    showEvaluation: !!r.is_evaluable,
                                    error: r.error,
                                    ans: void 0
                                })
                            }
                            for (var o = void 0, s = 0, a = e.getExpressionOrder(); s < a.length; s++) {
                                var n = a[s]
                                    , c = e._evaluations[n];
                                o && c && (c.ans = o.value),
                                    o = c
                            }
                            "function" == typeof e.onEvaluationUpdate && e.onEvaluationUpdate()
                        }
                }
                ,
                e
        }();
        t.default = a
    }),
    define("keypad/mq-commands", ["require", "exports"], function (e, t) {
        "use strict";
        function n(e, t) {
            r[t](e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            loga: function (e) {
                e.write("\\log_{}"),
                    e.typedText("("),
                    e.keystroke("Left"),
                    e.keystroke("Down")
            },
            nthroot: function (e) {
                e.write("\\sqrt[]{}"),
                    e.keystroke("Left"),
                    e.keystroke("Left")
            },
            ddx: function (e) {
                e.write("\\frac{d}{dx}")
            },
            arcsin: function (e) {
                e.write("sin^{-1}"),
                    e.typedText("(")
            },
            arccos: function (e) {
                e.write("cos^{-1}"),
                    e.typedText("(")
            },
            arctan: function (e) {
                e.write("tan^{-1}"),
                    e.typedText("(")
            },
            "A^T": function (e) {
                e.typedText("^T"),
                    e.keystroke("Right")
            },
            "A^-1": function (e) {
                e.typedText("^-1"),
                    e.keystroke("Right")
            },
            "A^2": function (e) {
                e.typedText("^2"),
                    e.keystroke("Right")
            },
            "a^2": function (e) {
                e.typedText("^2"),
                    e.keystroke("Right")
            },
            "a^3": function (e) {
                e.typedText("^3"),
                    e.keystroke("Right")
            }
        };
        t.execute = n
    }),
    define("basic/controller", ["require", "exports", "underscore_model", "tslib", "flux", "jquery", "underscore", "./model", "lib/state-stack", "keypad/mq-commands", "i18n", "dcgview-helpers/mathquill-view", "lib/console", "bugsnag"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var f = function () {
            function e(e) {
                var t = this;
                this.keyboardMode = "main",
                    this.fontSize = 16,
                    this.listFontSize = 16,
                    this.invertedColors = !1,
                    this.projectorMode = !1,
                    this.settingsMenu = !0,
                    this.settingsMenuOpen = !1,
                    this.language = "en",
                    this.brailleMode = "none",
                    this.sixKeyInput = !1,
                    this.stateStack = new c.default,
                    this.dispatcher = new i.Dispatcher,
                    this.t = function (e, n) {
                        return u.t(e, n, t.language)
                    }
                    ,
                    this.dispatch = function (e) {
                        h.leaveBreadcrumb("dispatch", {
                            type: e.type
                        }),
                            t.dispatcher.dispatch(e);
                        for (var n; n = t._queuedCallbacks.shift();)
                            n()
                    }
                    ,
                    this._queuedCallbacks = [],
                    this.stateStack = new c.default,
                    this.dispatcher = new i.Dispatcher,
                    this.options = e,
                    this.model = new a.default({
                        evaluationMode: this.options.evaluationMode,
                        additionalFunctions: this.options.additionalFunctions,
                        functionDefinition: this.options.functionDefinition,
                        workerPool: this.options.workerPool
                    }),
                    this.model = this.model,
                    this.model.setDegreeMode(e.degreeMode),
                    this.setBrailleMode(e.brailleMode),
                    this.setSixKeyInput(e.sixKeyInput),
                    this.setProjectorMode(e.projectorMode),
                    this.invertedColors = e.invertedColors,
                    this.settingsMenu = e.settingsMenu,
                    this.model.onEvaluationUpdate = function () {
                        return t.dispatch({
                            type: "render"
                        })
                    }
                    ,
                    this.settings = n(),
                    this.settings.setProperty("language", this.language),
                    this.settings.setProperty("fontSize", this.fontSize),
                    this.settings.setProperty("degreeMode", !!e.degreeMode),
                    this.settings.setProperty("invertedColors", !!e.invertedColors),
                    this.settings.setProperty("brailleMode", e.brailleMode),
                    this.settings.setProperty("sixKeyInput", e.sixKeyInput),
                    this.settings.setProperty("projectorMode", !!e.projectorMode),
                    this.hookUpDispatcher(),
                    this.dispatch({
                        type: "render"
                    })
            }
            return e.prototype.runAfterDispatch = function (e) {
                this._queuedCallbacks.push(e)
            }
                ,
                e.prototype.enqueueEvent = function (e) {
                    var t = this;
                    this.runAfterDispatch(function () {
                        t.onEventEmitted && t.onEventEmitted(e)
                    })
                }
                ,
                e.prototype.getFunctionDefinition = function () {
                    return this.options.functionDefinition
                }
                ,
                e.prototype.getSettingsMenu = function () {
                    return this.settingsMenu
                }
                ,
                e.prototype.getLightKeypad = function () {
                    return this.options.lightKeypad
                }
                ,
                e.prototype.getBrailleMode = function () {
                    return this.brailleMode
                }
                ,
                e.prototype.renderAsBraille = function () {
                    return "none" !== this.brailleMode
                }
                ,
                e.prototype.setBrailleMode = function (e) {
                    this.brailleMode = e
                }
                ,
                e.prototype.getSixKeyInput = function () {
                    return this.sixKeyInput
                }
                ,
                e.prototype.setSixKeyInput = function (e) {
                    this.sixKeyInput = e
                }
                ,
                e.prototype.getRestrictedEditing = function () {
                    return this.options.restrictedEditing
                }
                ,
                e.prototype.getKeyboardMode = function () {
                    return this.keyboardMode
                }
                ,
                e.prototype.getFontSize = function () {
                    return this.fontSize
                }
                ,
                e.prototype.getListFontSize = function () {
                    return this.listFontSize
                }
                ,
                e.prototype.getInvertedColors = function () {
                    return this.invertedColors
                }
                ,
                e.prototype.getAdditionalFunctions = function () {
                    return this.options.additionalFunctions
                }
                ,
                e.prototype.getTypingSlashWritesDivisionSymbol = function () {
                    return this.options.typingSlashWritesDivisionSymbol
                }
                ,
                e.prototype.getTypingAsteriskWritesTimesSymbol = function () {
                    return this.options.typingAsteriskWritesTimesSymbol
                }
                ,
                e.prototype.setProjectorMode = function (e) {
                    this.projectorMode = e,
                        this.listFontSize = this.projectorMode ? 1.5 * this.fontSize : this.fontSize
                }
                ,
                e.prototype.isProjectorMode = function () {
                    return this.projectorMode
                }
                ,
                e.prototype.isScientificCalc = function () {
                    var e = this.options.evaluationMode;
                    return "scientific" === e || "singleExpressionScientific" === e
                }
                ,
                e.prototype.isFourFunctionCalc = function () {
                    return "fourFunction" === this.options.evaluationMode
                }
                ,
                e.prototype.canUndo = function () {
                    return this.stateStack.canUndo()
                }
                ,
                e.prototype.canRedo = function () {
                    return this.stateStack.canRedo()
                }
                ,
                e.prototype.undo = function (e) {
                    if (this.canUndo()) {
                        this.stateStack.undo();
                        var t = this.stateStack.getState();
                        if (!e.restoreFocus) {
                            var n = {
                                focus: void 0
                            };
                            t = r.__assign({}, t, {
                                ui: n
                            })
                        }
                        this.model.setState(t),
                            this.enqueueEvent("change")
                    }
                }
                ,
                e.prototype.redo = function (e) {
                    if (this.canRedo()) {
                        this.stateStack.redo();
                        var t = this.stateStack.getState();
                        if (!e.restoreFocus) {
                            var n = {
                                focus: void 0
                            };
                            t = r.__assign({}, t, {
                                ui: n
                            })
                        }
                        this.model.setState(t),
                            this.enqueueEvent("change")
                    }
                }
                ,
                e.prototype.clearHistory = function () {
                    this.stateStack.clear()
                }
                ,
                e.prototype.canBackspace = function () {
                    var e = this.model.getFocusedExpression();
                    return e && (e.latex.length > 0 || this.model.getNumberOfExpressions() > 1)
                }
                ,
                e.prototype.focusLastExpression = function () {
                    this.model.focusLastExpression()
                }
                ,
                e.prototype.canClear = function () {
                    return this.model.canClear()
                }
                ,
                e.prototype.shouldShowClear = function () {
                    return this.model.shouldShowClear()
                }
                ,
                e.prototype.closeSettingsMenu = function () {
                    this.settingsMenuOpen = !1
                }
                ,
                e.prototype.toggleSettingsMenu = function () {
                    this.settingsMenuOpen = !this.settingsMenuOpen
                }
                ,
                e.prototype.isSettingsMenuOpen = function () {
                    return this.settingsMenuOpen
                }
                ,
                e.prototype.isLastExpressionEmpty = function () {
                    return this.model.isLastExpressionEmpty()
                }
                ,
                e.prototype.createAtEnd = function () {
                    this.model.createAtEnd()
                }
                ,
                e.prototype.clearFocusedExpression = function () {
                    this.model.clearFocusedExpression()
                }
                ,
                e.prototype.setLatexById = function (e, t) {
                    this.model.setLatexById(e, t)
                }
                ,
                e.prototype.setLatexAndBrailleById = function (e, t, n) {
                    this.model.setLatexAndBrailleById(e, t, n)
                }
                ,
                e.prototype.setLatexOfFocusedExpression = function (e) {
                    this.model.setLatexOfFocusedExpression(e)
                }
                ,
                e.prototype.conditionallyCopyPrevious = function (e) {
                    this.model.conditionallyCopyPrevious(e)
                }
                ,
                e.prototype.createBlankAfterId = function (e) {
                    this.model.createBlankAfterId(e)
                }
                ,
                e.prototype.backspaceAtFrontOfId = function (e) {
                    this.model.backspaceAtFrontOfId(e)
                }
                ,
                e.prototype.areStatesDifferentEnoughForUndoRedo = function (e, t) {
                    var n = {
                        focus: void 0
                    };
                    return s.isEqual(r.__assign({}, e, {
                        ui: n
                    }), r.__assign({}, t, {
                        ui: n
                    }))
                }
                ,
                e.prototype.commitUndoRedoDebounced = function () {
                    var e = this.model.getState()
                        , t = this.stateStack.getState();
                    if (!this.areStatesDifferentEnoughForUndoRedo(e, t)) {
                        var n = (new Date).getTime();
                        n - this._lastDebouncedTime < 1e3 ? this.stateStack.replaceState(e) : this.stateStack.addState(e),
                            this._lastDebouncedTime = n,
                            this.enqueueEvent("change")
                    }
                }
                ,
                e.prototype.commitUndoRedoSynchronously = function () {
                    var e = this.model.getState()
                        , t = this.stateStack.getState();
                    this.areStatesDifferentEnoughForUndoRedo(e, t) || (this._lastDebouncedTime = 0,
                        this.stateStack.addState(e),
                        this.enqueueEvent("change"))
                }
                ,
                e.prototype.updateKeyboardMode = function (e) {
                    this.keyboardMode = e
                }
                ,
                e.prototype.getFocusedMathquill = function () {
                    if (this.model.getFocusedExpressionId())
                        return d.default.getFocusedMathquill()
                }
                ,
                e.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill = function () {
                    var e = this.getFocusedMathquill();
                    return e ? e : (this.isLastExpressionEmpty() ? this.createAtEnd() : this.focusLastExpression(),
                        this.onEventEmitted && this.onEventEmitted("render"),
                        this.getFocusedMathquill())
                }
                ,
                e.prototype.typeIntoFocusedMathquill = function (e) {
                    var t = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                    t && (t.typedText(e),
                        this.setLatexOfFocusedExpression(t.latex()),
                        this.model.markShouldDebounceUndoRedo())
                }
                ,
                e.prototype.pressKeyInFocusedMathquill = function (e, t) {
                    var n = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                    if (n)
                        if ("Up" === e || "Down" === e || "Left" === e || "Right" === e) {
                            var r = o(n.el())
                                , i = r.find(".dcg-mq-selection")
                                , s = 1 === i.length && i.parent().parent()[0] === r[0] && 1 === i.parent().children().length;
                            if (("Up" === e || "Down" === e) && s)
                                return n.keystroke(e, t),
                                    void this.moveFocusInDirection(e);
                            var a = r.find(".dcg-mq-cursor")[0];
                            if (!a)
                                return void n.keystroke(e, t);
                            var c = a.previousSibling || a.parentElement;
                            n.keystroke(e, t);
                            var l = a.previousSibling || a.parentElement;
                            c === l && this.moveFocusInDirection(e)
                        } else
                            "Enter" === e ? this.handleEnter() : "Backspace" === e ? this.attemptToMoveFocusWithBackspace() || (n.keystroke(e, t),
                                this.setLatexOfFocusedExpression(n.latex())) : "Delete" === e ? (n.keystroke(e, t),
                                    this.setLatexOfFocusedExpression(n.latex())) : (n.keystroke(e, t),
                                        this.setLatexOfFocusedExpression(n.latex()))
                }
                ,
                e.prototype.moveFocusInDirection = function (e) {
                    var t = this.model.getFocusedExpressionId();
                    t && ("Up" === e ? this.model.focusPrevById(t) : "Down" === e && this.model.focusNextById(t))
                }
                ,
                e.prototype.handleEnter = function () {
                    if (!this.model.isSingleExpression()) {
                        var e = this.model.getFocusedExpressionId();
                        e && (this.conditionallyCopyPrevious(e),
                            this.createBlankAfterId(e))
                    }
                }
                ,
                e.prototype.attemptToMoveFocusWithBackspace = function () {
                    var e = this.model.getFocusedExpression();
                    if (!e)
                        return !1;
                    var t = e.latex
                        , n = e.id;
                    return "" === t && (this.backspaceAtFrontOfId(n),
                        !0)
                }
                ,
                e.prototype.executeCommandInFocusedMathquill = function (e) {
                    var t = this.ensureMathquillIsFocusedAndReturnFocusedMathquill();
                    t && (l.execute(t, e),
                        this.setLatexOfFocusedExpression(t.latex()))
                }
                ,
                e.prototype.syncPublicSettings = function () {
                    this.settings.setProperty("language", this.language),
                        this.settings.setProperty("fontSize", this.fontSize),
                        this.settings.setProperty("degreeMode", this.model.getDegreeMode()),
                        this.settings.setProperty("invertedColors", this.invertedColors),
                        this.settings.setProperty("brailleMode", this.brailleMode),
                        this.settings.setProperty("sixKeyInput", this.sixKeyInput),
                        this.settings.setProperty("projectorMode", this.projectorMode)
                }
                ,
                e.prototype.hookUpDispatcher = function () {
                    var e = this;
                    this.dispatcher.register(function (t) {
                        e.enqueueEvent("render");
                        var n = !1
                            , r = e.getRestrictedEditing();
                        switch (t.type) {
                            case "keypad/shift":
                                e.updateKeyboardMode("capitalQwerty" === e.keyboardMode ? "qwerty" : "capitalQwerty");
                                break;
                            case "undo":
                                r || (e.undo({
                                    restoreFocus: "keyboard-shortcut" === t.source
                                }),
                                    n = !0);
                                break;
                            case "redo":
                                r || (e.redo({
                                    restoreFocus: "keyboard-shortcut" === t.source
                                }),
                                    n = !0);
                                break;
                            case "clear-history":
                                e.clearHistory();
                                break;
                            case "set-state-from-api":
                                t.opts.allowUndo || e.clearHistory(),
                                    e.model.setStateFromAPI(t.state);
                                break;
                            case "main":
                                e.updateKeyboardMode("main");
                                break;
                            case "ABC":
                                e.options.qwertyKeyboard ? e.updateKeyboardMode("qwerty") : e.updateKeyboardMode("letters");
                                break;
                            case "functions":
                                e.updateKeyboardMode("functions");
                                break;
                            case "degrees":
                                e.model.setDegreeMode(!e.model.getDegreeMode());
                                break;
                            case "update-degree-mode":
                                e.model.setDegreeMode(!!t.mode);
                                break;
                            case "update-font-size":
                                var i = t.size;
                                if ("number" != typeof i && (i = parseInt(i, 10)),
                                    isNaN(i))
                                    return;
                                e.fontSize = i;
                                break;
                            case "update-inverted-colors":
                                e.invertedColors = !!t.mode;
                                break;
                            case "update-projector-mode":
                                e.setProjectorMode(!!t.mode);
                                break;
                            case "update-language":
                                var o = t.language;
                                "en" !== o && Desmos.supportedLanguages.indexOf(o) === -1 ? p.warn("Translation for '" + o + "' isn't currently available. Using '" + e.language + "' instead.") : e.language = o;
                                break;
                            case "set-blank":
                                t.opts.allowUndo || e.clearHistory(),
                                    e.model.clear(),
                                    e.focusLastExpression();
                                break;
                            case "clear":
                                e.model.clearFocusedExpression();
                                break;
                            case "set-braille-mode":
                                var s = t.mode;
                                "nemeth" !== s && "ueb" !== s && "none" !== s ? p.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '" + s + "'.") : (e.model.clearCachedBrailleValues(),
                                    e.setBrailleMode(t.mode));
                                break;
                            case "set-six-key-input":
                                e.setSixKeyInput(!!t.mode);
                                break;
                            case "update-latex":
                                e.model.markShouldDebounceUndoRedo(),
                                    e.setLatexById(t.id, t.latex);
                                break;
                            case "update-latex-from-braille":
                                e.model.markShouldDebounceUndoRedo(),
                                    e.setLatexAndBrailleById(t.id, t.latex, t.braille);
                                break;
                            case "focusin":
                                e.model.setFocusedById(t.id, !0);
                                break;
                            case "focusout":
                                e.model.setFocusedById(t.id, !1);
                                break;
                            case "focus-first-expression":
                                e.model.focusFirstExpression();
                                break;
                            case "focus-prev-expression":
                                e.moveFocusInDirection("Up");
                                break;
                            case "focus-next-expression":
                                e.moveFocusInDirection("Down");
                                break;
                            case "insert-blank-expression":
                                e.handleEnter();
                                break;
                            case "backspace-from-braille":
                                e.attemptToMoveFocusWithBackspace();
                                break;
                            case "keypad/type-text":
                                e.typeIntoFocusedMathquill(t.text);
                                break;
                            case "keypad/press-key":
                                e.pressKeyInFocusedMathquill(t.key, t.evt);
                                break;
                            case "keypad/custom-command":
                                e.executeCommandInFocusedMathquill(t.command);
                                break;
                            case "toggle-settings-menu":
                                e.toggleSettingsMenu();
                                break;
                            case "close-settings-menu":
                                e.closeSettingsMenu();
                                break;
                            case "render":
                                break;
                            default:
                                var a = t;
                                return a
                        }
                        e.runAfterDispatch(function () {
                            return e.syncPublicSettings()
                        }),
                            n || (e.model.getShouldDebounceUndoRedo() ? (e.commitUndoRedoDebounced(),
                                e.model.clearShouldDebounceUndoRedo()) : e.commitUndoRedoSynchronously())
                    })
                }
                ,
                e
        }();
        t.default = f
    }),
    define("basic/dcgview-basic", ["require", "exports", "tslib", "dcgview"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    this.controller = this.props.controller(),
                        this.model = this.controller.model,
                        this.dispatch = this.controller.dispatch,
                        this.t = this.controller.t
                }
                ,
                t
        }(r.Class);
        t.DCGViewBasic = i
    }),
    define("keypad/dcgview-keypad", ["require", "exports", "tslib", "dcgview"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function () {
                    this.controller = this.props.controller()
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!keypad/control-bar", function () { }),
    define("keypad/control-bar", ["require", "exports", "tslib", "dcgview", "./dcgview-keypad", "loadcss!./control-bar"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: function () {
                            return {
                                "dcg-keypad-control-bar": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-theme-light-keypad": e.controller.getLightKeypad && e.controller.getLightKeypad()
                            }
                        },
                        role: r.const("group"),
                        "aria-label": function () {
                            return e.controller.t("Control Bar")
                        }
                    }, this.children)
                }
                ,
                t
        }(i.default);
        t.default = o
    }),
    define("loadcss!keypad/control-btn", function () { }),
    define("keypad/control-btn", ["require", "exports", "tslib", "dcgview", "loadcss!./control-btn"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: function () {
                            return {
                                "dcg-keypad-control-btn": !0,
                                "dcg-disabled": e.isDisabled(),
                                "dcg-selected": !e.isDisabled() && e.isSelected(),
                                "dcg-selectable-btn": !e.isDisabled() && e.isSelectable(),
                                "dcg-narrow-control-btn": e.props.narrowButton && e.props.narrowButton()
                            }
                        },
                        didMount: this.bindFn(this.didMount),
                        role: r.const("button"),
                        "aria-disabled": function () {
                            return e.isDisabled() || void 0
                        },
                        "aria-label": function () {
                            return e.getAriaLabel()
                        },
                        "aria-haspopup": function () {
                            return e.hasPopup() || void 0
                        },
                        "dcg-command": this.props.command,
                        onTap: this.bindFn(this.handleTap),
                        "aria-pressed": function () {
                            return e.hasPopup() ? void 0 : e.isDisabled() && e.isSelected()
                        },
                        "aria-expanded": function () {
                            return e.hasPopup() ? !e.isDisabled() && e.isSelected() : void 0
                        },
                        tabindex: this.bindFn(this.getTabIndex)
                    }, this.children)
                }
                ,
                t.prototype.getTabIndex = function () {
                    return this.isDisabled() ? void 0 : this.props.ignoreInTabOrder && this.props.ignoreInTabOrder() ? -1 : 0
                }
                ,
                t.prototype.handleTap = function (e) {
                    this.isDisabled() || this.props.onTap(e)
                }
                ,
                t.prototype.getAriaLabel = function () {
                    return this.props.ariaLabel ? this.props.ariaLabel() : this.props.command()
                }
                ,
                t.prototype.hasPopup = function () {
                    return this.props.ariaPopup ? this.props.ariaPopup() : this.props.command()
                }
                ,
                t.prototype.isDisabled = function () {
                    return !!this.props.disabled && this.props.disabled()
                }
                ,
                t.prototype.isSelected = function () {
                    return !!this.props.selected && this.props.selected()
                }
                ,
                t.prototype.isSelectable = function () {
                    return !!this.props.selectable && this.props.selectable()
                }
                ,
                t.prototype.didMount = function (e) {
                    this.props.didMount && this.props.didMount(e)
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!basic/settings-menu", function () { }),
    define("basic/settings-menu", ["require", "exports", "keys", "tslib", "dcgview", "./dcgview-basic", "jquery", "loadcss!./settings-menu"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = i.Components.If
            , c = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return i.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-settings-dropdown": !0,
                                    "dcg-popover": !0
                                }
                            },
                            role: i.const("complementary"),
                            "aria-label": i.const("Settings Menu"),
                            didMount: this.bindFn(this.didMountSettingsDropdown),
                            didUnmount: this.bindFn(this.didUnmountSettingsDropdown)
                        }, i.createElement("div", {
                            class: i.const("dcg-popover-interior")
                        }, i.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-settings-menu-option": !0,
                                    "dcg-modern-btn": !0,
                                    "dcg-action-projectormode": !0,
                                    "dcg-active": e.controller.isProjectorMode()
                                }
                            },
                            role: i.const("button"),
                            onTap: this.bindFn(this.onToggleProjectorMode),
                            tabindex: i.const(0),
                            "aria-label": function () {
                                return e.controller.t("Projector Mode")
                            },
                            "aria-pressed": function () {
                                return e.controller.isProjectorMode()
                            }
                        }, function () {
                            return e.controller.t("Projector Mode")
                        }), i.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-settings-menu-option": !0,
                                    "dcg-braille-container": !0
                                }
                            }
                        }, i.createElement("div", {
                            class: i.const("dcg-group-title")
                        }, i.const("Braille Mode")), i.createElement("div", {
                            role: i.const("group"),
                            "aria-label": function () {
                                return e.controller.t("Braille Mode")
                            },
                            class: i.const("dcg-braille-options-buttons")
                        }, i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-braille-option": !0,
                                    "dcg-selected": e.isLatex()
                                }
                            },
                            role: i.const("button"),
                            onTap: function () {
                                return e.setBrailleMode("none")
                            },
                            tabindex: i.const(0),
                            "aria-label": function () {
                                return e.controller.t("Off")
                            },
                            "aria-pressed": function () {
                                return e.isLatex()
                            }
                        }, function () {
                            return e.controller.t("Off")
                        }), i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-braille-option": !0,
                                    "dcg-selected": e.isNemeth()
                                }
                            },
                            role: i.const("button"),
                            onTap: function () {
                                return e.setBrailleMode("nemeth")
                            },
                            tabindex: i.const(0),
                            "aria-label": function () {
                                return e.controller.t("Nemeth")
                            },
                            "aria-pressed": function () {
                                return e.isNemeth()
                            }
                        }, function () {
                            return e.controller.t("Nemeth")
                        }), i.createElement("span", {
                            class: function () {
                                return {
                                    "dcg-braille-option": !0,
                                    "dcg-selected": e.isUEB()
                                }
                            },
                            role: i.const("button"),
                            onTap: function () {
                                return e.setBrailleMode("ueb")
                            },
                            tabindex: i.const(0),
                            "aria-label": function () {
                                return e.controller.t("UEB")
                            },
                            "aria-pressed": function () {
                                return e.isUEB()
                            }
                        }, function () {
                            return e.controller.t("UEB")
                        })), i.createElement(a, {
                            predicate: function () {
                                return e.controller.renderAsBraille()
                            }
                        }, function () {
                            return i.createElement("div", null, i.createElement("div", {
                                role: i.const("checkbox"),
                                tabindex: i.const(0),
                                onTap: function () {
                                    return e.onToggleSixKeyInput()
                                },
                                "aria-checked": function () {
                                    return e.controller.getSixKeyInput()
                                },
                                "aria-label": function () {
                                    return e.controller.t("Six Key Braille Input")
                                },
                                class: function () {
                                    return {
                                        "dcg-settings-menu-option": !0,
                                        "dcg-do-not-blur": !0,
                                        "dcg-six-key-checkbox": !0,
                                        "dcg-checked": e.controller.getSixKeyInput(),
                                        "dcg-checkbox-container": !0
                                    }
                                },
                                handleEvent: i.const(!0)
                            }, i.createElement("span", {
                                class: i.const("dcg-checkbox-box")
                            }, i.createElement("i", {
                                class: i.const("dcg-icon-check")
                            })), i.createElement("span", {
                                class: i.const("dcg-checkbox-label")
                            }, function () {
                                return e.controller.t("Six Key Braille Input")
                            })), i.createElement("a", {
                                href: i.const("https://www.desmos.com/accessibility#braille"),
                                class: i.const("dcg-six-key-info"),
                                target: i.const("_blank")
                            }, i.createElement("i", {
                                class: i.const("dcg-icon-question-sign")
                            })))
                        })), i.createElement("div", {
                            role: i.const("checkbox"),
                            tabindex: i.const(0),
                            onTap: this.bindFn(this.onToggleInvertedColors),
                            "aria-checked": function () {
                                return e.controller.getInvertedColors()
                            },
                            "aria-label": function () {
                                return e.controller.t("Reverse Contrast")
                            },
                            class: function () {
                                return {
                                    "dcg-settings-menu-option": !0,
                                    "dcg-do-not-blur": !0,
                                    "dcg-checked": e.controller.getInvertedColors(),
                                    "dcg-checkbox-container": !0
                                }
                            },
                            handleEvent: i.const(!0)
                        }, i.createElement("span", {
                            class: i.const("dcg-checkbox-box")
                        }, i.createElement("i", {
                            class: i.const("dcg-icon-check")
                        })), i.createElement("span", {
                            class: i.const("dcg-checkbox-label")
                        }, function () {
                            return e.controller.t("Reverse Contrast")
                        }))))
                    }
                    ,
                    t.prototype.didUnmountSettingsDropdown = function () {
                        s(document).off(".dcg-settings-view")
                    }
                    ,
                    t.prototype.didMountSettingsDropdown = function (e) {
                        var t = this;
                        this.settingsGroupNode = e,
                            s(document).on("dcg-tapstart.dcg-settings-view", function (e) {
                                0 === s(e.target).closest(".dcg-basic-settings-container").length && t.controller.dispatch({
                                    type: "close-settings-menu"
                                })
                            }),
                            s(document).on("keydown.dcg-settings-view", function (e) {
                                if ("Esc" === n.lookup(e) && (t.controller.dispatch({
                                    type: "close-settings-menu"
                                }),
                                    t.props.settingsButtonNode().focus()),
                                    "Tab" === n.lookup(e) && !e.altKey && !e.metaKey && !e.ctrlKey) {
                                    var r = document.activeElement
                                        , i = s(t.props.settingsButtonNode())
                                        , o = s(t.settingsGroupNode).find(".dcg-settings-menu-option:last");
                                    e.shiftKey || r !== o[0] ? e.shiftKey && r === i[0] && (o.focus(),
                                        e.preventDefault(),
                                        e.stopPropagation()) : (i.focus(),
                                            e.preventDefault(),
                                            e.stopPropagation())
                                }
                            })
                    }
                    ,
                    t.prototype.setBrailleMode = function (e) {
                        this.controller.dispatch({
                            type: "set-braille-mode",
                            mode: e
                        })
                    }
                    ,
                    t.prototype.isNemeth = function () {
                        return "nemeth" === this.controller.getBrailleMode()
                    }
                    ,
                    t.prototype.isUEB = function () {
                        return "ueb" === this.controller.getBrailleMode()
                    }
                    ,
                    t.prototype.isLatex = function () {
                        return "none" === this.controller.getBrailleMode()
                    }
                    ,
                    t.prototype.onToggleSixKeyInput = function () {
                        var e = !this.controller.getSixKeyInput();
                        this.controller.dispatch({
                            type: "set-six-key-input",
                            mode: e
                        })
                    }
                    ,
                    t.prototype.onToggleInvertedColors = function () {
                        var e = !this.controller.getInvertedColors();
                        this.controller.dispatch({
                            type: "update-inverted-colors",
                            mode: e
                        })
                    }
                    ,
                    t.prototype.onToggleProjectorMode = function () {
                        this.controller.dispatch({
                            type: "update-projector-mode",
                            mode: !this.controller.isProjectorMode()
                        })
                    }
                    ,
                    t
            }(o.DCGViewBasic);
        t.SettingsMenu = c
    }),
    define("loadcss!basic/keypad/settings-control-button", function () { }),
    define("basic/keypad/settings-control-button", ["require", "exports", "tslib", "dcgview", "keypad/control-btn", "basic/dcgview-basic", "basic/settings-menu", "loadcss!./settings-control-button"], function (e, t, n, r, i, o, s) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r.Components.If
            , c = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this
                            , t = this.props.controller();
                        return r.createElement("div", {
                            class: r.const("dcg-basic-settings-container")
                        }, r.createElement(i.default, {
                            didMount: function (t) {
                                return e.settingsButtonNode = t
                            },
                            command: this.const("settings"),
                            ariaLabel: function () {
                                return t.t("settings")
                            },
                            onTap: this.bindFn(this.onToggleSettingsMenu),
                            selected: function () {
                                return e.controller.isSettingsMenuOpen()
                            },
                            ariaPopup: this.const(!0)
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-wrench")
                        })), r.createElement(a, {
                            predicate: function () {
                                return e.controller.isSettingsMenuOpen()
                            }
                        }, function () {
                            return r.createElement(s.SettingsMenu, {
                                controller: e.props.controller,
                                settingsButtonNode: function () {
                                    return e.settingsButtonNode
                                }
                            })
                        }))
                    }
                    ,
                    t.prototype.onToggleSettingsMenu = function () {
                        this.controller.dispatch({
                            type: "toggle-settings-menu"
                        })
                    }
                    ,
                    t
            }(o.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/fourfunction-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "./settings-control-button", "basic/dcgview-basic"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components.If
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this
                            , t = this.props.controller();
                        return r.createElement(i.default, {
                            controller: this.props.controller
                        }, r.createElement(o.default, {
                            command: this.const("undo"),
                            disabled: function () {
                                return !t.canUndo()
                            },
                            ariaLabel: function () {
                                return t.t("undo")
                            },
                            onTap: function (e) {
                                return t.dispatch({
                                    type: "undo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-undo")
                        })), r.createElement(o.default, {
                            command: this.const("redo"),
                            disabled: function () {
                                return !t.canRedo()
                            },
                            ariaLabel: function () {
                                return t.t("redo")
                            },
                            onTap: function (e) {
                                return t.dispatch({
                                    type: "redo",
                                    source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-redo")
                        })), r.createElement(c, {
                            predicate: function () {
                                return t.shouldShowClear()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("clear"),
                                ariaLabel: function () {
                                    return t.t("clear")
                                },
                                onTap: function () {
                                    return t.dispatch({
                                        type: "clear"
                                    })
                                }
                            }, function () {
                                return t.t("clear")
                            })
                        }), r.createElement(c, {
                            predicate: function () {
                                return !t.shouldShowClear()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("clearall"),
                                disabled: function () {
                                    return !t.canClear()
                                },
                                ariaLabel: function () {
                                    return t.t("clear all")
                                },
                                onTap: function () {
                                    return t.dispatch({
                                        type: "set-blank",
                                        opts: {
                                            allowUndo: !0
                                        }
                                    })
                                }
                            }, function () {
                                return t.t("clear all")
                            })
                        }), r.createElement(o.default, {
                            command: this.const("backspace"),
                            ariaLabel: function () {
                                return t.t("backspace")
                            },
                            disabled: function () {
                                return !t.canBackspace()
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "keypad/press-key",
                                    key: "Backspace"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-delete")
                        })), r.createElement(c, {
                            predicate: function () {
                                return e.props.controller().getSettingsMenu()
                            }
                        }, function () {
                            return r.createElement(s.default, {
                                controller: e.props.controller
                            })
                        }))
                    }
                    ,
                    t.prototype.onToggleSettingsMenu = function () {
                        this.controller.dispatch({
                            type: "toggle-settings-menu"
                        })
                    }
                    ,
                    t
            }(a.DCGViewBasic);
        t.default = l
    }),
    define("loadcss!keypad/control-toggle", function () { }),
    define("keypad/control-toggle", ["require", "exports", "lib/aria", "tslib", "dcgview", "./dcgview-keypad", "loadcss!./control-toggle"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return i.createElement("div", {
                        class: function () {
                            return {
                                "dcg-keypad-control-toggle": !0,
                                "dcg-toggled": e.props.toggled()
                            }
                        },
                        role: i.const("button"),
                        tabindex: i.const("0"),
                        "aria-label": this.bindFn(this.getAriaLabel),
                        "aria-pressed": this.props.toggled,
                        onTap: this.bindFn(this.handleTap)
                    }, i.createElement("div", {
                        class: i.const("dcg-ctrl-toggle-option")
                    }, this.props.defaultOption), i.createElement("div", {
                        class: i.const("dcg-ctrl-toggle-option")
                    }, this.props.toggledOption), i.createElement("div", {
                        class: i.const("dcg-ctrl-toggle-cover")
                    }))
                }
                ,
                t.prototype.getAriaLabel = function () {
                    var e = {
                        toggled: this.props.toggledAriaLabel(),
                        default: this.props.defaultAriaLabel()
                    };
                    return this.props.toggled() ? this.controller.t("__toggled__ selected. Press Enter to switch to __default__.", e) : this.controller.t("__default__ selected. Press Enter to switch to __toggled__.", e)
                }
                ,
                t.prototype.handleTap = function () {
                    this.props.toggled() ? n.alert(this.props.defaultAriaLabel()) : n.alert(this.props.toggledAriaLabel()),
                        this.props.onTap(this.props.command())
                }
                ,
                t
        }(o.default);
        t.default = s
    }),
    define("basic/keypad/scientific-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "basic/dcgview-basic", "keypad/control-toggle", "./settings-control-button"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r.Components.If
            , u = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this
                            , t = this.props.controller();
                        return r.createElement(i.default, {
                            controller: this.props.controller
                        }, r.createElement(o.default, {
                            command: this.const("main"),
                            selected: function () {
                                return "main" === t.getKeyboardMode()
                            },
                            disabled: function () {
                                return e.controller.renderAsBraille()
                            },
                            ignoreInTabOrder: this.const(!0),
                            selectable: this.const(!0),
                            onTap: function () {
                                return t.dispatch({
                                    type: "main"
                                })
                            }
                        }, function () {
                            return t.t("main")
                        }), r.createElement(o.default, {
                            command: this.const("ABC"),
                            selected: function () {
                                return ["qwerty", "capitalQwerty", "letters"].indexOf(t.getKeyboardMode()) !== -1
                            },
                            disabled: function () {
                                return e.controller.renderAsBraille()
                            },
                            ignoreInTabOrder: this.const(!0),
                            selectable: this.const(!0),
                            ariaLabel: function () {
                                return t.t("A B C")
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "ABC"
                                })
                            }
                        }, function () {
                            return t.t("abc")
                        }), r.createElement(o.default, {
                            command: this.const("functions"),
                            selected: function () {
                                return ["functions", "restrictedFunctions"].indexOf(t.getKeyboardMode()) !== -1
                            },
                            ariaLabel: function () {
                                return t.t("Functions")
                            },
                            disabled: function () {
                                return e.controller.renderAsBraille()
                            },
                            ignoreInTabOrder: this.const(!0),
                            selectable: this.const(!0),
                            onTap: function () {
                                return t.dispatch({
                                    type: "functions"
                                })
                            }
                        }, function () {
                            return t.t("func")
                        }), r.createElement(a.default, {
                            command: this.const("degrees"),
                            toggled: function () {
                                return e.model.getDegreeMode()
                            },
                            defaultOption: function () {
                                return t.t("rad")
                            },
                            toggledOption: function () {
                                return t.t("deg")
                            },
                            defaultAriaLabel: function () {
                                return t.t("Radians")
                            },
                            toggledAriaLabel: function () {
                                return t.t("Degrees")
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "degrees"
                                })
                            },
                            controller: this.props.controller
                        }), r.createElement(l, {
                            predicate: function () {
                                return !e.controller.getRestrictedEditing()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("undo"),
                                disabled: function () {
                                    return !t.canUndo()
                                },
                                ariaLabel: function () {
                                    return t.t("Undo")
                                },
                                onTap: function (e) {
                                    return t.dispatch({
                                        type: "undo",
                                        source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                    })
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-undo")
                            }))
                        }), r.createElement(l, {
                            predicate: function () {
                                return !e.controller.getRestrictedEditing()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("redo"),
                                disabled: function () {
                                    return !t.canRedo()
                                },
                                ariaLabel: function () {
                                    return t.t("Redo")
                                },
                                onTap: function (e) {
                                    return t.dispatch({
                                        type: "redo",
                                        source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                    })
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-redo")
                            }))
                        }), r.createElement(l, {
                            predicate: function () {
                                return t.shouldShowClear()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("clear"),
                                ariaLabel: function () {
                                    return t.t("clear")
                                },
                                onTap: function () {
                                    return t.dispatch({
                                        type: "clear"
                                    })
                                }
                            }, function () {
                                return t.t("clear")
                            })
                        }), r.createElement(l, {
                            predicate: function () {
                                return !t.shouldShowClear()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("clearall"),
                                disabled: function () {
                                    return !t.canClear()
                                },
                                ariaLabel: function () {
                                    return t.t("clear all")
                                },
                                onTap: function () {
                                    return t.dispatch({
                                        type: "set-blank",
                                        opts: {
                                            allowUndo: !0
                                        }
                                    })
                                }
                            }, function () {
                                return t.t("clear all")
                            })
                        }), r.createElement(l, {
                            predicate: function () {
                                return e.props.controller().getSettingsMenu()
                            }
                        }, function () {
                            return r.createElement(c.default, {
                                controller: e.props.controller
                            })
                        }))
                    }
                    ,
                    t
            }(s.DCGViewBasic);
        t.default = u
    }),
    define("basic/keypad/single-expression-control-bar", ["require", "exports", "tslib", "dcgview", "keypad/control-bar", "keypad/control-btn", "basic/dcgview-basic", "keypad/control-toggle"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = r.Components.If
            , l = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this
                            , t = this.props.controller();
                        return r.createElement(i.default, {
                            controller: this.props.controller
                        }, r.createElement(a.default, {
                            command: this.const("degrees"),
                            toggled: function () {
                                return e.model.getDegreeMode()
                            },
                            defaultOption: function () {
                                return t.t("rad")
                            },
                            toggledOption: function () {
                                return t.t("deg")
                            },
                            defaultAriaLabel: function () {
                                return t.t("Radians")
                            },
                            toggledAriaLabel: function () {
                                return t.t("Degrees")
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "degrees"
                                })
                            },
                            controller: this.props.controller
                        }), r.createElement("div", {
                            class: r.const("dcg-spacer")
                        }), r.createElement(c, {
                            predicate: function () {
                                return !e.controller.getRestrictedEditing()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("undo"),
                                disabled: function () {
                                    return !t.canUndo()
                                },
                                ariaLabel: function () {
                                    return t.t("Undo")
                                },
                                onTap: function (e) {
                                    return t.dispatch({
                                        type: "undo",
                                        source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                    })
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-undo")
                            }))
                        }), r.createElement(c, {
                            predicate: function () {
                                return !e.controller.getRestrictedEditing()
                            }
                        }, function () {
                            return r.createElement(o.default, {
                                command: e.const("redo"),
                                disabled: function () {
                                    return !t.canRedo()
                                },
                                ariaLabel: function () {
                                    return t.t("Redo")
                                },
                                onTap: function (e) {
                                    return t.dispatch({
                                        type: "redo",
                                        source: "keyboard" === e.device ? "button-keyboard" : "button-tap"
                                    })
                                }
                            }, r.createElement("i", {
                                class: r.const("dcg-icon-redo")
                            }))
                        }), r.createElement("div", {
                            class: r.const("dcg-spacer")
                        }), r.createElement(o.default, {
                            narrowButton: this.const(!0),
                            command: this.const("clear"),
                            ariaLabel: function () {
                                return t.t("clear")
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "clear"
                                })
                            }
                        }, function () {
                            return t.t("clear")
                        }), r.createElement(o.default, {
                            narrowButton: this.const(!0),
                            command: this.const("backspace"),
                            ariaLabel: function () {
                                return t.t("backspace")
                            },
                            onTap: function () {
                                return t.dispatch({
                                    type: "keypad/press-key",
                                    key: "Backspace"
                                })
                            }
                        }, r.createElement("i", {
                            class: r.const("dcg-icon-delete")
                        })))
                    }
                    ,
                    t
            }(s.DCGViewBasic);
        t.default = l
    }),
    define("loadcss!keypad/btn", function () { });
define("keypad/btn", ["require", "exports", "tslib", "dcgview", "loadcss!./btn"], function (e, t, n, r) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function (e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e),
            t.prototype.template = function () {
                var e = this;
                return r.createElement("div", {
                    class: r.const("dcg-keypad-btn-container"),
                    style: function () {
                        return {
                            "flex-grow": e.getColSpan()
                        }
                    }
                }, r.createElement("a", {
                    role: r.const("button"),
                    class: function () {
                        return {
                            "dcg-keypad-btn": !0,
                            "dcg-keypad-btn-dark": e.isDark()
                        }
                    },
                    "dcg-command": this.props.command,
                    "aria-label": this.bindFn(this.getAriaLabel),
                    onTap: this.props.onTap
                }, r.createElement("span", {
                    class: r.const("dcg-keypad-btn-content")
                }, this.children)))
            }
            ,
            t.prototype.isDark = function () {
                return !!this.props.dark && this.props.dark()
            }
            ,
            t.prototype.getAriaLabel = function () {
                return this.props.ariaLabel ? this.props.ariaLabel() : this.props.command()
            }
            ,
            t.prototype.getColSpan = function () {
                return this.props.colspan ? this.props.colspan() : void 0
            }
            ,
            t
    }(r.Class);
    t.default = i
});
define("keypad/keys", ["require", "exports", "./btn", "dcgview-helpers/static-mathquill-view", "dcgview", "i18n"], function (e, t, n, r, i, o) {
    "use strict";
    function s(e) {
        return function (t, o, s) {
            return void 0 === s && (s = 1),
                i.createElement(n.default, {
                    command: i.const(e.command || t),
                    ariaLabel: i.const(e.ariaLabel || t),
                    colspan: i.const(s),
                    dark: i.const(!!e.dark),
                    onTap: function () {
                        return o({
                            type: "keypad/type-text",
                            text: e.typedText || t
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(e.content || t)
                }))
        }
    }
    function a(e) {
        return function (t, o, s) {
            return void 0 === s && (s = 1),
                i.createElement(n.default, {
                    command: i.const(t),
                    ariaLabel: i.const(e.ariaLabel || t),
                    colspan: i.const(s),
                    onTap: function () {
                        return o({
                            type: "keypad/type-text",
                            text: t + "("
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(t)
                }))
        }
    }
    function c(e) {
        return function (t, o, s) {
            return void 0 === s && (s = 1),
                i.createElement(n.default, {
                    command: i.const(e.command),
                    ariaLabel: i.const(e.ariaLabel || e.command),
                    colspan: i.const(s),
                    onTap: function () {
                        o({
                            type: "keypad/custom-command",
                            command: e.command
                        })
                    }
                }, i.createElement(r.default, {
                    latex: i.const(e.content)
                }))
        }
    }
    function l(e, t, n) {
        void 0 === n && (n = 1);
        var r = e.dispatch;
        return u[t](t, r, n)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = {
        "(": s({
            content: "(",
            command: "leftparen",
            ariaLabel: o.t("Left Parenthesis")
        }),
        ")": s({
            content: ")",
            command: "rightparen",
            ariaLabel: o.t("Right Parenthesis")
        }),
        sqrt: s({
            content: "",
            ariaLabel: o.t("Square Root")
        }),
        "/": s({
            content: "",
            typedText: "/",
            ariaLabel: o.t("Divide")
        }),
        "*": s({
            content: "",
            typedText: "*",
            ariaLabel: o.t("Times")
        }),
        "-": s({
            content: "-",
            typedText: "-",
            ariaLabel: o.t("Minus")
        }),
        "+": s({
            content: "+",
            typedText: "+",
            ariaLabel: o.t("Plus")
        }),
        ".": s({
            content: ".",
            command: "decimal",
            ariaLabel: o.t("Decimal"),
            dark: !0
        }),
        ans: function (e, t, r) {
            return void 0 === r && (r = 1),
                i.createElement(n.default, {
                    command: i.const(e),
                    ariaLabel: function () {
                        return o.t("Answer")
                    },
                    colspan: i.const(r),
                    onTap: function () {
                        return t({
                            type: "keypad/type-text",
                            text: e
                        })
                    }
                }, i.const("ans"))
        },
        enter: function (e, t, r) {
            return void 0 === r && (r = 1),
                i.createElement(n.default, {
                    command: i.const(e),
                    dark: i.const(!0),
                    ariaLabel: function () {
                        return o.t("Enter")
                    },
                    colspan: i.const(r),
                    onTap: function () {
                        return t({
                            type: "keypad/press-key",
                            key: "Enter"
                        })
                    }
                }, i.createElement("i", {
                    class: i.const("dcg-icon-arrow-enter")
                }))
        },
        shift: function (e, t, r) {
            return void 0 === r && (r = 1),
                i.createElement(n.default, {
                    command: i.const(e),
                    dark: i.const(!0),
                    ariaLabel: function () {
                        return o.t("Shift")
                    },
                    colspan: i.const(r),
                    onTap: function () {
                        return t({
                            type: "keypad/shift"
                        })
                    }
                }, i.createElement("i", {
                    class: i.const("dcg-icon-shift")
                }))
        },
        backspace: function (e, t, r) {
            return void 0 === r && (r = 1),
                i.createElement(n.default, {
                    command: i.const(e),
                    ariaLabel: function () {
                        return o.t("Backspace")
                    },
                    dark: i.const(!0),
                    colspan: i.const(r),
                    onTap: function () {
                        return t({
                            type: "keypad/press-key",
                            key: "Backspace"
                        })
                    }
                }, i.createElement("i", {
                    class: i.const("dcg-icon-delete")
                }))
        },
        pi: s({
            content: "\\pi",
            ariaLabel: o.t("Pi")
        }),
        alpha: s({
            content: "\\alpha",
            ariaLabel: o.t("Alpha")
        }),
        beta: s({
            content: "\\beta",
            ariaLabel: o.t("Beta")
        }),
        "a^2": c({
            command: "a^2",
            content: "a^2",
            ariaLabel: o.t("Squared")
        }),
        "a^3": c({
            command: "a^3",
            content: "a^3",
            ariaLabel: o.t("Cubed")
        }),
        "x^3": c({
            command: "a^3",
            content: "x^3",
            ariaLabel: o.t("Cubed")
        }),
        "a^b": s({
            content: "a^b",
            typedText: "^",
            ariaLabel: o.t("Superscript")
        }),
        "a/b": s({
            content: "\\frac{a}{b}",
            typedText: "/",
            ariaLabel: o.t("A over B")
        }),
        "x^2": c({
            command: "a^2",
            content: "x^2",
            ariaLabel: o.t("Squared")
        }),
        "x^y": s({
            content: "x^y",
            typedText: "^",
            ariaLabel: o.t("Superscript")
        }),
        "x/y": s({
            content: "\\frac{x}{y}",
            typedText: "/",
            ariaLabel: o.t("A over B")
        }),
        nthroot: c({
            command: "nthroot",
            content: "\\sqrt[n]{}",
            ariaLabel: o.t("Nth Root")
        }),
        ythroot: c({
            command: "nthroot",
            content: "\\sqrt[y]{}",
            ariaLabel: o.t("Yth Root")
        }),
        sin: a({
            ariaLabel: o.t("Sine")
        }),
        cos: a({
            ariaLabel: o.t("Cosine")
        }),
        tan: a({
            ariaLabel: o.t("Tangent")
        }),
        "|a|": s({
            typedText: "|",
            ariaLabel: o.t("Absolute Value")
        }),
        "|x|": s({
            typedText: "|",
            ariaLabel: o.t("Absolute Value")
        }),
        ln: a({
            ariaLabel: o.t("Natural Log")
        }),
        log: a({
            ariaLabel: o.t("Log")
        }),
        quantile: a({
            ariaLabel: o.t("Quantile")
        }),
        quartile: a({
            ariaLabel: o.t("Quartile")
        }),
        var: a({}),
        nCr: a({}),
        sec: a({
            ariaLabel: o.t("Secant")
        }),
        csc: a({
            ariaLabel: o.t("Cosecant")
        }),
        cot: a({
            ariaLabel: o.t("Cotangent")
        }),
        loga: c({
            command: "loga",
            content: "log_a",
            ariaLabel: o.t("Log A")
        }),
        stdev: a({
            ariaLabel: o.t("Standard Deviation")
        }),
        mad: a({}),
        nPr: a({}),
        arcsin: c({
            command: "arcsin",
            content: "sin^{-1}",
            ariaLabel: o.t("Inverse Sine")
        }),
        arccos: c({
            command: "arccos",
            content: "cos^{-1}",
            ariaLabel: o.t("Inverse Cosine")
        }),
        arctan: c({
            command: "arctan",
            content: "tan^{-1}",
            ariaLabel: o.t("Inverse Tangent")
        }),
        mean: a({
            ariaLabel: o.t("Mean")
        }),
        stdevp: a({
            ariaLabel: o.t("Standard Deviation of Population")
        }),
        mod: a({}),
        "e^x": s({
            typedText: "e^",
            ariaLabel: o.t("Exponent")
        }),
        sum: s({
            content: "\\sum",
            ariaLabel: o.t("Sum")
        }),
        prod: s({
            content: "\\prod",
            ariaLabel: o.t("Product")
        }),
        floor: a({
            ariaLabel: o.t("Floor")
        }),
        round: a({
            ariaLabel: o.t("Round")
        }),
        abs: a({
            ariaLabel: o.t("Absolute Value")
        }),
        "!": s({
            content: "!",
            ariaLabel: o.t("Factorial")
        }),
        median: a({
            ariaLabel: o.t("Median")
        }),
        lcm: a({}),
        gcf: a({}),
        ddx: c({
            command: "ddx",
            content: "\\frac{d}{dx}"
        }),
        int: s({
            content: "\\int",
            ariaLabel: o.t("Integral")
        }),
        "%": s({
            content: "\\%",
            ariaLabel: o.t("Percent Of")
        }),
        exp: s({}),
        "A^-1": c({
            command: "A^-1",
            content: "A^{-1}",
            ariaLabel: o.t("Inverse")
        }),
        "A^T": c({
            command: "A^T",
            content: "A^T",
            ariaLabel: o.t("Transpose")
        }),
        "A^2": c({
            command: "A^2",
            content: "A^2",
            ariaLabel: o.t("Squared")
        }),
        det: a({
            ariaLabel: "Determinant"
        }),
        "A^n": s({
            content: "A^n",
            typedText: "^",
            ariaLabel: o.t("Exponent")
        }),
        a: s({}),
        b: s({}),
        c: s({}),
        d: s({}),
        e: s({}),
        f: s({}),
        g: s({}),
        h: s({}),
        i: s({}),
        j: s({}),
        k: s({}),
        l: s({}),
        m: s({}),
        n: s({}),
        o: s({}),
        p: s({}),
        q: s({}),
        r: s({}),
        s: s({}),
        t: s({}),
        u: s({}),
        v: s({}),
        w: s({}),
        x: s({}),
        y: s({}),
        z: s({}),
        A: s({}),
        B: s({}),
        C: s({}),
        D: s({}),
        E: s({}),
        F: s({}),
        G: s({}),
        H: s({}),
        I: s({}),
        J: s({}),
        K: s({}),
        L: s({}),
        M: s({}),
        N: s({}),
        O: s({}),
        P: s({}),
        Q: s({}),
        R: s({}),
        S: s({}),
        T: s({}),
        U: s({}),
        V: s({}),
        W: s({}),
        X: s({}),
        Y: s({}),
        Z: s({}),
        0: s({
            dark: !0
        }),
        1: s({
            dark: !0
        }),
        2: s({
            dark: !0
        }),
        3: s({
            dark: !0
        }),
        4: s({
            dark: !0
        }),
        5: s({
            dark: !0
        }),
        6: s({
            dark: !0
        }),
        7: s({
            dark: !0
        }),
        8: s({
            dark: !0
        }),
        9: s({
            dark: !0
        }),
        ",": s({}),
        "=": s({
            dark: !0
        }),
        "[": s({}),
        "]": s({}),
        '"': s({}),
        "'": s({})
    };
    t.view = l
}),
    define("loadcss!keypad/keypad", function () { }),
    define("keypad/keypad", ["require", "exports", "tslib", "dcgview", "loadcss!./keypad"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this.props.controller();
                    return r.createElement("div", {
                        role: r.const("group"),
                        "aria-label": function () {
                            return e.t("keypad")
                        },
                        class: function () {
                            return {
                                "dcg-basic-keypad": !0,
                                "dcg-do-not-blur": !0,
                                "dcg-theme-light-keypad": e.getLightKeypad && e.getLightKeypad()
                            }
                        }
                    }, this.children)
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("loadcss!keypad/row", function () { }),
    define("keypad/row", ["require", "exports", "tslib", "dcgview", "loadcss!./row"], function (e, t, n, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement("div", {
                        class: r.const("dcg-keypad-row")
                    }, this.children)
                }
                ,
                t
        }(r.Class);
        t.default = i
    }),
    define("basic/keypad/fourfunction-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "(", this.parenColspan()), o.view(this, ")", this.parenColspan()), this.makeAdditionalFunctionKey(0), this.makeAdditionalFunctionKey(1), o.view(this, "/")), r.createElement(a.default, null, o.view(this, "7"), o.view(this, "8"), o.view(this, "9"), o.view(this, "*")), r.createElement(a.default, null, o.view(this, "4"), o.view(this, "5"), o.view(this, "6"), o.view(this, "-")), r.createElement(a.default, null, o.view(this, "1"), o.view(this, "2"), o.view(this, "3"), o.view(this, "+")), r.createElement(a.default, null, o.view(this, "0"), o.view(this, "."), o.view(this, "ans"), o.view(this, "enter")))
                }
                ,
                t.prototype.parenColspan = function () {
                    return this.controller.getAdditionalFunctions().length > 1 ? .5 : 1
                }
                ,
                t.prototype.makeAdditionalFunctionKey = function (e) {
                    var t = this.controller.getAdditionalFunctions()[e];
                    return "exponent" === t ? o.view(this, "a^b") : "percent" === t ? o.view(this, "%") : "sqrt" === t ? o.view(this, "sqrt") : void 0
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/single-expression-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "("), o.view(this, ")"), o.view(this, "x^2"), o.view(this, "sqrt"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "x^3"), o.view(this, "x^y"), o.view(this, "ythroot")), r.createElement(a.default, null, o.view(this, "7"), o.view(this, "8"), o.view(this, "9"), o.view(this, "/"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "pi"), o.view(this, "e^x"), o.view(this, "!")), r.createElement(a.default, null, o.view(this, "4"), o.view(this, "5"), o.view(this, "6"), o.view(this, "*"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "log"), o.view(this, "ln"), o.view(this, "|x|")), r.createElement(a.default, null, o.view(this, "1"), o.view(this, "2"), o.view(this, "3"), o.view(this, "-"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan")), r.createElement(a.default, null, o.view(this, "0"), o.view(this, "."), o.view(this, "x/y"), o.view(this, "+"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "arcsin"), o.view(this, "arccos"), o.view(this, "arctan")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/sci-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "7"), o.view(this, "8"), o.view(this, "9"), o.view(this, "/"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "a^2"), o.view(this, "a^b"), o.view(this, "a/b"), o.view(this, "backspace")), r.createElement(a.default, null, o.view(this, "4"), o.view(this, "5"), o.view(this, "6"), o.view(this, "*"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "sqrt"), o.view(this, "nthroot"), o.view(this, "("), o.view(this, ")")), r.createElement(a.default, null, o.view(this, "1"), o.view(this, "2"), o.view(this, "3"), o.view(this, "-"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan"), o.view(this, "pi")), r.createElement(a.default, null, o.view(this, "0"), o.view(this, "."), o.view(this, "ans"), o.view(this, "+"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "|a|"), o.view(this, "ln"), o.view(this, "%"), o.view(this, "enter")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/sci-qwerty-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "q"), o.view(this, "w"), o.view(this, "e"), o.view(this, "r"), o.view(this, "t"), o.view(this, "y"), o.view(this, "u"), o.view(this, "i"), o.view(this, "o"), o.view(this, "p")), r.createElement(a.default, null, r.createElement("div", {
                        class: r.const("dcg-half-width-placeholder")
                    }), o.view(this, "a"), o.view(this, "s"), o.view(this, "d"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), r.createElement("div", {
                        class: r.const("dcg-half-width-placeholder")
                    })), r.createElement(a.default, null, o.view(this, "shift"), o.view(this, "z"), o.view(this, "x"), o.view(this, "c"), o.view(this, "v"), o.view(this, "b"), o.view(this, "n"), o.view(this, "m"), o.view(this, ","), o.view(this, "backspace")), r.createElement(a.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, "pi"), o.view(this, "enter")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/sci-letters-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "a"), o.view(this, "b"), o.view(this, "c"), o.view(this, "d"), o.view(this, "e"), o.view(this, "f"), o.view(this, "g"), o.view(this, "h"), o.view(this, "backspace")), r.createElement(a.default, null, o.view(this, "i"), o.view(this, "j"), o.view(this, "k"), o.view(this, "l"), o.view(this, "m"), o.view(this, "n"), o.view(this, "o"), o.view(this, "p"), o.view(this, "q")), r.createElement(a.default, null, o.view(this, "r"), o.view(this, "s"), o.view(this, "t"), o.view(this, "u"), o.view(this, "v"), o.view(this, "w"), o.view(this, "x"), o.view(this, "y"), o.view(this, "z")), r.createElement(a.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, ","), o.view(this, "enter")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/sci-capital-qwerty-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "Q"), o.view(this, "W"), o.view(this, "E"), o.view(this, "R"), o.view(this, "T"), o.view(this, "Y"), o.view(this, "U"), o.view(this, "I"), o.view(this, "O"), o.view(this, "P")), r.createElement(a.default, null, r.createElement("div", {
                        class: r.const("dcg-half-width-placeholder")
                    }), o.view(this, "A"), o.view(this, "S"), o.view(this, "D"), o.view(this, "F"), o.view(this, "G"), o.view(this, "H"), o.view(this, "J"), o.view(this, "K"), o.view(this, "L"), r.createElement("div", {
                        class: r.const("dcg-half-width-placeholder")
                    })), r.createElement(a.default, null, o.view(this, "shift"), o.view(this, "Z"), o.view(this, "X"), o.view(this, "C"), o.view(this, "V"), o.view(this, "B"), o.view(this, "N"), o.view(this, "M"), o.view(this, ","), o.view(this, "backspace")), r.createElement(a.default, null, o.view(this, "="), o.view(this, "("), o.view(this, ")"), o.view(this, "["), o.view(this, "]"), o.view(this, "!"), o.view(this, "'"), o.view(this, "pi"), o.view(this, "enter")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/sci-functions-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "keypad/keys", "keypad/keypad", "keypad/row"], function (e, t, n, r, i, o, s, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    return r.createElement(s.default, {
                        controller: this.props.controller
                    }, r.createElement(a.default, null, o.view(this, "sin"), o.view(this, "cos"), o.view(this, "tan"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "ln"), o.view(this, "log"), o.view(this, "backspace")), r.createElement(a.default, null, o.view(this, "arcsin"), o.view(this, "arccos"), o.view(this, "arctan"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "e^x"), o.view(this, "abs"), o.view(this, "round")), r.createElement(a.default, null, o.view(this, "mean"), o.view(this, "stdev"), o.view(this, "stdevp"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "a^b"), o.view(this, "sqrt"), o.view(this, "nthroot")), r.createElement(a.default, null, o.view(this, "nPr"), o.view(this, "nCr"), o.view(this, "!"), r.createElement("div", {
                        class: r.const("dcg-partition-placeholder")
                    }), o.view(this, "e"), o.view(this, "pi"), o.view(this, "enter")))
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = c
    }),
    define("basic/keypad/scientific-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "./sci-keypad", "./sci-qwerty-keypad", "./sci-letters-keypad", "./sci-capital-qwerty-keypad", "./sci-functions-keypad"], function (e, t, n, r, i, o, s, a, c, l) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = r.Components.Switch
            , d = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement(u, {
                            key: function () {
                                return e.controller.getKeyboardMode()
                            }
                        }, function (t) {
                            switch (t) {
                                case "qwerty":
                                    return r.createElement(s.default, {
                                        controller: e.props.controller
                                    });
                                case "letters":
                                    return r.createElement(a.default, {
                                        controller: e.props.controller
                                    });
                                case "capitalQwerty":
                                    return r.createElement(c.default, {
                                        controller: e.props.controller
                                    });
                                case "functions":
                                    return r.createElement(l.default, {
                                        controller: e.props.controller
                                    });
                                default:
                                    return r.createElement(o.default, {
                                        controller: e.props.controller
                                    })
                            }
                        })
                    }
                    ,
                    t
            }(i.DCGViewBasic);
        t.default = d
    }),
    function (e, t) {
        if ("object" == typeof exports && "object" == typeof module)
            module.exports = t();
        else if ("function" == typeof define && define.amd)
            define("abraham", [], t);
        else {
            var n = t();
            for (var r in n)
                ("object" == typeof exports ? exports : e)[r] = n[r]
        }
    }(this, function () {
        return function (e) {
            function t(r) {
                if (n[r])
                    return n[r].exports;
                var i = n[r] = {
                    i: r,
                    l: !1,
                    exports: {}
                };
                return e[r].call(i.exports, i, i.exports, t),
                    i.l = !0,
                    i.exports
            }
            var n = {};
            return t.m = e,
                t.c = n,
                t.i = function (e) {
                    return e
                }
                ,
                t.d = function (e, n, r) {
                    t.o(e, n) || Object.defineProperty(e, n, {
                        configurable: !1,
                        enumerable: !0,
                        get: r
                    })
                }
                ,
                t.n = function (e) {
                    var n = e && e.__esModule ? function () {
                        return e.default
                    }
                        : function () {
                            return e
                        }
                        ;
                    return t.d(n, "a", n),
                        n
                }
                ,
                t.o = function (e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                ,
                t.p = "",
                t(t.s = 26)
        }([function (e, t, n) {
            function r(e, t) {
                var n = i.map(e, t);
                return e.warnings && (n.warnings = e.warnings),
                    n
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var i = n(22);
            t.map = r
        }
            , function (e, t) {
                function n() {
                    throw new Error("setTimeout has not been defined")
                }
                function r() {
                    throw new Error("clearTimeout has not been defined")
                }
                function i(e) {
                    if (u === setTimeout)
                        return setTimeout(e, 0);
                    if ((u === n || !u) && setTimeout)
                        return u = setTimeout,
                            setTimeout(e, 0);
                    try {
                        return u(e, 0)
                    } catch (t) {
                        try {
                            return u.call(null, e, 0)
                        } catch (t) {
                            return u.call(this, e, 0)
                        }
                    }
                }
                function o(e) {
                    if (d === clearTimeout)
                        return clearTimeout(e);
                    if ((d === r || !d) && clearTimeout)
                        return d = clearTimeout,
                            clearTimeout(e);
                    try {
                        return d(e)
                    } catch (t) {
                        try {
                            return d.call(null, e)
                        } catch (t) {
                            return d.call(this, e)
                        }
                    }
                }
                function s() {
                    m && h && (m = !1,
                        h.length ? f = h.concat(f) : g = -1,
                        f.length && a())
                }
                function a() {
                    if (!m) {
                        var e = i(s);
                        m = !0;
                        for (var t = f.length; t;) {
                            for (h = f,
                                f = []; ++g < t;)
                                h && h[g].run();
                            g = -1,
                                t = f.length
                        }
                        h = null,
                            m = !1,
                            o(e)
                    }
                }
                function c(e, t) {
                    this.fun = e,
                        this.array = t
                }
                function l() { }
                var u, d, p = e.exports = {};
                !function () {
                    try {
                        u = "function" == typeof setTimeout ? setTimeout : n
                    } catch (e) {
                        u = n
                    }
                    try {
                        d = "function" == typeof clearTimeout ? clearTimeout : r
                    } catch (e) {
                        d = r
                    }
                }();
                var h, f = [], m = !1, g = -1;
                p.nextTick = function (e) {
                    var t = new Array(arguments.length - 1);
                    if (arguments.length > 1)
                        for (var n = 1; n < arguments.length; n++)
                            t[n - 1] = arguments[n];
                    f.push(new c(e, t)),
                        1 !== f.length || m || i(a)
                }
                    ,
                    c.prototype.run = function () {
                        this.fun.apply(null, this.array)
                    }
                    ,
                    p.title = "browser",
                    p.browser = !0,
                    p.env = {},
                    p.argv = [],
                    p.version = "",
                    p.versions = {},
                    p.on = l,
                    p.addListener = l,
                    p.once = l,
                    p.off = l,
                    p.removeListener = l,
                    p.removeAllListeners = l,
                    p.emit = l,
                    p.prependListener = l,
                    p.prependOnceListener = l,
                    p.listeners = function (e) {
                        return []
                    }
                    ,
                    p.binding = function (e) {
                        throw new Error("process.binding is not supported")
                    }
                    ,
                    p.cwd = function () {
                        return "/"
                    }
                    ,
                    p.chdir = function (e) {
                        throw new Error("process.chdir is not supported")
                    }
                    ,
                    p.umask = function () {
                        return 0
                    }
            }
            , function (e, t, n) {
                function r(e) {
                    for (var t = !1, n = 0, r = "", i = "", o = 0, s = e; o < s.length; o++) {
                        var a = s[o];
                        if ("terminal" !== a.type || !/[A-Za-z]/.test(a.value))
                            break;
                        r += a.value,
                            n++
                    }
                    return i = r.replace(l, "\\operatorname{$1}"),
                        t = n > 0 && i !== r,
                        {
                            modified: t,
                            terminalCount: n,
                            value: i
                        }
                }
                function i(e) {
                    return d.indexOf(e.toLowerCase()) !== -1
                }
                function o(e) {
                    if (!Array.isArray(e))
                        throw new Error("Operator names must be an array, got " + typeof e);
                    for (var t = 0, n = e; t < n.length; t++) {
                        var r = n[t];
                        if ("string" != typeof r)
                            throw new Error("Operator names must be strings, found " + typeof r)
                    }
                    d = e,
                        a()
                }
                function s() {
                    d = u,
                        l = p
                }
                function a() {
                    l = c(d)
                }
                function c(e) {
                    var t = e.sort(function (e, t) {
                        return e.length - t.length || e.localeCompare(t)
                    }).join("|");
                    return new RegExp("(" + t + ")", "g")
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var l, u = ["abs", "ans", "arccosh", "arccot", "arccoth", "arccsc", "arccsch", "arcsec", "arcsech", "arcsinh", "arctanh", "ceil", "corr", "cov", "csch", "distance", "floor", "gcf", "lcm", "length", "mad", "mcd", "mcm", "mean", "median", "midpoint", "mod", "nCr", "nPr", "polygon", "quantile", "quartile", "round", "sech", "sign", "signum", "stddev", "stddevp", "stdDev", "stdDevP", "stdev", "stdevp", "total", "var", "variance", "varp"], d = u, p = c(u);
                t.getAutoOperator = r,
                    t.containsValue = i,
                    t.setOperatorNames = o,
                    t.resetOperatorNames = s
            }
            , function (e, t, n) {
                function r(e) {
                    if (!f.isSixDotCells(e))
                        throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")
                }
                function i(e, n) {
                    return r(e),
                        d.default(t.UnicodeBraille.toBrailleAscii(e), n)
                }
                function o(e, n) {
                    return n && n.operatorNames ? c.setOperatorNames(n.operatorNames) : c.resetOperatorNames(),
                        p.map(l.default(e), t.UnicodeBraille.coerceToSixDotCells)
                }
                function s(e, n) {
                    return r(e),
                        h.default(t.UnicodeBraille.toBrailleAscii(e), n)
                }
                function a(e, n) {
                    return n && n.operatorNames ? c.setOperatorNames(n.operatorNames) : c.resetOperatorNames(),
                        p.map(u.default(e), t.UnicodeBraille.coerceToSixDotCells)
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var c = n(2)
                    , l = n(14)
                    , u = n(15)
                    , d = n(16)
                    , p = n(0)
                    , h = n(23)
                    , f = n(25);
                t.nemethToLatex = i,
                    t.latexToNemeth = o,
                    t.uebToLatex = s,
                    t.latexToUeb = a,
                    t.UnicodeBraille = {
                        coerceToSixDotCells: f.coerceToSixDotCells,
                        toBrailleAscii: f.toBrailleAscii,
                        toExpandedBrailleAscii: f.toExpandedBrailleAscii
                    },
                    t.version = "1.0.2"
            }
            , function (e, t) { }
            , function (e, t, n) {
                (function (e) {
                    function n(e, t) {
                        for (var n = 0, r = e.length - 1; r >= 0; r--) {
                            var i = e[r];
                            "." === i ? e.splice(r, 1) : ".." === i ? (e.splice(r, 1),
                                n++) : n && (e.splice(r, 1),
                                    n--)
                        }
                        if (t)
                            for (; n--; n)
                                e.unshift("..");
                        return e
                    }
                    function r(e, t) {
                        if (e.filter)
                            return e.filter(t);
                        for (var n = [], r = 0; r < e.length; r++)
                            t(e[r], r, e) && n.push(e[r]);
                        return n
                    }
                    var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
                        , o = function (e) {
                            return i.exec(e).slice(1)
                        };
                    t.resolve = function () {
                        for (var t = "", i = !1, o = arguments.length - 1; o >= -1 && !i; o--) {
                            var s = o >= 0 ? arguments[o] : e.cwd();
                            if ("string" != typeof s)
                                throw new TypeError("Arguments to path.resolve must be strings");
                            s && (t = s + "/" + t,
                                i = "/" === s.charAt(0))
                        }
                        return t = n(r(t.split("/"), function (e) {
                            return !!e
                        }), !i).join("/"),
                            (i ? "/" : "") + t || "."
                    }
                        ,
                        t.normalize = function (e) {
                            var i = t.isAbsolute(e)
                                , o = "/" === s(e, -1);
                            return e = n(r(e.split("/"), function (e) {
                                return !!e
                            }), !i).join("/"),
                                e || i || (e = "."),
                                e && o && (e += "/"),
                                (i ? "/" : "") + e
                        }
                        ,
                        t.isAbsolute = function (e) {
                            return "/" === e.charAt(0)
                        }
                        ,
                        t.join = function () {
                            var e = Array.prototype.slice.call(arguments, 0);
                            return t.normalize(r(e, function (e, t) {
                                if ("string" != typeof e)
                                    throw new TypeError("Arguments to path.join must be strings");
                                return e
                            }).join("/"))
                        }
                        ,
                        t.relative = function (e, n) {
                            function r(e) {
                                for (var t = 0; t < e.length && "" === e[t]; t++)
                                    ;
                                for (var n = e.length - 1; n >= 0 && "" === e[n]; n--)
                                    ;
                                return t > n ? [] : e.slice(t, n - t + 1)
                            }
                            e = t.resolve(e).substr(1),
                                n = t.resolve(n).substr(1);
                            for (var i = r(e.split("/")), o = r(n.split("/")), s = Math.min(i.length, o.length), a = s, c = 0; c < s; c++)
                                if (i[c] !== o[c]) {
                                    a = c;
                                    break
                                }
                            for (var l = [], c = a; c < i.length; c++)
                                l.push("..");
                            return l = l.concat(o.slice(a)),
                                l.join("/")
                        }
                        ,
                        t.sep = "/",
                        t.delimiter = ":",
                        t.dirname = function (e) {
                            var t = o(e)
                                , n = t[0]
                                , r = t[1];
                            return n || r ? (r && (r = r.substr(0, r.length - 1)),
                                n + r) : "."
                        }
                        ,
                        t.basename = function (e, t) {
                            var n = o(e)[2];
                            return t && n.substr(-1 * t.length) === t && (n = n.substr(0, n.length - t.length)),
                                n
                        }
                        ,
                        t.extname = function (e) {
                            return o(e)[3]
                        }
                        ;
                    var s = "b" === "ab".substr(-1) ? function (e, t, n) {
                        return e.substr(t, n)
                    }
                        : function (e, t, n) {
                            return t < 0 && (t = e.length + t),
                                e.substr(t, n)
                        }
                }
                ).call(t, n(1))
            }
            , function (e, t, n) {
                function r(e) {
                    if (!e.hash)
                        throw e;
                    return {
                        _diagnostic: {
                            expected: e.hash.expected,
                            message: e.message,
                            text: e.hash.text,
                            token: e.hash.token
                        },
                        location: e.hash.loc
                    }
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }),
                    t.default = r
            }
            , function (e, t, n) {
                function r(e) {
                    return {
                        type: "terminal",
                        value: e
                    }
                }
                function i(e) {
                    return {
                        type: "command",
                        value: e
                    }
                }
                function o(e) {
                    return {
                        type: "greek",
                        value: e
                    }
                }
                function s(e) {
                    return {
                        subscript: e._,
                        superscript: e["^"],
                        type: "level"
                    }
                }
                function a(e, t) {
                    var n = []
                        , r = e.match(/'+/);
                    if (null !== r)
                        for (var o = r[0].length, s = 0; s < o; s++)
                            n.push(i("\\prime"));
                    return d(n, t)
                }
                function c(e, t) {
                    return {
                        type: "fraction",
                        numerator: e,
                        denominator: t
                    }
                }
                function l(e, t) {
                    return {
                        name: e,
                        type: "typeform",
                        value: t
                    }
                }
                function u(e, t) {
                    return {
                        type: "radical",
                        index: t,
                        radicand: e
                    }
                }
                function d() {
                    for (var e = [], t = 0; t < arguments.length; t++)
                        e[t] = arguments[t];
                    return Array.prototype.concat.apply([], e)
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }),
                    t.terminal = r,
                    t.command = i,
                    t.greek = o,
                    t.level = s,
                    t.processPrimes = a,
                    t.fraction = c,
                    t.typeform = l,
                    t.radical = u,
                    t.group = d
            }
            , function (e, t) {
                e.exports = function (e) {
                    return e.webpackPolyfill || (e.deprecate = function () { }
                        ,
                        e.paths = [],
                        e.children || (e.children = []),
                        Object.defineProperty(e, "loaded", {
                            enumerable: !0,
                            get: function () {
                                return e.l
                            }
                        }),
                        Object.defineProperty(e, "id", {
                            enumerable: !0,
                            get: function () {
                                return e.i
                            }
                        }),
                        e.webpackPolyfill = 1),
                        e
                }
            }
            , function (e, t, n) {
                (function (e, r) {
                    var i = function () {
                        function e() {
                            this.yy = {}
                        }
                        var t = function (e, t, n, r) {
                            for (n = n || {},
                                r = e.length; r--; n[e[r]] = t)
                                ;
                            return n
                        }
                            , n = [1, 11]
                            , r = [1, 12]
                            , i = [1, 13]
                            , o = [1, 69]
                            , s = [1, 70]
                            , a = [1, 68]
                            , c = [1, 38]
                            , l = [1, 39]
                            , u = [1, 58]
                            , d = [1, 59]
                            , p = [1, 60]
                            , h = [1, 61]
                            , f = [1, 62]
                            , m = [1, 63]
                            , g = [1, 64]
                            , y = [1, 65]
                            , v = [1, 66]
                            , b = [1, 67]
                            , x = [1, 40]
                            , w = [1, 34]
                            , E = [1, 35]
                            , _ = [1, 36]
                            , S = [1, 37]
                            , k = [1, 41]
                            , M = [1, 42]
                            , C = [1, 43]
                            , I = [1, 44]
                            , T = [1, 45]
                            , P = [1, 46]
                            , A = [1, 47]
                            , L = [1, 48]
                            , O = [1, 49]
                            , D = [1, 50]
                            , q = [1, 51]
                            , N = [1, 52]
                            , F = [1, 17]
                            , R = [1, 53]
                            , j = [1, 54]
                            , B = [1, 55]
                            , V = [1, 56]
                            , U = [1, 57]
                            , G = [5, 11, 12, 13, 17, 23, 24]
                            , z = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81]
                            , H = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 76, 77, 78, 79, 81]
                            , W = [1, 75]
                            , Y = [5, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 24, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81]
                            , $ = {
                                trace: function () { },
                                yy: {},
                                symbols_: {
                                    error: 2,
                                    sentence: 3,
                                    group: 4,
                                    EOF: 5,
                                    element: 6,
                                    index_element: 7,
                                    modified_expression: 8,
                                    radical: 9,
                                    OPEN_MODEXP: 10,
                                    MODEXP_UNDER: 11,
                                    MODEXP_OVER: 12,
                                    CLOSE_MODEXP: 13,
                                    RADICAL_INDEX: 14,
                                    index_group: 15,
                                    OPEN_RADICAL: 16,
                                    CLOSE_RADICAL: 17,
                                    level: 18,
                                    LEVEL: 19,
                                    BASELINE: 20,
                                    frac: 21,
                                    OPEN_FRAC: 22,
                                    SLASH: 23,
                                    CLOSE_FRAC: 24,
                                    subscript_head: 25,
                                    primes: 26,
                                    number: 27,
                                    atom: 28,
                                    command: 29,
                                    greek: 30,
                                    letter: 31,
                                    comma: 32,
                                    period: 33,
                                    space: 34,
                                    operation: 35,
                                    comparison: 36,
                                    level_with_comparison: 37,
                                    ellipsis: 38,
                                    colon: 39,
                                    infinity: 40,
                                    integral: 41,
                                    factorial: 42,
                                    ampersand: 43,
                                    question_mark: 44,
                                    bracket: 45,
                                    ",": 46,
                                    ".": 47,
                                    "[": 48,
                                    "{": 49,
                                    "(": 50,
                                    "]": 51,
                                    "}": 52,
                                    ")": 53,
                                    LANGLE: 54,
                                    RANGLE: 55,
                                    PIPE: 56,
                                    DOUBLE_PIPE: 57,
                                    SPACE: 58,
                                    COMMAND: 59,
                                    GREEK: 60,
                                    LETTER: 61,
                                    CAPITAL_LETTER: 62,
                                    "+": 63,
                                    "-": 64,
                                    CDOT: 65,
                                    TIMES: 66,
                                    "*": 67,
                                    "/": 68,
                                    DIV: 69,
                                    PERCENT: 70,
                                    COMPARISON: 71,
                                    LEVEL_WITH_COMPARISON: 72,
                                    ELLIPSIS: 73,
                                    COLON: 74,
                                    NUMBER: 75,
                                    INFINITY: 76,
                                    INTEGRAL: 77,
                                    FACTORIAL: 78,
                                    "&": 79,
                                    PRIMES: 80,
                                    "?": 81,
                                    $accept: 0,
                                    $end: 1
                                },
                                terminals_: {
                                    2: "error",
                                    5: "EOF",
                                    10: "OPEN_MODEXP",
                                    11: "MODEXP_UNDER",
                                    12: "MODEXP_OVER",
                                    13: "CLOSE_MODEXP",
                                    14: "RADICAL_INDEX",
                                    16: "OPEN_RADICAL",
                                    17: "CLOSE_RADICAL",
                                    19: "LEVEL",
                                    20: "BASELINE",
                                    22: "OPEN_FRAC",
                                    23: "SLASH",
                                    24: "CLOSE_FRAC",
                                    46: ",",
                                    47: ".",
                                    48: "[",
                                    49: "{",
                                    50: "(",
                                    51: "]",
                                    52: "}",
                                    53: ")",
                                    54: "LANGLE",
                                    55: "RANGLE",
                                    56: "PIPE",
                                    57: "DOUBLE_PIPE",
                                    58: "SPACE",
                                    59: "COMMAND",
                                    60: "GREEK",
                                    61: "LETTER",
                                    62: "CAPITAL_LETTER",
                                    63: "+",
                                    64: "-",
                                    65: "CDOT",
                                    66: "TIMES",
                                    67: "*",
                                    68: "/",
                                    69: "DIV",
                                    70: "PERCENT",
                                    71: "COMPARISON",
                                    72: "LEVEL_WITH_COMPARISON",
                                    73: "ELLIPSIS",
                                    74: "COLON",
                                    75: "NUMBER",
                                    76: "INFINITY",
                                    77: "INTEGRAL",
                                    78: "FACTORIAL",
                                    79: "&",
                                    80: "PRIMES",
                                    81: "?"
                                },
                                productions_: [0, [3, 2], [3, 1], [4, 2], [4, 1], [6, 1], [6, 1], [6, 1], [8, 7], [8, 6], [8, 5], [8, 6], [8, 5], [8, 5], [8, 4], [8, 3], [8, 2], [9, 5], [9, 4], [9, 4], [9, 3], [9, 3], [9, 2], [18, 1], [18, 1], [21, 5], [21, 4], [21, 4], [21, 3], [15, 2], [15, 1], [7, 3], [7, 2], [7, 2], [7, 2], [7, 2], [7, 1], [7, 1], [7, 1], [25, 1], [25, 1], [25, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [28, 1], [32, 1], [33, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [45, 1], [34, 1], [29, 1], [30, 1], [31, 1], [31, 1], [35, 1], [35, 1], [35, 1], [35, 1], [35, 1], [35, 1], [35, 1], [35, 1], [36, 1], [37, 1], [38, 1], [39, 1], [27, 1], [40, 1], [41, 1], [42, 1], [43, 1], [26, 1], [44, 1]],
                                performAction: function (e, t, n, r, i, o, s) {
                                    var a = o.length - 1;
                                    switch (i) {
                                        case 1:
                                            return o[a - 1];
                                        case 2:
                                            return r.group();
                                        case 3:
                                        case 29:
                                        case 33:
                                        case 34:
                                        case 35:
                                            this.$ = r.group(o[a - 1], o[a]);
                                            break;
                                        case 4:
                                        case 30:
                                            this.$ = r.group(o[a]);
                                            break;
                                        case 8:
                                            this.$ = r.modified_expression(o[a - 5], o[a - 3], o[a - 1]);
                                            break;
                                        case 9:
                                            this.$ = r.modified_expression(o[a - 4], o[a - 2]);
                                            break;
                                        case 10:
                                            this.$ = r.modified_expression(o[a - 3], o[a - 1]);
                                            break;
                                        case 11:
                                            this.$ = r.modified_expression(o[a - 4], r.group(), o[a - 1]);
                                            break;
                                        case 12:
                                            this.$ = r.modified_expression(o[a - 3], r.group(), o[a - 1]);
                                            break;
                                        case 13:
                                            this.$ = r.modified_expression(o[a - 3], r.group(), r.group());
                                            break;
                                        case 14:
                                            this.$ = r.modified_expression(o[a - 2], r.group());
                                            break;
                                        case 15:
                                            this.$ = r.modified_expression(o[a - 1]);
                                            break;
                                        case 16:
                                            this.$ = r.modified_expression(r.group());
                                            break;
                                        case 17:
                                            this.$ = r.radical(o[a - 1], o[a - 3]);
                                            break;
                                        case 18:
                                            this.$ = r.radical(o[a - 1], r.group());
                                            break;
                                        case 19:
                                            this.$ = r.radical(r.group(), o[a - 2]);
                                            break;
                                        case 20:
                                            this.$ = r.radical(r.group(), r.group());
                                            break;
                                        case 21:
                                            this.$ = r.radical(o[a - 1]);
                                            break;
                                        case 22:
                                            this.$ = r.radical(r.group());
                                            break;
                                        case 23:
                                            this.$ = r.level(o[a]);
                                            break;
                                        case 24:
                                            this.$ = r.baseline();
                                            break;
                                        case 25:
                                            this.$ = r.fraction(o[a - 3], o[a - 1]);
                                            break;
                                        case 26:
                                            this.$ = r.fraction(o[a - 2], r.group());
                                            break;
                                        case 27:
                                            this.$ = r.fraction(r.group(), o[a - 1]);
                                            break;
                                        case 28:
                                            this.$ = r.fraction(r.group(), r.group());
                                            break;
                                        case 31:
                                            this.$ = r.group(r.simple_subscript(o[a - 2], o[a]), o[a - 1]);
                                            break;
                                        case 32:
                                            this.$ = r.simple_subscript(o[a - 1], o[a]);
                                            break;
                                        case 58:
                                            this.$ = r.terminal(",");
                                            break;
                                        case 59:
                                            this.$ = r.terminal(".");
                                            break;
                                        case 60:
                                            this.$ = r.terminal("[");
                                            break;
                                        case 61:
                                            this.$ = r.terminal("\\{");
                                            break;
                                        case 62:
                                            this.$ = r.terminal("(");
                                            break;
                                        case 63:
                                            this.$ = r.terminal("]");
                                            break;
                                        case 64:
                                            this.$ = r.terminal("\\}");
                                            break;
                                        case 65:
                                            this.$ = r.terminal(")");
                                            break;
                                        case 66:
                                            this.$ = r.terminal("\\langle ");
                                            break;
                                        case 67:
                                            this.$ = r.terminal("\\rangle ");
                                            break;
                                        case 68:
                                            this.$ = r.terminal("|");
                                            break;
                                        case 69:
                                            this.$ = r.terminal("\\|");
                                            break;
                                        case 70:
                                            this.$ = r.terminal(" ");
                                            break;
                                        case 71:
                                            this.$ = r.command(o[a].toLowerCase());
                                            break;
                                        case 72:
                                            this.$ = r.terminal(r.greek(o[a]));
                                            break;
                                        case 73:
                                            this.$ = r.terminal(o[a].toLowerCase());
                                            break;
                                        case 74:
                                            this.$ = r.terminal(o[a].toUpperCase());
                                            break;
                                        case 75:
                                            this.$ = r.terminal("+");
                                            break;
                                        case 76:
                                            this.$ = r.terminal("-");
                                            break;
                                        case 77:
                                            this.$ = r.terminal("\\cdot ");
                                            break;
                                        case 78:
                                            this.$ = r.terminal("\\times ");
                                            break;
                                        case 79:
                                            this.$ = r.terminal("*");
                                            break;
                                        case 80:
                                            this.$ = r.terminal("/");
                                            break;
                                        case 81:
                                            this.$ = r.terminal("\\div ");
                                            break;
                                        case 82:
                                            this.$ = r.terminal("\\%");
                                            break;
                                        case 83:
                                            this.$ = r.comparison(o[a].trim());
                                            break;
                                        case 84:
                                            this.$ = r.level_with_comparison(o[a].trim());
                                            break;
                                        case 85:
                                            this.$ = r.terminal("\\ldots ");
                                            break;
                                        case 86:
                                            this.$ = r.terminal(":");
                                            break;
                                        case 87:
                                            this.$ = r.terminal(o[a]);
                                            break;
                                        case 88:
                                            this.$ = r.terminal("\\infty ");
                                            break;
                                        case 89:
                                            this.$ = r.terminal("\\int ");
                                            break;
                                        case 90:
                                            this.$ = r.terminal("!");
                                            break;
                                        case 91:
                                            this.$ = r.terminal("\\&");
                                            break;
                                        case 92:
                                            this.$ = r.primes(o[a]);
                                            break;
                                        case 93:
                                            this.$ = r.terminal("?")
                                    }
                                },
                                table: [{
                                    3: 1,
                                    4: 2,
                                    5: [1, 3],
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    1: [3]
                                }, {
                                    5: [1, 71]
                                }, {
                                    1: [2, 2]
                                }, t(G, [2, 4], {
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    21: 32,
                                    18: 33,
                                    4: 72,
                                    10: n,
                                    14: r,
                                    16: i,
                                    19: o,
                                    20: s,
                                    22: a,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }), t(z, [2, 5]), t(z, [2, 6]), t(z, [2, 7]), t(H, [2, 36], {
                                    26: 73,
                                    27: 74,
                                    75: F,
                                    80: W
                                }), t(z, [2, 37], {
                                    26: 76,
                                    80: W
                                }), t(z, [2, 38], {
                                    26: 77,
                                    80: W
                                }), {
                                    4: 78,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    13: [1, 79],
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    7: 82,
                                    15: 80,
                                    16: [1, 81],
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    4: 83,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    17: [1, 84],
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(Y, [2, 39]), t(Y, [2, 40]), t(Y, [2, 41]), t(Y, [2, 87]), t(Y, [2, 42]), t(Y, [2, 43]), t(Y, [2, 44]), t(Y, [2, 45]), t(Y, [2, 46]), t(Y, [2, 47]), t(Y, [2, 48]), t(Y, [2, 49]), t(Y, [2, 50]), t(Y, [2, 51]), t(Y, [2, 52]), t(Y, [2, 53]), t(Y, [2, 54]), t(Y, [2, 55]), t(Y, [2, 56]), t(Y, [2, 57]), t(Y, [2, 71]), t(Y, [2, 72]), t(Y, [2, 73]), t(Y, [2, 74]), t(Y, [2, 58]), t(Y, [2, 59]), t(Y, [2, 70]), t(Y, [2, 75]), t(Y, [2, 76]), t(Y, [2, 77]), t(Y, [2, 78]), t(Y, [2, 79]), t(Y, [2, 80]), t(Y, [2, 81]), t(Y, [2, 82]), t(Y, [2, 83]), t(Y, [2, 84]), t(Y, [2, 85]), t(Y, [2, 86]), t(Y, [2, 88]), t(Y, [2, 89]), t(Y, [2, 90]), t(Y, [2, 91]), t(Y, [2, 93]), t(Y, [2, 60]), t(Y, [2, 61]), t(Y, [2, 62]), t(Y, [2, 63]), t(Y, [2, 64]), t(Y, [2, 65]), t(Y, [2, 66]), t(Y, [2, 67]), t(Y, [2, 68]), t(Y, [2, 69]), {
                                    4: 85,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    23: [1, 86],
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(Y, [2, 23]), t(Y, [2, 24]), {
                                    1: [2, 1]
                                }, t(G, [2, 3]), t(H, [2, 33], {
                                    27: 87,
                                    75: F
                                }), t(z, [2, 32]), t(z, [2, 92]), t(z, [2, 34]), t(z, [2, 35]), {
                                    11: [1, 88],
                                    12: [1, 89],
                                    13: [1, 90]
                                }, t(z, [2, 16]), {
                                    16: [1, 91]
                                }, {
                                    4: 92,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    17: [1, 93],
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    7: 82,
                                    15: 94,
                                    16: [2, 30],
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    17: [1, 95]
                                }, t(z, [2, 22]), {
                                    23: [1, 96]
                                }, {
                                    4: 97,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    24: [1, 98],
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(z, [2, 31]), {
                                    4: 99,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    12: [1, 100],
                                    13: [1, 101],
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    4: 102,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(z, [2, 15]), {
                                    4: 103,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    17: [1, 104],
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    17: [1, 105]
                                }, t(z, [2, 20]), {
                                    16: [2, 29]
                                }, t(z, [2, 21]), {
                                    4: 106,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    24: [1, 107],
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, {
                                    24: [1, 108]
                                }, t(Y, [2, 28]), {
                                    12: [1, 109],
                                    13: [1, 110]
                                }, {
                                    4: 111,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    13: [1, 112],
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(z, [2, 14]), {
                                    13: [1, 113]
                                }, {
                                    17: [1, 114]
                                }, t(z, [2, 19]), t(z, [2, 18]), {
                                    24: [1, 115]
                                }, t(Y, [2, 26]), t(Y, [2, 27]), {
                                    4: 116,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    13: [1, 117],
                                    14: r,
                                    16: i,
                                    18: 33,
                                    19: o,
                                    20: s,
                                    21: 32,
                                    22: a,
                                    25: 8,
                                    27: 9,
                                    28: 10,
                                    29: 14,
                                    30: 15,
                                    31: 16,
                                    32: 18,
                                    33: 19,
                                    34: 20,
                                    35: 21,
                                    36: 22,
                                    37: 23,
                                    38: 24,
                                    39: 25,
                                    40: 26,
                                    41: 27,
                                    42: 28,
                                    43: 29,
                                    44: 30,
                                    45: 31,
                                    46: c,
                                    47: l,
                                    48: u,
                                    49: d,
                                    50: p,
                                    51: h,
                                    52: f,
                                    53: m,
                                    54: g,
                                    55: y,
                                    56: v,
                                    57: b,
                                    58: x,
                                    59: w,
                                    60: E,
                                    61: _,
                                    62: S,
                                    63: k,
                                    64: M,
                                    65: C,
                                    66: I,
                                    67: T,
                                    68: P,
                                    69: A,
                                    70: L,
                                    71: O,
                                    72: D,
                                    73: q,
                                    74: N,
                                    75: F,
                                    76: R,
                                    77: j,
                                    78: B,
                                    79: V,
                                    81: U
                                }, t(z, [2, 10]), {
                                    13: [1, 118]
                                }, t(z, [2, 13]), t(z, [2, 12]), t(z, [2, 17]), t(Y, [2, 25]), {
                                    13: [1, 119]
                                }, t(z, [2, 9]), t(z, [2, 11]), t(z, [2, 8])],
                                defaultActions: {
                                    3: [2, 2],
                                    71: [2, 1],
                                    94: [2, 29]
                                },
                                parseError: function (e, t) {
                                    if (!t.recoverable) {
                                        var n = new Error(e);
                                        throw n.hash = t,
                                        n
                                    }
                                    this.trace(e)
                                },
                                parse: function (e) {
                                    var t = this
                                        , n = [0]
                                        , r = [null]
                                        , i = []
                                        , o = this.table
                                        , s = ""
                                        , a = 0
                                        , c = 0
                                        , l = 0
                                        , u = 2
                                        , d = 1
                                        , p = i.slice.call(arguments, 1)
                                        , h = Object.create(this.lexer)
                                        , f = {
                                            yy: {}
                                        };
                                    for (var m in this.yy)
                                        Object.prototype.hasOwnProperty.call(this.yy, m) && (f.yy[m] = this.yy[m]);
                                    h.setInput(e, f.yy),
                                        f.yy.lexer = h,
                                        f.yy.parser = this,
                                        "undefined" == typeof h.yylloc && (h.yylloc = {});
                                    var g = h.yylloc;
                                    i.push(g);
                                    var y = h.options && h.options.ranges;
                                    "function" == typeof f.yy.parseError ? this.parseError = f.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                    for (var v, b, x, w, E, _, S, k, M, C = function () {
                                        var e;
                                        return e = h.lex() || d,
                                            "number" != typeof e && (e = t.symbols_[e] || e),
                                            e
                                    }, I = {}; ;) {
                                        if (x = n[n.length - 1],
                                            this.defaultActions[x] ? w = this.defaultActions[x] : (null !== v && "undefined" != typeof v || (v = C()),
                                                w = o[x] && o[x][v]),
                                            "undefined" == typeof w || !w.length || !w[0]) {
                                            var T = "";
                                            M = [];
                                            for (_ in o[x])
                                                this.terminals_[_] && _ > u && M.push("'" + this.terminals_[_] + "'");
                                            T = h.showPosition ? "Parse error on line " + (a + 1) + ":\n" + h.showPosition() + "\nExpecting " + M.join(", ") + ", got '" + (this.terminals_[v] || v) + "'" : "Parse error on line " + (a + 1) + ": Unexpected " + (v == d ? "end of input" : "'" + (this.terminals_[v] || v) + "'"),
                                                this.parseError(T, {
                                                    text: h.match,
                                                    token: this.terminals_[v] || v,
                                                    line: h.yylineno,
                                                    loc: g,
                                                    expected: M
                                                })
                                        }
                                        if (w[0] instanceof Array && w.length > 1)
                                            throw new Error("Parse Error: multiple actions possible at state: " + x + ", token: " + v);
                                        switch (w[0]) {
                                            case 1:
                                                n.push(v),
                                                    r.push(h.yytext),
                                                    i.push(h.yylloc),
                                                    n.push(w[1]),
                                                    v = null,
                                                    b ? (v = b,
                                                        b = null) : (c = h.yyleng,
                                                            s = h.yytext,
                                                            a = h.yylineno,
                                                            g = h.yylloc,
                                                            l > 0 && l--);
                                                break;
                                            case 2:
                                                if (S = this.productions_[w[1]][1],
                                                    I.$ = r[r.length - S],
                                                    I._$ = {
                                                        first_line: i[i.length - (S || 1)].first_line,
                                                        last_line: i[i.length - 1].last_line,
                                                        first_column: i[i.length - (S || 1)].first_column,
                                                        last_column: i[i.length - 1].last_column
                                                    },
                                                    y && (I._$.range = [i[i.length - (S || 1)].range[0], i[i.length - 1].range[1]]),
                                                    E = this.performAction.apply(I, [s, c, a, f.yy, w[1], r, i].concat(p)),
                                                    "undefined" != typeof E)
                                                    return E;
                                                S && (n = n.slice(0, -1 * S * 2),
                                                    r = r.slice(0, -1 * S),
                                                    i = i.slice(0, -1 * S)),
                                                    n.push(this.productions_[w[1]][0]),
                                                    r.push(I.$),
                                                    i.push(I._$),
                                                    k = o[n[n.length - 2]][n[n.length - 1]],
                                                    n.push(k);
                                                break;
                                            case 3:
                                                return !0
                                        }
                                    }
                                    return !0
                                }
                            }
                            , K = function () {
                                var e = {
                                    EOF: 1,
                                    parseError: function (e, t) {
                                        if (!this.yy.parser)
                                            throw new Error(e);
                                        this.yy.parser.parseError(e, t)
                                    },
                                    setInput: function (e, t) {
                                        return this.yy = t || this.yy || {},
                                            this._input = e,
                                            this._more = this._backtrack = this.done = !1,
                                            this.yylineno = this.yyleng = 0,
                                            this.yytext = this.matched = this.match = "",
                                            this.conditionStack = ["INITIAL"],
                                            this.yylloc = {
                                                first_line: 1,
                                                first_column: 0,
                                                last_line: 1,
                                                last_column: 0
                                            },
                                            this.options.ranges && (this.yylloc.range = [0, 0]),
                                            this.offset = 0,
                                            this
                                    },
                                    input: function () {
                                        var e = this._input[0];
                                        this.yytext += e,
                                            this.yyleng++ ,
                                            this.offset++ ,
                                            this.match += e,
                                            this.matched += e;
                                        var t = e.match(/(?:\r\n?|\n).*/g);
                                        return t ? (this.yylineno++ ,
                                            this.yylloc.last_line++) : this.yylloc.last_column++ ,
                                            this.options.ranges && this.yylloc.range[1]++ ,
                                            this._input = this._input.slice(1),
                                            e
                                    },
                                    unput: function (e) {
                                        var t = e.length
                                            , n = e.split(/(?:\r\n?|\n)/g);
                                        this._input = e + this._input,
                                            this.yytext = this.yytext.substr(0, this.yytext.length - t),
                                            this.offset -= t;
                                        var r = this.match.split(/(?:\r\n?|\n)/g);
                                        this.match = this.match.substr(0, this.match.length - 1),
                                            this.matched = this.matched.substr(0, this.matched.length - 1),
                                            n.length - 1 && (this.yylineno -= n.length - 1);
                                        var i = this.yylloc.range;
                                        return this.yylloc = {
                                            first_line: this.yylloc.first_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.first_column,
                                            last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                        },
                                            this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]),
                                            this.yyleng = this.yytext.length,
                                            this
                                    },
                                    more: function () {
                                        return this._more = !0,
                                            this
                                    },
                                    reject: function () {
                                        return this.options.backtrack_lexer ? (this._backtrack = !0,
                                            this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    less: function (e) {
                                        this.unput(this.match.slice(e))
                                    },
                                    pastInput: function () {
                                        var e = this.matched.substr(0, this.matched.length - this.match.length);
                                        return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                    },
                                    upcomingInput: function () {
                                        var e = this.match;
                                        return e.length < 20 && (e += this._input.substr(0, 20 - e.length)),
                                            (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                    },
                                    showPosition: function () {
                                        var e = this.pastInput()
                                            , t = new Array(e.length + 1).join("-");
                                        return e + this.upcomingInput() + "\n" + t + "^"
                                    },
                                    test_match: function (e, t) {
                                        var n, r, i;
                                        if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        },
                                            this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))),
                                            r = e[0].match(/(?:\r\n?|\n).*/g),
                                            r && (this.yylineno += r.length),
                                            this.yylloc = {
                                                first_line: this.yylloc.last_line,
                                                last_line: this.yylineno + 1,
                                                first_column: this.yylloc.last_column,
                                                last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                            },
                                            this.yytext += e[0],
                                            this.match += e[0],
                                            this.matches = e,
                                            this.yyleng = this.yytext.length,
                                            this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]),
                                            this._more = !1,
                                            this._backtrack = !1,
                                            this._input = this._input.slice(e[0].length),
                                            this.matched += e[0],
                                            n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]),
                                            this.done && this._input && (this.done = !1),
                                            n)
                                            return n;
                                        if (this._backtrack) {
                                            for (var o in i)
                                                this[o] = i[o];
                                            return !1
                                        }
                                        return !1
                                    },
                                    next: function () {
                                        if (this.done)
                                            return this.EOF;
                                        this._input || (this.done = !0);
                                        var e, t, n, r;
                                        this._more || (this.yytext = "",
                                            this.match = "");
                                        for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                            if (n = this._input.match(this.rules[i[o]]),
                                                n && (!t || n[0].length > t[0].length)) {
                                                if (t = n,
                                                    r = o,
                                                    this.options.backtrack_lexer) {
                                                    if (e = this.test_match(n, i[o]),
                                                        e !== !1)
                                                        return e;
                                                    if (this._backtrack) {
                                                        t = !1;
                                                        continue
                                                    }
                                                    return !1
                                                }
                                                if (!this.options.flex)
                                                    break
                                            }
                                        return t ? (e = this.test_match(t, i[r]),
                                            e !== !1 && e) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    lex: function () {
                                        var e = this.next();
                                        return e ? e : this.lex()
                                    },
                                    begin: function (e) {
                                        this.conditionStack.push(e)
                                    },
                                    popState: function () {
                                        var e = this.conditionStack.length - 1;
                                        return e > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                    },
                                    _currentRules: function () {
                                        return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                    },
                                    topState: function (e) {
                                        return e = this.conditionStack.length - 1 - Math.abs(e || 0),
                                            e >= 0 ? this.conditionStack[e] : "INITIAL"
                                    },
                                    pushState: function (e) {
                                        this.begin(e)
                                    },
                                    stateStackSize: function () {
                                        return this.conditionStack.length
                                    },
                                    options: {},
                                    performAction: function (e, t, n, r) {
                                        switch (n) {
                                            case 0:
                                                return this.begin("modexp"),
                                                    10;
                                            case 1:
                                                return 20;
                                            case 2:
                                                return this.begin("modexp"),
                                                    10;
                                            case 3:
                                                return 11;
                                            case 4:
                                                return 12;
                                            case 5:
                                                return this.popState(),
                                                    13;
                                            case 6:
                                                return 63;
                                            case 7:
                                                return 64;
                                            case 8:
                                                return 65;
                                            case 9:
                                                return 66;
                                            case 10:
                                                return 67;
                                            case 11:
                                                return 68;
                                            case 12:
                                                return 69;
                                            case 13:
                                                return 54;
                                            case 14:
                                                return 48;
                                            case 15:
                                                return 49;
                                            case 16:
                                                return 50;
                                            case 17:
                                                return 55;
                                            case 18:
                                                return 51;
                                            case 19:
                                                return 52;
                                            case 20:
                                                return 53;
                                            case 21:
                                                return 57;
                                            case 22:
                                                return 56;
                                            case 23:
                                                return 74;
                                            case 24:
                                                return 70;
                                            case 25:
                                                return 72;
                                            case 26:
                                                return 72;
                                            case 27:
                                                return 72;
                                            case 28:
                                                return 72;
                                            case 29:
                                                return 72;
                                            case 30:
                                                return 72;
                                            case 31:
                                                return 72;
                                            case 32:
                                                return 72;
                                            case 33:
                                                return 71;
                                            case 34:
                                                return 72;
                                            case 35:
                                                return 72;
                                            case 36:
                                                return 71;
                                            case 37:
                                                return 71;
                                            case 38:
                                                return 71;
                                            case 39:
                                                return 71;
                                            case 40:
                                                return 71;
                                            case 41:
                                                return 71;
                                            case 42:
                                                return 71;
                                            case 43:
                                                return 71;
                                            case 44:
                                                return 71;
                                            case 45:
                                                return 73;
                                            case 46:
                                                return 19;
                                            case 47:
                                                return 47;
                                            case 48:
                                                return 20;
                                            case 49:
                                                return 80;
                                            case 50:
                                                return 60;
                                            case 51:
                                                return 14;
                                            case 52:
                                                return this.begin("radical"),
                                                    16;
                                            case 53:
                                                return this.popState(),
                                                    17;
                                            case 54:
                                                return 17;
                                            case 55:
                                                return 77;
                                            case 56:
                                                return 79;
                                            case 57:
                                                return 78;
                                            case 58:
                                                return 59;
                                            case 59:
                                                return 59;
                                            case 60:
                                                return t.yytext = this.matches[1],
                                                    75;
                                            case 61:
                                                return 22;
                                            case 62:
                                                return 23;
                                            case 63:
                                                return 24;
                                            case 64:
                                                return t.yytext = this.matches[1],
                                                    62;
                                            case 65:
                                                return 61;
                                            case 66:
                                                return 76;
                                            case 67:
                                                return 81;
                                            case 68:
                                                return 46;
                                            case 69:
                                                return 47;
                                            case 70:
                                                return 58;
                                            case 71:
                                                return 5
                                        }
                                    },
                                    rules: [/^(?:"(?=[^>\]]+%))/, /^(?:")/, /^(?:"(?=[^>\]]+\]|[^>\]]+%))/, /^(?:%)/, /^(?:<)/, /^(?:\])/, /^(?:[+])/, /^(?:[-])/, /^(?:[*])/, /^(?:[@][*])/, /^(?:[@][\#])/, /^(?:[_][\/])/, /^(?:[.][\/])/, /^(?:[.][.][(])/, /^(?:[@][(])/, /^(?:[.][(])/, /^(?:[(])/, /^(?:[.][.][)])/, /^(?:[@][)])/, /^(?:[.][)])/, /^(?:[)])/, /^(?:[\\][\\])/, /^(?:[\\])/, /^(?:[_][3])/, /^(?:[@][0])/, /^(?:[ ][\^;]+[.]K[ ])/, /^(?:[\^;]+[=])/, /^(?:[ ][\^;]+[\/][.]K[ ])/, /^(?:[ ][\^;]+["]K[:][ ])/, /^(?:[ ][\^;]+[.]1[:][ ])/, /^(?:[ ][\^;]+["]K[ ])/, /^(?:[ ][\^;]+[.]1[ ])/, /^(?:[ ][\^;]+[\/][$][L][ ])/, /^(?:[ ][.]K[ ])/, /^(?:[ ][\^;]+[\/]?[$][L][ ])/, /^(?:[ ][\^;]+[$]P[ ])/, /^(?:[=])/, /^(?:[ ][\/][.]K[ ])/, /^(?:[ ]["]K[:][ ])/, /^(?:[ ][.]1[:][ ])/, /^(?:[ ]["]K[ ])/, /^(?:[ ][.]1[ ])/, /^(?:[@][:])/, /^(?:[ ][\/]?[$][L][ ])/, /^(?:[ ][$]P[ ])/, /^(?:[ ]?['][']['][ ]?)/, /^(?:[\^;]+)/, /^(?:[.]["])/, /^(?:["])/, /^(?:[']+)/, /^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/, /^(?:[.]*[<])/, /^(?:[.]*[>])/, /^(?:[.]*\])/, /^(?:[.]*\])/, /^(?:!)/, /^(?:[_]&)/, /^(?:&)/, /^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/, /^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/, /^(?:#?(\d*\.?\d+))/, /^(?:[,]*[?])/, /^(?:[,]*[\/])/, /^(?:[,]*#)/, /^(?:[,]([A-Z]))/, /^(?:[A-Z])/, /^(?:[,][=])/, /^(?:[_][8])/, /^(?:[,][ ]?)/, /^(?:[.])/, /^(?:[ ])/, /^(?:$)/],
                                    conditions: {
                                        radical: {
                                            rules: [0, 1, 2, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71],
                                            inclusive: !0
                                        },
                                        modexp: {
                                            rules: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71],
                                            inclusive: !0
                                        },
                                        INITIAL: {
                                            rules: [2, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71],
                                            inclusive: !0
                                        }
                                    }
                                };
                                return e
                            }();
                        return $.lexer = K,
                            e.prototype = $,
                            $.Parser = e,
                            new e
                    }();
                    t.parser = i,
                        t.Parser = i.Parser,
                        t.parse = function () {
                            return i.parse.apply(i, arguments)
                        }
                        ,
                        t.main = function (r) {
                            r[1] || (console.log("Usage: " + r[0] + " FILE"),
                                e.exit(1));
                            var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                            return t.parser.parse(i)
                        }
                        ,
                        "undefined" != typeof r && n.c[n.s] === r && t.main(e.argv.slice(1))
                }
                ).call(t, n(1), n(8)(e))
            }
            , function (e, t, n) {
                (function (e, r) {
                    var i = function () {
                        function e() {
                            this.yy = {}
                        }
                        var t = function (e, t, n, r) {
                            for (n = n || {},
                                r = e.length; r--; n[e[r]] = t)
                                ;
                            return n
                        }
                            , n = [1, 15]
                            , r = [1, 16]
                            , i = [1, 17]
                            , o = [1, 36]
                            , s = [1, 18]
                            , a = [1, 37]
                            , c = [1, 38]
                            , l = [1, 14]
                            , u = [1, 46]
                            , d = [1, 47]
                            , p = [1, 39]
                            , h = [1, 40]
                            , f = [1, 41]
                            , m = [1, 56]
                            , g = [1, 42]
                            , y = [1, 43]
                            , v = [1, 44]
                            , b = [1, 45]
                            , x = [1, 54]
                            , w = [1, 55]
                            , E = [1, 57]
                            , _ = [1, 58]
                            , S = [1, 59]
                            , k = [1, 60]
                            , M = [1, 61]
                            , C = [1, 62]
                            , I = [1, 63]
                            , T = [1, 64]
                            , P = [1, 65]
                            , A = [1, 66]
                            , L = [1, 67]
                            , O = [1, 68]
                            , D = [1, 69]
                            , q = [1, 70]
                            , N = [1, 71]
                            , F = [1, 72]
                            , R = [1, 73]
                            , j = [1, 74]
                            , B = [1, 48]
                            , V = [1, 49]
                            , U = [1, 50]
                            , G = [1, 51]
                            , z = [1, 52]
                            , H = [1, 75]
                            , W = [1, 53]
                            , Y = [5, 14, 18, 19, 29, 52, 53, 54]
                            , $ = [5, 10, 13, 14, 15, 18, 19, 29, 52, 53, 54]
                            , K = [5, 10, 13, 14, 15, 17, 18, 19, 21, 23, 24, 28, 29, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86]
                            , X = [1, 83]
                            , Q = [1, 84]
                            , Z = [1, 85]
                            , J = [10, 13, 15, 17, 21, 23, 24, 28, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86]
                            , ee = {
                                trace: function () { },
                                yy: {},
                                symbols_: {
                                    error: 2,
                                    sentence: 3,
                                    group: 4,
                                    EOF: 5,
                                    expression_group: 6,
                                    delimited_expression: 7,
                                    level: 8,
                                    radical: 9,
                                    LEVEL: 10,
                                    basic_token: 11,
                                    bracketed_expression: 12,
                                    RADICAL_WITH_INDEX: 13,
                                    CLOSE_RADICAL: 14,
                                    RADICAL: 15,
                                    frac: 16,
                                    OPEN_FRAC: 17,
                                    OVER: 18,
                                    CLOSE_FRAC: 19,
                                    simple_frac: 20,
                                    NUMBER: 21,
                                    NUMBER_FRAC_DENOMINATOR: 22,
                                    NUMBER_FRAC_NUMERATOR_BAD: 23,
                                    NUMBER_FRAC_DENOMINATOR_BAD: 24,
                                    atom: 25,
                                    lbracket: 26,
                                    rbracket: 27,
                                    OPEN_GROUP: 28,
                                    CLOSE_GROUP: 29,
                                    command: 30,
                                    greek: 31,
                                    letter: 32,
                                    comma: 33,
                                    period: 34,
                                    colon: 35,
                                    infinity: 36,
                                    integral: 37,
                                    factorial: 38,
                                    ampersand: 39,
                                    question_mark: 40,
                                    bracket: 41,
                                    space: 42,
                                    operation: 43,
                                    comparison: 44,
                                    ellipsis: 45,
                                    primes: 46,
                                    ",": 47,
                                    ".": 48,
                                    "[": 49,
                                    "{": 50,
                                    "(": 51,
                                    "]": 52,
                                    "}": 53,
                                    ")": 54,
                                    SPACE: 55,
                                    COMMAND: 56,
                                    GREEK: 57,
                                    CAPITAL_LETTER: 58,
                                    LETTER: 59,
                                    PIPE: 60,
                                    DOUBLE_PIPE: 61,
                                    "+": 62,
                                    "-": 63,
                                    CDOT: 64,
                                    TIMES: 65,
                                    "*": 66,
                                    DIV: 67,
                                    SLASH: 68,
                                    PERCENT: 69,
                                    "=": 70,
                                    NEQ: 71,
                                    "<": 72,
                                    ">": 73,
                                    LEQ: 74,
                                    GEQ: 75,
                                    TILDE: 76,
                                    PARALLEL: 77,
                                    PERPENDICULAR: 78,
                                    ELLIPSIS: 79,
                                    COLON: 80,
                                    INFINITY: 81,
                                    INTEGRAL: 82,
                                    FACTORIAL: 83,
                                    "&": 84,
                                    PRIMES: 85,
                                    "?": 86,
                                    $accept: 0,
                                    $end: 1
                                },
                                terminals_: {
                                    2: "error",
                                    5: "EOF",
                                    10: "LEVEL",
                                    13: "RADICAL_WITH_INDEX",
                                    14: "CLOSE_RADICAL",
                                    15: "RADICAL",
                                    17: "OPEN_FRAC",
                                    18: "OVER",
                                    19: "CLOSE_FRAC",
                                    21: "NUMBER",
                                    22: "NUMBER_FRAC_DENOMINATOR",
                                    23: "NUMBER_FRAC_NUMERATOR_BAD",
                                    24: "NUMBER_FRAC_DENOMINATOR_BAD",
                                    28: "OPEN_GROUP",
                                    29: "CLOSE_GROUP",
                                    47: ",",
                                    48: ".",
                                    49: "[",
                                    50: "{",
                                    51: "(",
                                    52: "]",
                                    53: "}",
                                    54: ")",
                                    55: "SPACE",
                                    56: "COMMAND",
                                    57: "GREEK",
                                    58: "CAPITAL_LETTER",
                                    59: "LETTER",
                                    60: "PIPE",
                                    61: "DOUBLE_PIPE",
                                    62: "+",
                                    63: "-",
                                    64: "CDOT",
                                    65: "TIMES",
                                    66: "*",
                                    67: "DIV",
                                    68: "SLASH",
                                    69: "PERCENT",
                                    70: "=",
                                    71: "NEQ",
                                    72: "<",
                                    73: ">",
                                    74: "LEQ",
                                    75: "GEQ",
                                    76: "TILDE",
                                    77: "PARALLEL",
                                    78: "PERPENDICULAR",
                                    79: "ELLIPSIS",
                                    80: "COLON",
                                    81: "INFINITY",
                                    82: "INTEGRAL",
                                    83: "FACTORIAL",
                                    84: "&",
                                    85: "PRIMES",
                                    86: "?"
                                },
                                productions_: [0, [3, 2], [3, 1], [4, 3], [4, 2], [4, 1], [4, 2], [4, 1], [7, 1], [7, 1], [8, 2], [8, 2], [8, 2], [9, 4], [9, 3], [9, 3], [9, 2], [9, 4], [9, 3], [9, 2], [16, 5], [16, 4], [16, 4], [16, 3], [16, 2], [20, 2], [20, 1], [20, 1], [11, 1], [11, 1], [11, 1], [6, 2], [6, 2], [6, 1], [6, 1], [12, 3], [12, 2], [12, 3], [12, 2], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [25, 1], [33, 1], [34, 1], [26, 1], [26, 1], [26, 1], [27, 1], [27, 1], [27, 1], [42, 1], [30, 1], [31, 1], [32, 1], [32, 1], [41, 1], [41, 1], [43, 1], [43, 1], [43, 1], [43, 1], [43, 1], [43, 1], [43, 1], [43, 1], [44, 1], [44, 1], [44, 1], [44, 1], [44, 1], [44, 1], [44, 1], [44, 1], [44, 1], [45, 1], [35, 1], [36, 1], [37, 1], [38, 1], [39, 1], [46, 1], [40, 1]],
                                performAction: function (e, t, n, r, i, o, s) {
                                    var a = o.length - 1;
                                    switch (i) {
                                        case 1:
                                            return o[a - 1];
                                        case 2:
                                            return r.group();
                                        case 3:
                                        case 35:
                                            this.$ = r.group(o[a - 2], o[a - 1], o[a]);
                                            break;
                                        case 4:
                                        case 6:
                                        case 31:
                                        case 32:
                                        case 36:
                                            this.$ = r.group(o[a - 1], o[a]);
                                            break;
                                        case 5:
                                        case 7:
                                        case 33:
                                        case 34:
                                            this.$ = r.group(o[a]);
                                            break;
                                        case 10:
                                        case 11:
                                        case 12:
                                            this.$ = r.basic_level(o[a - 1], r.group(o[a]));
                                            break;
                                        case 13:
                                        case 17:
                                            this.$ = r.radical(o[a - 1], r.group(o[a - 2]));
                                            break;
                                        case 14:
                                        case 15:
                                            this.$ = r.radical(r.group(), r.group(o[a - 1]));
                                            break;
                                        case 16:
                                            this.$ = r.radical(r.group(), r.group());
                                            break;
                                        case 18:
                                            this.$ = r.radical(o[a - 1]);
                                            break;
                                        case 19:
                                            this.$ = r.radical(r.group());
                                            break;
                                        case 20:
                                            this.$ = r.fraction(o[a - 3], o[a - 1]);
                                            break;
                                        case 21:
                                            this.$ = r.fraction(o[a - 2], r.group());
                                            break;
                                        case 22:
                                            this.$ = r.fraction(r.group(), o[a - 1]);
                                            break;
                                        case 23:
                                        case 24:
                                            this.$ = r.fraction(r.group(), r.group());
                                            break;
                                        case 25:
                                            this.$ = r.fraction(r.group(r.terminal(r.to_number(o[a - 1]))), r.group(r.terminal(r.to_number(o[a]))));
                                            break;
                                        case 26:
                                            this.$ = r.fraction(r.group(r.terminal(r.to_number(o[a]))), r.group());
                                            break;
                                        case 27:
                                            this.$ = r.fraction(r.group(), r.group(r.terminal(r.to_number(o[$01]))));
                                            break;
                                        case 37:
                                            this.$ = r.group(o[a - 1]);
                                            break;
                                        case 38:
                                            this.$ = r.group();
                                            break;
                                        case 39:
                                            this.$ = r.terminal(r.to_number(o[a]));
                                            break;
                                        case 57:
                                            this.$ = r.terminal(",");
                                            break;
                                        case 58:
                                            this.$ = r.terminal(".");
                                            break;
                                        case 59:
                                            this.$ = r.terminal("[");
                                            break;
                                        case 60:
                                            this.$ = r.terminal("\\{");
                                            break;
                                        case 61:
                                            this.$ = r.terminal("(");
                                            break;
                                        case 62:
                                            this.$ = r.terminal("]");
                                            break;
                                        case 63:
                                            this.$ = r.terminal("\\}");
                                            break;
                                        case 64:
                                            this.$ = r.terminal(")");
                                            break;
                                        case 65:
                                            this.$ = r.terminal(" ");
                                            break;
                                        case 66:
                                            this.$ = r.command("\\" + o[a].trim().toLowerCase());
                                            break;
                                        case 67:
                                            this.$ = r.terminal(r.greek(o[a]));
                                            break;
                                        case 68:
                                            this.$ = r.terminal(o[a].toUpperCase());
                                            break;
                                        case 69:
                                            this.$ = r.terminal(o[a].toLowerCase());
                                            break;
                                        case 70:
                                            this.$ = r.terminal("|");
                                            break;
                                        case 71:
                                            this.$ = r.terminal("\\|");
                                            break;
                                        case 72:
                                            this.$ = r.terminal("+");
                                            break;
                                        case 73:
                                            this.$ = r.terminal("-");
                                            break;
                                        case 74:
                                            this.$ = r.terminal("\\cdot ");
                                            break;
                                        case 75:
                                            this.$ = r.terminal("\\times ");
                                            break;
                                        case 76:
                                            this.$ = r.terminal("*");
                                            break;
                                        case 77:
                                            this.$ = r.terminal("\\div ");
                                            break;
                                        case 78:
                                            this.$ = r.terminal("/");
                                            break;
                                        case 79:
                                            this.$ = r.terminal("\\%");
                                            break;
                                        case 80:
                                            this.$ = r.terminal("=");
                                            break;
                                        case 81:
                                            this.$ = r.terminal("\\neq ");
                                            break;
                                        case 82:
                                            this.$ = r.terminal("<");
                                            break;
                                        case 83:
                                            this.$ = r.terminal(">");
                                            break;
                                        case 84:
                                            this.$ = r.terminal("\\leq ");
                                            break;
                                        case 85:
                                            this.$ = r.terminal("\\geq ");
                                            break;
                                        case 86:
                                            this.$ = r.terminal("\\sim ");
                                            break;
                                        case 87:
                                            this.$ = r.terminal("\\parallel ");
                                            break;
                                        case 88:
                                            this.$ = r.terminal("\\perp ");
                                            break;
                                        case 89:
                                            this.$ = r.terminal("\\ldots ");
                                            break;
                                        case 90:
                                            this.$ = r.terminal(":");
                                            break;
                                        case 91:
                                            this.$ = r.terminal("\\infty ");
                                            break;
                                        case 92:
                                            this.$ = r.terminal("\\int ");
                                            break;
                                        case 93:
                                            this.$ = r.terminal("!");
                                            break;
                                        case 94:
                                            this.$ = r.terminal("\\&");
                                            break;
                                        case 95:
                                            this.$ = r.primes(o[a]);
                                            break;
                                        case 96:
                                            this.$ = r.terminal("?")
                                    }
                                },
                                table: [{
                                    3: 1,
                                    4: 2,
                                    5: [1, 3],
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    1: [3]
                                }, {
                                    5: [1, 76]
                                }, {
                                    1: [2, 2]
                                }, t(Y, [2, 5], {
                                    8: 8,
                                    9: 9,
                                    7: 77,
                                    10: n,
                                    13: r,
                                    15: i
                                }), t(Y, [2, 7], {
                                    6: 4,
                                    7: 5,
                                    11: 6,
                                    12: 7,
                                    8: 8,
                                    9: 9,
                                    25: 10,
                                    16: 11,
                                    20: 12,
                                    26: 13,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    4: 78,
                                    10: n,
                                    13: r,
                                    15: i,
                                    17: o,
                                    21: s,
                                    23: a,
                                    24: c,
                                    28: l,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }), t($, [2, 33], {
                                    11: 6,
                                    12: 7,
                                    25: 10,
                                    16: 11,
                                    20: 12,
                                    26: 13,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    6: 79,
                                    17: o,
                                    21: s,
                                    23: a,
                                    24: c,
                                    28: l,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }), t($, [2, 34], {
                                    11: 6,
                                    12: 7,
                                    25: 10,
                                    16: 11,
                                    20: 12,
                                    26: 13,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    6: 80,
                                    17: o,
                                    21: s,
                                    23: a,
                                    24: c,
                                    28: l,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }), t(K, [2, 8]), t(K, [2, 9]), t(K, [2, 28]), t(K, [2, 29]), t(K, [2, 30]), {
                                    4: 81,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    27: 82,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    52: X,
                                    53: Q,
                                    54: Z,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    4: 86,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    29: [1, 87],
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    9: 90,
                                    11: 88,
                                    12: 89,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    11: 91,
                                    12: 92,
                                    14: [1, 93],
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    4: 94,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    14: [1, 95],
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, t(K, [2, 39], {
                                    22: [1, 96]
                                }), t(K, [2, 40]), t(K, [2, 41]), t(K, [2, 42]), t(K, [2, 43]), t(K, [2, 44]), t(K, [2, 45]), t(K, [2, 46]), t(K, [2, 47]), t(K, [2, 48]), t(K, [2, 49]), t(K, [2, 50]), t(K, [2, 51]), t(K, [2, 52]), t(K, [2, 53]), t(K, [2, 54]), t(K, [2, 55]), t(K, [2, 56]), {
                                    4: 97,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    18: [1, 98],
                                    19: [1, 99],
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, t(K, [2, 26]), t(K, [2, 27]), t(J, [2, 59]), t(J, [2, 60]), t(J, [2, 61]), t(K, [2, 66]), t(K, [2, 67]), t(K, [2, 68]), t(K, [2, 69]), t(K, [2, 57]), t(K, [2, 58]), t(K, [2, 90]), t(K, [2, 91]), t(K, [2, 92]), t(K, [2, 93]), t(K, [2, 94]), t(K, [2, 96]), t(K, [2, 70]), t(K, [2, 71]), t(K, [2, 65]), t(K, [2, 72]), t(K, [2, 73]), t(K, [2, 74]), t(K, [2, 75]), t(K, [2, 76]), t(K, [2, 77]), t(K, [2, 78]), t(K, [2, 79]), t(K, [2, 80]), t(K, [2, 81]), t(K, [2, 82]), t(K, [2, 83]), t(K, [2, 84]), t(K, [2, 85]), t(K, [2, 86]), t(K, [2, 87]), t(K, [2, 88]), t(K, [2, 89]), t(K, [2, 95]), {
                                    1: [2, 1]
                                }, t(Y, [2, 4], {
                                    6: 4,
                                    7: 5,
                                    11: 6,
                                    12: 7,
                                    8: 8,
                                    9: 9,
                                    25: 10,
                                    16: 11,
                                    20: 12,
                                    26: 13,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    4: 100,
                                    10: n,
                                    13: r,
                                    15: i,
                                    17: o,
                                    21: s,
                                    23: a,
                                    24: c,
                                    28: l,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }), t(Y, [2, 6]), t($, [2, 31]), t($, [2, 32]), {
                                    27: 101,
                                    52: X,
                                    53: Q,
                                    54: Z
                                }, t(K, [2, 36]), t(K, [2, 62]), t(K, [2, 63]), t(K, [2, 64]), {
                                    29: [1, 102]
                                }, t(K, [2, 38]), t(K, [2, 10]), t(K, [2, 11]), t(K, [2, 12]), {
                                    4: 103,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    14: [1, 104],
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    4: 106,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    14: [1, 105],
                                    15: i,
                                    16: 11,
                                    17: o,
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, t(K, [2, 16]), {
                                    14: [1, 107]
                                }, t(K, [2, 19]), t(K, [2, 25]), {
                                    18: [1, 108]
                                }, {
                                    4: 109,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    19: [1, 110],
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, t(K, [2, 24]), t(Y, [2, 3]), t(K, [2, 35]), t(K, [2, 37]), {
                                    14: [1, 111]
                                }, t(K, [2, 15]), t(K, [2, 14]), {
                                    14: [1, 112]
                                }, t(K, [2, 18]), {
                                    4: 113,
                                    6: 4,
                                    7: 5,
                                    8: 8,
                                    9: 9,
                                    10: n,
                                    11: 6,
                                    12: 7,
                                    13: r,
                                    15: i,
                                    16: 11,
                                    17: o,
                                    19: [1, 114],
                                    20: 12,
                                    21: s,
                                    23: a,
                                    24: c,
                                    25: 10,
                                    26: 13,
                                    28: l,
                                    30: 19,
                                    31: 20,
                                    32: 21,
                                    33: 22,
                                    34: 23,
                                    35: 24,
                                    36: 25,
                                    37: 26,
                                    38: 27,
                                    39: 28,
                                    40: 29,
                                    41: 30,
                                    42: 31,
                                    43: 32,
                                    44: 33,
                                    45: 34,
                                    46: 35,
                                    47: u,
                                    48: d,
                                    49: p,
                                    50: h,
                                    51: f,
                                    55: m,
                                    56: g,
                                    57: y,
                                    58: v,
                                    59: b,
                                    60: x,
                                    61: w,
                                    62: E,
                                    63: _,
                                    64: S,
                                    65: k,
                                    66: M,
                                    67: C,
                                    68: I,
                                    69: T,
                                    70: P,
                                    71: A,
                                    72: L,
                                    73: O,
                                    74: D,
                                    75: q,
                                    76: N,
                                    77: F,
                                    78: R,
                                    79: j,
                                    80: B,
                                    81: V,
                                    82: U,
                                    83: G,
                                    84: z,
                                    85: H,
                                    86: W
                                }, {
                                    19: [1, 115]
                                }, t(K, [2, 23]), t(K, [2, 13]), t(K, [2, 17]), {
                                    19: [1, 116]
                                }, t(K, [2, 21]), t(K, [2, 22]), t(K, [2, 20])],
                                defaultActions: {
                                    3: [2, 2],
                                    76: [2, 1]
                                },
                                parseError: function (e, t) {
                                    if (!t.recoverable) {
                                        var n = new Error(e);
                                        throw n.hash = t,
                                        n
                                    }
                                    this.trace(e)
                                },
                                parse: function (e) {
                                    var t = this
                                        , n = [0]
                                        , r = [null]
                                        , i = []
                                        , o = this.table
                                        , s = ""
                                        , a = 0
                                        , c = 0
                                        , l = 0
                                        , u = 2
                                        , d = 1
                                        , p = i.slice.call(arguments, 1)
                                        , h = Object.create(this.lexer)
                                        , f = {
                                            yy: {}
                                        };
                                    for (var m in this.yy)
                                        Object.prototype.hasOwnProperty.call(this.yy, m) && (f.yy[m] = this.yy[m]);
                                    h.setInput(e, f.yy),
                                        f.yy.lexer = h,
                                        f.yy.parser = this,
                                        "undefined" == typeof h.yylloc && (h.yylloc = {});
                                    var g = h.yylloc;
                                    i.push(g);
                                    var y = h.options && h.options.ranges;
                                    "function" == typeof f.yy.parseError ? this.parseError = f.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                    for (var v, b, x, w, E, _, S, k, M, C = function () {
                                        var e;
                                        return e = h.lex() || d,
                                            "number" != typeof e && (e = t.symbols_[e] || e),
                                            e
                                    }, I = {}; ;) {
                                        if (x = n[n.length - 1],
                                            this.defaultActions[x] ? w = this.defaultActions[x] : (null !== v && "undefined" != typeof v || (v = C()),
                                                w = o[x] && o[x][v]),
                                            "undefined" == typeof w || !w.length || !w[0]) {
                                            var T = "";
                                            M = [];
                                            for (_ in o[x])
                                                this.terminals_[_] && _ > u && M.push("'" + this.terminals_[_] + "'");
                                            T = h.showPosition ? "Parse error on line " + (a + 1) + ":\n" + h.showPosition() + "\nExpecting " + M.join(", ") + ", got '" + (this.terminals_[v] || v) + "'" : "Parse error on line " + (a + 1) + ": Unexpected " + (v == d ? "end of input" : "'" + (this.terminals_[v] || v) + "'"),
                                                this.parseError(T, {
                                                    text: h.match,
                                                    token: this.terminals_[v] || v,
                                                    line: h.yylineno,
                                                    loc: g,
                                                    expected: M
                                                })
                                        }
                                        if (w[0] instanceof Array && w.length > 1)
                                            throw new Error("Parse Error: multiple actions possible at state: " + x + ", token: " + v);
                                        switch (w[0]) {
                                            case 1:
                                                n.push(v),
                                                    r.push(h.yytext),
                                                    i.push(h.yylloc),
                                                    n.push(w[1]),
                                                    v = null,
                                                    b ? (v = b,
                                                        b = null) : (c = h.yyleng,
                                                            s = h.yytext,
                                                            a = h.yylineno,
                                                            g = h.yylloc,
                                                            l > 0 && l--);
                                                break;
                                            case 2:
                                                if (S = this.productions_[w[1]][1],
                                                    I.$ = r[r.length - S],
                                                    I._$ = {
                                                        first_line: i[i.length - (S || 1)].first_line,
                                                        last_line: i[i.length - 1].last_line,
                                                        first_column: i[i.length - (S || 1)].first_column,
                                                        last_column: i[i.length - 1].last_column
                                                    },
                                                    y && (I._$.range = [i[i.length - (S || 1)].range[0], i[i.length - 1].range[1]]),
                                                    E = this.performAction.apply(I, [s, c, a, f.yy, w[1], r, i].concat(p)),
                                                    "undefined" != typeof E)
                                                    return E;
                                                S && (n = n.slice(0, -1 * S * 2),
                                                    r = r.slice(0, -1 * S),
                                                    i = i.slice(0, -1 * S)),
                                                    n.push(this.productions_[w[1]][0]),
                                                    r.push(I.$),
                                                    i.push(I._$),
                                                    k = o[n[n.length - 2]][n[n.length - 1]],
                                                    n.push(k);
                                                break;
                                            case 3:
                                                return !0
                                        }
                                    }
                                    return !0
                                }
                            }
                            , te = function () {
                                var e = {
                                    EOF: 1,
                                    parseError: function (e, t) {
                                        if (!this.yy.parser)
                                            throw new Error(e);
                                        this.yy.parser.parseError(e, t)
                                    },
                                    setInput: function (e, t) {
                                        return this.yy = t || this.yy || {},
                                            this._input = e,
                                            this._more = this._backtrack = this.done = !1,
                                            this.yylineno = this.yyleng = 0,
                                            this.yytext = this.matched = this.match = "",
                                            this.conditionStack = ["INITIAL"],
                                            this.yylloc = {
                                                first_line: 1,
                                                first_column: 0,
                                                last_line: 1,
                                                last_column: 0
                                            },
                                            this.options.ranges && (this.yylloc.range = [0, 0]),
                                            this.offset = 0,
                                            this
                                    },
                                    input: function () {
                                        var e = this._input[0];
                                        this.yytext += e,
                                            this.yyleng++ ,
                                            this.offset++ ,
                                            this.match += e,
                                            this.matched += e;
                                        var t = e.match(/(?:\r\n?|\n).*/g);
                                        return t ? (this.yylineno++ ,
                                            this.yylloc.last_line++) : this.yylloc.last_column++ ,
                                            this.options.ranges && this.yylloc.range[1]++ ,
                                            this._input = this._input.slice(1),
                                            e
                                    },
                                    unput: function (e) {
                                        var t = e.length
                                            , n = e.split(/(?:\r\n?|\n)/g);
                                        this._input = e + this._input,
                                            this.yytext = this.yytext.substr(0, this.yytext.length - t),
                                            this.offset -= t;
                                        var r = this.match.split(/(?:\r\n?|\n)/g);
                                        this.match = this.match.substr(0, this.match.length - 1),
                                            this.matched = this.matched.substr(0, this.matched.length - 1),
                                            n.length - 1 && (this.yylineno -= n.length - 1);
                                        var i = this.yylloc.range;
                                        return this.yylloc = {
                                            first_line: this.yylloc.first_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.first_column,
                                            last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                        },
                                            this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]),
                                            this.yyleng = this.yytext.length,
                                            this
                                    },
                                    more: function () {
                                        return this._more = !0,
                                            this
                                    },
                                    reject: function () {
                                        return this.options.backtrack_lexer ? (this._backtrack = !0,
                                            this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    less: function (e) {
                                        this.unput(this.match.slice(e))
                                    },
                                    pastInput: function () {
                                        var e = this.matched.substr(0, this.matched.length - this.match.length);
                                        return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                    },
                                    upcomingInput: function () {
                                        var e = this.match;
                                        return e.length < 20 && (e += this._input.substr(0, 20 - e.length)),
                                            (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                    },
                                    showPosition: function () {
                                        var e = this.pastInput()
                                            , t = new Array(e.length + 1).join("-");
                                        return e + this.upcomingInput() + "\n" + t + "^"
                                    },
                                    test_match: function (e, t) {
                                        var n, r, i;
                                        if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        },
                                            this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))),
                                            r = e[0].match(/(?:\r\n?|\n).*/g),
                                            r && (this.yylineno += r.length),
                                            this.yylloc = {
                                                first_line: this.yylloc.last_line,
                                                last_line: this.yylineno + 1,
                                                first_column: this.yylloc.last_column,
                                                last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                            },
                                            this.yytext += e[0],
                                            this.match += e[0],
                                            this.matches = e,
                                            this.yyleng = this.yytext.length,
                                            this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]),
                                            this._more = !1,
                                            this._backtrack = !1,
                                            this._input = this._input.slice(e[0].length),
                                            this.matched += e[0],
                                            n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]),
                                            this.done && this._input && (this.done = !1),
                                            n)
                                            return n;
                                        if (this._backtrack) {
                                            for (var o in i)
                                                this[o] = i[o];
                                            return !1
                                        }
                                        return !1
                                    },
                                    next: function () {
                                        if (this.done)
                                            return this.EOF;
                                        this._input || (this.done = !0);
                                        var e, t, n, r;
                                        this._more || (this.yytext = "",
                                            this.match = "");
                                        for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                            if (n = this._input.match(this.rules[i[o]]),
                                                n && (!t || n[0].length > t[0].length)) {
                                                if (t = n,
                                                    r = o,
                                                    this.options.backtrack_lexer) {
                                                    if (e = this.test_match(n, i[o]),
                                                        e !== !1)
                                                        return e;
                                                    if (this._backtrack) {
                                                        t = !1;
                                                        continue
                                                    }
                                                    return !1
                                                }
                                                if (!this.options.flex)
                                                    break
                                            }
                                        return t ? (e = this.test_match(t, i[r]),
                                            e !== !1 && e) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    lex: function () {
                                        var e = this.next();
                                        return e ? e : this.lex()
                                    },
                                    begin: function (e) {
                                        this.conditionStack.push(e)
                                    },
                                    popState: function () {
                                        var e = this.conditionStack.length - 1;
                                        return e > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                    },
                                    _currentRules: function () {
                                        return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                    },
                                    topState: function (e) {
                                        return e = this.conditionStack.length - 1 - Math.abs(e || 0),
                                            e >= 0 ? this.conditionStack[e] : "INITIAL"
                                    },
                                    pushState: function (e) {
                                        this.begin(e)
                                    },
                                    stateStackSize: function () {
                                        return this.conditionStack.length
                                    },
                                    options: {},
                                    performAction: function (e, t, n, r) {
                                        switch (n) {
                                            case 0:
                                                return void this.begin("captext");
                                            case 1:
                                                return 58;
                                            case 2:
                                                return this.popState(),
                                                    58;
                                            case 3:
                                                return 62;
                                            case 4:
                                                return 63;
                                            case 5:
                                                return 64;
                                            case 6:
                                                return 65;
                                            case 7:
                                                return 66;
                                            case 8:
                                                return 67;
                                            case 9:
                                                return 49;
                                            case 10:
                                                return 50;
                                            case 11:
                                                return 51;
                                            case 12:
                                                return 52;
                                            case 13:
                                                return 53;
                                            case 14:
                                                return 54;
                                            case 15:
                                                return 71;
                                            case 16:
                                                return 74;
                                            case 17:
                                                return 75;
                                            case 18:
                                                return 70;
                                            case 19:
                                                return 72;
                                            case 20:
                                                return 73;
                                            case 21:
                                                return 76;
                                            case 22:
                                                return 69;
                                            case 23:
                                                return 79;
                                            case 24:
                                                return 13;
                                            case 25:
                                                return 15;
                                            case 26:
                                                return 14;
                                            case 27:
                                                return 10;
                                            case 28:
                                                return 28;
                                            case 29:
                                                return 29;
                                            case 30:
                                                return 82;
                                            case 31:
                                                return 83;
                                            case 32:
                                                return 84;
                                            case 33:
                                                return 17;
                                            case 34:
                                                return 18;
                                            case 35:
                                                return 19;
                                            case 36:
                                                return 77;
                                            case 37:
                                                return 78;
                                            case 38:
                                                return 81;
                                            case 39:
                                                return t.yytext = this.matches[1],
                                                    21;
                                            case 40:
                                                return t.yytext = this.matches[1],
                                                    22;
                                            case 41:
                                                return t.yytext = this.matches[1],
                                                    24;
                                            case 42:
                                                return 68;
                                            case 43:
                                                return 47;
                                            case 44:
                                                return 48;
                                            case 45:
                                                return 85;
                                            case 46:
                                                return 61;
                                            case 47:
                                                return 60;
                                            case 48:
                                                return 80;
                                            case 49:
                                                return 56;
                                            case 50:
                                                return 56;
                                            case 51:
                                                return 57;
                                            case 52:
                                                return t.yytext = this.matches[1],
                                                    58;
                                            case 53:
                                                return 59;
                                            case 54:
                                                return;
                                            case 55:
                                                return 86;
                                            case 56:
                                                return;
                                            case 57:
                                                return 55;
                                            case 58:
                                                return 5
                                        }
                                    },
                                    rules: [/^(?:([,][,])(?=[A-Z]))/, /^(?:[A-Z](?=[A-Z]))/, /^(?:[A-Z])/, /^(?:["][6])/, /^(?:["][-])/, /^(?:["][4])/, /^(?:["][8])/, /^(?:["][9])/, /^(?:["][\/])/, /^(?:[.][<])/, /^(?:[_][<])/, /^(?:["][<])/, /^(?:[.][>])/, /^(?:[_][>])/, /^(?:["][>])/, /^(?:["][7][@][:])/, /^(?:[_][@][<])/, /^(?:[_][@][>])/, /^(?:["][7])/, /^(?:[@][<])/, /^(?:[@][>])/, /^(?:[@][9])/, /^(?:[.][0])/, /^(?:[4][4][4])/, /^(?:[%][9])/, /^(?:[%])/, /^(?:[\+])/, /^(?:[95]+)/, /^(?:[<])/, /^(?:[>])/, /^(?:!)/, /^(?:[6])/, /^(?:[@]&)/, /^(?:[(])/, /^(?:[.][\/])/, /^(?:[)])/, /^(?:#[L])/, /^(?:#-)/, /^(?:#=)/, /^(?:#([A-J4]+))/, /^(?:[\/]([A-J4]+))/, /^(?:[#][\/]([A-J4]+))/, /^(?:[_]?[\/])/, /^(?:[1])/, /^(?:[4])/, /^(?:[7]+)/, /^(?:[_][\\][_][\\])/, /^(?:[_][\\])/, /^(?:[3])/, /^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/, /^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/, /^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/, /^(?:[,]([A-Z]))/, /^(?:[A-Z])/, /^(?:[,]['])/, /^(?:[8])/, /^(?:[;])/, /^(?:[ ])/, /^(?:$)/],
                                    conditions: {
                                        captext: {
                                            rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58],
                                            inclusive: !0
                                        },
                                        INITIAL: {
                                            rules: [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58],
                                            inclusive: !0
                                        }
                                    }
                                };
                                return e
                            }();
                        return ee.lexer = te,
                            e.prototype = ee,
                            ee.Parser = e,
                            new e
                    }();
                    t.parser = i,
                        t.Parser = i.Parser,
                        t.parse = function () {
                            return i.parse.apply(i, arguments)
                        }
                        ,
                        t.main = function (r) {
                            r[1] || (console.log("Usage: " + r[0] + " FILE"),
                                e.exit(1));
                            var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                            return t.parser.parse(i)
                        }
                        ,
                        "undefined" != typeof r && n.c[n.s] === r && t.main(e.argv.slice(1))
                }
                ).call(t, n(1), n(8)(e))
            }
            , function (e, t, n) {
                function r(e) {
                    for (var t = [], n = 0; n < e.length; n++) {
                        var d = e[n];
                        switch (d.type) {
                            case "command":
                                var p = d.value.slice(1).trim();
                                l.hasOwnProperty(d.value) ? t.push(a.command(l[d.value])) : s.containsValue(p) ? t.push(a.typeform("operator_name", i(p))) : u[d.value] || t.push(d);
                                break;
                            case "level":
                                var h = {
                                    subscript: d.subscript && d.subscript.length > 0 ? r(d.subscript) : void 0,
                                    superscript: d.superscript && d.superscript.length > 0 ? r(d.superscript) : void 0,
                                    type: d.type
                                };
                                (h.subscript || h.superscript) && t.push(h);
                                break;
                            case "fraction":
                                t.push({
                                    denominator: r(d.denominator),
                                    numerator: r(d.numerator),
                                    type: d.type
                                });
                                break;
                            case "radical":
                                t.push({
                                    index: d.index ? r(d.index) : void 0,
                                    radicand: r(d.radicand),
                                    type: d.type
                                });
                                break;
                            case "terminal":
                                o(e.slice(n)) ? (t.push({
                                    type: "command",
                                    value: "\\ldots"
                                }),
                                    n += 2) : t.push({
                                        type: d.type,
                                        value: c.hasOwnProperty(d.value) ? c[d.value] : d.value
                                    });
                                break;
                            case "typeform":
                                t.push(d);
                                break;
                            case "greek":
                                t.push({
                                    type: d.type,
                                    value: c.hasOwnProperty(d.value) ? c[d.value] : d.value
                                });
                                break;
                            default:
                                throw new Error("Unexpected item:\n" + JSON.stringify({
                                    group: e,
                                    item: d
                                }))
                        }
                    }
                    return t
                }
                function i(e) {
                    for (var t = [], n = 0, r = e; n < r.length; n++) {
                        var i = r[n];
                        t.push(a.terminal(i))
                    }
                    return t
                }
                function o(e) {
                    for (var t = 0, n = 0; n < Math.min(3, e.length); n++) {
                        var r = e[n];
                        "terminal" === r.type && "." === r.value && t++
                    }
                    return 3 === t
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var s = n(2)
                    , a = n(7)
                    , c = {
                        "~": "\\ "
                    }
                    , l = {
                        "\\,": "\\ ",
                        "\\Vert": "\\|",
                        "\\ge": "\\geq",
                        "\\le": "\\leq",
                        "\\vert": "|"
                    }
                    , u = {
                        "\\space": !0
                    };
                t.default = r
            }
            , function (e, t, n) {
                function r(e) {
                    try {
                        return {
                            isError: !1,
                            value: o.parser.parse(e)
                        }
                    } catch (e) {
                        return {
                            isError: !0,
                            error: i.default(e)
                        }
                    }
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var i = n(6)
                    , o = n(13)
                    , s = n(7);
                o.parser.yy = s,
                    t.default = r
            }
            , function (e, t, n) {
                (function (e, r) {
                    var i = function () {
                        function e() {
                            this.yy = {}
                        }
                        var t = function (e, t, n, r) {
                            for (n = n || {},
                                r = e.length; r--; n[e[r]] = t)
                                ;
                            return n
                        }
                            , n = [1, 13]
                            , r = [1, 14]
                            , i = [1, 15]
                            , o = [1, 16]
                            , s = [1, 17]
                            , a = [1, 19]
                            , c = [1, 18]
                            , l = [1, 20]
                            , u = [1, 21]
                            , d = [1, 26]
                            , p = [1, 28]
                            , h = [1, 29]
                            , f = [1, 30]
                            , m = [1, 31]
                            , g = [1, 27]
                            , y = [5, 21, 25, 36]
                            , v = [5, 19, 21, 22, 23, 24, 25, 26, 30, 31, 32, 33, 34, 35, 36]
                            , b = [5, 10, 12, 13, 14, 19, 21, 22, 23, 24, 25, 26, 30, 31, 32, 33, 34, 35, 36]
                            , x = [5, 10, 19, 21, 22, 23, 24, 25, 26, 30, 31, 32, 33, 34, 35, 36]
                            , w = {
                                trace: function () { },
                                yy: {},
                                symbols_: {
                                    error: 2,
                                    sentence: 3,
                                    group: 4,
                                    EOF: 5,
                                    level: 6,
                                    expression: 7,
                                    subscript: 8,
                                    superscript: 9,
                                    _: 10,
                                    atom: 11,
                                    "^": 12,
                                    "PRIMES^": 13,
                                    PRIMES: 14,
                                    delimited_group: 15,
                                    operator_name: 16,
                                    frac: 17,
                                    radical: 18,
                                    LEFT: 19,
                                    delimiter: 20,
                                    RIGHT: 21,
                                    FRAC: 22,
                                    OPERATOR_NAME: 23,
                                    RADICAL_OPTARG: 24,
                                    CLOSE_OPTARG: 25,
                                    RADICAL: 26,
                                    curly_group: 27,
                                    greek: 28,
                                    command: 29,
                                    SYMBOL: 30,
                                    DELIMITER: 31,
                                    DELIMITER_COMMAND: 32,
                                    GREEK: 33,
                                    COMMAND: 34,
                                    "{": 35,
                                    "}": 36,
                                    $accept: 0,
                                    $end: 1
                                },
                                terminals_: {
                                    2: "error",
                                    5: "EOF",
                                    10: "_",
                                    12: "^",
                                    13: "PRIMES^",
                                    14: "PRIMES",
                                    19: "LEFT",
                                    21: "RIGHT",
                                    22: "FRAC",
                                    23: "OPERATOR_NAME",
                                    24: "RADICAL_OPTARG",
                                    25: "CLOSE_OPTARG",
                                    26: "RADICAL",
                                    30: "SYMBOL",
                                    31: "DELIMITER",
                                    32: "DELIMITER_COMMAND",
                                    33: "GREEK",
                                    34: "COMMAND",
                                    35: "{",
                                    36: "}"
                                },
                                productions_: [0, [3, 2], [3, 1], [4, 3], [4, 2], [4, 1], [4, 2], [4, 1], [6, 2], [6, 2], [6, 1], [6, 1], [8, 2], [9, 2], [9, 2], [9, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [15, 5], [15, 4], [17, 3], [16, 2], [18, 4], [18, 3], [18, 2], [18, 2], [11, 1], [11, 1], [11, 1], [11, 1], [11, 1], [20, 1], [20, 1], [28, 1], [29, 1], [27, 3], [27, 2]],
                                performAction: function (e, t, n, r, i, o, s) {
                                    var a = o.length - 1;
                                    switch (i) {
                                        case 1:
                                            return o[a - 1];
                                        case 2:
                                            return r.group();
                                        case 3:
                                            this.$ = r.group(o[a - 2], o[a - 1], o[a]);
                                            break;
                                        case 4:
                                        case 6:
                                            this.$ = r.group(o[a - 1], o[a]);
                                            break;
                                        case 5:
                                        case 7:
                                            this.$ = r.group(o[a]);
                                            break;
                                        case 8:
                                            this.$ = r.level({
                                                _: r.group(o[a - 1]),
                                                "^": r.group(o[a])
                                            });
                                            break;
                                        case 9:
                                            this.$ = r.level({
                                                _: r.group(o[a]),
                                                "^": r.group(o[a - 1])
                                            });
                                            break;
                                        case 10:
                                            this.$ = r.level({
                                                "^": r.group(o[a])
                                            });
                                            break;
                                        case 11:
                                            this.$ = r.level({
                                                _: r.group(o[a])
                                            });
                                            break;
                                        case 12:
                                        case 13:
                                            this.$ = o[a];
                                            break;
                                        case 14:
                                            this.$ = r.processPrimes(o[a - 1], o[a]);
                                            break;
                                        case 15:
                                            this.$ = r.processPrimes(o[a], r.group());
                                            break;
                                        case 21:
                                            this.$ = r.group(o[a - 3], o[a - 2], o[a]);
                                            break;
                                        case 22:
                                            this.$ = r.group(o[a - 2], o[a]);
                                            break;
                                        case 23:
                                            this.$ = r.fraction(r.group(o[a - 1]), r.group(o[a]));
                                            break;
                                        case 24:
                                            this.$ = r.typeform("operator_name", r.group(o[a]));
                                            break;
                                        case 25:
                                            this.$ = r.radical(o[a], r.group(o[a - 2]));
                                            break;
                                        case 26:
                                            this.$ = r.radical(r.group(o[a]), r.group());
                                            break;
                                        case 27:
                                        case 28:
                                            this.$ = r.radical(r.group(o[a]));
                                            break;
                                        case 33:
                                        case 34:
                                            this.$ = r.terminal(o[a]);
                                            break;
                                        case 35:
                                        case 37:
                                            this.$ = r.command(o[a]);
                                            break;
                                        case 36:
                                            this.$ = r.greek(o[a]);
                                            break;
                                        case 38:
                                            this.$ = o[a - 1];
                                            break;
                                        case 39:
                                            this.$ = r.group()
                                    }
                                },
                                table: [{
                                    3: 1,
                                    4: 2,
                                    5: [1, 3],
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    11: 12,
                                    12: r,
                                    13: i,
                                    14: o,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    19: s,
                                    20: 23,
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    1: [3]
                                }, {
                                    5: [1, 32]
                                }, {
                                    1: [2, 2]
                                }, t(y, [2, 5], {
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    11: 12,
                                    27: 22,
                                    20: 23,
                                    28: 24,
                                    29: 25,
                                    7: 33,
                                    19: s,
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }), t(y, [2, 7], {
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    11: 12,
                                    27: 22,
                                    20: 23,
                                    28: 24,
                                    29: 25,
                                    4: 34,
                                    10: n,
                                    12: r,
                                    13: i,
                                    14: o,
                                    19: s,
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }), t(v, [2, 11], {
                                    9: 35,
                                    12: r,
                                    13: i,
                                    14: o
                                }), t(v, [2, 10], {
                                    8: 36,
                                    10: n
                                }), t(b, [2, 16]), t(b, [2, 17]), t(b, [2, 18]), t(b, [2, 19]), t(b, [2, 20]), {
                                    11: 37,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    11: 38,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    11: 39,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, t(x, [2, 15]), {
                                    20: 40,
                                    31: p,
                                    32: h
                                }, {
                                    11: 41,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    11: 42,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    4: 43,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    11: 12,
                                    12: r,
                                    13: i,
                                    14: o,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    19: s,
                                    20: 23,
                                    22: a,
                                    23: c,
                                    24: l,
                                    25: [1, 44],
                                    26: u,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    11: 45,
                                    17: 46,
                                    20: 23,
                                    22: a,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, t(b, [2, 29]), t(b, [2, 30]), t(b, [2, 31]), t(b, [2, 32]), t(b, [2, 33]), {
                                    4: 47,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    11: 12,
                                    12: r,
                                    13: i,
                                    14: o,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    19: s,
                                    20: 23,
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g,
                                    36: [1, 48]
                                }, t(b, [2, 34]), t(b, [2, 35]), t(b, [2, 36]), t(b, [2, 37]), {
                                    1: [2, 1]
                                }, t(y, [2, 4], {
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    11: 12,
                                    27: 22,
                                    20: 23,
                                    28: 24,
                                    29: 25,
                                    4: 49,
                                    10: n,
                                    12: r,
                                    13: i,
                                    14: o,
                                    19: s,
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }), t(y, [2, 6]), t(v, [2, 8]), t(v, [2, 9]), t([5, 12, 13, 14, 19, 21, 22, 23, 24, 25, 26, 30, 31, 32, 33, 34, 35, 36], [2, 12]), t(x, [2, 13]), t(x, [2, 14]), {
                                    4: 50,
                                    6: 4,
                                    7: 5,
                                    8: 6,
                                    9: 7,
                                    10: n,
                                    11: 12,
                                    12: r,
                                    13: i,
                                    14: o,
                                    15: 8,
                                    16: 9,
                                    17: 10,
                                    18: 11,
                                    19: s,
                                    20: 23,
                                    21: [1, 51],
                                    22: a,
                                    23: c,
                                    24: l,
                                    26: u,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, t(b, [2, 24]), {
                                    11: 52,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, {
                                    25: [1, 53]
                                }, {
                                    11: 54,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, t(b, [2, 27]), t(b, [2, 28]), {
                                    36: [1, 55]
                                }, t(b, [2, 39]), t(y, [2, 3]), {
                                    21: [1, 56]
                                }, {
                                    20: 57,
                                    31: p,
                                    32: h
                                }, t(b, [2, 23]), {
                                    11: 58,
                                    20: 23,
                                    27: 22,
                                    28: 24,
                                    29: 25,
                                    30: d,
                                    31: p,
                                    32: h,
                                    33: f,
                                    34: m,
                                    35: g
                                }, t(b, [2, 26]), t(b, [2, 38]), {
                                    20: 59,
                                    31: p,
                                    32: h
                                }, t(b, [2, 22]), t(b, [2, 25]), t(b, [2, 21])],
                                defaultActions: {
                                    3: [2, 2],
                                    32: [2, 1]
                                },
                                parseError: function (e, t) {
                                    if (!t.recoverable) {
                                        var n = new Error(e);
                                        throw n.hash = t,
                                        n
                                    }
                                    this.trace(e)
                                },
                                parse: function (e) {
                                    var t = this
                                        , n = [0]
                                        , r = [null]
                                        , i = []
                                        , o = this.table
                                        , s = ""
                                        , a = 0
                                        , c = 0
                                        , l = 0
                                        , u = 2
                                        , d = 1
                                        , p = i.slice.call(arguments, 1)
                                        , h = Object.create(this.lexer)
                                        , f = {
                                            yy: {}
                                        };
                                    for (var m in this.yy)
                                        Object.prototype.hasOwnProperty.call(this.yy, m) && (f.yy[m] = this.yy[m]);
                                    h.setInput(e, f.yy),
                                        f.yy.lexer = h,
                                        f.yy.parser = this,
                                        "undefined" == typeof h.yylloc && (h.yylloc = {});
                                    var g = h.yylloc;
                                    i.push(g);
                                    var y = h.options && h.options.ranges;
                                    "function" == typeof f.yy.parseError ? this.parseError = f.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
                                    for (var v, b, x, w, E, _, S, k, M, C = function () {
                                        var e;
                                        return e = h.lex() || d,
                                            "number" != typeof e && (e = t.symbols_[e] || e),
                                            e
                                    }, I = {}; ;) {
                                        if (x = n[n.length - 1],
                                            this.defaultActions[x] ? w = this.defaultActions[x] : (null !== v && "undefined" != typeof v || (v = C()),
                                                w = o[x] && o[x][v]),
                                            "undefined" == typeof w || !w.length || !w[0]) {
                                            var T = "";
                                            M = [];
                                            for (_ in o[x])
                                                this.terminals_[_] && _ > u && M.push("'" + this.terminals_[_] + "'");
                                            T = h.showPosition ? "Parse error on line " + (a + 1) + ":\n" + h.showPosition() + "\nExpecting " + M.join(", ") + ", got '" + (this.terminals_[v] || v) + "'" : "Parse error on line " + (a + 1) + ": Unexpected " + (v == d ? "end of input" : "'" + (this.terminals_[v] || v) + "'"),
                                                this.parseError(T, {
                                                    text: h.match,
                                                    token: this.terminals_[v] || v,
                                                    line: h.yylineno,
                                                    loc: g,
                                                    expected: M
                                                })
                                        }
                                        if (w[0] instanceof Array && w.length > 1)
                                            throw new Error("Parse Error: multiple actions possible at state: " + x + ", token: " + v);
                                        switch (w[0]) {
                                            case 1:
                                                n.push(v),
                                                    r.push(h.yytext),
                                                    i.push(h.yylloc),
                                                    n.push(w[1]),
                                                    v = null,
                                                    b ? (v = b,
                                                        b = null) : (c = h.yyleng,
                                                            s = h.yytext,
                                                            a = h.yylineno,
                                                            g = h.yylloc,
                                                            l > 0 && l--);
                                                break;
                                            case 2:
                                                if (S = this.productions_[w[1]][1],
                                                    I.$ = r[r.length - S],
                                                    I._$ = {
                                                        first_line: i[i.length - (S || 1)].first_line,
                                                        last_line: i[i.length - 1].last_line,
                                                        first_column: i[i.length - (S || 1)].first_column,
                                                        last_column: i[i.length - 1].last_column
                                                    },
                                                    y && (I._$.range = [i[i.length - (S || 1)].range[0], i[i.length - 1].range[1]]),
                                                    E = this.performAction.apply(I, [s, c, a, f.yy, w[1], r, i].concat(p)),
                                                    "undefined" != typeof E)
                                                    return E;
                                                S && (n = n.slice(0, -1 * S * 2),
                                                    r = r.slice(0, -1 * S),
                                                    i = i.slice(0, -1 * S)),
                                                    n.push(this.productions_[w[1]][0]),
                                                    r.push(I.$),
                                                    i.push(I._$),
                                                    k = o[n[n.length - 2]][n[n.length - 1]],
                                                    n.push(k);
                                                break;
                                            case 3:
                                                return !0
                                        }
                                    }
                                    return !0
                                }
                            }
                            , E = function () {
                                var e = {
                                    EOF: 1,
                                    parseError: function (e, t) {
                                        if (!this.yy.parser)
                                            throw new Error(e);
                                        this.yy.parser.parseError(e, t)
                                    },
                                    setInput: function (e, t) {
                                        return this.yy = t || this.yy || {},
                                            this._input = e,
                                            this._more = this._backtrack = this.done = !1,
                                            this.yylineno = this.yyleng = 0,
                                            this.yytext = this.matched = this.match = "",
                                            this.conditionStack = ["INITIAL"],
                                            this.yylloc = {
                                                first_line: 1,
                                                first_column: 0,
                                                last_line: 1,
                                                last_column: 0
                                            },
                                            this.options.ranges && (this.yylloc.range = [0, 0]),
                                            this.offset = 0,
                                            this
                                    },
                                    input: function () {
                                        var e = this._input[0];
                                        this.yytext += e,
                                            this.yyleng++ ,
                                            this.offset++ ,
                                            this.match += e,
                                            this.matched += e;
                                        var t = e.match(/(?:\r\n?|\n).*/g);
                                        return t ? (this.yylineno++ ,
                                            this.yylloc.last_line++) : this.yylloc.last_column++ ,
                                            this.options.ranges && this.yylloc.range[1]++ ,
                                            this._input = this._input.slice(1),
                                            e
                                    },
                                    unput: function (e) {
                                        var t = e.length
                                            , n = e.split(/(?:\r\n?|\n)/g);
                                        this._input = e + this._input,
                                            this.yytext = this.yytext.substr(0, this.yytext.length - t),
                                            this.offset -= t;
                                        var r = this.match.split(/(?:\r\n?|\n)/g);
                                        this.match = this.match.substr(0, this.match.length - 1),
                                            this.matched = this.matched.substr(0, this.matched.length - 1),
                                            n.length - 1 && (this.yylineno -= n.length - 1);
                                        var i = this.yylloc.range;
                                        return this.yylloc = {
                                            first_line: this.yylloc.first_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.first_column,
                                            last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                        },
                                            this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]),
                                            this.yyleng = this.yytext.length,
                                            this
                                    },
                                    more: function () {
                                        return this._more = !0,
                                            this
                                    },
                                    reject: function () {
                                        return this.options.backtrack_lexer ? (this._backtrack = !0,
                                            this) : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    less: function (e) {
                                        this.unput(this.match.slice(e))
                                    },
                                    pastInput: function () {
                                        var e = this.matched.substr(0, this.matched.length - this.match.length);
                                        return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                    },
                                    upcomingInput: function () {
                                        var e = this.match;
                                        return e.length < 20 && (e += this._input.substr(0, 20 - e.length)),
                                            (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                    },
                                    showPosition: function () {
                                        var e = this.pastInput()
                                            , t = new Array(e.length + 1).join("-");
                                        return e + this.upcomingInput() + "\n" + t + "^"
                                    },
                                    test_match: function (e, t) {
                                        var n, r, i;
                                        if (this.options.backtrack_lexer && (i = {
                                            yylineno: this.yylineno,
                                            yylloc: {
                                                first_line: this.yylloc.first_line,
                                                last_line: this.last_line,
                                                first_column: this.yylloc.first_column,
                                                last_column: this.yylloc.last_column
                                            },
                                            yytext: this.yytext,
                                            match: this.match,
                                            matches: this.matches,
                                            matched: this.matched,
                                            yyleng: this.yyleng,
                                            offset: this.offset,
                                            _more: this._more,
                                            _input: this._input,
                                            yy: this.yy,
                                            conditionStack: this.conditionStack.slice(0),
                                            done: this.done
                                        },
                                            this.options.ranges && (i.yylloc.range = this.yylloc.range.slice(0))),
                                            r = e[0].match(/(?:\r\n?|\n).*/g),
                                            r && (this.yylineno += r.length),
                                            this.yylloc = {
                                                first_line: this.yylloc.last_line,
                                                last_line: this.yylineno + 1,
                                                first_column: this.yylloc.last_column,
                                                last_column: r ? r[r.length - 1].length - r[r.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e[0].length
                                            },
                                            this.yytext += e[0],
                                            this.match += e[0],
                                            this.matches = e,
                                            this.yyleng = this.yytext.length,
                                            this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]),
                                            this._more = !1,
                                            this._backtrack = !1,
                                            this._input = this._input.slice(e[0].length),
                                            this.matched += e[0],
                                            n = this.performAction.call(this, this.yy, this, t, this.conditionStack[this.conditionStack.length - 1]),
                                            this.done && this._input && (this.done = !1),
                                            n)
                                            return n;
                                        if (this._backtrack) {
                                            for (var o in i)
                                                this[o] = i[o];
                                            return !1
                                        }
                                        return !1
                                    },
                                    next: function () {
                                        if (this.done)
                                            return this.EOF;
                                        this._input || (this.done = !0);
                                        var e, t, n, r;
                                        this._more || (this.yytext = "",
                                            this.match = "");
                                        for (var i = this._currentRules(), o = 0; o < i.length; o++)
                                            if (n = this._input.match(this.rules[i[o]]),
                                                n && (!t || n[0].length > t[0].length)) {
                                                if (t = n,
                                                    r = o,
                                                    this.options.backtrack_lexer) {
                                                    if (e = this.test_match(n, i[o]),
                                                        e !== !1)
                                                        return e;
                                                    if (this._backtrack) {
                                                        t = !1;
                                                        continue
                                                    }
                                                    return !1
                                                }
                                                if (!this.options.flex)
                                                    break
                                            }
                                        return t ? (e = this.test_match(t, i[r]),
                                            e !== !1 && e) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                                text: "",
                                                token: null,
                                                line: this.yylineno
                                            })
                                    },
                                    lex: function () {
                                        var e = this.next();
                                        return e ? e : this.lex()
                                    },
                                    begin: function (e) {
                                        this.conditionStack.push(e)
                                    },
                                    popState: function () {
                                        var e = this.conditionStack.length - 1;
                                        return e > 0 ? this.conditionStack.pop() : this.conditionStack[0]
                                    },
                                    _currentRules: function () {
                                        return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules
                                    },
                                    topState: function (e) {
                                        return e = this.conditionStack.length - 1 - Math.abs(e || 0),
                                            e >= 0 ? this.conditionStack[e] : "INITIAL"
                                    },
                                    pushState: function (e) {
                                        this.begin(e)
                                    },
                                    stateStackSize: function () {
                                        return this.conditionStack.length
                                    },
                                    options: {},
                                    performAction: function (e, t, n, r) {
                                        switch (n) {
                                            case 0:
                                                break;
                                            case 1:
                                                return this.begin("optarg"),
                                                    24;
                                            case 2:
                                                return this.popState(),
                                                    25;
                                            case 3:
                                                return 23;
                                            case 4:
                                                return 26;
                                            case 5:
                                                return 22;
                                            case 6:
                                                return 13;
                                            case 7:
                                                return 14;
                                            case 8:
                                                return 12;
                                            case 9:
                                                return 10;
                                            case 10:
                                                return 19;
                                            case 11:
                                                return 21;
                                            case 12:
                                                return 32;
                                            case 13:
                                                return 31;
                                            case 14:
                                                return 35;
                                            case 15:
                                                return 36;
                                            case 16:
                                                return 30;
                                            case 17:
                                                return 30;
                                            case 18:
                                                return 30;
                                            case 19:
                                                return 33;
                                            case 20:
                                                return 33;
                                            case 21:
                                                return 34;
                                            case 22:
                                                return 30;
                                            case 23:
                                                return 5
                                        }
                                    },
                                    rules: [/^(?:\s+)/, /^(?:(\\sqrt)\s*\[)/, /^(?:\])/, /^(?:(\\operatorname))/, /^(?:(\\sqrt))/, /^(?:(\\frac))/, /^(?:'+\^)/, /^(?:'+)/, /^(?:\^)/, /^(?:[_])/, /^(?:(\\left))/, /^(?:(\\right))/, /^(?:(\\langle|\\rangle|\\vert|\\Vert))/, /^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/, /^(?:\{)/, /^(?:\})/, /^(?:\\(infty))/, /^(?:\\(int))/, /^(?:!)/, /^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/, /^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/, /^(?:\\[A-Za-z]+)/, /^(?:\\.|.)/, /^(?:$)/],
                                    conditions: {
                                        optarg: {
                                            rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
                                            inclusive: !0
                                        },
                                        INITIAL: {
                                            rules: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
                                            inclusive: !0
                                        }
                                    }
                                };
                                return e
                            }();
                        return w.lexer = E,
                            e.prototype = w,
                            w.Parser = e,
                            new e
                    }();
                    t.parser = i,
                        t.Parser = i.Parser,
                        t.parse = function () {
                            return i.parse.apply(i, arguments)
                        }
                        ,
                        t.main = function (r) {
                            r[1] || (console.log("Usage: " + r[0] + " FILE"),
                                e.exit(1));
                            var i = n(4).readFileSync(n(5).normalize(r[1]), "utf8");
                            return t.parser.parse(i)
                        }
                        ,
                        "undefined" != typeof r && n.c[n.s] === r && t.main(e.argv.slice(1))
                }
                ).call(t, n(1), n(8)(e))
            }
            , function (e, t, n) {
                function r(e) {
                    return S.map(_.default(e), function (e) {
                        return x(E.default(e))
                    })
                }
                function i(e) {
                    return /^[a-z]$/.test(e.value) ? e.value.toUpperCase() : /^[A-Z]$/.test(e.value) ? "," + e.value : /^[0-9.]$/.test(e.value) ? e.value : /^[+\-()]$/.test(e.value) ? e.value : k.hasOwnProperty(e.value) ? k[e.value] : "[terminal: " + e.value + "]"
                }
                function o(e) {
                    return M.hasOwnProperty(e.value) ? M[e.value] : e.value.slice(1).toUpperCase() + " "
                }
                function s(e) {
                    return C.hasOwnProperty(e.value) ? C[e.value] : e.value.slice(1).toUpperCase() + " "
                }
                function a(e) {
                    return "\\space" === e.value
                }
                function c(e, t) {
                    return e.isStartOfLine && /^-?$/.test(t) || /\s-?$/.test(t) || e.wasFraction
                }
                function l(e) {
                    return "\\sum" === e.value || "\\prod" === e.value
                }
                function u(e, t) {
                    if (t >= e.length)
                        return !1;
                    var n = e[t];
                    if ("terminal" === n.type) {
                        if (/^[0-9]$/.test(n.value))
                            return !0;
                        if ("." !== n.value)
                            return !1;
                        if (t + 1 >= e.length)
                            return !1;
                        if (n = e[t + 1],
                            "terminal" === n.type)
                            return /^[0-9]$/.test(n.value)
                    }
                    return !1
                }
                function d(e, t) {
                    for (var n = "", r = e.levelIndicator, m = 0, y = !1, x = 0; x < t.length; x++) {
                        u(t, x) && ("" === r && /[A-Z]$/.test(n) ? n += g(r) : c(e, n) && (n += "#"));
                        var w = t[x]
                            , E = x < t.length - 1 ? t[x + 1] : null;
                        switch ("level" !== w.type && r !== e.levelIndicator && (b(w) ? r = "" : (e.wasModifiedExpression && "" === e.levelIndicator ? e = v(e, {
                            wasModifiedExpression: !1
                        }) : n += g(e.levelIndicator),
                            r = e.levelIndicator)),
                        w.type) {
                            case "terminal":
                                n += !e.wasModifiedExpression && "" !== r && b(w) ? " " + g(r) + i(w).trim() + " " : i(w),
                                    "." === w.value && E && ("terminal" === E.type && /^[^_\d,]/.test(i(E)) || "greek" === E.type) && (n += '"'),
                                    e = v(e, {
                                        wasFraction: !1,
                                        wasRomanCommand: !1
                                    });
                                break;
                            case "command":
                                if (!a(w)) {
                                    var _ = l(w);
                                    _ && (n += '"'),
                                        n += !_ && "" !== r && b(w) ? " " + g(r) + o(w).trim() + " " : o(w),
                                        e = v(e, {
                                            wasFraction: !1,
                                            wasModifiedExpression: _,
                                            wasRomanCommand: !0
                                        })
                                }
                                break;
                            case "greek":
                                n += s(w),
                                    e = v(e, {
                                        wasFraction: !1
                                    });
                                break;
                            case "fraction":
                                var S = p(e, w);
                                n += S.value,
                                    m = Math.max(m, S.fractionLevel),
                                    e = v(e, {
                                        wasFraction: !0,
                                        wasRomanCommand: !1
                                    });
                                break;
                            case "radical":
                                var k = h(e, w);
                                n += k.value,
                                    m = Math.max(m, k.fractionLevel),
                                    e = v(e, {
                                        wasFraction: !1,
                                        wasRomanCommand: !1
                                    });
                                break;
                            case "level":
                                !e.wasModifiedExpression && e.wasRomanCommand ? (y = /\s$/.test(n),
                                    y && (n = n.replace(/\s$/, ""))) : y = !1;
                                var M = n.length > 0 && /[A-Za-z]/.test(n[n.length - 1]) === !0
                                    , C = f(e, M, y, w);
                                n += C.value,
                                    r = C.levelIndicator,
                                    e = v(e, {
                                        wasFraction: !1,
                                        wasRomanCommand: !1
                                    });
                                break;
                            case "typeform":
                                n += d(e, w.value).value + " ",
                                    e = v(e, {
                                        wasFraction: !1,
                                        wasModifiedExpression: !1,
                                        wasRomanCommand: !1
                                    })
                        }
                    }
                    return {
                        fractionLevel: m,
                        levelIndicator: r,
                        value: n
                    }
                }
                function p(e, t) {
                    e = v(e, {
                        isStartOfLine: !1
                    });
                    for (var n = d(e, t.numerator), r = d(e, t.denominator), i = Math.max(n.fractionLevel, r.fractionLevel), o = "", s = 0; s < i; s++)
                        o += ",";
                    var a = o + "?" + n.value;
                    return n.levelIndicator !== e.levelIndicator && (a += g(e.levelIndicator)),
                        /\.$/.test(n.value) && (a += '"'),
                        a += o + "/" + r.value,
                        r.levelIndicator !== e.levelIndicator && (a += g(e.levelIndicator)),
                        /\.$/.test(r.value) && (a += '"'),
                        a += o + "#",
                        {
                            fractionLevel: i + 1,
                            value: a
                        }
                }
                function h(e, t) {
                    for (var n = e.radicalLevel, r = "", i = "", o = 0; o < n; o++)
                        i += ".";
                    if (t.index) {
                        r += i + "<";
                        var s = d(v(e, {
                            isStartOfLine: !1
                        }), t.index);
                        r += s.value,
                            /\.$/.test(s.value) && (r += '"'),
                            s.levelIndicator !== e.levelIndicator && (r += g(e.levelIndicator)),
                            r += ">"
                    } else
                        r += i + ">";
                    var a = d(v(e, {
                        isStartOfLine: !1,
                        radicalLevel: n + 1
                    }), t.radicand);
                    return r += a.value,
                        /\.$/.test(a.value) && (r += '"'),
                        a.levelIndicator !== e.levelIndicator && (r += g(e.levelIndicator)),
                        r += i + "]",
                        {
                            fractionLevel: a.fractionLevel,
                            value: r
                        }
                }
                function f(e, t, n, r) {
                    var i = e.levelIndicator
                        , o = ""
                        , s = m(r.superscript);
                    if (o += s,
                        r.subscript) {
                        e.wasModifiedExpression && (o += "%"),
                            i = e.levelIndicator + ";";
                        var a = d(v(e, {
                            isStartOfLine: !1,
                            levelIndicator: i
                        }), r.subscript);
                        t && /^[0-9]*(\.|\,)?[0-9]+$/.test(a.value) && i.length <= 1 ? i = e.levelIndicator : !e.wasModifiedExpression && r.subscript[0] && "level" !== r.subscript[0].type && (o += g(i)),
                            o += a.value,
                            /\.$/.test(a.value) && (o += '"')
                    }
                    if (r.superscript) {
                        e.wasModifiedExpression && (o += "<"),
                            i = e.levelIndicator + "^";
                        var c = d(v(e, {
                            isStartOfLine: !1,
                            levelIndicator: i
                        }), r.superscript.slice(s.length));
                        !e.wasModifiedExpression && r.superscript[0] && "level" !== r.superscript[0].type && "" !== c.value && (o += g(i)),
                            o += c.value,
                            /\.$/.test(c.value) && (o += '"')
                    }
                    return e.wasModifiedExpression ? o += "]" : e.wasRomanCommand && n && (o += " ",
                        i = i.slice(0, i.length - 1)),
                        {
                            levelIndicator: i,
                            value: o
                        }
                }
                function m(e) {
                    var t = "";
                    if (e)
                        for (var n = 0, r = e; n < r.length; n++) {
                            var i = r[n];
                            if ("command" !== i.type || "\\prime" !== i.value)
                                break;
                            t += "'"
                        }
                    return t
                }
                function g(e) {
                    return e ? e : '"'
                }
                function y() {
                    return {
                        isStartOfLine: !0,
                        levelIndicator: "",
                        radicalLevel: 0,
                        wasFraction: !1,
                        wasModifiedExpression: !1,
                        wasRomanCommand: !1
                    }
                }
                function v(e, t) {
                    return w({}, e, t)
                }
                function b(e) {
                    return ("terminal" === e.type || "command" === e.type) && /^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)
                }
                function x(e) {
                    var t = y();
                    return d(t, e).value
                }
                var w = this && this.__assign || Object.assign || function (e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++) {
                        t = arguments[n];
                        for (var i in t)
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                    }
                    return e
                }
                    ;
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var E = n(11)
                    , _ = n(12)
                    , S = n(0);
                t.default = r;
                var k = {
                    "!": "&",
                    "*": "@#",
                    ",": ", ",
                    "/": "_/",
                    ":": "_3",
                    "<": ' "K ',
                    "=": " .K ",
                    ">": " .1 ",
                    "?": "_8",
                    "[": "@(",
                    "\\ ": " ",
                    "\\%": "@0",
                    "\\&": "_&",
                    "\\,": " ",
                    "\\infty": ",=",
                    "\\int": "!",
                    "\\{": ".(",
                    "\\|": "\\\\",
                    "\\}": ".)",
                    "]": "@)",
                    "|": "\\"
                }
                    , M = {
                        "\\Vert": "\\\\",
                        "\\cdot": "*",
                        "\\div": "./",
                        "\\ge": " .1: ",
                        "\\geq": " .1: ",
                        "\\langle": "..(",
                        "\\ldots": " ''' ",
                        "\\le": ' "K: ',
                        "\\leq": ' "K: ',
                        "\\ne": " /.K ",
                        "\\neq": " /.K ",
                        "\\nparallel": " /$L ",
                        "\\parallel": " $L ",
                        "\\perp": " $P ",
                        "\\prime": "'",
                        "\\prod": ".,P",
                        "\\rangle": "..)",
                        "\\sim": "@:",
                        "\\sum": ".,S",
                        "\\times": "@*",
                        "\\vert": "\\"
                    }
                    , C = {
                        "\\Alpha": ".,A",
                        "\\Beta": ".,B",
                        "\\Chi": ".,&",
                        "\\Delta": ".,D",
                        "\\Epsilon": ".,E",
                        "\\Eta": ".,:",
                        "\\Gamma": ".,G",
                        "\\Iota": ".,I",
                        "\\Kappa": ".,K",
                        "\\Lambda": ".,L",
                        "\\Mu": ".,M",
                        "\\Nu": ".,N",
                        "\\Omega": ".,W",
                        "\\Omicron": ".,O",
                        "\\Phi": ".,F",
                        "\\Pi": ".,P",
                        "\\Psi": ".,Y",
                        "\\Rho": ".,R",
                        "\\Sigma": ".,S",
                        "\\Tau": ".,T",
                        "\\Theta": ".,?",
                        "\\Upsilon": ".,U",
                        "\\Xi": ".,X",
                        "\\Zeta": ".,Z",
                        "\\alpha": ".A",
                        "\\beta": ".B",
                        "\\chi": ".&",
                        "\\delta": ".D",
                        "\\epsilon": ".E",
                        "\\eta": ".:",
                        "\\gamma": ".G",
                        "\\iota": ".I",
                        "\\kappa": ".K",
                        "\\lambda": ".L",
                        "\\mu": ".M",
                        "\\nu": ".N",
                        "\\omega": ".W",
                        "\\omicron": ".O",
                        "\\phi": ".F",
                        "\\pi": ".P",
                        "\\psi": ".Y",
                        "\\rho": ".R",
                        "\\sigma": ".S",
                        "\\tau": ".T",
                        "\\theta": ".?",
                        "\\upsilon": ".U",
                        "\\xi": ".X",
                        "\\zeta": ".Z"
                    }
            }
            , function (e, t, n) {
                function r(e) {
                    return M.map(k.default(e), function (e) {
                        return w(S.default(e))
                    })
                }
                function i(e, t, n) {
                    var r = ""
                        , i = t.value
                        , o = n && "terminal" === n.type ? n.value : "";
                    return d(i, e) && (r += ";"),
                        /^[\D]/.test(i) && (e = x(e, {
                            wasNumber: !1
                        })),
                        /^[a-z]$/.test(i) ? e.capsLock ? (e = x(e, {
                            capsLock: !1
                        }),
                            r += ",'" + i.toUpperCase()) : r += i.toUpperCase() : /^[A-Z]$/.test(i) ? e.capsLock ? r += i : /[A-Z]/.test(o) ? (e = x(e, {
                                capsLock: !0
                            }),
                                r += ",," + i) : r += "," + i : (e = x(e, {
                                    capsLock: !1
                                }),
                                    r += /^[0-9.]$/.test(i) ? l(i) : C.hasOwnProperty(i) ? C[i] : "[terminal: " + i + "]"),
                        {
                            value: r,
                            ctx: e
                        }
                }
                function o(e, t) {
                    var n;
                    return n = I.hasOwnProperty(e.value) ? I[e.value] : e.value.slice(1).toUpperCase() + " ",
                        d(n, t) && (n = ";" + n),
                        /^[\D]/.test(n) && (t = x(t, {
                            wasNumber: !1
                        })),
                        {
                            value: n,
                            ctx: t
                        }
                }
                function s(e) {
                    return T.hasOwnProperty(e.value) ? T[e.value] : e.value.slice(1).toUpperCase() + " "
                }
                function a(e) {
                    return "\\space" === e.value
                }
                function c(e, t) {
                    if (t < e.length) {
                        var n = e[t];
                        if ("terminal" === n.type) {
                            if (/^\d$/.test(n.value))
                                return !0;
                            if ("." !== n.value)
                                return !1;
                            if (t + 1 >= e.length)
                                return !1;
                            if (n = e[t + 1],
                                "terminal" === n.type)
                                return /^\d$/.test(n.value)
                        }
                    }
                    return !1
                }
                function l(e) {
                    for (var t = "", n = "A".charCodeAt(0) - 1, r = 0, i = e; r < i.length; r++) {
                        var o = i[r];
                        t += "," === o ? "1" : "." === o ? "4" : "0" === o ? "J" : String.fromCharCode(n + Number(o))
                    }
                    return t
                }
                function u(e, t) {
                    for (var n, r, l = "", d = !0, h = 0; h < t.length; h++) {
                        c(t, h) ? (e = x(e, {
                            wasNumber: !0
                        }),
                            d && (l += "#",
                                d = !1)) : d = !0;
                        var g = t[h];
                        switch (g.type) {
                            case "terminal":
                                var y = h < t.length - 1 ? t[h + 1] : void 0;
                                n = i(e, g, y),
                                    e = n.ctx,
                                    l += n.value,
                                    " " === l[l.length - 1] && (d = !0);
                                break;
                            case "command":
                                a(g) || (r = o(g, e),
                                    e = r.ctx,
                                    l += r.value,
                                    " " === l[l.length - 1] && (d = !0));
                                break;
                            case "greek":
                                l += s(g),
                                    " " === l[l.length - 1] && (d = !0);
                                break;
                            case "fraction":
                                var v = p(e, g);
                                l += v.value,
                                    e = v.ctx,
                                    d = !1;
                                break;
                            case "radical":
                                var b = f(e, g);
                                l += b.value,
                                    d = !0;
                                break;
                            case "level":
                                var w = m(e, g);
                                l += w.value,
                                    e = w.ctx,
                                    d = !0;
                                break;
                            case "typeform":
                                var E = u(e, g.value).value;
                                l += E,
                                    /(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(E) && (l += " ")
                        }
                    }
                    return {
                        ctx: e,
                        value: l
                    }
                }
                function d(e, t) {
                    return t.wasNumber && /^[A-Ja-j]/.test(e)
                }
                function p(e, t) {
                    var n, r = u(e, t.numerator), i = u(e, t.denominator);
                    return h(r.value) && h(i.value) ? (e = x(e, {
                        wasNumber: !0
                    }),
                        n = r.value + "/" + i.value.slice(1)) : (e = x(e, {
                            wasNumber: !1
                        }),
                            n = "(" + r.value + "./" + i.value + ")"),
                        {
                            ctx: e,
                            value: n
                        }
                }
                function h(e) {
                    return /^\#[A-J41]+$/.test(e)
                }
                function f(e, t) {
                    var n = "%";
                    if (t.index) {
                        var r = u(e, _.group(_.level({
                            "^": t.index
                        })));
                        n += r.value
                    }
                    var i = u(e, t.radicand);
                    return n += i.value + "+",
                        {
                            ctx: e,
                            value: n
                        }
                }
                function m(e, t) {
                    var n = ""
                        , r = y(t.superscript);
                    n += r;
                    var i;
                    if (t.subscript) {
                        var o = u(e, t.subscript);
                        i = v(t.subscript, o.value, 0) ? "<" + g(o.value) + ">" : o.value,
                            e = x(e, {
                                wasNumber: o.ctx.wasNumber
                            }),
                            "" !== i && (n += "5" + i)
                    }
                    if (t.superscript) {
                        var s = u(e, t.superscript.slice(r.length));
                        i = v(t.superscript, s.value, r.length) ? "<" + g(s.value) + ">" : s.value,
                            e = x(e, {
                                wasNumber: s.ctx.wasNumber
                            }),
                            "" !== r && "" === i || (n += "9" + i)
                    }
                    return {
                        ctx: e,
                        value: n
                    }
                }
                function g(e) {
                    return /^;/.test(e) ? e.slice(1) : e
                }
                function y(e) {
                    var t = "";
                    if (e)
                        for (var n = 0, r = e; n < r.length; n++) {
                            var i = r[n];
                            if ("command" !== i.type || "\\prime" !== i.value)
                                break;
                            t += "7"
                        }
                    return t
                }
                function v(e, t, n) {
                    var r = e[0]
                        , i = (t.match(/\</g) || []).length
                        , o = /^["|\.|_]?\</.test(t)
                        , s = (t.match(/\>/g) || []).length
                        , a = /["|\.|_]?\>$/.test(t);
                    return !h(t) && e.length - n > 1 && 0 === i && 0 === s || i > 0 && s > 0 && (!o || !a) || i > 1 || s > 1 || r && "typeform" === r.type
                }
                function b() {
                    return {
                        capsLock: !1,
                        wasNumber: !1
                    }
                }
                function x(e, t) {
                    return E({}, e, t)
                }
                function w(e) {
                    var t = b();
                    return u(t, e).value
                }
                var E = this && this.__assign || Object.assign || function (e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++) {
                        t = arguments[n];
                        for (var i in t)
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                    }
                    return e
                }
                    ;
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var _ = n(7)
                    , S = n(11)
                    , k = n(12)
                    , M = n(0);
                t.default = r;
                var C = {
                    "!": "6",
                    "(": '"<',
                    ")": '">',
                    "*": '"9',
                    "+": '"6',
                    ",": "1",
                    "-": '"-',
                    ".": "4",
                    "/": "_/",
                    ":": "3",
                    "<": "@<",
                    "=": '"7',
                    ">": "@>",
                    "?": "8",
                    "[": ".<",
                    "\\ ": " ",
                    "\\%": ".0",
                    "\\&": "@&",
                    "\\,": " ",
                    "\\infty": "#=",
                    "\\int": "!",
                    "\\{": "_<",
                    "\\|": "_\\_\\",
                    "\\}": "_>",
                    "]": ".>",
                    "|": "_\\"
                }
                    , I = {
                        "\\Vert": "_\\_\\",
                        "\\cdot": '"4',
                        "\\div": '"/',
                        "\\ge": "_@>",
                        "\\geq": "_@>",
                        "\\langle": "@<",
                        "\\ldots": "444",
                        "\\le": "_@<",
                        "\\leq": "_@<",
                        "\\ne": '"7@:',
                        "\\neq": '"7@:',
                        "\\parallel": "#L",
                        "\\perp": "#-",
                        "\\prime": "7",
                        "\\prod": ",.P",
                        "\\rangle": "@>",
                        "\\sim": "@9",
                        "\\sum": ",.S",
                        "\\times": '"8',
                        "\\vert": "_\\"
                    }
                    , T = {
                        "\\Alpha": ",.A",
                        "\\Beta": ",.B",
                        "\\Chi": ",.&",
                        "\\Delta": ",.D",
                        "\\Epsilon": ",.E",
                        "\\Eta": ",.:",
                        "\\Gamma": ",.G",
                        "\\Iota": ",.I",
                        "\\Kappa": ",.K",
                        "\\Lambda": ",.L",
                        "\\Mu": ",.M",
                        "\\Nu": ",.N",
                        "\\Omega": ",.W",
                        "\\Omicron": ",.O",
                        "\\Phi": ",.F",
                        "\\Pi": ",.P",
                        "\\Psi": ",.Y",
                        "\\Rho": ",.R",
                        "\\Sigma": ",.S",
                        "\\Tau": ",.T",
                        "\\Theta": ",.?",
                        "\\Upsilon": ",.U",
                        "\\Xi": ",.X",
                        "\\Zeta": ",.Z",
                        "\\alpha": ".A",
                        "\\beta": ".B",
                        "\\chi": ".&",
                        "\\delta": ".D",
                        "\\epsilon": ".E",
                        "\\eta": ".:",
                        "\\gamma": ".G",
                        "\\iota": ".I",
                        "\\kappa": ".K",
                        "\\lambda": ".L",
                        "\\mu": ".M",
                        "\\nu": ".N",
                        "\\omega": ".W",
                        "\\omicron": ".O",
                        "\\phi": ".F",
                        "\\pi": ".P",
                        "\\psi": ".Y",
                        "\\rho": ".R",
                        "\\sigma": ".S",
                        "\\tau": ".T",
                        "\\theta": ".?",
                        "\\upsilon": ".U",
                        "\\xi": ".X",
                        "\\zeta": ".Z"
                    }
            }
            , function (e, t, n) {
                function r(e, t) {
                    for (var n = "", o = t, s = "", a = !1, u = "", d = "", h = i(e), f = 0; f < e.length; f++) {
                        var y = e[f]
                            , v = f + 1 < e.length ? e[f + 1] : null;
                        switch (y.type) {
                            case "terminal":
                                var b = p.getAutoOperator(e.slice(f));
                                "" !== b.value ? (n += b.value,
                                    f += b.terminalCount - 1,
                                    a = a || b.modified) : " " === y.value ? (a ? (s = u,
                                        n += l(o, s),
                                        o = s) : n += "\\ ",
                                        a = !1) : (h[f] === m ? n += "\\left" : h[f] === g && (n += "\\right"),
                                            n += y.value);
                                break;
                            case "comparison":
                                s = "",
                                    n += l(o, s),
                                    o = s,
                                    a = !1,
                                    n += y.value;
                                break;
                            case "level_with_comparison":
                                n += l(o, y.level),
                                    o = y.level,
                                    a = !1,
                                    n += y.value;
                                break;
                            case "command":
                                var x = y.value.slice(1).trim();
                                v && "terminal" === v.type && /[a-z]/.test(v.value) ? (n += x,
                                    a = !1) : p.containsValue(x) ? (n += "\\operatorname{" + x + "}",
                                        a = !0) : (n += y.value,
                                            a = !0),
                                    u = o;
                                break;
                            case "expression":
                                n += y.value;
                                break;
                            case "fraction":
                                n += c(y.numerator, y.denominator, o);
                                break;
                            case "modified_expression":
                                n += r(y.expression, o) + " ",
                                    y.under && (n += "_{" + r(y.under, o) + "}"),
                                    y.over && (n += "^{" + r(y.over, o) + "}");
                                break;
                            case "radical":
                                n += "\\sqrt",
                                    y.index && (n += "[" + r(y.index, o) + "]"),
                                    n += "{" + r(y.value, o) + "}";
                                break;
                            case "simple_subscript":
                                "" === o ? (n += y.base.value + "_{" + y.subscript.value + "}",
                                    "command" === y.base.type && (a = !0,
                                        u = o)) : n += y.base.value + y.subscript.value;
                                break;
                            case "level":
                                n += l(o, y.value, d),
                                    o = y.value,
                                    "^" === y.value && "" !== d && (d = "");
                                break;
                            case "primes":
                                v && "level" === v.type && ";" === v.value ? d = y.value : "" !== o ? (n += Array(y.value.length + 1).join("\\prime "),
                                    d = "") : (n += y.value,
                                        d = "")
                        }
                    }
                    return n += l(o, t) + d,
                        n.replace(/([^\\])( )$/, "$1")
                }
                function i(e) {
                    for (var t = [], n = [], r = 0; r < e.length; r++) {
                        var i = e[r];
                        if (o(i))
                            t.push({
                                direction: m,
                                index: r
                            }),
                                n.push(y);
                        else if (s(i)) {
                            for (; t.length && t[t.length - 1].direction === v;)
                                t.pop();
                            if (t.length) {
                                var c = t.pop();
                                if (c) {
                                    var l = c.index;
                                    n[l] = m,
                                        n.push(g)
                                }
                            } else
                                n.push(y)
                        } else if (a(i))
                            if (t.length && t[t.length - 1].direction === v) {
                                var c = t.pop();
                                if (c) {
                                    var l = c.index;
                                    n[l] = m,
                                        n.push(g)
                                }
                            } else
                                t.push({
                                    direction: v,
                                    index: r
                                }),
                                    n.push(y);
                        else
                            n.push(y)
                    }
                    return n
                }
                function o(e) {
                    return "terminal" === e.type && /^(\\langle |\[|\(|\\{)$/.test(e.value)
                }
                function s(e) {
                    return "terminal" === e.type && /^(\\rangle |\]|\)|\\})$/.test(e.value)
                }
                function a(e) {
                    return "terminal" === e.type && /^(\\\||\|)$/.test(e.value)
                }
                function c(e, t, n) {
                    return "\\frac{" + r(e, n) + "}{" + r(t, n) + "}"
                }
                function l(e, t, n) {
                    var r, i, o, s = "", a = Math.max(e.length, t.length);
                    for (r = 0; r < a && e[r] === t[r]; r++)
                        ;
                    for (i = e.length - 1; i >= r; i--)
                        s += "}";
                    for (o = r; o < t.length; o++)
                        "^" === t[o] && (n && (s += n),
                            s += "^{"),
                            ";" === t[o] && (s += "_{");
                    return s
                }
                function u(e) {
                    return r(e, "")
                }
                function d(e, t) {
                    return t && t.operatorNames ? p.setOperatorNames(t.operatorNames) : p.resetOperatorNames(),
                        f.map(h.default(e, t), u)
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var p = n(2)
                    , h = n(18)
                    , f = n(0)
                    , m = 1
                    , g = -1
                    , y = 0
                    , v = 2;
                t.default = d
            }
            , function (e, t, n) {
                function r(e) {
                    return {
                        type: "terminal",
                        value: e
                    }
                }
                function i(e) {
                    return {
                        type: "command",
                        value: "\\" + e.trim() + " "
                    }
                }
                function o(e) {
                    var t = /[\^;]+/.exec(e)
                        , n = t ? t.toString() : ""
                        , r = e.slice(a.length);
                    return {
                        type: "level_with_comparison",
                        level: n,
                        value: y[r]
                    }
                }
                function s(e) {
                    return {
                        type: "comparison",
                        value: y[e]
                    }
                }
                function a(e) {
                    return {
                        type: "level",
                        value: e
                    }
                }
                function c() {
                    return a("")
                }
                function l(e) {
                    return {
                        type: "primes",
                        value: e
                    }
                }
                function u(e, t) {
                    return {
                        type: "fraction",
                        numerator: e,
                        denominator: t
                    }
                }
                function d(e, t, n) {
                    return {
                        type: "modified_expression",
                        expression: e,
                        under: t,
                        over: n
                    }
                }
                function p(e, t) {
                    return {
                        type: "radical",
                        value: e,
                        index: t
                    }
                }
                function h(e) {
                    return {
                        type: "expression",
                        value: e
                    }
                }
                function f(e, t) {
                    return {
                        type: "simple_subscript",
                        base: e,
                        subscript: t
                    }
                }
                function m(e) {
                    if (v.hasOwnProperty(e))
                        return v[e] + " ";
                    throw new Error("Unknown Greek letter")
                }
                function g() {
                    for (var e = [], t = 0; t < arguments.length; t++)
                        e[t] = arguments[t];
                    return Array.prototype.concat.apply([], e)
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }),
                    t.terminal = r,
                    t.command = i;
                var y = {
                    '"K': "<",
                    '"K:': "\\leq ",
                    $L: "\\parallel ",
                    $P: "\\perp ",
                    ".1": ">",
                    ".1:": "\\geq ",
                    ".K": "=",
                    "/$L": "\\nparallel ",
                    "/.K": "\\neq ",
                    "=": "=",
                    "@:": "\\sim "
                };
                t.level_with_comparison = o,
                    t.comparison = s,
                    t.level = a,
                    t.baseline = c,
                    t.primes = l,
                    t.fraction = u,
                    t.modified_expression = d,
                    t.radical = p,
                    t.expression = h,
                    t.simple_subscript = f;
                var v = {
                    ".&": "\\chi",
                    ".,&": "\\Chi",
                    ".,:": "\\Eta",
                    ".,?": "\\Theta",
                    ".,A": "\\Alpha",
                    ".,B": "\\Beta",
                    ".,D": "\\Delta",
                    ".,E": "\\Epsilon",
                    ".,F": "\\Phi",
                    ".,G": "\\Gamma",
                    ".,I": "\\Iota",
                    ".,K": "\\Kappa",
                    ".,L": "\\Lambda",
                    ".,M": "\\Mu",
                    ".,N": "\\Nu",
                    ".,O": "\\Omicron",
                    ".,P": "\\prod",
                    ".,R": "\\Rho",
                    ".,S": "\\sum",
                    ".,T": "\\Tau",
                    ".,U": "\\Upsilon",
                    ".,W": "\\Omega",
                    ".,X": "\\Xi",
                    ".,Y": "\\Psi",
                    ".,Z": "\\Zeta",
                    ".:": "\\eta",
                    ".?": "\\theta",
                    ".A": "\\alpha",
                    ".B": "\\beta",
                    ".D": "\\delta",
                    ".E": "\\epsilon",
                    ".F": "\\phi",
                    ".G": "\\gamma",
                    ".I": "\\iota",
                    ".K": "\\kappa",
                    ".L": "\\lambda",
                    ".M": "\\mu",
                    ".N": "\\nu",
                    ".O": "\\omicron",
                    ".P": "\\pi",
                    ".R": "\\rho",
                    ".S": "\\sigma",
                    ".T": "\\tau",
                    ".U": "\\upsilon",
                    ".W": "\\omega",
                    ".X": "\\xi",
                    ".Y": "\\psi",
                    ".Z": "\\zeta"
                };
                t.greek = m,
                    t.group = g
            }
            , function (e, t, n) {
                function r(e, t) {
                    t || (t = {});
                    var n = s.parser;
                    t.strict ? n.yy = a : (n.yy = i({
                        warnings: []
                    }, a),
                        n.lexer = c.default);
                    try {
                        return {
                            isError: !1,
                            value: n.parse(e),
                            warnings: n.yy.warnings || []
                        }
                    } catch (e) {
                        return {
                            error: o.default(e),
                            isError: !0
                        }
                    }
                }
                var i = this && this.__assign || Object.assign || function (e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++) {
                        t = arguments[n];
                        for (var i in t)
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                    }
                    return e
                }
                    ;
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var o = n(6)
                    , s = n(9)
                    , a = n(17)
                    , c = n(20);
                t.default = r
            }
            , function (e, t, n) {
                function r(e, t) {
                    t || (t = {});
                    var n = a.parser;
                    t.strict ? n.yy = c : (n.yy = i({
                        warnings: []
                    }, c),
                        n.lexer = s.default);
                    try {
                        return {
                            isError: !1,
                            value: n.parse(e),
                            warnings: n.yy.warnings || []
                        }
                    } catch (e) {
                        return {
                            error: o.default(e),
                            isError: !0
                        }
                    }
                }
                var i = this && this.__assign || Object.assign || function (e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++) {
                        t = arguments[n];
                        for (var i in t)
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                    }
                    return e
                }
                    ;
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var o = n(6)
                    , s = n(21)
                    , a = n(10)
                    , c = n(24);
                t.default = r
            }
            , function (e, t, n) {
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var r = n(9)
                    , i = r.parser.lexer
                    , o = Object.create(i);
                t.default = o;
                var s = r.parser.terminals_
                    , a = r.parser.symbols_;
                o.setInput = function (e, t) {
                    this.delimiterStack = [],
                        this.outputQueue = [],
                        i.setInput.call(this, e, t)
                }
                    ,
                    o.lex = function () {
                        var e = -1;
                        if (!this)
                            return e;
                        if (this.outputQueue.length)
                            return this.outputQueue.shift();
                        var t, n, r = i.lex.call(this), o = this.delimiterStack ? this.delimiterStack[this.delimiterStack.length - 1] : -1;
                        switch (s[r]) {
                            case "OPEN_FRAC":
                            case "OPEN_MODEXP":
                                this.delimiterStack.push(r);
                                break;
                            case "RADICAL_INDEX":
                                o === a.RADICAL_INDEX && (this.delimiterStack.pop(),
                                    this.pushCloseTokens(o)),
                                    this.delimiterStack.push(r);
                                break;
                            case "OPEN_RADICAL":
                                o === a.RADICAL_INDEX && this.delimiterStack.pop(),
                                    this.delimiterStack.push(r);
                                break;
                            case "SLASH":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OPEN_FRAC) {
                                        t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r),
                                    this.delimiterStack.push(r);
                                break;
                            case "CLOSE_FRAC":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.SLASH) {
                                        t = !0;
                                        break
                                    }
                                    if (n === a.OPEN_FRAC) {
                                        this.addMissingToken(a.SLASH),
                                            t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                if (!t)
                                    return this.warn(),
                                        this.lex();
                                break;
                            case "CLOSE_RADICAL":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OPEN_RADICAL) {
                                        t = !0;
                                        break
                                    }
                                    if (n === a.RADICAL_INDEX) {
                                        t = !0,
                                            this.addMissingToken(a.OPEN_RADICAL);
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r);
                                break;
                            case "CLOSE_MODEXP":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OPEN_MODEXP) {
                                        t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r);
                                break;
                            case "EOF":
                                for (; this.delimiterStack.length;)
                                    n = this.delimiterStack.pop() || -1,
                                        this.pushCloseTokens(n)
                        }
                        return this.outputQueue.push(r),
                            e = this.outputQueue.shift() || -1
                    }
                    ,
                    o.warn = function () {
                        this.yylloc && this.yy.warnings.push({
                            location: this.yylloc
                        })
                    }
                    ,
                    o.addMissingToken = function (e) {
                        this.outputQueue.push(e),
                            this.warn()
                    }
                    ,
                    o.pushCloseTokens = function (e) {
                        switch (s[e]) {
                            case "OPEN_FRAC":
                                this.addMissingToken(a.SLASH),
                                    this.addMissingToken(a.CLOSE_FRAC);
                                break;
                            case "SLASH":
                                this.addMissingToken(a.CLOSE_FRAC);
                                break;
                            case "RADICAL_INDEX":
                                this.addMissingToken(a.OPEN_RADICAL),
                                    this.addMissingToken(a.CLOSE_RADICAL);
                                break;
                            case "OPEN_RADICAL":
                                this.addMissingToken(a.CLOSE_RADICAL);
                                break;
                            case "OPEN_MODEXP":
                                this.addMissingToken(a.CLOSE_MODEXP)
                        }
                    }
                    ,
                    o.pushOpenTokens = function (e) {
                        switch (s[e]) {
                            case "SLASH":
                                this.addMissingToken(a.OPEN_FRAC);
                                break;
                            case "CLOSE_FRAC":
                                this.addMissingToken(a.OPEN_FRAC),
                                    this.addMissingToken(a.SLASH);
                                break;
                            case "CLOSE_RADICAL":
                                this.addMissingToken(a.OPEN_RADICAL);
                                break;
                            case "CLOSE_MODEXP":
                                this.addMissingToken(a.OPEN_MODEXP)
                        }
                    }
            }
            , function (e, t, n) {
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var r = n(10)
                    , i = r.parser.lexer
                    , o = Object.create(i);
                t.default = o;
                var s = r.parser.terminals_
                    , a = r.parser.symbols_;
                o.setInput = function (e, t) {
                    this.delimiterStack = [],
                        this.outputQueue = [],
                        i.setInput.call(this, e, t)
                }
                    ,
                    o.lex = function () {
                        var e = -1;
                        if (this.outputQueue.length)
                            return this.outputQueue.shift();
                        var t, n, r = i.lex.call(this), o = this.delimiterStack ? this.delimiterStack[this.delimiterStack.length - 1] : -1;
                        switch (s[r]) {
                            case "OPEN_FRAC":
                                this.delimiterStack.push(r);
                                break;
                            case "OPEN_GROUP":
                                this.delimiterStack.push(r);
                                break;
                            case "RADICAL_WITH_INDEX":
                                o === a.RADICAL_WITH_INDEX && (this.delimiterStack.pop(),
                                    this.pushCloseTokens(o)),
                                    this.delimiterStack.push(r);
                                break;
                            case "RADICAL":
                                o === a.RADICAL_WITH_INDEX && this.delimiterStack.pop(),
                                    this.delimiterStack.push(r);
                                break;
                            case "OVER":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OPEN_FRAC) {
                                        t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r),
                                    this.delimiterStack.push(r);
                                break;
                            case "CLOSE_FRAC":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OVER) {
                                        t = !0;
                                        break
                                    }
                                    if (n === a.OPEN_FRAC) {
                                        this.outputQueue.push(a.OVER),
                                            t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r);
                                break;
                            case "CLOSE_GROUP":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.OPEN_GROUP) {
                                        t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r);
                                break;
                            case "CLOSE_RADICAL":
                                for (t = !1; this.delimiterStack.length;) {
                                    if (n = this.delimiterStack.pop() || -1,
                                        n === a.RADICAL || n === a.RADICAL_WITH_INDEX) {
                                        t = !0;
                                        break
                                    }
                                    this.pushCloseTokens(n)
                                }
                                t || this.pushOpenTokens(r);
                                break;
                            case "EOF":
                                for (; this.delimiterStack.length;)
                                    n = this.delimiterStack.pop() || -1,
                                        this.pushCloseTokens(n)
                        }
                        return this.outputQueue.push(r),
                            e = this.outputQueue.shift() || -1
                    }
                    ,
                    o.warn = function () {
                        this.yylloc && this.yy.warnings.push({
                            location: this.yylloc
                        })
                    }
                    ,
                    o.addMissingToken = function (e) {
                        this.outputQueue.push(e),
                            this.warn()
                    }
                    ,
                    o.pushCloseTokens = function (e) {
                        switch (s[e]) {
                            case "OPEN_FRAC":
                                this.addMissingToken(a.OVER),
                                    this.addMissingToken(a.CLOSE_FRAC);
                                break;
                            case "OVER":
                                this.addMissingToken(a.CLOSE_FRAC);
                                break;
                            case "OPEN_GROUP":
                                this.addMissingToken(a.CLOSE_GROUP);
                                break;
                            case "RADICAL_WITH_INDEX":
                            case "RADICAL":
                                this.addMissingToken(a.CLOSE_RADICAL)
                        }
                    }
                    ,
                    o.pushOpenTokens = function (e) {
                        switch (s[e]) {
                            case "OVER":
                                this.addMissingToken(a.OPEN_FRAC);
                                break;
                            case "CLOSE_FRAC":
                                this.addMissingToken(a.OPEN_FRAC),
                                    this.addMissingToken(a.OVER);
                                break;
                            case "CLOSE_GROUP":
                                this.addMissingToken(a.OPEN_GROUP);
                                break;
                            case "CLOSE_RADICAL":
                                this.addMissingToken(a.RADICAL)
                        }
                    }
            }
            , function (e, t, n) {
                function r(e) {
                    return e.isError
                }
                function i(e) {
                    return !e.isError
                }
                function o(e, t) {
                    return r(e) ? e : {
                        isError: !1,
                        value: t(e.value)
                    }
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }),
                    t.isErr = r,
                    t.isOk = i,
                    t.map = o
            }
            , function (e, t, n) {
                function r(e, t) {
                    for (var n = "", o = !1, s = "", a = i(e), d = 0; d < e.length; d++) {
                        var h = e[d]
                            , f = d + 1 < e.length ? e[d + 1] : null;
                        switch (h.type) {
                            case "terminal":
                                var y = p.getAutoOperator(e.slice(d));
                                "" !== y.value ? (n += y.value,
                                    d += y.terminalCount - 1) : " " !== h.value || o ? (a[d] === m ? n += "\\left" : a[d] === g && (n += "\\right"),
                                        n += h.value) : n += "\\ ",
                                    o = !1;
                                break;
                            case "command":
                                var v = h.value.slice(1).trim();
                                f && "terminal" === f.type && /[a-z]/.test(f.value) ? (n += v,
                                    o = !1) : p.containsValue(v) ? (n += "\\operatorname{" + v + "}",
                                        o = !0) : (n += h.value,
                                            o = !0);
                                break;
                            case "expression":
                                n += h.value;
                                break;
                            case "fraction":
                                n += c(h.numerator, h.denominator);
                                break;
                            case "radical":
                                n += "\\sqrt",
                                    h.index && (n += "[" + r(h.index) + "]"),
                                    n += "{" + r(h.value) + "}";
                                break;
                            case "basic_level":
                                n += l(h.level, h.value, s),
                                    "9" === h.level && (s = "");
                                break;
                            case "bracketed_level":
                                n += u(h.level, h.lbrack, h.value, h.rbrack, s),
                                    "9" === h.level && (s = "");
                                break;
                            case "primes":
                                !f || "basic_level" !== f.type && "bracketed_level" !== f.type || "5" !== f.level ? t && "" !== t ? (n += Array(h.value.length + 1).join("\\prime "),
                                    s = "") : (n += h.value,
                                        s = "") : s = h.value
                        }
                    }
                    return n += s,
                        n.replace(/([^\\])( )$/, "$1")
                }
                function i(e) {
                    for (var t = [], n = [], r = 0; r < e.length; r++) {
                        var i = e[r];
                        if (o(i))
                            t.push({
                                direction: m,
                                index: r
                            }),
                                n.push(y);
                        else if (s(i)) {
                            for (; t.length && t[t.length - 1].direction === v;)
                                t.pop();
                            if (t.length) {
                                var c = t.pop();
                                if (c) {
                                    var l = c.index;
                                    n[l] = m,
                                        n.push(g)
                                }
                            } else
                                n.push(y)
                        } else if (a(i))
                            if (t.length && t[t.length - 1].direction === v) {
                                var c = t.pop();
                                if (c) {
                                    var l = c.index;
                                    n[l] = m,
                                        n.push(g)
                                }
                            } else
                                t.push({
                                    direction: v,
                                    index: r
                                }),
                                    n.push(y);
                        else
                            n.push(y)
                    }
                    return n
                }
                function o(e) {
                    return "terminal" === e.type && /^(\\langle |\[|\(|\\{)$/.test(e.value)
                }
                function s(e) {
                    return "terminal" === e.type && /^(\\rangle |\]|\)|\\})$/.test(e.value)
                }
                function a(e) {
                    return "terminal" === e.type && /^(\\\||\|)$/.test(e.value)
                }
                function c(e, t) {
                    return "\\frac{" + r(e) + "}{" + r(t) + "}"
                }
                function l(e, t, n) {
                    var i = ""
                        , o = "{" + r(t, e) + "}";
                    return "9" === e ? i += n + "^" + o : "5" === e && (i += "_" + o),
                        i
                }
                function u(e, t, n, i, o) {
                    var s = ""
                        , a = "{" + t + r(n, e) + i + "}";
                    return "9" === e ? s += o + "^" + a : "5" === e && (s += "_" + a),
                        s
                }
                function d(e, t) {
                    return t && t.operatorNames ? p.setOperatorNames(t.operatorNames) : p.resetOperatorNames(),
                        f.map(h.default(e, t), function (e) {
                            return b(e, "")
                        })
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var p = n(2)
                    , h = n(19)
                    , f = n(0)
                    , m = 1
                    , g = -1
                    , y = 0
                    , v = 2
                    , b = r;
                t.default = d
            }
            , function (e, t, n) {
                function r(e) {
                    return {
                        type: "terminal",
                        value: e
                    }
                }
                function i(e) {
                    return {
                        type: "command",
                        value: e
                    }
                }
                function o(e, t) {
                    return {
                        type: "basic_level",
                        level: e,
                        value: t
                    }
                }
                function s(e, t, n, r) {
                    return {
                        type: "bracketed_level",
                        level: e,
                        lbrack: t,
                        value: n,
                        rbrack: r
                    }
                }
                function a(e) {
                    var t = e.length > 0 ? Array(e.length + 1).join("'") : "";
                    return {
                        type: "primes",
                        value: t
                    }
                }
                function c(e, t) {
                    return {
                        type: "fraction",
                        numerator: e,
                        denominator: t
                    }
                }
                function l(e, t) {
                    return {
                        type: "radical",
                        value: e,
                        index: t
                    }
                }
                function u(e) {
                    return {
                        type: "expression",
                        value: e
                    }
                }
                function d() {
                    for (var e = [], t = 0; t < arguments.length; t++)
                        e[t] = arguments[t];
                    return Array.prototype.concat.apply([], e)
                }
                function p(e) {
                    if (f.hasOwnProperty(e))
                        return f[e] + " ";
                    throw new Error("Unknown Greek letter")
                }
                function h(e) {
                    for (var t = "", n = "A".charCodeAt(0) - 1, r = 0, i = e; r < i.length; r++) {
                        var o = i[r];
                        t += "4" === o ? "." : "J" === o ? "0" : o.charCodeAt(0) - n
                    }
                    return t
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }),
                    t.terminal = r,
                    t.command = i,
                    t.basic_level = o,
                    t.bracketed_level = s,
                    t.primes = a,
                    t.fraction = c,
                    t.radical = l,
                    t.expression = u,
                    t.group = d;
                var f = {
                    ",.&": "\\Chi",
                    ",.:": "\\Eta",
                    ",.?": "\\Theta",
                    ",.A": "\\Alpha",
                    ",.B": "\\Beta",
                    ",.D": "\\Delta",
                    ",.E": "\\Epsilon",
                    ",.F": "\\Phi",
                    ",.G": "\\Gamma",
                    ",.I": "\\Iota",
                    ",.K": "\\Kappa",
                    ",.L": "\\Lambda",
                    ",.M": "\\Mu",
                    ",.N": "\\Nu",
                    ",.O": "\\Omicron",
                    ",.P": "\\prod",
                    ",.R": "\\Rho",
                    ",.S": "\\sum",
                    ",.T": "\\Tau",
                    ",.U": "\\Upsilon",
                    ",.W": "\\Omega",
                    ",.X": "\\Xi",
                    ",.Y": "\\Psi",
                    ",.Z": "\\Zeta",
                    ".&": "\\chi",
                    ".:": "\\eta",
                    ".?": "\\theta",
                    ".A": "\\alpha",
                    ".B": "\\beta",
                    ".D": "\\delta",
                    ".E": "\\epsilon",
                    ".F": "\\phi",
                    ".G": "\\gamma",
                    ".I": "\\iota",
                    ".K": "\\kappa",
                    ".L": "\\lambda",
                    ".M": "\\mu",
                    ".N": "\\nu",
                    ".O": "\\omicron",
                    ".P": "\\pi",
                    ".R": "\\rho",
                    ".S": "\\sigma",
                    ".T": "\\tau",
                    ".U": "\\upsilon",
                    ".W": "\\omega",
                    ".X": "\\xi",
                    ".Y": "\\psi",
                    ".Z": "\\zeta"
                };
                t.greek = p,
                    t.to_number = h
            }
            , function (e, t, n) {
                function r(e) {
                    return String.fromCharCode(h + e)
                }
                function i(e) {
                    return e.charCodeAt(0) - h
                }
                function o(e) {
                    return p[e]
                }
                function s(e) {
                    return p.indexOf(e)
                }
                function a(e) {
                    for (var t = "", n = 0, i = e; n < i.length; n++) {
                        var o = i[n];
                        t += r(s(o))
                    }
                    return t
                }
                function c(e) {
                    for (var t = "", n = 0, r = e; n < r.length; n++) {
                        var s = r[n];
                        t += o(i(s))
                    }
                    return t
                }
                function l(e) {
                    return c(e).replace(/[@-^]/g, function (e) {
                        return String.fromCharCode(e.charCodeAt(0) + 32)
                    })
                }
                function u(e) {
                    var t = "";
                    if (e)
                        for (var n = 0, r = e; n < r.length; n++) {
                            var i = r[n]
                                , o = i.charCodeAt(0);
                            96 <= o && o <= 127 && (o -= 32,
                                i = String.fromCharCode(o)),
                                32 <= o && o <= 95 && (i = a(i),
                                    o = i.charCodeAt(0)),
                                10305 <= o && o <= 10495 && (o = 10240 + (o - 1024) % 64,
                                    i = String.fromCharCode(o)),
                                t += 10240 <= o && o <= 10304 ? i : String.fromCharCode(10240)
                        }
                    return t
                }
                function d(e) {
                    for (var t = 0; t < e.length; t++) {
                        var n = e.charCodeAt(t);
                        if (n < 10240 || n > 10304)
                            return !1
                    }
                    return !0
                }
                Object.defineProperty(t, "__esModule", {
                    value: !0
                });
                var p = " A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)="
                    , h = 10240;
                t.toBrailleAscii = c,
                    t.toExpandedBrailleAscii = l,
                    t.coerceToSixDotCells = u,
                    t.isSixDotCells = d
            }
            , function (e, t, n) {
                n(3),
                    e.exports = n(3)
            }
        ])
    }),
    define("loadcss!basic/keypad/braille-example-row", function () { }),
    define("basic/keypad/braille-example-row", ["require", "exports", "tslib", "dcgview", "dcgview-helpers/static-mathquill-view", "abraham", "loadcss!./braille-example-row"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r.Components.For
            , a = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement("tr", null, r.createElement(s, {
                            each: function () {
                                return e.getBrailleAscii(e.props.latex())
                            },
                            key: function (e) {
                                return e.key
                            }
                        }, r.createElement("td", null, function (e) {
                            return r.createElement("span", {
                                class: r.const("dcg-key-press")
                            }, function () {
                                return e.char
                            })
                        })), r.createElement("td", {
                            class: r.const("dcg-braille-font")
                        }, function () {
                            return e.getBrailleUnicode(e.props.latex())
                        }), r.createElement("td", null, r.createElement(i.default, {
                            latex: function () {
                                return e.props.latex()
                            }
                        })))
                    }
                    ,
                    t.prototype.getBrailleAscii = function (e) {
                        for (var t = o.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)), n = [], r = 0; r < t.length; r++)
                            n.push({
                                char: t[r],
                                key: r + ")" + t[r]
                            });
                        return n
                    }
                    ,
                    t.prototype.getBrailleUnicode = function (e) {
                        var t;
                        return "nemeth" === this.props.brailleMode() ? t = o.latexToNemeth(e) : "ueb" === this.props.brailleMode() && (t = o.latexToUeb(e)),
                            t && t.value ? t.value : ""
                    }
                    ,
                    t
            }(r.Class);
        t.BrailleExampleRow = a
    }),
    define("loadcss!basic/keypad/braille-keypad", function () { }),
    define("basic/keypad/braille-keypad", ["require", "exports", "tslib", "dcgview", "basic/dcgview-basic", "./braille-example-row", "loadcss!./braille-keypad"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement("div", {
                        class: r.const("dcg-braille-io-keypad-container")
                    }, r.createElement("div", {
                        class: r.const("dcg-braille-io-keypad")
                    }, r.createElement("div", {
                        class: r.const("dcg-braille-description")
                    }, r.createElement("div", {
                        class: r.const("dcg-braille-title")
                    }, function () {
                        return e.controller.t("__mode__ is on!", {
                            mode: e.brailleType()
                        })
                    }), r.createElement("div", {
                        class: r.const("dcg-braille-info-text")
                    }, function () {
                        return e.controller.t("Use a Refreshable Braille display, or just type Braille with a keyboard.")
                    }), r.createElement("div", {
                        class: r.const("dcg-blue-btn"),
                        role: r.const("button"),
                        tabindex: r.const(0),
                        onTap: function () {
                            return e.controller.dispatch({
                                type: "set-braille-mode",
                                mode: "none"
                            })
                        }
                    }, function () {
                        return e.controller.t("Turn __mode__ off", {
                            mode: e.brailleType()
                        })
                    })), r.createElement("div", {
                        class: r.const("dcg-braille-examples-table-container")
                    }, r.createElement("table", {
                        class: r.const("dcg-braille-examples-table")
                    }, r.createElement("tr", null, r.createElement("th", null, function () {
                        return e.controller.t("Type this")
                    }), r.createElement("th", null, function () {
                        return e.brailleType()
                    }), r.createElement("th", null, function () {
                        return e.controller.t("Typeset")
                    })), r.createElement(o.BrailleExampleRow, {
                        brailleMode: function () {
                            return e.controller.getBrailleMode()
                        },
                        latex: this.const("2+2")
                    }), r.createElement(o.BrailleExampleRow, {
                        brailleMode: function () {
                            return e.controller.getBrailleMode()
                        },
                        latex: this.const("\\frac{1}{2}")
                    }), r.createElement(o.BrailleExampleRow, {
                        brailleMode: function () {
                            return e.controller.getBrailleMode()
                        },
                        latex: this.const("\\sqrt{4}")
                    })), r.createElement("div", {
                        class: r.const("dcg-more-examples-link")
                    }, r.createElement("a", {
                        href: function () {
                            return "https://www.desmos.com/braille-examples?" + e.controller.getBrailleMode()
                        },
                        target: r.const("_blank")
                    }, function () {
                        return e.controller.t("View more examples")
                    })))))
                }
                ,
                t.prototype.brailleType = function () {
                    return "nemeth" === this.controller.getBrailleMode() ? "Nemeth" : "ueb" === this.controller.getBrailleMode() ? "UEB" : ""
                }
                ,
                t
        }(i.DCGViewBasic);
        t.default = s
    }),
    define("expressions/braille-input", ["require", "exports", "tslib", "dcgview", "jquery"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.Input
            , s = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.init = function () {
                        this.ASCIICharacters = " A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",
                            this.ASCIITable = [],
                            this.HomeRowCharacters = "FDSJKL",
                            this.charCodes = [],
                            this.sixKeyModel = {
                                keysDown: 0,
                                stickyKeysDown: 0
                            };
                        var e;
                        for (e = 0; e < this.ASCIICharacters.length; e++)
                            this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));
                        for (e = 0; e < this.HomeRowCharacters.length; e++)
                            this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return r.createElement(o, {
                            class: this.const("dcg-braille-input"),
                            onKeydown: this.bindFn(this.onKeydown),
                            onKeyup: this.bindFn(this.onKeyup),
                            onInput: this.bindFn(this.props.onInput),
                            value: function () {
                                return e.props.value()
                            },
                            "aria-label": function () {
                                return e.props.ariaLabel() || ""
                            },
                            didMount: this.bindFn(this.didMount),
                            didUnmount: this.bindFn(this.props.didUnmount)
                        })
                    }
                    ,
                    t.prototype.didMount = function (e) {
                        var t = this;
                        this.rootNode = e,
                            i(this.rootNode).on("focus", function () {
                                t.props.onFocusedChanged(!0)
                            }).on("blur", function () {
                                t.props.onFocusedChanged(!1)
                            }),
                            this.props.didMount(e)
                    }
                    ,
                    t.prototype.onKeydown = function (e) {
                        var t = this.charCodes.indexOf(e.which);
                        return !this.isSixKeyInput() || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || t === -1 ? this.props.onKeydown(e) : (e.preventDefault(),
                            this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                                keysDown: this.addKey(this.sixKeyModel.keysDown, t),
                                stickyKeysDown: this.addKey(this.sixKeyModel.stickyKeysDown, t)
                            }),
                            !1)
                    }
                    ,
                    t.prototype.onKeyup = function (e) {
                        var t = this.charCodes.indexOf(e.which)
                            , r = !1;
                        return !this.isSixKeyInput() || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || t === -1 ? r = !0 : (this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                            keysDown: this.removeKey(this.sixKeyModel.keysDown, t)
                        }),
                            0 === this.sixKeyModel.keysDown && (this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),
                                this.sixKeyModel = n.__assign({}, this.sixKeyModel, {
                                    stickyKeysDown: 0
                                }))),
                            r || e.preventDefault(),
                            r
                    }
                    ,
                    t.prototype.addKey = function (e, t) {
                        return e | 1 << t
                    }
                    ,
                    t.prototype.removeKey = function (e, t) {
                        return e & ~(1 << t)
                    }
                    ,
                    t.prototype.bitsToASCII = function (e) {
                        return String.fromCharCode(this.ASCIITable[e])
                    }
                    ,
                    t.prototype.addCharacter = function (e) {
                        this.rootNode && (this.rootNode.setRangeText(e, this.rootNode.selectionStart, this.rootNode.selectionEnd, "end"),
                            this.props.onInput(this.rootNode.value))
                    }
                    ,
                    t.prototype.isSixKeyInput = function () {
                        return "function" == typeof this.props.sixKeyInput && this.props.sixKeyInput()
                    }
                    ,
                    t
            }(r.Class);
        t.default = s
    }),
    define("loadcss!Abraham", function () { }),
    define("loadcss!basic/expression-view", function () { }),
    define("basic/expression-view", ["require", "exports", "keys", "tslib", "graphing/label", "dcgview", "i18n", "jquery", "dcgview-helpers/static-mathquill-view", "dcgview-helpers/mathquill-view", "./dcgview-basic", "abraham", "expressions/braille-input", "loadcss!Abraham", "loadcss!./expression-view"], function (e, t, n, r, i, o, s, a, c, l, u, d, p) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = o.Components
            , f = h.If
            , m = h.Input
            , g = h.Textarea
            , y = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return r.__extends(t, e),
                    t.prototype.getAriaLabel = function () {
                        var e = this.getIndex() + 1 + "";
                        return this.t("Expression __index__", {
                            index: e
                        })
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        this.renderAnsValue(),
                            this.controller.renderAsBraille() && this.getIsFocused() && this.focusBrailleInput()
                    }
                    ,
                    t.prototype.didMountMQ = function (e) {
                        this.$mq = a(e)
                    }
                    ,
                    t.prototype.getExp = function () {
                        return this.model.getExpressionById(this.props.id())
                    }
                    ,
                    t.prototype.getAns = function () {
                        return this.model.getExpressionAns(this.props.id())
                    }
                    ,
                    t.prototype.getLatex = function () {
                        return this.getExp().latex
                    }
                    ,
                    t.prototype.getValue = function () {
                        return this.model.getExpressionValue(this.props.id())
                    }
                    ,
                    t.prototype.getBraille = function () {
                        var e = this.getExp().braille;
                        if ("" !== e)
                            return e;
                        var t = this.getBrailleValue(this.getLatex());
                        return t.isError ? "" : d.UnicodeBraille.toExpandedBrailleAscii(t.value)
                    }
                    ,
                    t.prototype.getBrailleValue = function (e) {
                        return "nemeth" === this.controller.getBrailleMode() ? d.latexToNemeth(e) : d.latexToUeb(e)
                    }
                    ,
                    t.prototype.getLatexValue = function (e) {
                        return "nemeth" === this.controller.getBrailleMode() ? d.nemethToLatex(e) : d.uebToLatex(e)
                    }
                    ,
                    t.prototype.getIndex = function () {
                        return this.model.getExpressionIndex(this.props.id())
                    }
                    ,
                    t.prototype.getShowEvaluation = function () {
                        return this.model.shouldShowEvaluationForExpression(this.props.id())
                    }
                    ,
                    t.prototype.getError = function () {
                        var e = this.model.getExpressionError(this.props.id());
                        return e && this.getLatex().length > 0 ? this.t(s.unpack(e)) : ""
                    }
                    ,
                    t.prototype.showError = function () {
                        return !!this.getError()
                    }
                    ,
                    t.prototype.getIsFocused = function () {
                        return this.model.isExpressionFocused(this.props.id())
                    }
                    ,
                    t.prototype.onFocusedChanged = function (e) {
                        this.getExp() && (e ? this.dispatch({
                            type: "focusin",
                            id: this.props.id()
                        }) : this.dispatch({
                            type: "focusout",
                            id: this.props.id()
                        }))
                    }
                    ,
                    t.prototype.onMQReflow = function () {
                        this.renderedAnsData = void 0,
                            this.renderAnsValue()
                    }
                    ,
                    t.prototype.renderAnsValue = function () {
                        if (this.$mq) {
                            var e = this.getAns();
                            this.renderedAnsData && this.renderedAnsData.value == e || (this.renderedAnsData = {
                                value: e
                            },
                                this.$mq.find(".dcg-mq-ans").each(function (t, n) {
                                    var r = a(n);
                                    if (null != e) {
                                        var o = i.truncatedHTMLLabel(e, {
                                            digits: 6,
                                            addEllipses: !0,
                                            bigCutoff: 1e4
                                        });
                                        r.removeClass("dcg-invalid").html(o)
                                    } else
                                        r.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')
                                }))
                        }
                    }
                    ,
                    t.prototype.getEvaluationLatex = function () {
                        var e = this.getValue();
                        void 0 === e && (e = NaN);
                        var t = "=" + i.truncatedLatexLabel(e, {
                            digits: this.getEvaluationDigits(),
                            bigCutoff: 1e9
                        });
                        return t
                    }
                    ,
                    t.prototype.getEvaluationBraille = function () {
                        var e = this.getEvaluationLatex()
                            , t = this.getBrailleValue(e);
                        return t.isError ? "" : d.UnicodeBraille.toExpandedBrailleAscii(t.value)
                    }
                    ,
                    t.prototype.didMountBrailleInput = function (e) {
                        this.brailleInputNode = e,
                            this.focusBrailleInput()
                    }
                    ,
                    t.prototype.didUnmountBrailleInput = function () {
                        this.brailleInputNode = void 0
                    }
                    ,
                    t.prototype.handleBrailleFocus = function (e) {
                        var t = e.target;
                        t && setTimeout(function () {
                            t.setSelectionRange(0, 0)
                        })
                    }
                    ,
                    t.prototype.handleBrailleKeydown = function (e) {
                        if (!(e.altKey || e.ctrlKey || e.metaKey || e.shiftKey)) {
                            if (n.lookup(e) === n.UP)
                                return this.forceModelFocus(),
                                    this.dispatch({
                                        type: "focus-prev-expression"
                                    }),
                                    !1;
                            if (n.lookup(e) === n.DOWN)
                                return this.forceModelFocus(),
                                    this.dispatch({
                                        type: "focus-next-expression"
                                    }),
                                    !1;
                            if (n.lookup(e) === n.ENTER)
                                return this.forceModelFocus(),
                                    this.dispatch({
                                        type: "insert-blank-expression"
                                    }),
                                    !1;
                            if (n.lookup(e) === n.BACKSPACE && document.activeElement === this.brailleInputNode && "" === this.getBraille())
                                return this.dispatch({
                                    type: "backspace-from-braille"
                                }),
                                    !1
                        }
                        return !0
                    }
                    ,
                    t.prototype.forceModelFocus = function () {
                        document.activeElement !== this.brailleInputNode && this.onFocusedChanged(!0)
                    }
                    ,
                    t.prototype.focusBrailleInput = function () {
                        this.brailleInputNode && document.activeElement !== this.brailleInputNode && this.brailleInputNode.focus()
                    }
                    ,
                    t.prototype.getPostLabel = function () {
                        if (this.showError())
                            return this.getError();
                        if (this.getShowEvaluation()) {
                            var e = this.getValue();
                            return void 0 === e && (e = NaN),
                                "equals " + i.value(e).ariaString
                        }
                        return ""
                    }
                    ,
                    t.prototype.onBrailleInput = function (e) {
                        this.controller.isSettingsMenuOpen() && this.controller.dispatch({
                            type: "close-settings-menu"
                        });
                        var t = this.getLatexValue(d.UnicodeBraille.coerceToSixDotCells(e));
                        this.dispatch({
                            type: "update-latex-from-braille",
                            latex: t.isError ? "" : t.value,
                            braille: e,
                            id: this.props.id()
                        })
                    }
                    ,
                    t.prototype.getIndexSubscript = function () {
                        return "_{" + (this.getIndex() + 1) + "}"
                    }
                    ,
                    t.prototype.getEvaluationDigits = function () {
                        return this.controller.isScientificCalc() ? 14 : 8
                    }
                    ,
                    t.prototype.template = function () {
                        var e = this;
                        return o.createElement("div", {
                            class: function () {
                                return {
                                    "dcg-basic-expression": !0,
                                    "dcg-focused": e.getIsFocused(),
                                    "dcg-braille-io": e.controller.renderAsBraille()
                                }
                            }
                        }, o.createElement(f, {
                            predicate: function () {
                                return e.controller.renderAsBraille()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-braille-input")
                            }, o.createElement(p.default, {
                                ariaLabel: function () {
                                    var t = e.getBrailleValue("eq" + e.getIndexSubscript());
                                    return t.isError ? "" : d.UnicodeBraille.toExpandedBrailleAscii(t.value)
                                },
                                didMount: e.bindFn(e.didMountBrailleInput),
                                didUnmount: e.bindFn(e.didUnmountBrailleInput),
                                onFocusedChanged: e.bindFn(e.onFocusedChanged),
                                onKeydown: e.bindFn(e.handleBrailleKeydown),
                                onInput: e.bindFn(e.onBrailleInput),
                                sixKeyInput: function () {
                                    return e.controller.getSixKeyInput()
                                },
                                value: function () {
                                    return e.getBraille()
                                }
                            }))
                        }), o.createElement(f, {
                            predicate: function () {
                                return e.controller.renderAsBraille()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-braille-evaluation-container")
                            }, o.createElement(f, {
                                predicate: function () {
                                    return e.getShowEvaluation()
                                }
                            }, function () {
                                return o.createElement("div", {
                                    class: o.const("dcg-braille-evaluation")
                                }, o.createElement(m, {
                                    readonly: e.const("true"),
                                    class: e.const("dcg-braille-evaluation-inner"),
                                    value: function () {
                                        return e.getEvaluationBraille()
                                    },
                                    onFocus: e.bindFn(e.handleBrailleFocus),
                                    onKeydown: e.bindFn(e.handleBrailleKeydown),
                                    onInput: function () { }
                                }))
                            }), o.createElement(f, {
                                predicate: function () {
                                    return e.showError()
                                }
                            }, function () {
                                return o.createElement("div", {
                                    class: o.const("dcg-braille-error")
                                }, o.createElement("div", {
                                    class: o.const("dcg-basic-expression-error")
                                }, o.createElement("i", {
                                    class: o.const("dcg-icon-error")
                                })), o.createElement(g, {
                                    readonly: e.const("true"),
                                    class: e.const("dcg-braille-error-inner"),
                                    value: function () {
                                        return e.getError()
                                    },
                                    onFocus: e.bindFn(e.handleBrailleFocus),
                                    onKeydown: e.bindFn(e.handleBrailleKeydown),
                                    onInput: function () { }
                                }))
                            }))
                        }), o.createElement(f, {
                            predicate: function () {
                                return e.controller.renderAsBraille()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-exp-mathquill-container"),
                                didMount: e.bindFn(e.didMountMQ),
                                onTap: e.bindFn(e.forceModelFocus)
                            }, o.createElement(c.default, {
                                latex: function () {
                                    return e.getLatex()
                                },
                                onReflow: e.bindFn(e.onMQReflow)
                            }))
                        }), o.createElement(f, {
                            predicate: function () {
                                return !e.controller.renderAsBraille()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-exp-mathquill-container"),
                                didMount: e.bindFn(e.didMountMQ)
                            }, o.createElement(l.default, {
                                latex: function () {
                                    return e.getLatex()
                                },
                                onReflow: e.bindFn(e.onMQReflow),
                                isFocused: function () {
                                    return !e.controller.renderAsBraille() && e.getIsFocused()
                                },
                                config: e.const({
                                    typingAsteriskWritesTimesSymbol: e.controller.getTypingAsteriskWritesTimesSymbol(),
                                    typingSlashWritesDivisionSymbol: e.controller.getTypingSlashWritesDivisionSymbol()
                                }),
                                getAriaLabel: function () {
                                    return e.getAriaLabel()
                                },
                                getAriaPostLabel: function () {
                                    return e.getPostLabel()
                                },
                                hasError: function () {
                                    return !1
                                },
                                onUserPressedKey: function (t, n) {
                                    e.controller.isSettingsMenuOpen() && e.controller.dispatch({
                                        type: "close-settings-menu"
                                    }),
                                        e.dispatch({
                                            type: "keypad/press-key",
                                            key: t,
                                            evt: n
                                        })
                                },
                                onUserTypedText: function (t) {
                                    return e.dispatch({
                                        type: "keypad/type-text",
                                        text: t
                                    })
                                },
                                onUserChangedLatex: function (t) {
                                    e.dispatch({
                                        type: "update-latex",
                                        id: e.props.id(),
                                        latex: t
                                    })
                                },
                                onFocusedChanged: e.bindFn(e.onFocusedChanged),
                                disableSpace: function () {
                                    return e.controller.getRestrictedEditing()
                                }
                            }))
                        }), o.createElement("div", {
                            class: o.const("dcg-exp-output-container")
                        }, o.createElement(f, {
                            predicate: function () {
                                return e.showError() && !e.controller.renderAsBraille()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-basic-expression-error dcg-tooltip tipsy-sticky"),
                                "tipsy-dir": o.const("ne"),
                                tooltip: e.bindFn(e.getError)
                            }, o.createElement("i", {
                                class: o.const("dcg-icon-error")
                            }))
                        }), o.createElement(f, {
                            predicate: function () {
                                return e.getShowEvaluation()
                            }
                        }, function () {
                            return o.createElement("div", {
                                class: o.const("dcg-basic-expression-value")
                            }, o.createElement(c.default, {
                                latex: function () {
                                    return e.getEvaluationLatex()
                                }
                            }))
                        })))
                    }
                    ,
                    t
            }(u.DCGViewBasic);
        t.default = y
    }),
    define("loadcss!basic/basic-list-view", function () { }),
    define("basic/basic-list-view", ["require", "exports", "scroll_helpers", "tslib", "dcgview", "./dcgview-basic", "./expression-view", "jquery", "lib/conditional_blur", "loadcss!./basic-list-view", "tipsy"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = i.Components
            , u = l.For
            , d = l.If
            , p = function (e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.didShowAnswerHint = !1,
                        t.didHideAnswerHint = !1,
                        t
                }
                return r.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return i.createElement("div", {
                            class: i.const("dcg-basic-list-container"),
                            role: i.const("complementary"),
                            "aria-label": function () {
                                return e.controller.t("Expression List")
                            },
                            didMount: this.bindFn(this.didMountContainer)
                        }, i.createElement("div", {
                            class: i.const("dcg-basic-list-placeholder"),
                            didMount: this.bindFn(this.didMountPlaceholder)
                        }, i.createElement(d, {
                            predicate: this.bindFn(this.showAnswerHint)
                        }, function () {
                            return i.createElement("div", {
                                class: i.const("dcg-answer-hint")
                            }, function () {
                                return e.controller.t("Your answers show up on this side.")
                            })
                        })), i.createElement(u, {
                            each: function () {
                                return e.model.getExpressionOrder()
                            }
                        }, i.createElement("div", {
                            class: i.const("dcg-basic-list"),
                            style: function () {
                                return {
                                    "font-size": e.controller.getListFontSize() + "px"
                                }
                            }
                        }, function (t) {
                            return i.createElement(s.default, {
                                controller: e.props.controller,
                                id: e.const(t)
                            })
                        })))
                    }
                    ,
                    t.prototype.didMountPlaceholder = function (e) {
                        a(e).on("dcg-tap", c.default)
                    }
                    ,
                    t.prototype.showAnswerHint = function () {
                        if (this.didHideAnswerHint)
                            return !1;
                        var e = this.model.getExpressionOrder()[0];
                        return !(!this.model.shouldShowEvaluationForExpression(e) && !this.didShowAnswerHint) && (this.didShowAnswerHint = !0,
                            !(this.model.getNumberOfExpressions() > 1 || "" === this.model.getExpressionLatex(e)) || (this.didHideAnswerHint = !0,
                                !1))
                    }
                    ,
                    t.prototype.didUpdate = function () {
                        if (this.$container) {
                            var e = this.$container.find(".dcg-focused");
                            e.length > 0 && n.scrollVisible(e, this.$container, 50)
                        }
                    }
                    ,
                    t.prototype.didMountContainer = function (e) {
                        this.$container = a(e),
                            this.$container.tipsy({
                                fade: "fast",
                                title: "tooltip",
                                wait: 500,
                                gravity: "ne",
                                delegate: ".dcg-tooltip",
                                sticky: !0
                            })
                    }
                    ,
                    t
            }(o.DCGViewBasic);
        t.default = p
    }),
    define("loadcss!basic/main", function () { }),
    define("basic/main", ["require", "exports", "lib/aria", "keys", "browser", "tslib", "dcgview", "./dcgview-basic", "jquery", "./keypad/fourfunction-control-bar", "./keypad/scientific-control-bar", "./keypad/single-expression-control-bar", "./keypad/fourfunction-keypad", "./keypad/single-expression-keypad", "./keypad/scientific-keypad", "./keypad/braille-keypad", "./basic-list-view", "loadcss!desmos-icons", "loadcss!./main"], function (e, t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var y = s.Components.If
            , v = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return o.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this;
                        return s.createElement("div", {
                            class: s.const("dcg-calc-basic-main-wrapper"),
                            onKeydown: this.bindFn(this.handleRootKeydown),
                            "x-ms-format-detection": s.const("none")
                        }, s.createElement("div", {
                            role: s.const("application"),
                            class: function () {
                                return {
                                    "dcg-calc-basic-main": !0,
                                    "dcg-inverted-colors": e.controller.getInvertedColors(),
                                    "dcg-projector-mode": e.controller.isProjectorMode(),
                                    "dcg-ipad": i.IS_IPAD
                                }
                            },
                            style: function () {
                                return {
                                    "font-size": e.controller.getFontSize() + "px",
                                    filter: e.controller.getInvertedColors() ? "invert(100%)" : "none"
                                }
                            }
                        }, s.createElement(g.default, {
                            controller: this.props.controller
                        }), s.createElement(y, {
                            predicate: function () {
                                return e.controller.isScientificCalc() && e.model.isSingleExpression()
                            }
                        }, function () {
                            return s.createElement("div", null, s.createElement(d.default, {
                                controller: e.props.controller
                            }), s.createElement(y, {
                                predicate: function () {
                                    return !e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(h.default, {
                                    controller: e.props.controller
                                })
                            }), s.createElement(y, {
                                predicate: function () {
                                    return e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(m.default, {
                                    controller: e.props.controller
                                })
                            }))
                        }), s.createElement(y, {
                            predicate: function () {
                                return e.controller.isScientificCalc() && !e.model.isSingleExpression()
                            }
                        }, function () {
                            return s.createElement("div", null, s.createElement(u.default, {
                                controller: e.props.controller
                            }), s.createElement(y, {
                                predicate: function () {
                                    return !e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(f.default, {
                                    controller: e.props.controller
                                })
                            }), s.createElement(y, {
                                predicate: function () {
                                    return e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(m.default, {
                                    controller: e.props.controller
                                })
                            }))
                        }), s.createElement(y, {
                            predicate: function () {
                                return e.controller.isFourFunctionCalc()
                            }
                        }, function () {
                            return s.createElement("div", null, s.createElement(l.default, {
                                controller: e.props.controller
                            }), s.createElement(y, {
                                predicate: function () {
                                    return !e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(p.default, {
                                    controller: e.props.controller
                                })
                            }), s.createElement(y, {
                                predicate: function () {
                                    return e.controller.renderAsBraille()
                                }
                            }, function () {
                                return s.createElement(m.default, {
                                    controller: e.props.controller
                                })
                            }))
                        })))
                    }
                    ,
                    t.prototype.handleRootKeydown = function (e) {
                        if (r.isUndo(e))
                            return this.dispatch({
                                type: "undo",
                                source: "keyboard-shortcut"
                            }),
                                !1;
                        if (r.isRedo(e))
                            return this.dispatch({
                                type: "redo",
                                source: "keyboard-shortcut"
                            }),
                                !1;
                        if (!e.metaKey && !e.shiftKey)
                            if (e.ctrlKey || e.altKey || r.lookup(e) !== r.BACKSPACE) {
                                if (e.ctrlKey === i.IS_APPLE && e.altKey === !i.IS_APPLE) {
                                    var t = r.lookupChar(e);
                                    if ("N" === t)
                                        return this.dispatch({
                                            type: "set-braille-mode",
                                            mode: "nemeth"
                                        }),
                                            n.alert(this.controller.t("Braille mode Nemeth")),
                                            !1;
                                    if ("U" === t)
                                        return this.dispatch({
                                            type: "set-braille-mode",
                                            mode: "ueb"
                                        }),
                                            n.alert(this.controller.t("Braille mode UEB")),
                                            !1;
                                    if ("Q" === t || "X" === t)
                                        return this.dispatch({
                                            type: "set-braille-mode",
                                            mode: "none"
                                        }),
                                            n.alert(this.controller.t("Braille mode off")),
                                            !1;
                                    if ("6" === t) {
                                        var o = !this.controller.getSixKeyInput();
                                        return this.dispatch({
                                            type: "set-six-key-input",
                                            mode: o
                                        }),
                                            n.alert(o ? this.controller.t("Six Key Braille Input on") : this.controller.t("Six Key Braille Input off")),
                                            !1
                                    }
                                }
                            } else if (!c(document.activeElement).is('input, textarea, [role="textbox"]'))
                                return !1;
                        return !0
                    }
                    ,
                    t
            }(a.DCGViewBasic);
        t.default = v
    }),
    define("api/basic", ["require", "exports", "tslib", "dcgview", "./abstract", "main/shared-worker-pool", "basic/controller", "basic/main", "lib/deepCopy"], function (e, t, n, r, i, o, s, a, c) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = function (e) {
            function t(t) {
                return e.call(this, t) || this
            }
            return n.__extends(t, e),
                t.prototype.init = function (e) {
                    var t = this
                        , r = n.__assign({
                            qwertyKeyboard: !0,
                            degreeMode: !1,
                            settingsMenu: !0,
                            invertedColors: !1,
                            brailleMode: "none",
                            sixKeyInput: !1,
                            projectorMode: !1,
                            functionDefinition: !0,
                            autosize: !0,
                            evaluationMode: "scientific",
                            restrictedEditing: !1,
                            additionalFunctions: ["sqrt"],
                            lightKeypad: !1,
                            typingSlashWritesDivisionSymbol: !1,
                            typingAsteriskWritesTimesSymbol: !1
                        }, e);
                    this.controller = new s.default({
                        workerPool: o.default,
                        evaluationMode: r.evaluationMode,
                        settingsMenu: r.settingsMenu,
                        restrictedEditing: r.restrictedEditing,
                        degreeMode: r.degreeMode,
                        invertedColors: r.invertedColors,
                        brailleMode: r.brailleMode,
                        sixKeyInput: r.sixKeyInput,
                        projectorMode: r.projectorMode,
                        functionDefinition: r.functionDefinition,
                        lightKeypad: r.lightKeypad,
                        qwertyKeyboard: r.qwertyKeyboard,
                        additionalFunctions: r.additionalFunctions,
                        typingSlashWritesDivisionSymbol: r.typingSlashWritesDivisionSymbol,
                        typingAsteriskWritesTimesSymbol: r.typingAsteriskWritesTimesSymbol
                    }),
                        this.settings = this.controller.settings,
                        this.controller.onEventEmitted = function (e) {
                            "render" === e && t.updateView(),
                                t.triggerEvent(e)
                        }
                        ,
                        this.setupDomChangeDetector(r.autosize)
                }
                ,
                t.prototype.onCreateView = function () {
                    var e = r.mountToNode(a.default, this.rootElt, {
                        controller: r.const(this.controller)
                    });
                    return e
                }
                ,
                t.prototype.setState = function (e, t) {
                    t || (t = {}),
                        this.controller.dispatch({
                            type: "set-state-from-api",
                            state: e,
                            opts: {
                                allowUndo: !!t.allowUndo
                            }
                        })
                }
                ,
                t.prototype.getState = function () {
                    return c.default(this.controller.model.getPersistedState())
                }
                ,
                t.prototype.undo = function () {
                    this.controller.dispatch({
                        type: "undo",
                        source: "api"
                    })
                }
                ,
                t.prototype.redo = function () {
                    this.controller.dispatch({
                        type: "redo",
                        source: "api"
                    })
                }
                ,
                t.prototype.clearHistory = function () {
                    this.controller.dispatch({
                        type: "clear-history"
                    })
                }
                ,
                t.prototype.setBlank = function (e) {
                    e || (e = {}),
                        this.controller.dispatch({
                            type: "set-blank",
                            opts: {
                                allowUndo: !!e.allowUndo
                            }
                        })
                }
                ,
                t.prototype.updateSettings = function (e) {
                    if (null != e)
                        for (var t in e)
                            switch (t) {
                                case "fontSize":
                                    var n = e[t];
                                    if (void 0 === n)
                                        continue;
                                    this.controller.dispatch({
                                        type: "update-font-size",
                                        size: n
                                    });
                                    break;
                                case "invertedColors":
                                    var r = e[t];
                                    if (void 0 === r)
                                        continue;
                                    this.controller.dispatch({
                                        type: "update-inverted-colors",
                                        mode: r
                                    });
                                    break;
                                case "degreeMode":
                                    var i = e[t];
                                    if (void 0 === i)
                                        continue;
                                    this.controller.dispatch({
                                        type: "update-degree-mode",
                                        mode: i
                                    });
                                    break;
                                case "brailleMode":
                                    var o = e[t];
                                    this.controller.dispatch({
                                        type: "set-braille-mode",
                                        mode: o
                                    });
                                    break;
                                case "sixKeyInput":
                                    var s = e[t];
                                    if (void 0 === s)
                                        continue;
                                    this.controller.dispatch({
                                        type: "set-six-key-input",
                                        mode: s
                                    });
                                    break;
                                case "projectorMode":
                                    var a = e[t];
                                    if (void 0 === a)
                                        continue;
                                    this.controller.dispatch({
                                        type: "update-projector-mode",
                                        mode: a
                                    });
                                    break;
                                case "language":
                                    var c = e[t];
                                    if (void 0 === c)
                                        continue;
                                    this.controller.dispatch({
                                        type: "update-language",
                                        language: c
                                    })
                            }
                }
                ,
                t.prototype.focusFirstExpression = function () {
                    this.controller.dispatch({
                        type: "focus-first-expression"
                    })
                }
                ,
                t.prototype.onResizeView = function (e) { }
                ,
                t.prototype.onDestroyView = function () {
                    r.unmountFromNode(this.rootElt)
                }
                ,
                t.prototype.destroy = function () {
                    this.controller.model.destroy(),
                        e.prototype.destroy.call(this)
                }
                ,
                t
        }(i.default);
        t.BasicCalculator = l
    }),
    define("api/fourfunction", ["require", "exports", "tslib", "./basic", "lib/deepCopy", "lib/console"], function (e, t, n, r, i, o) {
        "use strict";
        function s(e) {
            if (e = i.default(e),
                e.hasOwnProperty("typingSlashWritesDivisionSymbol") || (e.typingSlashWritesDivisionSymbol = !0),
                e.hasOwnProperty("typingAsteriskWritesTimesSymbol") || (e.typingAsteriskWritesTimesSymbol = !0),
                e.exponentButtonForSquareRoot && (o.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."),
                    e.additionalFunctions = ["exponent"]),
                e.additionalFunctions) {
                var t = e.additionalFunctions;
                "string" == typeof t && (t = [t]),
                    t.length > 2 && (o.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),
                        t = t.slice(0, 2));
                for (var n = 0; n < t.length; n++)
                    ["sqrt", "exponent", "percent"].indexOf(t[n]) === -1 && o.warn("Unrecognized value: '" + t[n] + "' for 'additionalFunction'. Valid values are 'sqrt', 'percent', or 'exponent'. Using default (\"sqrt\")");
                e.additionalFunctions = t
            }
            return e.additionalFunctions && e.additionalFunctions.length || (e.additionalFunctions = ["sqrt"]),
                e.evaluationMode = "fourFunction",
                e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = function (e) {
            function t(n, r) {
                var i = e.call(this, n) || this;
                return i instanceof t ? (i.init(s(r || {})),
                    i) : new t(n, r)
            }
            return n.__extends(t, e),
                t
        }(r.BasicCalculator);
        t.default = a
    }),
    define("api/scientific", ["require", "exports", "tslib", "./basic", "lib/deepCopy"], function (e, t, n, r, i) {
        "use strict";
        function o(e) {
            return e = i.default(e),
                e.singleExpression ? e.evaluationMode = "singleExpressionScientific" : e.evaluationMode = "scientific",
                delete e.singleExpression,
                e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t(n, r) {
                var i = e.call(this, n) || this;
                return i instanceof t ? (i.init(o(r || {})),
                    i) : new t(n, r)
            }
            return n.__extends(t, e),
                t
        }(r.BasicCalculator);
        t.default = s
    }),
    define("api/calculator", ["require", "console", "pjs", "underscore", "i18n", "main/calc_embed", "main/calc_headless", "underscore_model", "mathquill", "math/recttransformation", "main/shared-clock-bus", "main/shared-worker-pool", "lib/number-to-latex", "expressions/colors", "expressions/styles", "expressions/opacity", "graphing/columnmode", "graphing/dragmode", "graphing/axisarrowmode", "main/font_sizes", "expressions/image_file_to_data_url", "lib/dom-change-detector", "graphing/compute-async-screenshot-bounds", "expressions/sanitize_expression", "./fourfunction", "./scientific"], function (e) {
        function t(e) {
            var t = {};
            e || (e = {});
            var n = function (n, r) {
                e.hasOwnProperty(n) ? t[n] = e[n] : t[n] = r
            };
            return n("keypad", !0),
                n("disableScrollFix", !1),
                n("graphpaper", !0),
                n("settingsMenu", !0),
                n("expressionsTopbar", !0),
                n("branding", !0),
                n("links", !0),
                n("autosize", !0),
                n("zoomButtons", t.graphpaper),
                n("pointsOfInterest", !0),
                n("plotSingleVariableImplicitEquations", !0),
                n("expressionsCollapsed", !1),
                n("lockViewport", !1),
                n("administerSecretFolders", !1),
                n("redrawSlowly", !1),
                n("onlyTraceSelected", !1),
                n("disableMouseInteractions", !1),
                n("trace", !0),
                n("folders", !0),
                n("images", t.graphpaper),
                n("expressions", !0),
                n("border", !0),
                n("nativeOnscreenKeypad", !1),
                n("qwertyKeyboard", !0),
                n("restrictedFunctions", !1),
                n("notes", !0),
                n("degreeMode", !1),
                n("functionDefinition", !0),
                n("lightKeypad", !1),
                n("pasteGraphLink", !1),
                n("pasteTableData", !0),
                n("plaidMode", !1),
                n("imageUploadCallback", E),
                n("pasteGraphLinkCallback", !1),
                n("editOnWeb", !1),
                n("invertedColors", !1),
                n("colors", {
                    RED: m.RED,
                    BLUE: m.BLUE,
                    GREEN: m.GREEN,
                    ORANGE: m.ORANGE,
                    PURPLE: m.PURPLE,
                    BLACK: m.BLACK
                }),
                n("crossOriginSaveTest", !1),
                e.hasOwnProperty("menus") && (r.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),
                    e.hasOwnProperty("settingsMenu") || (t.settingsMenu = !!e.menus),
                    e.hasOwnProperty("expressionsTopbar") || (t.expressionsTopbar = !!e.menus)),
                e.hasOwnProperty("solutions") && (r.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),
                    e.hasOwnProperty("pointsOfInterest") || (t.pointsOfInterest = !!e.solutions)),
                e.hasOwnProperty("singleVariableSolutions") && r.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),
                t.graphpaper || (t.expressionsCollapsed && (t.expressionsCollapsed = !1,
                    r.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),
                    t.zoomButtons && (t.zoomButtons = !1,
                        r.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false."))),
                t
        }
        function n(e, t) {
            !window.Desmos.enabledFeatures || window.Desmos.enabledFeatures[e] ? window.Desmos[e] = t : window.Desmos[e] = function () {
                throw new Error("The Desmos " + e + " is not enabled for this API key.")
            }
        }
        var r = e("console")
            , i = e("pjs")
            , o = e("underscore")
            , s = e("i18n")
            , a = e("main/calc_embed").default
            , c = e("main/calc_headless")
            , l = e("underscore_model")
            , u = e("mathquill")
            , d = e("math/recttransformation")
            , p = e("main/shared-clock-bus")
            , h = e("main/shared-worker-pool").default
            , f = e("lib/number-to-latex").default
            , m = e("expressions/colors")
            , g = e("expressions/styles")
            , y = e("expressions/opacity")
            , v = e("graphing/columnmode")
            , b = e("graphing/dragmode")
            , x = e("graphing/axisarrowmode")
            , w = e("main/font_sizes")
            , E = e("expressions/image_file_to_data_url")
            , _ = e("lib/dom-change-detector").default
            , S = e("graphing/compute-async-screenshot-bounds")
            , k = e("expressions/sanitize_expression")
            , M = e("./fourfunction").default
            , C = e("./scientific").default
            , I = i(l, function (e, n, i) {
                function c(e, t) {
                    var n = {};
                    return t.hasOwnProperty("x") && (n.x = e.mapX(t.x)),
                        t.hasOwnProperty("y") && (n.y = e.mapY(t.y)),
                        n
                }
                e.init = function (e, r, i) {
                    n.init.call(this);
                    var o = t(r);
                    this._calc = new a(e, h, o),
                        this._calc.interceptTouch(),
                        this.controller = this._calc.controller,
                        this.controller.onEventsEmitted = function (e) {
                            this.setProperty("isAnyExpressionSelected", !!this.controller.getSelectedItem()),
                                this.setProperty("expressionAnalysis", this.controller.getExpressionAnalysis());
                            for (var t in e)
                                e.hasOwnProperty(t) && e[t] && this.triggerEvent(t)
                        }
                            .bind(this),
                        this._calc.graphpaperBounds.observeAndSync("mathCoordinates", this._syncGraphpaperBounds.bind(this)),
                        this._calc.graphpaperBounds.observeAndSync("pixelCoordinates", this._syncGraphpaperBounds.bind(this)),
                        this.colors = this.controller.getColors(),
                        this._initGraphSettings(),
                        this._sharedClockBusToken = p.subscribe(function (e) {
                            this._calc.tick(e)
                        }
                            .bind(this)),
                        this.domChangeDetector = new _(e, function (e) {
                            switch (e.type) {
                                case "added":
                                    this._calc.resize();
                                    break;
                                case "removed":
                                    this._calc.resize();
                                    break;
                                case "resized":
                                    this._calc.resize()
                            }
                        }
                            .bind(this)),
                        o.autosize ? this.domChangeDetector.startWatching() : this.domChangeDetector.checkForChanges(),
                        "function" == typeof i && i(this)
                }
                    ,
                    e.destroy = function () {
                        function e(e) {
                            r.warn("You've destroyed this API instance. You can no longer call ." + e + "()")
                        }
                        this._calc.destroy(),
                            p.unsubscribe(this._sharedClockBusToken),
                            this.domChangeDetector.destroy();
                        for (var t in this)
                            "function" == typeof this[t] ? this[t] = e.bind(this, t) : this.hasOwnProperty(t) && delete this[t];
                        this.destroy = function () { }
                    }
                    ,
                    e._syncGraphpaperBounds = function () {
                        this.controller.runAfterDispatch(function () {
                            this.setProperty("graphpaperBounds", {
                                mathCoordinates: this._calc.graphpaperBounds.mathCoordinates,
                                pixelCoordinates: this._calc.graphpaperBounds.pixelCoordinates
                            })
                        }
                            .bind(this))
                    }
                    ;
                var u = ["showGrid", "showXAxis", "showYAxis", "xAxisStep", "yAxisStep", "xAxisMinorSubdivisions", "yAxisMinorSubdivisions", "xAxisArrowMode", "yAxisArrowMode", "xAxisLabel", "yAxisLabel", "xAxisNumbers", "yAxisNumbers", "polarMode", "polarNumbers", "degreeMode", "projectorMode", "fontSize", "invertedColors", "language"];
                e._initGraphSettings = function () {
                    var e = l();
                    this.settings = this.graphSettings = e,
                        this.knownSettings = u;
                    var t = this
                        , n = function (n) {
                            t._calc.grapher.settings.observeAndSync(n, function () {
                                t.controller.runAfterDispatch(function () {
                                    e.setProperty(n, t._calc.grapher.settings[n])
                                })
                            })
                        };
                    u.forEach(n)
                }
                    ,
                    e.updateSettings = function (e) {
                        this._calc.grapher.settings.setGraphSettings(e),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.setGraphSettings = function (e) {
                        r.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),
                            this.updateSettings(e),
                            this.setGraphSettings = this.updateSettings,
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.fetchLanguage = function (e) {
                        return s.fetchLanguage(e)
                    }
                    ,
                    e.setDefaultState = function (e) {
                        this._calc.grapher.settings.setProperty("defaultState", e),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.mathToPixels = function (e) {
                        var t = d.fromRects(this.graphpaperBounds.mathCoordinates, this.graphpaperBounds.pixelCoordinates);
                        return c(t, e)
                    }
                    ,
                    e.pixelsToMath = function (e) {
                        var t = d.fromRects(this.graphpaperBounds.pixelCoordinates, this.graphpaperBounds.mathCoordinates);
                        return c(t, e)
                    }
                    ;
                var m = {};
                m.expression = function (e, t, n) {
                    var i = {};
                    if (i.type = "expression",
                        e.hasOwnProperty("id") ? i.id = e.id.toString() : i.id = t.generateId(),
                        e.hasOwnProperty("latex") && (i.latex = e.latex.toString()),
                        e.hasOwnProperty("color") && (i.color = e.color.toString()),
                        e.hasOwnProperty("points") && (i.points = !!e.points),
                        e.hasOwnProperty("lines") && (i.lines = !!e.lines),
                        e.hasOwnProperty("style") && (r.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),
                            o.contains([g.POINT, g.CROSS, g.OPEN], e.style) ? i.pointStyle = e.style : o.contains([g.SOLID, g.DASHED, g.DOTTED], e.style) ? i.lineStyle = e.style : r.warn("Invalid style: '" + e.style + "'.")),
                        e.hasOwnProperty("pointStyle") && (o.contains([g.POINT, g.CROSS, g.OPEN], e.pointStyle) ? i.pointStyle = e.pointStyle : r.warn("Invalid pointStyle: '" + e.pointStyle + "'.")),
                        e.hasOwnProperty("lineStyle") && (o.contains([g.SOLID, g.DASHED, g.DOTTED], e.lineStyle) ? i.lineStyle = e.lineStyle : r.warn("Invalid lineStyle: '" + e.lineStyle + "'.")),
                        e.hasOwnProperty("hidden") && (i.hidden = !!e.hidden),
                        e.hasOwnProperty("secret") && (i.secret = !!e.secret),
                        e.hasOwnProperty("sliderBounds") && (i.slider = {
                            min: f(e.sliderBounds.min),
                            max: f(e.sliderBounds.max),
                            step: void 0 === e.sliderBounds.step ? "" : f(e.sliderBounds.step)
                        }),
                        e.hasOwnProperty("domain") && (i.domain = {
                            min: f(e.domain.min),
                            max: f(e.domain.max)
                        }),
                        e.hasOwnProperty("dragMode") && (o.contains(o.values(b), e.dragMode) ? i.dragMode = e.dragMode : r.warn("Invalid dragMode: '" + e.dragMode + "'.")),
                        e.hasOwnProperty("label") && (i.label = e.label.toString()),
                        e.hasOwnProperty("showLabel") && (i.showLabel = !!e.showLabel),
                        e.hasOwnProperty("fill") && (i.fill = !!e.fill),
                        e.hasOwnProperty("fillOpacity")) {
                        var s = parseFloat(e.fillOpacity);
                        isNaN(s) || !isFinite(s) || s < 0 || s > 1 ? (r.warn("Invalid fillOpacity: " + s + ". Continuing with default."),
                            i.fillOpacity = y.DEFAULT) : i.fillOpacity = s
                    }
                    return i
                }
                    ;
                var x = function (e, t, n) {
                    var i = {};
                    return e.hasOwnProperty("id") ? i.id = e.id.toString() : i.id = t.generateId(),
                        e.hasOwnProperty("latex") && (i.latex = e.latex.toString()),
                        e.hasOwnProperty("color") && (i.color = e.color.toString()),
                        e.hasOwnProperty("hidden") && (i.hidden = !!e.hidden),
                        e.hasOwnProperty("points") && (i.points = !!e.points),
                        e.hasOwnProperty("lines") && (i.lines = !!e.lines),
                        e.hasOwnProperty("values") && (i.values = e.values.map(function (e) {
                            return e.toString()
                        })),
                        e.hasOwnProperty("columnMode") && (r.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),
                            e.columnMode === v.POINTS_AND_LINES ? (i.points = !0,
                                i.lines = !0) : e.columnMode === v.LINES ? (i.points = !1,
                                    i.lines = !0) : (i.points = !0,
                                        i.lines = !1),
                            i.lines && !i.points && e.hasOwnProperty("dragMode") && e.dragMode !== b.NONE && (r.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),
                                i.points = !0),
                            o.contains(o.values(v), e.columnMode) ? i.columnMode = e.columnMode : r.warn("Invalid columnMode: '" + e.columnMode + "'.")),
                        e.hasOwnProperty("dragMode") && (o.contains(o.values(b), e.dragMode) ? i.dragMode = e.dragMode === b.AUTO ? b.NONE : e.dragMode : r.warn("Invalid dragMode: '" + e.dragMode + "'.")),
                        i
                };
                m.table = function (e, t, n) {
                    var r = {};
                    return r.type = "table",
                        e.hasOwnProperty("id") ? r.id = e.id.toString() : r.id = t.generateId(),
                        e.hasOwnProperty("columns") && (r.columns = e.columns.map(function (e) {
                            return x(e, t, n)
                        })),
                        r
                }
                    ,
                    m.folder = function (e, t, n) {
                        var r = {};
                        return r.type = "folder",
                            e.hasOwnProperty("id") ? r.id = e.id.toString() : r.id = t.generateId(),
                            e.hasOwnProperty("hidden") && (r.hidden = !!e.hidden),
                            r
                    }
                    ,
                    m.image = function (e, t, n) {
                        var r = {};
                        return r.type = "image",
                            e.hasOwnProperty("id") ? r.id = e.id.toString() : r.id = t.generateId(),
                            e.hasOwnProperty("hidden") && (r.hidden = !!e.hidden),
                            r
                    }
                    ,
                    e.notifyControllerOfAPICall = function () {
                        this.controller.dispatch({
                            type: "api-method-called"
                        })
                    }
                    ,
                    e.setExpression = function (e) {
                        var t, n = this.controller, i = n.getItemModel(e.id);
                        if (i) {
                            if (e.type && e.type !== i.type)
                                return void r.warn("Cannot change type of expression from '" + i.type + "' to '" + e.type + "'.");
                            if (!m.hasOwnProperty(i.type))
                                return void r.warn("Cannot modify expressions of type: '" + e.type + "' through the API.");
                            t = m[i.type](e, this.controller, !1),
                                this.controller.dispatch({
                                    type: "set-expression-properties-from-api",
                                    id: t.id,
                                    properties: t
                                })
                        } else {
                            if (e.type && !m.hasOwnProperty(e.type))
                                return void r.warn("Invalid expression type: '" + e.type + "'.");
                            t = m[e.type || "expression"](e, this.controller, !0),
                                this.controller.dispatch({
                                    type: "add-item-to-end-from-api",
                                    state: t
                                })
                        }
                    }
                    ,
                    e.setExpressions = function (e) {
                        e.forEach(this.setExpression.bind(this)),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.removeExpression = function (e) {
                        var t = e.id.toString();
                        this.controller.dispatch({
                            type: "remove-item-by-id",
                            id: t
                        })
                    }
                    ,
                    e.removeExpressions = function (e) {
                        e.forEach(this.removeExpression.bind(this)),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.removeSelected = function () {
                        var e = this.controller.getSelectedItem();
                        e && this.controller.dispatch({
                            type: "remove-item-by-id",
                            id: e.id
                        })
                    }
                    ,
                    e.setMathBounds = function (e) {
                        e && e.left < e.right && e.bottom < e.top ? this._calc.setViewport([e.left, e.right, e.bottom, e.top]) : r.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got " + JSON.stringify(e)),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.setViewport = function (e) {
                        4 == e.length && e[1] > e[0] && e[3] > e[2] ? this._calc.setViewport(e) : r.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got " + e),
                            this.notifyControllerOfAPICall()
                    }
                    ,
                    e.resize = function () {
                        this.domChangeDetector.checkForChanges()
                    }
                    ,
                    e.getState = function () {
                        return this._calc.getState.apply(this._calc, arguments)
                    }
                    ,
                    e.getExpressions = function () {
                        var e = this.getState({
                            stripDefaults: !1
                        }).expressions.list;
                        return e.map(k)
                    }
                    ,
                    e.setBlank = function (e) {
                        e || (e = {}),
                            this._calc.setBlank(e)
                    }
                    ,
                    e.setState = function (e, t) {
                        t || (t = {}),
                            this._calc.setState(e, t)
                    }
                    ,
                    e.undo = function () {
                        this.controller.dispatch({
                            type: "undo"
                        })
                    }
                    ,
                    e.redo = function () {
                        this.controller.dispatch({
                            type: "redo"
                        })
                    }
                    ,
                    e.clearHistory = function () {
                        this.controller.dispatch({
                            type: "clear-undoredo-history"
                        })
                    }
                    ,
                    e.screenshot = function (e) {
                        return this._calc.grapher.screenshot(e)
                    }
                    ,
                    e._getMathAspectRatio = function () {
                        var e = this.graphpaperBounds.mathCoordinates
                            , t = this._calc.grapher.getProjection().pixelCoordinates
                            , n = t.right - t.left
                            , r = t.bottom - t.top
                            , i = e.width / n
                            , o = e.height / r;
                        return i / o
                    }
                    ,
                    e.isProjectionUniform = function () {
                        return !!this._calc.grapher.getProjection().settings.squareAxes
                    }
                    ,
                    e._parseAsyncScreenshotOpts = function (e) {
                        var t = e.mode || "contain"
                            , n = e.width || e.height || this.graphpaperBounds.pixelCoordinates.width
                            , r = e.height || e.width || this.graphpaperBounds.pixelCoordinates.height
                            , i = e.mathBounds || {}
                            , o = e.targetPixelRatio || 1
                            , s = e.preserveAxisNumbers
                            , a = this._getMathAspectRatio()
                            , c = this.graphpaperBounds.pixelCoordinates.width / this.graphpaperBounds.pixelCoordinates.height
                            , l = S({
                                mode: t,
                                width: n,
                                height: r,
                                currentBounds: this.graphpaperBounds.mathCoordinates,
                                graphpaperAspectRatio: c,
                                mathAspectRatio: a,
                                mathBounds: i
                            });
                        return {
                            width: n,
                            height: r,
                            targetPixelRatio: o,
                            preserveAxisNumbers: s,
                            mathBounds: l
                        }
                    }
                    ,
                    e.asyncScreenshot = function (e, t) {
                        if (!arguments.length)
                            return void r.warn("asyncScreenshot expects a callback");
                        if (1 === arguments.length) {
                            if ("function" != typeof e)
                                return void r.warn("asyncScreenshot expects a callback");
                            t = e,
                                e = {}
                        }
                        e || (e = {}),
                            e = this._parseAsyncScreenshotOpts(e),
                            i._sharedScreenshotCalc || (i._sharedScreenshotCalc = I());
                        var n = i._sharedScreenshotCalc;
                        n.setState(this.getState()),
                            n.setMathBounds(e.mathBounds);
                        var o = n._calc.evaluator
                            , s = function () {
                                var r = n.screenshot({
                                    width: e.width,
                                    height: e.height,
                                    targetPixelRatio: e.targetPixelRatio
                                });
                                t(r)
                            }
                            , a = this.controller
                            , c = p.subscribe(function () {
                                a.areAnyImagesLoading() || (p.unsubscribe(c),
                                    o.notifyWhenSynced(s))
                            })
                    }
                    ,
                    e.setOptions = function () {
                        var e = this._calc.setOptions.apply(this._calc, arguments);
                        return this.notifyControllerOfAPICall(),
                            e
                    }
                    ,
                    e.focusFirstExpression = function () {
                        var e = this.controller.getItemModelByIndex(0);
                        this.controller.dispatch({
                            type: "move-focus-to-item",
                            id: e.id,
                            where: "end"
                        })
                    }
                    ,
                    e.HelperExpression = function (e) {
                        var t = e && e.latex || ""
                            , n = l();
                        return n.latex = t,
                            this.controller.dispatch({
                                type: "add-helper-expression",
                                state: {
                                    type: "helper-expression",
                                    id: this.controller.generateId(),
                                    latex: t,
                                    proxy: n
                                }
                            }),
                            n
                    }
            })
            , T = i(I, function (e, n, r) {
                e.init = function () {
                    this._calc = c(h, t({})),
                        this.controller = this._calc.controller,
                        this._sharedClockBusToken = p.subscribe(function (e) {
                            this._calc.tick(e)
                        }
                            .bind(this))
                }
            });
        return window.Desmos = window.Desmos ? window.Desmos : {},
            window.Desmos.Colors = {
                RED: m.RED,
                BLUE: m.BLUE,
                GREEN: m.GREEN,
                ORANGE: m.ORANGE,
                PURPLE: m.PURPLE,
                BLACK: m.BLACK
            },
            window.Desmos.imageFileToDataURL = E,
            window.Desmos.Styles = g,
            window.Desmos.supportedLanguages = window.Desmos.locales ? Object.keys(window.Desmos.locales) : [],
            window.Desmos.ColumnModes = v,
            window.Desmos.DragModes = b,
            window.Desmos.AxisArrowModes = x,
            window.Desmos.FontSizes = w,
            window.Desmos.MathQuill = u,
            n("FourFunctionCalculator", M),
            n("ScientificCalculator", C),
            n("GraphingCalculator", I),
            window.Desmos.HeadlessGraphingCalculator = T,
            window.Desmos.Calculator = window.Desmos.GraphingCalculator,
            {
                Calculator: I,
                GraphingCalculator: I,
                FourFunctionCalculator: M,
                ScientificCalculator: C,
                HeadlessGraphingCalculator: T
            }
    }),
    define("shared-header/hamburger", ["require", "exports", "browser", "tslib", "dcgview", "jquery", "tipsy"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return i.createElement("span", {
                        role: i.const("button"),
                        tabindex: i.const(0),
                        "aria-label": function () {
                            return e.openGraphText()
                        },
                        class: i.const("dcg-header-btn dcg-action-opendrawer dcg-tooltip"),
                        tooltip: function () {
                            return e.openGraphText()
                        },
                        onTap: function (t) {
                            return e.props.controller().dispatch({
                                type: "open-mygraphs",
                                device: t.device
                            })
                        },
                        didMount: function (t) {
                            return e.hookupTooltip(t)
                        }
                    }, i.createElement("i", {
                        class: i.const("dcg-icon-hamburger")
                    }))
                }
                ,
                t.prototype.hookupTooltip = function (e) {
                    this.props.tooltip() && o(e).tipsy({
                        fade: "fast",
                        title: "tooltip",
                        wait: 500
                    })
                }
                ,
                t.prototype.openGraphText = function () {
                    var e = this.props.controller().getOpenText();
                    return n.IS_APPLE ? this.props.controller().t("__open_graph__ (cmd+o)", {
                        open_graph: e
                    }) : this.props.controller().t("__open_graph__ (ctrl+o)", {
                        open_graph: e
                    })
                }
                ,
                t
        }(i.Class);
        t.Hamburger = s
    }),
    define("shared-header/accounts", ["require", "exports", "tslib", "dcgview", "jquery"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r.Components.If
            , s = function (e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return n.__extends(t, e),
                    t.prototype.template = function () {
                        var e = this
                            , t = this.props.controller().userController;
                        return r.createElement("span", null, r.createElement(o, {
                            predicate: function () {
                                return t.isLoggedIn() && !e.props.disableAccounts()
                            }
                        }, function () {
                            return r.createElement("span", null, r.createElement(o, {
                                predicate: function () {
                                    return t.isLoggingOut()
                                }
                            }, function () {
                                return r.createElement("span", {
                                    class: r.const("logout-progress-notice")
                                }, r.createElement("span", {
                                    class: r.const("dcg-spinner-dark")
                                }))
                            }), r.createElement(o, {
                                predicate: function () {
                                    return !t.isLoggingOut() && !e.props.disableAccounts()
                                }
                            }, function () {
                                return r.createElement("span", {
                                    class: r.const("dcg-account-link"),
                                    "dcg-menu-button": r.const("account"),
                                    role: r.const("button"),
                                    tabindex: r.const(0),
                                    "aria-haspopup": r.const("true"),
                                    "aria-expanded": r.const("false"),
                                    "aria-label": r.const("Account Information"),
                                    onTap: function (t, n) {
                                        if (e.props.controller().dispatch({
                                            type: "toggle-menu",
                                            payload: "account"
                                        }),
                                            "keyboard" == n) {
                                            var r = "account" === e.props.controller().getOpenMenu()
                                                , o = r ? ".dcg-action-accountsettings" : ".dcg-account-link";
                                            i(o).focus()
                                        }
                                    }
                                }, r.createElement("span", {
                                    class: r.const("email")
                                }, r.createElement("div", {
                                    class: r.const("header-account-name dcg-variable-name")
                                }, function () {
                                    return t.getFirstName()
                                }), r.createElement("i", {
                                    class: r.const("dcg-icon-caret-down")
                                })))
                            }))
                        }), r.createElement(o, {
                            predicate: function () {
                                return !t.isLoggedIn() && !e.props.disableAccounts()
                            }
                        }, function () {
                            return r.createElement("span", {
                                class: r.const("dcg-login")
                            }, r.createElement("a", {
                                role: r.const("link"),
                                tabindex: r.const(0),
                                class: r.const("dcg-create-account dcg-btn dcg-btn-green dcg-action-createaccount"),
                                onTap: function (t) {
                                    e.props.controller().dispatch({
                                        type: "create-account",
                                        device: t.device
                                    })
                                }
                            }, function () {
                                return e.props.controller().t("Create Account")
                            }), function () {
                                return e.props.controller().t("or")
                            }, r.createElement("a", {
                                role: r.const("link"),
                                tabindex: r.const(0),
                                class: r.const("dcg-sign-in dcg-action-login"),
                                onTap: function (t) {
                                    e.props.controller().dispatch({
                                        type: "launch-login",
                                        device: t.device
                                    })
                                }
                            }, function () {
                                return e.props.controller().t("Sign In")
                            }))
                        }))
                    }
                    ,
                    t
            }(r.Class);
        t.Accounts = s
    }),
    define("shared-header/header-toast", ["require", "exports", "tslib", "dcgview", "main/toast-view"], function (e, t, n, r, i) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = function (e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e),
                t.prototype.template = function () {
                    var e = this;
                    return r.createElement(i.ToastView, {
                        message: this.bindFn(this.getMessage),
                        t: this.bindFn(this.t),
                        onClose: function () {
                            return e.graphsController().dismissSaveError()
                        },
                        showUndo: this.const(!1),
                        showLearnMore: this.const(!1),
                        toastStyle: this.bindFn(this.getStyle),
                        noAria: this.const(!1),
                        showClose: this.bindFn(this.showClose)
                    })
                }
                ,
                t.prototype.t = function (e) {
                    return this.props.controller().t(e)
                }
                ,
                t.prototype.graphsController = function () {
                    return this.props.controller().graphsController
                }
                ,
                t.prototype.getStyle = function () {
                    return this.graphsController().didSaveFail() ? "error" : void 0
                }
                ,
                t.prototype.showClose = function () {
                    return this.graphsController().didSaveFail()
                }
                ,
                t.prototype.getMessage = function () {
                    return this.graphsController().isSaving() ? this.t("Saving...") : this.graphsController().didSaveSucceed() ? this.t("Saved!") : this.graphsController().didSaveFail() ? this.t(this.graphsController().getSaveFailureMessage()) : ""
                }
                ,
                t
        }(r.Class);
        t.HeaderToast = o
    }),
    function () {
        define("calculator-shell/header-icon", ["require", "dcgview", "jquery"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                t = e("jquery"),
                r = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.createElement("span", {
                                role: n.const("button"),
                                tabindex: n.const(0),
                                "aria-haspopup": n.const("true"),
                                "aria-label": function (e) {
                                    return function () {
                                        return e.t(e.props.label())
                                    }
                                }(this),
                                "aria-expanded": function (e) {
                                    return function () {
                                        return e.isMenuOpen()
                                    }
                                }(this),
                                class: function (e) {
                                    return function () {
                                        var t;
                                        return t = {
                                            "dcg-header-btn": !0
                                        },
                                            t["dcg-action-" + e.props.name()] = !0,
                                            t["dcg-tooltip"] = !0,
                                            t["dcg-active"] = e.isMenuOpen(),
                                            t
                                    }
                                }(this),
                                "dcg-menu-button": this.props.name,
                                tooltip: this.props.tooltip,
                                onTap: this.props.onTap.bind(this),
                                didMount: function (e) {
                                    return function (t) {
                                        return e.hookUpTooltip(t)
                                    }
                                }(this)
                            }, this.createElement("i", {
                                class: this.props.icon
                            }))
                    },
                    hookUpTooltip: function (e) {
                        return t(e).tipsy({
                            fade: "fast",
                            title: "tooltip",
                            wait: 500
                        })
                    },
                    isMenuOpen: function () {
                        return this.controller.getOpenMenu() === this.props.label().toLowerCase()
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/save-button", ["require", "dcgview", "browser", "jquery"], function (e) {
            var t, n, r, i, o;
            return r = e("dcgview"),
                o = r.Components.Switch,
                n = e("browser"),
                t = e("jquery"),
                i = r.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.graphsController = this.controller.graphsController,
                            this.createElement("span", {
                                class: r.const("dcg-if-user save-btn-container")
                            }, this.createElement("span", {
                                class: r.const("dcg-action-save save-button"),
                                onTap: function (e) {
                                    return function (t) {
                                        return e.dispatch({
                                            type: "save-graph",
                                            device: t.device
                                        })
                                    }
                                }(this)
                            }, this.createElement(o, {
                                key: function (e) {
                                    return function () {
                                        return !e.graphsController.isSaving()
                                    }
                                }(this)
                            }, function (e) {
                                return function (t) {
                                    return t ? e.createElement("span", {
                                        role: r.const("button"),
                                        class: r.const("styled-save-btn tooltip-offset dcg-btn-green"),
                                        tooltip: function () {
                                            return e.graphsController.hasUnsavedChanges() ? e.saveChangesText() : e.t("No Unsaved Changes")
                                        },
                                        class: function () {
                                            return {
                                                "styled-save-btn": !0,
                                                "tooltip-offset": !0,
                                                "dcg-btn-green": e.graphsController.hasUnsavedChanges(),
                                                "disabled-save-btn": !e.graphsController.hasUnsavedChanges()
                                            }
                                        },
                                        didMount: function (t) {
                                            return e.hookUpTooltip(t)
                                        }
                                    }, function () {
                                        return e.t("Save")
                                    }) : e.createElement("span", {
                                        class: r.const("saving-notice")
                                    }, e.createElement("span", {
                                        class: r.const("dcg-spinner-dark")
                                    }))
                                }
                            }(this))))
                    },
                    hookUpTooltip: function (e) {
                        return t(e).tipsy({
                            fade: "fast",
                            title: "tooltip",
                            wait: 500,
                            offset: 7
                        })
                    },
                    saveChangesText: function () {
                        return n.IS_APPLE ? this.t("Save Changes (cmd+s)") : this.t("Save Changes (ctrl+s)")
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/graph-title", ["require", "dcgview", "browser", "jquery", "./save-button"], function (e) {
            var t, n, r, i, o, s;
            return r = e("dcgview"),
                o = r.Components.If,
                n = e("browser"),
                t = e("jquery"),
                s = e("./save-button"),
                i = r.createClass({
                    template: function () {
                        var e, t;
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.userController = this.controller.userController,
                            this.graphsController = this.controller.graphsController,
                            e = this.controller.isInMaintenanceMode(),
                            t = this.controller.getPreviewParams(),
                            this.createElement("span", {
                                class: r.const("title-div")
                            }, this.createElement("span", {
                                role: r.const("button"),
                                tabindex: r.const(0),
                                class: r.const("dcg-variable-title dcg-tooltip dcg-action-savedialog"),
                                tooltip: function (e) {
                                    return function () {
                                        return e.tooltipText()
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "edit-title"
                                        })
                                    }
                                }(this),
                                didMount: function (e) {
                                    return function (t) {
                                        return e.hookUpTooltip(t)
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.graphsController.getCurrentGraphTitle() || e.graphsController.getUntitledString()
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (n) {
                                    return function () {
                                        return n.userController.isLoggedIn() && null == t && !e
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(s, {
                                        controller: e.props.controller
                                    })
                                }
                            }(this)))
                    },
                    hookUpTooltip: function (e) {
                        return t(e).tipsy({
                            fade: "fast",
                            title: "tooltip",
                            wait: 500
                        })
                    },
                    tooltipText: function () {
                        return n.IS_APPLE ? this.t("Duplicate or Rename (cmd+shift+s)") : this.t("Duplicate or Rename (ctrl+shift+s)")
                    }
                })
        })
    }
        .call(this),
    define("loadcss!shared-header/header-bar", function () { }),
    define("loadcss!calculator-shell/calculator-shell", function () { }),
    define("loadcss!spinner", function () { }),
    function () {
        define("calculator-shell/view", ["require", "dcgview", "i18n", "jquery", "shared-header/hamburger", "shared-header/accounts", "shared-header/header-toast", "./header-icon", "./graph-title", "loadcss!shared-header/header-bar", "loadcss!./calculator-shell", "loadcss!spinner"], function (e) {
            var t, n, r, i, o, s, a, c, l, u;
            return r = e("dcgview"),
                l = r.Components.If,
                u = e("i18n"),
                t = e("jquery"),
                o = e("shared-header/hamburger").Hamburger,
                n = e("shared-header/accounts").Accounts,
                a = e("shared-header/header-toast").HeaderToast,
                s = e("./header-icon"),
                i = e("./graph-title"),
                e("loadcss!shared-header/header-bar"),
                e("loadcss!./calculator-shell"),
                e("loadcss!spinner"),
                c = r.createClass({
                    template: function () {
                        var e, t;
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.graphsController = this.controller.graphsController,
                            e = this.controller.isInMaintenanceMode(),
                            t = this.controller.getPreviewParams(),
                            this.createElement("div", {
                                class: r.const("dcg-header")
                            }, this.createElement("div", {
                                class: r.const("dcg-header-desktop")
                            }, this.createElement("div", {
                                class: r.const("align-left-container")
                            }, this.createElement(o, {
                                controller: this.props.controller,
                                tooltip: r.const(!0)
                            }), this.createElement(i, {
                                controller: this.props.controller
                            })), this.createElement("div", {
                                class: r.const("align-center-container")
                            }, this.createElement("a", {
                                href: r.const("/"),
                                target: r.const("_blank"),
                                class: r.const("dcg-home-link-icon"),
                                "aria-label": r.const("Home")
                            }, this.createElement("i", {
                                class: r.const("dcg-icon-desmos")
                            }))), this.createElement(a, {
                                controller: this.props.controller
                            }), this.createElement(l, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.didLogoutFail()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("dcg-toast-container")
                                    }, e.createElement("div", {
                                        class: r.const("dcg-toast")
                                    }, function () {
                                        return e.t("Error logging out.")
                                    }))
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("align-right-container")
                            }, this.createElement(n, {
                                controller: this.props.controller,
                                disableAccounts: function (e) {
                                    return function () {
                                        return null != e.preview || e.maintenance
                                    }
                                }(this)
                            }), this.createElement(s, {
                                controller: this.props.controller,
                                label: function (e) {
                                    return function () {
                                        return "share"
                                    }
                                }(this),
                                tooltip: function (e) {
                                    return function () {
                                        return e.t("Share Graph")
                                    }
                                }(this),
                                icon: r.const("dcg-icon-share"),
                                isActive: function (e) {
                                    return function () {
                                        return "share" === e.controller.getOpenMenu()
                                    }
                                }(this),
                                name: function (e) {
                                    return function () {
                                        return "share"
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function (t, n) {
                                        if (e.dispatch({
                                            type: "toggle-menu",
                                            payload: "share"
                                        }),
                                            "keyboard" === n && "share" !== e.controller.getOpenMenu())
                                            return e.focusElement(".dcg-action-share")
                                    }
                                }(this)
                            }), this.createElement(s, {
                                controller: this.props.controller,
                                label: function (e) {
                                    return function () {
                                        return "Help"
                                    }
                                }(this),
                                tooltip: function (e) {
                                    return function () {
                                        return e.t("Help")
                                    }
                                }(this),
                                icon: r.const("dcg-icon-question-sign"),
                                name: r.const("help"),
                                onTap: function (e) {
                                    return function (t, n) {
                                        var r, i;
                                        if (e.dispatch({
                                            type: "toggle-menu",
                                            payload: "help"
                                        }),
                                            "keyboard" === n)
                                            return r = "help" === e.controller.getOpenMenu(),
                                                i = r ? '.dcg-feature[href="/calculator?tour=sliders"]' : ".dcg-action-help",
                                                e.focusElement(i)
                                    }
                                }(this)
                            }), this.createElement(s, {
                                controller: this.props.controller,
                                label: function (e) {
                                    return function () {
                                        return "Language"
                                    }
                                }(this),
                                tooltip: function (e) {
                                    return function () {
                                        return e.t("Language")
                                    }
                                }(this),
                                icon: r.const("dcg-icon-world"),
                                name: r.const("language"),
                                onTap: function (e) {
                                    return function (t, n) {
                                        var r, i;
                                        if (e.dispatch({
                                            type: "toggle-menu",
                                            payload: "language"
                                        }),
                                            "keyboard" === n)
                                            return r = "language" === e.controller.getOpenMenu(),
                                                i = r ? ".dcg-language-option.dcg-selected" : ".dcg-action-language",
                                                e.focusElement(i)
                                    }
                                }(this)
                            }))), this.createElement(l, {
                                predicate: function (n) {
                                    return function () {
                                        return null != t || e
                                    }
                                }(this)
                            }, function (n) {
                                return function () {
                                    return n.createElement("div", {
                                        class: r.const("dcg-toast-container")
                                    }, n.createElement("span", {
                                        class: r.const("dcg-toast dcg-maintenance-toast")
                                    }, n.createElement("span", {
                                        class: r.const("dcg-msg")
                                    }, n.createElement(l, {
                                        predicate: function () {
                                            return e
                                        }
                                    }, function () {
                                        return n.createElement("span", null, function () {
                                            return n.t("Desmos is in Maintenance Mode.")
                                        })
                                    }), n.createElement(l, {
                                        predicate: function () {
                                            return null != t
                                        }
                                    }, function () {
                                        return n.createElement("span", null, function () {
                                            return null != t ? t.message : void 0
                                        })
                                    })), n.createElement(l, {
                                        predicate: function () {
                                            return e
                                        }
                                    }, function () {
                                        return n.createElement("a", {
                                            class: r.const("undo"),
                                            target: r.const("_blank"),
                                            href: r.const("http://desmos.zendesk.com/entries/25429616-What-is-Maintenance-Mode-/")
                                        }, function () {
                                            return n.t("Learn More")
                                        })
                                    }), n.createElement(l, {
                                        predicate: function () {
                                            return null != t
                                        }
                                    }, function () {
                                        return n.createElement("a", {
                                            class: r.const("undo"),
                                            target: r.const("_blank"),
                                            href: function () {
                                                return null != t ? t.url : void 0
                                            }
                                        }, function () {
                                            return n.t("Share your thoughts!")
                                        })
                                    })))
                                }
                            }(this)))
                    },
                    focusElement: function (e) {
                        return t(e).focus()
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/menu", ["require", "dcgview", "jquery"], function (e) {
            var t, n, r, i;
            return n = e("dcgview"),
                r = n.Components.If,
                t = e("jquery"),
                i = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        var t;
                                        return t = {
                                            "dcg-popover": !0,
                                            "dcg-bottom": !0,
                                            "dcg-constrained-height-popover": !0
                                        },
                                            t["dcg-" + e.props.type() + "-container"] = !0,
                                            t["dcg-product-" + e.props.controller().getProduct()] = !0,
                                            t
                                    }
                                }(this),
                                style: n.const("display: block"),
                                role: n.const("complementary"),
                                label: function (e) {
                                    return function () {
                                        return e.props.label()
                                    }
                                }(this)
                            }, this.createElement("div", {
                                class: n.const("dcg-popover-interior")
                            }, this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        var t;
                                        return "function" == typeof (t = e.props).title ? t.title() : void 0
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("dcg-popover-title")
                                    }, function () {
                                        return e.t(e.props.title())
                                    })
                                }
                            }(this)), this.children), this.createElement("div", {
                                class: n.const("dcg-arrow")
                            }))
                    },
                    didMount: function () {
                        var e;
                        return e = this.props.type(),
                            this.guid = "menu-" + e,
                            t("body").on("dcg-tapstart." + this.guid, function (n) {
                                return function (r) {
                                    var i, o, s;
                                    if (i = t(r.target),
                                        o = !!i.closest(".dcg-popover").length,
                                        s = !!i.closest("[dcg-menu-button=" + e + "]").length,
                                        !o && !s)
                                        return n.dispatch({
                                            type: "toggle-menu",
                                            payload: "none"
                                        })
                                }
                            }(this))
                    },
                    didUnmount: function () {
                        return t("body").off("dcg-tapstart." + this.guid)
                    }
                })
        })
    }
        .call(this),
    define("loadcss!calculator-shell/language", function () { }),
    function () {
        define("calculator-shell/language-menu", ["require", "dcgview", "underscore", "i18n", "./menu", "loadcss!./language"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d;
            return t = e("dcgview"),
                n = t.Components.For,
                a = e("underscore"),
                l = e("i18n"),
                s = e("./menu"),
                e("loadcss!./language"),
                c = a.keys(l.enabled_languages),
                u = a.filter(c, function (e, t) {
                    return t % 2 === 0
                }),
                d = a.filter(c, function (e, t) {
                    return t % 2 === 1
                }),
                r = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.languageController = this.controller.languageController,
                            this.createElement("div", {
                                role: t.const("link"),
                                tabIndex: t.const(0),
                                lang: function (e) {
                                    return function () {
                                        return e.props.code()
                                    }
                                }(this),
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-language-option": !0,
                                            "dcg-selected": e.languageController.getLanguage() === e.props.code()
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.chooseLanguage()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.props.name()
                                }
                            }(this))
                    },
                    chooseLanguage: function () {
                        return this.languageController.fetchAndSetLanguage(this.props.code()),
                            this.dispatch({
                                type: "toggle-menu",
                                payload: "none"
                            })
                    }
                }),
                o = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.createElement("tr", null, this.createElement("td", null, this.createElement(r, {
                                code: function (e) {
                                    return function () {
                                        return e.props.left()
                                    }
                                }(this),
                                name: function (e) {
                                    return function () {
                                        var t;
                                        return null != (t = l.enabled_languages[e.props.left()]) ? t.displayName : void 0
                                    }
                                }(this),
                                controller: this.props.controller
                            })), this.createElement("td", null, this.createElement(r, {
                                code: function (e) {
                                    return function () {
                                        return e.props.right()
                                    }
                                }(this),
                                name: function (e) {
                                    return function () {
                                        var t;
                                        return null != (t = l.enabled_languages[e.props.right()]) ? t.displayName : void 0
                                    }
                                }(this),
                                controller: this.props.controller
                            })))
                    }
                }),
                i = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.createElement(s, {
                                title: function (e) {
                                    return function () {
                                        return e.t("Language")
                                    }
                                }(this),
                                type: function (e) {
                                    return function () {
                                        return "language"
                                    }
                                }(this),
                                label: function (e) {
                                    return function () {
                                        return e.t("Language Options Menu")
                                    }
                                }(this),
                                controller: this.props.controller
                            }, this.createElement("div", {
                                class: t.const("dcg-popover-content")
                            }, this.createElement(n, {
                                each: function (e) {
                                    return function () {
                                        var e;
                                        return function () {
                                            e = [];
                                            for (var t = 0, n = u.length; 0 <= n ? t < n : t > n; 0 <= n ? t++ : t--)
                                                e.push(t);
                                            return e
                                        }
                                            .apply(this)
                                    }
                                }(this)
                            }, this.createElement("table", null, function (e) {
                                return function (t) {
                                    return e.createElement(o, {
                                        left: function () {
                                            return u[t]
                                        },
                                        right: function () {
                                            return d[t]
                                        },
                                        controller: e.props.controller
                                    })
                                }
                            }(this))), this.createElement("div", {
                                class: t.const("dcg-translate-invite")
                            }, function (e) {
                                return function () {
                                    return e.t("Don't see your language?")
                                }
                            }(this), this.createElement("a", {
                                target: t.const("_blank"),
                                href: t.const("http://support.desmos.com/entries/28346817-Help-us-translate-Desmos-")
                            }, function (e) {
                                return function () {
                                    return e.t("Help us translate")
                                }
                            }(this)))))
                    }
                })
        })
    }
        .call(this),
    define("tours/sliders", ["require", "pjs", "./base_tour", "predicates/common"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("predicates/common");
        return t(n, function (e, t) {
            e.sliderHasSlid = !1,
                e.shouldPopup = function () {
                    return !!this.getMatchingExpSelector(r.SLIDER)
                }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpSelector(r.GRAPHABLE_EXP)
                        , t = this.getMatchingExpSelector(r.SLIDER)
                        , n = this.getMatchingExpSelector(r.ANIMATING_SLIDER)
                        , i = this.getMatchingExpSelector(r.SLID_SLIDER);
                    if (e && n)
                        return {
                            final: !0,
                            position: "s",
                            endingMsg: this.t("You're a slider pro!"),
                            sel: n.find(".dcg-animate-pause")
                        };
                    if (e && i)
                        return i.find(".dcg-depressed").length ? {
                            doNotUpdate: !0
                        } : {
                                position: "s",
                                content: "<b>" + this.t('Go "Hands-free"') + "</b><br>" + this.t("Press play to animate the slider."),
                                sel: i.find(".dcg-animate-play")
                            };
                    if (e && t)
                        return {
                            position: "s",
                            content: this.t("Drag the handle to change the value."),
                            sel: t.find(".dcg-thumb")
                        };
                    var o;
                    return (o = this.expressionCount() > 1 ? this.getMatchingExpSelector(r.HAS_N_DEPENDENCIES(1)) : this.getMatchingExpSelector(r.HAS_N_DEPENDENCIES(2))) ? {
                        position: "s",
                        content: "<b>" + this.t("Awesome!") + "</b> " + this.t("Now click here to add the sliders."),
                        sel: o.find(".dcg-slider-btn-container:last .dcg-btn-blue")
                    } : (o = this.getMatchingExpSelector(r.FOCUSED_OR_EMPTY_EXP),
                        o ? {
                            position: "e",
                            content: "<b>" + this.t("Let's make some sliders!") + "</b><br>" + this.t("Try typing __sample_expression__", {
                                sample_expression: '<span class="trip-math">y=mx+b</span>'
                            }),
                            sel: o,
                            delayBeforeExit: 600
                        } : {
                                position: "e",
                                content: this.t("Click here to create a new blank expression."),
                                sel: ".dcg-action-newmath"
                            })
                }
        })
    }),
    define("tours/scatter_plot", ["require", "pjs", "jquery", "./base_tour", "predicates/common", "graphing-calc/models/table"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("./base_tour")
            , i = e("predicates/common")
            , o = e("graphing-calc/models/table");
        return t(r, function (e, t) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(i.TABLE)
            }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpId(i.HAS_DATA_COLUMN)
                        , t = this.getSelectorById(e)
                        , r = this.getModelById(e);
                    if (!t) {
                        var s = n(".dcg-action-newtable:visible");
                        return 0 === s.length ? {
                            position: "e",
                            content: "<b>" + this.t("Let's make a table!") + "</b><br>" + this.t("Click here to add a new item."),
                            sel: n(".dcg-add-expression-btn")
                        } : {
                                position: "e",
                                content: this.t('... and select the "table" option.'),
                                sel: s,
                                delayBeforeExit: 300
                            }
                    }
                    for (var a = r, c = o.getSelectedCell(a), l = a.columnModels[0].cells.length, u = 0, d = 0; d < l && d < 3; d++) {
                        var p = t.find(".dcg-row:nth-of-type(" + (d + 2) + ") .dcg-cell:nth-of-type(1)")
                            , h = t.find(".dcg-row:nth-of-type(" + (d + 2) + ") .dcg-cell:nth-of-type(2)");
                        p.is(":not(.dcg-empty, .dcg-error)") && h.is(":not(.dcg-empty, .dcg-error)") && u++
                    }
                    if (3 === u) {
                        var f = a.columnModels[1].points && a.columnModels[1].lines
                            , m = n(".dcg-table-column-menu").length > 0;
                        return f && !m ? {
                            final: !0,
                            position: "e",
                            endingMsg: this.t("You're a tables whiz!"),
                            sel: t
                        } : f ? {
                            position: "e",
                            content: this.t("Click anywhere to close the drawing options."),
                            sel: t
                        } : m ? {
                            content: this.t("Click here to connect the dots."),
                            position: "e",
                            sel: ".dcg-toggle-switch:eq(1)"
                        } : {
                                        content: ["<b>" + this.t("Last trick!") + "</b><br>", this.t("Click and hold on this icon until the options menu opens up.")].join(""),
                                        position: "e",
                                        sel: t.find(".dcg-row:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-graph-icon")
                                    }
                    }
                    var g, y, v;
                    for (g = 0; g < l; g++)
                        for (y = 0; y < 2; y++)
                            if (v = t.find(".dcg-row:nth-of-type(" + (g + 2) + ") .dcg-cell:nth-of-type(" + (y + 1) + ")"),
                                v.is(".dcg-error"))
                                return {
                                    position: "e",
                                    content: this.t("Uh-oh! Type a valid number here."),
                                    sel: v
                                };
                    if (!c)
                        return {
                            position: "e",
                            content: this.t("Click back to continue editing."),
                            sel: t.find(".dcg-row:nth-of-type(" + g + ") .dcg-cell:nth-of-type(2)")
                        };
                    if (2 === l && 1 === u && c && 1 === c.row)
                        return {
                            position: "e",
                            content: this.t("Go down to the next row to add more data."),
                            sel: t.find(".dcg-row:nth-of-type(" + (c.row + 1) + ") .dcg-cell:nth-of-type(2)")
                        };
                    if (3 === l && 2 === u && c && 3 !== c.row)
                        return {
                            position: "e",
                            content: "<b>" + this.t("Awesome!") + "</b><br>" + this.t("Now try pressing Enter."),
                            sel: t.find(".dcg-row:nth-of-type(" + (c.row + 1) + ") .dcg-cell:nth-of-type(2)")
                        };
                    for (g = 0; g < l; g++)
                        for (y = 0; y < 2; y++)
                            if (v = t.find(".dcg-row:nth-of-type(" + (g + 2) + ") .dcg-cell:nth-of-type(" + (y + 1) + ")"),
                                v.is(".dcg-empty")) {
                                var b = this.t("Fill in this whole row.");
                                return 2 === g && 1 === y && (b = this.t("Just fill in one more...")),
                                    0 === g && 1 === y && (b = "<b>" + this.t("Fill it in.") + "</b><br>" + this.t("Type any number here.")),
                                    {
                                        position: "e",
                                        content: b,
                                        sel: t.find(".dcg-row:nth-of-type(" + (g + 2) + ") .dcg-cell:nth-of-type(2)")
                                    }
                            }
                }
        })
    }),
    define("tours/function_table", ["require", "pjs", "./base_tour", "jquery", "predicates/common", "graphing-calc/models/table"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("jquery")
            , i = e("predicates/common")
            , o = e("graphing-calc/models/table");
        return t(n, function (e, t) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(i.TABLE)
            }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    var e = this.getMatchingExpId(i.HAS_FUNCTION_COLUMN)
                        , t = this.getSelectorById(e)
                        , n = this.getModelById(e)
                        , s = this.getMatchingExpSelector(i.FOCUSED_OR_EMPTY_EXP)
                        , a = this.getMatchingExpSelector([i.COMPLEX_EXP, i.TABLEABLE_EXP]);
                    if (t) {
                        var c = n
                            , l = "POINTS" === c.columnModels[1].columnMode
                            , u = r(".dcg-table-column-menu").length > 0
                            , d = c.columnModels.length > 3 && c.columnModels[2].discrete === !1
                            , p = o.getSelectedCell(c);
                        return d ? {
                            final: !0,
                            position: "e",
                            endingMsg: this.t("You're a table wizard!"),
                            sel: t
                        } : p && 0 === p.row && 2 === p.column ? {
                            position: "e",
                            content: this.t("Try typing __sample_expression__", {
                                sample_expression: '<span class="trip-math">cos\\left(x\\right)</span>'
                            }),
                            sel: t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")
                        } : !p || 0 === p.row && 2 === p.column ? l && !p ? {
                            position: "e",
                            content: this.t("Click here to continue editing this table."),
                            sel: t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2)")
                        } : u ? {
                            content: this.t("Click here to only show the dots."),
                            position: "e",
                            sel: ".dcg-table-points"
                        } : {
                                    content: this.t("Click and hold on this icon until the options menu opens up."),
                                    position: "e",
                                    sel: t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-graph-icon")
                                } : {
                                        position: "e",
                                        content: this.t("Move right to add a new column."),
                                        sel: t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")
                                    }
                    }
                    return a ? this.editListMode() ? {
                        position: "e",
                        content: this.t("Click here to generate a table."),
                        sel: ".dcg-action-createtable",
                        delayBeforeExit: 400
                    } : {
                            position: "s",
                            content: "<b>" + this.t("Convert this to a table.") + "</b><br>" + this.t('Click the "Edit List" button.'),
                            sel: ".dcg-action-toggle-edit"
                        } : s ? {
                            position: "e",
                            content: ["<b>" + this.t("Start by graphing a function.") + "</b><br>", this.t("Try typing __sample_expression__", {
                                sample_expression: '<span class="trip-math">y=sin\\left(x\\right)</span>'
                            })].join(""),
                            sel: s
                        } : {
                                position: "e",
                                content: this.t("Let's make a function. First: click here to create a new blank expression."),
                                sel: ".dcg-new-math-div"
                            }
                }
        })
    }),
    define("tours/restrictions", ["require", "pjs", "./base_tour", "predicates/common"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("predicates/common");
        return t(n, function (e) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(r.RESTRICTED)
            }
                ,
                e.restrictedLineTour = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    var e = this.getMatchingExpSelector(r.RESTRICTED_LINE)
                        , t = this.getMatchingExpSelector(r.EXP_NOT_RESTRICTED_LINE);
                    if (e)
                        return t ? (this.phaseOn++ ,
                            this.update()) : {
                                position: "e",
                                content: "<b>" + this.t("Brilliant!") + "</b><br>" + this.t("Click here to create a new expression."),
                                sel: ".dcg-new-math-div"
                            };
                    var n = this.getMatchingExpId(r.FOCUSED_OR_EMPTY_EXP)
                        , i = this.getSelectorById(n)
                        , o = this.getModelById(n);
                    if (i) {
                        var s = this.expMatches(o, r.NONCONSTANT_LINE)
                            , a = this.expMatches(o, r.HAS_ERROR);
                        return a ? {
                            doNotUpdate: !0
                        } : s ? {
                            position: "e",
                            content: ["<b>" + this.t("Awesome!") + "</b><br>", this.t("Restrict the domain of this line by adding __sample_expression__ to the end.", {
                                sample_expression: '<span class="trip-math">\\left\\{x<0\\right\\}</span>'
                            }), "<br><i>" + this.t("Hint: press the 'A B C' button on the keypad to find the { } buttons") + "</i>"].join(""),
                            sel: i
                        } : {
                                    position: "e",
                                    content: ["<b>" + this.t("Let's get started!") + "</b><br>", this.t("Try graphing a straight line, like __sample_expression__", {
                                        sample_expression: '<span class="trip-math">y=2x</span>'
                                    })].join(""),
                                    sel: i
                                }
                    }
                    return {
                        position: "e",
                        content: this.t("Click here to make a new blank expression."),
                        sel: ".dcg-new-math-div"
                    }
                }
                ,
                e.restrictedParabolaTour = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    var e = this.getMatchingExpSelector([r.RESTRICTED, r.PARABOLA]);
                    if (e)
                        return {
                            final: !0,
                            position: "e",
                            endingMsg: this.t("You're a restrictions star!"),
                            sel: ".dcg-exppanel-container"
                        };
                    var t = this.getMatchingExpId([r.EXP_NOT_RESTRICTED_LINE, r.FOCUSED_EXP])
                        , n = this.getSelectorById(t)
                        , i = this.getModelById(t);
                    if (n) {
                        var o = this.expMatches(i, [r.PARABOLA, r.HAS_DEPENDENT_Y])
                            , s = this.expMatches(i, r.SHIFTED_PARABOLA)
                            , a = this.expMatches(i, r.PARABOLA)
                            , c = this.expMatches(i, r.HAS_ERROR);
                        return c ? {
                            doNotUpdate: !0
                        } : a ? o ? s ? {
                            position: "e",
                            content: ["<b>" + this.t("Nice!") + "</b><br>" + this.t("Now let's restrict the range. Add __sample_expression__ to the end.", {
                                sample_expression: '<span class="trip-math">\\left\\{y<4\\right\\}</span>'
                            })].join(""),
                            sel: n
                        } : {
                                position: "e",
                                content: ["<b>" + this.t("Move the parabola.") + "</b><br>", this.t("Change this equation to __sample_expression__", {
                                    sample_expression: '<span class="trip-math">y=x^2-2</span>'
                                })].join(""),
                                sel: n
                            } : {
                                position: "e",
                                content: ["<b>" + this.t('Don\'t forget the "y="!') + "</b><br>", this.t("Try typing all of __sample_expression__", {
                                    sample_expression: '<span class="trip-math">y=x^2</span>'
                                })].join(""),
                                sel: n
                            } : {
                                    position: "e",
                                    content: [this.t("Now graph: __sample_expression__", {
                                        sample_expression: '<span class="trip-math">y=x^2</span>'
                                    }) + "<br><i>" + this.t('Hint: you can type y=x^2, or use the <span class="trip-math">a^2</span> button on the keypad below.') + "</i>"].join(""),
                                    sel: n
                                }
                    }
                    return {
                        position: "e",
                        content: this.t("Click here to make a new blank expression."),
                        sel: ".dcg-new-math-div"
                    }
                }
                ,
                e.phaseOn = 0,
                e.phases = [e.restrictedLineTour, e.restrictedParabolaTour],
                e.update = function () {
                    return this.phases[this.phaseOn].call(this)
                }
        })
    }),
    define("loadcss!regression-tour", function () { }),
    define("tours/regressions", ["require", "pjs", "jquery", "./base_tour", "loadcss!regression-tour", "browser", "predicates/common"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("./base_tour");
        e("loadcss!regression-tour");
        var i = e("browser")
            , o = e("predicates/common");
        return t(r, function (e, t) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(o.TABLE)
            }
                ,
                e.hasCreatedLinearRegression = !1,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpId(o.REGRESSION) || this.getMatchingExpId(o.EXP)
                        , t = this.getSelectorById(e)
                        , r = this.getModelById(e)
                        , s = this.getMatchingExpId(o.HAS_DATA_COLUMN)
                        , a = this.getSelectorById(s)
                        , c = this.getModelById(s);
                    if (!a || !c.columnModels[1]) {
                        var l = n(".dcg-action-newtable:visible")
                            , u = !i.IS_IPAD && !i.IS_MOBILE;
                        return 0 === l.length && u ? {
                            position: "e",
                            content: '<div class="trip-title">' + this.t("First, let's get some data.") + "</div>" + this.t("Head over to Google Docs and copy and paste this __sample_data_link__.", {
                                sample_data_link: '<a class="trip-link" target="_blank" href="https://docs.google.com/spreadsheets/u/1/d/1h4kYwWka_1PvI5G-hPYz_QBe1FrYLo9Gb1XvxJz-QYE/pubhtml?gid=728738737&single=true">' + this.t("sample data") + "</a>"
                            }) + ' <div class="trip-hint"><br>' + this.t("Note: you can add your own data instead by clicking the __plus_icon__ button.", {
                                plus_icon: '<i class="dcg-icon-plus"></i>'
                            }) + "</div>",
                            sel: t ? t : n(".dcg-exppanel")
                        } : 0 === l.length ? {
                            position: "e",
                            content: '<div class="trip-title">' + this.t("Let's start with some data!") + "</div>" + this.t("Click here to add a new item."),
                            sel: n(".dcg-add-expression-btn"),
                            delayBeforeExit: 150
                        } : {
                                    position: "e",
                                    content: this.t("Click here to add a new table."),
                                    sel: l,
                                    delayBeforeExit: 250
                                }
                    }
                    var d = a.find(".dcg-row .dcg-cell:nth-of-type(2):not(.dcg-table-header):not(.dcg-empty)");
                    if (d.length < 5)
                        return {
                            position: "e",
                            content: '<div class="trip-title">' + this.t("Fill in the sample data:") + "</div><table class='dcg-regression-tour-table'><tr><td><span class='trip-math'>x_1</span></td><td><span class='trip-math'>y_1</span></td></tr><tr><td>1</td><td>0.8</td></tr><tr><td>2</td><td>2.7</td></tr><tr><td>3</td><td>3.9</td></tr><tr><td>4</td><td>4.6</td></tr><tr><td>5</td><td>5</td></tr></table>",
                            sel: a.find(".dcg-row:nth-of-type(2) .dcg-cell:nth-of-type(2)")
                        };
                    var p = this.getMatchingExpModel(o.REGRESSION) || this.getMatchingExpModel(o.FOCUSED_EXP) || this.controller.getItemModelByIndex(0);
                    if ("expression" !== p.type) {
                        var h = n(".dcg-action-newexpression:visible");
                        return 0 === h.length ? {
                            position: "e",
                            content: '<div class="trip-title">' + this.t("Awesome!") + "</div>" + this.t("Click here to add a new item."),
                            sel: n(".dcg-add-expression-btn"),
                            delayBeforeExit: 150
                        } : {
                                position: "e",
                                content: this.t('... and select the "expression" option.'),
                                sel: h,
                                delayBeforeExit: 150
                            }
                    }
                    var f = r.formula
                        , m = f ? f.regression : void 0
                        , g = m ? m.statistics : void 0
                        , y = m ? m.parameters : void 0;
                    if (g && g.r && (this.hasCreatedLinearRegression = !0),
                        !this.hasCreatedLinearRegression)
                        return {
                            position: "e",
                            content: this.t("Now type: __equation__", {
                                equation: "<span class='trip-math'>y_1\\sim mx_1+b</span>"
                            }) + "<div class='trip-hint'>" + this.t("Hint #1: to get __y_1__ type __y1__.", {
                                y_1: "<span class='trip-math'>y_1</span>",
                                y1: "<span class='trip-math'>y1</span>"
                            }) + "</div><div class='trip-hint'>" + this.t("Hint #2: __twiddle__ is in our onscreen keypad in the 'A B C' section.", {
                                twiddle: "<span class='trip-math'>~</span>"
                            }) + "</div>",
                            sel: t,
                            delayBeforeExit: 150
                        };
                    var v = n(".dcg-residual-suggestion.dcg-visible");
                    return v.length ? {
                        position: "e",
                        content: "<div class='trip-title'>" + this.t("Nice. Let's check the model.") + "</div>" + this.t("Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph."),
                        sel: v,
                        delayBeforeExit: 250
                    } : g && (g.Rsquared >= .99 || g.r >= .99 || y && y.a && y.k && y.h) ? {
                        final: !0,
                        position: "e",
                        endingMsg: "<div class='trip-title'>" + this.t("Nice work &ndash; Keep exploring!") + "</div>",
                        sel: n(".dcg-exppanel")
                    } : {
                                position: "e",
                                content: "<div class='trip-title'>" + this.t("Now, let's try a new model.") + "</div>" + this.t("Edit this equation to find a better fit. Try, for example:<br>__equation__", {
                                    equation: "<span class='trip-math'>y_1~a(x_1-h)^2+b</span>"
                                }),
                                sel: t,
                                delayBeforeExit: 300
                            }
                }
        })
    }),
    define("tours/list_predicates", ["require", "predicates/common", "parser"], function (e) {
        var t = e("predicates/common")
            , n = e("parser")
            , r = function (e) {
                return function (t, r) {
                    if (!t.latex)
                        return !1;
                    var i = n.parse(t.latex);
                    if (!i._expression)
                        return !1;
                    if ("List" !== i._expression.type && "Range" !== i._expression.type)
                        return !1;
                    if (e.dependent && e.dependent !== t.dependent)
                        return !1;
                    var o = i.getConcreteTree();
                    return !(e.minLength && o.args.length < e.minLength)
                }
            };
        return {
            ANY_LIST: r({}),
            A_LIST: r({
                dependent: "a",
                minLength: 3
            }),
            B_LIST: r({
                dependent: "b",
                minLength: 5
            }),
            C_LIST: r({
                dependent: "c",
                minLength: 10
            }),
            A_DEP: function (e, n) {
                return t.GRAPHABLE_EXP(e, n) && t.DEPENDS_ON("a")(e, n)
            },
            B_DEP: function (e, n) {
                return t.GRAPHABLE_EXP(e, n) && t.DEPENDS_ON("b")(e, n)
            },
            C_DEP: function (e, n) {
                return t.DEPENDS_ON("c")(e, n) && t.EVALUATION(e, n)
            }
        }
    }),
    define("tours/lists", ["require", "pjs", "./base_tour", "./list_predicates"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("./list_predicates");
        return t(n, function (e, t) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(r.ANY_LIST)
            }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpId(r.A_LIST)
                        , t = this.getMatchingExpId(r.B_LIST)
                        , n = this.getMatchingExpId(r.C_LIST)
                        , i = this.getMatchingExpId(r.A_DEP)
                        , o = this.getMatchingExpId(r.B_DEP)
                        , s = this.getMatchingExpSelector(r.C_DEP);
                    return e ? i ? t ? n ? o ? s ? {
                        final: !0,
                        position: "e",
                        endingMsg: "Great job!",
                        sel: s.find(".dcg-evaluation"),
                        scrollContainer: this.expList()
                    } : {
                            position: "e",
                            content: "<b>" + this.t("Last thing!") + "</b> " + this.t("You can do a computation on a list. For example: __equation__", {
                                equation: "<span class='trip-math'>total\\left(c\\right)</span>"
                            }) + "<div class='trip-hint'>",
                            sel: this.getAvailableExp([e, t, i, n, o]),
                            scrollContainer: this.expList(),
                            delayBeforeExit: 600
                        } : {
                            position: "e",
                            content: "<b>" + this.t("Let's graph a few points.") + "</b> " + this.t("Try this: __equation__", {
                                equation: "<span class='trip-math'>\\left(b, sin\\left(b\\right)\\right)</span>"
                            }) + "<div class='trip-hint'>" + this.t("Hint: this will plot a point for each item of b.") + "</div>",
                            sel: this.getAvailableExp([e, t, i, n]),
                            scrollContainer: this.expList()
                        } : {
                            position: "e",
                            content: this.t("If you want to count by 5 instead, just write something like this: __equation__", {
                                equation: "<span class='trip-math'>c=\\left[10, 15, ..., 95\\right]</span>"
                            }),
                            sel: this.getAvailableExp([e, t, i]),
                            scrollContainer: this.expList(),
                            delayBeforeExit: 600
                        } : {
                            position: "e",
                            content: "<b>" + this.t("Awesome!") + "</b> " + this.t("You can create lists of integers even more easily. Try this: __equation__", {
                                equation: "<span class='trip-math'>b=\\left[0...8\\right]</span>"
                            }),
                            sel: this.getAvailableExp([e, i]),
                            scrollContainer: this.expList(),
                            delayBeforeExit: 600
                        } : {
                            position: "e",
                            content: "<b>" + this.t("Nice. Let's put that list to work.") + "</b> " + this.t("Graph: __equation__", {
                                equation: "<span class='trip-math'>y=x^2+a</span>"
                            }) + "<div class='trip-hint'>" + this.t("Hint: you can type y=x^2+a or use the a<sup>2</sup> button on the keypad below.") + "</div>",
                            sel: this.getAvailableExp([e]),
                            scrollContainer: this.expList()
                        } : {
                            position: "e",
                            content: this.t("<b>Lists are powerful. Let's see.</b><br>Begin by typing __equation__", {
                                equation: "<span class='trip-math'>a=\\left[1,2,3\\right]</span>"
                            }) + "<div class='trip-hint'>" + this.t("Hint: press the 'A B C' button on the keypad to find the [ ] buttons"),
                            sel: this.getAvailableExp(),
                            scrollContainer: this.expList(),
                            delayBeforeExit: 600
                        }
                }
        })
    }),
    define("tours/folders", ["require", "pjs", "./base_tour", "jquery"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("jquery")
            , i = function (e, t) {
                return "folder" == e.type
            }
            , o = function (e, t) {
                return e.isGraphable && !e.folderId
            };
        return t(n, function (e, t) {
            e.shouldPopup = function () {
                return !!this.getMatchingExpSelector(i)
            }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpId(i)
                        , t = this.getSelectorById(e)
                        , n = this.getModelById(e)
                        , s = this.getMatchingExpSelector(o);
                    if (!n) {
                        var a = r(".dcg-action-newfolder:visible");
                        return 0 === a.length ? {
                            position: "e",
                            content: "<b>" + this.t("Let's make a folder!") + "</b><br>" + this.t("Click here to add a new item."),
                            sel: r(".dcg-add-expression-btn")
                        } : {
                                position: "e",
                                content: this.t('... and select the "folder" option.'),
                                sel: a
                            }
                    }
                    return this.cachedTitle != n.title && (this.cachedTitle = n.title,
                        this.lastChange = new Date),
                        !this.cachedTitle || new Date - this.lastChange < 1e3 ? {
                            position: "e",
                            content: this.t("Give your folder a name."),
                            sel: t
                        } : 0 === n.controller.getNumberOfItemsInFolder(n.id) ? s ? {
                            position: "e",
                            content: this.t("Now grab this equation by its left edge and drag it into the folder.") + "<div class='trip-hint'>" + this.t("Hint: The gray line will show you if the expression is in the folder.") + "</div>",
                            scrollContainer: this.expList(),
                            sel: s
                        } : {
                                position: "e",
                                content: "<b>" + this.t("Awesome!") + "</b> " + this.t("Let's make a new equation. For example, type: __equation__", {
                                    equation: "<span class='trip-math'>x+y=3</span>"
                                }),
                                scrollContainer: this.expList(),
                                sel: this.getAvailableExp(),
                                delayBeforeExit: 500
                            } : n.collapsed ? n.hidden ? {
                                final: !0,
                                position: "e",
                                endingMsg: "Great job!",
                                sel: ".dcg-exppanel-container",
                                scrollContainer: this.expList()
                            } : {
                                    position: "s",
                                    content: "<b>" + this.t("Did You Know...") + "</b>" + this.t("You can hide everything in the folder with one click. Click here to try."),
                                    scrollContainer: this.expList(),
                                    sel: t.find(".dcg-action-toggle-folder-hidden")
                                } : {
                                        position: "e",
                                        content: "<b>" + this.t("Thats a great start!") + "</b> " + this.t("Now well explore some folder functionality. Click here to collapse the folder."),
                                        scrollContainer: this.expList(),
                                        sel: t.find(".dcg-caret-container")
                                    }
                }
        })
    }),
    define("tours/derivatives_predicates", ["require", "predicates/common"], function (e) {
        var t = e("predicates/common")
            , n = function (e, t) {
                return e.latex.indexOf("\\frac{d}{dx}") >= 0
            };
        return {
            DEFINE_F: function (e, n) {
                return !!t.DEFINES("f")(e, n) && !!t.COMPLEX_EXP(e, n)
            },
            DEFINE_G: function (e, r) {
                return !!t.DEFINES("g")(e, r) && (!!t.DEPENDS_ON("f")(e, r) && (!!t.GRAPHABLE_EXP(e, r) && n(e, r)))
            },
            INLINE_DERIVATIVE: function (e, r) {
                return !!t.COMPLEX_EXP(e, r) && (!t.DEPENDS_ON("f")(e, r) && n(e, r))
            }
        }
    }),
    define("tours/derivatives", ["require", "pjs", "./base_tour", "./derivatives_predicates"], function (e) {
        var t = e("pjs")
            , n = e("./base_tour")
            , r = e("./derivatives_predicates");
        return t(n, function (e, t) {
            e.shouldPopup = function () {
                return !1
            }
                ,
                e.update = function () {
                    if (this.resourcesOpen())
                        return this.requireResourcesNotOpen();
                    if (!this.expressionsVisible())
                        return this.requireExpressionsVisible();
                    if (this.editListMode())
                        return this.requireNotEditListMode();
                    var e = this.getMatchingExpId(r.DEFINE_F)
                        , t = this.getMatchingExpId(r.DEFINE_G)
                        , n = this.getMatchingExpSelector(r.INLINE_DERIVATIVE);
                    return e ? t ? n ? {
                        final: !0,
                        position: "e",
                        endingMsg: "Great job!",
                        sel: n,
                        scrollContainer: this.expList()
                    } : {
                            position: "e",
                            content: this.t("Let's try one more: __equation__", {
                                equation: "<span class='trip-math'>\\frac{d}{dx}\\ln \\left(x\\right)</span>"
                            }),
                            sel: this.getAvailableExp([e, t]),
                            scrollContainer: this.expList()
                        } : {
                            position: "e",
                            content: this.t("To graph its derivative: __equation__", {
                                equation: "<span class='trip-math'>g\\left(x\\right)=\\frac{d}{dx}f\\left(x\\right)</span>"
                            }) + "<div class='trip-hint'>" + this.t("Hint: To get the derivative operator, just type d/dx.") + "</div>",
                            sel: this.getAvailableExp([e]),
                            scrollContainer: this.expList()
                        } : {
                            position: "e",
                            content: this.t("<b>Let's graph a derivative!</b><br>Start with a function: __equation__", {
                                equation: "<span class='trip-math'>f\\left(x\\right)=x\\sin \\left(x\\right)</span>"
                            }),
                            sel: this.getAvailableExp(),
                            scrollContainer: this.expList()
                        }
                }
        })
    }),
    define("tours/all_tours", ["require", "tours/sliders", "tours/scatter_plot", "tours/function_table", "tours/restrictions", "tours/regressions", "tours/lists", "tours/folders", "tours/mathart", "tours/derivatives", "i18n", "underscore"], function (e) {
        var t = e("tours/sliders")
            , n = e("tours/scatter_plot")
            , r = e("tours/function_table")
            , i = e("tours/restrictions")
            , o = e("tours/regressions")
            , s = e("tours/lists")
            , a = e("tours/folders")
            , c = e("tours/mathart")
            , l = e("tours/derivatives")
            , u = e("i18n")
            , d = e("underscore");
        u.t("Sliders"),
            u.t("Tables"),
            u.t("Restrictions"),
            u.t("Advanced Tables"),
            u.t("Regressions"),
            u.t("Lists"),
            u.t("Folders"),
            u.t("Derivatives");
        var p = {
            sliders: {
                tour: t,
                title: "Sliders"
            },
            tables: {
                tour: n,
                title: "Tables"
            },
            restrictions: {
                tour: i,
                title: "Restrictions"
            },
            functiontable: {
                tour: r,
                title: "Advanced Tables",
                hideInHelp: !0
            },
            regressions: {
                tour: o,
                title: "Regressions"
            },
            lists: {
                tour: s,
                title: "Lists",
                hideInHelp: !0
            },
            mathart: {
                tour: c.mathart_intro,
                title: "Math Art Intro",
                hideInHelp: !0
            },
            folders: {
                tour: a,
                title: "Folders",
                hideInHelp: !0
            },
            derivatives: {
                tour: l,
                title: "Derivatives",
                hideInHelp: !0
            }
        };
        return d.each(p, function (e, t) {
            e.name = t
        }),
            p
    }),
    function () {
        define("calculator-shell/tour-links", ["require", "dcgview", "underscore", "analytics/google_analytics", "tours/all_tours"], function (e) {
            var t, n, r, i, o, s, a, c, l;
            return t = e("dcgview"),
                c = t.Components,
                n = c.For,
                r = c.If,
                s = e("underscore"),
                a = e("analytics/google_analytics"),
                l = e("tours/all_tours"),
                i = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.tourController = this.controller.tourController,
                            this.createElement("a", {
                                class: t.const("dcg-feature"),
                                href: function (e) {
                                    return function () {
                                        return "/calculator?tour=" + e.props.name()
                                    }
                                }(this),
                                target: t.const("_blank"),
                                ignoreRealClick: function (e) {
                                    return function () {
                                        return !e.tourController.shouldPopupTour(e.props.name())
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function (t) {
                                        if (!e.tourController.shouldPopupTour(e.props.name()))
                                            return t.originalEvent.preventDefault(),
                                                e.dispatch({
                                                    type: "toggle-menu",
                                                    payload: "none"
                                                }),
                                                e.controller.tourController.startTour(e.props.name(), "help")
                                    }
                                }(this)
                            }, this.createElement("span", {
                                class: function (e) {
                                    return function () {
                                        return "dcg-thumb dcg-" + e.props.name()
                                    }
                                }(this)
                            }), function (e) {
                                return function () {
                                    return e.controller.t(e.props.title())
                                }
                            }(this))
                    }
                }),
                o = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.createElement(n, {
                                each: function (e) {
                                    return function () {
                                        return s.keys(l)
                                    }
                                }(this)
                            }, this.createElement("div", {
                                class: t.const("dcg-popover-content dcg-tours-content"),
                                role: t.const("group"),
                                "aria-label": t.const("Tours")
                            }, function (e) {
                                return function (t) {
                                    return e.createElement(r, {
                                        predicate: function () {
                                            return !l[t].hideInHelp
                                        }
                                    }, function () {
                                        return e.createElement(i, {
                                            name: function () {
                                                var e;
                                                return null != (e = l[t]) ? e.name : void 0
                                            },
                                            title: function () {
                                                var e;
                                                return null != (e = l[t]) ? e.title : void 0
                                            },
                                            controller: e.props.controller
                                        })
                                    })
                                }
                            }(this)))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/resource-links", ["require", "dcgview", "i18n"], function (e) {
            var t, n, r, i;
            return t = e("dcgview"),
                i = e("i18n"),
                n = t.createClass({
                    template: function () {
                        return this.createElement("a", {
                            href: function (e) {
                                return function () {
                                    return e.props.href()
                                }
                            }(this),
                            target: t.const("_blank"),
                            class: t.const("dcg-resource-link")
                        }, this.createElement("i", {
                            class: function (e) {
                                return function () {
                                    return "dcg-icon-" + e.props.icon()
                                }
                            }(this),
                            "aria-hidden": t.const("true")
                        }), this.createElement("span", null, function (e) {
                            return function () {
                                return e.props.title()
                            }
                        }(this)))
                    }
                }),
                r = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.createElement("div", {
                                class: t.const("dcg-popover-content dcg-resources-content"),
                                role: t.const("group"),
                                "aria-label": t.const("Resources")
                            }, this.createElement(n, {
                                href: t.const("http://learn.desmos.com"),
                                icon: t.const("rocket"),
                                title: function (e) {
                                    return function () {
                                        return e.t("Getting Started")
                                    }
                                }(this)
                            }), this.createElement(n, {
                                href: t.const("https://www.youtube.com/playlist?list=PLfM6zMGnbgOGLZc-_Yj3QVK3Vz_L4Cw59"),
                                icon: t.const("film"),
                                title: function (e) {
                                    return function () {
                                        return e.t("Video Tutorials")
                                    }
                                }(this)
                            }), this.createElement(n, {
                                href: function (e) {
                                    return function () {
                                        return i.enabled_languages[i.detectLanguage()] ? i.enabled_languages[i.detectLanguage()].userGuideURL : i.enabled_languages.en.userGuideURL
                                    }
                                }(this),
                                icon: t.const("book"),
                                title: function (e) {
                                    return function () {
                                        return e.t("Desmos User Guide")
                                    }
                                }(this)
                            }), this.createElement(n, {
                                href: t.const("http://support.desmos.com/hc/en-us"),
                                icon: t.const("comments"),
                                title: function (e) {
                                    return function () {
                                        return e.t("Help Center")
                                    }
                                }(this)
                            }), this.createElement("div", {
                                class: t.const("dcg-resource-link dcg-action-show-hotkeys"),
                                role: t.const("link"),
                                tabindex: t.const(0),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "show-hotkeys"
                                        })
                                    }
                                }(this)
                            }, this.createElement("i", {
                                class: t.const("dcg-icon-keyboard")
                            }), this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Keyboard Shortcuts")
                                }
                            }(this))))
                    }
                })
        })
    }
        .call(this),
    define("main/backend", ["require", "jquery"], function (require) {
        var $ = require("jquery")
            , Backend = {
                baseURL: "",
                getGoogleLoginURL: function (e) {
                    void 0 === e && (e = {});
                    var t = e.changeToken ? "?" + e.changeToken : "";
                    return Backend.baseURL + "/drive_api/calculator/login" + t
                },
                exchangeGoogleAuthCode: function (e) {
                    var t = $.Deferred();
                    return e ? this.getJSON("/account/google_auth?code=" + e).always(function (e) {
                        e && e.success ? t.resolve() : t.reject()
                    }) : setTimeout(function () {
                        t.reject("no auth code")
                    }, 1),
                        t.promise()
                },
                handleDeprecatedRoute: function (msg) {
                    if (msg && msg.routeDeprecated) {
                        msg.js && eval(msg.js);
                        var deferred = $.Deferred();
                        return deferred.reject(msg),
                            deferred.promise()
                    }
                    return msg
                },
                post: function (e, t) {
                    return $.ajax({
                        type: "POST",
                        url: Backend.baseURL + e,
                        data: t,
                        xhrFields: {
                            withCredentials: !0
                        }
                    }).then(Backend.handleDeprecatedRoute)
                },
                getJSON: function (e) {
                    return $.ajax({
                        dataType: "json",
                        url: Backend.baseURL + e,
                        xhrFields: {
                            withCredentials: !0
                        }
                    }).then(Backend.handleDeprecatedRoute)
                }
            };
        return Backend
    }),
    define("main/calculator_backend", ["require", "main/graph", "./backend"], function (e) {
        var t = e("main/graph")
            , n = e("./backend")
            , r = {
                saveGraph: function (e, r) {
                    if (!r.hasOwnProperty("myGraphs"))
                        throw new Error("Argument Error: saveGraph options must specify myGraphs");
                    if (!r.hasOwnProperty("isUpdate"))
                        throw new Error("Argument Error: saveGraph options must specify isUpdate");
                    var i = {
                        parent_hash: e.parentHash,
                        thumb_data: e.thumbURL,
                        graph_hash: e.hash,
                        version: "h3",
                        my_graphs: r.myGraphs,
                        is_update: r.isUpdate,
                        title: e.title || void 0
                    };
                    return i.calc_state = e.graphData,
                        n.post("/api/v1/calculator/save", i).then(function (n) {
                            return t.updateFromSync(e, n),
                                e
                        })
                },
                emailFeedback: function (e) {
                    return n.post("/api/v1/calculator/email_feedback", e)
                },
                getGraphs: function () {
                    return n.getJSON("/api/v1/calculator/my_graphs")
                },
                removeGraph: function (e) {
                    return n.post("/api/v1/calculator/my_graphs/remove", {
                        hash: e.hash
                    })
                }
            };
        return r
    }),
    define("main/parse_json_errors", ["require"], function (e) {
        var t = function (e) {
            if (0 === e.status)
                return [{
                    message: "Connection failed. Check your internet connection?"
                }];
            try {
                return JSON.parse(e.responseText).errors
            } catch (e) {
                return [{
                    message: "Unexpected server error. Try again, or e-mail calculator@desmos.com."
                }]
            }
        };
        return t
    }),
    function () {
        define("calculator-shell/suggestion-form", ["require", "dcgview", "main/calculator_backend", "main/parse_json_errors", "jquery", "underscore"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p, h;
            return n = e("dcgview"),
                h = n.Components,
                i = h.If,
                r = h.For,
                o = h.Input,
                a = h.Textarea,
                l = e("main/calculator_backend"),
                p = e("main/parse_json_errors"),
                t = e("jquery"),
                c = e("underscore"),
                u = 33,
                d = 80,
                s = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.formErrors = [],
                            this.feedbackInProgress = !1,
                            this.feedbackFocused = !1,
                            this.feedbackFromName = "",
                            this.feedbackMessage = "",
                            this.didSendFeedbackEmail = !1,
                            this.createElement("div", {
                                class: n.const("dcg-suggestions")
                            }, this.createElement("div", {
                                class: n.const("template-errors")
                            }, this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formErrors.length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(r, {
                                        each: function () {
                                            return c.map(e.formErrors, function (e) {
                                                return JSON.stringify(e)
                                            })
                                        }
                                    }, e.createElement("span", null, function (t) {
                                        var r;
                                        return r = JSON.parse(t).message,
                                            e.createElement("div", {
                                                class: n.const("errors")
                                            }, e.createElement("span", null, function () {
                                                return e.t(r)
                                            }))
                                    }))
                                }
                            }(this))), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.didSendFeedbackEmail
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("dcg-feedback-email-sent")
                                    }, function () {
                                        return e.t("Thanks for the feedbackyou'll hear from us soon!")
                                    })
                                }
                            }(this)), this.createElement("form", {
                                didMount: this.didMountSuggestionForm.bind(this),
                                class: n.const("dcg-action-submit")
                            }, this.createElement(a, {
                                placeholder: n.const("Type your question or suggestion..."),
                                name: n.const("message"),
                                onFocus: function (e) {
                                    return function () {
                                        return e.onFocusFeedback()
                                    }
                                }(this),
                                style: function (e) {
                                    return function () {
                                        return {
                                            height: e.feedbackFocused ? d + "px" : u + "px"
                                        }
                                    }
                                }(this),
                                value: function (e) {
                                    return function () {
                                        return e.feedbackMessage
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.feedbackMessage = t,
                                            e.update()
                                    }
                                }(this)
                            }), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.feedbackFocused
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("dcg-suggestions-expansion")
                                    }, e.createElement(i, {
                                        predicate: function () {
                                            return !e.userController.isLoggedIn()
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: n.const("template-unlessuser")
                                        }, e.createElement("div", {
                                            class: n.const("dcg-feedback-email-label")
                                        }, function () {
                                            return e.t("Please provide an email so we can write back.")
                                        }, e.createElement("i", null, n.const("("), function () {
                                            return e.t("optional")
                                        }, n.const(")"))), e.createElement(o, {
                                            name: n.const("anonymous-email"),
                                            class: n.const("dcg-anonymous-email"),
                                            placeholder: n.const("your.name@test.com"),
                                            type: n.const("email"),
                                            value: function () {
                                                return e.feedbackFromName
                                            },
                                            onInput: function (t) {
                                                return e.feedbackFromName = t,
                                                    e.update()
                                            }
                                        }))
                                    }), e.createElement("span", {
                                        class: n.const("dcg-feedback-btns")
                                    }, e.createElement("a", {
                                        role: n.const("link"),
                                        tabindex: n.const(0),
                                        class: n.const("dcg-btn-light-gray dcg-action-closesuggestion"),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "toggle-menu",
                                                payload: "none"
                                            })
                                        }
                                    }, function () {
                                        return e.t("Cancel")
                                    }), e.createElement("button", {
                                        class: n.const("dcg-btn-green"),
                                        name: n.const("submit"),
                                        type: n.const("submit")
                                    }, function () {
                                        return e.t("Send Feedback")
                                    })), e.createElement(i, {
                                        predicate: function () {
                                            return e.feedbackInProgress
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: n.const("template-processing")
                                        }, e.createElement("span", {
                                            class: n.const("dcg-spinner")
                                        }), function () {
                                            return e.t("sending...")
                                        })
                                    }))
                                }
                            }(this))))
                    },
                    didMountSuggestionForm: function (e) {
                        return t(e).on("submit", function (e) {
                            return function (t) {
                                return t.preventDefault(),
                                    e.submitForm()
                            }
                        }(this))
                    },
                    onFocusFeedback: function () {
                        return this.feedbackFocused = !0,
                            this.update()
                    },
                    didUnmount: function () {
                        return this.unmounted = !0
                    },
                    submitForm: function () {
                        var e, n;
                        return this.didSendFeedbackEmail = !1,
                            this.feedbackInProgress = !0,
                            this.formErrors = [],
                            n = t.trim(t('textarea[name="message"]').val()),
                            n.length || (this.formErrors = [{
                                message: this.t("Please enter your feedback")
                            }]),
                            this.formErrors.length ? (this.feedbackInProgress = !1,
                                void this.update()) : (e = {
                                    message: n,
                                    state: JSON.stringify(this.controller.api.getState()),
                                    userAgent: navigator.userAgent,
                                    "anonymous-email": t('input[name="anonymous-email"]').val()
                                },
                                    l.emailFeedback(e).done(function (e) {
                                        return function (t) {
                                            return e.didSendFeedbackEmail = !0,
                                                e.feedbackMessage = "",
                                                e.feedbackFromName = "",
                                                e.feedbackFocused = !1,
                                                setTimeout(function () {
                                                    if (e.didSendFeedbackEmail = !1,
                                                        !e.unmounted)
                                                        return e.update()
                                                }, 2e3)
                                        }
                                    }(this)).fail(function (e) {
                                        return function (t) {
                                            return e.formErrors = p(t)
                                        }
                                    }(this)).always(function (e) {
                                        return function () {
                                            if (e.feedbackInProgress = !1,
                                                !e.unmounted)
                                                return e.update()
                                        }
                                    }(this)),
                                    this.update())
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/feedback-links", ["require", "dcgview", "./suggestion-form"], function (e) {
            var t, n, r;
            return t = e("dcgview"),
                r = e("./suggestion-form"),
                n = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.createElement("div", {
                                class: t.const("dcg-popover-content dcg-hide-on-mobile"),
                                role: t.const("group"),
                                "aria-label": t.const("Feedback")
                            }, this.createElement("div", {
                                class: t.const("dcg-resources-content dcg-feedback-content")
                            }, this.createElement(r, {
                                controller: this.props.controller
                            })))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!calculator-shell/help", function () { }),
    function () {
        define("calculator-shell/help-menu", ["require", "dcgview", "./menu", "./tour-links", "./resource-links", "./feedback-links", "loadcss!./help"], function (e) {
            var t, n, r, i, o, s;
            return t = e("dcgview"),
                i = e("./menu"),
                s = e("./tour-links"),
                o = e("./resource-links"),
                n = e("./feedback-links"),
                e("loadcss!./help"),
                r = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.createElement(i, {
                                title: function (e) {
                                    return function () {
                                        return e.t("Tours")
                                    }
                                }(this),
                                type: function (e) {
                                    return function () {
                                        return "help"
                                    }
                                }(this),
                                label: function (e) {
                                    return function () {
                                        return e.t("Help Menu")
                                    }
                                }(this),
                                controller: this.props.controller
                            }, this.createElement(s, {
                                controller: this.props.controller
                            }), this.createElement("div", {
                                class: t.const("dcg-popover-title"),
                                "aria-hidden": t.const("true")
                            }, function (e) {
                                return function () {
                                    return e.t("Resources")
                                }
                            }(this)), this.createElement(o, {
                                controller: this.props.controller
                            }), this.createElement("div", {
                                class: t.const("dcg-popover-title dcg-interior-title dcg-hide-on-mobile"),
                                "aria-hidden": t.const("true")
                            }, function (e) {
                                return function () {
                                    return e.t("Feedback")
                                }
                            }(this)), this.createElement(n, {
                                controller: this.props.controller
                            }))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!calculator-shell/share-menu", function () { }),
    function () {
        define("calculator-shell/share-menu", ["require", "dcgview", "jquery", "browser", "main/calculator_backend", "./menu", "loadcss!./share-menu"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p;
            return r = e("dcgview"),
                p = r.Components,
                o = p.If,
                l = p.Switch,
                s = p.Input,
                u = p.Textarea,
                i = p.For,
                t = e("jquery"),
                n = e("browser"),
                d = e("main/calculator_backend"),
                a = e("./menu"),
                e("loadcss!./share-menu"),
                c = r.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.graphsController = this.controller.graphsController,
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.graph = null,
                            this.shareInProgress = !0,
                            this.didSharingFail = !1,
                            this.createElement(a, {
                                title: function (e) {
                                    return function () {
                                        return e.t("Share your graph")
                                    }
                                }(this),
                                type: r.const("share"),
                                label: function (e) {
                                    return function () {
                                        return e.t("Share Options")
                                    }
                                }(this),
                                controller: this.props.controller
                            }, this.createElement("div", {
                                class: r.const("dcg-popover-content")
                            }, this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return e.shareInProgress
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("dcg-loading")
                                    }, e.createElement("span", {
                                        class: r.const("dcg-spinner")
                                    }), function () {
                                        return e.t("Loading...")
                                    })
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return e.didSharingFail
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("dcg-failed")
                                    }, e.createElement("span", {
                                        "aria-live": r.const("assertive"),
                                        "aria-atomic": r.const(!0)
                                    }, function () {
                                        return e.t("Sorry, there was an error generating a link to your graph. Check your internet connection.") + " "
                                    }), e.createElement("span", {
                                        role: r.const("button"),
                                        tabindex: r.const(0),
                                        class: r.const("dcg-action-retry"),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "toggle-menu",
                                                payload: "none"
                                            }),
                                                e.dispatch({
                                                    type: "toggle-menu",
                                                    payload: "share"
                                                })
                                        }
                                    }, function () {
                                        return e.t("Retry now")
                                    }), function () {
                                        return " " + e.t("or") + " "
                                    }, e.createElement("span", {
                                        role: r.const("button"),
                                        tabindex: r.const(0),
                                        class: r.const("dcg-action-close"),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "toggle-menu",
                                                payload: "share"
                                            })
                                        }
                                    }, function () {
                                        return e.t("Cancel")
                                    }), r.const("."))
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.shareInProgress && !e.didSharingFail
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("dcg-loaded"),
                                        didMount: e.didMountLoaded.bind(e)
                                    }, function () {
                                        return e.t("Share this link:")
                                    }, e.createElement("div", {
                                        class: r.const("dcg-permalink-container")
                                    }, e.createElement(s, {
                                        class: r.const("dcg-permalink select-all dcg-variable-permalink"),
                                        "aria-label": r.const("Link to this graph"),
                                        name: r.const("Link to this graph"),
                                        value: function () {
                                            return e.getGraphPath()
                                        },
                                        didMount: function (t) {
                                            if (e.linkInput = t,
                                                !n.IS_MOBILE)
                                                return e.linkInput.focus()
                                        },
                                        onTap: function () {
                                            return e.linkInput.select()
                                        },
                                        onInput: function () { }
                                    }), e.createElement("div", {
                                        role: r.const("button"),
                                        tabindex: r.const(0),
                                        class: r.const("dcg-copy-button"),
                                        onTap: e.copyLink.bind(e)
                                    }, e.createElement(l, {
                                        key: function () {
                                            return e.copyStatus
                                        }
                                    }, function (t) {
                                        return "success" === t ? e.createElement("span", {
                                            "aria-label": function () {
                                                return e.t("Link copied")
                                            }
                                        }, e.createElement("i", {
                                            class: r.const("dcg-icon-check")
                                        })) : "error" === t ? e.createElement("span", {
                                            "aria-label": function () {
                                                return e.t("Unable to copy link")
                                            }
                                        }, e.createElement("i", {
                                            class: r.const("dcg-icon-error")
                                        })) : e.createElement("span", {
                                            class: r.const("dcg-copy-text")
                                        }, function () {
                                            return e.t("Copy")
                                        })
                                    }))), e.createElement("div", {
                                        class: r.const("dcg-share-actions")
                                    }, e.createElement("span", {
                                        class: r.const("dcg-print-link"),
                                        onClick: e.print.bind(e),
                                        tabindex: r.const(0),
                                        "aria-label": r.const("Print Graph and Equations"),
                                        role: r.const("link")
                                    }, e.createElement("i", {
                                        class: r.const("dcg-icon-print")
                                    }), e.createElement("span", null, function () {
                                        return e.t("Print")
                                    })), e.createElement("span", {
                                        class: r.const("dcg-export-image-link"),
                                        onClick: e.exportImage.bind(e),
                                        tabindex: r.const(0),
                                        "aria-label": r.const("Export Image"),
                                        role: r.const("link")
                                    }, e.createElement("i", {
                                        class: r.const("dcg-icon-export")
                                    }), e.createElement("span", null, function () {
                                        return e.t("Export Image")
                                    })), e.createElement("span", {
                                        class: function () {
                                            return {
                                                "dcg-embed-link": !0,
                                                "dcg-selected": e.embedVisible
                                            }
                                        },
                                        onTap: e.toggleEmbedVisible.bind(e),
                                        tabindex: r.const(0),
                                        "aria-label": r.const("Embed Graph"),
                                        role: r.const("link")
                                    }, e.createElement("i", {
                                        class: r.const("dcg-icon-embed")
                                    }), e.createElement("span", null, function () {
                                        return e.t("Embed")
                                    }))), e.createElement(o, {
                                        predicate: function () {
                                            return e.embedVisible
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: r.const("dcg-embed-div share-div"),
                                            didMount: e.didMountTextarea.bind(e)
                                        }, e.createElement(u, {
                                            rows: r.const("6"),
                                            class: r.const("select-all first-input dcg-variable-htmlembedcode"),
                                            value: function () {
                                                return e.getGraphEmbedCode()
                                            },
                                            onInput: function () { }
                                        }))
                                    }))
                                }
                            }(this))))
                    },
                    copyLink: function () {
                        if (null != this.linkInput) {
                            t(this.linkInput).focus().select(),
                                this.copyStatus = "success";
                            try {
                                document.execCommand("copy")
                            } catch (e) {
                                this.copyStatus = "error"
                            }
                            return this.update(),
                                clearTimeout(this.copyStatusTimeout),
                                this.copyStatusTimeout = setTimeout(function (e) {
                                    return function () {
                                        return e.copyStatus = null,
                                            e.update()
                                    }
                                }(this), 2500)
                        }
                    },
                    didMountTextarea: function (e) {
                        return t(e).find("textarea").focus().select()
                    },
                    toggleEmbedVisible: function () {
                        return this.embedVisible = !this.embedVisible,
                            this.update()
                    },
                    twitterUrl: function () {
                        return "http://twitter.com/home?status=Check out my @desmos graph: " + this.getGraphPath()
                    },
                    facebookUrl: function () {
                        return "http://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(this.getGraphPath())
                    },
                    didMountLoaded: function () {
                        return this.embedVisible = !1
                    },
                    print: function () {
                        return window.print()
                    },
                    exportImage: function () {
                        return this.dispatch({
                            type: "export-image"
                        })
                    },
                    getGraphPath: function () {
                        var e;
                        return null != (e = this.graph) ? e.getURL() : void 0
                    },
                    getGraphEmbedCode: function () {
                        return this.graph ? '<iframe src="' + this.getGraphPath() + '?embed" width="500px" height="500px" style="border: 1px solid #ccc" frameborder=0></iframe>' : ""
                    },
                    didUnmount: function () {
                        return this.unmounted = !0
                    },
                    didMount: function () {
                        return this.graphsController.shareGraph().done(function (e) {
                            return function (t) {
                                return e.graph = t
                            }
                        }(this)).fail(function (e) {
                            return function () {
                                return e.didSharingFail = !0
                            }
                        }(this)).always(function (e) {
                            return function () {
                                if (e.shareInProgress = !1,
                                    e.unmounted !== !0)
                                    return e.update()
                            }
                        }(this))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/account-menu", ["require", "dcgview", "./menu"], function (e) {
            var t, n, r, i;
            return n = e("dcgview"),
                r = n.Components.If,
                i = e("./menu"),
                t = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch.bind(this.controller),
                            this.t = this.controller.t,
                            this.userController = this.controller.userController,
                            this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(i, {
                                        type: function () {
                                            return "account"
                                        },
                                        label: function () {
                                            return e.t("Account Information")
                                        },
                                        controller: e.props.controller
                                    }, e.createElement("div", {
                                        class: n.const("user-info")
                                    }, e.createElement("span", {
                                        class: n.const("account-name")
                                    }, function () {
                                        return e.userController.getFullName()
                                    }), e.createElement("span", {
                                        class: n.const("account-email")
                                    }, function () {
                                        return e.userController.getEmail()
                                    }), e.createElement("a", {
                                        class: n.const("dcg-action-accountsettings"),
                                        role: n.const("link"),
                                        tabindex: n.const(0),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "edit-account"
                                            })
                                        }
                                    }, function () {
                                        return e.t("Account Settings")
                                    })), e.createElement("a", {
                                        class: n.const("dcg-action-logout"),
                                        role: n.const("link"),
                                        tabindex: n.const(0),
                                        onTap: function () {
                                            return e.logout()
                                        }
                                    }, function () {
                                        return e.t("Sign Out")
                                    }))
                                }
                            }(this))
                    },
                    logout: function () {
                        return this.dispatch({
                            type: "toggle-menu",
                            payload: "none"
                        }),
                            this.userController.logout()
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/wrapper", ["require", "dcgview", "./view", "./language-menu", "./help-menu", "./share-menu", "./account-menu"], function (e) {
            var t, n, r, i, o, s, a, c;
            return n = e("dcgview"),
                a = n.Components.Switch,
                r = e("./view"),
                o = e("./language-menu"),
                i = e("./help-menu"),
                s = e("./share-menu"),
                t = e("./account-menu"),
                c = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.createElement("div", null, this.createElement(r, {
                                controller: this.props.controller
                            }), this.createElement(a, {
                                key: function (e) {
                                    return function () {
                                        return e.controller.getOpenMenu()
                                    }
                                }(this)
                            }, function (e) {
                                return function (n) {
                                    switch (n) {
                                        case "language":
                                            return e.createElement(o, {
                                                controller: e.props.controller
                                            });
                                        case "help":
                                            return e.createElement(i, {
                                                controller: e.props.controller
                                            });
                                        case "share":
                                            return e.createElement(s, {
                                                controller: e.props.controller
                                            });
                                        case "account":
                                            return e.createElement(t, {
                                                controller: e.props.controller
                                            })
                                    }
                                }
                            }(this)))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/modal", ["require", "dcgview"], function (e) {
            var t, n;
            return t = e("dcgview"),
                n = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            modal_section: !0,
                                            "dcg-hotkeys-dialog": "hotkeys" === e.controller.getOpenModal()
                                        }
                                    }
                                }(this)
                            }, this.children)
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/save-dialog", ["require", "dcgview", "./modal", "jquery"], function (e) {
            var t, n, r, i, o, s, a, c;
            return r = e("dcgview"),
                c = r.Components,
                o = c.Input,
                n = c.Checkbox,
                i = c.If,
                s = e("./modal"),
                t = e("jquery"),
                a = r.createClass({
                    template: function () {
                        var e;
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.graphsController = this.controller.graphsController,
                            this.lastSavedTitle = this.graphsController.getCurrentGraphTitle(),
                            this.newSaveTitle = this.lastSavedTitle,
                            null == (e = this.controller.state).saveDialog && (e.saveDialog = {
                                copyOnSave: !0
                            }),
                            this.createElement(s, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: r.const("save-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.getSaveText()
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("dcg-clear")
                            }), this.createElement("form", {
                                didMount: this.didMountForm.bind(this)
                            }, this.createElement("label", {
                                class: r.const("input-label")
                            }, this.createElement("div", {
                                class: r.const("graph-title-title")
                            }, function (e) {
                                return function () {
                                    return e.t("Title:")
                                }
                            }(this), r.const("  ")), this.createElement(o, {
                                class: r.const("title-input"),
                                name: r.const("title"),
                                placeholder: function (e) {
                                    return function () {
                                        return e.graphsController.getUntitledString()
                                    }
                                }(this),
                                value: function (e) {
                                    return function () {
                                        return e.newSaveTitle
                                    }
                                }(this),
                                maxlength: r.const("140"),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.newSaveTitle = t
                                    }
                                }(this),
                                didMount: function (e) {
                                    return t(e).focus().select()
                                }
                            })), this.createElement("div", null, this.createElement("button", {
                                type: r.const("submit"),
                                class: r.const("dcg-btn dcg-btn-green pull-right dcg-action-save")
                            }, function (e) {
                                return function () {
                                    return e.t("Save")
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.graphsController.wasCurrentGraphEverSaved()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("label", {
                                        class: r.const("dcg-new-copy pull-right")
                                    }, e.createElement(n, {
                                        checked: function () {
                                            return e.controller.state.saveDialog.copyOnSave
                                        },
                                        onChange: function (t) {
                                            return e.controller.state.saveDialog.copyOnSave = t,
                                                e.update()
                                        }
                                    }), e.createElement("span", {
                                        class: r.const("duplicate-label")
                                    }, function () {
                                        return e.getDuplicateText()
                                    }))
                                }
                            }(this))))))
                    },
                    didMountForm: function (e) {
                        return t(e).on("submit", function (e) {
                            return function (t) {
                                return t.preventDefault(),
                                    "" === e.newSaveTitle && (e.newSaveTitle = "Untitled Graph"),
                                    e.dispatch({
                                        type: "save-graph",
                                        payload: {
                                            title: e.newSaveTitle,
                                            saveAs: e.controller.state.saveDialog.copyOnSave
                                        }
                                    })
                            }
                        }(this))
                    },
                    getSaveText: function () {
                        return "graphing" === this.controller.product ? this.t("Save This Graph") : "geometry" === this.controller.product ? this.t("Save This Construction") : void 0
                    },
                    getDuplicateText: function () {
                        return "graphing" === this.controller.product ? this.t("Duplicate This Graph") : "geometry" === this.controller.product ? this.t("Duplicate This Construction") : void 0
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/create-account-dialog", ["require", "dcgview", "underscore", "./modal", "jquery", "main/parse_json_errors"], function (e) {
            var t, n, r, i, o, s, a, c, l, u;
            return r = e("dcgview"),
                c = e("underscore"),
                u = r.Components,
                o = u.If,
                i = u.For,
                s = u.Input,
                a = e("./modal"),
                t = e("jquery"),
                l = e("main/parse_json_errors"),
                n = r.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.name = "",
                            this.email = "",
                            this.password = "",
                            this.isSubmittingForm = !1,
                            this.formErrors = [],
                            this.createElement(a, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: r.const("create-account-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.t("Create Account")
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return window.googleAuthConnectionFailed
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("google_auth_unavailable")
                                    }, r.const("Google Login is not available on this device."))
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return !window.googleAuthConnectionFailed
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("dcg-btn dcg-btn-gray-outline dcg-action-googlelogin google-login"),
                                        role: r.const("button"),
                                        tabindex: r.const(0),
                                        onTap: function () {
                                            return e.googleLogin()
                                        }
                                    }, e.createElement("div", {
                                        class: r.const("dcg-google-icon")
                                    }), e.createElement("span", null, function () {
                                        return e.t("Sign in with Google")
                                    }))
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("bg-line")
                            }, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Use your Email Address")
                                }
                            }(this))), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formErrors.length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(i, {
                                        each: function () {
                                            return c.map(e.formErrors, function (e) {
                                                return JSON.stringify(e)
                                            })
                                        }
                                    }, e.createElement("span", null, function (t) {
                                        var n;
                                        return n = JSON.parse(t).message,
                                            e.createElement("div", {
                                                class: r.const("errors")
                                            }, e.createElement("span", null, function () {
                                                return e.t(n)
                                            }))
                                    }))
                                }
                            }(this)), this.createElement("form", {
                                class: r.const("dcg-action-submit"),
                                didMount: this.didMountForm.bind(this)
                            }, this.createElement("div", {
                                class: r.const("form_content_interior")
                            }, this.createElement("label", null, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Name:")
                                }
                            }(this)), this.createElement(s, {
                                type: r.const("text"),
                                name: r.const("name"),
                                class: r.const("input"),
                                required: r.const("required"),
                                "aria-describedby": r.const("name-description"),
                                didMount: function (e) {
                                    return function (t) {
                                        if ("keyboard" === e.controller.getModalDevice())
                                            return t.focus()
                                    }
                                }(this),
                                value: function (e) {
                                    return function () {
                                        return e.name
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.name = t,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("div", {
                                id: r.const("name-description"),
                                class: r.const("dcg-description")
                            }, function (e) {
                                return function () {
                                    return e.t("This is the name we'll use if we feature one of your graphs.")
                                }
                            }(this)), this.createElement("label", null, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Email:")
                                }
                            }(this)), this.createElement(s, {
                                type: r.const("email"),
                                name: r.const("email"),
                                class: r.const("input"),
                                required: r.const("required"),
                                "aria-describedby": r.const("email-description"),
                                value: function (e) {
                                    return function () {
                                        return e.email
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.email = t,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("div", {
                                id: r.const("email-description"),
                                class: r.const("dcg-description")
                            }, function (e) {
                                return function () {
                                    return e.t("We'll never share or sell your email address.")
                                }
                            }(this)), this.createElement("label", null, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Password:")
                                }
                            }(this)), this.createElement(s, {
                                type: r.const("password"),
                                class: r.const("input"),
                                name: r.const("password"),
                                required: r.const("required"),
                                value: function (e) {
                                    return function () {
                                        return e.password
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.password = t,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("span", {
                                class: r.const("sign-in-options")
                            }, this.createElement("span", null, this.createElement("a", {
                                role: r.const("link"),
                                tabindex: r.const(0),
                                class: r.const("dcg-action-login"),
                                onTap: function (e) {
                                    return function (t) {
                                        return e.dispatch({
                                            type: "launch-login",
                                            device: t.device
                                        })
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Sign in")
                                }
                            }(this)), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return e.isSubmittingForm
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: r.const("progress_indicator create-account-progress")
                                    }, e.createElement("div", {
                                        class: r.const("dcg-spinner")
                                    }))
                                }
                            }(this)), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.isSubmittingForm
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("button", {
                                        type: r.const("submit"),
                                        class: r.const("dcg-btn-green")
                                    }, function () {
                                        return e.t("Create Account")
                                    })
                                }
                            }(this))))), this.createElement("div", {
                                class: r.const("notice"),
                                style: r.const("margin-top: 30px")
                            }, this.createElement("span", {
                                didMount: function (e) {
                                    return function (t) {
                                        var n, r, i;
                                        return i = e.t("Terms of Service"),
                                            r = e.t("Privacy Policy"),
                                            n = e.t('By clicking "__btn__," you acknowledge that you\'ve read and accept our __terms_of_use_link__ and __privacy_policy_link__.', {
                                                terms_of_use_link: "TERMSLINK",
                                                privacy_policy_link: "PRIVACYLINK",
                                                btn: e.t("Create Account")
                                            }),
                                            n = n.replace("TERMSLINK", "<a href='/terms', target='_blank'>" + i + "</a>"),
                                            n = n.replace("PRIVACYLINK", "<a href='/privacy', target='_blank'>" + r + "</a>"),
                                            t.innerHTML = n
                                    }
                                }(this)
                            }))))
                    },
                    didUnmount: function () {
                        return this.unmounted = !0
                    },
                    didMountForm: function (e) {
                        return t(e).on("submit", function (t) {
                            return function (n) {
                                return n.preventDefault(),
                                    t.submitForm(e)
                            }
                        }(this))
                    },
                    googleLogin: function () {
                        return this.dispatch({
                            type: "close-modal"
                        }),
                            this.userController.googleLogin({
                                from: "create"
                            })
                    },
                    submitForm: function (e) {
                        var n;
                        return n = t(e).serialize(),
                            this.formErrors = [],
                            this.isSubmittingForm = !0,
                            this.update(),
                            this.userController.createAccount(n).done(function (e) {
                                return function () {
                                    if (!e.unmounted)
                                        return e.dispatch({
                                            type: "close-modal"
                                        })
                                }
                            }(this)).fail(function (e) {
                                return function (t) {
                                    return e.formErrors = l(t)
                                }
                            }(this)).always(function (e) {
                                return function () {
                                    if (e.isSubmittingForm = !1,
                                        !e.unmounted)
                                        return e.update()
                                }
                            }(this))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/login-dialog", ["require", "dcgview", "./modal", "main/parse_json_errors", "jquery", "underscore"], function (e) {
            var t, n, r, i, o, s, a, c, l, u;
            return n = e("dcgview"),
                u = n.Components,
                i = u.If,
                r = u.For,
                o = u.Input,
                a = e("./modal"),
                l = e("main/parse_json_errors"),
                t = e("jquery"),
                c = e("underscore"),
                s = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.email = "",
                            this.password = "",
                            this.isSubmittingForm = !1,
                            this.formErrors = [],
                            this.createElement(a, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: n.const("login-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.t("Sign In")
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return window.googleAuthConnectionFailed
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("google_auth_unavailable")
                                    }, function () {
                                        return e.t("Google Login is not available on this device.")
                                    })
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return !window.googleAuthConnectionFailed
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("dcg-btn dcg-btn-gray-outline dcg-action-googlelogin google-login"),
                                        role: n.const("button"),
                                        tabindex: n.const(0),
                                        onTap: function () {
                                            return e.googleLogin()
                                        }
                                    }, e.createElement("div", {
                                        class: n.const("dcg-google-icon")
                                    }), e.createElement("span", null, function () {
                                        return e.t("Sign in with Google")
                                    }))
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("bg-line")
                            }, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Sign In with Desmos")
                                }
                            }(this))), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formErrors.length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(r, {
                                        each: function () {
                                            return c.map(e.formErrors, function (e) {
                                                return JSON.stringify(e)
                                            })
                                        }
                                    }, e.createElement("span", null, function (t) {
                                        var r;
                                        return r = JSON.parse(t).message,
                                            e.createElement("div", {
                                                class: n.const("errors")
                                            }, e.createElement("span", null, function () {
                                                return e.t(r)
                                            }))
                                    }))
                                }
                            }(this)), this.createElement("form", {
                                class: n.const("desmos-login dcg-action-submit"),
                                didMount: this.didMountForm.bind(this)
                            }, this.createElement("div", {
                                class: n.const("form_content_interior")
                            }, this.createElement("label", {
                                for: n.const("email")
                            }, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Email:")
                                }
                            }(this)), this.createElement(o, {
                                type: n.const("email"),
                                name: n.const("email"),
                                class: n.const("input"),
                                id: n.const("top_email"),
                                "aria-label": function (e) {
                                    return function () {
                                        return e.t("Email")
                                    }
                                }(this),
                                "aria-required": n.const("true"),
                                required: n.const("required"),
                                didMount: function (e) {
                                    return function (t) {
                                        if ("keyboard" === e.controller.getModalDevice())
                                            return t.focus()
                                    }
                                }(this),
                                value: function (e) {
                                    return function () {
                                        return e.email
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.email = t,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("label", {
                                for: n.const("password")
                            }, this.createElement("span", null, function (e) {
                                return function () {
                                    return e.t("Password:")
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("input-container")
                            }, this.createElement(o, {
                                type: n.const("password"),
                                name: n.const("password"),
                                class: n.const("input"),
                                id: n.const("top_password"),
                                "aria-label": function (e) {
                                    return function () {
                                        return e.t("Password")
                                    }
                                }(this),
                                "aria-required": n.const("true"),
                                required: n.const("required"),
                                value: function (e) {
                                    return function () {
                                        return e.password
                                    }
                                }(this),
                                onInput: function (e) {
                                    return function (t) {
                                        return e.password = t,
                                            e.update()
                                    }
                                }(this)
                            }), this.createElement("span", {
                                class: n.const("password-recovery-link")
                            }, this.createElement("a", {
                                role: n.const("link"),
                                tabindex: n.const(0),
                                class: n.const("dcg-action-recoverpassword"),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "recover-password"
                                        })
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Forgot your password?")
                                }
                            }(this))))), this.createElement("span", {
                                class: n.const("sign-in-options")
                            }, this.createElement("span", null, this.createElement("a", {
                                role: n.const("link"),
                                tabindex: n.const(0),
                                class: n.const("dcg-action-createaccount"),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "create-account"
                                        })
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Create an Account")
                                }
                            }(this)), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.isSubmittingForm
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("progress_indicator signin_progress_indicator")
                                    }, e.createElement("div", {
                                        class: n.const("dcg-spinner")
                                    }))
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.isSubmittingForm
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("button", {
                                        type: n.const("submit"),
                                        class: n.const("dcg-btn-green")
                                    }, function () {
                                        return e.t("Sign In")
                                    })
                                }
                            }(this)))))))
                    },
                    didUnmount: function () {
                        return this.unmounted = !0
                    },
                    didMountForm: function (e) {
                        return t(e).on("submit", function (t) {
                            return function (n) {
                                return n.preventDefault(),
                                    t.submitForm(e)
                            }
                        }(this))
                    },
                    googleLogin: function () {
                        return this.dispatch({
                            type: "close-modal"
                        }),
                            this.userController.googleLogin({
                                from: "login"
                            })
                    },
                    submitForm: function (e) {
                        var n;
                        return n = t(e).serialize(),
                            this.isSubmittingForm = !0,
                            this.formErrors = [],
                            this.userController.checkPendingDeletion(n).done(function (e) {
                                return function (t) {
                                    return e._pendingDeletion = t.pendingDeletion
                                }
                            }(this)).fail(function (e) {
                                return function () {
                                    return e._pendingDeletion = !1
                                }
                            }(this)).always(function (e) {
                                return function () {
                                    if (!e.unmounted)
                                        return e.update(),
                                            e.userController.desmosLogin(n).done(function () {
                                                if (!e.unmounted)
                                                    return e._pendingDeletion ? e.dispatch({
                                                        type: "show-reenabled"
                                                    }) : e.dispatch({
                                                        type: "close-modal"
                                                    })
                                            }).fail(function (t) {
                                                return e.formErrors = l(t)
                                            }).always(function () {
                                                if (!e.unmounted)
                                                    return e.isSubmittingForm = !1,
                                                        e.dispatch({
                                                            type: "trigger-render"
                                                        })
                                            })
                                }
                            }(this))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/recover-password-dialog", ["require", "dcgview", "./modal", "main/parse_json_errors", "jquery", "underscore"], function (e) {
            var t, n, r, i, o, s, a, c, l, u;
            return n = e("dcgview"),
                u = n.Components,
                i = u.If,
                r = u.For,
                o = u.Input,
                s = e("./modal"),
                l = e("main/parse_json_errors"),
                t = e("jquery"),
                c = e("underscore"),
                a = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.userController = this.controller.userController,
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.email = this.userController.getEmail(),
                            this.formErrors = [],
                            this.isSubmittingForm = !1,
                            this.didSendRecoveryEmail = !1,
                            this.createElement(s, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: n.const("recover-password-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.t("Recover Password")
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formErrors.length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(r, {
                                        each: function () {
                                            return c.map(e.formErrors, function (e) {
                                                return JSON.stringify(e)
                                            })
                                        }
                                    }, e.createElement("span", null, function (t) {
                                        var r;
                                        return r = JSON.parse(t).message,
                                            e.createElement("div", {
                                                class: n.const("errors")
                                            }, e.createElement("span", null, function () {
                                                return e.t(r)
                                            }))
                                    }))
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.didSendRecoveryEmail
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("p", {
                                        role: n.const("alert"),
                                        "aria-live": n.const("assertive"),
                                        "aria-atomic": n.const("true")
                                    }, function () {
                                        return e.t("Message sent. Please check your email for a password recovery link.") + " "
                                    }, e.createElement("a", {
                                        href: n.const("#"),
                                        class: n.const("dcg-action-tryagain"),
                                        onTap: function () {
                                            return e.didSendRecoveryEmail = !1,
                                                e.dispatch({
                                                    type: "recover-password"
                                                })
                                        }
                                    }, function () {
                                        return e.t("Didn't work? Try again!")
                                    }))
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.didSendRecoveryEmail
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("form", {
                                        class: n.const("dcg-action-submit"),
                                        didMount: e.didMountForm.bind(e)
                                    }, e.createElement("div", {
                                        class: n.const("form_content_interior")
                                    }, e.createElement("div", {
                                        class: n.const("recovery-message")
                                    }, function () {
                                        return e.t("Please enter your email address. We will send a password recovery link to you.")
                                    }), e.createElement("label", null, e.createElement("span", null, function () {
                                        return e.t("Email:")
                                    }), e.createElement(o, {
                                        type: n.const("email"),
                                        name: n.const("email"),
                                        class: n.const("input"),
                                        id: n.const("recover_email"),
                                        required: n.const("required"),
                                        value: function () {
                                            return e.email
                                        },
                                        onInput: function (t) {
                                            return e.email = t,
                                                e.update()
                                        }
                                    })), e.createElement("span", {
                                        class: n.const("sign-in-options")
                                    }, e.createElement(i, {
                                        predicate: function () {
                                            return e.isSubmittingForm
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: n.const("progress_indicator create-account-progress")
                                        }, e.createElement("div", {
                                            class: n.const("dcg-spinner")
                                        }))
                                    }), e.createElement(i, {
                                        predicate: function () {
                                            return !e.isSubmittingForm
                                        }
                                    }, function () {
                                        return e.createElement("button", {
                                            type: n.const("submit"),
                                            class: n.const("dcg-btn dcg-btn-green")
                                        }, function () {
                                            return e.t("Recover Password")
                                        })
                                    }))))
                                }
                            }(this))))
                    },
                    didUnmount: function () {
                        return this.unmounted = !0
                    },
                    didMountForm: function (e) {
                        return t(e).on("submit", function (t) {
                            return function (n) {
                                return n.preventDefault(),
                                    t.submitForm(e)
                            }
                        }(this))
                    },
                    submitForm: function (e) {
                        var n;
                        return n = t(e).serialize(),
                            this.formErrors = [],
                            this.isSubmittingForm = !0,
                            this.userController.recoverPassword(n).done(function (e) {
                                return function () {
                                    return e.didSendRecoveryEmail = !0
                                }
                            }(this)).fail(function (e) {
                                return function (t) {
                                    return e.formErrors = l(t)
                                }
                            }(this)).always(function (e) {
                                return function () {
                                    if (e.isSubmittingForm = !1,
                                        !e.unmounted)
                                        return e.update()
                                }
                            }(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!hotkeys_dialog", function () { }),
    function () {
        define("calculator-shell/hotkeys-dialog", ["require", "loadcss!hotkeys_dialog", "dcgview", "./modal", "browser", "jquery"], function (e) {
            var t, n, r, i, o, s;
            return e("loadcss!hotkeys_dialog"),
                r = e("dcgview"),
                o = r.Components.If,
                s = e("./modal"),
                n = e("browser"),
                t = e("jquery"),
                i = r.createClass({
                    template: function () {
                        var e;
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            null == (e = this.controller.state).hotkeysDialog && (e.hotkeysDialog = {
                                shortcutOS: n.IS_APPLE ? "mac" : "windows"
                            }),
                            this.createElement(s, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: r.const("dcg-hotkeys-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.t("Keyboard Shortcuts")
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("dcg-toggle-container")
                            }, this.createElement("span", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-action-toggleos": !0,
                                            "dcg-windows-option": !0,
                                            "dcg-selected": "windows" === e.getShortcutOS()
                                        }
                                    }
                                }(this),
                                role: r.const("button"),
                                tabindex: r.const(0),
                                "aria-pressed": function (e) {
                                    return function () {
                                        return "windows" === e.getShortcutOS()
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.setShortcutOS("windows")
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Windows Shortcuts")
                                }
                            }(this)), this.createElement("span", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-action-toggleos": !0,
                                            "dcg-mac-option": !0,
                                            "dcg-selected": "mac" === e.getShortcutOS()
                                        }
                                    }
                                }(this),
                                role: r.const("button"),
                                tabindex: r.const(0),
                                "aria-pressed": function (e) {
                                    return function () {
                                        return "mac" === e.getShortcutOS()
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.setShortcutOS("mac")
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Mac Shortcuts")
                                }
                            }(this))), this.createElement("div", {
                                class: r.const("dcg-hotkey-container")
                            }, this.createElement("div", {
                                class: r.const("dcg-hotkey-section")
                            }, this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Common Actions")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Close a Dialog (like this one!)")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Esc"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Esc")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open a Graph")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Save a Graph")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S")))), this.createElement("tr", {
                                class: r.const("hotkey-table-row")
                            }, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Print a Graph")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P")))), this.createElement("tr", {
                                class: r.const("hotkey-table-row")
                            }, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Focus the Expression List")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("E"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("E")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Add an Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("X"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("X")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Add a Note")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Collapse / Expand Selected Folder")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Add a Folder")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("F"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("F")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Add an Image")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Add a Table")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Undo")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Z"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Z")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Redo")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Z"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Z")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open or Close the Graph Settings Menu")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("G"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("G")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open or Close the Account Menu")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open or Close the Help Menu")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open or Close the Language Menu")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Open or Close the Share Menu")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S"))))), this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Symbols")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", null, r.const("Shortcut"))), this.createElement("tr", null, this.createElement("td", null, r.const("Superscript")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("SHIFT")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("6"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("SHIFT")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("6")))), this.createElement("tr", null, this.createElement("td", null, r.const("Subscript")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("SHIFT")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("-"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("SHIFT")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("-")))), this.createElement("tr", null, this.createElement("td", null, r.const("Prime")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("'"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("'")))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"sqrt"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"sqrt"'))), this.createElement("tr", null, this.createElement("td", null, r.const(" (or higher!)")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"nthroot"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"nthroot"'))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"sum"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"sum"'))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"int"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"int"'))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"prod"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"prod"'))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"pi"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"pi"'))), this.createElement("tr", null, this.createElement("td", null, r.const("")), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, r.const('"theta"')), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, r.const('"theta"')))), this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Audio Tracing")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Enable or Disable Audio Trace Mode")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Summarize Graph")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("J"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("J")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Point of Interest")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Down")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Point of Interest")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Up")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("K"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("K")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("First Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Home")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("U"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("U")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Last Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("End")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("N"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("N")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Point of Interest Count")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak X Coordinate")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("X"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("X")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Y Coordinate")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Y"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Y")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Branch")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("B"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("B")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Type of Selected Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("T")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Origin")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("O")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Previous Curve")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Next Curve")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Hear Graph")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Hear Only Branch 1 Through 10")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("1")), r.const("-"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("0"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("1")), r.const("-"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("0")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Adjust Playback Speed (1 = slowest, 5 = fastest)")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("1")), r.const("-"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("5"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("1")), r.const("-"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("5")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Announce Active Slider Animations")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Toggle Slider Trace Mode")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("S")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Value of Selected Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("J"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("J")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Value of Selected Slider by Larger Increment When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Down"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Value of Selected Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("L")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Value of Selected Slider by Larger Increment When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Up"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Lowest Value of Selected Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Home")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("U"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("U")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Highest Value of Selected Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("End")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("N"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("N")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Play/Pause Selected Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Select Next Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("K"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("K")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Select Previous Slider When in Slider Trace")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), r.const(","), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")), r.const(", or"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("I")))))), this.createElement("div", {
                                class: r.const("dcg-hotkey-section")
                            }, this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Expression Entry and Navigation")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Previous Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Next Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Remove Selected Empty Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Backspace"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Delete")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Character")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Character")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Numerator Within Fraction")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Move to Denominator Within Fraction")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Exit Current Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Beginning of Current Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Home"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("End of Current Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("End"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Beginning of Current Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Home"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("End of Current Expression")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("End"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Selection Left")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Selection Right")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Delete Selection")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Backspace"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Delete")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Select All")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("A")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Parent Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Focused Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Left-Adjacent Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Right-Adjacent Block")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Selection")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Answer")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("="))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Option")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))))), this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Graphs with Movable Points")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function");
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Focus First Movable Point On Screen")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Alt")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Command")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("P")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Go to Next Movable Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Go to Previous Movable Point")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase X")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease X")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Y")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Y")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase X by Larger Amount")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease X by Larger Amount")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Y by Larger Amount")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Y by Larger Amount")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))))), this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header")
                            }, function (e) {
                                return function () {
                                    return e.t("Sliders")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Value")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Decrease Value by Larger Increment")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Down"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Value")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Increase Value by Larger Increment")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Page Up"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Lowest Value")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Home"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Highest Value")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("End"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Fn")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))))), this.createElement("h2", {
                                class: r.const("dcg-hotkey-section-header tables-section")
                            }, function (e) {
                                return function () {
                                    return e.t("Tables")
                                }
                            }(this)), this.createElement("table", null, this.createElement("tr", null, this.createElement("th", null, function (e) {
                                return function () {
                                    return e.t("Function")
                                }
                            }(this)), this.createElement("th", {
                                class: r.const("dcg-os-windows")
                            }, r.const("Windows Shortcut")), this.createElement("th", {
                                class: r.const("dcg-os-mac")
                            }, r.const("Mac Shortcut"))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Cell")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Shift")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Cell")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Tab")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Row")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Row")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Previous Column")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Next Column")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("First Row in Column")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Up Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Last Row in Column")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Down Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("First Column in Row")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Left Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Last Column in Row")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Right Arrow")))), this.createElement("tr", null, this.createElement("td", null, function (e) {
                                return function () {
                                    return e.t("Speak Column Header")
                                }
                            }(this)), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-windows")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H"))), this.createElement("td", {
                                class: r.const("dcg-keyboard-shortcut dcg-os-mac")
                            }, this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("Control")), r.const("+"), this.createElement("span", {
                                class: r.const("dcg-key-command")
                            }, r.const("H")))))))))
                    },
                    getShortcutOS: function () {
                        return this.controller.state.hotkeysDialog.shortcutOS
                    },
                    setShortcutOS: function (e) {
                        return this.controller.state.hotkeysDialog.shortcutOS = e,
                            this.update()
                    },
                    didMount: function () {
                        return this.updateVisibleShortcuts()
                    },
                    didUpdate: function () {
                        return this.updateVisibleShortcuts()
                    },
                    updateVisibleShortcuts: function () {
                        var e, n, r;
                        return r = this.getShortcutOS(),
                            e = t(".dcg-os-mac"),
                            n = t(".dcg-os-windows"),
                            "mac" === r ? (e.show(),
                                n.hide()) : "windows" === r ? (e.hide(),
                                    n.show()) : void 0
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/unsupported-browser", ["require", "dcgview", "./modal"], function (e) {
            var t, n, r, i;
            return t = e("dcgview"),
                n = t.Components.If,
                r = e("./modal"),
                i = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.createElement(r, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                id: t.const("unsupported-browser")
                            }, this.createElement("div", {
                                id: t.const("unsupported-browser-title"),
                                style: t.const("color:black; font-size:150%;")
                            }, function (e) {
                                return function () {
                                    return e.t("Unsupported Browser")
                                }
                            }(this)), this.createElement("div", {
                                style: t.const("padding:20px 0px; color:#666")
                            }, function (e) {
                                return function () {
                                    return e.t("Desmos works best on your version of Android if you use the Chrome Browser.")
                                }
                            }(this), this.createElement("br", null), this.createElement("br", null), this.createElement("a", {
                                href: t.const("https://play.google.com/store/apps/details?id=com.android.chrome")
                            }, function (e) {
                                return function () {
                                    return e.t("Click here to download Google Chrome.")
                                }
                            }(this), this.createElement("br", null), this.createElement("br", null)), this.createElement("div", {
                                style: t.const("text-align: center; margin-top: 25px; margin-bottom:-16px")
                            }, this.createElement("a", {
                                role: t.const("link"),
                                tabindex: t.const(0),
                                class: t.const("dcg-btn dcg-action-hide dcg-do-not-blur"),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "close-modal"
                                        })
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Hide this warning.")
                                }
                            }(this))))))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/shared-pillow-styles", function () { }),
    define("loadcss!accounts/account-settings-modal", function () { }),
    define("loadcss!accounts/profile-info", function () { }),
    define("loadcss!accounts/delete-account", function () { }),
    function () {
        define("accounts/delete-account", ["require", "loadcss!./delete-account", "dcgview"], function (e) {
            var t, n, r;
            return e("loadcss!./delete-account"),
                t = e("dcgview"),
                r = t.Components.If,
                n = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.createElement("div", {
                                class: t.const("delete-account-box")
                            }, this.createElement("div", {
                                class: t.const("delete-title"),
                                role: t.const("heading"),
                                "aria-level": t.const("1")
                            }, function (e) {
                                return function () {
                                    return e.t("Are you sure you want to delete your account?")
                                }
                            }(this)), this.createElement("div", {
                                class: t.const("delete-description")
                            }, function (e) {
                                return function () {
                                    return e.t("When you delete your account,")
                                }
                            }(this), t.const(" "), this.createElement("span", {
                                class: t.const("delete-important")
                            }, function (e) {
                                return function () {
                                    return e.t("we will retain your data for 30 days.")
                                }
                            }(this)), t.const(""), function (e) {
                                return function () {
                                    return e.t("You can reactivate your account at any time during those 30 days by logging back in.")
                                }
                            }(this), t.const(""), function (e) {
                                return function () {
                                    return e.t("If there's something about Desmos we can improve, please ")
                                }
                            }(this), this.createElement("a", {
                                href: t.const("mailto:support@desmos.com"),
                                class: t.const("blue-link")
                            }, function (e) {
                                return function () {
                                    return e.t("let us know")
                                }
                            }(this)), t.const("."), this.createElement("br", null), function (e) {
                                return function () {
                                    return e.t("We will send you a link to your email address (__email__) so you can delete your account.", {
                                        email: e.userController.getEmail()
                                    })
                                }
                            }(this)), this.createElement("form", {
                                class: t.const("delete-account-form"),
                                didMount: this.didMountDeleteForm.bind(this)
                            }, this.createElement("div", {
                                class: t.const("account-error-container")
                            }, this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        return e.errorMessage
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: t.const("form-error-message"),
                                        "aria-live": t.const("assertive"),
                                        "aria-atomic": t.const("true")
                                    }, function () {
                                        return e.errorMessage
                                    })
                                }
                            }(this))), this.createElement("div", {
                                class: t.const("actions")
                            }, this.createElement("div", {
                                role: t.const("link"),
                                tabindex: t.const(0),
                                class: t.const("cancel-link"),
                                onTap: function (e) {
                                    return function () {
                                        return e.props.hideForm()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Cancel")
                                }
                            }(this)), this.createElement("button", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "btn-red": !0,
                                            "action-submit": !0,
                                            "delete-account-button": !0,
                                            disabled: e.disabled
                                        }
                                    }
                                }(this),
                                "aria-disabled": function (e) {
                                    return function () {
                                        return e.disabled
                                    }
                                }(this),
                                type: t.const("submit")
                            }, function (e) {
                                return function () {
                                    return e.t("Send Delete Account Email")
                                }
                            }(this)))))
                    },
                    onAccountDeleted: function () {
                        return this.props.submitForm()
                    },
                    onAccountDeletionFailed: function () {
                        return this.errorMessage = this.controller.SOMETHING_WENT_WRONG,
                            this.update()
                    },
                    doDeleteAccount: function () {
                        if (!this.disabled)
                            return this.userController.initiateAccountDeletion().done(this.onAccountDeleted.bind(this)).fail(this.onAccountDeletionFailed.bind(this))
                    },
                    didMountDeleteForm: function (e) {
                        return $(e).on("submit", function (e) {
                            return function (t) {
                                return t.preventDefault(),
                                    e.doDeleteAccount()
                            }
                        }(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/email-settings", function () { }),
    function () {
        define("accounts/email-settings", ["require", "loadcss!./email-settings", "dcgview"], function (e) {
            var t, n, r, i, o, s, a, c, l, u;
            return e("loadcss!./email-settings"),
                t = e("dcgview"),
                u = t.Components,
                a = u.If,
                c = u.Input,
                l = u.Switch,
                i = 0,
                s = 1,
                o = 2,
                n = 3,
                r = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.userController = this.controller.userController,
                            this.dispatch = this.controller.dispatch,
                            this.verifyStatus = this.userController.getVerificationStatus(),
                            this.formStatus = i,
                            this.emailDisabled = null,
                            this.createElement("div", {
                                class: t.const("email-field")
                            }, this.createElement(a, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formStatus === i
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: t.const("email-list")
                                    }, e.createElement("div", {
                                        class: t.const("input-label")
                                    }, function () {
                                        return e.t("Email:")
                                    }), e.createElement("div", {
                                        class: function () {
                                            return {
                                                email: !0,
                                                "not-verified": "VERIFYING" === e.verifyStatus || "UNVERIFIED" === e.verifyStatus
                                            }
                                        }
                                    }, e.createElement(a, {
                                        predicate: function () {
                                            return "VERIFIED" === e.verifyStatus
                                        }
                                    }, function () {
                                        return e.createElement("i", {
                                            class: function () {
                                                return {
                                                    "dcg-icon-check": !0,
                                                    "dcg-success-marker": !0
                                                }
                                            },
                                            "aria-hidden": t.const("true")
                                        })
                                    }), e.createElement(a, {
                                        predicate: function () {
                                            return "VERIFYING" === e.verifyStatus || "UNVERIFIED" === e.verifyStatus
                                        }
                                    }, function () {
                                        return e.createElement("i", {
                                            class: function () {
                                                return "dcg-error-marker"
                                            },
                                            "aria-hidden": t.const("true")
                                        })
                                    }), e.createElement("div", {
                                        class: t.const("email-message-container")
                                    }, function () {
                                        return e.userController.getEmail()
                                    }, e.createElement("div", {
                                        class: t.const("message-container")
                                    }, e.createElement(l, {
                                        key: function () {
                                            return e.verifyStatus
                                        }
                                    }, function (n) {
                                        return "UNVERIFIED" === n ? e.createElement("div", {
                                            class: t.const("not-verified-message")
                                        }, function () {
                                            return e.t("Email not verified.")
                                        }, e.createElement("div", {
                                            role: t.const("link"),
                                            tabindex: t.const(0),
                                            class: t.const("blue-link resend-email"),
                                            onTap: e.doVerifyEmail.bind(e)
                                        }, function () {
                                            return e.t("Send Verification Email")
                                        })) : "VERIFYING" === n ? e.createElement("div", {
                                            class: t.const("not-verified-message")
                                        }, function () {
                                            return e.t("Pending confirmation.")
                                        }, e.createElement("div", {
                                            role: t.const("link"),
                                            tabindex: t.const(0),
                                            class: t.const("blue-link resend-email"),
                                            onTap: e.doVerifyEmail.bind(e)
                                        }, function () {
                                            return e.t("Resend Email")
                                        })) : void 0
                                    }), e.createElement("div", {
                                        role: t.const("link"),
                                        tabindex: t.const(0),
                                        class: t.const("blue-link change-email"),
                                        onTap: function () {
                                            return e.setFormStatus(s)
                                        }
                                    }, function () {
                                        return e.t("Change Email Address")
                                    })))))
                                }
                            }(this)), this.createElement(a, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formStatus === s
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: t.const("change-email-container")
                                    }, e.createElement("div", {
                                        class: t.const("change-email-description")
                                    }, function () {
                                        return e.t("We will send a Change Email link to __emailAddress__.", {
                                            emailAddress: e.userController.getEmail()
                                        })
                                    }), e.createElement("div", {
                                        class: t.const("account-error-container")
                                    }, e.createElement(a, {
                                        predicate: function () {
                                            return e.errorMessage
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: t.const("form-error-message"),
                                            "aria-live": t.const("assertive"),
                                            "aria-atomic": t.const("true")
                                        }, function () {
                                            return e.errorMessage
                                        })
                                    })), e.createElement("div", {
                                        class: t.const("actions-container")
                                    }, e.createElement("span", {
                                        role: t.const("link"),
                                        tabindex: t.const(0),
                                        class: t.const("cancel-link"),
                                        onTap: function () {
                                            return e.setFormStatus(i)
                                        }
                                    }, function () {
                                        return e.t("Cancel")
                                    }), e.createElement("button", {
                                        class: function () {
                                            return {
                                                "btn-blue": !0,
                                                "action-submit": !0,
                                                "change-email-button": !0,
                                                disabled: e.emailDisabled
                                            }
                                        },
                                        "aria-disabled": function () {
                                            return e.disabled
                                        },
                                        type: t.const("submit"),
                                        onTap: function () {
                                            return e.emailDisabled || e.sendChangeEmail()
                                        }
                                    }, function () {
                                        return e.t("Send Email")
                                    })))
                                }
                            }(this)), this.createElement(a, {
                                predicate: function (e) {
                                    return function () {
                                        return e.formStatus === n
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        "aria-live": t.const("assertive"),
                                        "aria-atomic": t.const("true"),
                                        class: t.const("email-sent-notice")
                                    }, e.createElement("div", {
                                        class: t.const("email-sent-container")
                                    }, e.createElement("i", {
                                        class: function () {
                                            return {
                                                "dcg-icon-check": !0,
                                                "dcg-success-marker": !0
                                            }
                                        },
                                        "aria-hidden": t.const("true")
                                    }), function () {
                                        return e.t("Email sent")
                                    }), e.createElement("div", null, function () {
                                        return e.t("Please check __emailAddress__ for the Change Email link.", {
                                            emailAddress: e.userController.getEmail()
                                        })
                                    }))
                                }
                            }(this)))
                    },
                    setToast: function (e) {
                        if (!this.toastMessage && (this.toastMessage = e,
                            this.update(),
                            setTimeout(function (e) {
                                return function () {
                                    return e.toastMessage = null,
                                        e.update()
                                }
                            }(this), 5e3),
                            this.formStatus === o))
                            return setTimeout(function (e) {
                                return function () {
                                    return e.setFormStatus(i),
                                        e.update()
                                }
                            }(this), 5200)
                    },
                    setFormStatus: function (e) {
                        return this.formStatus = e,
                            this.toastMessage = null,
                            this.errorMessage = null,
                            this.update()
                    },
                    onEmailVerificationSent: function () {
                        return this.verifyStatus = "VERIFYING",
                            this.setToast(this.t("Verification email sent to __email__.\nPlease check your email.", {
                                email: this.userController.getEmail()
                            })),
                            this.update()
                    },
                    onEmailVerificationSendingFailed: function () {
                        return this.errorMessage = this.controller.SOMETHING_WENT_WRONG,
                            this.update()
                    },
                    doVerifyEmail: function () {
                        if (!this.emailDisabled)
                            return this.userController.verifyEmail().done(this.onEmailVerificationSent.bind(this)).fail(this.onEmailVerificationSendingFailed.bind(this))
                    },
                    onEmailSent: function () {
                        return this.formStatus = n,
                            this.emailDisabled = null,
                            this.update(),
                            setTimeout(function (e) {
                                return function () {
                                    return e.formStatus = null,
                                        e.update()
                                }
                            }(this), 5e3),
                            setTimeout(function (e) {
                                return function () {
                                    return e.formStatus = i,
                                        e.update()
                                }
                            }(this), 5200)
                    },
                    onEmailSendingFailed: function () {
                        return this.errorMessage = this.controller.SOMETHING_WENT_WRONG,
                            this.emailDisabled = null,
                            this.update()
                    },
                    sendChangeEmail: function () {
                        return this.emailDisabled = !0,
                            this.update(),
                            this.userController.initiateEmailChange().done(this.onEmailSent.bind(this)).fail(this.onEmailSendingFailed.bind(this))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("accounts/profile-info", ["require", "loadcss!./profile-info", "dcgview", "./delete-account", "./email-settings"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d;
            return e("loadcss!./profile-info"),
                t = e("dcgview"),
                d = t.Components,
                a = d.If,
                c = d.Input,
                u = d.Switch,
                n = e("./delete-account"),
                r = e("./email-settings"),
                i = 0,
                s = 1,
                o = 2,
                l = t.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.userController = this.controller.userController,
                            this.deleteAccount = i,
                            this.createElement("div", {
                                class: t.const("profile-info account-settings-section")
                            }, this.createElement(u, {
                                key: function (e) {
                                    return function () {
                                        return e.deleteAccount
                                    }
                                }(this)
                            }, function (e) {
                                return function (l) {
                                    switch (l) {
                                        case i:
                                            return e.createElement("div", null, e.createElement("div", {
                                                class: t.const("name-and-email")
                                            }, e.createElement("div", {
                                                class: t.const("name-field")
                                            }, e.createElement("div", {
                                                class: t.const("input-label")
                                            }, function () {
                                                return e.t("Name:")
                                            }), e.createElement(c, {
                                                class: t.const("name-input blue-outline"),
                                                didMount: e.didMountName.bind(e),
                                                onInput: e.onNameInput.bind(e),
                                                "aria-label": function () {
                                                    return e.t("Name:")
                                                },
                                                name: t.const("name"),
                                                value: function () {
                                                    return e.name
                                                },
                                                autocomplete: t.const("off")
                                            }), e.createElement("div", {
                                                class: t.const("actions-container")
                                            }, e.createElement(a, {
                                                predicate: function () {
                                                    return e.showSavedNotice
                                                }
                                            }, function () {
                                                return e.createElement("span", {
                                                    "aria-live": t.const("assertive"),
                                                    "aria-atomic": t.const("true"),
                                                    class: t.const("saved-notice")
                                                }, e.createElement("i", {
                                                    class: function () {
                                                        return {
                                                            "dcg-icon-check": !0,
                                                            "dcg-success-marker": !0
                                                        }
                                                    },
                                                    "aria-hidden": t.const("true")
                                                }), function () {
                                                    return e.t("Saved!")
                                                })
                                            }), e.createElement("div", {
                                                role: t.const("button"),
                                                tabindex: t.const(0),
                                                class: function () {
                                                    return {
                                                        "btn-blue": !0,
                                                        "action-submit": !0,
                                                        "change-name-button": !0,
                                                        disabled: e.nameFieldDisabled()
                                                    }
                                                },
                                                "aria-disabled": function () {
                                                    return e.disabled
                                                },
                                                onTap: e.onSaveName.bind(e)
                                            }, function () {
                                                return e.t("Save")
                                            })))), e.createElement(r, {
                                                controller: e.props.controller
                                            }), e.createElement("div", {
                                                role: t.const("link"),
                                                tabindex: t.const(0),
                                                class: t.const("delete-account-link"),
                                                onTap: function () {
                                                    return e.confirmDeletion()
                                                }
                                            }, function () {
                                                return e.t("Delete your Desmos account?")
                                            }));
                                        case s:
                                            return e.createElement(n, {
                                                hideForm: function () {
                                                    return e.setDeleteAccount(i)
                                                },
                                                submitForm: function () {
                                                    return e.setDeleteAccount(o)
                                                },
                                                controller: e.props.controller
                                            });
                                        case o:
                                            return e.createElement("div", {
                                                class: t.const("email-sent-notice")
                                            }, e.createElement("div", {
                                                "aria-live": t.const("assertive"),
                                                "aria-atomic": t.const("true"),
                                                class: t.const("email-sent-container")
                                            }, e.createElement("i", {
                                                class: function () {
                                                    return {
                                                        "dcg-icon-check": !0,
                                                        "dcg-success-marker": !0
                                                    }
                                                },
                                                "aria-hidden": t.const("true")
                                            }), function () {
                                                return e.t("Email sent")
                                            }), e.createElement("div", null, function () {
                                                return e.t("Please check your email (__emailAddress__) for the link to delete your account.", {
                                                    emailAddress: e.userController.getEmail()
                                                })
                                            }))
                                    }
                                }
                            }(this)))
                    },
                    onSaveName: function () {
                        if (!this.nameFieldDisabled())
                            return this.userController.setName(this.name).done(this.onSaved.bind(this))
                    },
                    nameFieldDisabled: function () {
                        return !this.name || this.name === this.previousName
                    },
                    onNameInput: function (e) {
                        return this.name = e,
                            this.update()
                    },
                    didMountName: function (e) {
                        var t;
                        return this.name = this.userController.getFullName(),
                            this.previousName = this.name,
                            t = this.previousName,
                            this.onNameInput(t)
                    },
                    onSaved: function () {
                        return this.showSavedNotice = !0,
                            this.previousName = this.name,
                            this.update(),
                            setTimeout(function (e) {
                                return function () {
                                    return e.showSavedNotice = !1,
                                        e.update()
                                }
                            }(this), 3e3)
                    },
                    setDeleteAccount: function (e) {
                        return this.deleteAccount = e,
                            e === o && setTimeout(function (e) {
                                return function () {
                                    return e.deleteAccount = i,
                                        e.update()
                                }
                            }(this), 5e3),
                            this.update()
                    },
                    confirmDeletion: function () {
                        return this.setDeleteAccount(s),
                            this.update()
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/change-password", function () { }),
    function () {
        define("accounts/change-password", ["require", "loadcss!./change-password", "dcgview"], function (e) {
            var t, n, r, i, o, s, a, c;
            return e("loadcss!./change-password"),
                n = e("dcgview"),
                c = n.Components,
                i = c.If,
                o = c.Input,
                s = 0,
                a = 1,
                r = 2,
                t = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.userController = this.controller.userController,
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.mode = a,
                            this.createElement("div", {
                                class: n.const("change-password account-settings-section")
                            }, this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.mode === a
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("reset-by-email")
                                    }, e.createElement("div", {
                                        class: n.const("email-description")
                                    }, function () {
                                        return e.t("We will send a link to your email address (__emailAddress__) so you can change your password.", {
                                            emailAddress: e.userController.getEmail()
                                        })
                                    }), e.createElement("div", {
                                        class: n.const("account-error-container")
                                    }, e.createElement(i, {
                                        predicate: function () {
                                            return e.errorMessage
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            class: n.const("form-error-message"),
                                            "aria-live": n.const("assertive"),
                                            "aria-atomic": n.const("true")
                                        }, function () {
                                            return e.errorMessage
                                        })
                                    })), e.createElement("div", {
                                        class: n.const("actions-container")
                                    }, e.createElement("div", {
                                        role: n.const("button"),
                                        tabindex: n.const(0),
                                        class: function () {
                                            return {
                                                "btn-blue": !0,
                                                "action-submit": !0,
                                                "send-email-button": !0,
                                                disabled: e.emailDisabled
                                            }
                                        },
                                        "aria-disabled": function () {
                                            return e.emailDisabled
                                        },
                                        onTap: function () {
                                            return e.sendResetPasswordEmail()
                                        }
                                    }, function () {
                                        return e.t("Send Email")
                                    })))
                                }
                            }(this)), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.mode === r
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        "aria-live": n.const("assertive"),
                                        "aria-atomic": n.const("true"),
                                        class: n.const("email-sent-notice")
                                    }, e.createElement("div", {
                                        class: n.const("email-sent-container")
                                    }, e.createElement("i", {
                                        class: function () {
                                            return {
                                                "dcg-icon-check": !0,
                                                "dcg-success-marker": !0
                                            }
                                        },
                                        "aria-hidden": n.const("true")
                                    }), function () {
                                        return e.t("Email sent")
                                    }), e.createElement("div", null, function () {
                                        return e.t("Please check your email (__emailAddress__) for the link to change your password.", {
                                            emailAddress: e.userController.getEmail()
                                        })
                                    }))
                                }
                            }(this)))
                    },
                    onEmailSent: function () {
                        return this.mode = r,
                            this.update(),
                            setTimeout(function (e) {
                                return function () {
                                    return e.mode = null,
                                        e.update()
                                }
                            }(this), 5e3),
                            setTimeout(function (e) {
                                return function () {
                                    return e.mode = a,
                                        e.update()
                                }
                            }(this), 5200)
                    },
                    onEmailSendingFailed: function () {
                        return this.errorMessage = this.controller.SOMETHING_WENT_WRONG,
                            this.update()
                    },
                    sendResetPasswordEmail: function () {
                        return this.userController.recoverPassword({
                            email: this.userController.getEmail()
                        }).done(this.onEmailSent.bind(this)).fail(this.onEmailSendingFailed.bind(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/email-subscriptions", function () { }),
    function () {
        var e = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e)
                    return t;
            return -1
        }
            ;
        define("accounts/email-subscriptions", ["require", "loadcss!./email-subscriptions", "dcgview", "dcgview-helpers/checkbox"], function (t) {
            var n, r, i, o;
            return t("loadcss!./email-subscriptions"),
                r = t("dcgview"),
                i = r.Components.If,
                n = t("dcgview-helpers/checkbox").Checkbox,
                o = r.createClass({
                    template: function () {
                        var t;
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            t = this.userController.getSubscriptions(),
                            this.digestChecked = e.call(t, "digest") >= 0,
                            this.teacherUpdatesChecked = e.call(t, "teacherUpdate") >= 0,
                            this.disabled = !0,
                            this.createElement("div", {
                                class: r.const("email-subscriptions account-settings-section")
                            }, this.createElement("div", {
                                class: r.const("digest")
                            }, this.createElement("div", {
                                class: r.const("checkbox-container")
                            }, this.createElement(n, {
                                ariaLabel: function (e) {
                                    return function () {
                                        return e.t("Desmos Calculator Digest")
                                    }
                                }(this),
                                checked: function (e) {
                                    return function () {
                                        return e.digestChecked
                                    }
                                }(this),
                                disabled: this.const(!1),
                                onChange: function (e) {
                                    return function () {
                                        return e.digestChecked = !e.digestChecked,
                                            e.disabled = !1,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("div", {
                                class: r.const("title-description-container")
                            }, this.createElement("div", {
                                class: r.const("digest-title")
                            }, function (e) {
                                return function () {
                                    return e.t("Desmos Calculator Digest")
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("description")
                            }, function (e) {
                                return function () {
                                    return e.t("Featured graphs and calculator updates, delivered monthly")
                                }
                            }(this)))), this.createElement("div", {
                                class: r.const("updates")
                            }, this.createElement("div", {
                                class: r.const("checkbox-container")
                            }, this.createElement(n, {
                                ariaLabel: function (e) {
                                    return function () {
                                        return e.t("Desmos Activity Digest")
                                    }
                                }(this),
                                checked: function (e) {
                                    return function () {
                                        return e.teacherUpdatesChecked
                                    }
                                }(this),
                                disabled: this.const(!1),
                                onChange: function (e) {
                                    return function () {
                                        return e.teacherUpdatesChecked = !e.teacherUpdatesChecked,
                                            e.disabled = !1,
                                            e.update()
                                    }
                                }(this)
                            })), this.createElement("div", {
                                class: r.const("title-description-container")
                            }, this.createElement("div", {
                                class: r.const("updates-title")
                            }, function (e) {
                                return function () {
                                    return e.t("Desmos Activity Digest")
                                }
                            }(this)), this.createElement("div", {
                                class: r.const("description")
                            }, function (e) {
                                return function () {
                                    return e.t("Featured activities and teacher.desmos.com updates, delivered monthly")
                                }
                            }(this)))), this.createElement("div", {
                                class: r.const("actions-container")
                            }, this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.saved
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("span", {
                                        "aria-live": r.const("assertive"),
                                        "aria-atomic": r.const("true"),
                                        class: r.const("saved-notice")
                                    }, e.createElement("i", {
                                        class: function () {
                                            return {
                                                "dcg-icon-check": !0,
                                                "dcg-success-marker": !0
                                            }
                                        },
                                        "aria-hidden": r.const("true")
                                    }), function () {
                                        return e.t("Saved!")
                                    })
                                }
                            }(this)), this.createElement("div", {
                                role: r.const("button"),
                                tabindex: r.const(0),
                                class: function (e) {
                                    return function () {
                                        return {
                                            "btn-blue": !0,
                                            "action-submit": !0,
                                            "update-subscriptions-button": !0,
                                            disabled: e.disabled
                                        }
                                    }
                                }(this),
                                "aria-disabled": function (e) {
                                    return function () {
                                        return e.disabled
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.savePreferences()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.t("Save")
                                }
                            }(this))))
                    },
                    onSaved: function () {
                        return this.saved = !0,
                            this.disabled = !0,
                            this.update(),
                            setTimeout(function (e) {
                                return function () {
                                    return e.saved = !1,
                                        e.update()
                                }
                            }(this), 3e3)
                    },
                    savePreferences: function () {
                        var e;
                        if (!this.disabled)
                            return e = [],
                                this.digestChecked && e.push("digest"),
                                this.teacherUpdatesChecked && e.push("teacherUpdate"),
                                this.userController.setSubscriptions(e).done(this.onSaved.bind(this))
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/account-settings-dialog", ["require", "dcgview", "./modal", "jquery", "underscore", "loadcss!accounts/shared-pillow-styles", "loadcss!accounts/account-settings-modal", "accounts/profile-info", "accounts/change-password", "accounts/email-subscriptions"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p;
            return o = e("dcgview"),
                c = e("./modal"),
                t = e("jquery"),
                p = e("underscore"),
                e("loadcss!accounts/shared-pillow-styles"),
                e("loadcss!accounts/account-settings-modal"),
                d = o.Components.Switch,
                u = e("accounts/profile-info"),
                i = e("accounts/change-password"),
                a = e("accounts/email-subscriptions"),
                l = 0,
                r = 1,
                s = 2,
                n = o.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.settingsView = l,
                            this.breakPoint = 660,
                            this.measureWindow(),
                            this.createElement(c, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                class: o.const("account-settings-modal-contents")
                            }, this.createElement("div", {
                                class: o.const("fixed-header")
                            }, this.createElement("div", {
                                class: o.const("account-modal-header"),
                                role: o.const("heading"),
                                "aria-level": o.const("1")
                            }, function (e) {
                                return function () {
                                    return e.t("Account Settings")
                                }
                            }(this))), this.createElement("div", {
                                class: o.const("left-side-tabs"),
                                role: o.const("navigation")
                            }, this.createElement("div", {
                                role: o.const("link"),
                                tabindex: o.const(0),
                                class: function (e) {
                                    return function () {
                                        return {
                                            "menu-item-gray": !0,
                                            "profile-view-button": !0,
                                            selected: e.settingsView === l
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.updateSettingsView(l)
                                    }
                                }(this)
                            }, this.profileTitle.bind(this)), this.createElement("div", {
                                role: o.const("link"),
                                tabindex: o.const(0),
                                class: function (e) {
                                    return function () {
                                        return {
                                            "menu-item-gray": !0,
                                            "password-view-button": !0,
                                            selected: e.settingsView === r
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.updateSettingsView(r)
                                    }
                                }(this)
                            }, this.passwordTitle.bind(this)), this.createElement("div", {
                                role: o.const("link"),
                                tabindex: o.const(0),
                                class: function (e) {
                                    return function () {
                                        return {
                                            "menu-item-gray": !0,
                                            "subscriptions-view-button": !0,
                                            selected: e.settingsView === s
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.updateSettingsView(s)
                                    }
                                }(this)
                            }, this.subscriptionTitle.bind(this))), this.createElement("div", {
                                class: o.const("right-side-content")
                            }, this.createElement(d, {
                                key: function (e) {
                                    return function () {
                                        return e.settingsView
                                    }
                                }(this)
                            }, function (e) {
                                return function (t) {
                                    return t === l ? e.createElement(u, {
                                        controller: e.props.controller
                                    }) : t === r ? e.createElement(i, {
                                        controller: e.props.controller
                                    }) : t === s ? e.createElement(a, {
                                        controller: e.props.controller
                                    }) : void 0
                                }
                            }(this)))))
                    },
                    updateSettingsView: function (e) {
                        return this.settingsView = e,
                            this.update()
                    },
                    profileTitle: function () {
                        return this.windowWidth > this.breakPoint ? this.t("Profile Information") : this.t("Profile")
                    },
                    passwordTitle: function () {
                        return this.windowWidth > this.breakPoint ? this.t("Change Password") : this.t("Password")
                    },
                    subscriptionTitle: function () {
                        return this.windowWidth > this.breakPoint ? this.t("Email Subscriptions") : this.t("Emails")
                    },
                    measureWindow: function () {
                        return this.windowWidth = t(window).width()
                    },
                    didMount: function () {
                        return t(window).on("resize.account-dialog", p.throttle(function (e) {
                            return function () {
                                return e.measureWindow(),
                                    e.update()
                            }
                        }(this), 200))
                    },
                    didUnmount: function () {
                        return t(window).off("resize.account-dialog")
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/change-email", function () { }),
    define("loadcss!accounts/account-update-modal", function () { }),
    function () {
        define("accounts/change-email", ["require", "dcgview", "jquery", "loadcss!./change-email", "loadcss!./account-update-modal"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                r = n.Components.If,
                t = e("jquery"),
                e("loadcss!./change-email"),
                e("loadcss!./account-update-modal"),
                n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.userController = this.controller.userController,
                            this.createElement("div", {
                                class: n.const("change-email-form account-update-form")
                            }, this.createElement("div", {
                                class: n.const("account-update-header"),
                                role: n.const("heading"),
                                "aria-level": n.const("1")
                            }, function (e) {
                                return function () {
                                    return e.t("Change your Desmos email address")
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("h4-container")
                            }, this.createElement("h4", null, function (e) {
                                return function () {
                                    return e.t("Set a new email address and password:")
                                }
                            }(this))), this.createElement("form", {
                                didMount: this.didMountForm.bind(this),
                                method: n.const("post")
                            }, this.createElement("input", {
                                class: n.const("blue-outline new-email-input"),
                                didMount: this.didMountNewEmail.bind(this),
                                type: n.const("email"),
                                "aria-label": function (e) {
                                    return function () {
                                        return e.t("New Email Address")
                                    }
                                }(this),
                                name: n.const("newEmail"),
                                placeholder: function (e) {
                                    return function () {
                                        return e.t("New Email Address")
                                    }
                                }(this),
                                required: n.const("required")
                            }), this.createElement("input", {
                                class: n.const("blue-outline password-input"),
                                didMount: this.didMountPassword.bind(this),
                                type: n.const("password"),
                                "aria-label": function (e) {
                                    return function () {
                                        return e.t("Password")
                                    }
                                }(this),
                                name: n.const("password"),
                                placeholder: function (e) {
                                    return function () {
                                        return e.t("Password")
                                    }
                                }(this),
                                required: n.const("required")
                            }), this.createElement("div", {
                                class: n.const("account-error-container")
                            }, this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        return e.errorMessage
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("form-error-message"),
                                        "aria-live": n.const("assertive"),
                                        "aria-atomic": n.const("true")
                                    }, function () {
                                        return e.errorMessage
                                    })
                                }
                            }(this))), this.createElement("div", {
                                class: n.const("form-submit-container")
                            }, this.createElement("button", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "btn-blue": !0,
                                            disabled: e.disabled
                                        }
                                    }
                                }(this),
                                "aria-disabled": function (e) {
                                    return function () {
                                        return e.disabled
                                    }
                                }(this),
                                type: n.const("submit")
                            }, function (e) {
                                return function () {
                                    return e.t("Change Email and Password")
                                }
                            }(this)))))
                    },
                    updateDisabled: function () {
                        var e, t;
                        return t = this.$password.val(),
                            e = this.$newEmail.val(),
                            this.disabled = !(t && e)
                    },
                    didMountNewEmail: function (e) {
                        return this.$newEmail = t(e),
                            this.$newEmail.on("input change", function (e) {
                                return function () {
                                    return e.updateDisabled(),
                                        e.update()
                                }
                            }(this)),
                            this.whenMountComplete()
                    },
                    didMountPassword: function (e) {
                        return this.$password = t(e),
                            this.$password.on("input change", function (e) {
                                return function () {
                                    return e.updateDisabled(),
                                        e.update()
                                }
                            }(this)),
                            this.whenMountComplete()
                    },
                    didMountForm: function (e) {
                        return this.$form = t(e),
                            this.$form.on("submit", function (e) {
                                return function (t) {
                                    if (t.preventDefault(),
                                        !e.disabled)
                                        return e.userController.setEmail({
                                            changeToken: e.getChangeToken(),
                                            password: e.$password.val(),
                                            newEmail: e.$newEmail.val()
                                        }).done(function () {
                                            return e.dispatch({
                                                type: "close-modal"
                                            }),
                                                history.replaceState(null, null, document.location.pathname)
                                        }).fail(function (t) {
                                            return 409 === t.status ? e.errorMessage = "Sorry, someone has already registered with this email address." : e.errorMessage = e.controller.SOMETHING_WENT_WRONG,
                                                e.update()
                                        })
                                }
                            }(this)),
                            this.whenMountComplete()
                    },
                    whenMountComplete: function () {
                        if (this.$newEmail && this.$password && this.$form)
                            return this.updateDisabled(),
                                this.update()
                    },
                    getChangeToken: function () {
                        return this.userController.getEmailChangeToken()
                    }
                })
        })
    }
        .call(this),
    function () {
        define("calculator-shell/change-email-dialog", ["require", "dcgview", "./modal", "accounts/change-email"], function (e) {
            var t, n, r, i;
            return r = e("dcgview"),
                i = e("./modal"),
                t = e("accounts/change-email"),
                n = r.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.createElement(i, {
                                controller: this.props.controller
                            }, this.createElement(t, {
                                controller: this.props.controller
                            }))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!accounts/account-reenabled-modal", function () { }),
    function () {
        define("calculator-shell/account-reenabled-dialog", ["require", "dcgview", "./modal", "loadcss!accounts/account-reenabled-modal", "loadcss!accounts/account-update-modal"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                r = e("./modal"),
                e("loadcss!accounts/account-reenabled-modal"),
                e("loadcss!accounts/account-update-modal"),
                t = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.createElement(r, {
                                controller: this.props.controller
                            }, this.createElement("div", {
                                class: n.const("account-update-form account-reenabled-modal-contents")
                            }, this.createElement("div", {
                                class: n.const("account-update-header"),
                                role: n.const("heading"),
                                "aria-level": n.const("1")
                            }, function (e) {
                                return function () {
                                    return e.t("Your account has been reactivated.")
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("reenabled-message")
                            }, function (e) {
                                return function () {
                                    return e.t("You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!")
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("continue-button")
                            }, this.createElement("span", {
                                role: n.const("link"),
                                tabindex: n.const(0),
                                onTap: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "close-modal"
                                        })
                                    }
                                }(this),
                                class: n.const("btn-blue continue-link")
                            }, function (e) {
                                return function () {
                                    return e.t("Continue to Desmos")
                                }
                            }(this)))))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!calculator-shell/export-image-dialog", function () { }),
    define("loadcss!calculator-shell/export-image-size-options", function () { }),
    function () {
        define("calculator-shell/export-image-size-options", ["require", "dcgview", "underscore", "jquery", "loadcss!./export-image-size-options"], function (e) {
            var t, n, r, i, o, s;
            return n = e("dcgview"),
                s = n.Components,
                i = s.If,
                r = s.For,
                o = e("underscore"),
                t = e("jquery"),
                e("loadcss!./export-image-size-options"),
                n.createClass({
                    template: function () {
                        return this.menuOpen = !1,
                            this.createElement("div", {
                                class: n.const("dcg-export-image-size-options")
                            }, this.createElement("div", {
                                class: n.const("dcg-selected-option"),
                                onTap: this.toggleMenu.bind(this)
                            }, function (e) {
                                return function () {
                                    return e.selected().name
                                }
                            }(this), this.createElement("i", {
                                class: n.const("dcg-icon-caret-down")
                            })), this.createElement(i, {
                                predicate: function (e) {
                                    return function () {
                                        return e.menuOpen
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: n.const("dcg-options-positioning-container")
                                    }, e.createElement(r, {
                                        each: function () {
                                            return o.keys(e.props.options())
                                        }
                                    }, e.createElement("div", {
                                        class: n.const("dcg-options-container")
                                    }, function (t) {
                                        var n;
                                        return n = e.props.options()[t],
                                            e.createElement("div", {
                                                class: function () {
                                                    return {
                                                        "dcg-option": !0,
                                                        "dcg-selected": e.props.selectedSize() === t
                                                    }
                                                },
                                                onTap: function () {
                                                    return e.selectSize(t)
                                                }
                                            }, function () {
                                                return n.name
                                            })
                                    })))
                                }
                            }(this)))
                    },
                    closeMenu: function () {
                        return t(document).off(".export-image-size-options"),
                            this.menuOpen = !1,
                            this.update()
                    },
                    didUnmount: function () {
                        return t(document).off(".export-image-size-options")
                    },
                    toggleMenu: function () {
                        return this.menuOpen ? this.closeMenu() : (this.menuOpen = !0,
                            t(document).on("dcg-tap.export-image-size-options", function (e) {
                                return function (n) {
                                    if (!t(n.target).closest(".dcg-export-image-size-options").length)
                                        return e.closeMenu()
                                }
                            }(this)),
                            this.update())
                    },
                    selectSize: function (e) {
                        return this.menuOpen = !1,
                            this.props.selectSize(e)
                    },
                    selected: function () {
                        var e;
                        return e = this.props.options()[this.props.selectedSize()]
                    }
                })
        })
    }
        .call(this),
    define("lib/data-uri-to-blob", ["require"], function (e) {
        return function (e) {
            for (var t = e.split(","), n = t[0].match(/:(.*?);/)[1], r = atob(t[1]), i = r.length, o = new Uint8Array(i); i--;)
                o[i] = r.charCodeAt(i);
            return new Blob([o], {
                type: n
            })
        }
    }),
    function () {
        define("calculator-shell/export-image-dialog", ["require", "dcgview", "./modal", "loadcss!./export-image-dialog", "./export-image-size-options", "browser", "lib/data-uri-to-blob"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v;
            return n = e("dcgview"),
                y = n.Components,
                o = y.If,
                h = y.Switch,
                d = e("./modal"),
                e("loadcss!./export-image-dialog"),
                i = e("./export-image-size-options"),
                t = e("browser"),
                g = e("lib/data-uri-to-blob"),
                m = 0,
                c = 1,
                f = 2,
                p = "0",
                u = "1",
                a = "2",
                l = "3",
                s = "4",
                v = {},
                v[p] = {
                    width: 160,
                    height: 160,
                    name: "Small Square"
                },
                v[u] = {
                    width: 400,
                    height: 400,
                    name: "Medium Square"
                },
                v[a] = {
                    width: 1e3,
                    height: 1e3,
                    name: "Large Square"
                },
                v[l] = {
                    width: 600,
                    height: 400,
                    name: "Medium Rectangle"
                },
                v[s] = {
                    width: 1200,
                    height: 800,
                    name: "Large Rectangle"
                },
                r = n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.dispatch = this.controller.dispatch,
                            this.thickness = m,
                            this.size = u,
                            this.supportsDirectDownload = !t.IS_IE && !t.IS_EDGE && !t.IS_SAFARI && "undefined" != typeof document.createElement("a").download,
                            this.createElement(d, {
                                controller: this.props.controller,
                                class: n.const("export-modal")
                            }, this.createElement("div", {
                                id: n.const("export-image-dialog")
                            }, this.createElement("h1", null, function (e) {
                                return function () {
                                    return e.t("Export Your Graph")
                                }
                            }(this)), this.createElement("div", {
                                class: n.const("dcg-offscreen-calculator"),
                                didMount: this.didMountOffscreenCalc.bind(this)
                            }), this.createElement("div", {
                                class: n.const("dcg-columns")
                            }, this.createElement("div", {
                                class: n.const("dcg-left-column")
                            }, this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-graph-preview": !0,
                                            "dcg-preview-loading": !e.loaded
                                        }
                                    }
                                }(this)
                            }, this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.loaded
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("span", {
                                        class: n.const("dcg-loading-message")
                                    }, e.createElement("span", {
                                        class: n.const("dcg-spinner")
                                    }), function () {
                                        return e.t("Loading...")
                                    })
                                }
                            }(this)), this.createElement("img", {
                                class: n.const("dcg-graph-image"),
                                didMount: this.didMountGraphPreview.bind(this)
                            }), this.createElement(o, {
                                predicate: function (e) {
                                    return function () {
                                        return e.loaded
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("span", {
                                        class: n.const("dcg-zoom-percentage")
                                    }, e.getZoom.bind(e))
                                }
                            }(this)))), this.createElement("div", {
                                class: n.const("dcg-right-column")
                            }, this.createElement("div", {
                                class: n.const("dcg-section-title")
                            }, n.const("Size")), this.createElement(i, {
                                options: this.const(v),
                                selectedSize: function (e) {
                                    return function () {
                                        return e.size
                                    }
                                }(this),
                                selectSize: this.selectSize.bind(this)
                            }), this.createElement("div", {
                                class: n.const("dcg-section-title")
                            }, n.const("Line Thickness")), this.createElement("div", {
                                class: n.const("dcg-button-group")
                            }, this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-button": !0,
                                            "dcg-selected": e.thickness === m
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.selectThickness(m)
                                    }
                                }(this)
                            }, n.const("Thin")), this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-button": !0,
                                            "dcg-selected": e.thickness === c
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.selectThickness(c)
                                    }
                                }(this)
                            }, n.const("Medium")), this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-button": !0,
                                            "dcg-selected": e.thickness === f
                                        }
                                    }
                                }(this),
                                onTap: function (e) {
                                    return function () {
                                        return e.selectThickness(f)
                                    }
                                }(this)
                            }, n.const("Thick"))), this.createElement(h, {
                                key: this.const(this.supportsDirectDownload)
                            }, function (e) {
                                return function (t) {
                                    return t ? e.createElement("a", {
                                        class: function () {
                                            return {
                                                "dcg-download-button": !0,
                                                "dcg-disabled": !e.loaded
                                            }
                                        },
                                        didMount: e.didMountDownload.bind(e),
                                        download: n.const("desmos-graph.png")
                                    }, e.createElement("i", {
                                        class: n.const("dcg-icon-download")
                                    }), n.const("Download PNG")) : e.createElement("div", {
                                        class: n.const("dcg-download-not-enabled-notice")
                                    }, e.createElement("div", {
                                        class: n.const("dcg-title")
                                    }, n.const("Download Instructions")), n.const('To download, right click on the image of the graph and select "Save As."\nYou might also be able to click and drag the image onto your desktop.'))
                                }
                            }(this))))))
                    },
                    didMountOffscreenCalc: function (e) {
                        return this.calculator = Desmos.Calculator(e, {
                            expressions: !1,
                            keypad: !1,
                            branding: !1,
                            border: !1
                        }),
                            this.calculator._calc.evaluator.notifyWhenSynced(function (e) {
                                return function () {
                                    return e.loaded = !0,
                                        e.update()
                                }
                            }(this)),
                            this.calculator.setState(this.controller.api.getState())
                    },
                    selectSize: function (e) {
                        return this.size = e,
                            this.update()
                    },
                    getZoom: function () {
                        return "Zoom: " + Math.min(100, Math.round(4e4 / this.getWidth())) + "%"
                    },
                    selectThickness: function (e) {
                        return this.thickness = e,
                            this.update()
                    },
                    didMountGraphPreview: function (e) {
                        this.previewImg = e
                    },
                    didMountDownload: function (e) {
                        this.downloadLink = e
                    },
                    getGridOpacity: function () {
                        return this.thickness === f ? 1 : this.thickness === c ? .6 : this.thickness === m ? .4 : void 0
                    },
                    getAxisWeight: function () {
                        return this.thickness === f ? 2 : this.thickness === c ? 2 : this.thickness === m ? 1.5 : void 0
                    },
                    getGraphThickness: function () {
                        return this.thickness === f ? 5 : this.thickness === c ? 3.5 : this.thickness === m ? 2.5 : void 0
                    },
                    getLabelSize: function () {
                        return this.thickness === f ? 20 : this.thickness === c ? 17 : this.thickness === m ? 14 : void 0
                    },
                    updateViewSettings: function () {
                        var e, t, n, r;
                        if (null != (null != (e = this.calculator) && null != (t = e._calc) && null != (n = t.grapher) ? n.settings : void 0))
                            return r = this.calculator._calc.grapher.settings,
                                r.majorAxisOpacity = this.getGridOpacity(),
                                r.minorAxisOpacity = this.getGridOpacity() / 2,
                                r.axisLineOffset = 0,
                                r.setProperty("axisLineWidth", this.getAxisWeight()),
                                r.labelSize = this.getLabelSize(),
                                r.graphLineWidth = this.getGraphThickness(),
                                r.pointLineWidth = 3 * this.getGraphThickness()
                    },
                    getBackgroundSize: function () {
                        var e;
                        return (e = this.size) === l || e === s ? "contain" : this.size === p ? v[p].width + "px " + v[p].height + "px" : "cover"
                    },
                    getHeight: function () {
                        return v[this.size].height
                    },
                    getWidth: function () {
                        return v[this.size].width
                    },
                    revokeBlobURL: function () {
                        if (this.previewBlob)
                            return URL.revokeObjectURL(this.previewBlob)
                    },
                    didUnmount: function () {
                        return this.revokeBlobURL()
                    },
                    updateGraphPreview: function () {
                        var e, t, n, r;
                        if (this.loaded)
                            return this.updateViewSettings(),
                                n = this.calculator.screenshot({
                                    width: this.getWidth(),
                                    height: this.getHeight(),
                                    preserveAxisNumbers: !0,
                                    targetPixelRatio: 2
                                }),
                                this.previewImg.src = n,
                                this.downloadLink && (this.revokeBlobURL(),
                                    this.previewBlob = g(n),
                                    this.downloadLink.href = URL.createObjectURL(this.previewBlob)),
                                r = Math.min(this.getWidth(), 400),
                                t = this.getHeight() / this.getWidth(),
                                e = t * r,
                                this.previewImg.width = r,
                                this.previewImg.height = e
                    },
                    didUpdate: function () {
                        return this.updateGraphPreview()
                    }
                })
        })
    }
        .call(this),
    define("loadcss!modals", function () { }),
    function () {
        define("calculator-shell/modals", ["require", "dcgview", "./save-dialog", "./create-account-dialog", "./login-dialog", "./recover-password-dialog", "./hotkeys-dialog", "./unsupported-browser", "./account-settings-dialog", "./change-email-dialog", "./account-reenabled-dialog", "./export-image-dialog", "loadcss!modals"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p, h, f, m;
            return o = e("dcgview"),
                m = o.Components,
                c = m.If,
                h = m.Switch,
                p = e("./save-dialog"),
                i = e("./create-account-dialog"),
                l = e("./login-dialog"),
                d = e("./recover-password-dialog"),
                a = e("./hotkeys-dialog"),
                f = e("./unsupported-browser"),
                n = e("./account-settings-dialog"),
                r = e("./change-email-dialog"),
                t = e("./account-reenabled-dialog"),
                s = e("./export-image-dialog"),
                e("loadcss!modals"),
                u = o.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.t = this.controller.t,
                            this.createElement(c, {
                                predicate: function (e) {
                                    return function () {
                                        return e.controller.hasOpenModal()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        role: o.const("dialog"),
                                        class: function () {
                                            var t;
                                            return {
                                                "dcg-modal-container": !0,
                                                "dcg-wide-modal": "hotkeys" === e.controller.getOpenModal(),
                                                "dcg-fixed-width-height": "account-settings" === (t = e.controller.getOpenModal()) || "export-image" === t,
                                                "dcg-export-modal": "export-image" === e.controller.getOpenModal()
                                            }
                                        }
                                    }, e.createElement("div", {
                                        class: o.const("dcg-modal-background"),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "close-modal"
                                            })
                                        }
                                    }), e.createElement("div", {
                                        class: o.const("modal dcg-state-modals")
                                    }, e.createElement("span", {
                                        role: o.const("link"),
                                        tabindex: o.const(0),
                                        "aria-label": o.const("Close Dialog"),
                                        class: o.const("action-close-modal close-modal internal-close"),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "close-modal"
                                            })
                                        },
                                        didMount: function (t) {
                                            if ("hotkeys" === e.controller.getOpenModal())
                                                return t.focus()
                                        }
                                    }, e.createElement("i", {
                                        class: o.const("dcg-icon-remove")
                                    })), e.createElement(h, {
                                        key: function () {
                                            return e.controller.getOpenModal()
                                        }
                                    }, function (o) {
                                        return "save" === o ? e.createElement(p, {
                                            controller: e.props.controller
                                        }) : "export-image" === o ? e.createElement(s, {
                                            controller: e.props.controller
                                        }) : "login" === o ? e.createElement(l, {
                                            controller: e.props.controller
                                        }) : "create-account" === o ? e.createElement(i, {
                                            controller: e.props.controller
                                        }) : "recover-password" === o ? e.createElement(d, {
                                            controller: e.props.controller
                                        }) : "hotkeys" === o ? e.createElement(a, {
                                            controller: e.props.controller
                                        }) : "unsupported-browser" === o ? e.createElement(f, {
                                            controller: e.props.controller
                                        }) : "account-settings" === o ? e.createElement(n, {
                                            controller: e.props.controller
                                        }) : "change-email" === o ? e.createElement(r, {
                                            controller: e.props.controller
                                        }) : "account-reenabled" === o ? e.createElement(t, {
                                            controller: e.props.controller
                                        }) : e.createElement("div", null)
                                    })), e.createElement("span", {
                                        role: o.const("link"),
                                        tabindex: o.const(0),
                                        onTap: function () {
                                            return e.dispatch({
                                                type: "close-modal"
                                            })
                                        },
                                        "aria-label": o.const("Close Dialog"),
                                        class: o.const("action-close-modal close-modal external-close")
                                    }, e.createElement("i", {
                                        class: o.const("dcg-icon-remove")
                                    })))
                                }
                            }(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/mygraphs", function () { }),
    define("loadcss!mygraphs/item", function () { }),
    function () {
        define("mygraphs/item", ["require", "dcgview", "jquery", "loadcss!./item", "jquery.handleevent"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                r = n.Components.If,
                t = e("jquery"),
                e("loadcss!./item"),
                e("jquery.handleevent"),
                n.createClass({
                    template: function () {
                        return this.createElement("div", {
                            class: function (e) {
                                return function () {
                                    return {
                                        "saved-graph": !0,
                                        "graph-link-container": !0,
                                        "dcg-selected": e.props.isSelected()
                                    }
                                }
                            }(this),
                            onTap: function (e) {
                                return function (t) {
                                    if (!t.wasHandled())
                                        return e.props.onTap(t)
                                }
                            }(this)
                        }, this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return !e.props.isDeletingGraph() && !e.props.didDeleteGraphFail()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    role: n.const("link"),
                                    tabindex: n.const(0),
                                    class: function () {
                                        return {
                                            "graph-link": !0,
                                            "dcg-action-preview-graph": !0,
                                            "example-graph": e.props.isExample()
                                        }
                                    },
                                    didMount: e.onMount.bind(e)
                                }, e.createElement("span", {
                                    class: n.const("dcg-thumb"),
                                    style: e.const({
                                        "background-image": "url(" + e.props.getThumbURL() + ")"
                                    })
                                }), e.createElement("span", {
                                    class: n.const("dcg-title")
                                }, e.props.getTitle), e.createElement("span", null, n.const(" ")), e.createElement("span", {
                                    class: n.const("date")
                                }, function () {
                                    return e.props.isExample() ? e.props.t("example") : e.props.getDisplayDate()
                                }))
                            }
                        }(this)), this.createElement(r, {
                            predicate: this.props.isDeletingGraph
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    "aria-live": n.const("assertive"),
                                    "aria-atomic": n.const("true"),
                                    class: n.const("deleting"),
                                    handleEvent: n.const("true"),
                                    onTap: function (t) {
                                        if (e.props.canCancelDelete())
                                            return e.props.cancelDeleteGraph()
                                    }
                                }, function () {
                                    return e.props.t("Deleting...")
                                }, e.createElement(r, {
                                    predicate: e.props.canCancelDelete
                                }, function () {
                                    return e.createElement("div", {
                                        role: n.const("button"),
                                        tabindex: n.const(0),
                                        class: n.const("cancel-delete")
                                    }, function () {
                                        return e.props.t("Cancel")
                                    })
                                }))
                            }
                        }(this)), this.createElement(r, {
                            predicate: this.props.didDeleteGraphFail
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    "aria-live": n.const("assertive"),
                                    "aria-atomic": n.const("true"),
                                    class: n.const("retry-delete"),
                                    handleEvent: n.const("true")
                                }, function () {
                                    return e.props.t("Error deleting.")
                                }, e.createElement("a", {
                                    role: n.const("button"),
                                    tabindex: n.const(0),
                                    class: n.const("dcg-action-removegraph"),
                                    onTap: e.props.requestDeleteGraph
                                }, function () {
                                    return e.props.t("Try again")
                                }), function () {
                                    return e.props.t("or")
                                }, e.createElement("a", {
                                    role: n.const("button"),
                                    tabindex: n.const(0),
                                    class: n.const("dcg-action-cancelremovegraph"),
                                    onTap: e.props.cancelDeleteGraph
                                }, function () {
                                    return e.props.t("Cancel")
                                }))
                            }
                        }(this)), this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return !e.props.isExample() && !e.props.isDeletingGraph() && !e.props.didDeleteGraphFail()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("span", {
                                    class: n.const("actions"),
                                    handleEvent: n.const("true")
                                }, e.createElement("span", {
                                    role: n.const("button"),
                                    tabindex: n.const(0),
                                    "aria-label": function () {
                                        return e.props.t("Delete __graphTitle__", {
                                            graphTitle: e.props.getTitle()
                                        })
                                    },
                                    class: n.const("dcg-action-removegraph"),
                                    onTap: e.props.requestDeleteGraph
                                }, e.createElement("i", {
                                    class: n.const("dcg-icon-remove")
                                })))
                            }
                        }(this)))
                    },
                    didUpdate: function () {
                        if (this.props.isSelected())
                            return this.$node.focus()
                    },
                    onMount: function (e) {
                        return this.$node = t(e),
                            this.$node.on("focus", function (e) {
                                return function () {
                                    if (!e.props.isSelected())
                                        return e.props.onFocus()
                                }
                            }(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/save-btn", function () { }),
    function () {
        define("mygraphs/save-btn", ["require", "dcgview", "loadcss!./save-btn"], function (e) {
            var t, n;
            return t = e("dcgview"),
                n = t.Components.If,
                e("loadcss!./save-btn"),
                t.createClass({
                    shouldShowSaveButton: function () {
                        return !this.props.isSaving() && !this.props.didSaveRecentlySucceed() && !this.props.didSaveRecentlyFail()
                    },
                    template: function () {
                        return this.createElement("div", {
                            class: t.const("save-btn-container")
                        }, this.createElement(n, {
                            predicate: function (e) {
                                return function () {
                                    return e.shouldShowSaveButton()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: t.const("save-button")
                                }, e.createElement("span", {
                                    role: t.const("button"),
                                    onTap: e.props.onTap,
                                    class: function () {
                                        return {
                                            "dcg-btn-green": e.props.didGraphChange(),
                                            "disabled-save-btn": !e.props.didGraphChange()
                                        }
                                    },
                                    "aria-disabled": function () {
                                        return !e.props.didGraphChange()
                                    },
                                    tabindex: function () {
                                        return e.props.didGraphChange() ? 0 : -1
                                    }
                                }, function () {
                                    return e.props.t("Save")
                                }))
                            }
                        }(this)), this.createElement(n, {
                            predicate: this.props.isSaving
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: t.const("save-saving")
                                }, e.createElement("span", {
                                    class: t.const("dcg-spinner-dark")
                                }))
                            }
                        }(this)), this.createElement(n, {
                            predicate: this.props.didSaveRecentlyFail
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: t.const("save-error"),
                                    "aria-live": t.const("assertive"),
                                    "aria-atomic": t.const("true")
                                }, e.createElement("i", {
                                    class: t.const("dcg-icon-remove")
                                }), t.const(" "), function () {
                                    return e.props.t("error")
                                })
                            }
                        }(this)), this.createElement(n, {
                            predicate: this.props.didSaveRecentlySucceed
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: t.const("save-success")
                                }, e.createElement("i", {
                                    class: t.const("dcg-icon-check")
                                }), t.const(" "), function () {
                                    return e.props.t("saved")
                                })
                            }
                        }(this)))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/graph-in-progress", function () { }),
    function () {
        define("mygraphs/graph-in-progress", ["require", "dcgview", "mygraphs/save-btn", "loadcss!./item", "loadcss!./graph-in-progress"], function (e) {
            var t, n;
            return t = e("dcgview"),
                n = e("mygraphs/save-btn"),
                e("loadcss!./item"),
                e("loadcss!./graph-in-progress"),
                t.createClass({
                    template: function () {
                        return this.createElement("div", {
                            class: t.const("graph-link-container graph-in-progress")
                        }, this.createElement("div", {
                            role: t.const("link"),
                            "aria-label": function (e) {
                                return function () {
                                    return e.props.t("Save")
                                }
                            }(this),
                            class: t.const("graph-link dcg-action-preview-graph"),
                            onTap: this.props.openSaveDialog
                        }, this.createElement("span", {
                            class: t.const("dcg-thumb"),
                            style: function (e) {
                                return function () {
                                    return {
                                        "background-image": "url(" + e.props.getThumbnail() + ")"
                                    }
                                }
                            }(this)
                        }), this.createElement("span", {
                            class: t.const("dcg-title")
                        }, this.props.getTitle), this.createElement("span", {
                            class: t.const("date")
                        }, function (e) {
                            return function () {
                                return e.props.didGraphChange() ? e.props.wasCurrentGraphEverSaved() ? e.props.t("last saved: " + e.props.getDisplayDate()) : e.props.t("unsaved graph") : e.props.t("no unsaved changes")
                            }
                        }(this))), this.createElement(n, {
                            didGraphChange: this.props.didGraphChange,
                            isSaving: this.props.isSaving,
                            didSaveRecentlySucceed: this.props.didSaveRecentlySucceed,
                            didSaveRecentlyFail: this.props.didSaveRecentlyFail,
                            onTap: this.props.simpleSave,
                            t: this.props.t.bind(this.props)
                        }))
                    },
                    shouldUpdate: function () {
                        return this.props.isOpen()
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/user-bar", function () { }),
    function () {
        define("mygraphs/user-bar", ["require", "dcgview", "loadcss!./user-bar", "jquery"], function (e) {
            var t, n, r, i, o;
            return n = e("dcgview"),
                e("loadcss!./user-bar"),
                t = e("jquery"),
                o = n.Components,
                i = o.Input,
                r = o.If,
                n.createClass({
                    willUpdate: function () {
                        if (!this.props.isSearching())
                            return this.setSearchValue("")
                    },
                    setSearchValue: function (e) {
                        if (this.searchValue !== e)
                            return this.searchValue = e,
                                this.props.updateFilter(e)
                    },
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.userController = this.controller.userController,
                            this.searchValue = "",
                            this.createElement("div", {
                                class: n.const("dcg-user-bar")
                            }, this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.props.isSearching()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("span", {
                                        role: n.const("button"),
                                        tabindex: n.const(0),
                                        class: n.const("dcg-action-toggle-dropdown"),
                                        "aria-expanded": e.props.isDropdownOpen,
                                        onTap: e.props.toggleDropdown,
                                        didMount: e.didMountDropdown.bind(e)
                                    }, e.createElement("span", {
                                        class: n.const("dcg-variable-name")
                                    }, function () {
                                        return e.userController.getFirstName()
                                    }), e.createElement("span", {
                                        class: n.const("dcg-caret-container"),
                                        style: function () {
                                            return {
                                                transform: e.props.isDropdownOpen() ? "rotate(-180deg)" : "rotate(0)"
                                            }
                                        }
                                    }, e.createElement("i", {
                                        class: n.const("dcg-icon-chevron-down")
                                    })))
                                }
                            }(this)), this.createElement(r, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.props.isDropdownOpen()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        role: n.const("search"),
                                        class: function () {
                                            return {
                                                "search-container": !0,
                                                "search-open": e.props.isSearching()
                                            }
                                        }
                                    }, e.createElement("i", {
                                        class: n.const("dcg-icon-search search-icon")
                                    }), e.createElement(i, {
                                        placeholder: function () {
                                            return e.props.t("search by title")
                                        },
                                        onInput: e.setSearchValue.bind(e),
                                        onFocus: e.props.openSearch,
                                        value: function () {
                                            return e.searchValue
                                        },
                                        didMount: e.didMountSearch.bind(e)
                                    }), e.createElement("span", {
                                        role: n.const("button"),
                                        tabindex: n.const(0),
                                        "aria-label": function () {
                                            return e.props.t("Search")
                                        },
                                        class: n.const("dcg-icon-remove dcg-action-close-search"),
                                        onTap: function (t) {
                                            return t.preventDefault(),
                                                e.props.closeSearch()
                                        }
                                    }))
                                }
                            }(this)))
                    },
                    didMountDropdown: function (e) {
                        return t(e).on("touchstart", function (e) {
                            return e.preventDefault()
                        })
                    },
                    didMountSearch: function (e) {
                        return t(e).on("blur", function (n) {
                            return function () {
                                if (!t(e).val())
                                    return n.props.closeSearch()
                            }
                        }(this))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/load-graph-view", function () { }),
    function () {
        define("mygraphs/load-graph-view", ["require", "dcgview", "loadcss!./load-graph-view", "jquery", "underscore"], function (e) {
            var t, n, r, i;
            return n = e("dcgview"),
                e("loadcss!./load-graph-view"),
                r = n.Components.If,
                t = e("jquery"),
                i = e("underscore"),
                n.createClass({
                    template: function () {
                        return this.createElement("div", {
                            class: n.const("dcg-loading-container")
                        }, this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return !e.props.didDataLoadFail()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: n.const("dcg-graph-loading")
                                }, e.createElement("div", {
                                    class: n.const("pulsing-message")
                                }, function () {
                                    return e.props.t("Loading...")
                                }), e.createElement("div", {
                                    role: n.const("link"),
                                    tabindex: n.const(0),
                                    class: n.const("cancel-while-loading"),
                                    onTap: e.props.onCancel
                                }, function () {
                                    return e.props.t("Cancel")
                                }))
                            }
                        }(this)), this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return e.props.didDataLoadFail()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: n.const("dcg-graph-loading-error"),
                                    "aria-live": n.const("assertive"),
                                    "aria-atomic": n.const("true")
                                }, e.createElement("div", {
                                    class: n.const("dcg-graph-loading-error-title")
                                }, function () {
                                    return e.props.t("Error loading graph")
                                }), e.createElement("div", {
                                    class: n.const("dcg-graph-loading-error-subtitle")
                                }, function () {
                                    return e.props.t("Check your internet connection?")
                                }), e.createElement("div", {
                                    class: n.const("dcg-graph-loading-error-options")
                                }, e.createElement("span", {
                                    role: n.const("button"),
                                    tabindex: n.const(0),
                                    class: n.const("dcg-action-try-again dcg-btn-blue dcg-btn-medium"),
                                    onTap: e.props.requestLoadGraphData
                                }, function () {
                                    return e.props.t("Try Again")
                                }), function () {
                                    return e.props.t("or")
                                }, e.createElement("span", {
                                    role: n.const("button"),
                                    tabindex: n.const(0),
                                    class: n.const("dcg-action-cancel dcg-btn-light-gray dcg-btn-medium"),
                                    onTap: e.props.onCancel
                                }, function () {
                                    return e.props.t("Cancel")
                                })))
                            }
                        }(this)))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/graph-preview", function () { }),
    function () {
        define("mygraphs/graph-preview", ["require", "dcgview", "mygraphs/load-graph-view", "jquery", "loadcss!./graph-preview"], function (e) {
            var t, n, r, i;
            return n = e("dcgview"),
                i = e("mygraphs/load-graph-view"),
                r = n.Components.If,
                t = e("jquery"),
                e("loadcss!./graph-preview"),
                n.createClass({
                    didMountGraphPreview: function (e) {
                        return this.$graphPreview = t(e),
                            this.updateGraphPreviewTop()
                    },
                    didMountArrow: function (e) {
                        return this.$arrow = t(e),
                            this.updateArrowTop()
                    },
                    didMountCalc: function (e) {
                        return this.previewCalc = this.props.makeAPI(e),
                            this.updatePreviewCalc()
                    },
                    didUpdate: function () {
                        return this.updateGraphPreviewTop(),
                            this.updateArrowTop(),
                            this.updatePreviewCalc()
                    },
                    updateGraphPreviewTop: function () {
                        return this.$graphPreview.css("top", this.getTopOffset() + "px")
                    },
                    updateArrowTop: function () {
                        return this.$arrow.css("top", this.getArrowOffset() + "px")
                    },
                    updatePreviewCalc: function () {
                        var e;
                        if (e = this.props.getGraphData(),
                            e !== this.cachedGraphData)
                            return this.cachedGraphData = e,
                                this.previewCalc.setState(e),
                                this.previewCalc.resize()
                    },
                    getMaxTop: function () {
                        var e;
                        return e = t(window).height() - this.$graphPreview.outerHeight() - 10
                    },
                    getIdealTop: function () {
                        var e, n;
                        return e = this.props.alignToNode(),
                            null == e ? null : n = t(e).offset().top + .5 * t(e).outerHeight() - 60
                    },
                    getTopOffset: function () {
                        var e, t;
                        return e = this.getIdealTop(),
                            null == e ? 0 : (t = this.getMaxTop(),
                                Math.min(e, t))
                    },
                    getArrowOffset: function () {
                        var e, t;
                        return e = this.getIdealTop(),
                            null == e ? 60 : (t = this.getTopOffset(),
                                60 + e - t)
                    },
                    template: function () {
                        return this.createElement("div", {
                            class: n.const("graph-preview"),
                            didMount: this.didMountGraphPreview.bind(this)
                        }, this.createElement("span", {
                            role: n.const("button"),
                            tabindex: n.const(0),
                            class: n.const("dcg-pull-right dcg-btn-light-gray dcg-action-cancel"),
                            onTap: this.props.onCancel
                        }, function (e) {
                            return function () {
                                return e.props.t("Cancel")
                            }
                        }(this)), this.createElement("h4", {
                            class: n.const("dcg-title")
                        }, this.props.getTitle), this.createElement("div", {
                            class: n.const("preview-graph-area")
                        }, this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return !e.props.getGraphData()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement(i, {
                                    didDataLoadFail: e.props.didDataLoadFail,
                                    onCancel: e.props.onCancel,
                                    requestLoadGraphData: e.props.requestLoadGraphData,
                                    t: e.props.t.bind(e.props)
                                })
                            }
                        }(this)), this.createElement("div", {
                            didMount: this.didMountCalc.bind(this),
                            class: function (e) {
                                return function () {
                                    return {
                                        "dcg-preview-calculator": !0,
                                        "dcg-visible": e.props.getGraphData()
                                    }
                                }
                            }(this)
                        }), this.createElement("div", {
                            class: function (e) {
                                return function () {
                                    return {
                                        "screenshot-clickjack": !0,
                                        "dcg-action-open-graph": !0,
                                        "dcg-visible": e.props.getGraphData()
                                    }
                                }
                            }(this)
                        }, this.createElement("span", {
                            role: n.const("button"),
                            tabindex: n.const(0),
                            class: n.const("dcg-action-open-graph dcg-open-graph-btn dcg-btn-blue"),
                            onTap: this.props.onOpenGraph
                        }, this.props.getOpenText))), this.createElement("div", {
                            class: n.const("active-arrow"),
                            didMount: this.didMountArrow.bind(this)
                        }, this.createElement("div", {
                            class: n.const("dcg-graphic")
                        })))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/syncing-status-bar", function () { }),
    function () {
        define("mygraphs/syncing-status-bar", ["require", "dcgview", "loadcss!./syncing-status-bar", "jquery"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                e("loadcss!./syncing-status-bar"),
                t = e("jquery"),
                r = n.Components.If,
                n.createClass({
                    template: function () {
                        return this.createElement("div", {
                            class: function (e) {
                                return function () {
                                    return {
                                        "syncing-status-bar": !0,
                                        visible: e.props.isSyncingGraphs() || e.props.didSyncFail()
                                    }
                                }
                            }(this)
                        }, this.createElement(r, {
                            predicate: this.props.isSyncingGraphs
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: n.const("syncing-status-text")
                                }, e.createElement("span", {
                                    class: n.const("dcg-pulse")
                                }, function () {
                                    return e.props.t("updating graphs...")
                                }))
                            }
                        }(this)), this.createElement(r, {
                            predicate: function (e) {
                                return function () {
                                    return !e.props.isSyncingGraphs() && !e.props.didSyncFail()
                                }
                            }(this)
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: n.const("success-status-text")
                                }, e.createElement("i", {
                                    class: n.const("dcg-icon-check")
                                }), n.const(" "), function () {
                                    return e.props.t("synced!")
                                })
                            }
                        }(this)), this.createElement(r, {
                            predicate: this.props.didSyncFail
                        }, function (e) {
                            return function () {
                                return e.createElement("div", {
                                    class: n.const("error-status-text"),
                                    onTap: e.props.requestSyncGraphs
                                }, function () {
                                    return e.props.t("offline. click to try again.")
                                })
                            }
                        }(this)))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/account-dropdown", function () { }),
    function () {
        define("mygraphs/account-dropdown", ["require", "dcgview", "loadcss!./account-dropdown", "jquery"], function (e) {
            var t, n, r;
            return n = e("dcgview"),
                e("loadcss!./account-dropdown"),
                t = e("jquery"),
                r = n.Components.If,
                n.createClass({
                    template: function () {
                        return this.createElement("div", {
                            class: function (e) {
                                return function () {
                                    return {
                                        "dcg-dropdown": !0,
                                        "dcg-is-open": e.props.isOpen()
                                    }
                                }
                            }(this)
                        }, this.createElement("div", {
                            role: n.const("link"),
                            tabindex: n.const(0),
                            class: n.const("dcg-dropdown-link"),
                            onTap: this.props.onEditAccount
                        }, function (e) {
                            return function () {
                                return e.props.t("Account Settings")
                            }
                        }(this)), this.createElement("div", {
                            role: n.const("link"),
                            tabindex: n.const(0),
                            onTap: this.props.onLogout,
                            class: n.const("dcg-dropdown-link")
                        }, function (e) {
                            return function () {
                                return e.props.t("Sign Out")
                            }
                        }(this)), this.createElement("div", {
                            class: n.const("dcg-mygraphs-legal")
                        }, this.createElement("a", {
                            href: n.const("https://www.desmos.com/terms"),
                            target: n.const("_blank")
                        }, function (e) {
                            return function () {
                                return e.props.t("Terms of Service")
                            }
                        }(this)), n.const("|"), this.createElement("a", {
                            href: n.const("https://www.desmos.com/privacy"),
                            target: n.const("_blank")
                        }, function (e) {
                            return function () {
                                return e.props.t("Privacy Policy")
                            }
                        }(this))))
                    }
                })
        })
    }
        .call(this),
    define("loadcss!mygraphs/account-reminder", function () { }),
    function () {
        define("mygraphs/account-reminder", ["require", "dcgview", "jquery", "loadcss!./account-reminder"], function (e) {
            var t, n;
            return n = e("dcgview"),
                t = e("jquery"),
                e("loadcss!./account-reminder"),
                n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.t = this.controller.t,
                            this.createElement("div", {
                                class: n.const("dcg-account-reminder")
                            }, this.createElement("a", {
                                role: n.const("link"),
                                tabindex: n.const(0),
                                class: n.const("dcg-btn-light-gray dcg-action-createaccount"),
                                onTap: this.props.onCreateAccount
                            }, function (e) {
                                return function () {
                                    return e.t("Create Account")
                                }
                            }(this)), function (e) {
                                return function () {
                                    return e.t("or")
                                }
                            }(this), this.createElement("a", {
                                role: n.const("link"),
                                tabindex: n.const(0),
                                class: n.const("dcg-action-login"),
                                onTap: this.props.onSignIn
                            }, function (e) {
                                return function () {
                                    return e.t("Sign In")
                                }
                            }(this)), this.createElement("div", null, function (e) {
                                return function () {
                                    return e.getToSaveYourText()
                                }
                            }(this)))
                    },
                    getToSaveYourText: function () {
                        return "graphing" === this.controller.product ? this.t("to save your graphs!") : "geometry" === this.controller.product ? this.t("to save your constructions!") : void 0
                    }
                })
        })
    }
        .call(this),
    function () {
        define("mygraphs/mygraphs", ["require", "loadcss!./mygraphs", "jquery", "underscore", "dcgview", "mygraphs/item", "mygraphs/graph-in-progress", "mygraphs/user-bar", "mygraphs/graph-preview", "mygraphs/syncing-status-bar", "mygraphs/account-dropdown", "mygraphs/account-reminder", "mygraphs/load-graph-view", "scroll_helpers", "lib/animation-frame", "keys"], function (e) {
            var t, n, r, i, o, s, a, c, l, u, d, p, h, f, m, g, y, v, b, x, w;
            return e("loadcss!./mygraphs"),
                t = e("jquery"),
                b = e("underscore"),
                o = e("dcgview"),
                x = o.Components,
                p = x.If,
                l = x.For,
                h = e("mygraphs/item"),
                u = e("mygraphs/graph-in-progress"),
                v = e("mygraphs/user-bar"),
                d = e("mygraphs/graph-preview"),
                y = e("mygraphs/syncing-status-bar"),
                n = e("mygraphs/account-dropdown"),
                r = e("mygraphs/account-reminder"),
                m = e("mygraphs/load-graph-view"),
                w = e("scroll_helpers"),
                i = e("lib/animation-frame"),
                s = 0,
                c = 1,
                g = 2,
                f = e("keys"),
                a = 50,
                o.createClass({
                    didUpdate: function () {
                        if (this.previewGraph && w.scrollVisible(t(this.getSelectedNode()), this.$scrollableNode, 60))
                            return this.update()
                    },
                    didMountScrollable: function (e) {
                        var n;
                        return this.$scrollableNode = t(e),
                            this.$scrollableNode.on("focusin", function (e) {
                                return function (n) {
                                    if (null != e.previewGraph && !t(n.target).hasClass("graph-link"))
                                        return e.previewItem(null)
                                }
                            }(this)),
                            t(window).on("keydown", function (e) {
                                return function (t) {
                                    if (!e.props.isOpen())
                                        return !0;
                                    switch (f.lookup(t)) {
                                        case f.UP:
                                            return e.selectUp(t);
                                        case f.DOWN:
                                            return e.selectDown(t)
                                    }
                                }
                            }(this)),
                            n = b.throttle(this.hidePreviewIfTooScrolled.bind(this), 200),
                            this.$scrollableNode.on("scroll", n),
                            this.debouncedFetchSelectedGraph = b.debounce(this.fetchSelectedGraph.bind(this), 200)
                    },
                    fetchSelectedGraph: function () {
                        return this.props.graphsController().loadDataForGraph(this.previewGraph)
                    },
                    hidePreviewIfTooScrolled: function () {
                        var e, n, r, i;
                        if (null != this.previewGraph)
                            return n = t(this.getSelectedNode()),
                                e = t(this.findRootNode()).find(".active-arrow"),
                                i = n.offset().top + .5 * n.height(),
                                r = e.offset().top,
                                Math.abs(i - r) > 10 ? this.previewItem(null) : void 0
                    },
                    toggleDropdown: function () {
                        return this.state === c ? this.state = s : this.state = c,
                            this.previewItem(null)
                    },
                    openSearch: function () {
                        return this.state = g,
                            this.previewItem(null)
                    },
                    closeSearch: function () {
                        return this.state = s,
                            this.previewItem(null)
                    },
                    updateFilter: function (e) {
                        return this.filter = e,
                            this.update()
                    },
                    getMaxGraphs: function () {
                        return this.maxGraphs || a
                    },
                    getCountRemaining: function () {
                        return this.getSavedGraphs().length - this.getMaxGraphs()
                    },
                    showMoreGraphs: function (e) {
                        var t, n, r;
                        if (r = this.getMaxGraphs(),
                            this.getCountRemaining() < 2 * r ? this.maxGraphs = Infinity : this.maxGraphs = 2 * r,
                            this.update(),
                            "keyboard" === (null != e ? e.device : void 0) && (t = this.getSavedAndExampleGraphs(),
                                n = null != t ? t[r] : void 0))
                            return this.previewItem(n)
                    },
                    getSelectedNode: function () {
                        return t(".dcg-mygraphs .graph-link-container.dcg-selected")[0]
                    },
                    selectUp: function (e) {
                        var t, n, r, i, o, s;
                        if (null != this.previewGraph && (e.preventDefault(),
                            t = this.getSavedAndExampleGraphs(),
                            t.length))
                            return n = null != (o = this.previewGraph) ? o.hash : void 0,
                                r = b.indexOf(b.pluck(t, "hash"), n),
                                i = null != t ? t[r - 1] : void 0,
                                i ? i ? this.previewItem(i) : void 0 : null != (s = this.$newGraph) ? s.focus() : void 0
                    },
                    selectDown: function (e) {
                        var t, n, r, i, o;
                        if (null != this.previewGraph && (t = this.getSavedAndExampleGraphs(),
                            t.length))
                            return e.preventDefault(),
                                n = null != (o = this.previewGraph) ? o.hash : void 0,
                                r = b.indexOf(b.pluck(t, "hash"), n),
                                i = null != t ? t[r + 1] : void 0,
                                i ? (!i.example && r + 1 >= this.getMaxGraphs() && this.showMoreGraphs(),
                                    this.previewItem(i)) : void 0
                    },
                    getFilter: function () {
                        var e;
                        return this.state === g && null != (e = this.filter) ? e : ""
                    },
                    getSavedGraphs: function () {
                        return this.props.graphsController().getSavedGraphs()
                    },
                    getExampleGraphs: function () {
                        return this.props.graphsController().getExampleGraphs()
                    },
                    getSavedAndExampleGraphs: function () {
                        return this.props.graphsController().getSavedAndExampleGraphs()
                    },
                    filterGraphs: function (e) {
                        var t;
                        return t = this.getFilter().toLowerCase(),
                            t ? e.filter(function (e) {
                                return function (n) {
                                    var r;
                                    return r = e.sanitizeTitle(n.title).toLowerCase(),
                                        r.indexOf(t) >= 0
                                }
                            }(this)) : e
                    },
                    sliceGraphs: function (e) {
                        return e.slice(0, this.getMaxGraphs())
                    },
                    canShowMore: function (e) {
                        return e.length > this.getMaxGraphs()
                    },
                    onFocusGraph: function (e) {
                        if (!this.skipPreview())
                            return this.previewItem(e)
                    },
                    onTapGraph: function (e, t) {
                        return this.skipPreview() || "keyboard" === t.device ? this.openGraphWithCover(e) : this.previewGraph !== e ? this.previewItem(e) : void 0
                    },
                    previewItem: function (e) {
                        return this.previewGraph && (this.previewGraph = null),
                            e && (this.previewGraph = e,
                                this.debouncedFetchSelectedGraph()),
                            this.update()
                    },
                    skipPreview: function () {
                        var e;
                        return t("body").width() < 650 || "ios" === (e = window.platform) || "android" === e
                    },
                    onOpenPreviewGraph: function () {
                        var e;
                        if (null != this.previewGraph)
                            return e = this.previewGraph,
                                this.previewItem(null),
                                this.props.onOpenGraph(e)
                    },
                    openGraphWithCover: function (e) {
                        if (this.graphWithCover = e,
                            this.previewItem(null),
                            null != e)
                            return setTimeout(function (t) {
                                return function () {
                                    return t.props.graphsController().loadGraphImmediately(e).done(function () {
                                        if (null != t.graphWithCover)
                                            return t.props.openGraphBehindCover(e).then(function () {
                                                return t.graphWithCover = null,
                                                    t.update()
                                            })
                                    }).always(function () {
                                        return t.update()
                                    })
                                }
                            }(this), 250)
                    },
                    cancelLoadGraphWithCover: function () {
                        return this.graphWithCover = null,
                            this.update()
                    },
                    didDataLoadFail: function (e) {
                        return this.props.graphsController().didDataLoadFail(e)
                    },
                    willUpdate: function () {
                        if (!this.props.isOpen() || !this.userController.isLoggedIn())
                            return this.state = s
                    },
                    didMountNewGraph: function (e) {
                        return this.$newGraph = t(e),
                            this.$newGraph.on("keydown", function (e) {
                                return function (t) {
                                    var n;
                                    if (f.lookup(t) === f.DOWN)
                                        return n = e.getSavedAndExampleGraphs(),
                                            e.previewItem(n[0]),
                                            t.preventDefault(),
                                            t.stopPropagation()
                                }
                            }(this))
                    },
                    sanitizeTitle: function (e) {
                        return e || this.graphsController.getUntitledString()
                    },
                    template: function () {
                        return this.state = s,
                            this.controller = this.props.controller(),
                            this.userController = this.controller.userController,
                            this.graphsController = this.controller.graphsController,
                            this.t = this.controller.t,
                            this.unpack = this.controller.unpack,
                            this.createElement("div", {
                                class: function (e) {
                                    return function () {
                                        return {
                                            "dcg-mygraphs": !0,
                                            "logged-in": e.userController.isLoggedIn(),
                                            "preview-mode": !!e.props.previewMode(),
                                            "maintenance-mode": !!e.props.maintenanceMode()
                                        }
                                    }
                                }(this)
                            }, this.createElement("div", {
                                class: o.const("dcg-resources-container")
                            }, this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.props.accountsEnabled() && !e.userController.isLoggedIn() && !e.props.previewMode() && !e.props.maintenanceMode()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(r, {
                                        onCreateAccount: e.props.onCreateAccount,
                                        onSignIn: e.props.onSignIn,
                                        controller: e.props.controller
                                    })
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", null, e.createElement(p, {
                                        predicate: function () {
                                            return e.userController.isLoggedIn() && e.state === s
                                        }
                                    }, function () {
                                        return e.createElement(y, {
                                            isSyncingGraphs: function () {
                                                return e.props.graphsController().isSyncing()
                                            },
                                            didSyncFail: function () {
                                                return e.props.graphsController().didSyncFail()
                                            },
                                            requestSyncGraphs: e.props.refreshGraphs,
                                            t: e.t.bind(e)
                                        })
                                    }), e.createElement(v, {
                                        controller: e.props.controller,
                                        isDropdownOpen: function () {
                                            return e.state === c
                                        },
                                        toggleDropdown: e.toggleDropdown.bind(e),
                                        openSearch: e.openSearch.bind(e),
                                        closeSearch: e.closeSearch.bind(e),
                                        updateFilter: e.updateFilter.bind(e),
                                        isSearching: function () {
                                            return e.state === g
                                        },
                                        t: e.t.bind(e)
                                    }))
                                }
                            }(this)), this.createElement("div", {
                                class: o.const("dcg-scrollable"),
                                didMount: this.didMountScrollable.bind(this)
                            }, this.createElement("div", {
                                class: o.const("dcg-scrollable-interior")
                            }, this.createElement(p, {
                                predicate: this.props.maintenanceMode
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: o.const("maintenance-mode")
                                    }, function () {
                                        return e.t("Desmos is temporarily in maintenance mode. You can open example graphs, but won't be able to sign in, open your graphs, or save any changes. We're so sorry for the inconvenience.")
                                    })
                                }
                            }(this)), this.createElement(p, {
                                predicate: this.props.previewMode
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: o.const("maintenance-mode")
                                    }, function () {
                                        var t;
                                        return null != (t = e.props.previewMode()) ? t.message : void 0
                                    }, e.createElement("br", null), e.createElement("a", {
                                        role: o.const("link"),
                                        tabindex: o.const(0),
                                        class: o.const("dcg-btn-green"),
                                        href: function () {
                                            var t;
                                            return null != (t = e.props.previewMode()) ? t.url : void 0
                                        },
                                        target: o.const("_blank")
                                    }, function () {
                                        return e.t("Share your thoughts!")
                                    }))
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.state !== g
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        role: o.const("link"),
                                        tabindex: o.const(0),
                                        class: o.const("new-blank-graph dcg-action-newblankgraph"),
                                        onTap: function () {
                                            return e.previewItem(null),
                                                e.props.openBlankGraph()
                                        },
                                        didMount: e.didMountNewGraph.bind(e)
                                    }, e.createElement("div", {
                                        class: o.const("new-blank-graph-inner")
                                    }, e.createElement("span", {
                                        class: o.const("dcg-add-blank")
                                    }, o.const("+")), o.const(" "), function () {
                                        return "geometry" === e.props.controller().getProduct() ? e.t("New Construction") : e.t("New Blank Graph")
                                    }))
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return !e.props.maintenanceMode() && !e.props.previewMode() && e.userController.isLoggedIn() && e.state !== g
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", null, e.createElement("div", {
                                        role: o.const("heading"),
                                        "aria-level": o.const("1"),
                                        class: o.const("dcg-mygraphs-section-title")
                                    }, function () {
                                        return "geometry" === e.props.controller().getProduct() ? e.t("Current Construction") : e.t("Current Graph")
                                    }), e.createElement(u, {
                                        getTitle: function () {
                                            return e.getPreviewTitle()
                                        },
                                        getDisplayDate: function () {
                                            return e.unpack(e.props.graphsController().getCurrentDisplayDate())
                                        },
                                        isOpen: e.props.isOpen,
                                        getThumbnail: e.props.getThumbnail,
                                        didGraphChange: e.props.didGraphChange,
                                        simpleSave: function () {
                                            return e.props.simpleSave(),
                                                e.previewItem(null)
                                        },
                                        openSaveDialog: function () {
                                            return e.props.openSaveDialog(),
                                                e.previewItem(null)
                                        },
                                        wasCurrentGraphEverSaved: function () {
                                            return e.props.graphsController().wasCurrentGraphEverSaved()
                                        },
                                        isSaving: function () {
                                            return e.props.graphsController().isSaving()
                                        },
                                        didSaveRecentlySucceed: function () {
                                            return e.props.graphsController().didSaveSucceed()
                                        },
                                        didSaveRecentlyFail: function () {
                                            return e.props.graphsController().didSaveFail()
                                        },
                                        t: e.t.bind(e)
                                    }))
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        role: o.const("heading"),
                                        "aria-level": o.const("1"),
                                        class: o.const("dcg-mygraphs-section-title")
                                    }, function () {
                                        return "geometry" === e.props.controller().getProduct() ? e.t("Saved Constructions") : e.t("Saved Graphs")
                                    })
                                }
                            }(this)), this.createElement(l, {
                                each: function (e) {
                                    return function () {
                                        return e.sliceGraphs(e.filterGraphs(e.getSavedGraphs()))
                                    }
                                }(this),
                                key: function (e) {
                                    return e.getCollectionKey()
                                }
                            }, this.createElement("div", null, function (e) {
                                return function (t, n) {
                                    return e.createElement(h, {
                                        onTap: function (n) {
                                            return e.onTapGraph(t, n)
                                        },
                                        onFocus: function () {
                                            return e.onFocusGraph(t)
                                        },
                                        cancelDeleteGraph: function () {
                                            return e.props.graphsController().cancelDeleteGraph(t)
                                        },
                                        requestDeleteGraph: function () {
                                            return e.previewItem(null),
                                                e.props.graphsController().requestDeleteGraph(t)
                                        },
                                        isDeletingGraph: function () {
                                            return e.props.graphsController().isDeletingGraph(t)
                                        },
                                        canCancelDelete: function () {
                                            return e.props.graphsController().canCancelDelete(t)
                                        },
                                        didDeleteGraphFail: function () {
                                            return e.props.graphsController().didDeleteGraphFail(t)
                                        },
                                        isSelected: function () {
                                            return t === e.previewGraph
                                        },
                                        isExample: o.const(!1),
                                        getDisplayDate: function () {
                                            return e.unpack(t.displayDate())
                                        },
                                        getTitle: function () {
                                            return e.sanitizeTitle(t.title)
                                        },
                                        getThumbURL: function () {
                                            return t.thumbURL
                                        },
                                        t: e.t.bind(e)
                                    })
                                }
                            }(this))), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn() && 0 === e.filterGraphs(e.getSavedGraphs()).length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        "aria-live": o.const("assertive"),
                                        "aria-atomic": o.const("true"),
                                        class: o.const("no-matches")
                                    }, function () {
                                        return e.state === g ? e.t("No saved graphs match your search.") : e.t("No saved graphs yet.")
                                    })
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.canShowMore(e.filterGraphs(e.getSavedGraphs()))
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: o.const("dcg-show-more-graphs"),
                                        onTap: e.showMoreGraphs.bind(e),
                                        role: o.const("button"),
                                        tabindex: o.const(0)
                                    }, function () {
                                        return e.t("__count__ more...", {
                                            count: e.getCountRemaining()
                                        })
                                    })
                                }
                            }(this)), this.createElement("div", {
                                role: o.const("heading"),
                                "aria-level": o.const("1"),
                                class: o.const("dcg-mygraphs-section-title")
                            }, function (e) {
                                return function () {
                                    return e.t("Examples")
                                }
                            }(this)), this.createElement(l, {
                                each: function (e) {
                                    return function () {
                                        return e.filterGraphs(e.getExampleGraphs())
                                    }
                                }(this),
                                key: function (e) {
                                    return e.getCollectionKey()
                                }
                            }, this.createElement("div", null, function (e) {
                                return function (t, n) {
                                    return e.createElement(h, {
                                        onTap: function (n) {
                                            return e.onTapGraph(t, n)
                                        },
                                        onFocus: function () {
                                            return e.onFocusGraph(t)
                                        },
                                        cancelDeleteGraph: function () { },
                                        requestDeleteGraph: function () { },
                                        isDeletingGraph: o.const(!1),
                                        didDeleteGraphFail: o.const(!1),
                                        canCancelDelete: o.const(!1),
                                        isSelected: function () {
                                            return t === e.previewGraph
                                        },
                                        isExample: o.const(!0),
                                        getDisplayDate: function () {
                                            return e.unpack(t.displayDate())
                                        },
                                        getTitle: function () {
                                            return e.sanitizeTitle(t.title)
                                        },
                                        getThumbURL: function () {
                                            return t.thumbURL
                                        },
                                        t: e.t.bind(e)
                                    })
                                }
                            }(this))), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.getFilter() && 0 === e.filterGraphs(e.getExampleGraphs()).length
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        "aria-live": o.const("assertive"),
                                        "aria-atomic": o.const("true"),
                                        class: o.const("no-matches")
                                    }, function () {
                                        return e.t("No examples match your search.")
                                    })
                                }
                            }(this)), this.createElement("div", {
                                class: o.const("dcg-mygraphs-legal")
                            }, this.createElement("a", {
                                href: o.const("https://www.desmos.com/terms"),
                                target: o.const("_blank")
                            }, function (e) {
                                return function () {
                                    return e.t("Terms of Service")
                                }
                            }(this)), o.const("|"), this.createElement("a", {
                                href: o.const("https://www.desmos.com/privacy"),
                                target: o.const("_blank")
                            }, function (e) {
                                return function () {
                                    return e.t("Privacy Policy")
                                }
                            }(this)), this.createElement(p, {
                                predicate: this.props.versionNumber
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: o.const("dcg-version")
                                    }, o.const("Version "), e.props.versionNumber)
                                }
                            }(this))))), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.previewGraph
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement(d, {
                                        alignToNode: function () {
                                            return e.getSelectedNode()
                                        },
                                        getTitle: function () {
                                            if (null != e.previewGraph)
                                                return e.sanitizeTitle(e.previewGraph.title)
                                        },
                                        getDisplayDate: function () {
                                            var t;
                                            return e.unpack(null != (t = e.previewGraph) ? t.displayDate() : void 0)
                                        },
                                        getGraphData: function () {
                                            var t;
                                            return null != (t = e.previewGraph) ? t.graphData : void 0
                                        },
                                        onCancel: function () {
                                            return e.previewItem(null)
                                        },
                                        didDataLoadFail: function () {
                                            return e.didDataLoadFail(e.previewGraph)
                                        },
                                        requestLoadGraphData: e.fetchSelectedGraph.bind(e),
                                        onOpenGraph: e.onOpenPreviewGraph.bind(e),
                                        t: e.t.bind(e),
                                        makeAPI: e.props.makeAPI,
                                        getOpenText: function () {
                                            return e.controller.getOpenText()
                                        }
                                    })
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn()
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", null, e.createElement(p, {
                                        predicate: function () {
                                            return e.userController.isLoggedIn() && e.state === s
                                        }
                                    }, function () {
                                        return e.createElement(y, {
                                            isSyncingGraphs: function () {
                                                return e.props.graphsController().isSyncing()
                                            },
                                            didSyncFail: function () {
                                                return e.props.graphsController().didSyncFail()
                                            },
                                            requestSyncGraphs: e.props.refreshGraphs,
                                            t: e.t.bind(e)
                                        })
                                    }), e.createElement(n, {
                                        isOpen: function () {
                                            return e.state === c
                                        },
                                        onEditAccount: e.props.onEditAccount,
                                        onLogout: e.props.onLogout,
                                        t: e.t.bind(e)
                                    }))
                                }
                            }(this))), this.createElement(p, {
                                predicate: this.props.isOpen
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        role: o.const("link"),
                                        tabindex: o.const(0),
                                        class: o.const("dcg-resources-cover dcg-action-close-resources"),
                                        style: function () {
                                            return {
                                                opacity: null != e.previewGraph ? .6 : 0
                                            }
                                        },
                                        onTap: function () {
                                            return null != e.previewGraph ? e.previewItem(null) : e.props.closeDrawer()
                                        },
                                        "aria-label": function () {
                                            return null != e.previewGraph ? e.t("Close Graph Preview") : e.t("Close Graph List")
                                        }
                                    })
                                }
                            }(this)), this.createElement(p, {
                                predicate: function (e) {
                                    return function () {
                                        return null != e.graphWithCover
                                    }
                                }(this)
                            }, function (e) {
                                return function () {
                                    return e.createElement("div", {
                                        class: o.const("dcg-fullscreen-loading-container")
                                    }, e.createElement(p, {
                                        predicate: function () {
                                            var t;
                                            return null != (null != (t = e.graphWithCover) ? t.graphData : void 0)
                                        }
                                    }, function () {
                                        return e.createElement("div", {
                                            "aria-live": o.const("assertive"),
                                            "aria-atomic": o.const("true"),
                                            class: o.const("dcg-graph-loading")
                                        }, e.createElement("div", {
                                            class: o.const("pulsing-message")
                                        }, function () {
                                            return e.t("Opening...")
                                        }), e.createElement("div", {
                                            class: o.const("slow-loading")
                                        }, function () {
                                            return e.getSlowLoadingText()
                                        }))
                                    }), e.createElement(p, {
                                        predicate: function () {
                                            var t;
                                            return !(null != (null != (t = e.graphWithCover) ? t.graphData : void 0))
                                        }
                                    }, function () {
                                        return e.createElement(m, {
                                            didDataLoadFail: function () {
                                                return e.didDataLoadFail(e.graphWithCover)
                                            },
                                            onCancel: e.cancelLoadGraphWithCover.bind(e),
                                            requestLoadGraphData: function () {
                                                return e.openGraphWithCover(e.graphWithCover)
                                            },
                                            t: e.t.bind(e)
                                        })
                                    }))
                                }
                            }(this)))
                    },
                    getPreviewTitle: function () {
                        return this.graphsController.getCurrentGraphTitle() || this.graphsController.getUntitledString()
                    },
                    getSlowLoadingText: function () {
                        return "graphing" === this.graphsController.product ? this.t("This can take a little while for big graphs...") : "geometry" === this.graphsController.product ? this.t("This can take a little while for big constructions...") : void 0
                    }
                })
        })
    }
        .call(this),
    define("vendor/fake-xml-http-request", [], function () {
        function e(e) {
            var t;
            if ("undefined" != typeof DOMParser) {
                var n = new DOMParser;
                t = n.parseFromString(e, "text/xml")
            } else
                t = new ActiveXObject("Microsoft.XMLDOM"),
                    t.async = "false",
                    t.loadXML(e);
            return t
        }
        function t(e, t) {
            t.addEventListener(e, function (n) {
                var r = t["on" + e];
                r && "function" == typeof r && r.call(n.target, n)
            })
        }
        function n() {
            this._eventListeners = {};
            for (var e = ["loadstart", "progress", "load", "abort", "loadend"], n = e.length - 1; n >= 0; n--)
                t(e[n], this)
        }
        function r() {
            n.call(this),
                this.readyState = r.UNSENT,
                this.requestHeaders = {},
                this.requestBody = null,
                this.status = 0,
                this.statusText = "",
                this.upload = new n
        }
        function i(e) {
            if (e.readyState !== r.OPENED)
                throw new Error("INVALID_STATE_ERR");
            if (e.sendFlag)
                throw new Error("INVALID_STATE_ERR")
        }
        function o(e) {
            if (e.readyState == r.DONE)
                throw new Error("Request done")
        }
        function s(e) {
            if (e.async && e.readyState != r.HEADERS_RECEIVED)
                throw new Error("No headers received")
        }
        function a(e) {
            if ("string" != typeof e) {
                var t = new Error("Attempted to respond to fake XMLHttpRequest with " + e + ", which is not a string.");
                throw t.name = "InvalidBodyException",
                t
            }
        }
        var c = function (e, t, n, r) {
            this.type = e,
                this.bubbles = t,
                this.cancelable = n,
                this.target = r
        };
        c.prototype = {
            stopPropagation: function () { },
            preventDefault: function () {
                this.defaultPrevented = !0
            }
        };
        var l = {
            100: "Continue",
            101: "Switching Protocols",
            200: "OK",
            201: "Created",
            202: "Accepted",
            203: "Non-Authoritative Information",
            204: "No Content",
            205: "Reset Content",
            206: "Partial Content",
            300: "Multiple Choice",
            301: "Moved Permanently",
            302: "Found",
            303: "See Other",
            304: "Not Modified",
            305: "Use Proxy",
            307: "Temporary Redirect",
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            407: "Proxy Authentication Required",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            411: "Length Required",
            412: "Precondition Failed",
            413: "Request Entity Too Large",
            414: "Request-URI Too Long",
            415: "Unsupported Media Type",
            416: "Requested Range Not Satisfiable",
            417: "Expectation Failed",
            422: "Unprocessable Entity",
            500: "Internal Server Error",
            501: "Not Implemented",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout",
            505: "HTTP Version Not Supported"
        }
            , u = {
                "Accept-Charset": !0,
                "Accept-Encoding": !0,
                Connection: !0,
                "Content-Length": !0,
                Cookie: !0,
                Cookie2: !0,
                "Content-Transfer-Encoding": !0,
                Date: !0,
                Expect: !0,
                Host: !0,
                "Keep-Alive": !0,
                Referer: !0,
                TE: !0,
                Trailer: !0,
                "Transfer-Encoding": !0,
                Upgrade: !0,
                "User-Agent": !0,
                Via: !0
            };
        n.prototype = {
            addEventListener: function (e, t) {
                this._eventListeners[e] = this._eventListeners[e] || [],
                    this._eventListeners[e].push(t)
            },
            removeEventListener: function (e, t) {
                for (var n = this._eventListeners[e] || [], r = 0, i = n.length; r < i; ++r)
                    if (n[r] == t)
                        return n.splice(r, 1)
            },
            dispatchEvent: function (e) {
                for (var t = e.type, n = this._eventListeners[t] || [], r = 0; r < n.length; r++)
                    "function" == typeof n[r] ? n[r].call(this, e) : n[r].handleEvent(e);
                return !!e.defaultPrevented
            },
            _progress: function (e, t, n) {
                var r = new c("progress");
                r.target = this,
                    r.lengthComputable = e,
                    r.loaded = t,
                    r.total = n,
                    this.dispatchEvent(r)
            }
        },
            r.prototype = new n,
            r.UNSENT = 0,
            r.OPENED = 1,
            r.HEADERS_RECEIVED = 2,
            r.LOADING = 3,
            r.DONE = 4;
        var d = {
            UNSENT: 0,
            OPENED: 1,
            HEADERS_RECEIVED: 2,
            LOADING: 3,
            DONE: 4,
            async: !0,
            withCredentials: !1,
            open: function (e, t, n, i, o) {
                this.method = e,
                    this.url = t,
                    this.async = "boolean" != typeof n || n,
                    this.username = i,
                    this.password = o,
                    this.responseText = null,
                    this.responseXML = null,
                    this.requestHeaders = {},
                    this.sendFlag = !1,
                    this._readyStateChange(r.OPENED)
            },
            setRequestHeader: function (e, t) {
                if (i(this),
                    u[e] || /^(Sec-|Proxy-)/.test(e))
                    throw new Error('Refused to set unsafe header "' + e + '"');
                this.requestHeaders[e] ? this.requestHeaders[e] += "," + t : this.requestHeaders[e] = t
            },
            send: function (e) {
                if (i(this),
                    !/^(get|head)$/i.test(this.method)) {
                    var t = !1;
                    Object.keys(this.requestHeaders).forEach(function (e) {
                        "content-type" === e.toLowerCase() && (t = !0)
                    }),
                        t || (e || "").toString().match("FormData") || (this.requestHeaders["Content-Type"] = "text/plain;charset=UTF-8"),
                        this.requestBody = e
                }
                this.errorFlag = !1,
                    this.sendFlag = this.async,
                    this._readyStateChange(r.OPENED),
                    "function" == typeof this.onSend && this.onSend(this),
                    this.dispatchEvent(new c("loadstart", !1, !1, this)),
                    r.onSend && r.onSend(this)
            },
            abort: function () {
                this.aborted = !0,
                    this.responseText = null,
                    this.errorFlag = !0,
                    this.requestHeaders = {},
                    this.readyState > r.UNSENT && this.sendFlag && (this._readyStateChange(r.DONE),
                        this.sendFlag = !1),
                    this.readyState = r.UNSENT,
                    this.dispatchEvent(new c("abort", !1, !1, this)),
                    "function" == typeof this.onerror && this.onerror()
            },
            getResponseHeader: function (e) {
                if (this.readyState < r.HEADERS_RECEIVED)
                    return null;
                if (/^Set-Cookie2?$/i.test(e))
                    return null;
                e = e.toLowerCase();
                for (var t in this.responseHeaders)
                    if (t.toLowerCase() == e)
                        return this.responseHeaders[t];
                return null
            },
            getAllResponseHeaders: function () {
                if (this.readyState < r.HEADERS_RECEIVED)
                    return "";
                var e = "";
                for (var t in this.responseHeaders)
                    this.responseHeaders.hasOwnProperty(t) && !/^Set-Cookie2?$/i.test(t) && (e += t + ": " + this.responseHeaders[t] + "\r\n");
                return e
            },
            overrideMimeType: function (e) {
                "string" == typeof e && (this.forceMimeType = e.toLowerCase())
            },
            _readyStateChange: function (e) {
                this.readyState = e,
                    "function" == typeof this.onreadystatechange && this.onreadystatechange(new c("readystatechange")),
                    this.dispatchEvent(new c("readystatechange")),
                    this.readyState == r.DONE && (this.dispatchEvent(new c("load", !1, !1, this)),
                        this.dispatchEvent(new c("loadend", !1, !1, this)))
            },
            _setResponseHeaders: function (e) {
                this.responseHeaders = {};
                for (var t in e)
                    e.hasOwnProperty(t) && (this.responseHeaders[t] = e[t]);
                this.forceMimeType && (this.responseHeaders["Content-Type"] = this.forceMimeType),
                    this.async ? this._readyStateChange(r.HEADERS_RECEIVED) : this.readyState = r.HEADERS_RECEIVED
            },
            _setResponseBody: function (t) {
                o(this),
                    s(this),
                    a(t);
                var n = this.chunkSize || 10
                    , i = 0;
                this.responseText = "";
                do
                    this.async && this._readyStateChange(r.LOADING),
                        this.responseText += t.substring(i, i + n),
                        i += n;
                while (i < t.length); var c = this.getResponseHeader("Content-Type");
                if (this.responseText && (!c || /(text\/xml)|(application\/xml)|(\+xml)/.test(c)))
                    try {
                        this.responseXML = e(this.responseText)
                    } catch (e) { }
                this.async ? this._readyStateChange(r.DONE) : this.readyState = r.DONE
            },
            respond: function (e, t, n) {
                this._setResponseHeaders(t || {}),
                    this.status = "number" == typeof e ? e : 200,
                    this.statusText = l[this.status],
                    this._setResponseBody(n || "")
            }
        };
        for (var p in d)
            r.prototype[p] = d[p];
        return r
    }),
    define("lib/app-bridge", ["require", "jquery", "underscore_model", "browser", "lib/conditional_blur", "vendor/fake-xml-http-request", "pjs", "console"], function (e) {
        function t() {
            window.XMLHttpRequest = s,
                s.onSend = function (e) {
                    var t = h + "";
                    h += 1,
                        p[t] = e,
                        a.methods.proxyXHR(JSON.stringify({
                            id: t,
                            url: e.url,
                            method: e.method,
                            headers: e.requestHeaders,
                            body: e.requestBody
                        }))
                }
        }
        var n = e("jquery")
            , r = e("underscore_model")
            , i = e("browser")
            , o = e("lib/conditional_blur").default
            , s = e("vendor/fake-xml-http-request")
            , a = null
            , c = null
            , l = e("pjs")
            , u = e("console")
            , d = !1
            , p = {}
            , h = 0;
        if (i.IS_IOS) {
            var f = []
                , m = []
                , g = function (e) {
                    var t = m.length ? m.pop() : f.length;
                    return f[t] = e,
                        t
                }
                , y = function (e) {
                    var t = f[e];
                    return f[e] = null,
                        m.push(e),
                        t
                };
            a = {
                loaded: !1,
                methods: {},
                queuedMethodCalls: []
            },
                n(function () {
                    var e = [];
                    window.ObjC_callback = function (n) {
                        a.loaded = !0,
                            n.split(" ").forEach(function (t) {
                                a.methods[t] = function (n, i) {
                                    var o = i ? g(i) : -1;
                                    e.push("desmos:" + t + "/" + o + "/" + encodeURIComponent(n)),
                                        1 === e.length && r.attr("src", e[0])
                                }
                            }),
                            this.ObjC_callback = function (t, n) {
                                try {
                                    t !== -1 && y(t)(n)
                                } finally {
                                    e.shift(),
                                        e.length > 0 && r.attr("src", e[0])
                                }
                            }
                            ,
                            a.methods.proxyXHR && t(),
                            a.queuedMethodCalls.forEach(function (e) {
                                x[e.methodName].apply(x, e.args)
                            })
                    }
                        ;
                    var r = n('<iframe id="objc-bridge" style="position:absolute; left: -1000px; z-index: -1" src="desmos:loaded"/>').appendTo(document.body)
                })
        } else
            i.IS_ANDROID ? c = window.Android : d = !0;
        var v = l(r, function (e, t) {
            e.init = function () {
                t.init.call(this),
                    this.heartbeatTimeout = null,
                    this.observeEvent("started resumed", function (e) {
                        this.gaEvent(e + ":" + this.versionNumber),
                            this.incrementHeartbeat(0)
                    }
                        .bind(this))
            }
                ,
                e.heartbeat = function (e) {
                    clearTimeout(this.heartbeatTimeout),
                        this.gaEvent("heartbeat-" + 10 * e),
                        this.incrementHeartbeat(e)
                }
                ,
                e.incrementHeartbeat = function (e) {
                    clearTimeout(this.heartbeatTimeout),
                        this.heartbeatTimeout = setTimeout(function () {
                            this.heartbeat(e + 1)
                        }
                            .bind(this), 6e5)
                }
                ,
                e._started = function (e, t) {
                    this.appId = e,
                        this.versionNumber = t,
                        this.triggerEvent("started")
                }
                ,
                e._resumed = function () {
                    this.triggerEvent("resumed")
                }
                ,
                e.ensureKeypadClosedAndReturnIfWasOpened = function () {
                    return n(".dcg-keys-container.dcg-retracted").length > 0 ? "false" : (o(),
                        "true")
                }
                ,
                e.onGoogleAuthResult = function (e) {
                    this.triggerEvent("onGoogleAuthResult", e)
                }
                ,
                e.onObjCXHRProxyResult = function (e) {
                    var t = e.id
                        , n = p[t];
                    delete p[t],
                        n.respond(e.status, e.headers, e.body)
                }
        })
            , b = ["hideLoadingScreen", "gaEvent", "openGoogleLogin", "logout", "saveCookies", "deleteCookies"]
            , x = new v;
        return b.forEach(function (e) {
            x[e] = function () {
                d || (c ? c[e] ? c[e].apply(c, arguments) : u.log("call to missing Android method", e, arguments) : a && (a.loaded ? a.methods[e] ? a.methods[e].apply(a, arguments) : u.log("call to missing ObjC method", e, arguments) : a.queuedMethodCalls.push({
                    methodName: e,
                    args: arguments
                })))
            }
        }),
            d || (window.AppBridge = x),
            x
    }),
    function () {
        define("mygraphs/wrapper", ["require", "dcgview", "./mygraphs", "lib/app-bridge", "underscore"], function (e) {
            var t, n, r, i;
            return n = e("dcgview"),
                r = e("./mygraphs"),
                t = e("lib/app-bridge"),
                i = e("underscore"),
                n.createClass({
                    template: function () {
                        return this.controller = this.props.controller(),
                            this.dispatch = this.controller.dispatch,
                            this.graphsController = this.controller.graphsController,
                            this.userController = this.controller.userController,
                            this.mygraphsController = this.controller.mygraphsController,
                            this.createElement(r, {
                                isOpen: function (e) {
                                    return function () {
                                        return e.mygraphsController.isMygraphsOpen()
                                    }
                                }(this),
                                graphsController: function (e) {
                                    return function () {
                                        return e.graphsController
                                    }
                                }(this),
                                maintenanceMode: function (e) {
                                    return function () {
                                        return e.controller.isInMaintenanceMode()
                                    }
                                }(this),
                                previewMode: function (e) {
                                    return function () {
                                        return e.controller.getPreviewParams()
                                    }
                                }(this),
                                accountsEnabled: this.const(!0),
                                controller: function (e) {
                                    return function () {
                                        return e.controller
                                    }
                                }(this),
                                openDrawer: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "open-mygraphs"
                                        })
                                    }
                                }(this),
                                closeDrawer: function (e) {
                                    return function () {
                                        return e.dispatch({
                                            type: "close-mygraphs"
                                        })
                                    }
                                }(this),
                                openBlankGraph: function (e) {
                                    return function () {
                                        return e.mygraphsController.openBlankGraph()
                                    }
                                }(this),
                                onOpenGraph: function (e) {
                                    return function (t) {
                                        return e.mygraphsController.onOpenGraph(t)
                                    }
                                }(this),
                                openGraphBehindCover: function (e) {
                                    return function (t) {
                                        return e.mygraphsController.openGraphBehindCover(t)
                                    }
                                }(this),
                                onLogout: function (e) {
                                    return function () {
                                        return e.userController.logout()
                                    }
                                }(this),
                                onEditAccount: function (e) {
                                    return function () {
                                        return e.controller.dispatch({
                                            type: "edit-account"
                                        })
                                    }
                                }(this),
                                onCreateAccount: function (e) {
                                    return function () {
                                        return e.controller.dispatch({
                                            type: "create-account"
                                        })
                                    }
                                }(this),
                                onSignIn: function (e) {
                                    return function () {
                                        return e.controller.dispatch({
                                            type: "launch-login"
                                        })
                                    }
                                }(this),
                                refreshGraphs: function (e) {
                                    return function () {
                                        return e.graphsController.refreshGraphs()
                                    }
                                }(this),
                                getThumbnail: function (e) {
                                    return function () {
                                        return e.mygraphsController.getThumbnail()
                                    }
                                }(this),
                                simpleSave: function (e) {
                                    return function () {
                                        return e.controller.simpleSave()
                                    }
                                }(this),
                                openSaveDialog: function (e) {
                                    return function () {
                                        return e.controller.openSaveDialog()
                                    }
                                }(this),
                                versionNumber: function (e) {
                                    return function () {
                                        return t.versionNumber
                                    }
                                }(this),
                                didGraphChange: function (e) {
                                    return function () {
                                        return e.graphsController.hasUnsavedChanges()
                                    }
                                }(this),
                                makeAPI: this.props.makeAPI
                            })
                    }
                })
        })
    }
        .call(this),
    define("main/account_backend", ["require", "./backend", "jquery"], function (e) {
        var t = e("./backend")
            , n = e("jquery")
            , r = {
                logout: function () {
                    return t.post("/account/logout_xhr")
                },
                fetchUser: function (e) {
                    var n = function () {
                        return t.post("/account/login_xhr", e)
                    };
                    return this.logout().then(n, n).then(this.getUserInfo)
                },
                getUserInfo: function () {
                    return t.getJSON("/account/user_info")
                },
                askServerIfLoggedIn: function () {
                    var e = n.Deferred();
                    return t.getJSON("/account/user_info?no401").then(function (t) {
                        t && t.loggedIn === !1 ? e.reject(t) : e.resolve(t)
                    }, function (t) {
                        e.reject(t)
                    }),
                        e.promise()
                },
                checkPendingDeletion: function (e) {
                    return t.post("/account/check_account_status", e)
                },
                registerUser: function (e) {
                    return t.post("/account/register_xhr", e).then(this.getUserInfo)
                },
                editAccount: function (e) {
                    return t.post("/account/edit_account_xhr", e).then(this.getUserInfo)
                },
                setSubscriptions: function (e) {
                    return t.post("/account/change_subscriptions", {
                        subscriptions: e
                    }).then(this.getUserInfo)
                },
                setName: function (e) {
                    return t.post("/account/change_name", {
                        name: e
                    }).then(this.getUserInfo)
                },
                recoverPassword: function (e) {
                    return t.post("/account/recover_xhr", e)
                },
                initiateAccountDeletion: function () {
                    return t.getJSON("/account/initiate_delete_account")
                },
                initiateEmailChange: function () {
                    return t.getJSON("/account/initiate_email_change")
                },
                setEmail: function (e) {
                    return t.post("/account/set_email", e).then(this.getUserInfo)
                },
                verifyEmail: function (e) {
                    return t.post("/account/verify_email", {
                        email: e
                    })
                }
            };
        return r
    }),
    define("main/user_controller", ["require", "pjs", "jquery", "underscore_model", "main/account_backend", "lib/urlparser"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("underscore_model")
            , i = e("main/account_backend")
            , o = e("lib/urlparser")
            , s = t(r, function (e, t) {
                e.init = function () {
                    t.init.call(this);
                    var e = this;
                    n.ajaxSetup({
                        statusCode: {
                            401: function () {
                                e.logout()
                            }
                        }
                    }),
                        this.loggedIn = !1,
                        this.logoutFailed = !1,
                        this.loggingOut = !1,
                        this.name = "",
                        this.email = "",
                        this.verificationStatus = "",
                        this.subscriptions = []
                }
                    ,
                    e.desmosLogin = function (e) {
                        return i.fetchUser(e).done(this.completeLogin.bind(this))
                    }
                    ,
                    e.googleLogin = function (e) {
                        this.triggerEvent("googleLogin", e)
                    }
                    ,
                    e.askServerIfLoggedIn = function () {
                        return i.askServerIfLoggedIn().then(this.completeLogin.bind(this), this.logout.bind(this))
                    }
                    ,
                    e.driveCallback = function () {
                        return this.askServerIfLoggedIn()
                    }
                    ,
                    e.createAccount = function (e) {
                        return i.registerUser(e).done(this.completeLogin.bind(this))
                    }
                    ,
                    e.checkPendingDeletion = function (e) {
                        return i.checkPendingDeletion(e)
                    }
                    ,
                    e.editAccount = function (e) {
                        return i.editAccount(e).done(function (e) {
                            this.name = e.name || "",
                                this.email = e.email || "",
                                this.triggerEvent("userUpdated"),
                                this.triggerEvent("triggerRender")
                        }
                            .bind(this))
                    }
                    ,
                    e.setSubscriptions = function (e) {
                        return i.setSubscriptions(e).done(function (e) {
                            this.subscriptions = e.subscriptions || [],
                                this.triggerEvent("userUpdated"),
                                this.triggerEvent("triggerRender")
                        }
                            .bind(this))
                    }
                    ,
                    e.setName = function (e) {
                        return i.setName(e).done(function (e) {
                            this.name = e.name || "",
                                this.triggerEvent("userUpdated"),
                                this.triggerEvent("triggerRender")
                        }
                            .bind(this))
                    }
                    ,
                    e.recoverPassword = function (e) {
                        return i.recoverPassword(e)
                    }
                    ,
                    e.completeLogin = function (e, t) {
                        this.loggedIn = !0,
                            this.name = e.name || "",
                            this.email = e.email || "",
                            this.subscriptions = e.subscriptions || [],
                            this.verificationStatus = e.verificationStatus || "",
                            this.triggerEvent("loginChanged"),
                            this.triggerEvent("userUpdated"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.logout = function () {
                        return this.loggingOut = !0,
                            this.triggerEvent("logout"),
                            this.triggerEvent("triggerRender"),
                            i.logout().done(this.completeLogout.bind(this)).fail(this._onLogoutFailure.bind(this)).always(function () {
                                this.loggingOut = !1,
                                    this.triggerEvent("triggerRender")
                            }
                                .bind(this))
                    }
                    ,
                    e.completeLogout = function () {
                        this.loggedIn = !1,
                            this.logoutFailed = !1,
                            this.email = "",
                            this.name = "",
                            this.subscriptions = [],
                            this.verificationStatus = "",
                            this.triggerEvent("loginChanged"),
                            this.triggerEvent("userUpdated"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e._onLogoutFailure = function () {
                        this.logoutFailed = !0,
                            this.triggerEvent("triggerRender"),
                            setTimeout(function () {
                                this.logoutFailed = !1,
                                    this.triggerEvent("triggerRender")
                            }
                                .bind(this), 2e3)
                    }
                    ,
                    e.initiateAccountDeletion = function () {
                        return i.initiateAccountDeletion()
                    }
                    ,
                    e.getEmailChangeToken = function () {
                        return o.getParameter("changeToken")
                    }
                    ,
                    e.initiateEmailChange = function () {
                        return i.initiateEmailChange()
                    }
                    ,
                    e.setEmail = function (e) {
                        return i.setEmail(e).done(function () {
                            this.email = e.newEmail || "",
                                this.verificationStatus = "VERIFYING",
                                this.triggerEvent("userUpdated"),
                                this.triggerEvent("triggerRender")
                        }
                            .bind(this))
                    }
                    ,
                    e.verifyEmail = function () {
                        return i.verifyEmail(this.getEmail())
                    }
                    ,
                    e.isLoggedIn = function () {
                        return !!this.loggedIn
                    }
                    ,
                    e.isLoggingOut = function () {
                        return !!this.loggingOut
                    }
                    ,
                    e.didLogoutFail = function () {
                        return !!this.logoutFailed
                    }
                    ,
                    e.getEmail = function () {
                        return this.email
                    }
                    ,
                    e.getFirstName = function () {
                        return s.computeFirstName(this.name)
                    }
                    ,
                    e.getFullName = function () {
                        return this.name
                    }
                    ,
                    e.getSubscriptions = function () {
                        return this.subscriptions
                    }
                    ,
                    e.getVerificationStatus = function () {
                        return this.verificationStatus
                    }
                    ,
                    e.getUserAsJSON = function () {
                        return this.isLoggedIn() ? {
                            email: this.email,
                            name: this.name,
                            verificationStatus: this.verificationStatus,
                            subscriptions: this.subscriptions
                        } : void 0
                    }
            });
        return s.computeFirstName = function (e) {
            if (!e)
                return "";
            if (e.match(/[\d@_&\.\']/))
                return e;
            var t = e.split(" ");
            return t[0].length >= 3 ? t[0] : e
        }
            ,
            s
    }),
    define("main/geometry_backend", ["require", "main/graph", "./backend"], function (e) {
        var t = e("main/graph")
            , n = e("./backend")
            , r = {
                saveConstruction: function (e, r) {
                    if (!r.hasOwnProperty("myConstructions"))
                        throw new Error("Argument Error: saveConstruction options must specify myConstructions");
                    if (!r.hasOwnProperty("isUpdate"))
                        throw new Error("Argument Error: saveConstruction options must specify isUpdate");
                    var i = {
                        state: e.graphData,
                        parent_hash: e.parentHash,
                        thumb_data: e.thumbURL,
                        hash: e.hash,
                        my_constructions: r.myConstructions,
                        is_update: r.isUpdate,
                        title: e.title || void 0
                    };
                    return n.post("/api/v1/geometry/save", i).then(function (n) {
                        return t.updateFromSync(e, n),
                            e
                    })
                },
                getConstructions: function () {
                    return n.getJSON("/api/v1/geometry/my_constructions")
                },
                removeConstruction: function (e) {
                    return n.post("/api/v1/geometry/my_constructions/remove", {
                        hash: e.hash
                    })
                }
            };
        return r
    }),
    define("lib/random_hash", ["require", "exports", "module"], function (e, t) {
        function n(e) {
            this.bauArc4 = new o(i(e))
        }
        function r(e) {
            return e & a - 1
        }
        function i(e) {
            var t, n = e + "", i = [], o = 0;
            for (t = 0; t < n.length; t++)
                i[r(t)] = r((o ^= 19 * i[r(t)]) + n.charCodeAt(t));
            return i
        }
        function o(e) {
            var t, n, i = this, o = e.length, s = 0, c = i.i = i.j = i.m = 0;
            for (i.S = [],
                i.c = [],
                o || (e = [o++]); s < a;)
                i.S[s] = s++;
            for (s = 0; s < a; s++)
                t = i.S[s],
                    c = r(c + t + e[s % o]),
                    n = i.S[c],
                    i.S[s] = n,
                    i.S[c] = t;
            i.g = function (e) {
                var t = i.S
                    , n = r(i.i + 1)
                    , o = t[n]
                    , s = r(i.j + o)
                    , c = t[s];
                t[n] = c,
                    t[s] = o;
                for (var l = t[r(o + c)]; --e;)
                    n = r(n + 1),
                        o = t[n],
                        s = r(s + o),
                        c = t[s],
                        t[n] = c,
                        t[s] = o,
                        l = l * a + t[r(o + c)];
                return i.i = n,
                    i.j = s,
                    l
            }
                ,
                i.g(a)
        }
        n.prototype.g = function (e) {
            for (var t = Array(e), n = 0; n < e; n++)
                t[n] = this.bauArc4.g(1);
            return t
        }
            ;
        var s, a = 256, c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", l = c.toLowerCase(), u = 62, d = 10, p = function (e) {
            if (!e || !e.length || e.length < 32)
                throw new Error("You must supply a seed to RandomHashFactory. It should have at least 128 bits of entropy, but was " + e);
            var t = new n(e);
            this.next = function () {
                for (var e, n = Array(d), r = 0; r < d;)
                    e = t.g(1)[0] >> 2,
                        e < u && (n[r] = l[e],
                            r++);
                return n.join("")
            }
                ,
                this.nextSeed = function () {
                    for (var e = 16, n = t.g(e), r = Array(e), i = 0; i < e; i++)
                        r[i] = n[i].toString(16),
                            1 === r[i].length && (r[i] = "0" + r[i]);
                    return r.join("")
                }
        };
        return t.next = function () {
            if (!s)
                throw "Random Hash Factory not initialized";
            return s.next()
        }
            ,
            t.nextSeed = function () {
                if (!s)
                    throw "Random Hash Factory not initialized";
                return s.nextSeed()
            }
            ,
            t.init = function (e) {
                s = new p(e)
            }
            ,
            t
    }),
    define("main/graphs_controller", ["require", "jquery", "underscore", "pjs", "main/graph", "main/calculator_backend", "main/geometry_backend", "main/parse_json_errors", "underscore_model", "lib/random_hash", "lib/animation-frame", "bugsnag"], function (e) {
        var t = e("jquery")
            , n = e("underscore")
            , r = e("pjs")
            , i = e("main/graph")
            , o = e("main/calculator_backend")
            , s = e("main/geometry_backend")
            , a = e("main/parse_json_errors")
            , c = e("underscore_model")
            , l = e("lib/random_hash")
            , u = e("lib/animation-frame")
            , d = e("bugsnag")
            , p = r(c, function (e, r) {
                e.init = function (e, t, o, s, a) {
                    r.init.call(this),
                        this.product = a,
                        this.api = e,
                        this.t = t,
                        this.previousGraph = void 0,
                        this.randomHash = l,
                        this._seedRandom(s),
                        this.__savedGraphs = [];
                    var c = o.map(i.fromAjax);
                    this.__exampleGraphs = n.filter(c, function (e) {
                        return !e.betchacant
                    }),
                        this.__betchacantGraphs = n.filter(c, function (e) {
                            return e.betchacant
                        }),
                        this.__graphInfoCache = {},
                        this.__exampleGraphs.forEach(function (e) {
                            this._addGraphToCache(e)
                        }
                            .bind(this)),
                        this.__betchacantGraphs.forEach(function (e) {
                            this._addGraphToCache(e)
                        }
                            .bind(this)),
                        this.lastSync = void 0,
                        this.lastSaveFailureMessage = "",
                        this.recentSaveFailure = !1,
                        this.recentSaveSuccess = !1,
                        this.saving = !1,
                        this.syncError = !1,
                        this.isLoadingGraphs = !1,
                        this.currentGraph = i(),
                        this._enableLoadingGraphStates()
                }
                    ,
                    e._seedRandom = function (e) {
                        if (!e)
                            return void alert(this.t("Something went wrong, please report this to desmos.com support. (Error __error_num__)", {
                                error_num: "77361"
                            }));
                        var t = new Date
                            , n = "" + e + t.getTime() + t.getMilliseconds();
                        this.randomHash.init(n)
                    }
                    ,
                    e.requestDeleteGraph = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        t.canCancelDelete = !0,
                            t.deleteTimeout = setTimeout(this._deleteGraph.bind(this, e), 3e3),
                            t.isDeletingGraph = !0,
                            t.didDeleteGraphFail = !1,
                            this.triggerEvent("listChanged"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e._removeGraphByHash = function (e) {
                        var t = n.indexOf(n.pluck(this.__savedGraphs, "hash"), e);
                        t !== -1 && this.__savedGraphs.splice(t, 1)
                    }
                    ,
                    e._deleteGraph = function (e) {
                        var t = this
                            , n = e.hash
                            , r = this._getCachedGraphInfo(e);
                        r.canCancelDelete = !1,
                            t.triggerEvent("listChanged"),
                            t.triggerEvent("triggerRender");
                        var i = "graphing" === this.product ? o.removeGraph(e) : s.removeConstruction(e);
                        i.done(function () {
                            t._removeGraphByHash(n)
                        }).fail(function () {
                            r.didDeleteGraphFail = !0
                        }).always(function () {
                            r.isDeletingGraph = !1,
                                t.triggerEvent("listChanged"),
                                t.triggerEvent("triggerRender")
                        })
                    }
                    ,
                    e.cancelDeleteGraph = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        clearTimeout(t.deleteTimeout),
                            t.isDeletingGraph = !1,
                            t.didDeleteGraphFail = !1,
                            t.canCancelDelete = !1,
                            this.triggerEvent("listChanged"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.millisecondsSinceSync = function () {
                        return this.lastSync ? Date.now() - this.lastSync : 1 / 0
                    }
                    ,
                    e.clear = function () {
                        this.lastSync = void 0,
                            this.setSavedGraphsFromJSON([])
                    }
                    ,
                    e.dismissSaveError = function () {
                        this.recentSaveFailure = !1,
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e._triggerSaveSuccess = function () {
                        this.saving = !1,
                            this.recentSaveSuccess = !0,
                            this.lastSaveFailureMessage = void 0,
                            this.triggerEvent("triggerRender"),
                            this.recentSaveTimeout = setTimeout(function () {
                                this.recentSaveSuccess = !1,
                                    this.triggerEvent("triggerRender")
                            }
                                .bind(this), 3e3)
                    }
                    ,
                    e._triggerSaveError = function (e) {
                        var t = e.length && e[0].message ? this.t(e[0].message) : this.t("Unexpected error.");
                        this.saving = !1,
                            this.recentSaveFailure = !0,
                            this.lastSaveFailureMessage = t,
                            this.triggerEvent("triggerRender"),
                            this.recentSaveTimeout = setTimeout(this.dismissSaveError.bind(this), 6e4)
                    }
                    ,
                    e._updateGraphData = function (e) {
                        var t = JSON.stringify(this.api.getState());
                        e.setProperty("graphData", t),
                            e.setProperty("parentHash", e.hash),
                            e.setProperty("hash", this.randomHash.next());
                        var n = this.api.screenshot({
                            width: 200,
                            height: 200,
                            targetPixelRatio: 2
                        });
                        e.setProperty("thumbURL", n)
                    }
                    ,
                    e._clearSaveTimeout = function () {
                        this.recentSaveFailure = !1,
                            this.recentSaveSuccess = !1,
                            this.lastSaveFailureMessage = void 0,
                            this.triggerEvent("triggerRender"),
                            clearTimeout(this.recentSaveTimeout)
                    }
                    ,
                    e.save = function (e) {
                        var t = this
                            , n = e && e.newTitle
                            , r = !(!e || !e.saveCopy);
                        n && (t.currentGraph.title = n),
                            t._clearSaveTimeout(),
                            t.saving = !0,
                            t.triggerEvent("triggerRender");
                        var i = this.currentGraph.copy();
                        t._updateGraphData(i);
                        var c = !r && t.wasCurrentGraphEverSaved()
                            , l = "graphing" === this.product ? o.saveGraph(i, {
                                myGraphs: !0,
                                isUpdate: c
                            }) : s.saveConstruction(i, {
                                myConstructions: !0,
                                isUpdate: c
                            });
                        l.done(function (e) {
                            t.currentGraph = e.copy(),
                                t._onCurrentGraphChanged(),
                                t.triggerEvent("clearUnsavedChanges"),
                                t.triggerEvent("triggerRender"),
                                c && t._removeGraphByHash(e.parentHash),
                                t.__savedGraphs.unshift(e),
                                t._addGraphToCache(e),
                                t.triggerEvent("listChanged"),
                                t.triggerEvent("triggerRender"),
                                t._triggerSaveSuccess()
                        }).fail(function (e) {
                            t._triggerSaveError(a(e))
                        })
                    }
                    ,
                    e.shareGraph = function () {
                        var e = this.currentGraph.copy();
                        this._updateGraphData(e);
                        var t = "graphing" === this.product ? o.saveGraph(e, {
                            myGraphs: !1,
                            isUpdate: !1
                        }) : s.saveConstruction(e, {
                            myConstructions: !1,
                            isUpdate: !1
                        });
                        return t
                    }
                    ,
                    e.isCurrentGraphTitled = function () {
                        return !!this.currentGraph.title
                    }
                    ,
                    e.wasCurrentGraphEverSaved = function () {
                        var e = this.currentGraph;
                        if (!e || !e.hash)
                            return !1;
                        var t = e.hash;
                        return n.any(this.__savedGraphs, function (e) {
                            return e.hash === t
                        })
                    }
                    ,
                    e.refreshGraphs = function () {
                        var e = this;
                        e.isLoadingGraphs = !0,
                            e.syncError = !1,
                            e.triggerEvent("triggerRender");
                        var t = "graphing" === this.product ? o.getGraphs() : s.getConstructions();
                        t.done(function (t) {
                            e.lastSync = Date.now(),
                                e.setSavedGraphsFromJSON(t.myGraphs || t.myConstructions)
                        }).fail(function () {
                            e.syncError = !0,
                                e.triggerEvent("onSyncError")
                        }).always(function () {
                            e.isLoadingGraphs = !1,
                                e.triggerEvent("triggerRender")
                        })
                    }
                    ,
                    e.getSavedGraphs = function () {
                        return this.__savedGraphs.slice(0)
                    }
                    ,
                    e.getExampleGraphs = function () {
                        return this.__exampleGraphs.slice(0)
                    }
                    ,
                    e.getBetchacantGraphs = function () {
                        return this.__betchacantGraphs.slice(0)
                    }
                    ,
                    e.getSavedAndExampleGraphs = function () {
                        return this.__savedGraphs.concat(this.__exampleGraphs)
                    }
                    ,
                    e.setSavedGraphsFromJSON = function (e) {
                        e || (e = []),
                            this.__savedGraphs = e.map(function (e) {
                                var t = i.fromAjax(e)
                                    , n = this._getCachedGraphInfo(t);
                                return n ? n.graph : (this._addGraphToCache(t),
                                    t)
                            }
                                .bind(this)),
                            this._lazyLoadGraphStates(),
                            this.triggerEvent("listChanged"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.getSavedGraphsAsJSON = function () {
                        return this.__savedGraphs.map(i.toAjax)
                    }
                    ,
                    e._enableLoadingGraphStates = function () {
                        clearTimeout(this.__loadNextGraphStateTimeout);
                        var e = function () {
                            this._loadNextGraphState(),
                                this.__loadNextGraphStateTimeout = setTimeout(e, 50)
                        }
                            .bind(this);
                        e()
                    }
                    ,
                    e._disableLoadingGraphStates = function () {
                        clearTimeout(this.__loadNextGraphStateTimeout)
                    }
                    ,
                    e._loadNextGraphState = function () {
                        if (!this.__currentAjaxRequest) {
                            var e = this._dequeueGraphInfo();
                            e && (this.__currentAjaxRequest = this.loadGraphImmediately(e.graph),
                                this.__currentAjaxRequest.always(function () {
                                    this.__currentAjaxRequest = void 0
                                }
                                    .bind(this)))
                        }
                    }
                    ,
                    e.loadGraphImmediately = function (e) {
                        var n = t.Deferred();
                        if (!e.graphData) {
                            var r = this._getSameSchemeURL(e.stateURL)
                                , i = this._getCachedGraphInfo(e);
                            return i.isDataLoading = !0,
                                t.getJSON(r).done(function (t) {
                                    e.graphData = t,
                                        i.didDataLoadFail = !1,
                                        n.resolve(t)
                                }).fail(function (e) {
                                    i.didDataLoadFail = !0,
                                        n.reject(e)
                                }
                                    .bind(this)).always(function (e) {
                                        i.isDataLoading = !1,
                                            this.triggerEvent("listChanged"),
                                            this.triggerEvent("triggerRender")
                                    }
                                        .bind(this))
                        }
                        return u.requestAnimationFrame(function () {
                            n.resolve()
                        }),
                            n
                    }
                    ,
                    e._getSameSchemeURL = function (e) {
                        return "file:" === window.location.protocol ? e : e
                    }
                    ,
                    e._getCachedGraphInfo = function (e) {
                        return e && this.__graphInfoCache[e.getCollectionKey()]
                    }
                    ,
                    e._addGraphToCache = function (e) {
                        this.__graphInfoCache[e.getCollectionKey()] = {
                            graph: e
                        }
                    }
                    ,
                    e._enqueueGraphInfo = function (e) {
                        this.__nextAjaxRequestPriority || (this.__nextAjaxRequestPriority = 0),
                            e.ajaxPriority = ++this.__nextAjaxRequestPriority
                    }
                    ,
                    e._dequeueGraphInfo = function () {
                        var e = n.max(this.__graphInfoCache, "ajaxPriority");
                        return n.isObject(e) ? (delete e.ajaxPriority,
                            e) : null
                    }
                    ,
                    e.loadDataForGraph = function (e) {
                        if (e) {
                            var t = this._getCachedGraphInfo(e);
                            if (!t)
                                throw new Error('graphsController does not have a reference to graph with hash "' + e.hash + '"');
                            t.graph.graphData || (t.isDataLoading = !0,
                                t.didDataLoadFail = !1,
                                this._enqueueGraphInfo(t),
                                this.triggerEvent("triggerRender"))
                        }
                    }
                    ,
                    e._lazyLoadGraphStates = function () {
                        for (var e = 20, t = this.getSavedAndExampleGraphs(), n = Math.min(e, t.length) - 1; n >= 0; n--)
                            this.loadDataForGraph(t[n])
                    }
                    ,
                    e.didDataLoadFail = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        return !(!t || !t.didDataLoadFail)
                    }
                    ,
                    e.didDeleteGraphFail = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        return !(!t || !t.didDeleteGraphFail)
                    }
                    ,
                    e.isDeletingGraph = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        return !(!t || !t.isDeletingGraph)
                    }
                    ,
                    e.canCancelDelete = function (e) {
                        var t = this._getCachedGraphInfo(e);
                        return !(!t || !t.canCancelDelete)
                    }
                    ,
                    e.loadGraph = function (e) {
                        this.previousGraph = this.currentGraph ? this.currentGraph.copy() : i(),
                            this.previousGraph.graphData = JSON.stringify(this.api.getState());
                        var t = e.copy();
                        delete t.example,
                            this.api.setState(t.graphData),
                            this.currentGraph = t,
                            this._onCurrentGraphChanged(),
                            this.triggerEvent("clearUndoRedo"),
                            this.triggerEvent("clearUnsavedChanges"),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.restorePreviousGraph = function () {
                        this.loadGraph(this.previousGraph || i())
                    }
                    ,
                    e.clearGraph = function () {
                        this.loadGraph(i()),
                            this.triggerEvent("onClearGraph")
                    }
                    ,
                    e._onCurrentGraphChanged = function () {
                        var e = this.currentGraph;
                        e.title ? document.title = e.title : "graphing" === this.product ? document.title = this.t("Desmos | Graphing Calculator") : document.title = this.t("Desmos | Geometry"),
                            this._replaceState(e)
                    }
                    ,
                    e._replaceState = function (e) {
                        if (window.history && history.replaceState) {
                            var t = e.getURL();
                            t && (window.location.search && (t += window.location.search),
                                t !== window.location.href && history.replaceState(e.hash, e.title, t))
                        }
                    }
                    ,
                    e.toast = function (e, t) {
                        this.triggerEvent("toast", {
                            message: e,
                            opts: t
                        })
                    }
                    ,
                    e.clearGraphByUserAction = function () {
                        var e, t = this;
                        if (this.currentGraph.hash)
                            return this.clearGraph(),
                                e = "geometry" === this.product ? this.t("New construction created.") : this.t("New graph created."),
                                void this.toast(e, {
                                    undoCallback: function () {
                                        t.restorePreviousGraph(),
                                            t._replaceState(t.currentGraph)
                                    }
                                });
                        var n = this.api.getState();
                        this.clearGraph(),
                            e = "geometry" === this.product ? this.t("Construction Cleared.") : this.t("Graph cleared."),
                            this.toast(e, {
                                undoCallback: function () {
                                    t.api.setState(n)
                                }
                            })
                    }
                    ,
                    e.getSaveFailureMessage = function () {
                        return this.lastSaveFailureMessage || ""
                    }
                    ,
                    e.isSaving = function () {
                        return !!this.saving
                    }
                    ,
                    e.didSaveFail = function () {
                        return !!this.recentSaveFailure
                    }
                    ,
                    e.didSaveSucceed = function () {
                        return !!this.recentSaveSuccess
                    }
                    ,
                    e.isSyncing = function () {
                        return !!this.isLoadingGraphs
                    }
                    ,
                    e.didSyncFail = function () {
                        return !!this.syncError
                    }
                    ,
                    e.getCurrentDisplayDate = function () {
                        return this.currentGraph.displayDate()
                    }
                    ,
                    e.getCurrentGraphTitle = function () {
                        return this.currentGraph.title
                    }
                    ,
                    e.getUntitledString = function () {
                        return "geometry" === this.product ? this.t("Untitled") : "graphing" === this.product ? this.t("Untitled Graph") : (d.notify("Unknown product: " + this.product),
                            "Untitled")
                    }
                    ,
                    e.hasUnsavedChanges = function () {
                        return this.api.hasUnsavedChanges()
                    }
            });
        return p
    }),
    define("main/language_controller", ["require", "pjs", "underscore_model", "i18n", "main/cookie"], function (e) {
        var t = e("pjs")
            , n = e("underscore_model")
            , r = e("i18n")
            , i = e("main/cookie")
            , o = t(n, function (e, t) {
                e.init = function (e) {
                    t.init.call(this),
                        this._language = r.detectLanguage(),
                        this.Calc = e
                }
                    ,
                    e.t = function (e, t) {
                        return r.t(e, t, this._language)
                    }
                    ,
                    e.unpack = function (e) {
                        return r.unpack(e, this._language)
                    }
                    ,
                    e.getLanguage = function () {
                        return this._language
                    }
                    ,
                    e.fetchAndSetLanguage = function (e) {
                        r.fetchLanguage(e).then(function () {
                            i.setCookie("lang", e),
                                this._language = e,
                                this.Calc.updateSettings({
                                    language: e
                                })
                        }
                            .bind(this))
                    }
            });
        return o
    }),
    define("main/mygraphs_controller", ["require", "pjs", "jquery", "underscore_model", "lib/aria", "lib/conditional_blur"], function (e) {
        var t = e("pjs")
            , n = e("jquery")
            , r = e("underscore_model")
            , i = e("lib/aria")
            , o = e("lib/conditional_blur").default
            , s = t(r, function (e, t) {
                e.init = function (e, n, r) {
                    t.init.call(this),
                        this.graphsController = e,
                        this.api = n,
                        this.t = r,
                        this.isOpen = !1
                }
                    ,
                    e.isMygraphsOpen = function () {
                        return this.isOpen
                    }
                    ,
                    e.openMygraphs = function (e) {
                        this.isOpen = !0,
                            n("body").addClass("resources-open"),
                            i.alert(this.t("Open graph")),
                            o(),
                            e && "keyboard" === e.device && n(".dcg-action-newblankgraph").focus(),
                            this.triggerEvent("onOpenMygraphs")
                    }
                    ,
                    e.closeMygraphs = function () {
                        this.isOpen = !1,
                            n("body").removeClass("resources-open")
                    }
                    ,
                    e.openBlankGraph = function () {
                        this.closeMygraphs(),
                            this.graphsController.clearGraphByUserAction(),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.onOpenGraph = function (e) {
                        this.graphsController.loadGraph(e.copy()),
                            this._concludeOpenGraph(e)
                    }
                    ,
                    e.toast = function (e, t) {
                        this.triggerEvent("toast", {
                            message: e,
                            opts: t
                        })
                    }
                    ,
                    e._concludeOpenGraph = function (e) {
                        var t = e.title || this.graphsController.getUntitledString()
                            , n = this.t("Opened '__graphTitle__'", {
                                graphTitle: t
                            });
                        this.toast(n, {
                            undoCallback: function () {
                                this.graphsController.restorePreviousGraph()
                            }
                                .bind(this)
                        }),
                            this.closeMygraphs(),
                            this.triggerEvent("triggerRender")
                    }
                    ,
                    e.openGraphBehindCover = function (e) {
                        this.graphsController.loadGraph(e.copy());
                        var t = n.Deferred();
                        return "graphing" === this.graphsController.product ? (this.api._calc.evaluator.notifyWhenSynced(function () {
                            t.resolve()
                        }),
                            setTimeout(function () {
                                t.resolve()
                            }, 6e3)) : "geometry" === this.graphsController.product && t.resolve(),
                            t.then(function () {
                                this._concludeOpenGraph(e)
                            }
                                .bind(this)),
                            t.promise()
                    }
                    ,
                    e.getThumbnail = function () {
                        return this.api.screenshot({
                            width: 200,
                            height: 200,
                            targetPixelRatio: 2
                        })
                    }
            });
        return s
    }),
    define("tours/tour_controller", ["require", "pjs", "tours/all_tours", "lib/urlparser", "i18n", "analytics/google_analytics", "jquery"], function (e) {
        var t = e("pjs")
            , n = e("tours/all_tours")
            , r = e("lib/urlparser")
            , i = e("i18n")
            , o = e("analytics/google_analytics")
            , s = e("jquery")
            , a = t(function (e, t) {
                e.init = function (e) {
                    this.tourManager = e._calc.tourManager,
                        this.Calc = e._calc,
                        this.tourManager.closingMsg = ["<b>__endingMessage__</b><br>", i.t("This message will self-destruct in __seconds__...")].join("");
                }
                    ,
                    e.shouldPopupTour = function (e) {
                        if (this.Calc.controller.getItemCount() > 3)
                            return !0;
                        var t = n[e].tour(this.Calc);
                        return !!t.shouldPopup && t.shouldPopup()
                    }
                    ,
                    e.startTour = function (e, t) {
                        if (e && n[e]) {
                            var r = n[e].tour(this.Calc);
                            o.send(["_trackEvent", "Start " + e + " from " + t, JSON.stringify(this.Calc.getState().expressions)]),
                                this.tourManager.currentTour && this.tourManager.stopTour(),
                                this.tourManager.startTour(r)
                        }
                    }
                    ,
                    e.startTourFromUrl = function () {
                        if (s(".dcg-expressionitem").length < 2)
                            return void setTimeout(this.startTourFromUrl.bind(this), 100);
                        var e = r.getParameter("tour");
                        this.startTour(e, "url")
                    }
                    ,
                    e.setCalc = function (e) {
                        this.Calc = e
                    }
            });
        return a
    }),
    function () {
        define("calculator-shell/controller", ["require", "pjs", "jquery", "flux", "config", "browser", "keys", "tipsy", "bugsnag"], function (e) {
            var t, n, r, i, o, s, a, c;
            return c = e("pjs"),
                t = e("jquery"),
                o = e("flux").Dispatcher,
                i = e("config"),
                n = e("browser"),
                a = e("keys"),
                e("tipsy"),
                r = e("bugsnag"),
                s = c(function (e) {
                    return e.init = function (e) {
                        return this.userController = e.userController,
                            this.graphsController = e.graphsController,
                            this.tourController = e.tourController,
                            this.languageController = e.languageController,
                            this.mygraphsController = e.mygraphsController,
                            this.api = e.api,
                            this.t = e.t,
                            this.unpack = e.unpack,
                            this.product = e.product,
                            this.SOMETHING_WENT_WRONG = this.t("Sorry! Something went wrong. Please try again later."),
                            this._openModal = "none",
                            this._modalDevice = "none",
                            this._openMenu = "none",
                            this.state = {},
                            this.hookupControllers(),
                            this.hookupHotkeys(),
                            this.dispatcher = new o,
                            this.dispatch = function (e) {
                                return function (t) {
                                    return r.leaveBreadcrumb("dispatch::header-controller", {
                                        type: t.type
                                    }),
                                        e.dispatcher.dispatch(t)
                                }
                            }(this),
                            this.dispatcher.register(function (e) {
                                return function (t) {
                                    var n, r;
                                    switch (r = t.type,
                                    n = t.payload,
                                    r) {
                                        case "show-print-dialog":
                                            e.print();
                                            break;
                                        case "save-graph":
                                            e.saveGraph(t.device, n);
                                            break;
                                        case "edit-title":
                                            e.launchEditTitle();
                                            break;
                                        case "launch-login":
                                            e.showModal("login", t.device);
                                            break;
                                        case "edit-account":
                                            e.showModal("account-settings", t.device);
                                            break;
                                        case "export-image":
                                            e.showModal("export-image");
                                            break;
                                        case "launch-change-email":
                                            e.showModal("change-email");
                                            break;
                                        case "create-account":
                                            e.showModal("create-account", t.device);
                                            break;
                                        case "unsupported-browser":
                                            e.showModal("unsupported-browser");
                                            break;
                                        case "recover-password":
                                            e.showModal("recover-password");
                                            break;
                                        case "close-modal":
                                            e.closeModal();
                                            break;
                                        case "show-hotkeys":
                                            e.showModal("hotkeys");
                                            break;
                                        case "show-reenabled":
                                            e.showModal("account-reenabled");
                                            break;
                                        case "toggle-menu":
                                            e.setOpenMenu(n);
                                            break;
                                        case "open-mygraphs":
                                            e.mygraphsController.openMygraphs(t);
                                            break;
                                        case "close-mygraphs":
                                            e.mygraphsController.closeMygraphs()
                                    }
                                    return e.triggerRender()
                                }
                            }(this))
                    }
                        ,
                        e.triggerRender = function () { }
                        ,
                        e.hookupControllers = function () {
                            return this.mygraphsController.observeEvent("onOpenMygraphs", function (e) {
                                return function () {
                                    if (e.userController.isLoggedIn() && e.graphsController.millisecondsSinceSync() > 12e4)
                                        return e.graphsController.refreshGraphs()
                                }
                            }(this)),
                                this.mygraphsController.observeEvent("triggerRender", function (e) {
                                    return function () {
                                        return e.triggerRender()
                                    }
                                }(this)),
                                this.userController.observeEvent("loginChanged", function (e) {
                                    return function () {
                                        return e.userController.isLoggedIn() ? e.graphsController.refreshGraphs() : e.graphsController.clear()
                                    }
                                }(this)),
                                this.userController.observeEvent("triggerRender", function (e) {
                                    return function () {
                                        return e.triggerRender()
                                    }
                                }(this)),
                                this.graphsController.observeEvent("triggerRender", function (e) {
                                    return function () {
                                        return e.triggerRender()
                                    }
                                }(this))
                        }
                        ,
                        e.hookupHotkeys = function () {
                            return t(document).on("keydown", function (e) {
                                return function (t) {
                                    var r, i, o, s;
                                    if (i = t.ctrlKey,
                                        o = t.metaKey,
                                        r = t.altKey,
                                        s = n.IS_APPLE ? !i && o && !r : i && !o && !r)
                                        switch (a.lookupChar(t)) {
                                            case "S":
                                                return t.shiftKey ? e.dispatch({
                                                    type: "edit-title"
                                                }) : e.dispatch({
                                                    type: "save-graph",
                                                    device: "keyboard"
                                                }),
                                                    !1;
                                            case "O":
                                                return e.dispatch({
                                                    type: "open-mygraphs",
                                                    device: "keyboard"
                                                }),
                                                    !1
                                        }
                                }
                            }(this))
                        }
                        ,
                        e.getOpenMenu = function () {
                            return this._openMenu
                        }
                        ,
                        e.getOpenModal = function () {
                            return this._openModal
                        }
                        ,
                        e.hasOpenModal = function () {
                            return "none" !== this._openModal
                        }
                        ,
                        e.getModalDevice = function () {
                            return this._modalDevice
                        }
                        ,
                        e.closeModal = function () {
                            return this._openModal = "none"
                        }
                        ,
                        e.closeMenu = function () {
                            return this._openMenu = "none"
                        }
                        ,
                        e.showModal = function (e, t) {
                            return this.closeMenu(),
                                this._modalDevice = t || "none",
                                this._openModal = e
                        }
                        ,
                        e.setOpenMenu = function (e) {
                            var t;
                            return t = this.getOpenMenu(),
                                this._openMenu = e === t ? "none" : e
                        }
                        ,
                        e.getProduct = function () {
                            return this.product
                        }
                        ,
                        e.isInMaintenanceMode = function () {
                            return i.get("maintenance")
                        }
                        ,
                        e.getPreviewParams = function () {
                            return i.get("previewMode") ? {
                                url: i.get("previewFeedbackUrl"),
                                message: i.get("previewMessage")
                            } : null
                        }
                        ,
                        e.saveGraph = function (e, t) {
                            return this.userController.isLoggedIn() ? (this.graphsController.save({
                                newTitle: null != t ? t.title : void 0,
                                saveCopy: !!(null != t ? t.saveAs : void 0)
                            }),
                                this.closeModal()) : this.showModal("create-account", e)
                        }
                        ,
                        e.simpleSave = function () {
                            return this.graphsController.isCurrentGraphTitled() ? (this.graphsController.save(),
                                this.dispatch({
                                    type: "trigger-render"
                                })) : this.openSaveDialog()
                        }
                        ,
                        e.openSaveDialog = function () {
                            return this.showModal("save"),
                                this.dispatch({
                                    type: "trigger-render"
                                })
                        }
                        ,
                        e.launchEditTitle = function () {
                            if (this.closeMenu(),
                                null == this.getPreviewParams() && !this.isInMaintenanceMode())
                                return this.userController.isLoggedIn() ? this.showModal("save") : this.showModal("create-account")
                        }
                        ,
                        e.getOpenText = function () {
                            return "graphing" === this.product ? this.t("Open Graph") : "geometry" === this.product ? this.t("Open Construction") : void 0
                        }
                })
        })
    }
        .call(this),
    define("main/globalhotkeys", ["require", "exports", "lib/aria", "browser", "keys", "jquery"], function (e, t, n, r, i, o) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = 0
            , a = function () {
                function e(e, t, n) {
                    this.__id = s++ ,
                        this.controller = e,
                        this.headerController = t,
                        this.userController = t.userController,
                        this.mygraphsController = t.mygraphsController,
                        this.instanceHotkeys = n,
                        this.startListening()
                }
                return e.prototype.remove = function () {
                    this.stopListening()
                }
                    ,
                    e.prototype.startListening = function () {
                        var e = this;
                        this.isListening || (o(document).on("keydown.dcg-global-keyboard-listener-" + this.__id, function (t) {
                            return e.handleGlobalKeydown(t)
                        }),
                            this.isListening = !0)
                    }
                    ,
                    e.prototype.stopListening = function () {
                        this.isListening && (o(document).off("keydown.dcg-global-keyboard-listener-" + this.__id),
                            this.isListening = !1)
                    }
                    ,
                    e.prototype.handleGlobalKeydown = function (e) {
                        var t = !1
                            , n = r.IS_APPLE ? e.altKey || e.metaKey : e.ctrlKey;
                        if (e.ctrlKey || e.altKey || e.metaKey || e.shiftKey || i.lookup(e) !== i.ESCAPE) {
                            if (n && 191 === e.which)
                                e.preventDefault(),
                                    e.stopPropagation(),
                                    t = !0,
                                    this.headerController.dispatch({
                                        type: "show-hotkeys"
                                    });
                            else if (e.ctrlKey && (e.altKey || e.metaKey) && !e.shiftKey)
                                if ("A" === i.lookupChar(e))
                                    if (e.preventDefault(),
                                        e.stopPropagation(),
                                        t = !0,
                                        this.userController.isLoggedIn())
                                        this.focusElement(o(document).find(".dcg-account-link"), this.controller.t("Unable to activate account menu"));
                                    else {
                                        var s = o(document).find(".dcg-sign-in");
                                        0 !== s.length && s.trigger("dcg-tap", ["keyboard"])
                                    }
                                else
                                    "L" === i.lookupChar(e) ? (e.preventDefault(),
                                        e.stopPropagation(),
                                        t = !0,
                                        this.focusElement(o(document).find(".dcg-action-language"), this.controller.t("Unable to activate language menu"))) : "H" === i.lookupChar(e) ? (e.preventDefault(),
                                            e.stopPropagation(),
                                            t = !0,
                                            this.focusElement(o(document).find(".dcg-action-help"), this.controller.t("Unable to activate help menu"))) : "S" === i.lookupChar(e) && (e.preventDefault(),
                                                e.stopPropagation(),
                                                t = !0,
                                                this.focusElement(o(document).find(".dcg-action-share"), this.controller.t("Unable to activate share menu")))
                        } else
                            t = !0,
                                this.handleEscape(e);
                        t || this.instanceHotkeys.handleInstanceKeydown(e)
                    }
                    ,
                    e.prototype.handleEscape = function (e) {
                        var t, n = o(".action-close-modal:visible"), i = !!n.length, s = o(".graph-preview"), a = !!s.length, c = o(".dcg-action-close-resources:visible"), l = this.mygraphsController.isMygraphsOpen();
                        if (i ? t = n : (a || l) && (t = c),
                            t) {
                            if (t.trigger("dcg-tap", ["keyboard"]),
                                !r.IS_MOBILE)
                                if (a || i && l)
                                    i && l && o(".new-blank-graph").focus();
                                else {
                                    var u = this.controller.getSelectedItem();
                                    if (u)
                                        this.controller.dispatch({
                                            type: "move-focus-to-item",
                                            id: u.id
                                        });
                                    else {
                                        var d = this.controller.getItemModelByIndex(0);
                                        d && this.controller.dispatch({
                                            type: "move-focus-to-item",
                                            id: d.id
                                        })
                                    }
                                }
                            e && (e.preventDefault(),
                                e.stopPropagation())
                        }
                    }
                    ,
                    e.prototype.focusElement = function (e, t) {
                        e.length ? e.trigger("dcg-tap", ["keyboard"]) : t && n.alert(t)
                    }
                    ,
                    e
            }();
        t.default = a
    }),
    define("loadcss!main", function () { }),
    define("main/instantiate-top-level-components", ["require", "config", "underscore", "main/user_controller", "main/graphs_controller", "main/language_controller", "main/mygraphs_controller", "tours/tour_controller", "calculator-shell/controller", "main/globalhotkeys", "browser", "ipad.scrollfix", "loadcss!main", "api/calculator"], function (e) {
        var t = e("config")
            , n = e("underscore")
            , r = e("main/user_controller")
            , i = e("main/graphs_controller")
            , o = e("main/language_controller")
            , s = e("main/mygraphs_controller")
            , a = e("tours/tour_controller")
            , c = e("calculator-shell/controller")
            , l = e("main/globalhotkeys").default
            , u = e("browser")
            , d = e("ipad.scrollfix");
        e("loadcss!main");
        var p = e("api/calculator");
        return function (e) {
            var h = t.all()
                , f = JSON.parse(e.exampleGraphsRaw);
            h.disableScrollFix || d.limitScrollOnDocument(),
                h.redrawSlowly = !u.IS_MOBILE,
                h.border = !1,
                h.disableScrollFix = !0,
                e.calcOptions && (h = n.extend(h, e.calcOptions));
            var m = document.getElementById("graph-container")
                , g = p.Calculator(m, h, e.onCalcReady)
                , y = a(g);
            window.tourController = y;
            var v = o(g)
                , b = r()
                , x = v.t.bind(v)
                , w = v.unpack.bind(v)
                , E = i(g, x, f, e.seed, "graphing");
            E.observeEvent("driveAccessError", function (e, t) {
                g._calc.controller.dispatch({
                    type: "toast/show",
                    toast: {
                        message: 'Error saving. <a href="' + t.authorizeUrl + '" target="_blank" class="dcg-action-hide">Click here</a> to re-authorize Desmos to save graphs to Google Drive.',
                        toastStyle: "error",
                        hideAfter: 0
                    }
                })
            });
            var _ = s(E, g, x);
            window.userController = b,
                E.observeEvent("onClearGraph", function () {
                    g.focusFirstExpression()
                }),
                _.observeEvent("toast", function (e, t) {
                    var n = {
                        message: t.message
                    };
                    for (var r in t.opts)
                        t.opts.hasOwnProperty(r) && (n[r] = t.opts[r]);
                    g._calc.controller.dispatch({
                        type: "toast/show",
                        toast: n
                    })
                }),
                E.observeEvent("toast", function (e, t) {
                    var n = {
                        message: t.message
                    };
                    for (var r in t.opts)
                        t.opts.hasOwnProperty(r) && (n[r] = t.opts[r]);
                    g._calc.controller.dispatch({
                        type: "toast/show",
                        toast: n
                    })
                }),
                E.observeEvent("clearUnsavedChanges", function () {
                    g._calc.controller.dispatch({
                        type: "clear-unsaved-changes"
                    })
                }),
                E.observeEvent("clearUndoRedo", function () {
                    g._calc.controller.dispatch({
                        type: "clear-undoredo-history"
                    })
                });
            var S = !1;
            g._calc.controller.subToChanges(function () {
                var e = g._calc.controller.hasUnsavedChanges();
                e !== S && M.triggerRender(),
                    S = e
            }),
                g.settings.observe("language", function () {
                    M.triggerRender()
                }),
                g.hasUnsavedChanges = function () {
                    return g._calc.controller.hasUnsavedChanges()
                }
                ;
            var k;
            g.controller.triggerBetchacant = function () {
                g.controller.dispatch({
                    type: "toast/show",
                    toast: {
                        message: g.controller.t("Challenge accepted..."),
                        hideAfter: 0,
                        toastStyle: "cover"
                    }
                });
                var e = E.getBetchacantGraphs();
                k = void 0 !== k ? (k + 1) % e.length : Math.floor(Math.random() * e.length),
                    E.loadGraphImmediately(e[k]).done(function (t) {
                        _.openGraphBehindCover(e[k])
                    })
            }
                ,
                t.get("expressions") !== !1 && (g.controller.triggerClearGraph = function () {
                    E.clearGraphByUserAction()
                }
                    ,
                    g.observeEvent("openDrawer", function () {
                        M.dispatch({
                            type: "open-mygraphs"
                        })
                    }));
            var M = c({
                userController: b,
                graphsController: E,
                tourController: y,
                languageController: v,
                mygraphsController: _,
                api: g,
                t: x,
                unpack: w,
                product: "graphing"
            });
            return g._calc.globalHotkeys = new l(g._calc.controller, M, g._calc.instanceHotkeys),
                {
                    Calc: g,
                    userController: b,
                    graphsController: E,
                    tourController: y,
                    headerController: M
                }
        }
    }),
    define("main/calc_desktop", ["require", "jquery", "browser", "main/load_data", "config", "loadcss!print", "i18n", "main/graph", "text!example_graphs", "api/calculator", "dcgview", "calculator-shell/wrapper", "calculator-shell/modals", "mygraphs/wrapper", "main/disable-dragdrop-events", "./instantiate-top-level-components", "main/backend", "bugsnag", "analytics/google_analytics"], function (e) {
        function t(t) {
            function s(e, t) {
                return g._calc.controller.t(e, t)
            }
            var f = e("./instantiate-top-level-components")({
                seed: i.seed,
                modalContainer: "body",
                exampleGraphsRaw: c,
                calcOptions: {
                    pasteGraphLink: !0
                }
            })
                , g = f.Calc;
            g._calc.controller.setBugsnagContext("main-controller"),
                g.updateSettings({
                    language: t
                });
            var y = f.userController
                , v = f.graphsController
                , b = f.tourController
                , x = f.headerController
                , w = e("main/backend")
                , E = e("bugsnag")
                , _ = e("analytics/google_analytics");
            if (o.get("testing") || (E.init(),
                _.init("UA-22127755-1")),
                y.observeEvent("googleLogin", function (e) {
                    var t = window.open(w.getGoogleLoginURL(e), "drive_window", "width=650,height=530,resizable,scrollbars");
                    t || alert(s("Login window blocked. Please allow popups from desmos.com to sign in with Google."))
                }),
                o.get("no_navigation_warning") || n(window).on("beforeunload", function () {
                    if (g.hasUnsavedChanges())
                        return s("Are you sure you want to leave this graph? Your unsaved work will be lost.")
                }),
                i.user && y.completeLogin(i.user, "load"),
                i.graph ? v.loadGraph(a.fromAjax(i.graph)) : (v.clearGraph(),
                    i.latex && g.setExpression({
                        latex: i.latex
                    })),
                b.startTourFromUrl(),
                y.getEmailChangeToken() && x.dispatch({
                    type: "launch-change-email"
                }),
                x.triggerRender = function () {
                    this.viewWrapper.update(),
                        this.modalsView.update(),
                        this.myGraphsWrapper.update(),
                        y.getEmailChangeToken() && "change-email" !== x.getOpenModal() && history.replaceState(null, null, document.location.pathname)
                }
                    .bind(this),
                this.viewWrapper = u.mountToNode(d, document.getElementById("desmos-container"), {
                    controller: function () {
                        return x
                    }
                }),
                this.modalsView = u.mountToNode(p, document.getElementById("dcg-modal-container"), {
                    controller: function () {
                        return x
                    }
                }),
                this.myGraphsWrapper = u.mountToNode(h, document.getElementById("mygraphs-container"), {
                    controller: u.const(x),
                    makeAPI: function (e) {
                        return new l.Calculator(e, {
                            settingsMenu: !1,
                            keypad: !1,
                            zoomButtons: !1,
                            branding: !1,
                            border: !1,
                            disableScrollFix: !0,
                            expressions: !1
                        })
                    }
                }),
                !r.IS_ANDROID || r.IS_CHROME || r.IS_FIREFOX || x.dispatch({
                    type: "unsupported-browser"
                }),
                document.location.search.match(/(\?|\&)create_account/) ? (history.replaceState(null, null, document.location.pathname),
                    y.isLoggedIn() ? g._calc.controller.dispatch({
                        type: "toast/show",
                        toast: {
                            message: s("Logged in successfully!")
                        }
                    }) : x.dispatch({
                        type: "create-account"
                    })) : document.location.search.match(/(\?|\&)login/) ? (history.replaceState(null, null, document.location.pathname),
                        y.isLoggedIn() ? g._calc.controller.dispatch({
                            type: "toast/show",
                            toast: {
                                message: s("Logged in successfully!")
                            }
                        }) : x.dispatch({
                            type: "launch-login"
                        })) : document.location.search.match(/(\?|\&)reset_password/) && (history.replaceState(null, null, document.location.pathname),
                            y.isLoggedIn() ? g._calc.controller.dispatch({
                                type: "toast/show",
                                toast: {
                                    message: s("Logged in successfully!")
                                }
                            }) : x.dispatch({
                                type: "recover-password"
                            })),
                window.matchMedia) {
                var S = window.matchMedia("print");
                S.addListener(function (e) {
                    e.matches ? g._calc.controller.dispatch({
                        type: "enter-printmode"
                    }) : g._calc.controller.dispatch({
                        type: "exit-printmode"
                    })
                })
            }
            return m(n(document)),
                g
        }
        var n = e("jquery")
            , r = e("browser")
            , i = e("main/load_data")
            , o = e("config");
        e("loadcss!print");
        var s = e("i18n")
            , a = e("main/graph")
            , c = e("text!example_graphs")
            , l = e("api/calculator")
            , u = e("dcgview")
            , d = e("calculator-shell/wrapper")
            , p = e("calculator-shell/modals")
            , h = e("mygraphs/wrapper")
            , f = s.detectLanguage()
            , m = e("main/disable-dragdrop-events").default;
        return s.fetchLanguage(f).then(function () {
            return t(f)
        })
    }),
    define("main/noconflict", ["require", "jquery", "underscore"], function (e) {
        var t = e("jquery")
            , n = e("underscore");
        window.Desmos = window.Desmos || {};
        var r = window.Desmos;
        return function () {
            r.$ = t,
                r._ = n,
                r.$.noConflict(!0),
                r._.noConflict()
        }
    }),
    define("toplevel/calculator_desktop", ["require", "touchtracking", "main/calc_desktop", "main/noconflict"], function (e) {
        var t = e("touchtracking");
        t.monitor(document.body);
        var n = e("main/calc_desktop");
        return e("main/noconflict")(),
            n
    });
